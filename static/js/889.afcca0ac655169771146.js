var PB=Object.defineProperty,kB=Object.defineProperties;var zB=Object.getOwnPropertyDescriptors;var X2=Object.getOwnPropertySymbols;var wC=Object.prototype.hasOwnProperty,TC=Object.prototype.propertyIsEnumerable;var Y2=Math.pow,SC=(u,n,A)=>n in u?PB(u,n,{enumerable:!0,configurable:!0,writable:!0,value:A}):u[n]=A,Zn=(u,n)=>{for(var A in n||(n={}))wC.call(n,A)&&SC(u,A,n[A]);if(X2)for(var A of X2(n))TC.call(n,A)&&SC(u,A,n[A]);return u},os=(u,n)=>kB(u,zB(n));var Cn=(u,n)=>{var A={};for(var C in u)wC.call(u,C)&&n.indexOf(C)<0&&(A[C]=u[C]);if(u!=null&&X2)for(var C of X2(u))n.indexOf(C)<0&&TC.call(u,C)&&(A[C]=u[C]);return A};var fs=(u,n,A)=>new Promise((C,d)=>{var g=j=>{try{_(A.next(j))}catch($){d($)}},i=j=>{try{_(A.throw(j))}catch($){d($)}},_=j=>j.done?C(j.value):Promise.resolve(j.value).then(g,i);_((A=A.apply(u,n)).next())});(self.webpackChunkpro_react_admin=self.webpackChunkpro_react_admin||[]).push([[889],{8060:function(u,n,A){"use strict";A.r(n),A.d(n,{AccumulativeShadows:function(){return cx},AdaptiveDpr:function(){return iB},AdaptiveEvents:function(){return oB},ArcballControls:function(){return Fv},AsciiRenderer:function(){return Lu},BBAnchor:function(){return b4},Backdrop:function(){return qw},BakeShadows:function(){return nB},Billboard:function(){return ey},Bounds:function(){return rx},Box:function(){return sw},Bvh:function(){return h4},CameraControls:function(){return Z3},CameraShake:function(){return Fw},Capsule:function(){return bw},CatmullRomLine:function(){return x_},Caustics:function(){return nT},Center:function(){return zE},Circle:function(){return aw},Clone:function(){return C0},Cloud:function(){return ET},ComputedAttribute:function(){return iv},Cone:function(){return lw},ContactShadows:function(){return lx},CubeCamera:function(){return Sd},CubicBezierLine:function(){return M_},CurveModifier:function(){return P4},CycleRaycast:function(){return ot},Cylinder:function(){return cw},Decal:function(){return E3},Detailed:function(){return eB},DeviceOrientationControls:function(){return I3},Dodecahedron:function(){return vw},Edges:function(){return v0},Effects:function(){return ev},Environment:function(){return ax},EnvironmentCube:function(){return VE},EnvironmentMap:function(){return R2},EnvironmentPortal:function(){return sx},Example:function(){return w4},Extrude:function(){return _w},FaceControls:function(){return f},FaceLandmarker:function(){return tE},FaceLandmarkerDefaults:function(){return AA},Facemesh:function(){return Yv},FacemeshDatas:function(){return z0},FacemeshEye:function(){return mA},FacemeshEyeDefaults:function(){return Xf},FirstPersonControls:function(){return pA},Float:function(){return Ow},FlyControls:function(){return wv},GizmoHelper:function(){return xe},GizmoViewcube:function(){return Jt},GizmoViewport:function(){return En},Gltf:function(){return Du},GradientTexture:function(){return c3},Grid:function(){return kn},Html:function(){return ut},Hud:function(){return N},Icosahedron:function(){return Aw},Image:function(){return Zg},Instance:function(){return jx},Instances:function(){return Hx},IsObject:function(){return Jg},KeyboardControls:function(){return h_},Lathe:function(){return Ew},Lightformer:function(){return hT},Line:function(){return Qp},Loader:function(){return ln},MapControls:function(){return sA},MarchingCube:function(){return Of},MarchingCubes:function(){return v3},MarchingPlane:function(){return _3},Mask:function(){return cB},Merged:function(){return ZT},MeshDiscardMaterial:function(){return nw},MeshDistortMaterial:function(){return G4},MeshPortalMaterial:function(){return dB},MeshReflectorMaterial:function(){return H4},MeshRefractionMaterial:function(){return $4},MeshTransmissionMaterial:function(){return tw},MeshWobbleMaterial:function(){return N4},Octahedron:function(){return yw},OrbitControls:function(){return Rv},OrthographicCamera:function(){return Gf},PerformanceMonitor:function(){return sB},PerspectiveCamera:function(){return R3},PivotControls:function(){return OB},Plane:function(){return tx},Point:function(){return QT},PointMaterial:function(){return rw},PointMaterialImpl:function(){return $M},PointerLockControls:function(){return Q3},Points:function(){return KT},PointsBuffer:function(){return Ix},Polyhedron:function(){return mw},PositionPoint:function(){return wx},PositionalAudio:function(){return C_},Preload:function(){return tB},PresentationControls:function(){return Mb},QuadraticBezierLine:function(){return b_},RandomizedLight:function(){return px},Reflector:function(){return iT},RenderTexture:function(){return Jx},Resize:function(){return Tw},Ring:function(){return gw},RoundedBox:function(){return Cw},Sampler:function(){return M0},ScreenQuad:function(){return ww},ScreenSpace:function(){return y_},Scroll:function(){return Li},ScrollControls:function(){return Nl},Segment:function(){return $T},SegmentObject:function(){return Vx},Segments:function(){return qT},Select:function(){return m_},Shadow:function(){return $w},Shape:function(){return Mw},Sky:function(){return mT},SoftShadows:function(){return ow},Sparkles:function(){return xT},Sphere:function(){return pw},SpotLight:function(){return dT},SpotLightShadow:function(){return uT},SpriteAnimator:function(){return T4},Stage:function(){return Jw},Stars:function(){return vT},Stats:function(){return BS},Svg:function(){return lv},Tetrahedron:function(){return fw},Text:function(){return Gy},Text3D:function(){return A0},Torus:function(){return dw},TorusKnot:function(){return hw},TrackballControls:function(){return L3},Trail:function(){return nm},TransformControls:function(){return U3},Tube:function(){return uw},View:function(){return vB},Wireframe:function(){return HT},accumulativeContext:function(){return QE},calcPosFromAngles:function(){return Ax},calculateScaleFactor:function(){return iC},isWebGL2Available:function(){return $y},meshBounds:function(){return rB},shaderMaterial:function(){return hp},useAnimations:function(){return g4},useAspect:function(){return IS},useBVH:function(){return d4},useBounds:function(){return ix},useBoxProjectedEnv:function(){return E4},useCamera:function(){return FS},useContextBridge:function(){return f4},useCubeCamera:function(){return bv},useCubeTexture:function(){return wr},useCursor:function(){return Rt},useDepthBuffer:function(){return RS},useDetectGPU:function(){return zS},useEnvironment:function(){return HE},useFBO:function(){return rc},useFBX:function(){return pE},useFaceControls:function(){return y},useFaceLandmarker:function(){return qv},useFont:function(){return Kg},useGLTF:function(){return yl},useGizmoContext:function(){return Z},useHelper:function(){return EM},useIntersect:function(){return VM},useKTX2:function(){return bE},useKeyboardControls:function(){return f_},useMask:function(){return pB},useMatcapTexture:function(){return TT},useNormalTexture:function(){return IT},usePerformanceMonitor:function(){return aB},useProgress:function(){return It},useScroll:function(){return nu},useSelect:function(){return A_},useSurfaceSampler:function(){return b0},useTexture:function(){return fp},useTrail:function(){return bd},useTrailTexture:function(){return S4},useVideoTexture:function(){return Kv}});var C=A(7462),d=A(7294),g=A(745),i=A(9477),_=A(5465);const j=new i.Vector3,$=new i.Vector3,re=new i.Vector3;function Q(s,t,r){const l=j.setFromMatrixPosition(s.matrixWorld);l.project(t);const c=r.width/2,p=r.height/2;return[l.x*c+c,-(l.y*p)+p]}function ae(s,t){const r=j.setFromMatrixPosition(s.matrixWorld),l=$.setFromMatrixPosition(t.matrixWorld),c=r.sub(l),p=t.getWorldDirection(re);return c.angleTo(p)>Math.PI/2}function pe(s,t,r,l){const c=j.setFromMatrixPosition(s.matrixWorld),p=c.clone();p.project(t),r.setFromCamera(p,t);const h=r.intersectObjects(l,!0);if(h.length){const m=h[0].distance;return c.distanceTo(r.ray.origin)<m}return!0}function st(s,t){if(t instanceof i.OrthographicCamera)return t.zoom;if(t instanceof i.PerspectiveCamera){const r=j.setFromMatrixPosition(s.matrixWorld),l=$.setFromMatrixPosition(t.matrixWorld),c=t.fov*Math.PI/180,p=r.distanceTo(l);return 1/(2*Math.tan(c/2)*p)}else return 1}function Pe(s,t,r){if(t instanceof i.PerspectiveCamera||t instanceof i.OrthographicCamera){const l=j.setFromMatrixPosition(s.matrixWorld),c=$.setFromMatrixPosition(t.matrixWorld),p=l.distanceTo(c),h=(r[1]-r[0])/(t.far-t.near),m=r[1]-h*t.far;return Math.round(h*p+m)}}const Oe=s=>Math.abs(s)<1e-10?0:s;function Ze(s,t,r=""){let l="matrix3d(";for(let c=0;c!==16;c++)l+=Oe(t[c]*s.elements[c])+(c!==15?",":")");return r+l}const rt=(s=>t=>Ze(t,s))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),gt=(s=>(t,r)=>Ze(t,s(r),"translate(-50%,-50%)"))(s=>[1/s,1/s,1/s,1,-1/s,-1/s,-1/s,-1,1/s,1/s,1/s,1,1,1,1,1]);function at(s){return s&&typeof s=="object"&&"current"in s}const ut=d.forwardRef((Y,J)=>{var ce=Y,{children:s,eps:t=.001,style:r,className:l,prepend:c,center:p,fullscreen:h,portal:m,distanceFactor:v,sprite:E=!1,transform:x=!1,occlude:T,onOcclude:R,castShadow:F,receiveShadow:U,material:P,geometry:O,zIndexRange:z=[16777271,0],calculatePosition:L=Q,as:k="div",wrapperClass:H,pointerEvents:X="auto"}=ce,W=Cn(ce,["children","eps","style","className","prepend","center","fullscreen","portal","distanceFactor","sprite","transform","occlude","onOcclude","castShadow","receiveShadow","material","geometry","zIndexRange","calculatePosition","as","wrapperClass","pointerEvents"]);const{gl:ue,camera:ge,scene:le,size:Me,raycaster:me,events:Te,viewport:Ue}=(0,_.z)(),[Re]=d.useState(()=>document.createElement(k)),Ge=d.useRef(),De=d.useRef(null),Xe=d.useRef(0),Ce=d.useRef([0,0]),Ee=d.useRef(null),_e=d.useRef(null),oe=(m==null?void 0:m.current)||Te.connected||ue.domElement.parentNode,Ae=d.useRef(null),Be=d.useRef(!1),ve=d.useMemo(()=>T&&T!=="blending"||Array.isArray(T)&&T.length&&at(T[0]),[T]);d.useLayoutEffect(()=>{const $e=ue.domElement;T&&T==="blending"?($e.style.zIndex=`${Math.floor(z[0]/2)}`,$e.style.position="absolute",$e.style.pointerEvents="none"):($e.style.zIndex=null,$e.style.position=null,$e.style.pointerEvents=null)},[T]),d.useLayoutEffect(()=>{if(De.current){const $e=Ge.current=g.createRoot(Re);if(le.updateMatrixWorld(),x)Re.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Kt=L(De.current,ge,Me);Re.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Kt[0]}px,${Kt[1]}px,0);transform-origin:0 0;`}return oe&&(c?oe.prepend(Re):oe.appendChild(Re)),()=>{oe&&oe.removeChild(Re),$e.unmount()}}},[oe,x]),d.useLayoutEffect(()=>{H&&(Re.className=H)},[H]);const ke=d.useMemo(()=>x?{position:"absolute",top:0,left:0,width:Me.width,height:Me.height,transformStyle:"preserve-3d",pointerEvents:"none"}:Zn(Zn({position:"absolute",transform:p?"translate3d(-50%,-50%,0)":"none"},h&&{top:-Me.height/2,left:-Me.width/2,width:Me.width,height:Me.height}),r),[r,p,h,Me,x]),vt=d.useMemo(()=>({position:"absolute",pointerEvents:X}),[X]);d.useLayoutEffect(()=>{if(Be.current=!1,x){var $e;($e=Ge.current)==null||$e.render(d.createElement("div",{ref:Ee,style:ke},d.createElement("div",{ref:_e,style:vt},d.createElement("div",{ref:J,className:l,style:r,children:s}))))}else{var Kt;(Kt=Ge.current)==null||Kt.render(d.createElement("div",{ref:J,style:ke,className:l,children:s}))}});const ht=d.useRef(!0);(0,_.A)($e=>{if(De.current){ge.updateMatrixWorld(),De.current.updateWorldMatrix(!0,!1);const Kt=x?Ce.current:L(De.current,ge,Me);if(x||Math.abs(Xe.current-ge.zoom)>t||Math.abs(Ce.current[0]-Kt[0])>t||Math.abs(Ce.current[1]-Kt[1])>t){const zt=ae(De.current,ge);let Bt=!1;ve&&(T!=="blending"?Bt=[le]:Array.isArray(T)&&(Bt=T.map(bn=>bn.current)));const Qe=ht.current;if(Bt){const bn=pe(De.current,ge,me,Bt);ht.current=bn&&!zt}else ht.current=!zt;Qe!==ht.current&&(R?R(!ht.current):Re.style.display=ht.current?"block":"none");const ze=Math.floor(z[0]/2),Ft=T?ve?[z[0],ze]:[ze-1,0]:z;if(Re.style.zIndex=`${Pe(De.current,ge,Ft)}`,x){const[bn,Fn]=[Me.width/2,Me.height/2],Gt=ge.projectionMatrix.elements[5]*Fn,{isOrthographicCamera:Yn,top:hr,left:Fr,bottom:Er,right:Ii}=ge,xi=rt(ge.matrixWorldInverse),Lr=Yn?`scale(${Gt})translate(${Oe(-(Ii+Fr)/2)}px,${Oe((hr+Er)/2)}px)`:`translateZ(${Gt}px)`;let Qr=De.current.matrixWorld;E&&(Qr=ge.matrixWorldInverse.clone().transpose().copyPosition(Qr).scale(De.current.scale),Qr.elements[3]=Qr.elements[7]=Qr.elements[11]=0,Qr.elements[15]=1),Re.style.width=Me.width+"px",Re.style.height=Me.height+"px",Re.style.perspective=Yn?"":`${Gt}px`,Ee.current&&_e.current&&(Ee.current.style.transform=`${Lr}${xi}translate(${bn}px,${Fn}px)`,_e.current.style.transform=gt(Qr,1/((v||10)/400)))}else{const bn=v===void 0?1:st(De.current,ge)*v;Re.style.transform=`translate3d(${Kt[0]}px,${Kt[1]}px,0) scale(${bn})`}Ce.current=Kt,Xe.current=ge.zoom}}if(!ve&&Ae.current&&!Be.current)if(x){if(Ee.current){const Kt=Ee.current.children[0];if(Kt!=null&&Kt.clientWidth&&Kt!=null&&Kt.clientHeight){const{isOrthographicCamera:zt}=ge;if(zt||O)W.scale&&(Array.isArray(W.scale)?W.scale instanceof i.Vector3?Ae.current.scale.copy(W.scale.clone().divideScalar(1)):Ae.current.scale.set(1/W.scale[0],1/W.scale[1],1/W.scale[2]):Ae.current.scale.setScalar(1/W.scale));else{const Bt=(v||10)/400,Qe=Kt.clientWidth*Bt,ze=Kt.clientHeight*Bt;Ae.current.scale.set(Qe,ze,1)}Be.current=!0}}}else{const Kt=Re.children[0];if(Kt!=null&&Kt.clientWidth&&Kt!=null&&Kt.clientHeight){const zt=1/Ue.factor,Bt=Kt.clientWidth*zt,Qe=Kt.clientHeight*zt;Ae.current.scale.set(Bt,Qe,1),Be.current=!0}Ae.current.lookAt($e.camera.position)}});const dt=d.useMemo(()=>({vertexShader:x?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom" 
            is false. 
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;
            
            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[x]);return d.createElement("group",(0,C.Z)({},W,{ref:De}),T&&!ve&&d.createElement("mesh",{castShadow:F,receiveShadow:U,ref:Ae},O||d.createElement("planeGeometry",null),P||d.createElement("shaderMaterial",{side:i.DoubleSide,vertexShader:dt.vertexShader,fragmentShader:dt.fragmentShader})))});function ot({onChanged:s,portal:t,preventDefault:r=!0,scroll:l=!0,keyCode:c=9}){const p=d.useRef(0),h=(0,_.z)(E=>E.setEvents),m=(0,_.z)(E=>E.get),v=(0,_.z)(E=>E.gl);return d.useEffect(()=>{var E;let x=[],T;const R=m().events.filter,F=(E=t==null?void 0:t.current)!==null&&E!==void 0?E:v.domElement.parentNode,U=()=>F&&s&&s(x,Math.round(p.current)%x.length);h({filter:(k,H)=>{let X=[...k];(X.length!==x.length||!x.every(W=>X.map(J=>J.object.uuid).includes(W.object.uuid)))&&(p.current=0,x=X,U()),R&&(X=R(X,H));for(let W=0;W<Math.round(p.current)%X.length;W++){const J=X.shift();X=[...X,J]}return X}});const P=k=>{var H,X;p.current=k(p.current),(H=m().events.handlers)==null||H.onPointerCancel(void 0),(X=m().events.handlers)==null||X.onPointerMove(T),U()},O=k=>{(k.keyCode||k.which===c)&&(r&&k.preventDefault(),x.length>1&&P(H=>H+1))},z=k=>{r&&k.preventDefault();let H=0;k||(k=window.event),k.wheelDelta?H=k.wheelDelta/120:k.detail&&(H=-k.detail/3),x.length>1&&P(X=>Math.abs(X-H))},L=k=>T=k;return document.addEventListener("pointermove",L,{passive:!0}),l&&document.addEventListener("wheel",z),c!==void 0&&document.addEventListener("keydown",O),()=>{h({filter:R}),c!==void 0&&document.removeEventListener("keydown",O),l&&document.removeEventListener("wheel",z),document.removeEventListener("pointermove",L)}},[v,m,h,r,l,c]),null}function Rt(s,t="pointer",r="auto"){d.useEffect(()=>{if(s)return document.body.style.cursor=t,()=>void(document.body.style.cursor=r)},[s])}var Mt=A(4671);let Pt=0;const It=(0,Mt.Z)(s=>(i.DefaultLoadingManager.onStart=(t,r,l)=>{s({active:!0,item:t,loaded:r,total:l,progress:(r-Pt)/(l-Pt)*100})},i.DefaultLoadingManager.onLoad=()=>{s({active:!1})},i.DefaultLoadingManager.onError=t=>s(r=>({errors:[...r.errors,t]})),i.DefaultLoadingManager.onProgress=(t,r,l)=>{r===l&&(Pt=l),s({active:!0,item:t,loaded:r,total:l,progress:(r-Pt)/(l-Pt)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})),xt=s=>`Loading ${s.toFixed(2)}%`;function ln({containerStyles:s,innerStyles:t,barStyles:r,dataStyles:l,dataInterpolation:c=xt,initialState:p=h=>h}){const{active:h,progress:m}=It(),v=d.useRef(0),E=d.useRef(0),x=d.useRef(null),[T,R]=d.useState(p(h));d.useEffect(()=>{let U;return h!==T&&(U=setTimeout(()=>R(h),300)),()=>clearTimeout(U)},[T,h]);const F=d.useCallback(()=>{x.current&&(v.current+=(m-v.current)/2,(v.current>.95*m||m===100)&&(v.current=m),x.current.innerText=c(v.current),v.current<m&&(E.current=requestAnimationFrame(F)))},[c,m]);return d.useEffect(()=>(F(),()=>cancelAnimationFrame(E.current)),[F]),T?d.createElement("div",{style:Zn(os(Zn({},Mn.container),{opacity:h?1:0}),s)},d.createElement("div",null,d.createElement("div",{style:Zn(Zn({},Mn.inner),t)},d.createElement("div",{style:Zn(os(Zn({},Mn.bar),{transform:`scaleX(${m/100})`}),r)}),d.createElement("span",{ref:x,style:Zn(Zn({},Mn.data),l)})))):null}const Mn={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}};function Xn(s){return function(t){s.forEach(function(r){typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var mt=Xn,rn=A(9593),un=A(1842),On=A(4325);function Ln(){return[0,0]}function fr(){return[1,1]}function _t(s,t){return[s[0]+t[0],s[1]+t[1]]}function ct(s,t){return[s[0]+t,s[1]+t]}function nt(s,t){return[s[0]-t[0],s[1]-t[1]]}function St(s,t){return[s[0]-t,s[1]-t]}function Tt(s,t){return[s[0]*t,s[1]*t]}function fn(s,t){return s[0]*t[0]+s[1]*t[1]}function At(s){return s[0]*s[0]+s[1]*s[1]}function Ot(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function kt(s,t){return Math.sqrt((s[0]-t[0])*(s[0]-t[0])+(s[1]-t[1])*(s[1]-t[1]))}var yn=Object.freeze({__proto__:null,zero:Ln,one:fr,add:_t,addValue:ct,sub:nt,subValue:St,scale:Tt,dot:fn,lengthSqr:At,length:Ot,distance:kt});function or(){return[0,0,0]}function pr(){return[1,1,1]}function Or(s,t){return[s[0]+t[0],s[1]+t[1],s[2]+t[2]]}function oi(s,t){return[s[0]+t,s[1]+t,s[2]+t]}function Ur(s,t){return[s[0]-t[0],s[1]-t[1],s[2]-t[2]]}function Ci(s,t){return[s[0]-t,s[1]-t,s[2]-t]}function Si(s,t){return[s[0]*t,s[1]*t,s[2]*t]}function qi(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]}function uo(s,t){var r=s[1]*t[2]-s[2]*t[1],l=s[2]*t[0]-s[0]*t[2],c=s[0]*t[1]-s[1]*t[0];return[r,l,c]}function Eo(s){return s[0]*s[0]+s[1]*s[1]+s[2]*s[2]}function Go(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1]+s[2]*s[2])}function Wo(s,t){return Math.sqrt((s[0]-t[0])*(s[0]-t[0])+(s[1]-t[1])*(s[1]-t[1])+(s[2]-t[2])*(s[2]-t[2]))}var Io=Object.freeze({__proto__:null,zero:or,one:pr,add:Or,addValue:oi,sub:Ur,subValue:Ci,scale:Si,dot:qi,cross:uo,lengthSqr:Eo,length:Go,distance:Wo});function $i(s){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"xyz",l={x:0,y:0,z:0},c=0;c<s.length;c+=t){l.x=s[c],l.y=s[c+1],l.z=s[c+2];var p=r.split(""),h=(0,un._)(p,3),m=h[0],v=h[1],E=h[2];s[c]=l[m],s[c+1]=l[v],t===3&&(s[c+2]=l[E])}return s}function gi(s,t){for(var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return Math.random()},l=t+1,c=new Float32Array(s.length/t*l),p=0;p<s.length;p+=t){var h=p/t*l;c[h]=s[p],c[h+1]=s[p+1],t===2&&(c[h+2]=r(h)),t===3&&(c[h+2]=s[p+2],c[h+3]=r(h))}return c}function bo(s,t,r,l){for(var c=0;c<s.length;c++)r[c]=(0,On.l)(s[c],t[c],l)}function bs(s,t){for(var r=t.length,l=0;l<s.length;l+=r)s[l]+=t[0],s[l+1]+=t[1],s[l+2]+=t[2];return s}function ss(s,t){for(var r={center:[0,0,0],q:new i.Quaternion().identity()},l=new i.Vector3,c=(0,rn._)((0,rn._)({},r),t),p=c.q,h=c.center,m=0;m<s.length;m+=3)l.set(s[m]-h[0],s[m+1]-h[1],s[m+2]-h[2]),l.applyQuaternion(p),s[m]=l.x+h[0],s[m+1]=l.y+h[1],s[m+2]=l.z+h[1];return s}function yo(s,t,r){for(var l=0,c=0;l<s.length;l+=t,c++)if(t===3){var p=r([s[l],s[l+1],s[l+2]],c);s.set(p,l)}else s.set(r([s[l],s[l+1]],c),l);return s}function Aa(s,t,r,l){for(var c=0,p=0;c<s.length;c+=t,p++)t===2?l=r(l,[s[c],s[c+1]],p):l=r(l,[s[c],s[c+1],s[c+2]],p);return l}function Vi(s,t,r){for(var l={center:[0,0,0]},c=(0,rn._)((0,rn._)({},l),r),p=c.center,h=c.distance,m=0;m<s.length;m+=t)s[m]=(s[m]-p[0])*(1+h)+p[0],s[m+1]=(s[m+1]-p[1])*(1+h)+p[1],t===3&&(s[m+2]=(s[m+2]-p[1])*(1+h)+p[2]);return s}function Gs(s,t){return Aa(s,t,function(r,l){return t===3?r=Or(r,l):r=_t(r,l),r},Ln())}function El(s,t,r){var l=Int16Array.from({length:s.length/t},function(m,v){return v});l.sort(function(m,v){var E=s.slice(m*t,m*t+t),x=s.slice(v*t,v*t+t);return r(E,x)});for(var c=s.slice(0),p=0;p<l.length;p++){var h=l[p];s.set(c.slice(h*t,h*t+t),p*3)}return s}var Ss=Object.freeze({__proto__:null,swizzle:$i,addAxis:gi,lerp:bo,translate:bs,rotate:ss,map:yo,reduce:Aa,expand:Vi,center:Gs,sort:El}),il=A(26),ho=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return l/Math.atan(1/r)*Math.atan(Math.sin(2*Math.PI*t*c)/r)},Ca=function(t){return 1/(1+t+.48*t*t+.235*t*t*t)};function Gi(s,t,r){var l=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,p=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,h=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Ca,m=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,v="velocity_"+t;if(s.__damp===void 0&&(s.__damp={}),s.__damp[v]===void 0&&(s.__damp[v]=0),Math.abs(s[t]-r)<=m)return s[t]=r,!1;l=Math.max(1e-4,l);var E=2/l,x=h(E*c),T=s[t]-r,R=r,F=p*l;T=Math.min(Math.max(T,-F),F),r=s[t]-T;var U=(s.__damp[v]+E*T)*c;s.__damp[v]=(s.__damp[v]-E*U)*x;var P=r+(T+U)*x;return R-s[t]>0==P>R&&(P=R,s.__damp[v]=(P-R)/c),s[t]=P,!0}function Fo(s,t,r,l,c,p,h,m){return Gi(s,t,s[t]+(0,On.d)(s[t],r),l,c,p,h,m)}var ws=new i.Vector2,Mo,ta;function bl(s,t,r,l,c,p,h){return typeof t=="number"?ws.setScalar(t):Array.isArray(t)?ws.set(t[0],t[1]):ws.copy(t),Mo=Gi(s,"x",ws.x,r,l,c,p,h),ta=Gi(s,"y",ws.y,r,l,c,p,h),Mo||ta}var Us=new i.Vector3,na,Ns,gs;function za(s,t,r,l,c,p,h){return typeof t=="number"?Us.setScalar(t):Array.isArray(t)?Us.set(t[0],t[1],t[2]):Us.copy(t),na=Gi(s,"x",Us.x,r,l,c,p,h),Ns=Gi(s,"y",Us.y,r,l,c,p,h),gs=Gi(s,"z",Us.z,r,l,c,p,h),na||Ns||gs}var ya=new i.Vector4,_p,ol,Ep,Je;function bt(s,t,r,l,c,p,h){return typeof t=="number"?ya.setScalar(t):Array.isArray(t)?ya.set(t[0],t[1],t[2],t[3]):ya.copy(t),_p=Gi(s,"x",ya.x,r,l,c,p,h),ol=Gi(s,"y",ya.y,r,l,c,p,h),Ep=Gi(s,"z",ya.z,r,l,c,p,h),Je=Gi(s,"w",ya.w,r,l,c,p,h),_p||ol||Ep||Je}var dn=new i.Euler,Wn,Vn,gr;function Xr(s,t,r,l,c,p,h){return Array.isArray(t)?dn.set(t[0],t[1],t[2],t[3]):dn.copy(t),Wn=Fo(s,"x",dn.x,r,l,c,p,h),Vn=Fo(s,"y",dn.y,r,l,c,p,h),gr=Fo(s,"z",dn.z,r,l,c,p,h),Wn||Vn||gr}var Ar=new i.Color,Bn,Sr,wt;function Vt(s,t,r,l,c,p,h){return t instanceof i.Color?Ar.copy(t):Array.isArray(t)?Ar.setRGB(t[0],t[1],t[2]):Ar.set(t),Bn=Gi(s,"r",Ar.r,r,l,c,p,h),Sr=Gi(s,"g",Ar.g,r,l,c,p,h),wt=Gi(s,"b",Ar.b,r,l,c,p,h),Bn||Sr||wt}var gn=new i.Quaternion,vn=new i.Vector4,Pn=new i.Vector4,Kr=new i.Vector4,yr,Se,Ke,yt;function mn(s,t,r,l,c,p,h){var m=s;Array.isArray(t)?gn.set(t[0],t[1],t[2],t[3]):gn.copy(t);var v=s.dot(gn)>0?1:-1;return gn.x*=v,gn.y*=v,gn.z*=v,gn.w*=v,yr=Gi(s,"x",gn.x,r,l,c,p,h),Se=Gi(s,"y",gn.y,r,l,c,p,h),Ke=Gi(s,"z",gn.z,r,l,c,p,h),yt=Gi(s,"w",gn.w,r,l,c,p,h),vn.set(s.x,s.y,s.z,s.w).normalize(),Pn.set(m.__damp.velocity_x,m.__damp.velocity_y,m.__damp.velocity_z,m.__damp.velocity_w),Kr.copy(vn).multiplyScalar(Pn.dot(vn)/vn.dot(vn)),m.__damp.velocity_x-=Kr.x,m.__damp.velocity_y-=Kr.y,m.__damp.velocity_z-=Kr.z,m.__damp.velocity_w-=Kr.w,s.set(vn.x,vn.y,vn.z,vn.w),yr||Se||Ke||yt}var vr=new i.Spherical,Br,si,Ui;function Uo(s,t,r,l,c,p,h){return Array.isArray(t)?vr.set(t[0],t[1],t[2]):vr.copy(t),Br=Gi(s,"radius",vr.radius,r,l,c,p,h),si=Fo(s,"phi",vr.phi,r,l,c,p,h),Ui=Fo(s,"theta",vr.theta,r,l,c,p,h),Br||si||Ui}var xo=new i.Matrix4,Rr=new i.Vector3,Xi=new i.Quaternion,ms=new i.Vector3,fo,ao,sl;function qo(s,t,r,l,c,p,h){var m=s;return m.__damp===void 0&&(m.__damp={position:new i.Vector3,rotation:new i.Quaternion,scale:new i.Vector3},s.decompose(m.__damp.position,m.__damp.rotation,m.__damp.scale)),Array.isArray(t)?xo.set.apply(xo,(0,un.a)(t)):xo.copy(t),xo.decompose(Rr,Xi,ms),fo=za(m.__damp.position,Rr,r,l,c,p,h),ao=mn(m.__damp.rotation,Xi,r,l,c,p,h),sl=za(m.__damp.scale,ms,r,l,c,p,h),s.compose(m.__damp.position,m.__damp.rotation,m.__damp.scale),fo||ao||sl}var Ts=Object.freeze({__proto__:null,rsqw:ho,exp:Ca,damp:Gi,dampAngle:Fo,damp2:bl,damp3:za,damp4:bt,dampE:Xr,dampC:Vt,dampQ:mn,dampS:Uo,dampM:qo}),ac=A(2541),Ga=A(1885);function js(s,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");s.prototype=Object.create(t&&t.prototype,{constructor:{value:s,writable:!0,configurable:!0}}),t&&(0,Ga._)(s,t)}function as(s){return as=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},as(s)}function Sa(s){if(s===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s}function bp(s,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sa(s)}function Bs(s){var t=(0,Ga.a)();return function(){var l=as(s),c;if(t){var p=as(this).constructor;c=Reflect.construct(l,arguments,p)}else c=l.apply(this,arguments);return bp(this,c)}}var Hd=function(s){js(r,s);var t=Bs(r);function r(){var l,c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:2,p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:.2,m=arguments.length>3&&arguments[3]!==void 0?arguments[3]:16;(0,ac._)(this,r),l=t.call(this);for(var v=c/2-h,E=p/2-h,x=h/c,T=(c-h)/c,R=h/p,F=(p-h)/p,U=[v,E,0,-v,E,0,-v,-E,0,v,-E,0],P=[T,F,x,F,x,R,T,R],O=[3*(m+1)+3,3*(m+1)+4,m+4,m+5,2*(m+1)+4,2,1,2*(m+1)+3,3,4*(m+1)+3,4,0],z=[O[0],O[1],O[2],O[0],O[2],O[3],O[4],O[5],O[6],O[4],O[6],O[7],O[8],O[9],O[10],O[8],O[10],O[11]],L,k,H,X,W,J,Y,ce,ue=0;ue<4;ue++){X=ue<1||ue>2?v:-v,W=ue<2?E:-E,J=ue<1||ue>2?T:x,Y=ue<2?F:R;for(var ge=0;ge<=m;ge++)L=Math.PI/2*(ue+ge/m),k=Math.cos(L),H=Math.sin(L),U.push(X+h*k,W+h*H,0),P.push(J+x*k,Y+R*H),ge<m&&(ce=(m+1)*ue+ge+4,z.push(ue,ce,ce+1))}return l.setIndex(new i.BufferAttribute(new Uint32Array(z),1)),l.setAttribute("position",new i.BufferAttribute(new Float32Array(U),3)),l.setAttribute("uv",new i.BufferAttribute(new Float32Array(P),2)),l}return r}(i.BufferGeometry);function ra(s){for(var t=[],r=[],l=0;l<s.attributes.position.array.length/3;l++){var c=s.attributes.position.array[l*3+0],p=s.attributes.position.array[l*3+1],h=s.attributes.position.array[l*3+2];r.push(new i.Vector3(c,p,h))}for(var m=r.map(ju),v=0;v<m.length/3;v++)for(var E=new i.Triangle(r[v*3+0],r[v*3+1],r[v*3+2]),x=E.getNormal(new i.Vector3),T=0;T<3;T++){var R=m[v*3+T];if(R.theta===0&&(R.phi===0||R.phi===Math.PI)){var F=R.phi===0?v*3+1:v*3+0;R={r:R.r,phi:R.phi,theta:m[F].theta}}R.theta===Math.PI&&ju(x).theta<Math.PI/2&&(R.theta=-Math.PI);var U=Gh(R);t.push(1-U.x,1-U.y)}return s.attributes.uv&&delete s.attributes.uv,s.setAttribute("uv",new i.Float32BufferAttribute(t,2)),s.attributes.uv.needsUpdate=!0,s}function ju(s){var t=Math.sqrt(s.x*s.x+s.z*s.z+s.y*s.y);return{r:t,phi:Math.acos(s.y/t),theta:Math.atan2(s.z,s.x)}}function Gh(s){return{y:s.phi/Math.PI,x:(s.theta+Math.PI)/(2*Math.PI)}}function $p(s){s.computeBoundingBox();var t=s.boundingBox.getSize(new i.Vector3),r=Math.min(t.x,t.y,t.z),l=new i.BoxGeometry(r,r,r),c=new i.Mesh(l);c.rotation.set(0,0,0),c.updateWorldMatrix(!0,!1);var p=c.matrix.clone().invert(),h=new i.Box3(new i.Vector3(-r/2,-r/2,-r/2),new i.Vector3(r/2,r/2,r/2));return Dc(s,p,h,r),s.attributes.uv.needsUpdate=!0,s}function Dc(s,t,r,l){var c=[];c.length=2*s.attributes.position.array.length/3;var p=function(Ae,Be,ve){Ae.applyMatrix4(t),Be.applyMatrix4(t),ve.applyMatrix4(t);var ke=new i.Vector3;ke.crossVectors(Be.clone().sub(Ae),Be.clone().sub(ve)).normalize(),ke.x=Math.abs(ke.x),ke.y=Math.abs(ke.y),ke.z=Math.abs(ke.z);var vt=new i.Vector2,ht=new i.Vector2,dt=new i.Vector2;return ke.y>ke.x&&ke.y>ke.z?(vt.x=(Ae.x-r.min.x)/l,vt.y=(r.max.z-Ae.z)/l,ht.x=(Be.x-r.min.x)/l,ht.y=(r.max.z-Be.z)/l,dt.x=(ve.x-r.min.x)/l,dt.y=(r.max.z-ve.z)/l):ke.x>ke.y&&ke.x>ke.z?(vt.x=(Ae.z-r.min.z)/l,vt.y=(Ae.y-r.min.y)/l,ht.x=(Be.z-r.min.z)/l,ht.y=(Be.y-r.min.y)/l,dt.x=(ve.z-r.min.z)/l,dt.y=(ve.y-r.min.y)/l):ke.z>ke.y&&ke.z>ke.x&&(vt.x=(Ae.x-r.min.x)/l,vt.y=(Ae.y-r.min.y)/l,ht.x=(Be.x-r.min.x)/l,ht.y=(Be.y-r.min.y)/l,dt.x=(ve.x-r.min.x)/l,dt.y=(ve.y-r.min.y)/l),{uv0:vt,uv1:ht,uv2:dt}};if(s.index)for(var h=0;h<s.index.array.length;h+=3){var m=s.index.array[h],v=s.index.array[h+1],E=s.index.array[h+2],x=s.attributes.position.array[3*m],T=s.attributes.position.array[3*m+1],R=s.attributes.position.array[3*m+2],F=s.attributes.position.array[3*v],U=s.attributes.position.array[3*v+1],P=s.attributes.position.array[3*v+2],O=s.attributes.position.array[3*E],z=s.attributes.position.array[3*E+1],L=s.attributes.position.array[3*E+2],k=new i.Vector3(x,T,R),H=new i.Vector3(F,U,P),X=new i.Vector3(O,z,L),W=p(k,H,X);c[2*m]=W.uv0.x,c[2*m+1]=W.uv0.y,c[2*v]=W.uv1.x,c[2*v+1]=W.uv1.y,c[2*E]=W.uv2.x,c[2*E+1]=W.uv2.y}else for(var J=0;J<s.attributes.position.array.length;J+=9){var Y=s.attributes.position.array[J],ce=s.attributes.position.array[J+1],ue=s.attributes.position.array[J+2],ge=s.attributes.position.array[J+3],le=s.attributes.position.array[J+4],Me=s.attributes.position.array[J+5],me=s.attributes.position.array[J+6],Te=s.attributes.position.array[J+7],Ue=s.attributes.position.array[J+8],Re=new i.Vector3(Y,ce,ue),Ge=new i.Vector3(ge,le,Me),De=new i.Vector3(me,Te,Ue),Xe=p(Re,Ge,De),Ce=J/3,Ee=Ce+1,_e=Ce+2;c[2*Ce]=Xe.uv0.x,c[2*Ce+1]=Xe.uv0.y,c[2*Ee]=Xe.uv1.x,c[2*Ee+1]=Xe.uv1.y,c[2*_e]=Xe.uv2.x,c[2*_e+1]=Xe.uv2.y}s.attributes.uv&&delete s.attributes.uv,s.setAttribute("uv",new i.Float32BufferAttribute(c,2))}var eu=Object.freeze({__proto__:null,RoundedPlaneGeometry:Hd,applySphereUV:ra,applyBoxUV:$p}),tu=A(4599);function Hu(s){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:3,r=[],l=0,c=0;l<s.length;l+=t,c++)t===3?r[c]=new i.Vector3(s[l],s[l+1],s[l+2]):r[c]=new i.Vector2(s[l],s[l+1]);return r}function s1(s){for(var t=s.length,r=s[0].hasOwnProperty("z")?3:2,l=new Float32Array(t*r),c=0;c<t;c++){var p=c*r;l[p]=s[c].x,l[p+1]=s[c].y,r===3&&(l[p+2]=s[c].z)}return l}var YA=Object.freeze({__proto__:null,bufferToVectors:Hu,vectorsToBuffer:s1});const Wd=d.createContext(null);function nu(){return d.useContext(Wd)}function Nl({eps:s=1e-5,enabled:t=!0,infinite:r,horizontal:l,pages:c=1,distance:p=1,damping:h=.25,maxSpeed:m=1/0,style:v={},children:E}){const{get:x,setEvents:T,gl:R,size:F,invalidate:U,events:P}=(0,_.z)(),[O]=d.useState(()=>document.createElement("div")),[z]=d.useState(()=>document.createElement("div")),[L]=d.useState(()=>document.createElement("div")),k=R.domElement.parentNode,H=d.useRef(0),X=d.useMemo(()=>({el:O,eps:s,fill:z,fixed:L,horizontal:l,damping:h,offset:0,delta:0,scroll:H,pages:c,range(Y,ce,ue=0){const ge=Y-ue,le=ge+ce+ue*2;return this.offset<ge?0:this.offset>le?1:(this.offset-ge)/(le-ge)},curve(Y,ce,ue=0){return Math.sin(this.range(Y,ce,ue)*Math.PI)},visible(Y,ce,ue=0){const ge=Y-ue,le=ge+ce+ue*2;return this.offset>=ge&&this.offset<=le}}),[s,h,l,c]);d.useEffect(()=>{O.style.position="absolute",O.style.width="100%",O.style.height="100%",O.style[l?"overflowX":"overflowY"]="auto",O.style[l?"overflowY":"overflowX"]="hidden",O.style.top="0px",O.style.left="0px";for(const ce in v)O.style[ce]=v[ce];L.style.position="sticky",L.style.top="0px",L.style.left="0px",L.style.width="100%",L.style.height="100%",L.style.overflow="hidden",O.appendChild(L),z.style.height=l?"100%":`${c*p*100}%`,z.style.width=l?`${c*p*100}%`:"100%",z.style.pointerEvents="none",O.appendChild(z),k.appendChild(O),O[l?"scrollLeft":"scrollTop"]=1;const J=P.connected||R.domElement;requestAnimationFrame(()=>P.connect==null?void 0:P.connect(O));const Y=x().events.compute;return T({compute(ce,ue){const{left:ge,top:le}=k.getBoundingClientRect(),Me=ce.clientX-ge,me=ce.clientY-le;ue.pointer.set(Me/ue.size.width*2-1,-(me/ue.size.height)*2+1),ue.raycaster.setFromCamera(ue.pointer,ue.camera)}}),()=>{k.removeChild(O),T({compute:Y}),P.connect==null||P.connect(J)}},[c,p,l,O,z,L,k]),d.useEffect(()=>{if(P.connected===O){const J=F[l?"width":"height"],Y=O[l?"scrollWidth":"scrollHeight"],ce=Y-J;let ue=0,ge=!0,le=!0;const Me=()=>{if(!(!t||le)&&(U(),ue=O[l?"scrollLeft":"scrollTop"],H.current=ue/ce,r)){if(!ge){if(ue>=ce){const Te=1-X.offset;O[l?"scrollLeft":"scrollTop"]=1,H.current=X.offset=-Te,ge=!0}else if(ue<=0){const Te=1+X.offset;O[l?"scrollLeft":"scrollTop"]=Y,H.current=X.offset=Te,ge=!0}}ge&&setTimeout(()=>ge=!1,40)}};O.addEventListener("scroll",Me,{passive:!0}),requestAnimationFrame(()=>le=!1);const me=Te=>O.scrollLeft+=Te.deltaY/2;return l&&O.addEventListener("wheel",me,{passive:!0}),()=>{O.removeEventListener("scroll",Me),l&&O.removeEventListener("wheel",me)}}},[O,P,F,r,X,U,l,t]);let W=0;return(0,_.A)((J,Y)=>{W=X.offset,Ts.damp(X,"offset",H.current,h,Y,m,void 0,s),Ts.damp(X,"delta",Math.abs(W-X.offset),h,Y,m,void 0,s),X.delta>s&&U()}),d.createElement(Wd.Provider,{value:X},E)}const Im=d.forwardRef(({children:s},t)=>{const r=d.useRef(null),l=nu(),{width:c,height:p}=(0,_.z)(h=>h.viewport);return(0,_.A)(()=>{r.current.position.x=l.horizontal?-c*(l.pages-1)*l.offset:0,r.current.position.y=l.horizontal?0:p*(l.pages-1)*l.offset}),d.createElement("group",{ref:mt([t,r])},s)}),Uh=d.forwardRef((c,l)=>{var p=c,{children:s,style:t}=p,r=Cn(p,["children","style"]);const h=nu(),m=d.useRef(null),{width:v,height:E}=(0,_.z)(R=>R.size),x=d.useContext(_.f),T=d.useMemo(()=>g.createRoot(h.fixed),[h.fixed]);return(0,_.A)(()=>{h.delta>h.eps&&(m.current.style.transform=`translate3d(${h.horizontal?-v*(h.pages-1)*h.offset:0}px,${h.horizontal?0:E*(h.pages-1)*-h.offset}px,0)`)}),T.render(d.createElement("div",(0,C.Z)({ref:mt([l,m]),style:os(Zn({},t),{position:"absolute",top:0,left:0,willChange:"transform"})},r),d.createElement(Wd.Provider,{value:h},d.createElement(_.f.Provider,{value:x},s)))),null}),Li=d.forwardRef((l,r)=>{var c=l,{html:s}=c,t=Cn(c,["html"]);const p=s?Uh:Im;return d.createElement(p,(0,C.Z)({ref:r},t))});var Nh=A(5108);let Ml=cc();const Qn=s=>Vd(s,Ml);let al=cc();Qn.write=s=>Vd(s,al);let ru=cc();Qn.onStart=s=>Vd(s,ru);let Ms=cc();Qn.onFrame=s=>Vd(s,Ms);let Zc=cc();Qn.onFinish=s=>Vd(s,Zc);let iu=[];Qn.setTimeout=(s,t)=>{let r=Qn.now()+t,l=()=>{let p=iu.findIndex(h=>h.cancel==l);~p&&iu.splice(p,1),Hs-=~p?1:0},c={time:r,handler:s,cancel:l};return iu.splice(jh(r),0,c),Hs+=1,lc(),c};let jh=s=>~(~iu.findIndex(t=>t.time>s)||~iu.length);Qn.cancel=s=>{ru.delete(s),Ms.delete(s),Zc.delete(s),Ml.delete(s),al.delete(s)},Qn.sync=s=>{sg=!0,Qn.batchedUpdates(s),sg=!1},Qn.throttle=s=>{let t;function r(){try{s(...t)}finally{t=null}}function l(...c){t=c,Qn.onStart(r)}return l.handler=s,l.cancel=()=>{ru.delete(r),t=null},l};let og=typeof window!="undefined"?window.requestAnimationFrame:()=>{};Qn.use=s=>og=s,Qn.now=typeof performance!="undefined"?()=>performance.now():Date.now,Qn.batchedUpdates=s=>s(),Qn.catch=Nh.error,Qn.frameLoop="always",Qn.advance=()=>{Qn.frameLoop!=="demand"?Nh.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Hh()};let xl=-1,Hs=0,sg=!1;function Vd(s,t){sg?(t.delete(s),s(0)):(t.add(s),lc())}function lc(){xl<0&&(xl=0,Qn.frameLoop!=="demand"&&og(Qd))}function qc(){xl=-1}function Qd(){~xl&&(og(Qd),Qn.batchedUpdates(Hh))}function Hh(){let s=xl;xl=Qn.now();let t=jh(xl);if(t&&(Fm(iu.splice(0,t),r=>r.handler()),Hs-=t),!Hs){qc();return}ru.flush(),Ml.flush(s?Math.min(64,xl-s):16.667),Ms.flush(),al.flush(),Zc.flush()}function cc(){let s=new Set,t=s;return{add(r){Hs+=t==s&&!s.has(r)?1:0,s.add(r)},delete(r){return Hs-=t==s&&s.has(r)?1:0,s.delete(r)},flush(r){t.size&&(s=new Set,Hs-=t.size,Fm(t,l=>l(r)&&s.add(l)),Hs+=s.size,t=s)}}}function Fm(s,t){s.forEach(r=>{try{t(r)}catch(l){Qn.catch(l)}})}const Lc={count(){return Hs},isRunning(){return xl>=0},clear(){xl=-1,iu=[],ru=cc(),Ml=cc(),Ms=cc(),al=cc(),Zc=cc(),Hs=0}};var ag=A(5108);function ou(){}const Om=(s,t,r)=>Object.defineProperty(s,t,{value:r,writable:!0,configurable:!0}),Un={arr:Array.isArray,obj:s=>!!s&&s.constructor.name==="Object",fun:s=>typeof s=="function",str:s=>typeof s=="string",num:s=>typeof s=="number",und:s=>s===void 0};function Cl(s,t){if(Un.arr(s)){if(!Un.arr(t)||s.length!==t.length)return!1;for(let r=0;r<s.length;r++)if(s[r]!==t[r])return!1;return!0}return s===t}const to=(s,t)=>s.forEach(t);function Ua(s,t,r){if(Un.arr(s)){for(let l=0;l<s.length;l++)t.call(r,s[l],`${l}`);return}for(const l in s)s.hasOwnProperty(l)&&t.call(r,s[l],l)}const Na=s=>Un.und(s)?[]:Un.arr(s)?s:[s];function pc(s,t){if(s.size){const r=Array.from(s);s.clear(),to(r,t)}}const Wu=(s,...t)=>pc(s,r=>r(...t)),Kd=()=>typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let Xd,su,Ws=null,uc=!1,Pc=ou;const Wh=s=>{s.to&&(su=s.to),s.now&&(Qn.now=s.now),s.colors!==void 0&&(Ws=s.colors),s.skipAnimation!=null&&(uc=s.skipAnimation),s.createStringInterpolator&&(Xd=s.createStringInterpolator),s.requestAnimationFrame&&Qn.use(s.requestAnimationFrame),s.batchedUpdates&&(Qn.batchedUpdates=s.batchedUpdates),s.willAdvance&&(Pc=s.willAdvance),s.frameLoop&&(Qn.frameLoop=s.frameLoop)};var dc=Object.freeze({__proto__:null,get createStringInterpolator(){return Xd},get to(){return su},get colors(){return Ws},get skipAnimation(){return uc},get willAdvance(){return Pc},assign:Wh});const ja=new Set;let As=[],Ha=[],$c=0;const wa={get idle(){return!ja.size&&!As.length},start(s){$c>s.priority?(ja.add(s),Qn.onStart(va)):(Vh(s),Qn(hc))},advance:hc,sort(s){if($c)Qn.onFrame(()=>wa.sort(s));else{const t=As.indexOf(s);~t&&(As.splice(t,1),kc(s))}},clear(){As=[],ja.clear()}};function va(){ja.forEach(Vh),ja.clear(),Qn(hc)}function Vh(s){As.includes(s)||kc(s)}function kc(s){As.splice(ll(As,t=>t.priority>s.priority),0,s)}function hc(s){const t=Ha;for(let r=0;r<As.length;r++){const l=As[r];$c=l.priority,l.idle||(Pc(l),l.advance(s),l.idle||t.push(l))}return $c=0,Ha=As,Ha.length=0,As=t,As.length>0}function ll(s,t){const r=s.findIndex(t);return r<0?s.length:r}const ls=(s,t,r)=>Math.min(Math.max(r,s),t),Qh={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Sl="[-+]?\\d*\\.?\\d+",ep=Sl+"%";function wl(...s){return"\\(\\s*("+s.join(")\\s*,\\s*(")+")\\s*\\)"}const Kh=new RegExp("rgb"+wl(Sl,Sl,Sl)),Xh=new RegExp("rgba"+wl(Sl,Sl,Sl,Sl)),jl=new RegExp("hsl"+wl(Sl,ep,ep)),Hl=new RegExp("hsla"+wl(Sl,ep,ep,Sl)),au=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,tp=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,np=/^#([0-9a-fA-F]{6})$/,lu=/^#([0-9a-fA-F]{8})$/;function Dm(s){let t;return typeof s=="number"?s>>>0===s&&s>=0&&s<=4294967295?s:null:(t=np.exec(s))?parseInt(t[1]+"ff",16)>>>0:Ws&&Ws[s]!==void 0?Ws[s]:(t=Kh.exec(s))?(Vs(t[1])<<24|Vs(t[2])<<16|Vs(t[3])<<8|255)>>>0:(t=Xh.exec(s))?(Vs(t[1])<<24|Vs(t[2])<<16|Vs(t[3])<<8|Vo(t[4]))>>>0:(t=au.exec(s))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=lu.exec(s))?parseInt(t[1],16)>>>0:(t=tp.exec(s))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=jl.exec(s))?(Vu(_a(t[1]),Rs(t[2]),Rs(t[3]))|255)>>>0:(t=Hl.exec(s))?(Vu(_a(t[1]),Rs(t[2]),Rs(t[3]))|Vo(t[4]))>>>0:null}function Yd(s,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?s+(t-s)*6*r:r<1/2?t:r<2/3?s+(t-s)*(2/3-r)*6:s}function Vu(s,t,r){const l=r<.5?r*(1+t):r+t-r*t,c=2*r-l,p=Yd(c,l,s+1/3),h=Yd(c,l,s),m=Yd(c,l,s-1/3);return Math.round(p*255)<<24|Math.round(h*255)<<16|Math.round(m*255)<<8}function Vs(s){const t=parseInt(s,10);return t<0?0:t>255?255:t}function _a(s){return(parseFloat(s)%360+360)%360/360}function Vo(s){const t=parseFloat(s);return t<0?0:t>1?255:Math.round(t*255)}function Rs(s){const t=parseFloat(s);return t<0?0:t>100?1:t/100}function ei(s){let t=Dm(s);if(t===null)return s;t=t||0;let r=(t&4278190080)>>>24,l=(t&16711680)>>>16,c=(t&65280)>>>8,p=(t&255)/255;return`rgba(${r}, ${l}, ${c}, ${p})`}const Qu=(s,t,r)=>{if(Un.fun(s))return s;if(Un.arr(s))return Qu({range:s,output:t,extrapolate:r});if(Un.str(s.output[0]))return Xd(s);const l=s,c=l.output,p=l.range||[0,1],h=l.extrapolateLeft||l.extrapolate||"extend",m=l.extrapolateRight||l.extrapolate||"extend",v=l.easing||(E=>E);return E=>{const x=wi(E,p);return _n(E,p[x],p[x+1],c[x],c[x+1],v,h,m,l.map)}};function _n(s,t,r,l,c,p,h,m,v){let E=v?v(s):s;if(E<t){if(h==="identity")return E;h==="clamp"&&(E=t)}if(E>r){if(m==="identity")return E;m==="clamp"&&(E=r)}return l===c?l:t===r?s<=t?l:c:(t===-1/0?E=-E:r===1/0?E=E-t:E=(E-t)/(r-t),E=p(E),l===-1/0?E=-E:c===1/0?E=E+l:E=E*(c-l)+l,E)}function wi(s,t){for(var r=1;r<t.length-1&&!(t[r]>=s);++r);return r-1}const Jd=(s,t="end")=>r=>{r=t==="end"?Math.min(r,.999):Math.max(r,.001);const l=r*s,c=t==="end"?Math.floor(l):Math.ceil(l);return ls(0,1,c/s)},Ku=1.70158,Mp=Ku*1.525,Wl=Ku+1,xp=2*Math.PI/3,cu=2*Math.PI/4.5,fc=s=>s<1/2.75?7.5625*s*s:s<2/2.75?7.5625*(s-=1.5/2.75)*s+.75:s<2.5/2.75?7.5625*(s-=2.25/2.75)*s+.9375:7.5625*(s-=2.625/2.75)*s+.984375,pu={linear:s=>s,easeInQuad:s=>s*s,easeOutQuad:s=>1-(1-s)*(1-s),easeInOutQuad:s=>s<.5?2*s*s:1-Math.pow(-2*s+2,2)/2,easeInCubic:s=>s*s*s,easeOutCubic:s=>1-Math.pow(1-s,3),easeInOutCubic:s=>s<.5?4*s*s*s:1-Math.pow(-2*s+2,3)/2,easeInQuart:s=>s*s*s*s,easeOutQuart:s=>1-Math.pow(1-s,4),easeInOutQuart:s=>s<.5?8*s*s*s*s:1-Math.pow(-2*s+2,4)/2,easeInQuint:s=>s*s*s*s*s,easeOutQuint:s=>1-Math.pow(1-s,5),easeInOutQuint:s=>s<.5?16*s*s*s*s*s:1-Math.pow(-2*s+2,5)/2,easeInSine:s=>1-Math.cos(s*Math.PI/2),easeOutSine:s=>Math.sin(s*Math.PI/2),easeInOutSine:s=>-(Math.cos(Math.PI*s)-1)/2,easeInExpo:s=>s===0?0:Math.pow(2,10*s-10),easeOutExpo:s=>s===1?1:1-Math.pow(2,-10*s),easeInOutExpo:s=>s===0?0:s===1?1:s<.5?Math.pow(2,20*s-10)/2:(2-Math.pow(2,-20*s+10))/2,easeInCirc:s=>1-Math.sqrt(1-Math.pow(s,2)),easeOutCirc:s=>Math.sqrt(1-Math.pow(s-1,2)),easeInOutCirc:s=>s<.5?(1-Math.sqrt(1-Math.pow(2*s,2)))/2:(Math.sqrt(1-Math.pow(-2*s+2,2))+1)/2,easeInBack:s=>Wl*s*s*s-Ku*s*s,easeOutBack:s=>1+Wl*Math.pow(s-1,3)+Ku*Math.pow(s-1,2),easeInOutBack:s=>s<.5?Math.pow(2*s,2)*((Mp+1)*2*s-Mp)/2:(Math.pow(2*s-2,2)*((Mp+1)*(s*2-2)+Mp)+2)/2,easeInElastic:s=>s===0?0:s===1?1:-Math.pow(2,10*s-10)*Math.sin((s*10-10.75)*xp),easeOutElastic:s=>s===0?0:s===1?1:Math.pow(2,-10*s)*Math.sin((s*10-.75)*xp)+1,easeInOutElastic:s=>s===0?0:s===1?1:s<.5?-(Math.pow(2,20*s-10)*Math.sin((20*s-11.125)*cu))/2:Math.pow(2,-20*s+10)*Math.sin((20*s-11.125)*cu)/2+1,easeInBounce:s=>1-fc(1-s),easeOutBounce:fc,easeInOutBounce:s=>s<.5?(1-fc(1-2*s))/2:(1+fc(2*s-1))/2,steps:Jd};function Xu(){return Xu=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(s[l]=r[l])}return s},Xu.apply(this,arguments)}const gc=Symbol.for("FluidValue.get"),Cp=Symbol.for("FluidValue.observers"),cl=s=>!!(s&&s[gc]),cs=s=>s&&s[gc]?s[gc]():s,Yu=s=>s[Cp]||null;function Ju(s,t){s.eventObserved?s.eventObserved(t):s(t)}function $o(s,t){let r=s[Cp];r&&r.forEach(l=>{Ju(l,t)})}class Sp{constructor(t){if(this[gc]=void 0,this[Cp]=void 0,!t&&!(t=this.get))throw Error("Unknown getter");wp(this,t)}}const wp=(s,t)=>No(s,gc,t);function Zu(s,t){if(s[gc]){let r=s[Cp];r||No(s,Cp,r=new Set),r.has(t)||(r.add(t),s.observerAdded&&s.observerAdded(r.size,t))}return t}function Vl(s,t){let r=s[Cp];if(r&&r.has(t)){const l=r.size-1;l?r.delete(t):s[Cp]=null,s.observerRemoved&&s.observerRemoved(l,t)}}const No=(s,t,r)=>Object.defineProperty(s,t,{value:r,writable:!0,configurable:!0}),uu=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,ps=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,lo=new RegExp(`(${uu.source})(%|[a-z]+)`,"i"),pl=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,ia=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,du=s=>{const[t,r]=es(s);if(!t||Kd())return s;const l=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(l)return l.trim();if(r&&r.startsWith("--")){const c=window.getComputedStyle(document.documentElement).getPropertyValue(r);return c||s}else{if(r&&ia.test(r))return du(r);if(r)return r}return s},es=s=>{const t=ia.exec(s);if(!t)return[,];const[,r,l]=t;return[r,l]};let oa;const sa=(s,t,r,l,c)=>`rgba(${Math.round(t)}, ${Math.round(r)}, ${Math.round(l)}, ${c})`,aa=s=>{oa||(oa=Ws?new RegExp(`(${Object.keys(Ws).join("|")})(?!\\w)`,"g"):/^\b$/);const t=s.output.map(p=>cs(p).replace(ia,du).replace(ps,ei).replace(oa,ei)),r=t.map(p=>p.match(uu).map(Number)),c=r[0].map((p,h)=>r.map(m=>{if(!(h in m))throw Error('The arity of each "output" value must be equal');return m[h]})).map(p=>Qu(Xu({},s,{output:p})));return p=>{var h;const m=!lo.test(t[0])&&((h=t.find(E=>lo.test(E)))==null?void 0:h.replace(uu,""));let v=0;return t[0].replace(uu,()=>`${c[v++](p)}${m||""}`).replace(pl,sa)}},je="react-spring: ",Tp=s=>{const t=s;let r=!1;if(typeof t!="function")throw new TypeError(`${je}once requires a function parameter`);return(...l)=>{r||(t(...l),r=!0)}},Lm=Tp(ag.warn);function Qo(){Lm(`${je}The "interpolate" function is deprecated in v9 (use "to" instead)`)}const mc=Tp(ag.warn);function Ac(){mc(`${je}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function yc(s){return Un.str(s)&&(s[0]=="#"||/\d/.test(s)||!Kd()&&ia.test(s)||s in(Ws||{}))}let Qs;const la=new WeakMap,Ql=s=>s.forEach(({target:t,contentRect:r})=>{var l;return(l=la.get(t))==null?void 0:l.forEach(c=>c(r))});function vc(s,t){Qs||typeof ResizeObserver!="undefined"&&(Qs=new ResizeObserver(Ql));let r=la.get(t);return r||(r=new Set,la.set(t,r)),r.add(s),Qs&&Qs.observe(t),()=>{const l=la.get(t);l&&(l.delete(s),!l.size&&Qs&&Qs.unobserve(t))}}const ul=new Set;let Kl;const qu=()=>{const s=()=>{ul.forEach(t=>t({width:window.innerWidth,height:window.innerHeight}))};return window.addEventListener("resize",s),()=>{window.removeEventListener("resize",s)}},Zd=s=>(ul.add(s),Kl||(Kl=qu()),()=>{ul.delete(s),!ul.size&&Kl&&(Kl(),Kl=void 0)}),qd=(s,{container:t=document.documentElement}={})=>t===document.documentElement?Zd(s):vc(s,t),Bp=(s,t,r)=>t-s===0?1:(r-s)/(t-s),Yh={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}};class lg{constructor(t,r){this.callback=void 0,this.container=void 0,this.info=void 0,this.createAxis=()=>({current:0,progress:0,scrollLength:0}),this.updateAxis=l=>{const c=this.info[l],{length:p,position:h}=Yh[l];c.current=this.container[`scroll${h}`],c.scrollLength=this.container["scroll"+p]-this.container["client"+p],c.progress=Bp(0,c.scrollLength,c.current)},this.update=()=>{this.updateAxis("x"),this.updateAxis("y")},this.sendEvent=()=>{this.callback(this.info)},this.advance=()=>{this.update(),this.sendEvent()},this.callback=t,this.container=r,this.info={time:0,x:this.createAxis(),y:this.createAxis()}}}const Tl=new WeakMap,$d=new WeakMap,Ta=new WeakMap,Bl=s=>s===document.documentElement?window:s,Jh=(s,{container:t=document.documentElement}={})=>{let r=Ta.get(t);r||(r=new Set,Ta.set(t,r));const l=new lg(s,t);if(r.add(l),!Tl.has(t)){const p=()=>{var m;return(m=r)==null||m.forEach(v=>v.advance()),!0};Tl.set(t,p);const h=Bl(t);window.addEventListener("resize",p,{passive:!0}),t!==document.documentElement&&$d.set(t,qd(p,{container:t})),h.addEventListener("scroll",p,{passive:!0})}const c=Tl.get(t);return raf(c),()=>{raf.cancel(c);const p=Ta.get(t);if(!p||(p.delete(l),p.size))return;const h=Tl.get(t);if(Tl.delete(t),h){var m;Bl(t).removeEventListener("scroll",h),window.removeEventListener("resize",h),(m=$d.get(t))==null||m()}}};function hu(s){const t=useRef(null);return t.current===null&&(t.current=s()),t.current}const Xl=Kd()?d.useEffect:d.useLayoutEffect,Zh=()=>{const s=(0,d.useRef)(!1);return Xl(()=>(s.current=!0,()=>{s.current=!1}),[]),s};function $u(){const s=(0,d.useState)()[1],t=Zh();return()=>{t.current&&s(Math.random())}}function qh(s,t){const[r]=(0,d.useState)(()=>({inputs:t,result:s()})),l=(0,d.useRef)(),c=l.current;let p=c;return p?t&&p.inputs&&Rp(t,p.inputs)||(p={inputs:t,result:s()}):p=r,(0,d.useEffect)(()=>{l.current=p,c==r&&(r.inputs=r.result=void 0)},[p]),p.result}function Rp(s,t){if(s.length!==t.length)return!1;for(let r=0;r<s.length;r++)if(s[r]!==t[r])return!1;return!0}const ui=s=>(0,d.useEffect)(s,fu),fu=[];function Yl(s){const t=(0,d.useRef)();return(0,d.useEffect)(()=>{t.current=s}),t.current}const a1=()=>{const[s,t]=useState(null);return Xl(()=>{const r=window.matchMedia("(prefers-reduced-motion)"),l=c=>{t(c.matches),Wh({skipAnimation:c.matches})};return l(r),r.addEventListener("change",l),()=>{r.removeEventListener("change",l)}},[]),s},eh=Symbol.for("Animated:node"),Ip=s=>!!s&&s[eh]===s,dl=s=>s&&s[eh],Ba=(s,t)=>Om(s,eh,t),ed=s=>s&&s[eh]&&s[eh].getPayload();class $h{constructor(){this.payload=void 0,Ba(this,this)}getPayload(){return this.payload||[]}}class Rl extends $h{constructor(t){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=t,Un.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new Rl(t)}getPayload(){return[this]}getValue(){return this._value}setValue(t,r){return Un.num(t)&&(this.lastPosition=t,r&&(t=Math.round(t/r)*r,this.done&&(this.lastPosition=t))),this._value===t?!1:(this._value=t,!0)}reset(){const{done:t}=this;this.done=!1,Un.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,t&&(this.lastVelocity=null),this.v0=null)}}class rp extends Rl{constructor(t){super(0),this._string=null,this._toString=void 0,this._toString=Qu({output:[t,t]})}static create(t){return new rp(t)}getValue(){let t=this._string;return t==null?this._string=this._toString(this._value):t}setValue(t){if(Un.str(t)){if(t==this._string)return!1;this._string=t,this._value=1}else if(super.setValue(t))this._string=null;else return!1;return!0}reset(t){t&&(this._toString=Qu({output:[this.getValue(),t]})),this._value=0,super.reset()}}const ef={dependencies:null};class tf extends $h{constructor(t){super(),this.source=t,this.setValue(t)}getValue(t){const r={};return Ua(this.source,(l,c)=>{Ip(l)?r[c]=l.getValue(t):cl(l)?r[c]=cs(l):t||(r[c]=l)}),r}setValue(t){this.source=t,this.payload=this._makePayload(t)}reset(){this.payload&&to(this.payload,t=>t.reset())}_makePayload(t){if(t){const r=new Set;return Ua(t,this._addToPayload,r),Array.from(r)}}_addToPayload(t){ef.dependencies&&cl(t)&&ef.dependencies.add(t);const r=ed(t);r&&to(r,l=>this.add(l))}}class zc extends tf{constructor(t){super(t)}static create(t){return new zc(t)}getValue(){return this.source.map(t=>t.getValue())}setValue(t){const r=this.getPayload();return t.length==r.length?r.map((l,c)=>l.setValue(t[c])).some(Boolean):(super.setValue(t.map(_c)),!0)}}function _c(s){return(yc(s)?rp:Rl).create(s)}function td(s){const t=dl(s);return t?t.constructor:Un.arr(s)?zc:yc(s)?rp:Rl}function ip(){return ip=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(s[l]=r[l])}return s},ip.apply(this,arguments)}const cg=(s,t)=>{const r=!Un.fun(s)||s.prototype&&s.prototype.isReactComponent;return(0,d.forwardRef)((l,c)=>{const p=(0,d.useRef)(null),h=r&&(0,d.useCallback)(U=>{p.current=ug(c,U)},[c]),[m,v]=pg(l,t),E=$u(),x=()=>{const U=p.current;if(r&&!U)return;(U?t.applyAnimatedValues(U,m.getValue(!0)):!1)===!1&&E()},T=new Pm(x,v),R=(0,d.useRef)();Xl(()=>(R.current=T,to(v,U=>Zu(U,T)),()=>{R.current&&(to(R.current.deps,U=>Vl(U,R.current)),Qn.cancel(R.current.update))})),(0,d.useEffect)(x,[]),ui(()=>()=>{const U=R.current;to(U.deps,P=>Vl(P,U))});const F=t.getComponentProps(m.getValue());return d.createElement(s,ip({},F,{ref:h}))})};class Pm{constructor(t,r){this.update=t,this.deps=r}eventObserved(t){t.type=="change"&&Qn.write(this.update)}}function pg(s,t){const r=new Set;return ef.dependencies=r,s.style&&(s=ip({},s,{style:t.createAnimatedStyle(s.style)})),s=new tf(s),ef.dependencies=null,[s,r]}function ug(s,t){return s&&(Un.fun(s)?s(t):s.current=t),t}const Jl=Symbol.for("AnimatedComponent"),km=(s,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:r=c=>new tf(c),getComponentProps:l=c=>c}={})=>{const c={applyAnimatedValues:t,createAnimatedStyle:r,getComponentProps:l},p=h=>{const m=gu(h)||"Anonymous";return Un.str(h)?h=p[h]||(p[h]=cg(h,c)):h=h[Jl]||(h[Jl]=cg(h,c)),h.displayName=`Animated(${m})`,h};return Ua(s,(h,m)=>{Un.arr(s)&&(m=gu(h)),p[m]=p(h)}),{animated:p}},gu=s=>Un.str(s)?s:s&&Un.str(s.displayName)?s.displayName:Un.fun(s)&&s.name||null;var Yi=A(5108);function Pi(){return Pi=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(s[l]=r[l])}return s},Pi.apply(this,arguments)}function jo(s,...t){return Un.fun(s)?s(...t):s}const Fp=(s,t)=>s===!0||!!(t&&s&&(Un.fun(s)?s(t):Na(s).includes(t))),hl=(s,t)=>Un.obj(s)?t&&s[t]:s,ys=(s,t)=>s.default===!0?s[t]:s.default?s.default[t]:void 0,nd=s=>s,th=(s,t=nd)=>{let r=Wa;s.default&&s.default!==!0&&(s=s.default,r=Object.keys(s));const l={};for(const c of r){const p=t(s[c],c);Un.und(p)||(l[c]=p)}return l},Wa=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Ea={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function nf(s){const t={};let r=0;if(Ua(s,(l,c)=>{Ea[c]||(t[c]=l,r++)}),r)return t}function mu(s){const t=nf(s);if(t){const r={to:t};return Ua(s,(l,c)=>c in t||(r[c]=l)),r}return Pi({},s)}function Ks(s){return s=cs(s),Un.arr(s)?s.map(Ks):yc(s)?dc.createStringInterpolator({range:[0,1],output:[s,s]})(1):s}function dg(s){for(const t in s)return!0;return!1}function Xs(s){return Un.fun(s)||Un.arr(s)&&Un.obj(s[0])}function rd(s,t){var r;(r=s.ref)==null||r.delete(s),t==null||t.delete(s)}function fl(s,t){if(t&&s.ref!==t){var r;(r=s.ref)==null||r.delete(s),t.add(s),s.ref=t}}function nh(s,t,r=1e3){useIsomorphicLayoutEffect(()=>{if(t){let l=0;each(s,(c,p)=>{const h=c.current;if(h.length){let m=r*t[p];isNaN(m)?m=l:l=m,each(h,v=>{each(v.queue,E=>{const x=E.delay;E.delay=T=>m+jo(x||0,T)})}),c.start()}})}else{let l=Promise.resolve();each(s,c=>{const p=c.current;if(p.length){const h=p.map(m=>{const v=m.queue;return m.queue=[],v});l=l.then(()=>(each(p,(m,v)=>each(h[v]||[],E=>m.queue.push(E))),Promise.all(c.start())))}})}})}const br=Pi({},{default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}}.default,{mass:1,damping:1,easing:pu.linear,clamp:!1});class Ys{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,br)}}function Ec(s,t,r){r&&(r=Pi({},r),bc(r,t),t=Pi({},r,t)),bc(s,t),Object.assign(s,t);for(const h in br)s[h]==null&&(s[h]=br[h]);let{mass:l,frequency:c,damping:p}=s;return Un.und(c)||(c<.01&&(c=.01),p<0&&(p=0),s.tension=Math.pow(2*Math.PI/c,2)*l,s.friction=4*Math.PI*p*l/c),s}function bc(s,t){if(!Un.und(t.decay))s.duration=void 0;else{const r=!Un.und(t.tension)||!Un.und(t.friction);(r||!Un.und(t.frequency)||!Un.und(t.damping)||!Un.und(t.mass))&&(s.duration=void 0,s.decay=void 0),r&&(s.frequency=void 0)}}const rf=[];class Va{constructor(){this.changed=!1,this.values=rf,this.toValues=null,this.fromValues=rf,this.to=void 0,this.from=void 0,this.config=new Ys,this.immediate=!1}}function Au(s,{key:t,props:r,defaultProps:l,state:c,actions:p}){return new Promise((h,m)=>{var v;let E,x,T=Fp((v=r.cancel)!=null?v:l==null?void 0:l.cancel,t);if(T)U();else{Un.und(r.pause)||(c.paused=Fp(r.pause,t));let P=l==null?void 0:l.pause;P!==!0&&(P=c.paused||Fp(P,t)),E=jo(r.delay||0,t),P?(c.resumeQueue.add(F),p.pause()):(p.resume(),F())}function R(){c.resumeQueue.add(F),c.timeouts.delete(x),x.cancel(),E=x.time-Qn.now()}function F(){E>0&&!dc.skipAnimation?(c.delayed=!0,x=Qn.setTimeout(U,E),c.pauseQueue.add(R),c.timeouts.add(x)):U()}function U(){c.delayed&&(c.delayed=!1),c.pauseQueue.delete(R),c.timeouts.delete(x),s<=(c.cancelId||0)&&(T=!0);try{p.start(Pi({},r,{callId:s,cancel:T}),h)}catch(P){m(P)}}})}const id=(s,t)=>t.length==1?t[0]:t.some(r=>r.cancelled)?no(s.get()):t.every(r=>r.noop)?vs(s.get()):Ra(s.get(),t.every(r=>r.finished)),vs=s=>({value:s,noop:!0,finished:!0,cancelled:!1}),Ra=(s,t,r=!1)=>({value:s,finished:t,cancelled:r}),no=s=>({value:s,cancelled:!0,finished:!1});function Gc(s,t,r,l){const{callId:c,parentId:p,onRest:h}=t,{asyncTo:m,promise:v}=r;return!p&&s===m&&!t.reset?v:r.promise=(()=>fs(this,null,function*(){r.asyncId=c,r.asyncTo=s;const E=th(t,(O,z)=>z==="onRest"?void 0:O);let x,T;const R=new Promise((O,z)=>(x=O,T=z)),F=O=>{const z=c<=(r.cancelId||0)&&no(l)||c!==r.asyncId&&Ra(l,!1);if(z)throw O.result=z,T(O),O},U=(O,z)=>{const L=new zm,k=new ih;return(()=>fs(this,null,function*(){if(dc.skipAnimation)throw rh(r),k.result=Ra(l,!1),T(k),k;F(L);const H=Un.obj(O)?Pi({},O):Pi({},z,{to:O});H.parentId=c,Ua(E,(W,J)=>{Un.und(H[J])&&(H[J]=W)});const X=yield l.start(H);return F(L),r.paused&&(yield new Promise(W=>{r.resumeQueue.add(W)})),X}))()};let P;if(dc.skipAnimation)return rh(r),Ra(l,!1);try{let O;Un.arr(s)?O=(z=>fs(this,null,function*(){for(const L of z)yield U(L)}))(s):O=Promise.resolve(s(U,l.stop.bind(l))),yield Promise.all([O.then(x),R]),P=Ra(l.get(),!0,!1)}catch(O){if(O instanceof zm)P=O.result;else if(O instanceof ih)P=O.result;else throw O}finally{c==r.asyncId&&(r.asyncId=p,r.asyncTo=p?m:void 0,r.promise=p?v:void 0)}return Un.fun(h)&&Qn.batchedUpdates(()=>{h(P,l,l.item)}),P}))()}function rh(s,t){pc(s.timeouts,r=>r.cancel()),s.pauseQueue.clear(),s.resumeQueue.clear(),s.asyncId=s.asyncTo=s.promise=void 0,t&&(s.cancelId=t)}class zm extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class ih extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const Mc=s=>s instanceof lr;let l1=1;class lr extends Sp{constructor(...t){super(...t),this.id=l1++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(t){this._priority!=t&&(this._priority=t,this._onPriorityChange(t))}get(){const t=dl(this);return t&&t.getValue()}to(...t){return dc.to(this,t)}interpolate(...t){return Qo(),dc.to(this,t)}toJSON(){return this.get()}observerAdded(t){t==1&&this._attach()}observerRemoved(t){t==0&&this._detach()}_attach(){}_detach(){}_onChange(t,r=!1){$o(this,{type:"change",parent:this,value:t,idle:r})}_onPriorityChange(t){this.idle||wa.sort(this),$o(this,{type:"priority",parent:this,priority:t})}}const Uc=Symbol.for("SpringPhase"),Dr=1,of=2,fg=4,Is=s=>(s[Uc]&Dr)>0,gl=s=>(s[Uc]&of)>0,Zl=s=>(s[Uc]&fg)>0,Qa=(s,t)=>t?s[Uc]|=of|Dr:s[Uc]&=~of,yu=(s,t)=>t?s[Uc]|=fg:s[Uc]&=~fg;class Fs extends lr{constructor(t,r){if(super(),this.key=void 0,this.animation=new Va,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Un.und(t)||!Un.und(r)){const l=Un.obj(t)?Pi({},t):Pi({},r,{from:t});Un.und(l.default)&&(l.default=!0),this.start(l)}}get idle(){return!(gl(this)||this._state.asyncTo)||Zl(this)}get goal(){return cs(this.animation.to)}get velocity(){const t=dl(this);return t instanceof Rl?t.lastVelocity||0:t.getPayload().map(r=>r.lastVelocity||0)}get hasAnimated(){return Is(this)}get isAnimating(){return gl(this)}get isPaused(){return Zl(this)}get isDelayed(){return this._state.delayed}advance(t){let r=!0,l=!1;const c=this.animation;let{config:p,toValues:h}=c;const m=ed(c.to);!m&&cl(c.to)&&(h=Na(cs(c.to))),c.values.forEach((x,T)=>{if(x.done)return;const R=x.constructor==rp?1:m?m[T].lastPosition:h[T];let F=c.immediate,U=R;if(!F){if(U=x.lastPosition,p.tension<=0){x.done=!0;return}let P=x.elapsedTime+=t;const O=c.fromValues[T],z=x.v0!=null?x.v0:x.v0=Un.arr(p.velocity)?p.velocity[T]:p.velocity;let L;const k=p.precision||(O==R?.005:Math.min(1,Math.abs(R-O)*.001));if(Un.und(p.duration))if(p.decay){const H=p.decay===!0?.998:p.decay,X=Math.exp(-(1-H)*P);U=O+z/(1-H)*(1-X),F=Math.abs(x.lastPosition-U)<=k,L=z*X}else{L=x.lastVelocity==null?z:x.lastVelocity;const H=p.restVelocity||k/10,X=p.clamp?0:p.bounce,W=!Un.und(X),J=O==R?x.v0>0:O<R;let Y,ce=!1;const ue=1,ge=Math.ceil(t/ue);for(let le=0;le<ge&&(Y=Math.abs(L)>H,!(!Y&&(F=Math.abs(R-U)<=k,F)));++le){W&&(ce=U==R||U>R==J,ce&&(L=-L*X,U=R));const Me=-p.tension*1e-6*(U-R),me=-p.friction*.001*L,Te=(Me+me)/p.mass;L=L+Te*ue,U=U+L*ue}}else{let H=1;p.duration>0&&(this._memoizedDuration!==p.duration&&(this._memoizedDuration=p.duration,x.durationProgress>0&&(x.elapsedTime=p.duration*x.durationProgress,P=x.elapsedTime+=t)),H=(p.progress||0)+P/this._memoizedDuration,H=H>1?1:H<0?0:H,x.durationProgress=H),U=O+p.easing(H)*(R-O),L=(U-x.lastPosition)/t,F=H==1}x.lastVelocity=L,Number.isNaN(U)&&(Yi.warn("Got NaN while animating:",this),F=!0)}m&&!m[T].done&&(F=!1),F?x.done=!0:r=!1,x.setValue(U,p.round)&&(l=!0)});const v=dl(this),E=v.getValue();if(r){const x=cs(c.to);(E!==x||l)&&!p.decay?(v.setValue(x),this._onChange(x)):l&&p.decay&&this._onChange(E),this._stop()}else l&&this._onChange(E)}set(t){return Qn.batchedUpdates(()=>{this._stop(),this._focus(t),this._set(t)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(gl(this)){const{to:t,config:r}=this.animation;Qn.batchedUpdates(()=>{this._onStart(),r.decay||this._set(t,!1),this._stop()})}return this}update(t){return(this.queue||(this.queue=[])).push(t),this}start(t,r){let l;return Un.und(t)?(l=this.queue||[],this.queue=[]):l=[Un.obj(t)?t:Pi({},r,{to:t})],Promise.all(l.map(c=>this._update(c))).then(c=>id(this,c))}stop(t){const{to:r}=this.animation;return this._focus(this.get()),rh(this._state,t&&this._lastCallId),Qn.batchedUpdates(()=>this._stop(r,t)),this}reset(){this._update({reset:!0})}eventObserved(t){t.type=="change"?this._start():t.type=="priority"&&(this.priority=t.priority+1)}_prepareNode(t){const r=this.key||"";let{to:l,from:c}=t;l=Un.obj(l)?l[r]:l,(l==null||Xs(l))&&(l=void 0),c=Un.obj(c)?c[r]:c,c==null&&(c=void 0);const p={to:l,from:c};return Is(this)||(t.reverse&&([l,c]=[c,l]),c=cs(c),Un.und(c)?dl(this)||this._set(l):this._set(c)),p}_update(t,r){let l=Pi({},t);const{key:c,defaultProps:p}=this;l.default&&Object.assign(p,th(l,(v,E)=>/^on/.test(E)?hl(v,c):v)),op(this,l,"onProps"),Il(this,"onProps",l,this);const h=this._prepareNode(l);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const m=this._state;return Au(++this._lastCallId,{key:c,props:l,defaultProps:p,state:m,actions:{pause:()=>{Zl(this)||(yu(this,!0),Wu(m.pauseQueue),Il(this,"onPause",Ra(this,mi(this,this.animation.to)),this))},resume:()=>{Zl(this)&&(yu(this,!1),gl(this)&&this._resume(),Wu(m.resumeQueue),Il(this,"onResume",Ra(this,mi(this,this.animation.to)),this))},start:this._merge.bind(this,h)}}).then(v=>{if(l.loop&&v.finished&&!(r&&v.noop)){const E=sf(l);if(E)return this._update(E,!0)}return v})}_merge(t,r,l){if(r.cancel)return this.stop(!0),l(no(this));const c=!Un.und(t.to),p=!Un.und(t.from);if(c||p)if(r.callId>this._lastToId)this._lastToId=r.callId;else return l(no(this));const{key:h,defaultProps:m,animation:v}=this,{to:E,from:x}=v;let{to:T=E,from:R=x}=t;p&&!c&&(!r.default||Un.und(T))&&(T=R),r.reverse&&([T,R]=[R,T]);const F=!Cl(R,x);F&&(v.from=R),R=cs(R);const U=!Cl(T,E);U&&this._focus(T);const P=Xs(r.to),{config:O}=v,{decay:z,velocity:L}=O;(c||p)&&(O.velocity=0),r.config&&!P&&Ec(O,jo(r.config,h),r.config!==m.config?jo(m.config,h):void 0);let k=dl(this);if(!k||Un.und(T))return l(Ra(this,!0));const H=Un.und(r.reset)?p&&!r.default:!Un.und(R)&&Fp(r.reset,h),X=H?R:this.get(),W=Ks(T),J=Un.num(W)||Un.arr(W)||yc(W),Y=!P&&(!J||Fp(m.immediate||r.immediate,h));if(U){const le=td(T);if(le!==k.constructor)if(Y)k=this._set(W);else throw Error(`Cannot animate between ${k.constructor.name} and ${le.name}, as the "to" prop suggests`)}const ce=k.constructor;let ue=cl(T),ge=!1;if(!ue){const le=H||!Is(this)&&F;(U||le)&&(ge=Cl(Ks(X),W),ue=!ge),(!Cl(v.immediate,Y)&&!Y||!Cl(O.decay,z)||!Cl(O.velocity,L))&&(ue=!0)}if(ge&&gl(this)&&(v.changed&&!H?ue=!0:ue||this._stop(E)),!P&&((ue||cl(E))&&(v.values=k.getPayload(),v.toValues=cl(T)?null:ce==rp?[1]:Na(W)),v.immediate!=Y&&(v.immediate=Y,!Y&&!H&&this._set(E)),ue)){const{onRest:le}=v;to(vu,me=>op(this,r,me));const Me=Ra(this,mi(this,E));Wu(this._pendingCalls,Me),this._pendingCalls.add(l),v.changed&&Qn.batchedUpdates(()=>{v.changed=!H,le==null||le(Me,this),H?jo(m.onRest,Me):v.onStart==null||v.onStart(Me,this)})}H&&this._set(X),P?l(Gc(r.to,r,this._state,this)):ue?this._start():gl(this)&&!U?this._pendingCalls.add(l):l(vs(X))}_focus(t){const r=this.animation;t!==r.to&&(Yu(this)&&this._detach(),r.to=t,Yu(this)&&this._attach())}_attach(){let t=0;const{to:r}=this.animation;cl(r)&&(Zu(r,this),Mc(r)&&(t=r.priority+1)),this.priority=t}_detach(){const{to:t}=this.animation;cl(t)&&Vl(t,this)}_set(t,r=!0){const l=cs(t);if(!Un.und(l)){const c=dl(this);if(!c||!Cl(l,c.getValue())){const p=td(l);!c||c.constructor!=p?Ba(this,p.create(l)):c.setValue(l),c&&Qn.batchedUpdates(()=>{this._onChange(l,r)})}}return dl(this)}_onStart(){const t=this.animation;t.changed||(t.changed=!0,Il(this,"onStart",Ra(this,mi(this,t.to)),this))}_onChange(t,r){r||(this._onStart(),jo(this.animation.onChange,t,this)),jo(this.defaultProps.onChange,t,this),super._onChange(t,r)}_start(){const t=this.animation;dl(this).reset(cs(t.to)),t.immediate||(t.fromValues=t.values.map(r=>r.lastPosition)),gl(this)||(Qa(this,!0),Zl(this)||this._resume())}_resume(){dc.skipAnimation?this.finish():wa.start(this)}_stop(t,r){if(gl(this)){Qa(this,!1);const l=this.animation;to(l.values,p=>{p.done=!0}),l.toValues&&(l.onChange=l.onPause=l.onResume=void 0),$o(this,{type:"idle",parent:this});const c=r?no(this.get()):Ra(this.get(),mi(this,t!=null?t:l.to));Wu(this._pendingCalls,c),l.changed&&(l.changed=!1,Il(this,"onRest",c,this))}}}function mi(s,t){const r=Ks(t),l=Ks(s.get());return Cl(l,r)}function sf(s,t=s.loop,r=s.to){let l=jo(t);if(l){const c=l!==!0&&mu(l),p=(c||s).reverse,h=!c||c.reset;return ql(Pi({},s,{loop:t,default:!1,pause:void 0,to:!p||Xs(r)?r:void 0,from:h?s.from:void 0,reset:h},c))}}function ql(s){const{to:t,from:r}=s=mu(s),l=new Set;return Un.obj(t)&&oh(t,l),Un.obj(r)&&oh(r,l),s.keys=l.size?Array.from(l):null,s}function od(s){const t=ql(s);return Un.und(t.default)&&(t.default=th(t)),t}function oh(s,t){Ua(s,(r,l)=>r!=null&&t.add(l))}const vu=["onStart","onRest","onChange","onPause","onResume"];function op(s,t,r){s.animation[r]=t[r]!==ys(t,r)?hl(t[r],s.key):void 0}function Il(s,t,...r){var l,c,p,h;(l=(c=s.animation)[t])==null||l.call(c,...r),(p=(h=s.defaultProps)[t])==null||p.call(h,...r)}const gg=["onStart","onChange","onRest"];let af=1;class sd{constructor(t,r){this.id=af++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),r&&(this._flush=r),t&&this.start(Pi({default:!0},t))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(t=>t.idle&&!t.isDelayed&&!t.isPaused)}get item(){return this._item}set item(t){this._item=t}get(){const t={};return this.each((r,l)=>t[l]=r.get()),t}set(t){for(const r in t){const l=t[r];Un.und(l)||this.springs[r].set(l)}}update(t){return t&&this.queue.push(ql(t)),this}start(t){let{queue:r}=this;return t?r=Na(t).map(ql):this.queue=[],this._flush?this._flush(this,r):(Dp(this,r),_u(this,r))}stop(t,r){if(t!==!!t&&(r=t),r){const l=this.springs;to(Na(r),c=>l[c].stop(!!t))}else rh(this._state,this._lastAsyncId),this.each(l=>l.stop(!!t));return this}pause(t){if(Un.und(t))this.start({pause:!0});else{const r=this.springs;to(Na(t),l=>r[l].pause())}return this}resume(t){if(Un.und(t))this.start({pause:!1});else{const r=this.springs;to(Na(t),l=>r[l].resume())}return this}each(t){Ua(this.springs,t)}_onFrame(){const{onStart:t,onChange:r,onRest:l}=this._events,c=this._active.size>0,p=this._changed.size>0;(c&&!this._started||p&&!this._started)&&(this._started=!0,pc(t,([v,E])=>{E.value=this.get(),v(E,this,this._item)}));const h=!c&&this._started,m=p||h&&l.size?this.get():null;p&&r.size&&pc(r,([v,E])=>{E.value=m,v(E,this,this._item)}),h&&(this._started=!1,pc(l,([v,E])=>{E.value=m,v(E,this,this._item)}))}eventObserved(t){if(t.type=="change")this._changed.add(t.parent),t.idle||this._active.add(t.parent);else if(t.type=="idle")this._active.delete(t.parent);else return;Qn.onFrame(this._onFrame)}}function _u(s,t){return Promise.all(t.map(r=>ad(s,r))).then(r=>id(s,r))}function ad(s,t,r){return fs(this,null,function*(){const{keys:l,to:c,from:p,loop:h,onRest:m,onResolve:v}=t,E=Un.obj(t.default)&&t.default;h&&(t.loop=!1),c===!1&&(t.to=null),p===!1&&(t.from=null);const x=Un.arr(c)||Un.fun(c)?c:void 0;x?(t.to=void 0,t.onRest=void 0,E&&(E.onRest=void 0)):to(gg,P=>{const O=t[P];if(Un.fun(O)){const z=s._events[P];t[P]=({finished:L,cancelled:k})=>{const H=z.get(O);H?(L||(H.finished=!1),k&&(H.cancelled=!0)):z.set(O,{value:null,finished:L||!1,cancelled:k||!1})},E&&(E[P]=t[P])}});const T=s._state;t.pause===!T.paused?(T.paused=t.pause,Wu(t.pause?T.pauseQueue:T.resumeQueue)):T.paused&&(t.pause=!0);const R=(l||Object.keys(s.springs)).map(P=>s.springs[P].start(t)),F=t.cancel===!0||ys(t,"cancel")===!0;(x||F&&T.asyncId)&&R.push(Au(++s._lastAsyncId,{props:t,state:T,actions:{pause:ou,resume:ou,start(P,O){F?(rh(T,s._lastAsyncId),O(no(s))):(P.onRest=m,O(Gc(x,P,T,s)))}}})),T.paused&&(yield new Promise(P=>{T.resumeQueue.add(P)}));const U=id(s,yield Promise.all(R));if(h&&U.finished&&!(r&&U.noop)){const P=sf(t,h,c);if(P)return Dp(s,[P]),ad(s,P,!0)}return v&&Qn.batchedUpdates(()=>v(U,s,s.item)),U})}function sh(s,t){const r=Pi({},s.springs);return t&&to(Na(t),l=>{Un.und(l.keys)&&(l=ql(l)),Un.obj(l.to)||(l=Pi({},l,{to:void 0})),Op(r,l,c=>cd(c))}),ld(s,r),r}function ld(s,t){Ua(t,(r,l)=>{s.springs[l]||(s.springs[l]=r,Zu(r,s))})}function cd(s,t){const r=new Fs;return r.key=s,t&&Zu(r,t),r}function Op(s,t,r){t.keys&&to(t.keys,l=>{(s[l]||(s[l]=r(l)))._prepareNode(t)})}function Dp(s,t){to(t,r=>{Op(s.springs,r,l=>cd(l,s))})}function Oo(s,t){if(s==null)return{};var r={},l=Object.keys(s),c,p;for(p=0;p<l.length;p++)c=l[p],!(t.indexOf(c)>=0)&&(r[c]=s[c]);return r}const ah=["children"],Nc=s=>{let{children:t}=s,r=Oo(s,ah);const l=(0,d.useContext)(Fl),c=r.pause||!!l.pause,p=r.immediate||!!l.immediate;r=qh(()=>({pause:c,immediate:p}),[c,p]);const{Provider:h}=Fl;return d.createElement(h,{value:r},t)},Fl=Lp(Nc,{});Nc.Provider=Fl.Provider,Nc.Consumer=Fl.Consumer;function Lp(s,t){return Object.assign(s,d.createContext(t)),s.Provider._context=s,s.Consumer._context=s,s}const ca=()=>{const s=[],t=function(c){Ac();const p=[];return to(s,(h,m)=>{if(Un.und(c))p.push(h.start());else{const v=r(c,h,m);v&&p.push(h.start(v))}}),p};t.current=s,t.add=function(l){s.includes(l)||s.push(l)},t.delete=function(l){const c=s.indexOf(l);~c&&s.splice(c,1)},t.pause=function(){return to(s,l=>l.pause(...arguments)),this},t.resume=function(){return to(s,l=>l.resume(...arguments)),this},t.set=function(l){to(s,c=>c.set(l))},t.start=function(l){const c=[];return to(s,(p,h)=>{if(Un.und(l))c.push(p.start());else{const m=this._getProps(l,p,h);m&&c.push(p.start(m))}}),c},t.stop=function(){return to(s,l=>l.stop(...arguments)),this},t.update=function(l){return to(s,(c,p)=>c.update(this._getProps(l,c,p))),this};const r=function(c,p,h){return Un.fun(c)?c(h,p):c};return t._getProps=r,t};function lf(s,t,r){const l=Un.fun(t)&&t;l&&!r&&(r=[]);const c=(0,d.useMemo)(()=>l||arguments.length==3?ca():void 0,[]),p=(0,d.useRef)(0),h=$u(),m=(0,d.useMemo)(()=>({ctrls:[],queue:[],flush(z,L){const k=sh(z,L);return p.current>0&&!m.queue.length&&!Object.keys(k).some(X=>!z.springs[X])?_u(z,L):new Promise(X=>{ld(z,k),m.queue.push(()=>{X(_u(z,L))}),h()})}}),[]),v=(0,d.useRef)([...m.ctrls]),E=[],x=Yl(s)||0;(0,d.useMemo)(()=>{to(v.current.slice(s,x),z=>{rd(z,c),z.stop(!0)}),v.current.length=s,T(x,s)},[s]),(0,d.useMemo)(()=>{T(0,Math.min(x,s))},r);function T(z,L){for(let k=z;k<L;k++){const H=v.current[k]||(v.current[k]=new sd(null,m.flush)),X=l?l(k,H):t[k];X&&(E[k]=od(X))}}const R=v.current.map((z,L)=>sh(z,E[L])),F=(0,d.useContext)(Nc),U=Yl(F),P=F!==U&&dg(F);Xl(()=>{p.current++,m.ctrls=v.current;const{queue:z}=m;z.length&&(m.queue=[],to(z,L=>L())),to(v.current,(L,k)=>{c==null||c.add(L),P&&L.start({default:F});const H=E[k];H&&(fl(L,H.ref),L.ref?L.queue.push(H):L.start(H))})}),ui(()=>()=>{to(m.ctrls,z=>z.stop(!0))});const O=R.map(z=>Pi({},z));return c?[O,c]:O}function pd(s,t){const r=Un.fun(s),[[l],c]=lf(1,r?s:[s],r?t||[]:t);return r||arguments.length==2?[l,c]:l}const lh=()=>ca(),Gm=()=>useState(lh)[0],Os=(s,t)=>{const r=useConstant(()=>new Fs(s,t));return useOnce(()=>()=>{r.stop()}),r};function ai(s,t,r){const l=is.fun(t)&&t;l&&!r&&(r=[]);let c=!0,p;const h=lf(s,(v,E)=>{const x=l?l(v,E):t;return p=x.ref,c=c&&x.reverse,x},r||[{}]);if(useIsomorphicLayoutEffect(()=>{each(h[1].current,(v,E)=>{const x=h[1].current[E+(c?1:-1)];if(fl(v,p),v.ref){x&&v.update({to:x.springs});return}x?v.start({to:x.springs}):v.start()})},r),l||arguments.length==3){var m;const v=(m=p)!=null?m:h[1];return v._getProps=(E,x,T)=>{const R=is.fun(E)?E(T,x):E;if(R){const F=v.current[T+(R.reverse?1:-1)];return F&&(R.to=F.springs),R}},h}return h[0]}let Qi;(function(s){s.MOUNT="mount",s.ENTER="enter",s.UPDATE="update",s.LEAVE="leave"})(Qi||(Qi={}));function Ji(s,t,r){const l=is.fun(t)&&t,{reset:c,sort:p,trail:h=0,expires:m=!0,exitBeforeEnter:v=!1,onDestroyed:E,ref:x,config:T}=l?l():t,R=useMemo(()=>l||arguments.length==3?ca():void 0,[]),F=toArray(s),U=[],P=useRef(null),O=c?null:P.current;useIsomorphicLayoutEffect(()=>{P.current=U}),useOnce(()=>(each(U,me=>{R==null||R.add(me.ctrl),me.ctrl.ref=R}),()=>{each(P.current,me=>{me.expired&&clearTimeout(me.expirationId),rd(me.ctrl,R),me.ctrl.stop(!0)})}));const z=pa(F,l?l():t,O),L=c&&P.current||[];useIsomorphicLayoutEffect(()=>each(L,({ctrl:me,item:Te,key:Ue})=>{rd(me,R),jo(E,Te,Ue)}));const k=[];if(O&&each(O,(me,Te)=>{me.expired?(clearTimeout(me.expirationId),L.push(me)):(Te=k[Te]=z.indexOf(me.key),~Te&&(U[Te]=me))}),each(F,(me,Te)=>{U[Te]||(U[Te]={key:z[Te],item:me,phase:Qi.MOUNT,ctrl:new sd},U[Te].ctrl.item=me)}),k.length){let me=-1;const{leave:Te}=l?l():t;each(k,(Ue,Re)=>{const Ge=O[Re];~Ue?(me=U.indexOf(Ge),U[me]=Pi({},Ge,{item:F[Ue]})):Te&&U.splice(++me,0,Ge)})}is.fun(p)&&U.sort((me,Te)=>p(me.item,Te.item));let H=-h;const X=useForceUpdate(),W=th(t),J=new Map,Y=useRef(new Map),ce=useRef(!1);each(U,(me,Te)=>{const Ue=me.key,Re=me.phase,Ge=l?l():t;let De,Xe,Ce=jo(Ge.delay||0,Ue);if(Re==Qi.MOUNT)De=Ge.enter,Xe=Qi.ENTER;else{const Ae=z.indexOf(Ue)<0;if(Re!=Qi.LEAVE)if(Ae)De=Ge.leave,Xe=Qi.LEAVE;else if(De=Ge.update)Xe=Qi.UPDATE;else return;else if(!Ae)De=Ge.enter,Xe=Qi.ENTER;else return}if(De=jo(De,me.item,Te),De=is.obj(De)?mu(De):{to:De},!De.config){const Ae=T||W.config;De.config=jo(Ae,me.item,Te,Xe)}H+=h;const Ee=Pi({},W,{delay:Ce+H,ref:x,immediate:Ge.immediate,reset:!1},De);if(Xe==Qi.ENTER&&is.und(Ee.from)){const Ae=l?l():t,Be=is.und(Ae.initial)||O?Ae.from:Ae.initial;Ee.from=jo(Be,me.item,Te)}const{onResolve:_e}=Ee;Ee.onResolve=Ae=>{jo(_e,Ae);const Be=P.current,ve=Be.find(ke=>ke.key===Ue);if(ve&&!(Ae.cancelled&&ve.phase!=Qi.UPDATE)&&ve.ctrl.idle){const ke=Be.every(vt=>vt.ctrl.idle);if(ve.phase==Qi.LEAVE){const vt=jo(m,ve.item);if(vt!==!1){const ht=vt===!0?0:vt;if(ve.expired=!0,!ke&&ht>0){ht<=2147483647&&(ve.expirationId=setTimeout(X,ht));return}}}ke&&Be.some(vt=>vt.expired)&&(Y.current.delete(ve),v&&(ce.current=!0),X())}};const oe=sh(me.ctrl,Ee);Xe===Qi.LEAVE&&v?Y.current.set(me,{phase:Xe,springs:oe,payload:Ee}):J.set(me,{phase:Xe,springs:oe,payload:Ee})});const ue=useContext(Nc),ge=usePrev(ue),le=ue!==ge&&dg(ue);useIsomorphicLayoutEffect(()=>{le&&each(U,me=>{me.ctrl.start({default:ue})})},[ue]),each(J,(me,Te)=>{if(Y.current.size){const Ue=U.findIndex(Re=>Re.key===Te.key);U.splice(Ue,1)}}),useIsomorphicLayoutEffect(()=>{each(Y.current.size?Y.current:J,({phase:me,payload:Te},Ue)=>{const{ctrl:Re}=Ue;Ue.phase=me,R==null||R.add(Re),le&&me==Qi.ENTER&&Re.start({default:ue}),Te&&(fl(Re,Te.ref),(Re.ref||R)&&!ce.current?Re.update(Te):(Re.start(Te),ce.current&&(ce.current=!1)))})},c?void 0:r);const Me=me=>React.createElement(React.Fragment,null,U.map((Te,Ue)=>{const{springs:Re}=J.get(Te)||Te.ctrl,Ge=me(Pi({},Re),Te.item,Te,Ue);return Ge&&Ge.type?React.createElement(Ge.type,Pi({},Ge.props,{key:is.str(Te.key)||is.num(Te.key)?Te.key:Te.ctrl.id,ref:Ge.ref})):Ge}));return R?[Me,R]:Me}let _s=1;function pa(s,{key:t,keys:r=t},l){if(r===null){const c=new Set;return s.map(p=>{const h=l&&l.find(m=>m.item===p&&m.phase!==Qi.LEAVE&&!c.has(m));return h?(c.add(h),h.key):_s++})}return is.und(r)?s:is.fun(r)?s.map(r):toArray(r)}const Eu=null,Es=(s={})=>{let{container:t}=s,r=Oo(s,Eu);const[l,c]=pd(()=>Pi({scrollX:0,scrollY:0,scrollXProgress:0,scrollYProgress:0},r),[]);return useIsomorphicLayoutEffect(()=>{const p=onScroll(({x:h,y:m})=>{c.start({scrollX:h.current,scrollXProgress:h.progress,scrollY:m.current,scrollYProgress:m.progress})},{container:(t==null?void 0:t.current)||void 0});return()=>{each(Object.values(l),h=>h.stop()),p()}},[]),l},ud=null,bu=s=>{let{container:t}=s,r=Oo(s,ud);const[l,c]=pd(()=>Pi({width:0,height:0},r),[]);return useIsomorphicLayoutEffect(()=>{const p=onResize(({width:h,height:m})=>{c.start({width:h,height:m,immediate:l.width.get()===0||l.height.get()===0})},{container:(t==null?void 0:t.current)||void 0});return()=>{each(Object.values(l),h=>h.stop()),p()}},[]),l},cf=null,mg=null,$l={any:0,all:1};function Js(s,t){const[r,l]=useState(!1),c=useRef(),p=is.fun(s)&&s,h=p?p():{},{to:m={},from:v={}}=h,E=Oo(h,cf),x=p?t:s,[T,R]=pd(()=>Pi({from:v},E),[]);return useIsomorphicLayoutEffect(()=>{const F=c.current,U=x!=null?x:{},{root:P,once:O,amount:z="any"}=U,L=Oo(U,mg);if(!F||O&&r||typeof IntersectionObserver=="undefined")return;const k=new WeakMap,H=()=>(m&&R.start(m),l(!0),O?void 0:()=>{v&&R.start(v),l(!1)}),X=J=>{J.forEach(Y=>{const ce=k.get(Y.target);if(Y.isIntersecting!==!!ce)if(Y.isIntersecting){const ue=H();is.fun(ue)?k.set(Y.target,ue):W.unobserve(Y.target)}else ce&&(ce(),k.delete(Y.target))})},W=new IntersectionObserver(X,Pi({root:P&&P.current||void 0,threshold:typeof z=="number"||Array.isArray(z)?z:$l[z]},L));return W.observe(F),()=>W.unobserve(F)},[x]),p?[c,T]:[c,r]}const dd=null;function ch(s){let{children:t}=s,r=Oo(s,dd);return t(pd(r))}const Mu=null;function Ag(s){let{items:t,children:r}=s,l=Oo(s,Mu);const c=ai(t.length,l);return t.map((p,h)=>{const m=r(p,h);return is.fun(m)?m(c[h]):m})}const Pp=null;function xu(s){let{items:t,children:r}=s,l=Oo(s,Pp);return Ji(t,l)(r)}class hd extends lr{constructor(t,r){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=t,this.calc=Qu(...r);const l=this._get(),c=td(l);Ba(this,c.create(l))}advance(t){const r=this._get(),l=this.get();Cl(r,l)||(dl(this).setValue(r),this._onChange(r,this.idle)),!this.idle&&ph(this._active)&&Cu(this)}_get(){const t=Un.arr(this.source)?this.source.map(cs):Na(cs(this.source));return this.calc(...t)}_start(){this.idle&&!ph(this._active)&&(this.idle=!1,to(ed(this),t=>{t.done=!1}),dc.skipAnimation?(Qn.batchedUpdates(()=>this.advance()),Cu(this)):wa.start(this))}_attach(){let t=1;to(Na(this.source),r=>{cl(r)&&Zu(r,this),Mc(r)&&(r.idle||this._active.add(r),t=Math.max(t,r.priority+1))}),this.priority=t,this._start()}_detach(){to(Na(this.source),t=>{cl(t)&&Vl(t,this)}),this._active.clear(),Cu(this)}eventObserved(t){t.type=="change"?t.idle?this.advance():(this._active.add(t.parent),this._start()):t.type=="idle"?this._active.delete(t.parent):t.type=="priority"&&(this.priority=Na(this.source).reduce((r,l)=>Math.max(r,(Mc(l)?l.priority:0)+1),0))}}function kp(s){return s.idle!==!1}function ph(s){return!s.size||Array.from(s).every(kp)}function Cu(s){s.idle||(s.idle=!0,to(ed(s),t=>{t.done=!0}),$o(s,{type:"idle",parent:s}))}const Um=(s,...t)=>new hd(s,t),yg=(s,...t)=>(deprecateInterpolate(),new hd(s,t));dc.assign({createStringInterpolator:aa,to:(s,t)=>new hd(s,t)});const vg=wa.advance,Ka=["primitive"].concat(Object.keys(i).filter(s=>/^[A-Z]/.test(s)).map(s=>s[0].toLowerCase()+s.slice(1)));dc.assign({createStringInterpolator:aa,colors:Qh,frameLoop:"demand"}),(0,_.n)(()=>{Qn.advance()});const ec=km(Ka,{applyAnimatedValues:_.j}).animated;function pf(s,t,r){return Math.max(t,Math.min(s,r))}const Ni={toVector(s,t){return s===void 0&&(s=t),Array.isArray(s)?s:[s,s]},add(s,t){return[s[0]+t[0],s[1]+t[1]]},sub(s,t){return[s[0]-t[0],s[1]-t[1]]},addTo(s,t){s[0]+=t[0],s[1]+=t[1]},subTo(s,t){s[0]-=t[0],s[1]-=t[1]}};function _g(s,t,r){return t===0||Math.abs(t)===1/0?Math.pow(s,r*5):s*t*r/(t+r*s)}function uf(s,t,r,l=.15){return l===0?pf(s,t,r):s<t?-_g(t-s,r-t,l)+t:s>r?+_g(s-r,r-t,l)+r:s}function Eg(s,[t,r],[l,c]){const[[p,h],[m,v]]=s;return[uf(t,p,h,l),uf(r,m,v,c)]}function c1(s,t){if(typeof s!="object"||s===null)return s;var r=s[Symbol.toPrimitive];if(r!==void 0){var l=r.call(s,t||"default");if(typeof l!="object")return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(s)}function zp(s){var t=c1(s,"string");return typeof t=="symbol"?t:String(t)}function xs(s,t,r){return t=zp(t),t in s?Object.defineProperty(s,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):s[t]=r,s}function bg(s,t){var r=Object.keys(s);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(s);t&&(l=l.filter(function(c){return Object.getOwnPropertyDescriptor(s,c).enumerable})),r.push.apply(r,l)}return r}function Ko(s){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bg(Object(r),!0).forEach(function(l){xs(s,l,r[l])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(r)):bg(Object(r)).forEach(function(l){Object.defineProperty(s,l,Object.getOwnPropertyDescriptor(r,l))})}return s}const Gp={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function Mg(s){return s?s[0].toUpperCase()+s.slice(1):""}const Nm=["enter","leave"];function xg(s=!1,t){return s&&!Nm.includes(t)}function df(s,t="",r=!1){const l=Gp[s],c=l&&l[t]||t;return"on"+Mg(s)+Mg(c)+(xg(r,c)?"Capture":"")}const p1=["gotpointercapture","lostpointercapture"];function u1(s){let t=s.substring(2).toLowerCase();const r=!!~t.indexOf("passive");r&&(t=t.replace("passive",""));const l=p1.includes(t)?"capturecapture":"capture",c=!!~t.indexOf(l);return c&&(t=t.replace("capture","")),{device:t,capture:c,passive:r}}function jm(s,t=""){const r=Gp[s],l=r&&r[t]||t;return s+l}function uh(s){return"touches"in s}function Up(s){return uh(s)?"touch":"pointerType"in s?s.pointerType:"mouse"}function d1(s){return Array.from(s.touches).filter(t=>{var r,l;return t.target===s.currentTarget||((r=s.currentTarget)===null||r===void 0||(l=r.contains)===null||l===void 0?void 0:l.call(r,t.target))})}function wu(s){return s.type==="touchend"||s.type==="touchcancel"?s.changedTouches:s.targetTouches}function Cg(s){return uh(s)?wu(s)[0]:s}function Ia(s,t){try{const r=t.clientX-s.clientX,l=t.clientY-s.clientY,c=(t.clientX+s.clientX)/2,p=(t.clientY+s.clientY)/2,h=Math.hypot(r,l);return{angle:-(Math.atan2(r,l)*180)/Math.PI,distance:h,origin:[c,p]}}catch(r){}return null}function h1(s){return d1(s).map(t=>t.identifier)}function Sg(s,t){const[r,l]=Array.from(s.touches).filter(c=>t.includes(c.identifier));return Ia(r,l)}function wg(s){const t=Cg(s);return uh(s)?t.identifier:t.pointerId}function fd(s){const t=Cg(s);return[t.clientX,t.clientY]}const Tg=40,Bg=800;function Hm(s){let{deltaX:t,deltaY:r,deltaMode:l}=s;return l===1?(t*=Tg,r*=Tg):l===2&&(t*=Bg,r*=Bg),[t,r]}function tc(s){var t,r;const{scrollX:l,scrollY:c,scrollLeft:p,scrollTop:h}=s.currentTarget;return[(t=l!=null?l:p)!==null&&t!==void 0?t:0,(r=c!=null?c:h)!==null&&r!==void 0?r:0]}function Rg(s){const t={};if("buttons"in s&&(t.buttons=s.buttons),"shiftKey"in s){const{shiftKey:r,altKey:l,metaKey:c,ctrlKey:p}=s;Object.assign(t,{shiftKey:r,altKey:l,metaKey:c,ctrlKey:p})}return t}function hf(s,...t){return typeof s=="function"?s(...t):s}function Np(){}function ff(...s){return s.length===0?Np:s.length===1?s[0]:function(){let t;for(const r of s)t=r.apply(this,arguments)||t;return t}}function jp(s,t){return Object.assign({},t,s||{})}const gf=32;class mf{constructor(t,r,l){this.ctrl=t,this.args=r,this.key=l,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(t){this.ctrl.state[this.key]=t}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:t,shared:r,ingKey:l,args:c}=this;r[l]=t._active=t.active=t._blocked=t._force=!1,t._step=[!1,!1],t.intentional=!1,t._movement=[0,0],t._distance=[0,0],t._direction=[0,0],t._delta=[0,0],t._bounds=[[-1/0,1/0],[-1/0,1/0]],t.args=c,t.axis=void 0,t.memo=void 0,t.elapsedTime=t.timeDelta=0,t.direction=[0,0],t.distance=[0,0],t.overflow=[0,0],t._movementBound=[!1,!1],t.velocity=[0,0],t.movement=[0,0],t.delta=[0,0],t.timeStamp=0}start(t){const r=this.state,l=this.config;r._active||(this.reset(),this.computeInitial(),r._active=!0,r.target=t.target,r.currentTarget=t.currentTarget,r.lastOffset=l.from?hf(l.from,r):r.offset,r.offset=r.lastOffset,r.startTime=r.timeStamp=t.timeStamp)}computeValues(t){const r=this.state;r._values=t,r.values=this.config.transform(t)}computeInitial(){const t=this.state;t._initial=t._values,t.initial=t.values}compute(t){const{state:r,config:l,shared:c}=this;r.args=this.args;let p=0;if(t&&(r.event=t,l.preventDefault&&t.cancelable&&r.event.preventDefault(),r.type=t.type,c.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,c.locked=!!document.pointerLockElement,Object.assign(c,Rg(t)),c.down=c.pressed=c.buttons%2===1||c.touches>0,p=t.timeStamp-r.timeStamp,r.timeStamp=t.timeStamp,r.elapsedTime=r.timeStamp-r.startTime),r._active){const W=r._delta.map(Math.abs);Ni.addTo(r._distance,W)}this.axisIntent&&this.axisIntent(t);const[h,m]=r._movement,[v,E]=l.threshold,{_step:x,values:T}=r;if(l.hasCustomTransform?(x[0]===!1&&(x[0]=Math.abs(h)>=v&&T[0]),x[1]===!1&&(x[1]=Math.abs(m)>=E&&T[1])):(x[0]===!1&&(x[0]=Math.abs(h)>=v&&Math.sign(h)*v),x[1]===!1&&(x[1]=Math.abs(m)>=E&&Math.sign(m)*E)),r.intentional=x[0]!==!1||x[1]!==!1,!r.intentional)return;const R=[0,0];if(l.hasCustomTransform){const[W,J]=T;R[0]=x[0]!==!1?W-x[0]:0,R[1]=x[1]!==!1?J-x[1]:0}else R[0]=x[0]!==!1?h-x[0]:0,R[1]=x[1]!==!1?m-x[1]:0;this.restrictToAxis&&!r._blocked&&this.restrictToAxis(R);const F=r.offset,U=r._active&&!r._blocked||r.active;U&&(r.first=r._active&&!r.active,r.last=!r._active&&r.active,r.active=c[this.ingKey]=r._active,t&&(r.first&&("bounds"in l&&(r._bounds=hf(l.bounds,r)),this.setup&&this.setup()),r.movement=R,this.computeOffset()));const[P,O]=r.offset,[[z,L],[k,H]]=r._bounds;r.overflow=[P<z?-1:P>L?1:0,O<k?-1:O>H?1:0],r._movementBound[0]=r.overflow[0]?r._movementBound[0]===!1?r._movement[0]:r._movementBound[0]:!1,r._movementBound[1]=r.overflow[1]?r._movementBound[1]===!1?r._movement[1]:r._movementBound[1]:!1;const X=r._active?l.rubberband||[0,0]:[0,0];if(r.offset=Eg(r._bounds,r.offset,X),r.delta=Ni.sub(r.offset,F),this.computeMovement(),U&&(!r.last||p>gf)){r.delta=Ni.sub(r.offset,F);const W=r.delta.map(Math.abs);Ni.addTo(r.distance,W),r.direction=r.delta.map(Math.sign),r._direction=r._delta.map(Math.sign),!r.first&&p>0&&(r.velocity=[W[0]/p,W[1]/p],r.timeDelta=p)}}emit(){const t=this.state,r=this.shared,l=this.config;if(t._active||this.clean(),(t._blocked||!t.intentional)&&!t._force&&!l.triggerAllEvents)return;const c=this.handler(Ko(Ko(Ko({},r),t),{},{[this.aliasKey]:t.values}));c!==void 0&&(t.memo=c)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}function Ig([s,t],r){const l=Math.abs(s),c=Math.abs(t);if(l>c&&l>r)return"x";if(c>l&&c>r)return"y"}class dh extends mf{constructor(...t){super(...t),xs(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=Ni.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=Ni.sub(this.state.offset,this.state.lastOffset)}axisIntent(t){const r=this.state,l=this.config;if(!r.axis&&t){const c=typeof l.axisThreshold=="object"?l.axisThreshold[Up(t)]:l.axisThreshold;r.axis=Ig(r._movement,c)}r._blocked=(l.lockDirection||!!l.axis)&&!r.axis||!!l.axis&&l.axis!==r.axis}restrictToAxis(t){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":t[1]=0;break;case"y":t[0]=0;break}}}const Wm=s=>s,Fg=.15,Og={enabled(s=!0){return s},eventOptions(s,t,r){return Ko(Ko({},r.shared.eventOptions),s)},preventDefault(s=!1){return s},triggerAllEvents(s=!1){return s},rubberband(s=0){switch(s){case!0:return[Fg,Fg];case!1:return[0,0];default:return Ni.toVector(s)}},from(s){if(typeof s=="function")return s;if(s!=null)return Ni.toVector(s)},transform(s,t,r){const l=s||r.shared.transform;return this.hasCustomTransform=!!l,l||Wm},threshold(s){return Ni.toVector(s,0)}},Vm=0,sp=Ko(Ko({},Og),{},{axis(s,t,{axis:r}){if(this.lockDirection=r==="lock",!this.lockDirection)return r},axisThreshold(s=Vm){return s},bounds(s={}){if(typeof s=="function")return p=>sp.bounds(s(p));if("current"in s)return()=>s.current;if(typeof HTMLElement=="function"&&s instanceof HTMLElement)return s;const{left:t=-1/0,right:r=1/0,top:l=-1/0,bottom:c=1/0}=s;return[[t,r],[l,c]]}}),Qm={ArrowRight:(s,t=1)=>[s*t,0],ArrowLeft:(s,t=1)=>[-1*s*t,0],ArrowUp:(s,t=1)=>[0,-1*s*t],ArrowDown:(s,t=1)=>[0,s*t]};class f1 extends dh{constructor(...t){super(...t),xs(this,"ingKey","dragging")}reset(){super.reset();const t=this.state;t._pointerId=void 0,t._pointerActive=!1,t._keyboardActive=!1,t._preventScroll=!1,t._delayed=!1,t.swipe=[0,0],t.tap=!1,t.canceled=!1,t.cancel=this.cancel.bind(this)}setup(){const t=this.state;if(t._bounds instanceof HTMLElement){const r=t._bounds.getBoundingClientRect(),l=t.currentTarget.getBoundingClientRect(),c={left:r.left-l.left+t.offset[0],right:r.right-l.right+t.offset[0],top:r.top-l.top+t.offset[1],bottom:r.bottom-l.bottom+t.offset[1]};t._bounds=sp.bounds(c)}}cancel(){const t=this.state;t.canceled||(t.canceled=!0,t._active=!1,setTimeout(()=>{this.compute(),this.emit()},0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(t){const r=this.config,l=this.state;if(t.buttons!=null&&(Array.isArray(r.pointerButtons)?!r.pointerButtons.includes(t.buttons):r.pointerButtons!==-1&&r.pointerButtons!==t.buttons))return;const c=this.ctrl.setEventIds(t);r.pointerCapture&&t.target.setPointerCapture(t.pointerId),!(c&&c.size>1&&l._pointerActive)&&(this.start(t),this.setupPointer(t),l._pointerId=wg(t),l._pointerActive=!0,this.computeValues(fd(t)),this.computeInitial(),r.preventScrollAxis&&Up(t)!=="mouse"?(l._active=!1,this.setupScrollPrevention(t)):r.delay>0?(this.setupDelayTrigger(t),r.triggerAllEvents&&(this.compute(t),this.emit())):this.startPointerDrag(t))}startPointerDrag(t){const r=this.state;r._active=!0,r._preventScroll=!0,r._delayed=!1,this.compute(t),this.emit()}pointerMove(t){const r=this.state,l=this.config;if(!r._pointerActive)return;const c=wg(t);if(r._pointerId!==void 0&&c!==r._pointerId)return;const p=fd(t);if(document.pointerLockElement===t.target?r._delta=[t.movementX,t.movementY]:(r._delta=Ni.sub(p,r._values),this.computeValues(p)),Ni.addTo(r._movement,r._delta),this.compute(t),r._delayed&&r.intentional){this.timeoutStore.remove("dragDelay"),r.active=!1,this.startPointerDrag(t);return}if(l.preventScrollAxis&&!r._preventScroll)if(r.axis)if(r.axis===l.preventScrollAxis||l.preventScrollAxis==="xy"){r._active=!1,this.clean();return}else{this.timeoutStore.remove("startPointerDrag"),this.startPointerDrag(t);return}else return;this.emit()}pointerUp(t){this.ctrl.setEventIds(t);try{this.config.pointerCapture&&t.target.hasPointerCapture(t.pointerId)&&t.target.releasePointerCapture(t.pointerId)}catch(m){}const r=this.state,l=this.config;if(!r._active||!r._pointerActive)return;const c=wg(t);if(r._pointerId!==void 0&&c!==r._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(t);const[p,h]=r._distance;if(r.tap=p<=l.tapsThreshold&&h<=l.tapsThreshold,r.tap&&l.filterTaps)r._force=!0;else{const[m,v]=r._delta,[E,x]=r._movement,[T,R]=l.swipe.velocity,[F,U]=l.swipe.distance,P=l.swipe.duration;if(r.elapsedTime<P){const O=Math.abs(m/r.timeDelta),z=Math.abs(v/r.timeDelta);O>T&&Math.abs(E)>F&&(r.swipe[0]=Math.sign(m)),z>R&&Math.abs(x)>U&&(r.swipe[1]=Math.sign(v))}}this.emit()}pointerClick(t){!this.state.tap&&t.detail>0&&(t.preventDefault(),t.stopPropagation())}setupPointer(t){const r=this.config,l=r.device;r.pointerLock&&t.currentTarget.requestPointerLock(),r.pointerCapture||(this.eventStore.add(this.sharedConfig.window,l,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,l,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,l,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(t){this.state._preventScroll&&t.cancelable&&t.preventDefault()}setupScrollPrevention(t){this.state._preventScroll=!1,M(t);const r=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",r),this.eventStore.add(this.sharedConfig.window,"touch","cancel",r),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,t)}setupDelayTrigger(t){this.state._delayed=!0,this.timeoutStore.add("dragDelay",()=>{this.state._step=[0,0],this.startPointerDrag(t)},this.config.delay)}keyDown(t){const r=Qm[t.key];if(r){const l=this.state,c=t.shiftKey?10:t.altKey?.1:1;this.start(t),l._delta=r(this.config.keyboardDisplacement,c),l._keyboardActive=!0,Ni.addTo(l._movement,l._delta),this.compute(t),this.emit()}}keyUp(t){t.key in Qm&&(this.state._keyboardActive=!1,this.setActive(),this.compute(t),this.emit())}bind(t){const r=this.config.device;t(r,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(t(r,"change",this.pointerMove.bind(this)),t(r,"end",this.pointerUp.bind(this)),t(r,"cancel",this.pointerUp.bind(this)),t("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(t("key","down",this.keyDown.bind(this)),t("key","up",this.keyUp.bind(this))),this.config.filterTaps&&t("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}}function M(s){"persist"in s&&typeof s.persist=="function"&&s.persist()}const w=typeof window!="undefined"&&window.document&&window.document.createElement;function G(){return w&&"ontouchstart"in window}function V(){return G()||w&&window.navigator.maxTouchPoints>1}function te(){return w&&"onpointerdown"in window}function de(){return w&&"exitPointerLock"in window.document}function Ve(){try{return"constructor"in GestureEvent}catch(s){return!1}}const pt={isBrowser:w,gesture:Ve(),touch:V(),touchscreen:V(),pointer:te(),pointerLock:de()},en=250,Nn=180,Ir=.5,vi=50,qr=250,Do=10,Nr={mouse:0,touch:0,pen:8},Fa=Ko(Ko({},sp),{},{device(s,t,{pointer:{touch:r=!1,lock:l=!1,mouse:c=!1}={}}){return this.pointerLock=l&&pt.pointerLock,pt.touch&&r?"touch":this.pointerLock?"mouse":pt.pointer&&!c?"pointer":pt.touch?"touch":"mouse"},preventScrollAxis(s,t,{preventScroll:r}){if(this.preventScrollDelay=typeof r=="number"?r:r||r===void 0&&s?en:void 0,!(!pt.touchscreen||r===!1))return s||(r!==void 0?"y":void 0)},pointerCapture(s,t,{pointer:{capture:r=!0,buttons:l=1,keys:c=!0}={}}){return this.pointerButtons=l,this.keys=c,!this.pointerLock&&this.device==="pointer"&&r},threshold(s,t,{filterTaps:r=!1,tapsThreshold:l=3,axis:c=void 0}){const p=Ni.toVector(s,r?l:c?1:0);return this.filterTaps=r,this.tapsThreshold=l,p},swipe({velocity:s=Ir,distance:t=vi,duration:r=qr}={}){return{velocity:this.transform(Ni.toVector(s)),distance:this.transform(Ni.toVector(t)),duration:r}},delay(s=0){switch(s){case!0:return Nn;case!1:return 0;default:return s}},axisThreshold(s){return s?Ko(Ko({},Nr),s):Nr},keyboardDisplacement(s=Do){return s}});function Ol(s){const[t,r]=s.overflow,[l,c]=s._delta,[p,h]=s._direction;(t<0&&l>0&&p<0||t>0&&l<0&&p>0)&&(s._movement[0]=s._movementBound[0]),(r<0&&c>0&&h<0||r>0&&c<0&&h>0)&&(s._movement[1]=s._movementBound[1])}const Dt=30,Et=100;class Qt extends mf{constructor(...t){super(...t),xs(this,"ingKey","pinching"),xs(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const t=this.state;t._touchIds=[],t.canceled=!1,t.cancel=this.cancel.bind(this),t.turns=0}computeOffset(){const{type:t,movement:r,lastOffset:l}=this.state;t==="wheel"?this.state.offset=Ni.add(r,l):this.state.offset=[(1+r[0])*l[0],r[1]+l[1]]}computeMovement(){const{offset:t,lastOffset:r}=this.state;this.state.movement=[t[0]/r[0],t[1]-r[1]]}axisIntent(){const t=this.state,[r,l]=t._movement;if(!t.axis){const c=Math.abs(r)*Dt-Math.abs(l);c<0?t.axis="angle":c>0&&(t.axis="scale")}}restrictToAxis(t){this.config.lockDirection&&(this.state.axis==="scale"?t[1]=0:this.state.axis==="angle"&&(t[0]=0))}cancel(){const t=this.state;t.canceled||setTimeout(()=>{t.canceled=!0,t._active=!1,this.compute(),this.emit()},0)}touchStart(t){this.ctrl.setEventIds(t);const r=this.state,l=this.ctrl.touchIds;if(r._active&&r._touchIds.every(p=>l.has(p))||l.size<2)return;this.start(t),r._touchIds=Array.from(l).slice(0,2);const c=Sg(t,r._touchIds);c&&this.pinchStart(t,c)}pointerStart(t){if(t.buttons!=null&&t.buttons%2!==1)return;this.ctrl.setEventIds(t),t.target.setPointerCapture(t.pointerId);const r=this.state,l=r._pointerEvents,c=this.ctrl.pointerIds;if(r._active&&Array.from(l.keys()).every(h=>c.has(h))||(l.size<2&&l.set(t.pointerId,t),r._pointerEvents.size<2))return;this.start(t);const p=Ia(...Array.from(l.values()));p&&this.pinchStart(t,p)}pinchStart(t,r){const l=this.state;l.origin=r.origin,this.computeValues([r.distance,r.angle]),this.computeInitial(),this.compute(t),this.emit()}touchMove(t){if(!this.state._active)return;const r=Sg(t,this.state._touchIds);r&&this.pinchMove(t,r)}pointerMove(t){const r=this.state._pointerEvents;if(r.has(t.pointerId)&&r.set(t.pointerId,t),!this.state._active)return;const l=Ia(...Array.from(r.values()));l&&this.pinchMove(t,l)}pinchMove(t,r){const l=this.state,c=l._values[1],p=r.angle-c;let h=0;Math.abs(p)>270&&(h+=Math.sign(p)),this.computeValues([r.distance,r.angle-360*h]),l.origin=r.origin,l.turns=h,l._movement=[l._values[0]/l._initial[0]-1,l._values[1]-l._initial[1]],this.compute(t),this.emit()}touchEnd(t){this.ctrl.setEventIds(t),this.state._active&&this.state._touchIds.some(r=>!this.ctrl.touchIds.has(r))&&(this.state._active=!1,this.compute(t),this.emit())}pointerEnd(t){const r=this.state;this.ctrl.setEventIds(t);try{t.target.releasePointerCapture(t.pointerId)}catch(l){}r._pointerEvents.has(t.pointerId)&&r._pointerEvents.delete(t.pointerId),r._active&&r._pointerEvents.size<2&&(r._active=!1,this.compute(t),this.emit())}gestureStart(t){t.cancelable&&t.preventDefault();const r=this.state;r._active||(this.start(t),this.computeValues([t.scale,t.rotation]),r.origin=[t.clientX,t.clientY],this.compute(t),this.emit())}gestureMove(t){if(t.cancelable&&t.preventDefault(),!this.state._active)return;const r=this.state;this.computeValues([t.scale,t.rotation]),r.origin=[t.clientX,t.clientY];const l=r._movement;r._movement=[t.scale-1,t.rotation],r._delta=Ni.sub(r._movement,l),this.compute(t),this.emit()}gestureEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}wheel(t){const r=this.config.modifierKey;r&&!t[r]||(this.state._active?this.wheelChange(t):this.wheelStart(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(t){this.start(t),this.wheelChange(t)}wheelChange(t){"uv"in t||t.cancelable&&t.preventDefault();const l=this.state;l._delta=[-Hm(t)[1]/Et*l.offset[0],0],Ni.addTo(l._movement,l._delta),Ol(l),this.state.origin=[t.clientX,t.clientY],this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){const r=this.config.device;r&&(t(r,"start",this[r+"Start"].bind(this)),t(r,"change",this[r+"Move"].bind(this)),t(r,"end",this[r+"End"].bind(this)),t(r,"cancel",this[r+"End"].bind(this)),t("lostPointerCapture","",this[r+"End"].bind(this))),this.config.pinchOnWheel&&t("wheel","",this.wheel.bind(this),{passive:!1})}}const _r=Ko(Ko({},Og),{},{device(s,t,{shared:r,pointer:{touch:l=!1}={}}){if(r.target&&!pt.touch&&pt.gesture)return"gesture";if(pt.touch&&l)return"touch";if(pt.touchscreen){if(pt.pointer)return"pointer";if(pt.touch)return"touch"}},bounds(s,t,{scaleBounds:r={},angleBounds:l={}}){const c=h=>{const m=jp(hf(r,h),{min:-1/0,max:1/0});return[m.min,m.max]},p=h=>{const m=jp(hf(l,h),{min:-1/0,max:1/0});return[m.min,m.max]};return typeof r!="function"&&typeof l!="function"?[c(),p()]:h=>[c(h),p(h)]},threshold(s,t,r){return this.lockDirection=r.axis==="lock",Ni.toVector(s,this.lockDirection?[.1,3]:0)},modifierKey(s){return s===void 0?"ctrlKey":s},pinchOnWheel(s=!0){return s}});class jr extends dh{constructor(...t){super(...t),xs(this,"ingKey","moving")}move(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.state._active?this.moveChange(t):this.moveStart(t),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(t){this.start(t),this.computeValues(fd(t)),this.compute(t),this.computeInitial(),this.emit()}moveChange(t){if(!this.state._active)return;const r=fd(t),l=this.state;l._delta=Ni.sub(r,l._values),Ni.addTo(l._movement,l._delta),this.computeValues(r),this.compute(t),this.emit()}moveEnd(t){this.state._active&&(this.state._active=!1,this.compute(t),this.emit())}bind(t){t("pointer","change",this.move.bind(this)),t("pointer","leave",this.moveEnd.bind(this))}}const Oi=Ko(Ko({},sp),{},{mouseOnly:(s=!0)=>s});class _i extends dh{constructor(...t){super(...t),xs(this,"ingKey","scrolling")}scroll(t){this.state._active||this.start(t),this.scrollChange(t),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(t){t.cancelable&&t.preventDefault();const r=this.state,l=tc(t);r._delta=Ni.sub(l,r._values),Ni.addTo(r._movement,r._delta),this.computeValues(l),this.compute(t),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("scroll","",this.scroll.bind(this))}}const co=sp;class ua extends dh{constructor(...t){super(...t),xs(this,"ingKey","wheeling")}wheel(t){this.state._active||this.start(t),this.wheelChange(t),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(t){const r=this.state;r._delta=Hm(t),Ni.addTo(r._movement,r._delta),Ol(r),this.compute(t),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(t){t("wheel","",this.wheel.bind(this))}}const po=sp;class Hp extends dh{constructor(...t){super(...t),xs(this,"ingKey","hovering")}enter(t){this.config.mouseOnly&&t.pointerType!=="mouse"||(this.start(t),this.computeValues(fd(t)),this.compute(t),this.emit())}leave(t){if(this.config.mouseOnly&&t.pointerType!=="mouse")return;const r=this.state;if(!r._active)return;r._active=!1;const l=fd(t);r._movement=r._delta=Ni.sub(l,r._values),this.computeValues(l),this.compute(t),r.delta=r.movement,this.emit()}bind(t){t("pointer","enter",this.enter.bind(this)),t("pointer","leave",this.leave.bind(this))}}const g1=Ko(Ko({},sp),{},{mouseOnly:(s=!0)=>s}),m1=new Map,A1=new Map;function J2(s){m1.set(s.key,s.engine),A1.set(s.key,s.resolver)}const Z2={key:"drag",engine:f1,resolver:Fa},q2={key:"hover",engine:Hp,resolver:g1},$2={key:"move",engine:jr,resolver:Oi},e_={key:"pinch",engine:Qt,resolver:_r},t_={key:"scroll",engine:_i,resolver:co},n_={key:"wheel",engine:ua,resolver:po};function r_(s,t){if(s==null)return{};var r={},l=Object.keys(s),c,p;for(p=0;p<l.length;p++)c=l[p],!(t.indexOf(c)>=0)&&(r[c]=s[c]);return r}function i_(s,t){if(s==null)return{};var r=r_(s,t),l,c;if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(s);for(c=0;c<p.length;c++)l=p[c],!(t.indexOf(l)>=0)&&Object.prototype.propertyIsEnumerable.call(s,l)&&(r[l]=s[l])}return r}const o_={target(s){if(s)return()=>"current"in s?s.current:s},enabled(s=!0){return s},window(s=pt.isBrowser?window:void 0){return s},eventOptions({passive:s=!0,capture:t=!1}={}){return{passive:s,capture:t}},transform(s){return s}},s_=["target","eventOptions","window","enabled","transform"];function Km(s={},t){const r={};for(const[l,c]of Object.entries(t))switch(typeof c){case"function":r[l]=c.call(r,s[l],l,s);break;case"object":r[l]=Km(s[l],c);break;case"boolean":c&&(r[l]=s[l]);break}return r}function a_(s,t,r={}){const l=s,{target:c,eventOptions:p,window:h,enabled:m,transform:v}=l,E=i_(l,s_);if(r.shared=Km({target:c,eventOptions:p,window:h,enabled:m,transform:v},o_),t){const x=A1.get(t);r[t]=Km(Ko({shared:r.shared},E),x)}else for(const x in E){const T=A1.get(x);T&&(r[x]=Km(Ko({shared:r.shared},E[x]),T))}return r}class l_{constructor(t,r){xs(this,"_listeners",new Set),this._ctrl=t,this._gestureKey=r}add(t,r,l,c,p){const h=this._listeners,m=jm(r,l),v=this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{},E=Ko(Ko({},v),p);t.addEventListener(m,c,E);const x=()=>{t.removeEventListener(m,c,E),h.delete(x)};return h.add(x),x}clean(){this._listeners.forEach(t=>t()),this._listeners.clear()}}class gb{constructor(){xs(this,"_timeouts",new Map)}add(t,r,l=140,...c){this.remove(t),this._timeouts.set(t,window.setTimeout(r,l,...c))}remove(t){const r=this._timeouts.get(t);r&&window.clearTimeout(r)}clean(){this._timeouts.forEach(t=>void window.clearTimeout(t)),this._timeouts.clear()}}class mb{constructor(t){xs(this,"gestures",new Set),xs(this,"_targetEventStore",new l_(this)),xs(this,"gestureEventStores",{}),xs(this,"gestureTimeoutStores",{}),xs(this,"handlers",{}),xs(this,"config",{}),xs(this,"pointerIds",new Set),xs(this,"touchIds",new Set),xs(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),Ab(this,t)}setEventIds(t){if(uh(t))return this.touchIds=new Set(h1(t)),this.touchIds;if("pointerId"in t)return t.type==="pointerup"||t.type==="pointercancel"?this.pointerIds.delete(t.pointerId):t.type==="pointerdown"&&this.pointerIds.add(t.pointerId),this.pointerIds}applyHandlers(t,r){this.handlers=t,this.nativeHandlers=r}applyConfig(t,r){this.config=a_(t,r,this.config)}clean(){this._targetEventStore.clean();for(const t of this.gestures)this.gestureEventStores[t].clean(),this.gestureTimeoutStores[t].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(...t){const r=this.config.shared,l={};let c;if(!(r.target&&(c=r.target(),!c))){if(r.enabled){for(const h of this.gestures){const m=this.config[h],v=c_(l,m.eventOptions,!!c);if(m.enabled){const E=m1.get(h);new E(this,t,h).bind(v)}}const p=c_(l,r.eventOptions,!!c);for(const h in this.nativeHandlers)p(h,"",m=>this.nativeHandlers[h](Ko(Ko({},this.state.shared),{},{event:m,args:t})),void 0,!0)}for(const p in l)l[p]=ff(...l[p]);if(!c)return l;for(const p in l){const{device:h,capture:m,passive:v}=u1(p);this._targetEventStore.add(c,h,"",l[p],{capture:m,passive:v})}}}}function Dg(s,t){s.gestures.add(t),s.gestureEventStores[t]=new l_(s,t),s.gestureTimeoutStores[t]=new gb}function Ab(s,t){t.drag&&Dg(s,"drag"),t.wheel&&Dg(s,"wheel"),t.scroll&&Dg(s,"scroll"),t.move&&Dg(s,"move"),t.pinch&&Dg(s,"pinch"),t.hover&&Dg(s,"hover")}const c_=(s,t,r)=>(l,c,p,h={},m=!1)=>{var v,E;const x=(v=h.capture)!==null&&v!==void 0?v:t.capture,T=(E=h.passive)!==null&&E!==void 0?E:t.passive;let R=m?l:df(l,c,x);r&&T&&(R+="Passive"),s[R]=s[R]||[],s[R].push(p)},yb=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function vb(s){const t={},r={},l=new Set;for(let c in s)yb.test(c)?(l.add(RegExp.lastMatch),r[c]=s[c]):t[c]=s[c];return[r,t,l]}function Lg(s,t,r,l,c,p){if(!s.has(r)||!m1.has(l))return;const h=r+"Start",m=r+"End",v=E=>{let x;return E.first&&h in t&&t[h](E),r in t&&(x=t[r](E)),E.last&&m in t&&t[m](E),x};c[l]=v,p[l]=p[l]||{}}function _b(s,t){const[r,l,c]=vb(s),p={};return Lg(c,r,"onDrag","drag",p,t),Lg(c,r,"onWheel","wheel",p,t),Lg(c,r,"onScroll","scroll",p,t),Lg(c,r,"onPinch","pinch",p,t),Lg(c,r,"onMove","move",p,t),Lg(c,r,"onHover","hover",p,t),{handlers:p,config:t,nativeHandlers:l}}function Af(s,t={},r,l){const c=d.useMemo(()=>new mb(s),[]);if(c.applyHandlers(s,l),c.applyConfig(t,r),d.useEffect(c.effect.bind(c)),d.useEffect(()=>c.clean.bind(c),[]),t.target===void 0)return c.bind.bind(c)}function BC(s,t){return registerAction(dragAction),Af({drag:s},t||{},"drag")}function RC(s,t){return registerAction(pinchAction),Af({pinch:s},t||{},"pinch")}function IC(s,t){return registerAction(wheelAction),Af({wheel:s},t||{},"wheel")}function FC(s,t){return registerAction(scrollAction),Af({scroll:s},t||{},"scroll")}function OC(s,t){return registerAction(moveAction),Af({move:s},t||{},"move")}function DC(s,t){return registerAction(hoverAction),Af({hover:s},t||{},"hover")}function Eb(s){return s.forEach(J2),function(r,l){const{handlers:c,nativeHandlers:p,config:h}=_b(r,l||{});return Af(c,h,void 0,p)}}function bb(s,t){return Eb([Z2,e_,t_,n_,$2,q2])(s,t||{})}function Mb({enabled:s=!0,snap:t,global:r,domElement:l,cursor:c=!0,children:p,speed:h=1,rotation:m=[0,0,0],zoom:v=1,polar:E=[0,Math.PI/2],azimuth:x=[-1/0,1/0],config:T={mass:1,tension:170,friction:26}}){const R=(0,_.z)(W=>W.events),F=(0,_.z)(W=>W.gl),U=l||R.connected||F.domElement,{size:P}=(0,_.z)(),O=d.useMemo(()=>[m[0]+E[0],m[0]+E[1]],[m[0],E[0],E[1]]),z=d.useMemo(()=>[m[1]+x[0],m[1]+x[1]],[m[1],x[0],x[1]]),L=d.useMemo(()=>[i.MathUtils.clamp(m[0],...O),i.MathUtils.clamp(m[1],...z),m[2]],[m[0],m[1],m[2],O,z]),[k,H]=pd(()=>({scale:1,rotation:L,config:T}));d.useEffect(()=>void H.start({scale:1,rotation:L,config:T}),[L]),d.useEffect(()=>{if(r&&c&&s)return U.style.cursor="grab",F.domElement.style.cursor="",()=>{U.style.cursor="default",F.domElement.style.cursor="default"}},[r,c,U,s]);const X=bb({onHover:({last:W})=>{c&&!r&&s&&(U.style.cursor=W?"auto":"grab")},onDrag:({down:W,delta:[J,Y],memo:[ce,ue]=k.rotation.animation.to||L})=>{if(!s)return[Y,J];c&&(U.style.cursor=W?"grabbing":"grab"),J=i.MathUtils.clamp(ue+J/P.width*Math.PI*h,...z),Y=i.MathUtils.clamp(ce+Y/P.height*Math.PI*h,...O);const ge=t&&!W&&typeof t!="boolean"?t:T;return H.start({scale:W&&Y>O[1]/2?v:1,rotation:t&&!W?L:[Y,J,0],config:le=>le==="scale"?os(Zn({},ge),{friction:ge.friction*3}):ge}),[Y,J]}},{target:r?U:void 0});return d.createElement(ec.group,(0,C.Z)({},X==null?void 0:X(),k),p)}var xc=A(5108),xb=Object.defineProperty,p_=Object.getOwnPropertySymbols,Cb=Object.prototype.hasOwnProperty,Sb=Object.prototype.propertyIsEnumerable,u_=(s,t,r)=>t in s?xb(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,wb=(s,t)=>{for(var r in t||(t={}))Cb.call(t,r)&&u_(s,r,t[r]);if(p_)for(var r of p_(t))Sb.call(t,r)&&u_(s,r,t[r]);return s};const LC=(s,t)=>(r,l,c)=>(c.dispatch=p=>(r(h=>s(h,p),!1,p),p),c.dispatchFromDevtools=!0,wb({dispatch:(...p)=>c.dispatch(...p)},t));function PC(s,t){return(r,l,c)=>{var p;let h=!1;typeof t=="string"&&!h&&(xc.warn("[zustand devtools middleware]: passing `name` as directly will be not allowed in next majorpass the `name` in an object `{ name: ... }` instead"),h=!0);const m=t===void 0?{name:void 0,anonymousActionType:void 0}:typeof t=="string"?{name:t}:t;typeof((p=m==null?void 0:m.serialize)==null?void 0:p.options)!="undefined"&&xc.warn("[zustand devtools middleware]: `serialize.options` is deprecated, just use `serialize`");let v;try{v=window.__REDUX_DEVTOOLS_EXTENSION__||window.top.__REDUX_DEVTOOLS_EXTENSION__}catch(P){}if(!v)return typeof window!="undefined"&&xc.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),s(r,l,c);let E=Object.create(v.connect(m)),x=!1;Object.defineProperty(c,"devtools",{get:()=>(x||(xc.warn("[zustand devtools middleware] `devtools` property on the store is deprecated it will be removed in the next major.\nYou shouldn't interact with the extension directly. But in case you still want to you can patch `window.__REDUX_DEVTOOLS_EXTENSION__` directly"),x=!0),E),set:P=>{x||(xc.warn("[zustand devtools middleware] `api.devtools` is deprecated, it will be removed in the next major.\nYou shouldn't interact with the extension directly. But in case you still want to you can patch `window.__REDUX_DEVTOOLS_EXTENSION__` directly"),x=!0),E=P}});let T=!1;Object.defineProperty(E,"prefix",{get:()=>(T||(xc.warn("[zustand devtools middleware] along with `api.devtools`, `api.devtools.prefix` is deprecated.\nWe no longer prefix the actions/names"+m.name===void 0?", pass the `name` option to create a separate instance of devtools for each store.":", because the `name` option already creates a separate instance of devtools for each store."),T=!0),""),set:()=>{T||(xc.warn("[zustand devtools middleware] along with `api.devtools`, `api.devtools.prefix` is deprecated.\nWe no longer prefix the actions/names"+m.name===void 0?", pass the `name` option to create a separate instance of devtools for each store.":", because the `name` option already creates a separate instance of devtools for each store."),T=!0)}});let R=!0;c.setState=(P,O,z)=>{r(P,O),R&&E.send(z===void 0?{type:m.anonymousActionType||"anonymous"}:typeof z=="string"?{type:z}:z,l())};const F=(...P)=>{const O=R;R=!1,r(...P),R=O},U=s(c.setState,l,c);if(E.init(U),c.dispatchFromDevtools&&typeof c.dispatch=="function"){let P=!1;const O=c.dispatch;c.dispatch=(...z)=>{z[0].type==="__setState"&&!P&&(xc.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),P=!0),O(...z)}}return E.subscribe(P=>{var O;switch(P.type){case"ACTION":if(typeof P.payload!="string"){xc.error("[zustand devtools middleware] Unsupported action format");return}return JA(P.payload,z=>{if(z.type==="__setState"){F(z.state);return}c.dispatchFromDevtools&&typeof c.dispatch=="function"&&c.dispatch(z)});case"DISPATCH":switch(P.payload.type){case"RESET":return F(U),E.init(c.getState());case"COMMIT":return E.init(c.getState());case"ROLLBACK":return JA(P.state,z=>{F(z),E.init(c.getState())});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return JA(P.state,z=>{F(z)});case"IMPORT_STATE":{const{nextLiftedState:z}=P.payload,L=(O=z.computedStates.slice(-1)[0])==null?void 0:O.state;if(!L)return;F(L),E.send(null,z);return}case"PAUSE_RECORDING":return R=!R}return}}),U}}const JA=(s,t)=>{let r;try{r=JSON.parse(s)}catch(l){xc.error("[zustand devtools middleware] Could not parse the received json",l)}r!==void 0&&t(r)},Tb=s=>(t,r,l)=>{const c=l.subscribe;return l.subscribe=(h,m,v)=>{let E=h;if(m){const x=(v==null?void 0:v.equalityFn)||Object.is;let T=h(l.getState());E=R=>{const F=h(R);if(!x(T,F)){const U=T;m(T=F,U)}},v!=null&&v.fireImmediately&&m(T,T)}return c(E)},s(t,r,l)},kC=(s,t)=>(r,l,c)=>Object.assign({},s,t(r,l,c));var Bb=Object.defineProperty,d_=Object.getOwnPropertySymbols,ji=Object.prototype.hasOwnProperty,ur=Object.prototype.propertyIsEnumerable,jc=(s,t,r)=>t in s?Bb(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,Tu=(s,t)=>{for(var r in t||(t={}))ji.call(t,r)&&jc(s,r,t[r]);if(d_)for(var r of d_(t))ur.call(t,r)&&jc(s,r,t[r]);return s};const Xm=s=>t=>{try{const r=s(t);return r instanceof Promise?r:{then(l){return Xm(l)(r)},catch(l){return this}}}catch(r){return{then(l){return this},catch(l){return Xm(l)(r)}}}},Rb=(s,t)=>(r,l,c)=>{let p=Tu({getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:O=>O,version:0,merge:(O,z)=>Tu(Tu({},z),O)},t);(p.blacklist||p.whitelist)&&xc.warn(`The ${p.blacklist?"blacklist":"whitelist"} option is deprecated and will be removed in the next version. Please use the 'partialize' option instead.`);let h=!1;const m=new Set,v=new Set;let E;try{E=p.getStorage()}catch(O){}if(E)E.removeItem||xc.warn(`[zustand persist middleware] The given storage for item '${p.name}' does not contain a 'removeItem' method, which will be required in v4.`);else return s((...O)=>{xc.warn(`[zustand persist middleware] Unable to update item '${p.name}', the given storage is currently unavailable.`),r(...O)},l,c);const x=Xm(p.serialize),T=()=>{const O=p.partialize(Tu({},l()));p.whitelist&&Object.keys(O).forEach(k=>{var H;!((H=p.whitelist)!=null&&H.includes(k))&&delete O[k]}),p.blacklist&&p.blacklist.forEach(k=>delete O[k]);let z;const L=x({state:O,version:p.version}).then(k=>E.setItem(p.name,k)).catch(k=>{z=k});if(z)throw z;return L},R=c.setState;c.setState=(O,z)=>{R(O,z),T()};const F=s((...O)=>{r(...O),T()},l,c);let U;const P=()=>{var O;if(!E)return;h=!1,m.forEach(L=>L(l()));const z=((O=p.onRehydrateStorage)==null?void 0:O.call(p,l()))||void 0;return Xm(E.getItem.bind(E))(p.name).then(L=>{if(L)return p.deserialize(L)}).then(L=>{if(L)if(typeof L.version=="number"&&L.version!==p.version){if(p.migrate)return p.migrate(L.state,L.version);xc.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return L.state}).then(L=>{var k;return U=p.merge(L,(k=l())!=null?k:F),r(U,!0),T()}).then(()=>{z==null||z(U,void 0),h=!0,v.forEach(L=>L(U))}).catch(L=>{z==null||z(void 0,L)})};return c.persist={setOptions:O=>{p=Tu(Tu({},p),O),O.getStorage&&(E=O.getStorage())},clearStorage:()=>{var O;(O=E==null?void 0:E.removeItem)==null||O.call(E,p.name)},rehydrate:()=>P(),hasHydrated:()=>h,onHydrate:O=>(m.add(O),()=>{m.delete(O)}),onFinishHydration:O=>(v.add(O),()=>{v.delete(O)})},P(),U||F},ZA=d.createContext(null);function h_({map:s,children:t,onChange:r,domElement:l}){const c=s.map(v=>v.name+v.keys).join("-"),p=d.useMemo(()=>(0,Mt.Z)(Tb(()=>s.reduce((v,E)=>os(Zn({},v),{[E.name]:!1}),{}))),[c]),h=d.useMemo(()=>[p.subscribe,p.getState,p],[c]),m=p.setState;return d.useEffect(()=>{const E=s.map(({name:F,keys:U,up:P})=>({keys:U,up:P,fn:O=>{m({[F]:O}),r&&r(F,O,h[1]())}})).reduce((F,{keys:U,fn:P,up:O=!0})=>(U.forEach(z=>F[z]={fn:P,pressed:!1,up:O}),F),{}),x=({key:F,code:U})=>{const P=E[F]||E[U];if(!P)return;const{fn:O,pressed:z,up:L}=P;P.pressed=!0,(L||!z)&&O(!0)},T=({key:F,code:U})=>{const P=E[F]||E[U];if(!P)return;const{fn:O,up:z}=P;P.pressed=!1,z&&O(!1)},R=l||window;return R.addEventListener("keydown",x,{passive:!0}),R.addEventListener("keyup",T,{passive:!0}),()=>{R.removeEventListener("keydown",x),R.removeEventListener("keyup",T)}},[l,c]),d.createElement(ZA.Provider,{value:h,children:t})}function f_(s){const[t,r,l]=d.useContext(ZA);return s?l(s):[t,r]}var g_=A(5108);const yf=new i.Frustum,gd=new i.Vector3,hh=new i.Vector3,Xa=new i.Vector3,ap=new i.Vector3,lp=new i.Vector3,cp=new i.Vector3,Dl=new i.Vector3,Wp=new i.Vector3,vf=new i.Vector3,fh=new i.Vector3,Ym=new i.Vector3,_f=new i.Vector3,md=new i.Vector3,Pg=new i.Vector3;class qA{constructor(t,r,l){this.camera=t,this.scene=r,this.startPoint=new i.Vector3,this.endPoint=new i.Vector3,this.collection=[],this.deep=l||Number.MAX_VALUE}select(t,r){return this.startPoint=t||this.startPoint,this.endPoint=r||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(yf,this.scene),this.collection}updateFrustum(t,r){if(t=t||this.startPoint,r=r||this.endPoint,t.x===r.x&&(r.x+=Number.EPSILON),t.y===r.y&&(r.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera){hh.copy(t),hh.x=Math.min(t.x,r.x),hh.y=Math.max(t.y,r.y),r.x=Math.max(t.x,r.x),r.y=Math.min(t.y,r.y),Xa.setFromMatrixPosition(this.camera.matrixWorld),ap.copy(hh),lp.set(r.x,hh.y,0),cp.copy(r),Dl.set(hh.x,r.y,0),ap.unproject(this.camera),lp.unproject(this.camera),cp.unproject(this.camera),Dl.unproject(this.camera),_f.copy(ap).sub(Xa),md.copy(lp).sub(Xa),Pg.copy(cp).sub(Xa),_f.normalize(),md.normalize(),Pg.normalize(),_f.multiplyScalar(this.deep),md.multiplyScalar(this.deep),Pg.multiplyScalar(this.deep),_f.add(Xa),md.add(Xa),Pg.add(Xa);var l=yf.planes;l[0].setFromCoplanarPoints(Xa,ap,lp),l[1].setFromCoplanarPoints(Xa,lp,cp),l[2].setFromCoplanarPoints(cp,Dl,Xa),l[3].setFromCoplanarPoints(Dl,ap,Xa),l[4].setFromCoplanarPoints(lp,cp,Dl),l[5].setFromCoplanarPoints(Pg,md,_f),l[5].normal.multiplyScalar(-1)}else if(this.camera.isOrthographicCamera){const c=Math.min(t.x,r.x),p=Math.max(t.y,r.y),h=Math.max(t.x,r.x),m=Math.min(t.y,r.y);ap.set(c,p,-1),lp.set(h,p,-1),cp.set(h,m,-1),Dl.set(c,m,-1),Wp.set(c,p,1),vf.set(h,p,1),fh.set(h,m,1),Ym.set(c,m,1),ap.unproject(this.camera),lp.unproject(this.camera),cp.unproject(this.camera),Dl.unproject(this.camera),Wp.unproject(this.camera),vf.unproject(this.camera),fh.unproject(this.camera),Ym.unproject(this.camera);var l=yf.planes;l[0].setFromCoplanarPoints(ap,Wp,vf),l[1].setFromCoplanarPoints(lp,vf,fh),l[2].setFromCoplanarPoints(fh,Ym,Dl),l[3].setFromCoplanarPoints(Ym,Wp,ap),l[4].setFromCoplanarPoints(lp,cp,Dl),l[5].setFromCoplanarPoints(fh,vf,Wp),l[5].normal.multiplyScalar(-1)}else g_.error("THREE.SelectionBox: Unsupported camera type.")}searchChildInFrustum(t,r){if((r.isMesh||r.isLine||r.isPoints)&&r.material!==void 0&&(r.geometry.boundingSphere===null&&r.geometry.computeBoundingSphere(),gd.copy(r.geometry.boundingSphere.center),gd.applyMatrix4(r.matrixWorld),t.containsPoint(gd)&&this.collection.push(r)),r.children.length>0)for(let l=0;l<r.children.length;l++)this.searchChildInFrustum(t,r.children[l])}}function $A(s,t){if(Object.is(s,t))return!0;if(typeof s!="object"||s===null||typeof t!="object"||t===null)return!1;const r=Object.keys(s);if(r.length!==Object.keys(t).length)return!1;for(let l=0;l<r.length;l++)if(!Object.prototype.hasOwnProperty.call(t,r[l])||!Object.is(s[r[l]],t[r[l]]))return!1;return!0}const Jm=d.createContext([]);function m_(E){var x=E,{box:s,multiple:t,children:r,onChange:l,onChangePointerUp:c,border:p="1px solid #55aaff",backgroundColor:h="rgba(75, 160, 255, 0.1)",filter:m=T=>T}=x,v=Cn(x,["box","multiple","children","onChange","onChangePointerUp","border","backgroundColor","filter"]);const[T,R]=d.useState(!1),{setEvents:F,camera:U,raycaster:P,gl:O,controls:z,size:L,get:k}=(0,_.z)(),[H,X]=d.useState(!1),[W,J]=d.useReducer((ge,{object:le,shift:Me})=>le===void 0?[]:Array.isArray(le)?le:Me?ge.includes(le)?ge.filter(me=>me!==le):[le,...ge]:ge[0]===le?[]:[le],[]);d.useEffect(()=>{T?l==null||l(W):c==null||c(W)},[W,T]);const Y=d.useCallback(ge=>{ge.stopPropagation(),J({object:m([ge.object])[0],shift:t&&ge.shiftKey})},[]),ce=d.useCallback(ge=>!H&&J({}),[H]),ue=d.useRef(null);return d.useEffect(()=>{if(!s||!t)return;const ge=new qA(U,ue.current),le=document.createElement("div");le.style.pointerEvents="none",le.style.border=p,le.style.backgroundColor=h,le.style.position="fixed";const Me=new i.Vector2,me=new i.Vector2,Te=new i.Vector2,Ue=k().events.enabled,Re=z==null?void 0:z.enabled;let Ge=!1;function De(ve,ke){const{offsetX:vt,offsetY:ht}=ve,{width:dt,height:$e}=L;ke.set(vt/dt*2-1,-(ht/$e)*2+1)}function Xe(ve){var ke;z&&(z.enabled=!1),F({enabled:!1}),R(Ge=!0),(ke=O.domElement.parentElement)==null||ke.appendChild(le),le.style.left=`${ve.clientX}px`,le.style.top=`${ve.clientY}px`,le.style.width="0px",le.style.height="0px",Me.x=ve.clientX,Me.y=ve.clientY}function Ce(ve){Te.x=Math.max(Me.x,ve.clientX),Te.y=Math.max(Me.y,ve.clientY),me.x=Math.min(Me.x,ve.clientX),me.y=Math.min(Me.y,ve.clientY),le.style.left=`${me.x}px`,le.style.top=`${me.y}px`,le.style.width=`${Te.x-me.x}px`,le.style.height=`${Te.y-me.y}px`}function Ee(){if(Ge){var ve;z&&(z.enabled=Re),F({enabled:Ue}),R(Ge=!1),(ve=le.parentElement)==null||ve.removeChild(le)}}function _e(ve){ve.shiftKey&&(Xe(ve),De(ve,ge.startPoint))}let oe=[];function Ae(ve){if(Ge){Ce(ve),De(ve,ge.endPoint);const ke=ge.select().sort(vt=>vt.uuid).filter(vt=>vt.isMesh);$A(ke,oe)||(oe=ke,J({object:m(ke)}))}}function Be(ve){Ge&&Ee()}return document.addEventListener("pointerdown",_e,{passive:!0}),document.addEventListener("pointermove",Ae,{passive:!0,capture:!0}),document.addEventListener("pointerup",Be,{passive:!0}),()=>{document.removeEventListener("pointerdown",_e),document.removeEventListener("pointermove",Ae),document.removeEventListener("pointerup",Be)}},[L.width,L.height,P,U,z,O]),d.createElement("group",(0,C.Z)({ref:ue,onClick:Y,onPointerOver:()=>X(!0),onPointerOut:()=>X(!1),onPointerMissed:ce},v),d.createElement(Jm.Provider,{value:W},r))}function A_(){return d.useContext(Jm)}const ey=d.forwardRef(function(m,h){var v=m,{follow:t=!0,lockX:r=!1,lockY:l=!1,lockZ:c=!1}=v,p=Cn(v,["follow","lockX","lockY","lockZ"]);const E=d.useRef();return(0,_.A)(({camera:x})=>{if(!t||!E.current)return;const T=E.current.rotation.clone();x.getWorldQuaternion(E.current.quaternion),r&&(E.current.rotation.x=T.x),l&&(E.current.rotation.y=T.y),c&&(E.current.rotation.z=T.z)}),d.createElement("group",(0,C.Z)({ref:mt([E,h])},p))}),y_=d.forwardRef((c,l)=>{var p=c,{children:s,depth:t=-1}=p,r=Cn(p,["children","depth"]);const h=d.useRef(null);return(0,_.A)(({camera:m})=>{h.current.quaternion.copy(m.quaternion),h.current.position.copy(m.position)}),d.createElement("group",(0,C.Z)({ref:mt([l,h])},r),d.createElement("group",{"position-z":-t},s))});var ty=A(5108);const ny=new i.Box3,Zm=new i.Vector3;class qm extends i.InstancedBufferGeometry{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const t=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],r=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],l=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(l),this.setAttribute("position",new i.Float32BufferAttribute(t,3)),this.setAttribute("uv",new i.Float32BufferAttribute(r,2))}applyMatrix4(t){const r=this.attributes.instanceStart,l=this.attributes.instanceEnd;return r!==void 0&&(r.applyMatrix4(t),l.applyMatrix4(t),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(t){let r;t instanceof Float32Array?r=t:Array.isArray(t)&&(r=new Float32Array(t));const l=new i.InstancedInterleavedBuffer(r,6,1);return this.setAttribute("instanceStart",new i.InterleavedBufferAttribute(l,3,0)),this.setAttribute("instanceEnd",new i.InterleavedBufferAttribute(l,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(t){let r;t instanceof Float32Array?r=t:Array.isArray(t)&&(r=new Float32Array(t));const l=new i.InstancedInterleavedBuffer(r,6,1);return this.setAttribute("instanceColorStart",new i.InterleavedBufferAttribute(l,3,0)),this.setAttribute("instanceColorEnd",new i.InterleavedBufferAttribute(l,3,3)),this}fromWireframeGeometry(t){return this.setPositions(t.attributes.position.array),this}fromEdgesGeometry(t){return this.setPositions(t.attributes.position.array),this}fromMesh(t){return this.fromWireframeGeometry(new i.WireframeGeometry(t.geometry)),this}fromLineSegments(t){const r=t.geometry;return this.setPositions(r.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new i.Box3);const t=this.attributes.instanceStart,r=this.attributes.instanceEnd;t!==void 0&&r!==void 0&&(this.boundingBox.setFromBufferAttribute(t),ny.setFromBufferAttribute(r),this.boundingBox.union(ny))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new i.Sphere),this.boundingBox===null&&this.computeBoundingBox();const t=this.attributes.instanceStart,r=this.attributes.instanceEnd;if(t!==void 0&&r!==void 0){const l=this.boundingSphere.center;this.boundingBox.getCenter(l);let c=0;for(let p=0,h=t.count;p<h;p++)Zm.fromBufferAttribute(t,p),c=Math.max(c,l.distanceToSquared(Zm)),Zm.fromBufferAttribute(r,p),c=Math.max(c,l.distanceToSquared(Zm));this.boundingSphere.radius=Math.sqrt(c),isNaN(this.boundingSphere.radius)&&ty.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(t){return ty.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(t)}}class $m extends i.ShaderMaterial{constructor(t){super({type:"LineMaterial",uniforms:i.UniformsUtils.clone(i.UniformsUtils.merge([i.UniformsLib.common,i.UniformsLib.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new i.Vector2(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <color_pars_vertex>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				attribute vec3 instanceColorStart;
				attribute vec3 instanceColorEnd;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <color_pars_fragment>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );

					#include <logdepthbuf_fragment>
					#include <color_fragment>

					gl_FragColor = vec4( diffuseColor.rgb, alpha );

					#include <tonemapping_fragment>
					#include <encodings_fragment>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(r){this.uniforms.diffuse.value=r}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(r){r===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(r){this.uniforms.linewidth.value=r}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(r){!!r!="USE_DASH"in this.defines&&(this.needsUpdate=!0),r===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(r){this.uniforms.dashScale.value=r}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(r){this.uniforms.dashSize.value=r}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(r){this.uniforms.dashOffset.value=r}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(r){this.uniforms.gapSize.value=r}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(r){this.uniforms.opacity.value=r}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(r){this.uniforms.resolution.value.copy(r)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(r){!!r!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),r===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(t)}}var ry=A(5108);const y1=new i.Vector3,v1=new i.Vector3,Oa=new i.Vector4,Da=new i.Vector4,pp=new i.Vector4,e0=new i.Vector3,t0=new i.Matrix4,Ya=new i.Line3,gh=new i.Vector3,Ds=new i.Box3,Ls=new i.Sphere,Cc=new i.Vector4;let Vp,_1,iy,mh;function oy(s,t,r){return Cc.set(0,0,-t,1).applyMatrix4(s.projectionMatrix),Cc.multiplyScalar(1/Cc.w),Cc.x=mh/r.width,Cc.y=mh/r.height,Cc.applyMatrix4(s.projectionMatrixInverse),Cc.multiplyScalar(1/Cc.w),Math.abs(Math.max(Cc.x,Cc.y))}function v_(s,t){for(let r=0,l=_1.count;r<l;r++){Ya.start.fromBufferAttribute(_1,r),Ya.end.fromBufferAttribute(iy,r);const c=new i.Vector3,p=new i.Vector3;Vp.distanceSqToSegment(Ya.start,Ya.end,p,c),p.distanceTo(c)<mh*.5&&t.push({point:p,pointOnLine:c,distance:Vp.origin.distanceTo(p),object:s,face:null,faceIndex:r,uv:null,uv2:null})}}function __(s,t,r){const l=t.projectionMatrix,p=s.material.resolution,h=s.matrixWorld,m=s.geometry,v=m.attributes.instanceStart,E=m.attributes.instanceEnd,x=-t.near;Vp.at(1,pp),pp.w=1,pp.applyMatrix4(t.matrixWorldInverse),pp.applyMatrix4(l),pp.multiplyScalar(1/pp.w),pp.x*=p.x/2,pp.y*=p.y/2,pp.z=0,e0.copy(pp),t0.multiplyMatrices(t.matrixWorldInverse,h);for(let T=0,R=v.count;T<R;T++){if(Oa.fromBufferAttribute(v,T),Da.fromBufferAttribute(E,T),Oa.w=1,Da.w=1,Oa.applyMatrix4(t0),Da.applyMatrix4(t0),Oa.z>x&&Da.z>x)continue;if(Oa.z>x){const L=Oa.z-Da.z,k=(Oa.z-x)/L;Oa.lerp(Da,k)}else if(Da.z>x){const L=Da.z-Oa.z,k=(Da.z-x)/L;Da.lerp(Oa,k)}Oa.applyMatrix4(l),Da.applyMatrix4(l),Oa.multiplyScalar(1/Oa.w),Da.multiplyScalar(1/Da.w),Oa.x*=p.x/2,Oa.y*=p.y/2,Da.x*=p.x/2,Da.y*=p.y/2,Ya.start.copy(Oa),Ya.start.z=0,Ya.end.copy(Da),Ya.end.z=0;const U=Ya.closestPointToPointParameter(e0,!0);Ya.at(U,gh);const P=i.MathUtils.lerp(Oa.z,Da.z,U),O=P>=-1&&P<=1,z=e0.distanceTo(gh)<mh*.5;if(O&&z){Ya.start.fromBufferAttribute(v,T),Ya.end.fromBufferAttribute(E,T),Ya.start.applyMatrix4(h),Ya.end.applyMatrix4(h);const L=new i.Vector3,k=new i.Vector3;Vp.distanceSqToSegment(Ya.start,Ya.end,k,L),r.push({point:k,pointOnLine:L,distance:Vp.origin.distanceTo(k),object:s,face:null,faceIndex:T,uv:null,uv2:null})}}}class sy extends i.Mesh{constructor(t=new qm,r=new $m({color:Math.random()*16777215})){super(t,r),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const t=this.geometry,r=t.attributes.instanceStart,l=t.attributes.instanceEnd,c=new Float32Array(2*r.count);for(let h=0,m=0,v=r.count;h<v;h++,m+=2)y1.fromBufferAttribute(r,h),v1.fromBufferAttribute(l,h),c[m]=m===0?0:c[m-1],c[m+1]=c[m]+y1.distanceTo(v1);const p=new i.InstancedInterleavedBuffer(c,2,1);return t.setAttribute("instanceDistanceStart",new i.InterleavedBufferAttribute(p,1,0)),t.setAttribute("instanceDistanceEnd",new i.InterleavedBufferAttribute(p,1,1)),this}raycast(t,r){const l=this.material.worldUnits,c=t.camera;c===null&&!l&&ry.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const p=t.params.Line2!==void 0&&t.params.Line2.threshold||0;Vp=t.ray;const h=this.matrixWorld,m=this.geometry,v=this.material;mh=v.linewidth+p,_1=m.attributes.instanceStart,iy=m.attributes.instanceEnd,m.boundingSphere===null&&m.computeBoundingSphere(),Ls.copy(m.boundingSphere).applyMatrix4(h);let E;if(l)E=mh*.5;else{const T=Math.max(c.near,Ls.distanceToPoint(Vp.origin));E=oy(c,T,v.resolution)}if(Ls.radius+=E,Vp.intersectsSphere(Ls)===!1)return;m.boundingBox===null&&m.computeBoundingBox(),Ds.copy(m.boundingBox).applyMatrix4(h);let x;if(l)x=mh*.5;else{const T=Math.max(c.near,Ds.distanceToPoint(Vp.origin));x=oy(c,T,v.resolution)}Ds.expandByScalar(x),Vp.intersectsBox(Ds)!==!1&&(l?v_(this,r):__(this,c,r))}}class ay extends qm{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(t){const r=t.length-3,l=new Float32Array(2*r);for(let c=0;c<r;c+=3)l[2*c]=t[c],l[2*c+1]=t[c+1],l[2*c+2]=t[c+2],l[2*c+3]=t[c+3],l[2*c+4]=t[c+4],l[2*c+5]=t[c+5];return super.setPositions(l),this}setColors(t){const r=t.length-3,l=new Float32Array(2*r);for(let c=0;c<r;c+=3)l[2*c]=t[c],l[2*c+1]=t[c+1],l[2*c+2]=t[c+2],l[2*c+3]=t[c+3],l[2*c+4]=t[c+4],l[2*c+5]=t[c+5];return super.setColors(l),this}fromLine(t){const r=t.geometry;return this.setPositions(r.attributes.position.array),this}}class ly extends sy{constructor(t=new ay,r=new $m({color:Math.random()*16777215})){super(t,r),this.isLine2=!0,this.type="Line2"}}const Qp=d.forwardRef(function(x,E){var T=x,{points:t,color:r="black",vertexColors:l,linewidth:c,lineWidth:p,segments:h,dashed:m}=T,v=Cn(T,["points","color","vertexColors","linewidth","lineWidth","segments","dashed"]);const R=(0,_.z)(O=>O.size),F=d.useMemo(()=>h?new sy:new ly,[h]),[U]=d.useState(()=>new $m),P=d.useMemo(()=>{const O=h?new qm:new ay,z=t.map(L=>{const k=Array.isArray(L);return L instanceof i.Vector3?[L.x,L.y,L.z]:L instanceof i.Vector2?[L.x,L.y,0]:k&&L.length===3?[L[0],L[1],L[2]]:k&&L.length===2?[L[0],L[1],0]:L});if(O.setPositions(z.flat()),l){const L=l.map(k=>k instanceof i.Color?k.toArray():k);O.setColors(L.flat())}return O},[t,h,l]);return d.useLayoutEffect(()=>{F.computeLineDistances()},[t,F]),d.useLayoutEffect(()=>{m?U.defines.USE_DASH="":delete U.defines.USE_DASH,U.needsUpdate=!0},[m,U]),d.useEffect(()=>()=>P.dispose(),[P]),d.createElement("primitive",(0,C.Z)({object:F,ref:E},v),d.createElement("primitive",{object:P,attach:"geometry"}),d.createElement("primitive",(0,C.Z)({object:U,attach:"material",color:r,vertexColors:!!l,resolution:[R.width,R.height],linewidth:c!=null?c:p,dashed:m},v)))}),E_=new i.Vector3,b_=d.forwardRef(function(m,h){var v=m,{start:t=[0,0,0],end:r=[0,0,0],mid:l,segments:c=20}=v,p=Cn(v,["start","end","mid","segments"]);const E=d.useRef(null),[x]=d.useState(()=>new i.QuadraticBezierCurve3(void 0,void 0,void 0)),T=d.useCallback((F,U,P,O=20)=>(F instanceof i.Vector3?x.v0.copy(F):x.v0.set(...F),U instanceof i.Vector3?x.v2.copy(U):x.v2.set(...U),P instanceof i.Vector3?x.v1.copy(P):Array.isArray(P)?x.v1.set(...P):x.v1.copy(x.v0.clone().add(x.v2.clone().sub(x.v0)).add(E_.set(0,x.v0.y-x.v2.y,0))),x.getPoints(O)),[]);d.useLayoutEffect(()=>{E.current.setPoints=(F,U,P)=>{const O=T(F,U,P);E.current.geometry&&E.current.geometry.setPositions(O.map(z=>z.toArray()).flat())}},[]);const R=d.useMemo(()=>T(t,r,l,c),[t,r,l,c]);return d.createElement(Qp,(0,C.Z)({ref:mt([E,h]),points:R},p))}),M_=d.forwardRef(function(v,m){var E=v,{start:t,end:r,midA:l,midB:c,segments:p=20}=E,h=Cn(E,["start","end","midA","midB","segments"]);const x=d.useMemo(()=>{const T=t instanceof i.Vector3?t:new i.Vector3(...t),R=r instanceof i.Vector3?r:new i.Vector3(...r),F=l instanceof i.Vector3?l:new i.Vector3(...l),U=c instanceof i.Vector3?c:new i.Vector3(...c);return new i.CubicBezierCurve3(T,F,U,R).getPoints(p)},[t,r,l,c,p]);return d.createElement(Qp,(0,C.Z)({ref:m,points:x},h))}),x_=d.forwardRef(function(E,v){var x=E,{points:t,closed:r=!1,curveType:l="centripetal",tension:c=.5,segments:p=20,vertexColors:h}=x,m=Cn(x,["points","closed","curveType","tension","segments","vertexColors"]);const T=d.useMemo(()=>{const U=t.map(P=>P instanceof i.Vector3?P:new i.Vector3(...P));return new i.CatmullRomCurve3(U,r,l,c)},[t,r,l,c]),R=d.useMemo(()=>T.getPoints(p),[T,p]),F=d.useMemo(()=>{if(!h||h.length<2)return;if(h.length===p+1)return h;const U=h.map(z=>z instanceof i.Color?z:new i.Color(...z));r&&U.push(U[0].clone());const P=[U[0]],O=p/(U.length-1);for(let z=1;z<p;z++){const L=z%O/O,k=Math.floor(z/O);P.push(U[k].clone().lerp(U[k+1],L))}return P.push(U[U.length-1]),P},[h,p]);return d.createElement(Qp,(0,C.Z)({ref:v,points:R,vertexColors:F},m))}),C_=d.forwardRef((h,p)=>{var m=h,{url:s,distance:t=1,loop:r=!0,autoplay:l}=m,c=Cn(m,["url","distance","loop","autoplay"]);const v=d.useRef(),E=(0,_.z)(({camera:R})=>R),[x]=d.useState(()=>new i.AudioListener),T=(0,_.D)(i.AudioLoader,s);return d.useEffect(()=>{const R=v.current;R&&(R.setBuffer(T),R.setRefDistance(t),R.setLoop(r),l&&!R.isPlaying&&R.play())},[T,E,t,r]),d.useEffect(()=>{const R=v.current;return E.add(x),()=>{E.remove(x),R&&(R.isPlaying&&R.stop(),R.source&&R.source._connected&&R.disconnect())}},[]),d.createElement("positionalAudio",(0,C.Z)({ref:mt([v,p]),args:[x]},c))});var kg=A(5108),S_=A(4155);function w_(){var s=Object.create(null);function t(c,p){var h=c.id,m=c.name,v=c.dependencies;v===void 0&&(v=[]);var E=c.init;E===void 0&&(E=function(){});var x=c.getTransferables;if(x===void 0&&(x=null),!s[h])try{v=v.map(function(R){return R&&R.isWorkerModule&&(t(R,function(F){if(F instanceof Error)throw F}),R=s[R.id].value),R}),E=l("<"+m+">.init",E),x&&(x=l("<"+m+">.getTransferables",x));var T=null;typeof E=="function"?T=E.apply(void 0,v):kg.error("worker module init function failed to rehydrate"),s[h]={id:h,value:T,getTransferables:x},p(T)}catch(R){R&&R.noLog||kg.error(R),p(R)}}function r(c,p){var h,m=c.id,v=c.args;(!s[m]||typeof s[m].value!="function")&&p(new Error("Worker module "+m+": not found or its 'init' did not return a function"));try{var E=(h=s[m]).value.apply(h,v);E&&typeof E.then=="function"?E.then(x,function(T){return p(T instanceof Error?T:new Error(""+T))}):x(E)}catch(T){p(T)}function x(T){try{var R=s[m].getTransferables&&s[m].getTransferables(T);(!R||!Array.isArray(R)||!R.length)&&(R=void 0),p(T,R)}catch(F){kg.error(F),p(F)}}}function l(c,p){var h=void 0;self.troikaDefine=function(v){return h=v};var m=URL.createObjectURL(new Blob(["/** "+c.replace(/\*/g,"")+` **/

troikaDefine(
`+p+`
)`],{type:"application/javascript"}));try{importScripts(m)}catch(v){kg.error(v)}return URL.revokeObjectURL(m),delete self.troikaDefine,h}self.addEventListener("message",function(c){var p=c.data,h=p.messageId,m=p.action,v=p.data;try{m==="registerModule"&&t(v,function(E){E instanceof Error?postMessage({messageId:h,success:!1,error:E.message}):postMessage({messageId:h,success:!0,result:{isCallable:typeof E=="function"}})}),m==="callModule"&&r(v,function(E,x){E instanceof Error?postMessage({messageId:h,success:!1,error:E.message}):postMessage({messageId:h,success:!0,result:E},x||void 0)})}catch(E){postMessage({messageId:h,success:!1,error:E.stack})}})}function T_(s){var t=function(){for(var r=[],l=arguments.length;l--;)r[l]=arguments[l];return t._getInitResult().then(function(c){if(typeof c=="function")return c.apply(void 0,r);throw new Error("Worker module function was called but `init` did not return a callable function")})};return t._getInitResult=function(){var r=s.dependencies,l=s.init;r=Array.isArray(r)?r.map(function(p){return p&&p._getInitResult?p._getInitResult():p}):[];var c=Promise.all(r).then(function(p){return l.apply(null,p)});return t._getInitResult=function(){return c},c},t}var cy=function(){var s=!1;if(typeof window!="undefined"&&typeof window.document!="undefined")try{var t=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));t.terminate(),s=!0}catch(r){kg.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+r.message+"]")}return cy=function(){return s},s},B_=0,R_=0,E1=!1,zg=Object.create(null),Gg=Object.create(null),b1=Object.create(null);function Ug(s){if((!s||typeof s.init!="function")&&!E1)throw new Error("requires `options.init` function");var t=s.dependencies,r=s.init,l=s.getTransferables,c=s.workerId;if(!cy())return T_(s);c==null&&(c="#default");var p="workerModule"+ ++B_,h=s.name||p,m=null;t=t&&t.map(function(E){return typeof E=="function"&&!E.workerModuleData&&(E1=!0,E=Ug({workerId:c,name:"<"+h+"> function dependency: "+E.name,init:`function(){return (
`+n0(E)+`
)}`}),E1=!1),E&&E.workerModuleData&&(E=E.workerModuleData),E});function v(){for(var E=[],x=arguments.length;x--;)E[x]=arguments[x];if(!m){m=py(c,"registerModule",v.workerModuleData);var T=function(){m=null,Gg[c].delete(T)};(Gg[c]||(Gg[c]=new Set)).add(T)}return m.then(function(R){var F=R.isCallable;if(F)return py(c,"callModule",{id:p,args:E});throw new Error("Worker module function was called but `init` did not return a callable function")})}return v.workerModuleData={isWorkerModule:!0,id:p,name:h,dependencies:t,init:n0(r),getTransferables:l&&n0(l)},v}function I_(s){Gg[s]&&Gg[s].forEach(function(t){t()}),zg[s]&&(zg[s].terminate(),delete zg[s])}function n0(s){var t=s.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function F_(s){var t=zg[s];if(!t){var r=n0(w_);t=zg[s]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+s.replace(/\*/g,"")+` **/

;(`+r+")()"],{type:"application/javascript"}))),t.onmessage=function(l){var c=l.data,p=c.messageId,h=b1[p];if(!h)throw new Error("WorkerModule response with empty or unknown messageId");delete b1[p],h(c)}}return t}function py(s,t,r){return new Promise(function(l,c){var p=++R_;b1[p]=function(h){h.success?l(h.result):c(new Error("Error in worker "+t+" call: "+h.error))},F_(s).postMessage({messageId:p,action:t,data:r})})}var r0=A(5108);function uy(){var s=function(t){function r(De,Xe,Ce,Ee,_e,oe,Ae,Be){var ve=1-Ae;Be.x=ve*ve*De+2*ve*Ae*Ce+Ae*Ae*_e,Be.y=ve*ve*Xe+2*ve*Ae*Ee+Ae*Ae*oe}function l(De,Xe,Ce,Ee,_e,oe,Ae,Be,ve,ke){var vt=1-ve;ke.x=vt*vt*vt*De+3*vt*vt*ve*Ce+3*vt*ve*ve*_e+ve*ve*ve*Ae,ke.y=vt*vt*vt*Xe+3*vt*vt*ve*Ee+3*vt*ve*ve*oe+ve*ve*ve*Be}function c(De,Xe){for(var Ce=/([MLQCZ])([^MLQCZ]*)/g,Ee,_e,oe,Ae,Be;Ee=Ce.exec(De);){var ve=Ee[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(ke){return parseFloat(ke)});switch(Ee[1]){case"M":Ae=_e=ve[0],Be=oe=ve[1];break;case"L":(ve[0]!==Ae||ve[1]!==Be)&&Xe("L",Ae,Be,Ae=ve[0],Be=ve[1]);break;case"Q":{Xe("Q",Ae,Be,Ae=ve[2],Be=ve[3],ve[0],ve[1]);break}case"C":{Xe("C",Ae,Be,Ae=ve[4],Be=ve[5],ve[0],ve[1],ve[2],ve[3]);break}case"Z":(Ae!==_e||Be!==oe)&&Xe("L",Ae,Be,_e,oe);break}}}function p(De,Xe,Ce){Ce===void 0&&(Ce=16);var Ee={x:0,y:0};c(De,function(_e,oe,Ae,Be,ve,ke,vt,ht,dt){switch(_e){case"L":Xe(oe,Ae,Be,ve);break;case"Q":{for(var $e=oe,Kt=Ae,zt=1;zt<Ce;zt++)r(oe,Ae,ke,vt,Be,ve,zt/(Ce-1),Ee),Xe($e,Kt,Ee.x,Ee.y),$e=Ee.x,Kt=Ee.y;break}case"C":{for(var Bt=oe,Qe=Ae,ze=1;ze<Ce;ze++)l(oe,Ae,ke,vt,ht,dt,Be,ve,ze/(Ce-1),Ee),Xe(Bt,Qe,Ee.x,Ee.y),Bt=Ee.x,Qe=Ee.y;break}}})}var h="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",m="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",v=new WeakMap,E={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function x(De,Xe){var Ce=De.getContext?De.getContext("webgl",E):De,Ee=v.get(Ce);if(!Ee){let vt=function(Bt){var Qe=oe[Bt];if(!Qe&&(Qe=oe[Bt]=Ce.getExtension(Bt),!Qe))throw new Error(Bt+" not supported");return Qe},ht=function(Bt,Qe){var ze=Ce.createShader(Qe);return Ce.shaderSource(ze,Bt),Ce.compileShader(ze),ze},dt=function(Bt,Qe,ze,Ft){if(!Ae[Bt]){var bn={},Fn={},Gt=Ce.createProgram();Ce.attachShader(Gt,ht(Qe,Ce.VERTEX_SHADER)),Ce.attachShader(Gt,ht(ze,Ce.FRAGMENT_SHADER)),Ce.linkProgram(Gt),Ae[Bt]={program:Gt,transaction:function(hr){Ce.useProgram(Gt),hr({setUniform:function(Er,Ii){for(var xi=[],Lr=arguments.length-2;Lr-- >0;)xi[Lr]=arguments[Lr+2];var Qr=Fn[Ii]||(Fn[Ii]=Ce.getUniformLocation(Gt,Ii));Ce["uniform"+Er].apply(Ce,[Qr].concat(xi))},setAttribute:function(Er,Ii,xi,Lr,Qr){var Hi=bn[Er];Hi||(Hi=bn[Er]={buf:Ce.createBuffer(),loc:Ce.getAttribLocation(Gt,Er),data:null}),Ce.bindBuffer(Ce.ARRAY_BUFFER,Hi.buf),Ce.vertexAttribPointer(Hi.loc,Ii,Ce.FLOAT,!1,0,0),Ce.enableVertexAttribArray(Hi.loc),_e?Ce.vertexAttribDivisor(Hi.loc,Lr):vt("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(Hi.loc,Lr),Qr!==Hi.data&&(Ce.bufferData(Ce.ARRAY_BUFFER,Qr,xi),Hi.data=Qr)}})}}}Ae[Bt].transaction(Ft)},$e=function(Bt,Qe){ve++;try{Ce.activeTexture(Ce.TEXTURE0+ve);var ze=Be[Bt];ze||(ze=Be[Bt]=Ce.createTexture(),Ce.bindTexture(Ce.TEXTURE_2D,ze),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MIN_FILTER,Ce.NEAREST),Ce.texParameteri(Ce.TEXTURE_2D,Ce.TEXTURE_MAG_FILTER,Ce.NEAREST)),Ce.bindTexture(Ce.TEXTURE_2D,ze),Qe(ze,ve)}finally{ve--}},Kt=function(Bt,Qe,ze){var Ft=Ce.createFramebuffer();ke.push(Ft),Ce.bindFramebuffer(Ce.FRAMEBUFFER,Ft),Ce.activeTexture(Ce.TEXTURE0+Qe),Ce.bindTexture(Ce.TEXTURE_2D,Bt),Ce.framebufferTexture2D(Ce.FRAMEBUFFER,Ce.COLOR_ATTACHMENT0,Ce.TEXTURE_2D,Bt,0);try{ze(Ft)}finally{Ce.deleteFramebuffer(Ft),Ce.bindFramebuffer(Ce.FRAMEBUFFER,ke[--ke.length-1]||null)}},zt=function(){oe={},Ae={},Be={},ve=-1,ke.length=0};var _e=typeof WebGL2RenderingContext!="undefined"&&Ce instanceof WebGL2RenderingContext,oe={},Ae={},Be={},ve=-1,ke=[];Ce.canvas.addEventListener("webglcontextlost",function(Bt){zt(),Bt.preventDefault()},!1),v.set(Ce,Ee={gl:Ce,isWebGL2:_e,getExtension:vt,withProgram:dt,withTexture:$e,withTextureFramebuffer:Kt,handleContextLoss:zt})}Xe(Ee)}function T(De,Xe,Ce,Ee,_e,oe,Ae,Be){Ae===void 0&&(Ae=15),Be===void 0&&(Be=null),x(De,function(ve){var ke=ve.gl,vt=ve.withProgram,ht=ve.withTexture;ht("copy",function(dt,$e){ke.texImage2D(ke.TEXTURE_2D,0,ke.RGBA,_e,oe,0,ke.RGBA,ke.UNSIGNED_BYTE,Xe),vt("copy",h,m,function(Kt){var zt=Kt.setUniform,Bt=Kt.setAttribute;Bt("aUV",2,ke.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),zt("1i","image",$e),ke.bindFramebuffer(ke.FRAMEBUFFER,Be||null),ke.disable(ke.BLEND),ke.colorMask(Ae&8,Ae&4,Ae&2,Ae&1),ke.viewport(Ce,Ee,_e,oe),ke.scissor(Ce,Ee,_e,oe),ke.drawArrays(ke.TRIANGLES,0,3)})})})}function R(De,Xe,Ce){var Ee=De.width,_e=De.height;x(De,function(oe){var Ae=oe.gl,Be=new Uint8Array(Ee*_e*4);Ae.readPixels(0,0,Ee,_e,Ae.RGBA,Ae.UNSIGNED_BYTE,Be),De.width=Xe,De.height=Ce,T(Ae,Be,0,0,Ee,_e)})}var F=Object.freeze({__proto__:null,withWebGLContext:x,renderImageData:T,resizeWebGLCanvasWithoutClearing:R});function U(De,Xe,Ce,Ee,_e,oe){oe===void 0&&(oe=1);var Ae=new Uint8Array(De*Xe),Be=Ee[2]-Ee[0],ve=Ee[3]-Ee[1],ke=[];p(Ce,function(Bt,Qe,ze,Ft){ke.push({x1:Bt,y1:Qe,x2:ze,y2:Ft,minX:Math.min(Bt,ze),minY:Math.min(Qe,Ft),maxX:Math.max(Bt,ze),maxY:Math.max(Qe,Ft)})}),ke.sort(function(Bt,Qe){return Bt.maxX-Qe.maxX});for(var vt=0;vt<De;vt++)for(var ht=0;ht<Xe;ht++){var dt=Kt(Ee[0]+Be*(vt+.5)/De,Ee[1]+ve*(ht+.5)/Xe),$e=Math.pow(1-Math.abs(dt)/_e,oe)/2;dt<0&&($e=1-$e),$e=Math.max(0,Math.min(255,Math.round($e*255))),Ae[ht*De+vt]=$e}return Ae;function Kt(Bt,Qe){for(var ze=1/0,Ft=1/0,bn=ke.length;bn--;){var Fn=ke[bn];if(Fn.maxX+Ft<=Bt)break;if(Bt+Ft>Fn.minX&&Qe-Ft<Fn.maxY&&Qe+Ft>Fn.minY){var Gt=z(Bt,Qe,Fn.x1,Fn.y1,Fn.x2,Fn.y2);Gt<ze&&(ze=Gt,Ft=Math.sqrt(ze))}}return zt(Bt,Qe)&&(Ft=-Ft),Ft}function zt(Bt,Qe){for(var ze=0,Ft=ke.length;Ft--;){var bn=ke[Ft];if(bn.maxX<=Bt)break;var Fn=bn.y1>Qe!=bn.y2>Qe&&Bt<(bn.x2-bn.x1)*(Qe-bn.y1)/(bn.y2-bn.y1)+bn.x1;Fn&&(ze+=bn.y1<bn.y2?1:-1)}return ze!==0}}function P(De,Xe,Ce,Ee,_e,oe,Ae,Be,ve,ke){oe===void 0&&(oe=1),Be===void 0&&(Be=0),ve===void 0&&(ve=0),ke===void 0&&(ke=0),O(De,Xe,Ce,Ee,_e,oe,Ae,null,Be,ve,ke)}function O(De,Xe,Ce,Ee,_e,oe,Ae,Be,ve,ke,vt){oe===void 0&&(oe=1),ve===void 0&&(ve=0),ke===void 0&&(ke=0),vt===void 0&&(vt=0);for(var ht=U(De,Xe,Ce,Ee,_e,oe),dt=new Uint8Array(ht.length*4),$e=0;$e<ht.length;$e++)dt[$e*4+vt]=ht[$e];T(Ae,dt,ve,ke,De,Xe,1<<3-vt,Be)}function z(De,Xe,Ce,Ee,_e,oe){var Ae=_e-Ce,Be=oe-Ee,ve=Ae*Ae+Be*Be,ke=ve?Math.max(0,Math.min(1,((De-Ce)*Ae+(Xe-Ee)*Be)/ve)):0,vt=De-(Ce+ke*Ae),ht=Xe-(Ee+ke*Be);return vt*vt+ht*ht}var L=Object.freeze({__proto__:null,generate:U,generateIntoCanvas:P,generateIntoFramebuffer:O}),k="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",H="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",X="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",W=new Float32Array([0,0,2,0,0,2]),J=null,Y=!1,ce={},ue=new WeakMap;function ge(De){if(!Y&&!Te(De))throw new Error("WebGL generation not supported")}function le(De,Xe,Ce,Ee,_e,oe,Ae){if(oe===void 0&&(oe=1),Ae===void 0&&(Ae=null),!Ae&&(Ae=J,!Ae)){var Be=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document!="undefined"?document.createElement("canvas"):null;if(!Be)throw new Error("OffscreenCanvas or DOM canvas not supported");Ae=J=Be.getContext("webgl",{depth:!1})}ge(Ae);var ve=new Uint8Array(De*Xe*4);x(Ae,function(dt){var $e=dt.gl,Kt=dt.withTexture,zt=dt.withTextureFramebuffer;Kt("readable",function(Bt,Qe){$e.texImage2D($e.TEXTURE_2D,0,$e.RGBA,De,Xe,0,$e.RGBA,$e.UNSIGNED_BYTE,null),zt(Bt,Qe,function(ze){me(De,Xe,Ce,Ee,_e,oe,$e,ze,0,0,0),$e.readPixels(0,0,De,Xe,$e.RGBA,$e.UNSIGNED_BYTE,ve)})})});for(var ke=new Uint8Array(De*Xe),vt=0,ht=0;vt<ve.length;vt+=4)ke[ht++]=ve[vt];return ke}function Me(De,Xe,Ce,Ee,_e,oe,Ae,Be,ve,ke){oe===void 0&&(oe=1),Be===void 0&&(Be=0),ve===void 0&&(ve=0),ke===void 0&&(ke=0),me(De,Xe,Ce,Ee,_e,oe,Ae,null,Be,ve,ke)}function me(De,Xe,Ce,Ee,_e,oe,Ae,Be,ve,ke,vt){oe===void 0&&(oe=1),ve===void 0&&(ve=0),ke===void 0&&(ke=0),vt===void 0&&(vt=0),ge(Ae);var ht=[];p(Ce,function(dt,$e,Kt,zt){ht.push(dt,$e,Kt,zt)}),ht=new Float32Array(ht),x(Ae,function(dt){var $e=dt.gl,Kt=dt.isWebGL2,zt=dt.getExtension,Bt=dt.withProgram,Qe=dt.withTexture,ze=dt.withTextureFramebuffer,Ft=dt.handleContextLoss;if(Qe("rawDistances",function(bn,Fn){(De!==bn._lastWidth||Xe!==bn._lastHeight)&&$e.texImage2D($e.TEXTURE_2D,0,$e.RGBA,bn._lastWidth=De,bn._lastHeight=Xe,0,$e.RGBA,$e.UNSIGNED_BYTE,null),Bt("main",k,H,function(Gt){var Yn=Gt.setAttribute,hr=Gt.setUniform,Fr=!Kt&&zt("ANGLE_instanced_arrays"),Er=!Kt&&zt("EXT_blend_minmax");Yn("aUV",2,$e.STATIC_DRAW,0,W),Yn("aLineSegment",4,$e.DYNAMIC_DRAW,1,ht),hr.apply(void 0,["4f","uGlyphBounds"].concat(Ee)),hr("1f","uMaxDistance",_e),hr("1f","uExponent",oe),ze(bn,Fn,function(Ii){$e.enable($e.BLEND),$e.colorMask(!0,!0,!0,!0),$e.viewport(0,0,De,Xe),$e.scissor(0,0,De,Xe),$e.blendFunc($e.ONE,$e.ONE),$e.blendEquationSeparate($e.FUNC_ADD,Kt?$e.MAX:Er.MAX_EXT),$e.clear($e.COLOR_BUFFER_BIT),Kt?$e.drawArraysInstanced($e.TRIANGLES,0,3,ht.length/4):Fr.drawArraysInstancedANGLE($e.TRIANGLES,0,3,ht.length/4)})}),Bt("post",h,X,function(Gt){Gt.setAttribute("aUV",2,$e.STATIC_DRAW,0,W),Gt.setUniform("1i","tex",Fn),$e.bindFramebuffer($e.FRAMEBUFFER,Be),$e.disable($e.BLEND),$e.colorMask(vt===0,vt===1,vt===2,vt===3),$e.viewport(ve,ke,De,Xe),$e.scissor(ve,ke,De,Xe),$e.drawArrays($e.TRIANGLES,0,3)})}),$e.isContextLost())throw Ft(),new Error("webgl context lost")})}function Te(De){var Xe=!De||De===J?ce:De.canvas||De,Ce=ue.get(Xe);if(Ce===void 0){Y=!0;var Ee=null;try{var _e=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],oe=le(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,De);Ce=oe&&_e.length===oe.length&&oe.every(function(Ae,Be){return Ae===_e[Be]}),Ce||(Ee="bad trial run results",r0.info(_e,oe))}catch(Ae){Ce=!1,Ee=Ae.message}Ee&&r0.warn("WebGL SDF generation not supported:",Ee),Y=!1,ue.set(Xe,Ce)}return Ce}var Ue=Object.freeze({__proto__:null,generate:le,generateIntoCanvas:Me,generateIntoFramebuffer:me,isSupported:Te});function Re(De,Xe,Ce,Ee,_e,oe){_e===void 0&&(_e=Math.max(Ee[2]-Ee[0],Ee[3]-Ee[1])/2),oe===void 0&&(oe=1);try{return le.apply(Ue,arguments)}catch(Ae){return r0.info("WebGL SDF generation failed, falling back to JS",Ae),U.apply(L,arguments)}}function Ge(De,Xe,Ce,Ee,_e,oe,Ae,Be,ve,ke){_e===void 0&&(_e=Math.max(Ee[2]-Ee[0],Ee[3]-Ee[1])/2),oe===void 0&&(oe=1),Be===void 0&&(Be=0),ve===void 0&&(ve=0),ke===void 0&&(ke=0);try{return Me.apply(Ue,arguments)}catch(vt){return r0.info("WebGL SDF generation failed, falling back to JS",vt),P.apply(L,arguments)}}return t.forEachPathCommand=c,t.generate=Re,t.generateIntoCanvas=Ge,t.javascript=L,t.pathToLineSegments=p,t.webgl=Ue,t.webglUtils=F,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return s}function O_(){var s=function(t){var r={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},l={},c={};l.L=1,c[1]="L",Object.keys(r).forEach(function(Ft,bn){l[Ft]=1<<bn+1,c[l[Ft]]=Ft}),Object.freeze(l);var p=l.LRI|l.RLI|l.FSI,h=l.L|l.R|l.AL,m=l.B|l.S|l.WS|l.ON|l.FSI|l.LRI|l.RLI|l.PDI,v=l.BN|l.RLE|l.LRE|l.RLO|l.LRO|l.PDF,E=l.S|l.WS|l.B|p|l.PDI|v,x=null;function T(){if(!x){x=new Map;var Ft=function(Fn){if(r.hasOwnProperty(Fn)){var Gt=0;r[Fn].split(",").forEach(function(Yn){var hr=Yn.split("+"),Fr=hr[0],Er=hr[1];Fr=parseInt(Fr,36),Er=Er?parseInt(Er,36):0,x.set(Gt+=Fr,l[Fn]);for(var Ii=0;Ii<Er;Ii++)x.set(++Gt,l[Fn])})}};for(var bn in r)Ft(bn)}}function R(Ft){return T(),x.get(Ft.codePointAt(0))||l.L}function F(Ft){return c[R(Ft)]}var U={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function P(Ft,bn){var Fn=36,Gt=0,Yn=new Map,hr=bn&&new Map,Fr;return Ft.split(",").forEach(function Er(Ii){if(Ii.indexOf("+")!==-1)for(var xi=+Ii;xi--;)Er(Fr);else{Fr=Ii;var Lr=Ii.split(">"),Qr=Lr[0],Hi=Lr[1];Qr=String.fromCodePoint(Gt+=parseInt(Qr,Fn)),Hi=String.fromCodePoint(Gt+=parseInt(Hi,Fn)),Yn.set(Qr,Hi),bn&&hr.set(Hi,Qr)}}),{map:Yn,reverseMap:hr}}var O,z,L;function k(){if(!O){var Ft=P(U.pairs,!0),bn=Ft.map,Fn=Ft.reverseMap;O=bn,z=Fn,L=P(U.canonical,!1).map}}function H(Ft){return k(),O.get(Ft)||null}function X(Ft){return k(),z.get(Ft)||null}function W(Ft){return k(),L.get(Ft)||null}var J=l.L,Y=l.R,ce=l.EN,ue=l.ES,ge=l.ET,le=l.AN,Me=l.CS,me=l.B,Te=l.S,Ue=l.ON,Re=l.BN,Ge=l.NSM,De=l.AL,Xe=l.LRO,Ce=l.RLO,Ee=l.LRE,_e=l.RLE,oe=l.PDF,Ae=l.LRI,Be=l.RLI,ve=l.FSI,ke=l.PDI;function vt(Ft,bn){for(var Fn=125,Gt=new Uint32Array(Ft.length),Yn=0;Yn<Ft.length;Yn++)Gt[Yn]=R(Ft[Yn]);var hr=new Map;function Fr(sc,Nu){var Jc=Gt[sc];Gt[sc]=Nu,hr.set(Jc,hr.get(Jc)-1),Jc&m&&hr.set(m,hr.get(m)-1),hr.set(Nu,(hr.get(Nu)||0)+1),Nu&m&&hr.set(m,(hr.get(m)||0)+1)}for(var Er=new Uint8Array(Ft.length),Ii=new Map,xi=[],Lr=null,Qr=0;Qr<Ft.length;Qr++)Lr||xi.push(Lr={start:Qr,end:Ft.length-1,level:bn==="rtl"?1:bn==="ltr"?0:xC(Qr,!1)}),Gt[Qr]&me&&(Lr.end=Qr,Lr=null);for(var Hi=_e|Ee|Ce|Xe|p|ke|oe|me,To=function(sc){return sc+(sc&1?1:2)},lt=function(sc){return sc+(sc&1?2:1)},xn=0;xn<xi.length;xn++){Lr=xi[xn];var Gn=[{_level:Lr.level,_override:0,_isolate:0}],cr=void 0,ni=0,pi=0,yi=0;hr.clear();for(var fi=Lr.start;fi<=Lr.end;fi++){var Tn=Gt[fi];if(cr=Gn[Gn.length-1],hr.set(Tn,(hr.get(Tn)||0)+1),Tn&m&&hr.set(m,(hr.get(m)||0)+1),Tn&Hi)if(Tn&(_e|Ee)){Er[fi]=cr._level;var so=(Tn===_e?lt:To)(cr._level);so<=Fn&&!ni&&!pi?Gn.push({_level:so,_override:0,_isolate:0}):ni||pi++}else if(Tn&(Ce|Xe)){Er[fi]=cr._level;var Gl=(Tn===Ce?lt:To)(cr._level);Gl<=Fn&&!ni&&!pi?Gn.push({_level:Gl,_override:Tn&Ce?Y:J,_isolate:0}):ni||pi++}else if(Tn&p){Tn&ve&&(Tn=xC(fi+1,!0)===1?Be:Ae),Er[fi]=cr._level,cr._override&&Fr(fi,cr._override);var zh=(Tn===Be?lt:To)(cr._level);zh<=Fn&&ni===0&&pi===0?(yi++,Gn.push({_level:zh,_override:0,_isolate:1,_isolInitIndex:fi})):ni++}else if(Tn&ke){if(ni>0)ni--;else if(yi>0){for(pi=0;!Gn[Gn.length-1]._isolate;)Gn.pop();var Nd=Gn[Gn.length-1]._isolInitIndex;Nd!=null&&(Ii.set(Nd,fi),Ii.set(fi,Nd)),Gn.pop(),yi--}cr=Gn[Gn.length-1],Er[fi]=cr._level,cr._override&&Fr(fi,cr._override)}else Tn&oe?(ni===0&&(pi>0?pi--:!cr._isolate&&Gn.length>1&&(Gn.pop(),cr=Gn[Gn.length-1])),Er[fi]=cr._level):Tn&me&&(Er[fi]=Lr.level);else Er[fi]=cr._level,cr._override&&Tn!==Re&&Fr(fi,cr._override)}for(var Xc=[],Fc=null,Ps=Lr.start;Ps<=Lr.end;Ps++){var Rm=Gt[Ps];if(!(Rm&v)){var ea=Er[Ps],ks=Rm&p,Ap=Rm===ke;Fc&&ea===Fc._level?(Fc._end=Ps,Fc._endsWithIsolInit=ks):Xc.push(Fc={_start:Ps,_end:Ps,_level:ea,_startsWithPDI:Ap,_endsWithIsolInit:ks})}}for(var Oc=[],Bo=0;Bo<Xc.length;Bo++){var nl=Xc[Bo];if(!nl._startsWithPDI||nl._startsWithPDI&&!Ii.has(nl._start)){for(var vl=[Fc=nl],ga=void 0;Fc&&Fc._endsWithIsolInit&&(ga=Ii.get(Fc._end))!=null;)for(var ii=Bo+1;ii<Xc.length;ii++)if(Xc[ii]._start===ga){vl.push(Fc=Xc[ii]);break}for(var _l=[],jd=0;jd<vl.length;jd++)for(var ye=vl[jd],Ie=ye._start;Ie<=ye._end;Ie++)_l.push(Ie);for(var it=Er[_l[0]],jt=Lr.level,$t=_l[0]-1;$t>=0;$t--)if(!(Gt[$t]&v)){jt=Er[$t];break}var tn=_l[_l.length-1],Jn=Er[tn],Dn=Lr.level;if(!(Gt[tn]&p)){for(var er=tn+1;er<=Lr.end;er++)if(!(Gt[er]&v)){Dn=Er[er];break}}Oc.push({_seqIndices:_l,_sosType:Math.max(jt,it)%2?Y:J,_eosType:Math.max(Dn,Jn)%2?Y:J})}}for(var nr=0;nr<Oc.length;nr++){var ar=Oc[nr],Yt=ar._seqIndices,Jo=ar._sosType,Yr=ar._eosType;if(hr.get(Ge))for(var Jr=0;Jr<Yt.length;Jr++){var Fi=Yt[Jr];if(Gt[Fi]&Ge){for(var Wi=Jo,Ro=Jr-1;Ro>=0;Ro--)if(!(Gt[Yt[Ro]]&v)){Wi=Gt[Yt[Ro]];break}Fr(Fi,Wi&(p|ke)?Ue:Wi)}}if(hr.get(ce))for(var Po=0;Po<Yt.length;Po++){var ma=Yt[Po];if(Gt[ma]&ce)for(var Pa=Po-1;Pa>=-1;Pa--){var Zo=Pa===-1?Jo:Gt[Yt[Pa]];if(Zo&h){Zo===De&&Fr(ma,le);break}}}if(hr.get(De))for(var Yc=0;Yc<Yt.length;Yc++){var rs=Yt[Yc];Gt[rs]&De&&Fr(rs,Y)}if(hr.get(ue)||hr.get(Me))for(var zs=1;zs<Yt.length-1;zs++){var yp=Yt[zs];if(Gt[yp]&(ue|Me)){for(var Zp=0,oc=0,ko=zs-1;ko>=0&&(Zp=Gt[Yt[ko]],!!(Zp&v));ko--);for(var ka=zs+1;ka<Yt.length&&(oc=Gt[Yt[ka]],!!(oc&v));ka++);Zp===oc&&(Gt[yp]===ue?Zp===ce:Zp&(ce|le))&&Fr(yp,Zp)}}if(hr.get(ce))for(var Ho=0;Ho<Yt.length;Ho++){var zo=Yt[Ho];if(Gt[zo]&ce){for(var Ul=Ho-1;Ul>=0&&Gt[Yt[Ul]]&(ge|v);Ul--)Fr(Yt[Ul],ce);for(var qp=Ho+1;qp<Yt.length&&Gt[Yt[qp]]&(ge|v);qp++)Fr(Yt[qp],ce)}}if(hr.get(ge)||hr.get(ue)||hr.get(Me))for(var rl=0;rl<Yt.length;rl++){var Gu=Yt[rl];if(Gt[Gu]&(ge|ue|Me)){Fr(Gu,Ue);for(var U2=rl-1;U2>=0&&Gt[Yt[U2]]&v;U2--)Fr(Yt[U2],Ue);for(var N2=rl+1;N2<Yt.length&&Gt[Yt[N2]]&v;N2++)Fr(Yt[N2],Ue)}}if(hr.get(ce))for(var sb=0,fC=Jo;sb<Yt.length;sb++){var gC=Yt[sb],ab=Gt[gC];ab&ce?fC===J&&Fr(gC,J):ab&h&&(fC=ab)}if(hr.get(m)){var NA=Y|ce|le,mC=NA|J,j2=[];{for(var r1=[],i1=0;i1<Yt.length;i1++)if(Gt[Yt[i1]]&m){var jA=Ft[Yt[i1]],AC=void 0;if(H(jA)!==null)if(r1.length<63)r1.push({char:jA,seqIndex:i1});else break;else if((AC=X(jA))!==null)for(var HA=r1.length-1;HA>=0;HA--){var lb=r1[HA].char;if(lb===AC||lb===X(W(jA))||H(W(lb))===jA){j2.push([r1[HA].seqIndex,i1]),r1.length=HA;break}}}j2.sort(function(sc,Nu){return sc[0]-Nu[0]})}for(var cb=0;cb<j2.length;cb++){for(var yC=j2[cb],WA=yC[0],H2=yC[1],vC=!1,Uu=0,pb=WA+1;pb<H2;pb++){var ub=Yt[pb];if(Gt[ub]&mC){vC=!0;var _C=Gt[ub]&NA?Y:J;if(_C===o1(ub)){Uu=_C;break}}}if(vC&&!Uu){Uu=Jo;for(var db=WA-1;db>=0;db--){var W2=Yt[db];if(Gt[W2]&mC){var EC=Gt[W2]&NA?Y:J;EC!==o1(W2)?Uu=EC:Uu=o1(W2);break}}}if(Uu){if(Gt[Yt[WA]]=Gt[Yt[H2]]=Uu,Uu!==o1(Yt[WA])){for(var VA=WA+1;VA<Yt.length;VA++)if(!(Gt[Yt[VA]]&v)){R(Ft[Yt[VA]])&Ge&&(Gt[Yt[VA]]=Uu);break}}if(Uu!==o1(Yt[H2])){for(var QA=H2+1;QA<Yt.length;QA++)if(!(Gt[Yt[QA]]&v)){R(Ft[Yt[QA]])&Ge&&(Gt[Yt[QA]]=Uu);break}}}}for(var rg=0;rg<Yt.length;rg++)if(Gt[Yt[rg]]&m){for(var bC=rg,hb=rg,fb=Jo,KA=rg-1;KA>=0;KA--)if(Gt[Yt[KA]]&v)bC=KA;else{fb=Gt[Yt[KA]]&NA?Y:J;break}for(var MC=Yr,XA=rg+1;XA<Yt.length;XA++)if(Gt[Yt[XA]]&(m|v))hb=XA;else{MC=Gt[Yt[XA]]&NA?Y:J;break}for(var V2=bC;V2<=hb;V2++)Gt[Yt[V2]]=fb===MC?fb:o1(Yt[V2]);rg=hb}}}for(var vp=Lr.start;vp<=Lr.end;vp++){var DB=Er[vp],Q2=Gt[vp];if(DB&1?Q2&(J|ce|le)&&Er[vp]++:Q2&Y?Er[vp]++:Q2&(le|ce)&&(Er[vp]+=2),Q2&v&&(Er[vp]=vp===0?Lr.level:Er[vp-1]),vp===Lr.end||R(Ft[vp])&(Te|me))for(var K2=vp;K2>=0&&R(Ft[K2])&E;K2--)Er[K2]=Lr.level}}return{levels:Er,paragraphs:xi};function xC(sc,Nu){for(var Jc=sc;Jc<Ft.length;Jc++){var ig=Gt[Jc];if(ig&(Y|De))return 1;if(ig&(me|J)||Nu&&ig===ke)return 0;if(ig&p){var CC=LB(Jc);Jc=CC===-1?Ft.length:CC}}return 0}function LB(sc){for(var Nu=1,Jc=sc+1;Jc<Ft.length;Jc++){var ig=Gt[Jc];if(ig&me)break;if(ig&ke){if(--Nu===0)return Jc}else ig&p&&Nu++}return-1}function o1(sc){return Er[sc]&1?Y:J}}var ht="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",dt;function $e(){if(!dt){var Ft=P(ht,!0),bn=Ft.map,Fn=Ft.reverseMap;Fn.forEach(function(Gt,Yn){bn.set(Yn,Gt)}),dt=bn}}function Kt(Ft){return $e(),dt.get(Ft)||null}function zt(Ft,bn,Fn,Gt){var Yn=Ft.length;Fn=Math.max(0,Fn==null?0:+Fn),Gt=Math.min(Yn-1,Gt==null?Yn-1:+Gt);for(var hr=new Map,Fr=Fn;Fr<=Gt;Fr++)if(bn[Fr]&1){var Er=Kt(Ft[Fr]);Er!==null&&hr.set(Fr,Er)}return hr}function Bt(Ft,bn,Fn,Gt){var Yn=Ft.length;Fn=Math.max(0,Fn==null?0:+Fn),Gt=Math.min(Yn-1,Gt==null?Yn-1:+Gt);var hr=[];return bn.paragraphs.forEach(function(Fr){var Er=Math.max(Fn,Fr.start),Ii=Math.min(Gt,Fr.end);if(Er<Ii){for(var xi=bn.levels.slice(Er,Ii+1),Lr=Ii;Lr>=Er&&R(Ft[Lr])&E;Lr--)xi[Lr]=Fr.level;for(var Qr=Fr.level,Hi=1/0,To=0;To<xi.length;To++){var lt=xi[To];lt>Qr&&(Qr=lt),lt<Hi&&(Hi=lt|1)}for(var xn=Qr;xn>=Hi;xn--)for(var Gn=0;Gn<xi.length;Gn++)if(xi[Gn]>=xn){for(var cr=Gn;Gn+1<xi.length&&xi[Gn+1]>=xn;)Gn++;Gn>cr&&hr.push([cr+Fn,Gn+Fn])}}}),hr}function Qe(Ft,bn,Fn,Gt){var Yn=ze(Ft,bn,Fn,Gt),hr=[].concat(Ft);return Yn.forEach(function(Fr,Er){hr[Er]=(bn.levels[Fr]&1?Kt(Ft[Fr]):null)||Ft[Fr]}),hr.join("")}function ze(Ft,bn,Fn,Gt){for(var Yn=Bt(Ft,bn,Fn,Gt),hr=[],Fr=0;Fr<Ft.length;Fr++)hr[Fr]=Fr;return Yn.forEach(function(Er){for(var Ii=Er[0],xi=Er[1],Lr=hr.slice(Ii,xi+1),Qr=Lr.length;Qr--;)hr[xi-Qr]=Lr[Qr]}),hr}return t.closingToOpeningBracket=X,t.getBidiCharType=R,t.getBidiCharTypeName=F,t.getCanonicalBracket=W,t.getEmbeddingLevels=vt,t.getMirroredCharacter=Kt,t.getMirroredCharactersMap=zt,t.getReorderSegments=Bt,t.getReorderedIndices=ze,t.getReorderedString=Qe,t.openingToClosingBracket=H,Object.defineProperty(t,"__esModule",{value:!0}),t}({});return s}var D_=O_;const dy=/\bvoid\s+main\s*\(\s*\)\s*{/g;function M1(s){const t=/^[ \t]*#include +<([\w\d./]+)>/gm;function r(l,c){let p=i.ShaderChunk[c];return p?M1(p):l}return s.replace(t,r)}const Ja=[];for(let s=0;s<256;s++)Ja[s]=(s<16?"0":"")+s.toString(16);function L_(){const s=Math.random()*4294967295|0,t=Math.random()*4294967295|0,r=Math.random()*4294967295|0,l=Math.random()*4294967295|0;return(Ja[s&255]+Ja[s>>8&255]+Ja[s>>16&255]+Ja[s>>24&255]+"-"+Ja[t&255]+Ja[t>>8&255]+"-"+Ja[t>>16&15|64]+Ja[t>>24&255]+"-"+Ja[r&63|128]+Ja[r>>8&255]+"-"+Ja[r>>16&255]+Ja[r>>24&255]+Ja[l&255]+Ja[l>>8&255]+Ja[l>>16&255]+Ja[l>>24&255]).toUpperCase()}const Ah=Object.assign||function(){let s=arguments[0];for(let t=1,r=arguments.length;t<r;t++){let l=arguments[t];if(l)for(let c in l)Object.prototype.hasOwnProperty.call(l,c)&&(s[c]=l[c])}return s},P_=Date.now(),hy=new WeakMap,i0=new Map;let fy=1e10;function o0(s,t){const r=my(t);let l=hy.get(s);if(l||hy.set(s,l=Object.create(null)),l[r])return new l[r];const c=`_onBeforeCompile${r}`,p=function(E,x){s.onBeforeCompile.call(this,E,x);const T=this.customProgramCacheKey()+"|"+E.vertexShader+"|"+E.fragmentShader;let R=i0[T];if(!R){const F=s0(this,E,t,r);R=i0[T]=F}E.vertexShader=R.vertexShader,E.fragmentShader=R.fragmentShader,Ah(E.uniforms,this.uniforms),t.timeUniform&&(E.uniforms[t.timeUniform]={get value(){return Date.now()-P_}}),this[c]&&this[c](E)},h=function(){return m(t.chained?s:s.clone())},m=function(E){const x=Object.create(E,v);return Object.defineProperty(x,"baseMaterial",{value:s}),Object.defineProperty(x,"id",{value:fy++}),x.uuid=L_(),x.uniforms=Ah({},E.uniforms,t.uniforms),x.defines=Ah({},E.defines,t.defines),x.defines[`TROIKA_DERIVED_MATERIAL_${r}`]="",x.extensions=Ah({},E.extensions,t.extensions),x._listeners=void 0,x},v={constructor:{value:h},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return s.customProgramCacheKey()+"|"+r}},onBeforeCompile:{get(){return p},set(E){this[c]=E}},copy:{writable:!0,configurable:!0,value:function(E){return s.copy.call(this,E),!s.isShaderMaterial&&!s.isDerivedMaterial&&(Ah(this.extensions,E.extensions),Ah(this.defines,E.defines),Ah(this.uniforms,i.UniformsUtils.clone(E.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const E=new s.constructor;return m(E).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let E=this._depthMaterial;return E||(E=this._depthMaterial=o0(s.isDerivedMaterial?s.getDepthMaterial():new i.MeshDepthMaterial({depthPacking:i.RGBADepthPacking}),t),E.defines.IS_DEPTH_MATERIAL="",E.uniforms=this.uniforms),E}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let E=this._distanceMaterial;return E||(E=this._distanceMaterial=o0(s.isDerivedMaterial?s.getDistanceMaterial():new i.MeshDistanceMaterial,t),E.defines.IS_DISTANCE_MATERIAL="",E.uniforms=this.uniforms),E}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:E,_distanceMaterial:x}=this;E&&E.dispose(),x&&x.dispose(),s.dispose.call(this)}}};return l[r]=h,new h}function s0(s,{vertexShader:t,fragmentShader:r},l,c){let{vertexDefs:p,vertexMainIntro:h,vertexMainOutro:m,vertexTransform:v,fragmentDefs:E,fragmentMainIntro:x,fragmentMainOutro:T,fragmentColorTransform:R,customRewriter:F,timeUniform:U}=l;if(p=p||"",h=h||"",m=m||"",E=E||"",x=x||"",T=T||"",(v||F)&&(t=M1(t)),(R||F)&&(r=r.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),r=M1(r)),F){let P=F({vertexShader:t,fragmentShader:r});t=P.vertexShader,r=P.fragmentShader}if(R){let P=[];r=r.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,O=>(P.push(O),"")),T=`${R}
${P.join(`
`)}
${T}`}if(U){const P=`
uniform float ${U};
`;p=P+p,E=P+E}return v&&(t=`vec3 troika_position_${c};
vec3 troika_normal_${c};
vec2 troika_uv_${c};
${t}
`,p=`${p}
void troikaVertexTransform${c}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${v}
}
`,h=`
troika_position_${c} = vec3(position);
troika_normal_${c} = vec3(normal);
troika_uv_${c} = vec2(uv);
troikaVertexTransform${c}(troika_position_${c}, troika_normal_${c}, troika_uv_${c});
${h}
`,t=t.replace(/\b(position|normal|uv)\b/g,(P,O,z,L)=>/\battribute\s+vec[23]\s+$/.test(L.substr(0,z))?O:`troika_${O}_${c}`),s.map&&s.map.channel>0||(t=t.replace(/\bMAP_UV\b/g,`troika_uv_${c}`))),t=x1(t,c,p,h,m),r=x1(r,c,E,x,T),{vertexShader:t,fragmentShader:r}}function x1(s,t,r,l,c){return(l||c||r)&&(s=s.replace(dy,`
${r}
void troikaOrigMain${t}() {`),s+=`
void main() {
  ${l}
  troikaOrigMain${t}();
  ${c}
}`),s}function k_(s,t){return s==="uniforms"?void 0:typeof t=="function"?t.toString():t}let z_=0;const gy=new Map;function my(s){const t=JSON.stringify(s,k_);let r=gy.get(t);return r==null&&gy.set(t,r=++z_),r}const G_={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function Ib(s){let t=G_[s.type];return t?ShaderLib[t]:s}function Fb(s){let t=/\buniform\s+(int|float|vec[234]|mat[34])\s+([A-Za-z_][\w]*)/g,r=Object.create(null),l;for(;(l=t.exec(s))!==null;)r[l[2]]=l[1];return r}function Ob(s,t=new Matrix4){return typeof t.invert=="function"?t.copy(s).invert():t.getInverse(s),t}const U_=null,Ng=null,Ay=null,yy=null;function N_(s){return o0(s,{chained:!0,uniforms:{pointA:{value:new Vector3},controlA:{value:new Vector3},controlB:{value:new Vector3},pointB:{value:new Vector3},radius:{value:.01},dashing:{value:new Vector3}},vertexDefs:U_,vertexTransform:Ng,fragmentDefs:Ay,fragmentMainIntro:yy})}let a0=null;const vy=new i.MeshStandardMaterial({color:16777215,side:i.DoubleSide});class _y extends null{static getGeometry(){return a0||(a0=new CylinderGeometry(1,1,1,6,64).translate(0,.5,0))}constructor(){super(_y.getGeometry(),vy),this.pointA=new Vector3,this.controlA=new Vector3,this.controlB=new Vector3,this.pointB=new Vector3,this.radius=.01,this.dashArray=new Vector2,this.dashOffset=0,this.frustumCulled=!1}get material(){let t=this._derivedMaterial;const r=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=vy.clone());return(!t||t.baseMaterial!==r)&&(t=this._derivedMaterial=N_(r),r.addEventListener("dispose",function l(){r.removeEventListener("dispose",l),t.dispose()})),t}set material(t){this._baseMaterial=t}get customDepthMaterial(){return this.material.getDepthMaterial()}get customDistanceMaterial(){return this.material.getDistanceMaterial()}onBeforeRender(){const{uniforms:t}=this.material,{pointA:r,controlA:l,controlB:c,pointB:p,radius:h,dashArray:m,dashOffset:v}=this;t.pointA.value.copy(r),t.controlA.value.copy(l),t.controlB.value.copy(c),t.pointB.value.copy(p),t.radius.value=h,t.dashing.value.set(m.x,m.y,v||0)}raycast(){}}var Za=A(5108);function j_(s,t,r){const{defaultFontURL:l}=r,c=Object.create(null),p=1/0,h=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,m="[^\\S\\u00A0]",v=new RegExp(`${m}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function E(L,k){function H(){const X=W=>{Za.error(`Failure loading font ${L}${L===l?"":"; trying fallback"}`,W),L!==l&&(L=l,H())};try{const W=new XMLHttpRequest;W.open("get",L,!0),W.responseType="arraybuffer",W.onload=function(){if(W.status>=400)X(new Error(W.statusText));else if(W.status>0)try{const J=s(W.response);k(J)}catch(J){X(J)}},W.onerror=X,W.send()}catch(W){X(W)}}H()}function x(L,k){L||(L=l);let H=c[L];H?H.pending?H.pending.push(k):k(H):(c[L]={pending:[k]},E(L,X=>{let W=c[L].pending;c[L]=X,W.forEach(J=>J(X))}))}function T({text:L="",font:k=l,sdfGlyphSize:H=64,fontSize:X=1,letterSpacing:W=0,lineHeight:J="normal",maxWidth:Y=p,direction:ce,textAlign:ue="left",textIndent:ge=0,whiteSpace:le="normal",overflowWrap:Me="normal",anchorX:me=0,anchorY:Te=0,includeCaretPositions:Ue=!1,chunkedBoundsSize:Re=8192,colorRanges:Ge=null},De,Xe=!1){const Ce=P(),Ee={fontLoad:0,typesetting:0};L.indexOf("\r")>-1&&(Za.info("Typesetter: got text with \\r chars; normalizing to \\n"),L=L.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),X=+X,W=+W,Y=+Y,J=J||"normal",ge=+ge,x(k,_e=>{const oe=isFinite(Y);let Ae=null,Be=null,ve=null,ke=null,vt=null,ht=null,dt=null,$e=0,Kt=0,zt=le!=="nowrap";const{ascender:Bt,descender:Qe,unitsPerEm:ze,lineGap:Ft,capHeight:bn,xHeight:Fn}=_e;Ee.fontLoad=P()-Ce;const Gt=P(),Yn=X/ze;J==="normal"&&(J=(Bt-Qe+Ft)/ze),J=J*X;const hr=(J-(Bt-Qe)*Yn)/2,Fr=-(Bt*Yn+hr),Er=Math.min(J,(Bt-Qe)*Yn),Ii=(Bt+Qe)/2*Yn-Er/2;let xi=ge,Lr=new O;const Qr=[Lr];_e.forEachGlyph(L,X,W,(lt,xn,Gn)=>{const cr=L.charAt(Gn),ni=lt.advanceWidth*Yn,pi=Lr.count;let yi;if("isEmpty"in lt||(lt.isWhitespace=!!cr&&new RegExp(m).test(cr),lt.canBreakAfter=!!cr&&v.test(cr),lt.isEmpty=lt.xMin===lt.xMax||lt.yMin===lt.yMax||h.test(cr)),!lt.isWhitespace&&!lt.isEmpty&&Kt++,zt&&oe&&!lt.isWhitespace&&xn+ni+xi>Y&&pi){if(Lr.glyphAt(pi-1).glyphObj.canBreakAfter)yi=new O,xi=-xn;else for(let Tn=pi;Tn--;)if(Tn===0&&Me==="break-word"){yi=new O,xi=-xn;break}else if(Lr.glyphAt(Tn).glyphObj.canBreakAfter){yi=Lr.splitAt(Tn+1);const so=yi.glyphAt(0).x;xi-=so;for(let Gl=yi.count;Gl--;)yi.glyphAt(Gl).x-=so;break}yi&&(Lr.isSoftWrapped=!0,Lr=yi,Qr.push(Lr),$e=Y)}let fi=Lr.glyphAt(Lr.count);fi.glyphObj=lt,fi.x=xn+xi,fi.width=ni,fi.charIndex=Gn,cr===`
`&&(Lr=new O,Qr.push(Lr),xi=-(xn+ni+W*X)+ge)}),Qr.forEach(lt=>{for(let xn=lt.count;xn--;){let{glyphObj:Gn,x:cr,width:ni}=lt.glyphAt(xn);if(!Gn.isWhitespace){lt.width=cr+ni,lt.width>$e&&($e=lt.width);return}}});let Hi=0,To=0;if(me&&(typeof me=="number"?Hi=-me:typeof me=="string"&&(Hi=-$e*(me==="left"?0:me==="center"?.5:me==="right"?1:F(me)))),Te){if(typeof Te=="number")To=-Te;else if(typeof Te=="string"){let lt=Qr.length*J;To=Te==="top"?0:Te==="top-baseline"?-Fr:Te==="top-cap"?-Fr-bn*Yn:Te==="top-ex"?-Fr-Fn*Yn:Te==="middle"?lt/2:Te==="bottom"?lt:Te==="bottom-baseline"?lt-hr+Qe*Yn:F(Te)*lt}}if(!Xe){const lt=t.getEmbeddingLevels(L,ce);Ae=new Uint16Array(Kt),Be=new Float32Array(Kt*2),ve={},ht=[p,p,-p,-p],dt=[];let xn=Fr;Ue&&(vt=new Float32Array(L.length*3)),Ge&&(ke=new Uint8Array(Kt*3));let Gn=0,cr=-1,ni=-1,pi,yi;if(Qr.forEach((fi,Tn)=>{let{count:so,width:Gl}=fi;if(so>0){let zh=0;for(let ea=so;ea--&&fi.glyphAt(ea).glyphObj.isWhitespace;)zh++;let Nd=0,Xc=0;if(ue==="center")Nd=($e-Gl)/2;else if(ue==="right")Nd=$e-Gl;else if(ue==="justify"&&fi.isSoftWrapped){let ea=0;for(let ks=so-zh;ks--;)fi.glyphAt(ks).glyphObj.isWhitespace&&ea++;Xc=($e-Gl)/ea}if(Xc||Nd){let ea=0;for(let ks=0;ks<so;ks++){let Ap=fi.glyphAt(ks);const Oc=Ap.glyphObj;Ap.x+=Nd+ea,Xc!==0&&Oc.isWhitespace&&ks<so-zh&&(ea+=Xc,Ap.width+=Xc)}}const Fc=t.getReorderSegments(L,lt,fi.glyphAt(0).charIndex,fi.glyphAt(fi.count-1).charIndex);for(let ea=0;ea<Fc.length;ea++){const[ks,Ap]=Fc[ea];let Oc=1/0,Bo=-1/0;for(let nl=0;nl<so;nl++)if(fi.glyphAt(nl).charIndex>=ks){let vl=nl,ga=nl;for(;ga<so;ga++){let ii=fi.glyphAt(ga);if(ii.charIndex>Ap)break;ga<so-zh&&(Oc=Math.min(Oc,ii.x),Bo=Math.max(Bo,ii.x+ii.width))}for(let ii=vl;ii<ga;ii++){const _l=fi.glyphAt(ii);_l.x=Bo-(_l.x+_l.width-Oc)}break}}let Ps;const Rm=ea=>Ps=ea;for(let ea=0;ea<so;ea++){let ks=fi.glyphAt(ea);Ps=ks.glyphObj;const Ap=Ps.index,Oc=lt.levels[ks.charIndex]&1;if(Oc){const Bo=t.getMirroredCharacter(L[ks.charIndex]);Bo&&_e.forEachGlyph(Bo,0,0,Rm)}if(Ue){const{charIndex:Bo}=ks,nl=ks.x+Hi,vl=ks.x+ks.width+Hi;vt[Bo*3]=Oc?vl:nl,vt[Bo*3+1]=Oc?nl:vl,vt[Bo*3+2]=xn+Ii+To;const ga=Bo-cr;ga>1&&U(vt,cr,ga),cr=Bo}if(Ge){const{charIndex:Bo}=ks;for(;Bo>ni;)ni++,Ge.hasOwnProperty(ni)&&(yi=Ge[ni])}if(!Ps.isWhitespace&&!Ps.isEmpty){const Bo=Gn++;ve[Ap]||(ve[Ap]={path:Ps.path,pathBounds:[Ps.xMin,Ps.yMin,Ps.xMax,Ps.yMax]});const nl=ks.x+Hi,vl=xn+To;Be[Bo*2]=nl,Be[Bo*2+1]=vl;const ga=nl+Ps.xMin*Yn,ii=vl+Ps.yMin*Yn,_l=nl+Ps.xMax*Yn,jd=vl+Ps.yMax*Yn;ga<ht[0]&&(ht[0]=ga),ii<ht[1]&&(ht[1]=ii),_l>ht[2]&&(ht[2]=_l),jd>ht[3]&&(ht[3]=jd),Bo%Re===0&&(pi={start:Bo,end:Bo,rect:[p,p,-p,-p]},dt.push(pi)),pi.end++;const ye=pi.rect;if(ga<ye[0]&&(ye[0]=ga),ii<ye[1]&&(ye[1]=ii),_l>ye[2]&&(ye[2]=_l),jd>ye[3]&&(ye[3]=jd),Ae[Bo]=Ap,Ge){const Ie=Bo*3;ke[Ie]=yi>>16&255,ke[Ie+1]=yi>>8&255,ke[Ie+2]=yi&255}}}}xn-=J}),vt){const fi=L.length-cr;fi>1&&U(vt,cr,fi)}}Ee.typesetting=P()-Gt,De({glyphIds:Ae,glyphPositions:Be,glyphData:ve,caretPositions:vt,caretHeight:Er,glyphColors:ke,chunkedBounds:dt,fontSize:X,unitsPerEm:ze,ascender:Bt*Yn,descender:Qe*Yn,capHeight:bn*Yn,xHeight:Fn*Yn,lineHeight:J,topBaseline:Fr,blockBounds:[Hi,To-Qr.length*J,Hi+$e,To],visibleBounds:ht,timings:Ee})})}function R(L,k){T(L,H=>{const[X,W,J,Y]=H.blockBounds;k({width:J-X,height:Y-W})},{metricsOnly:!0})}function F(L){let k=L.match(/^([\d.]+)%$/),H=k?parseFloat(k[1]):NaN;return isNaN(H)?0:H/100}function U(L,k,H){const X=L[k*3],W=L[k*3+1],J=L[k*3+2],Y=(W-X)/H;for(let ce=0;ce<H;ce++){const ue=(k+ce)*3;L[ue]=X+Y*ce,L[ue+1]=X+Y*(ce+1),L[ue+2]=J}}function P(){return(self.performance||Date).now()}function O(){this.data=[]}const z=["glyphObj","x","width","charIndex"];return O.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/z.length)},glyphAt(L){let k=O.flyweight;return k.data=this.data,k.index=L,k},splitAt(L){let k=new O;return k.data=this.data.splice(L*z.length),k}},O.flyweight=z.reduce((L,k,H,X)=>(Object.defineProperty(L,k,{get(){return this.data[this.index*z.length+H]},set(W){this.data[this.index*z.length+H]=W}}),L),{data:null,index:0}),{typeset:T,measure:R,loadFont:x}}const Ad=()=>(self.performance||Date).now(),l0=uy();let Ey;function H_(s,t,r,l,c,p,h,m,v,E,x=!0){return x?V_(s,t,r,l,c,p,h,m,v,E).then(null,T=>(Ey||(Za.warn("WebGL SDF generation failed, falling back to JS",T),Ey=!0),S1(s,t,r,l,c,p,h,m,v,E))):S1(s,t,r,l,c,p,h,m,v,E)}const c0=[],W_=5;let C1=0;function by(){const s=Ad();for(;c0.length&&Ad()-s<W_;)c0.shift()();C1=c0.length?setTimeout(by,0):0}const V_=(...s)=>new Promise((t,r)=>{c0.push(()=>{const l=Ad();try{l0.webgl.generateIntoCanvas(...s),t({timing:Ad()-l})}catch(c){r(c)}}),C1||(C1=setTimeout(by,0))}),Q_=4,K_=2e3,My={};let X_=0;function S1(s,t,r,l,c,p,h,m,v,E){const x="TroikaTextSDFGenerator_JS_"+X_++%Q_;let T=My[x];return T||(T=My[x]={workerModule:Ug({name:x,workerId:x,dependencies:[uy,Ad],init(R,F){const U=R().javascript.generate;return function(...P){const O=F();return{textureData:U(...P),timing:F()-O}}},getTransferables(R){return[R.textureData.buffer]}}),requests:0,idleTimer:null}),T.requests++,clearTimeout(T.idleTimer),T.workerModule(s,t,r,l,c,p).then(({textureData:R,timing:F})=>{const U=Ad(),P=new Uint8Array(R.length*4);for(let O=0;O<R.length;O++)P[O*4+E]=R[O];return l0.webglUtils.renderImageData(h,P,m,v,s,t,1<<3-E),F+=Ad()-U,--T.requests===0&&(T.idleTimer=setTimeout(()=>{I_(x)},K_)),{timing:F}})}function xy(s){s._warm||(l0.webgl.isSupported(s),s._warm=!0)}const Y_=l0.webglUtils.resizeWebGLCanvasWithoutClearing;/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function J_(){return typeof window=="undefined"&&(self.window=self),function(s){var t={parse:function(c){var p=t._bin,h=new Uint8Array(c);if(p.readASCII(h,0,4)=="ttcf"){var m=4;p.readUshort(h,m),m+=2,p.readUshort(h,m),m+=2;var v=p.readUint(h,m);m+=4;for(var E=[],x=0;x<v;x++){var T=p.readUint(h,m);m+=4,E.push(t._readFont(h,T))}return E}return[t._readFont(h,0)]},_readFont:function(c,p){var h=t._bin,m=p;h.readFixed(c,p),p+=4;var v=h.readUshort(c,p);p+=2,h.readUshort(c,p),p+=2,h.readUshort(c,p),p+=2,h.readUshort(c,p),p+=2;for(var E=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],x={_data:c,_offset:m},T={},R=0;R<v;R++){var F=h.readASCII(c,p,4);p+=4,h.readUint(c,p),p+=4;var U=h.readUint(c,p);p+=4;var P=h.readUint(c,p);p+=4,T[F]={offset:U,length:P}}for(R=0;R<E.length;R++){var O=E[R];T[O]&&(x[O.trim()]=t[O.trim()].parse(c,T[O].offset,T[O].length,x))}return x},_tabOffset:function(c,p,h){for(var m=t._bin,v=m.readUshort(c,h+4),E=h+12,x=0;x<v;x++){var T=m.readASCII(c,E,4);E+=4,m.readUint(c,E),E+=4;var R=m.readUint(c,E);if(E+=4,m.readUint(c,E),E+=4,T==p)return R}return 0}};t._bin={readFixed:function(c,p){return(c[p]<<8|c[p+1])+(c[p+2]<<8|c[p+3])/65540},readF2dot14:function(c,p){return t._bin.readShort(c,p)/16384},readInt:function(c,p){return t._bin._view(c).getInt32(p)},readInt8:function(c,p){return t._bin._view(c).getInt8(p)},readShort:function(c,p){return t._bin._view(c).getInt16(p)},readUshort:function(c,p){return t._bin._view(c).getUint16(p)},readUshorts:function(c,p,h){for(var m=[],v=0;v<h;v++)m.push(t._bin.readUshort(c,p+2*v));return m},readUint:function(c,p){return t._bin._view(c).getUint32(p)},readUint64:function(c,p){return 4294967296*t._bin.readUint(c,p)+t._bin.readUint(c,p+4)},readASCII:function(c,p,h){for(var m="",v=0;v<h;v++)m+=String.fromCharCode(c[p+v]);return m},readUnicode:function(c,p,h){for(var m="",v=0;v<h;v++){var E=c[p++]<<8|c[p++];m+=String.fromCharCode(E)}return m},_tdec:typeof window!="undefined"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(c,p,h){var m=t._bin._tdec;return m&&p==0&&h==c.length?m.decode(c):t._bin.readASCII(c,p,h)},readBytes:function(c,p,h){for(var m=[],v=0;v<h;v++)m.push(c[p+v]);return m},readASCIIArray:function(c,p,h){for(var m=[],v=0;v<h;v++)m.push(String.fromCharCode(c[p+v]));return m},_view:function(c){return c._dataView||(c._dataView=c.buffer?new DataView(c.buffer,c.byteOffset,c.byteLength):new DataView(new Uint8Array(c).buffer))}},t._lctf={},t._lctf.parse=function(c,p,h,m,v){var E=t._bin,x={},T=p;E.readFixed(c,p),p+=4;var R=E.readUshort(c,p);p+=2;var F=E.readUshort(c,p);p+=2;var U=E.readUshort(c,p);return p+=2,x.scriptList=t._lctf.readScriptList(c,T+R),x.featureList=t._lctf.readFeatureList(c,T+F),x.lookupList=t._lctf.readLookupList(c,T+U,v),x},t._lctf.readLookupList=function(c,p,h){var m=t._bin,v=p,E=[],x=m.readUshort(c,p);p+=2;for(var T=0;T<x;T++){var R=m.readUshort(c,p);p+=2;var F=t._lctf.readLookupTable(c,v+R,h);E.push(F)}return E},t._lctf.readLookupTable=function(c,p,h){var m=t._bin,v=p,E={tabs:[]};E.ltype=m.readUshort(c,p),p+=2,E.flag=m.readUshort(c,p),p+=2;var x=m.readUshort(c,p);p+=2;for(var T=E.ltype,R=0;R<x;R++){var F=m.readUshort(c,p);p+=2;var U=h(c,T,v+F,E);E.tabs.push(U)}return E},t._lctf.numOfOnes=function(c){for(var p=0,h=0;h<32;h++)c>>>h&1&&p++;return p},t._lctf.readClassDef=function(c,p){var h=t._bin,m=[],v=h.readUshort(c,p);if(p+=2,v==1){var E=h.readUshort(c,p);p+=2;var x=h.readUshort(c,p);p+=2;for(var T=0;T<x;T++)m.push(E+T),m.push(E+T),m.push(h.readUshort(c,p)),p+=2}if(v==2){var R=h.readUshort(c,p);for(p+=2,T=0;T<R;T++)m.push(h.readUshort(c,p)),p+=2,m.push(h.readUshort(c,p)),p+=2,m.push(h.readUshort(c,p)),p+=2}return m},t._lctf.getInterval=function(c,p){for(var h=0;h<c.length;h+=3){var m=c[h],v=c[h+1];if(c[h+2],m<=p&&p<=v)return h}return-1},t._lctf.readCoverage=function(c,p){var h=t._bin,m={};m.fmt=h.readUshort(c,p),p+=2;var v=h.readUshort(c,p);return p+=2,m.fmt==1&&(m.tab=h.readUshorts(c,p,v)),m.fmt==2&&(m.tab=h.readUshorts(c,p,3*v)),m},t._lctf.coverageIndex=function(c,p){var h=c.tab;if(c.fmt==1)return h.indexOf(p);if(c.fmt==2){var m=t._lctf.getInterval(h,p);if(m!=-1)return h[m+2]+(p-h[m])}return-1},t._lctf.readFeatureList=function(c,p){var h=t._bin,m=p,v=[],E=h.readUshort(c,p);p+=2;for(var x=0;x<E;x++){var T=h.readASCII(c,p,4);p+=4;var R=h.readUshort(c,p);p+=2;var F=t._lctf.readFeatureTable(c,m+R);F.tag=T.trim(),v.push(F)}return v},t._lctf.readFeatureTable=function(c,p){var h=t._bin,m=p,v={},E=h.readUshort(c,p);p+=2,E>0&&(v.featureParams=m+E);var x=h.readUshort(c,p);p+=2,v.tab=[];for(var T=0;T<x;T++)v.tab.push(h.readUshort(c,p+2*T));return v},t._lctf.readScriptList=function(c,p){var h=t._bin,m=p,v={},E=h.readUshort(c,p);p+=2;for(var x=0;x<E;x++){var T=h.readASCII(c,p,4);p+=4;var R=h.readUshort(c,p);p+=2,v[T.trim()]=t._lctf.readScriptTable(c,m+R)}return v},t._lctf.readScriptTable=function(c,p){var h=t._bin,m=p,v={},E=h.readUshort(c,p);p+=2,v.default=t._lctf.readLangSysTable(c,m+E);var x=h.readUshort(c,p);p+=2;for(var T=0;T<x;T++){var R=h.readASCII(c,p,4);p+=4;var F=h.readUshort(c,p);p+=2,v[R.trim()]=t._lctf.readLangSysTable(c,m+F)}return v},t._lctf.readLangSysTable=function(c,p){var h=t._bin,m={};h.readUshort(c,p),p+=2,m.reqFeature=h.readUshort(c,p),p+=2;var v=h.readUshort(c,p);return p+=2,m.features=h.readUshorts(c,p,v),m},t.CFF={},t.CFF.parse=function(c,p,h){var m=t._bin;(c=new Uint8Array(c.buffer,p,h))[p=0],c[++p],c[++p],c[++p],p++;var v=[];p=t.CFF.readIndex(c,p,v);for(var E=[],x=0;x<v.length-1;x++)E.push(m.readASCII(c,p+v[x],v[x+1]-v[x]));p+=v[v.length-1];var T=[];p=t.CFF.readIndex(c,p,T);var R=[];for(x=0;x<T.length-1;x++)R.push(t.CFF.readDict(c,p+T[x],p+T[x+1]));p+=T[T.length-1];var F=R[0],U=[];p=t.CFF.readIndex(c,p,U);var P=[];for(x=0;x<U.length-1;x++)P.push(m.readASCII(c,p+U[x],U[x+1]-U[x]));if(p+=U[U.length-1],t.CFF.readSubrs(c,p,F),F.CharStrings){p=F.CharStrings,U=[],p=t.CFF.readIndex(c,p,U);var O=[];for(x=0;x<U.length-1;x++)O.push(m.readBytes(c,p+U[x],U[x+1]-U[x]));F.CharStrings=O}if(F.ROS){p=F.FDArray;var z=[];for(p=t.CFF.readIndex(c,p,z),F.FDArray=[],x=0;x<z.length-1;x++){var L=t.CFF.readDict(c,p+z[x],p+z[x+1]);t.CFF._readFDict(c,L,P),F.FDArray.push(L)}p+=z[z.length-1],p=F.FDSelect,F.FDSelect=[];var k=c[p];if(p++,k!=3)throw k;var H=m.readUshort(c,p);for(p+=2,x=0;x<H+1;x++)F.FDSelect.push(m.readUshort(c,p),c[p+2]),p+=3}return F.Encoding&&(F.Encoding=t.CFF.readEncoding(c,F.Encoding,F.CharStrings.length)),F.charset&&(F.charset=t.CFF.readCharset(c,F.charset,F.CharStrings.length)),t.CFF._readFDict(c,F,P),F},t.CFF._readFDict=function(c,p,h){var m;for(var v in p.Private&&(m=p.Private[1],p.Private=t.CFF.readDict(c,m,m+p.Private[0]),p.Private.Subrs&&t.CFF.readSubrs(c,m+p.Private.Subrs,p.Private)),p)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(v)!=-1&&(p[v]=h[p[v]-426+35])},t.CFF.readSubrs=function(c,p,h){var m=t._bin,v=[];p=t.CFF.readIndex(c,p,v);var E,x=v.length;E=x<1240?107:x<33900?1131:32768,h.Bias=E,h.Subrs=[];for(var T=0;T<v.length-1;T++)h.Subrs.push(m.readBytes(c,p+v[T],v[T+1]-v[T]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(c,p){for(var h=0;h<c.charset.length;h++)if(c.charset[h]==p)return h;return-1},t.CFF.glyphBySE=function(c,p){return p<0||p>255?-1:t.CFF.glyphByUnicode(c,t.CFF.tableSE[p])},t.CFF.readEncoding=function(c,p,h){t._bin;var m=[".notdef"],v=c[p];if(p++,v!=0)throw"error: unknown encoding format: "+v;var E=c[p];p++;for(var x=0;x<E;x++)m.push(c[p+x]);return m},t.CFF.readCharset=function(c,p,h){var m=t._bin,v=[".notdef"],E=c[p];if(p++,E==0)for(var x=0;x<h;x++){var T=m.readUshort(c,p);p+=2,v.push(T)}else{if(E!=1&&E!=2)throw"error: format: "+E;for(;v.length<h;){T=m.readUshort(c,p),p+=2;var R=0;for(E==1?(R=c[p],p++):(R=m.readUshort(c,p),p+=2),x=0;x<=R;x++)v.push(T),T++}}return v},t.CFF.readIndex=function(c,p,h){var m=t._bin,v=m.readUshort(c,p)+1,E=c[p+=2];if(p++,E==1)for(var x=0;x<v;x++)h.push(c[p+x]);else if(E==2)for(x=0;x<v;x++)h.push(m.readUshort(c,p+2*x));else if(E==3)for(x=0;x<v;x++)h.push(16777215&m.readUint(c,p+3*x-1));else if(v!=1)throw"unsupported offset size: "+E+", count: "+v;return(p+=v*E)-1},t.CFF.getCharString=function(c,p,h){var m=t._bin,v=c[p],E=c[p+1];c[p+2],c[p+3],c[p+4];var x=1,T=null,R=null;v<=20&&(T=v,x=1),v==12&&(T=100*v+E,x=2),21<=v&&v<=27&&(T=v,x=1),v==28&&(R=m.readShort(c,p+1),x=3),29<=v&&v<=31&&(T=v,x=1),32<=v&&v<=246&&(R=v-139,x=1),247<=v&&v<=250&&(R=256*(v-247)+E+108,x=2),251<=v&&v<=254&&(R=256*-(v-251)-E-108,x=2),v==255&&(R=m.readInt(c,p+1)/65535,x=5),h.val=R!=null?R:"o"+T,h.size=x},t.CFF.readCharString=function(c,p,h){for(var m=p+h,v=t._bin,E=[];p<m;){var x=c[p],T=c[p+1];c[p+2],c[p+3],c[p+4];var R=1,F=null,U=null;x<=20&&(F=x,R=1),x==12&&(F=100*x+T,R=2),x!=19&&x!=20||(F=x,R=2),21<=x&&x<=27&&(F=x,R=1),x==28&&(U=v.readShort(c,p+1),R=3),29<=x&&x<=31&&(F=x,R=1),32<=x&&x<=246&&(U=x-139,R=1),247<=x&&x<=250&&(U=256*(x-247)+T+108,R=2),251<=x&&x<=254&&(U=256*-(x-251)-T-108,R=2),x==255&&(U=v.readInt(c,p+1)/65535,R=5),E.push(U!=null?U:"o"+F),p+=R}return E},t.CFF.readDict=function(c,p,h){for(var m=t._bin,v={},E=[];p<h;){var x=c[p],T=c[p+1];c[p+2],c[p+3],c[p+4];var R=1,F=null,U=null;if(x==28&&(U=m.readShort(c,p+1),R=3),x==29&&(U=m.readInt(c,p+1),R=5),32<=x&&x<=246&&(U=x-139,R=1),247<=x&&x<=250&&(U=256*(x-247)+T+108,R=2),251<=x&&x<=254&&(U=256*-(x-251)-T-108,R=2),x==255)throw U=m.readInt(c,p+1)/65535,R=5,"unknown number";if(x==30){var P=[];for(R=1;;){var O=c[p+R];R++;var z=O>>4,L=15&O;if(z!=15&&P.push(z),L!=15&&P.push(L),L==15)break}for(var k="",H=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],X=0;X<P.length;X++)k+=H[P[X]];U=parseFloat(k)}x<=21&&(F=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][x],R=1,x==12&&(F=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][T],R=2)),F!=null?(v[F]=E.length==1?E[0]:E,E=[]):E.push(U),p+=R}return v},t.cmap={},t.cmap.parse=function(c,p,h){c=new Uint8Array(c.buffer,p,h),p=0;var m=t._bin,v={};m.readUshort(c,p),p+=2;var E=m.readUshort(c,p);p+=2;var x=[];v.tables=[];for(var T=0;T<E;T++){var R=m.readUshort(c,p);p+=2;var F=m.readUshort(c,p);p+=2;var U=m.readUint(c,p);p+=4;var P="p"+R+"e"+F,O=x.indexOf(U);if(O==-1){var z;O=v.tables.length,x.push(U);var L=m.readUshort(c,U);L==0?z=t.cmap.parse0(c,U):L==4?z=t.cmap.parse4(c,U):L==6?z=t.cmap.parse6(c,U):L==12?z=t.cmap.parse12(c,U):Za.debug("unknown format: "+L,R,F,U),v.tables.push(z)}if(v[P]!=null)throw"multiple tables for one platform+encoding";v[P]=O}return v},t.cmap.parse0=function(c,p){var h=t._bin,m={};m.format=h.readUshort(c,p),p+=2;var v=h.readUshort(c,p);p+=2,h.readUshort(c,p),p+=2,m.map=[];for(var E=0;E<v-6;E++)m.map.push(c[p+E]);return m},t.cmap.parse4=function(c,p){var h=t._bin,m=p,v={};v.format=h.readUshort(c,p),p+=2;var E=h.readUshort(c,p);p+=2,h.readUshort(c,p),p+=2;var x=h.readUshort(c,p);p+=2;var T=x/2;v.searchRange=h.readUshort(c,p),p+=2,v.entrySelector=h.readUshort(c,p),p+=2,v.rangeShift=h.readUshort(c,p),p+=2,v.endCount=h.readUshorts(c,p,T),p+=2*T,p+=2,v.startCount=h.readUshorts(c,p,T),p+=2*T,v.idDelta=[];for(var R=0;R<T;R++)v.idDelta.push(h.readShort(c,p)),p+=2;for(v.idRangeOffset=h.readUshorts(c,p,T),p+=2*T,v.glyphIdArray=[];p<m+E;)v.glyphIdArray.push(h.readUshort(c,p)),p+=2;return v},t.cmap.parse6=function(c,p){var h=t._bin,m={};m.format=h.readUshort(c,p),p+=2,h.readUshort(c,p),p+=2,h.readUshort(c,p),p+=2,m.firstCode=h.readUshort(c,p),p+=2;var v=h.readUshort(c,p);p+=2,m.glyphIdArray=[];for(var E=0;E<v;E++)m.glyphIdArray.push(h.readUshort(c,p)),p+=2;return m},t.cmap.parse12=function(c,p){var h=t._bin,m={};m.format=h.readUshort(c,p),p+=2,p+=2,h.readUint(c,p),p+=4,h.readUint(c,p),p+=4;var v=h.readUint(c,p);p+=4,m.groups=[];for(var E=0;E<v;E++){var x=p+12*E,T=h.readUint(c,x+0),R=h.readUint(c,x+4),F=h.readUint(c,x+8);m.groups.push([T,R,F])}return m},t.glyf={},t.glyf.parse=function(c,p,h,m){for(var v=[],E=0;E<m.maxp.numGlyphs;E++)v.push(null);return v},t.glyf._parseGlyf=function(c,p){var h=t._bin,m=c._data,v=t._tabOffset(m,"glyf",c._offset)+c.loca[p];if(c.loca[p]==c.loca[p+1])return null;var E={};if(E.noc=h.readShort(m,v),v+=2,E.xMin=h.readShort(m,v),v+=2,E.yMin=h.readShort(m,v),v+=2,E.xMax=h.readShort(m,v),v+=2,E.yMax=h.readShort(m,v),v+=2,E.xMin>=E.xMax||E.yMin>=E.yMax)return null;if(E.noc>0){E.endPts=[];for(var x=0;x<E.noc;x++)E.endPts.push(h.readUshort(m,v)),v+=2;var T=h.readUshort(m,v);if(v+=2,m.length-v<T)return null;E.instructions=h.readBytes(m,v,T),v+=T;var R=E.endPts[E.noc-1]+1;for(E.flags=[],x=0;x<R;x++){var F=m[v];if(v++,E.flags.push(F),(8&F)!=0){var U=m[v];v++;for(var P=0;P<U;P++)E.flags.push(F),x++}}for(E.xs=[],x=0;x<R;x++){var O=(2&E.flags[x])!=0,z=(16&E.flags[x])!=0;O?(E.xs.push(z?m[v]:-m[v]),v++):z?E.xs.push(0):(E.xs.push(h.readShort(m,v)),v+=2)}for(E.ys=[],x=0;x<R;x++)O=(4&E.flags[x])!=0,z=(32&E.flags[x])!=0,O?(E.ys.push(z?m[v]:-m[v]),v++):z?E.ys.push(0):(E.ys.push(h.readShort(m,v)),v+=2);var L=0,k=0;for(x=0;x<R;x++)L+=E.xs[x],k+=E.ys[x],E.xs[x]=L,E.ys[x]=k}else{var H;E.parts=[];do{H=h.readUshort(m,v),v+=2;var X={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(E.parts.push(X),X.glyphIndex=h.readUshort(m,v),v+=2,1&H){var W=h.readShort(m,v);v+=2;var J=h.readShort(m,v);v+=2}else W=h.readInt8(m,v),v++,J=h.readInt8(m,v),v++;2&H?(X.m.tx=W,X.m.ty=J):(X.p1=W,X.p2=J),8&H?(X.m.a=X.m.d=h.readF2dot14(m,v),v+=2):64&H?(X.m.a=h.readF2dot14(m,v),v+=2,X.m.d=h.readF2dot14(m,v),v+=2):128&H&&(X.m.a=h.readF2dot14(m,v),v+=2,X.m.b=h.readF2dot14(m,v),v+=2,X.m.c=h.readF2dot14(m,v),v+=2,X.m.d=h.readF2dot14(m,v),v+=2)}while(32&H);if(256&H){var Y=h.readUshort(m,v);for(v+=2,E.instr=[],x=0;x<Y;x++)E.instr.push(m[v]),v++}}return E},t.GPOS={},t.GPOS.parse=function(c,p,h,m){return t._lctf.parse(c,p,h,m,t.GPOS.subt)},t.GPOS.subt=function(c,p,h,m){var v=t._bin,E=h,x={};if(x.fmt=v.readUshort(c,h),h+=2,p==1||p==2||p==3||p==7||p==8&&x.fmt<=2){var T=v.readUshort(c,h);h+=2,x.coverage=t._lctf.readCoverage(c,T+E)}if(p==1&&x.fmt==1){var R=v.readUshort(c,h);h+=2;var F=t._lctf.numOfOnes(R);R!=0&&(x.pos=t.GPOS.readValueRecord(c,h,R))}else if(p==2&&x.fmt>=1&&x.fmt<=2){R=v.readUshort(c,h),h+=2;var U=v.readUshort(c,h);h+=2,F=t._lctf.numOfOnes(R);var P=t._lctf.numOfOnes(U);if(x.fmt==1){x.pairsets=[];var O=v.readUshort(c,h);h+=2;for(var z=0;z<O;z++){var L=E+v.readUshort(c,h);h+=2;var k=v.readUshort(c,L);L+=2;for(var H=[],X=0;X<k;X++){var W=v.readUshort(c,L);L+=2,R!=0&&(le=t.GPOS.readValueRecord(c,L,R),L+=2*F),U!=0&&(Me=t.GPOS.readValueRecord(c,L,U),L+=2*P),H.push({gid2:W,val1:le,val2:Me})}x.pairsets.push(H)}}if(x.fmt==2){var J=v.readUshort(c,h);h+=2;var Y=v.readUshort(c,h);h+=2;var ce=v.readUshort(c,h);h+=2;var ue=v.readUshort(c,h);for(h+=2,x.classDef1=t._lctf.readClassDef(c,E+J),x.classDef2=t._lctf.readClassDef(c,E+Y),x.matrix=[],z=0;z<ce;z++){var ge=[];for(X=0;X<ue;X++){var le=null,Me=null;R!=0&&(le=t.GPOS.readValueRecord(c,h,R),h+=2*F),U!=0&&(Me=t.GPOS.readValueRecord(c,h,U),h+=2*P),ge.push({val1:le,val2:Me})}x.matrix.push(ge)}}}else{if(p==9&&x.fmt==1){var me=v.readUshort(c,h);h+=2;var Te=v.readUint(c,h);if(h+=4,m.ltype==9)m.ltype=me;else if(m.ltype!=me)throw"invalid extension substitution";return t.GPOS.subt(c,m.ltype,E+Te)}Za.debug("unsupported GPOS table LookupType",p,"format",x.fmt)}return x},t.GPOS.readValueRecord=function(c,p,h){var m=t._bin,v=[];return v.push(1&h?m.readShort(c,p):0),p+=1&h?2:0,v.push(2&h?m.readShort(c,p):0),p+=2&h?2:0,v.push(4&h?m.readShort(c,p):0),p+=4&h?2:0,v.push(8&h?m.readShort(c,p):0),p+=8&h?2:0,v},t.GSUB={},t.GSUB.parse=function(c,p,h,m){return t._lctf.parse(c,p,h,m,t.GSUB.subt)},t.GSUB.subt=function(c,p,h,m){var v=t._bin,E=h,x={};if(x.fmt=v.readUshort(c,h),h+=2,p!=1&&p!=4&&p!=5&&p!=6)return null;if(p==1||p==4||p==5&&x.fmt<=2||p==6&&x.fmt<=2){var T=v.readUshort(c,h);h+=2,x.coverage=t._lctf.readCoverage(c,E+T)}if(p==1&&x.fmt>=1&&x.fmt<=2){if(x.fmt==1)x.delta=v.readShort(c,h),h+=2;else if(x.fmt==2){var R=v.readUshort(c,h);h+=2,x.newg=v.readUshorts(c,h,R),h+=2*x.newg.length}}else if(p==4){x.vals=[],R=v.readUshort(c,h),h+=2;for(var F=0;F<R;F++){var U=v.readUshort(c,h);h+=2,x.vals.push(t.GSUB.readLigatureSet(c,E+U))}}else if(p==5&&x.fmt==2){if(x.fmt==2){var P=v.readUshort(c,h);h+=2,x.cDef=t._lctf.readClassDef(c,E+P),x.scset=[];var O=v.readUshort(c,h);for(h+=2,F=0;F<O;F++){var z=v.readUshort(c,h);h+=2,x.scset.push(z==0?null:t.GSUB.readSubClassSet(c,E+z))}}}else if(p==6&&x.fmt==3){if(x.fmt==3){for(F=0;F<3;F++){R=v.readUshort(c,h),h+=2;for(var L=[],k=0;k<R;k++)L.push(t._lctf.readCoverage(c,E+v.readUshort(c,h+2*k)));h+=2*R,F==0&&(x.backCvg=L),F==1&&(x.inptCvg=L),F==2&&(x.ahedCvg=L)}R=v.readUshort(c,h),h+=2,x.lookupRec=t.GSUB.readSubstLookupRecords(c,h,R)}}else{if(p==7&&x.fmt==1){var H=v.readUshort(c,h);h+=2;var X=v.readUint(c,h);if(h+=4,m.ltype==9)m.ltype=H;else if(m.ltype!=H)throw"invalid extension substitution";return t.GSUB.subt(c,m.ltype,E+X)}Za.debug("unsupported GSUB table LookupType",p,"format",x.fmt)}return x},t.GSUB.readSubClassSet=function(c,p){var h=t._bin.readUshort,m=p,v=[],E=h(c,p);p+=2;for(var x=0;x<E;x++){var T=h(c,p);p+=2,v.push(t.GSUB.readSubClassRule(c,m+T))}return v},t.GSUB.readSubClassRule=function(c,p){var h=t._bin.readUshort,m={},v=h(c,p),E=h(c,p+=2);p+=2,m.input=[];for(var x=0;x<v-1;x++)m.input.push(h(c,p)),p+=2;return m.substLookupRecords=t.GSUB.readSubstLookupRecords(c,p,E),m},t.GSUB.readSubstLookupRecords=function(c,p,h){for(var m=t._bin.readUshort,v=[],E=0;E<h;E++)v.push(m(c,p),m(c,p+2)),p+=4;return v},t.GSUB.readChainSubClassSet=function(c,p){var h=t._bin,m=p,v=[],E=h.readUshort(c,p);p+=2;for(var x=0;x<E;x++){var T=h.readUshort(c,p);p+=2,v.push(t.GSUB.readChainSubClassRule(c,m+T))}return v},t.GSUB.readChainSubClassRule=function(c,p){for(var h=t._bin,m={},v=["backtrack","input","lookahead"],E=0;E<v.length;E++){var x=h.readUshort(c,p);p+=2,E==1&&x--,m[v[E]]=h.readUshorts(c,p,x),p+=2*m[v[E]].length}return x=h.readUshort(c,p),p+=2,m.subst=h.readUshorts(c,p,2*x),p+=2*m.subst.length,m},t.GSUB.readLigatureSet=function(c,p){var h=t._bin,m=p,v=[],E=h.readUshort(c,p);p+=2;for(var x=0;x<E;x++){var T=h.readUshort(c,p);p+=2,v.push(t.GSUB.readLigature(c,m+T))}return v},t.GSUB.readLigature=function(c,p){var h=t._bin,m={chain:[]};m.nglyph=h.readUshort(c,p),p+=2;var v=h.readUshort(c,p);p+=2;for(var E=0;E<v-1;E++)m.chain.push(h.readUshort(c,p)),p+=2;return m},t.head={},t.head.parse=function(c,p,h){var m=t._bin,v={};return m.readFixed(c,p),p+=4,v.fontRevision=m.readFixed(c,p),p+=4,m.readUint(c,p),p+=4,m.readUint(c,p),p+=4,v.flags=m.readUshort(c,p),p+=2,v.unitsPerEm=m.readUshort(c,p),p+=2,v.created=m.readUint64(c,p),p+=8,v.modified=m.readUint64(c,p),p+=8,v.xMin=m.readShort(c,p),p+=2,v.yMin=m.readShort(c,p),p+=2,v.xMax=m.readShort(c,p),p+=2,v.yMax=m.readShort(c,p),p+=2,v.macStyle=m.readUshort(c,p),p+=2,v.lowestRecPPEM=m.readUshort(c,p),p+=2,v.fontDirectionHint=m.readShort(c,p),p+=2,v.indexToLocFormat=m.readShort(c,p),p+=2,v.glyphDataFormat=m.readShort(c,p),p+=2,v},t.hhea={},t.hhea.parse=function(c,p,h){var m=t._bin,v={};return m.readFixed(c,p),p+=4,v.ascender=m.readShort(c,p),p+=2,v.descender=m.readShort(c,p),p+=2,v.lineGap=m.readShort(c,p),p+=2,v.advanceWidthMax=m.readUshort(c,p),p+=2,v.minLeftSideBearing=m.readShort(c,p),p+=2,v.minRightSideBearing=m.readShort(c,p),p+=2,v.xMaxExtent=m.readShort(c,p),p+=2,v.caretSlopeRise=m.readShort(c,p),p+=2,v.caretSlopeRun=m.readShort(c,p),p+=2,v.caretOffset=m.readShort(c,p),p+=2,p+=8,v.metricDataFormat=m.readShort(c,p),p+=2,v.numberOfHMetrics=m.readUshort(c,p),p+=2,v},t.hmtx={},t.hmtx.parse=function(c,p,h,m){for(var v=t._bin,E={aWidth:[],lsBearing:[]},x=0,T=0,R=0;R<m.maxp.numGlyphs;R++)R<m.hhea.numberOfHMetrics&&(x=v.readUshort(c,p),p+=2,T=v.readShort(c,p),p+=2),E.aWidth.push(x),E.lsBearing.push(T);return E},t.kern={},t.kern.parse=function(c,p,h,m){var v=t._bin,E=v.readUshort(c,p);if(p+=2,E==1)return t.kern.parseV1(c,p-2,h,m);var x=v.readUshort(c,p);p+=2;for(var T={glyph1:[],rval:[]},R=0;R<x;R++){p+=2,h=v.readUshort(c,p),p+=2;var F=v.readUshort(c,p);p+=2;var U=F>>>8;if((U&=15)!=0)throw"unknown kern table format: "+U;p=t.kern.readFormat0(c,p,T)}return T},t.kern.parseV1=function(c,p,h,m){var v=t._bin;v.readFixed(c,p),p+=4;var E=v.readUint(c,p);p+=4;for(var x={glyph1:[],rval:[]},T=0;T<E;T++){v.readUint(c,p),p+=4;var R=v.readUshort(c,p);p+=2,v.readUshort(c,p),p+=2;var F=R>>>8;if((F&=15)!=0)throw"unknown kern table format: "+F;p=t.kern.readFormat0(c,p,x)}return x},t.kern.readFormat0=function(c,p,h){var m=t._bin,v=-1,E=m.readUshort(c,p);p+=2,m.readUshort(c,p),p+=2,m.readUshort(c,p),p+=2,m.readUshort(c,p),p+=2;for(var x=0;x<E;x++){var T=m.readUshort(c,p);p+=2;var R=m.readUshort(c,p);p+=2;var F=m.readShort(c,p);p+=2,T!=v&&(h.glyph1.push(T),h.rval.push({glyph2:[],vals:[]}));var U=h.rval[h.rval.length-1];U.glyph2.push(R),U.vals.push(F),v=T}return p},t.loca={},t.loca.parse=function(c,p,h,m){var v=t._bin,E=[],x=m.head.indexToLocFormat,T=m.maxp.numGlyphs+1;if(x==0)for(var R=0;R<T;R++)E.push(v.readUshort(c,p+(R<<1))<<1);if(x==1)for(R=0;R<T;R++)E.push(v.readUint(c,p+(R<<2)));return E},t.maxp={},t.maxp.parse=function(c,p,h){var m=t._bin,v={},E=m.readUint(c,p);return p+=4,v.numGlyphs=m.readUshort(c,p),p+=2,E==65536&&(v.maxPoints=m.readUshort(c,p),p+=2,v.maxContours=m.readUshort(c,p),p+=2,v.maxCompositePoints=m.readUshort(c,p),p+=2,v.maxCompositeContours=m.readUshort(c,p),p+=2,v.maxZones=m.readUshort(c,p),p+=2,v.maxTwilightPoints=m.readUshort(c,p),p+=2,v.maxStorage=m.readUshort(c,p),p+=2,v.maxFunctionDefs=m.readUshort(c,p),p+=2,v.maxInstructionDefs=m.readUshort(c,p),p+=2,v.maxStackElements=m.readUshort(c,p),p+=2,v.maxSizeOfInstructions=m.readUshort(c,p),p+=2,v.maxComponentElements=m.readUshort(c,p),p+=2,v.maxComponentDepth=m.readUshort(c,p),p+=2),v},t.name={},t.name.parse=function(c,p,h){var m=t._bin,v={};m.readUshort(c,p),p+=2;var E=m.readUshort(c,p);p+=2,m.readUshort(c,p);for(var x,T=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],R=p+=2,F=0;F<E;F++){var U=m.readUshort(c,p);p+=2;var P=m.readUshort(c,p);p+=2;var O=m.readUshort(c,p);p+=2;var z=m.readUshort(c,p);p+=2;var L=m.readUshort(c,p);p+=2;var k=m.readUshort(c,p);p+=2;var H,X=T[z],W=R+12*E+k;if(U==0)H=m.readUnicode(c,W,L/2);else if(U==3&&P==0)H=m.readUnicode(c,W,L/2);else if(P==0)H=m.readASCII(c,W,L);else if(P==1)H=m.readUnicode(c,W,L/2);else if(P==3)H=m.readUnicode(c,W,L/2);else{if(U!=1)throw"unknown encoding "+P+", platformID: "+U;H=m.readASCII(c,W,L),Za.debug("reading unknown MAC encoding "+P+" as ASCII")}var J="p"+U+","+O.toString(16);v[J]==null&&(v[J]={}),v[J][X!==void 0?X:z]=H,v[J]._lang=O}for(var Y in v)if(v[Y].postScriptName!=null&&v[Y]._lang==1033)return v[Y];for(var Y in v)if(v[Y].postScriptName!=null&&v[Y]._lang==0)return v[Y];for(var Y in v)if(v[Y].postScriptName!=null&&v[Y]._lang==3084)return v[Y];for(var Y in v)if(v[Y].postScriptName!=null)return v[Y];for(var Y in v){x=Y;break}return Za.debug("returning name table with languageID "+v[x]._lang),v[x]},t["OS/2"]={},t["OS/2"].parse=function(c,p,h){var m=t._bin.readUshort(c,p);p+=2;var v={};if(m==0)t["OS/2"].version0(c,p,v);else if(m==1)t["OS/2"].version1(c,p,v);else if(m==2||m==3||m==4)t["OS/2"].version2(c,p,v);else{if(m!=5)throw"unknown OS/2 table version: "+m;t["OS/2"].version5(c,p,v)}return v},t["OS/2"].version0=function(c,p,h){var m=t._bin;return h.xAvgCharWidth=m.readShort(c,p),p+=2,h.usWeightClass=m.readUshort(c,p),p+=2,h.usWidthClass=m.readUshort(c,p),p+=2,h.fsType=m.readUshort(c,p),p+=2,h.ySubscriptXSize=m.readShort(c,p),p+=2,h.ySubscriptYSize=m.readShort(c,p),p+=2,h.ySubscriptXOffset=m.readShort(c,p),p+=2,h.ySubscriptYOffset=m.readShort(c,p),p+=2,h.ySuperscriptXSize=m.readShort(c,p),p+=2,h.ySuperscriptYSize=m.readShort(c,p),p+=2,h.ySuperscriptXOffset=m.readShort(c,p),p+=2,h.ySuperscriptYOffset=m.readShort(c,p),p+=2,h.yStrikeoutSize=m.readShort(c,p),p+=2,h.yStrikeoutPosition=m.readShort(c,p),p+=2,h.sFamilyClass=m.readShort(c,p),p+=2,h.panose=m.readBytes(c,p,10),p+=10,h.ulUnicodeRange1=m.readUint(c,p),p+=4,h.ulUnicodeRange2=m.readUint(c,p),p+=4,h.ulUnicodeRange3=m.readUint(c,p),p+=4,h.ulUnicodeRange4=m.readUint(c,p),p+=4,h.achVendID=[m.readInt8(c,p),m.readInt8(c,p+1),m.readInt8(c,p+2),m.readInt8(c,p+3)],p+=4,h.fsSelection=m.readUshort(c,p),p+=2,h.usFirstCharIndex=m.readUshort(c,p),p+=2,h.usLastCharIndex=m.readUshort(c,p),p+=2,h.sTypoAscender=m.readShort(c,p),p+=2,h.sTypoDescender=m.readShort(c,p),p+=2,h.sTypoLineGap=m.readShort(c,p),p+=2,h.usWinAscent=m.readUshort(c,p),p+=2,h.usWinDescent=m.readUshort(c,p),p+=2},t["OS/2"].version1=function(c,p,h){var m=t._bin;return p=t["OS/2"].version0(c,p,h),h.ulCodePageRange1=m.readUint(c,p),p+=4,h.ulCodePageRange2=m.readUint(c,p),p+=4},t["OS/2"].version2=function(c,p,h){var m=t._bin;return p=t["OS/2"].version1(c,p,h),h.sxHeight=m.readShort(c,p),p+=2,h.sCapHeight=m.readShort(c,p),p+=2,h.usDefault=m.readUshort(c,p),p+=2,h.usBreak=m.readUshort(c,p),p+=2,h.usMaxContext=m.readUshort(c,p),p+=2},t["OS/2"].version5=function(c,p,h){var m=t._bin;return p=t["OS/2"].version2(c,p,h),h.usLowerOpticalPointSize=m.readUshort(c,p),p+=2,h.usUpperOpticalPointSize=m.readUshort(c,p),p+=2},t.post={},t.post.parse=function(c,p,h){var m=t._bin,v={};return v.version=m.readFixed(c,p),p+=4,v.italicAngle=m.readFixed(c,p),p+=4,v.underlinePosition=m.readShort(c,p),p+=2,v.underlineThickness=m.readShort(c,p),p+=2,v},t==null&&(t={}),t.U==null&&(t.U={}),t.U.codeToGlyph=function(c,p){var h=c.cmap,m=-1;if(h.p0e4!=null?m=h.p0e4:h.p3e1!=null?m=h.p3e1:h.p1e0!=null?m=h.p1e0:h.p0e3!=null&&(m=h.p0e3),m==-1)throw"no familiar platform and encoding!";var v=h.tables[m];if(v.format==0)return p>=v.map.length?0:v.map[p];if(v.format==4){for(var E=-1,x=0;x<v.endCount.length;x++)if(p<=v.endCount[x]){E=x;break}return E==-1||v.startCount[E]>p?0:65535&(v.idRangeOffset[E]!=0?v.glyphIdArray[p-v.startCount[E]+(v.idRangeOffset[E]>>1)-(v.idRangeOffset.length-E)]:p+v.idDelta[E])}if(v.format==12){if(p>v.groups[v.groups.length-1][1])return 0;for(x=0;x<v.groups.length;x++){var T=v.groups[x];if(T[0]<=p&&p<=T[1])return T[2]+(p-T[0])}return 0}throw"unknown cmap table format "+v.format},t.U.glyphToPath=function(c,p){var h={cmds:[],crds:[]};if(c.SVG&&c.SVG.entries[p]){var m=c.SVG.entries[p];return m==null?h:(typeof m=="string"&&(m=t.SVG.toPath(m),c.SVG.entries[p]=m),m)}if(c.CFF){var v={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:c.CFF.Private?c.CFF.Private.defaultWidthX:0,open:!1},E=c.CFF,x=c.CFF.Private;if(E.ROS){for(var T=0;E.FDSelect[T+2]<=p;)T+=2;x=E.FDArray[E.FDSelect[T+1]].Private}t.U._drawCFF(c.CFF.CharStrings[p],v,E,x,h)}else c.glyf&&t.U._drawGlyf(p,c,h);return h},t.U._drawGlyf=function(c,p,h){var m=p.glyf[c];m==null&&(m=p.glyf[c]=t.glyf._parseGlyf(p,c)),m!=null&&(m.noc>-1?t.U._simpleGlyph(m,h):t.U._compoGlyph(m,p,h))},t.U._simpleGlyph=function(c,p){for(var h=0;h<c.noc;h++){for(var m=h==0?0:c.endPts[h-1]+1,v=c.endPts[h],E=m;E<=v;E++){var x=E==m?v:E-1,T=E==v?m:E+1,R=1&c.flags[E],F=1&c.flags[x],U=1&c.flags[T],P=c.xs[E],O=c.ys[E];if(E==m)if(R){if(!F){t.U.P.moveTo(p,P,O);continue}t.U.P.moveTo(p,c.xs[x],c.ys[x])}else F?t.U.P.moveTo(p,c.xs[x],c.ys[x]):t.U.P.moveTo(p,(c.xs[x]+P)/2,(c.ys[x]+O)/2);R?F&&t.U.P.lineTo(p,P,O):U?t.U.P.qcurveTo(p,P,O,c.xs[T],c.ys[T]):t.U.P.qcurveTo(p,P,O,(P+c.xs[T])/2,(O+c.ys[T])/2)}t.U.P.closePath(p)}},t.U._compoGlyph=function(c,p,h){for(var m=0;m<c.parts.length;m++){var v={cmds:[],crds:[]},E=c.parts[m];t.U._drawGlyf(E.glyphIndex,p,v);for(var x=E.m,T=0;T<v.crds.length;T+=2){var R=v.crds[T],F=v.crds[T+1];h.crds.push(R*x.a+F*x.b+x.tx),h.crds.push(R*x.c+F*x.d+x.ty)}for(T=0;T<v.cmds.length;T++)h.cmds.push(v.cmds[T])}},t.U._getGlyphClass=function(c,p){var h=t._lctf.getInterval(p,c);return h==-1?0:p[h+2]},t.U.getPairAdjustment=function(c,p,h){var m=!1;if(c.GPOS)for(var v=c.GPOS,E=v.lookupList,x=v.featureList,T=[],R=0;R<x.length;R++){var F=x[R];if(F.tag=="kern"){m=!0;for(var U=0;U<F.tab.length;U++)if(!T[F.tab[U]]){T[F.tab[U]]=!0;for(var P=E[F.tab[U]],O=0;O<P.tabs.length;O++)if(P.tabs[O]!=null){var z,L=P.tabs[O];if((!L.coverage||(z=t._lctf.coverageIndex(L.coverage,p))!=-1)&&P.ltype!=1){if(P.ltype==2){var k=null;if(L.fmt==1){var H=L.pairsets[z];for(R=0;R<H.length;R++)H[R].gid2==h&&(k=H[R])}else if(L.fmt==2){var X=t.U._getGlyphClass(p,L.classDef1),W=t.U._getGlyphClass(h,L.classDef2);k=L.matrix[X][W]}if(k){var J=0;return k.val1&&k.val1[2]&&(J+=k.val1[2]),k.val2&&k.val2[0]&&(J+=k.val2[0]),J}}}}}}}if(c.kern&&!m){var Y=c.kern.glyph1.indexOf(p);if(Y!=-1){var ce=c.kern.rval[Y].glyph2.indexOf(h);if(ce!=-1)return c.kern.rval[Y].vals[ce]}}return 0},t.U._applySubs=function(c,p,h,m){for(var v=c.length-p-1,E=0;E<h.tabs.length;E++)if(h.tabs[E]!=null){var x,T=h.tabs[E];if(!T.coverage||(x=t._lctf.coverageIndex(T.coverage,c[p]))!=-1){if(h.ltype==1)c[p],T.fmt==1?c[p]=c[p]+T.delta:c[p]=T.newg[x];else if(h.ltype==4)for(var R=T.vals[x],F=0;F<R.length;F++){var U=R[F],P=U.chain.length;if(!(P>v)){for(var O=!0,z=0,L=0;L<P;L++){for(;c[p+z+(1+L)]==-1;)z++;U.chain[L]!=c[p+z+(1+L)]&&(O=!1)}if(O){for(c[p]=U.nglyph,L=0;L<P+z;L++)c[p+L+1]=-1;break}}}else if(h.ltype==5&&T.fmt==2)for(var k=t._lctf.getInterval(T.cDef,c[p]),H=T.cDef[k+2],X=T.scset[H],W=0;W<X.length;W++){var J=X[W],Y=J.input;if(!(Y.length>v)){for(O=!0,L=0;L<Y.length;L++){var ce=t._lctf.getInterval(T.cDef,c[p+1+L]);if(k==-1&&T.cDef[ce+2]!=Y[L]){O=!1;break}}if(O){var ue=J.substLookupRecords;for(F=0;F<ue.length;F+=2)ue[F],ue[F+1]}}}else if(h.ltype==6&&T.fmt==3){if(!t.U._glsCovered(c,T.backCvg,p-T.backCvg.length)||!t.U._glsCovered(c,T.inptCvg,p)||!t.U._glsCovered(c,T.ahedCvg,p+T.inptCvg.length))continue;var ge=T.lookupRec;for(W=0;W<ge.length;W+=2){k=ge[W];var le=m[ge[W+1]];t.U._applySubs(c,p+k,le,m)}}}}},t.U._glsCovered=function(c,p,h){for(var m=0;m<p.length;m++)if(t._lctf.coverageIndex(p[m],c[h+m])==-1)return!1;return!0},t.U.glyphsToPath=function(c,p,h){for(var m={cmds:[],crds:[]},v=0,E=0;E<p.length;E++){var x=p[E];if(x!=-1){for(var T=E<p.length-1&&p[E+1]!=-1?p[E+1]:0,R=t.U.glyphToPath(c,x),F=0;F<R.crds.length;F+=2)m.crds.push(R.crds[F]+v),m.crds.push(R.crds[F+1]);for(h&&m.cmds.push(h),F=0;F<R.cmds.length;F++)m.cmds.push(R.cmds[F]);h&&m.cmds.push("X"),v+=c.hmtx.aWidth[x],E<p.length-1&&(v+=t.U.getPairAdjustment(c,x,T))}}return m},t.U.P={},t.U.P.moveTo=function(c,p,h){c.cmds.push("M"),c.crds.push(p,h)},t.U.P.lineTo=function(c,p,h){c.cmds.push("L"),c.crds.push(p,h)},t.U.P.curveTo=function(c,p,h,m,v,E,x){c.cmds.push("C"),c.crds.push(p,h,m,v,E,x)},t.U.P.qcurveTo=function(c,p,h,m,v){c.cmds.push("Q"),c.crds.push(p,h,m,v)},t.U.P.closePath=function(c){c.cmds.push("Z")},t.U._drawCFF=function(c,p,h,m,v){for(var E=p.stack,x=p.nStems,T=p.haveWidth,R=p.width,F=p.open,U=0,P=p.x,O=p.y,z=0,L=0,k=0,H=0,X=0,W=0,J=0,Y=0,ce=0,ue=0,ge={val:0,size:0};U<c.length;){t.CFF.getCharString(c,U,ge);var le=ge.val;if(U+=ge.size,le=="o1"||le=="o18")E.length%2!=0&&!T&&(R=E.shift()+m.nominalWidthX),x+=E.length>>1,E.length=0,T=!0;else if(le=="o3"||le=="o23")E.length%2!=0&&!T&&(R=E.shift()+m.nominalWidthX),x+=E.length>>1,E.length=0,T=!0;else if(le=="o4")E.length>1&&!T&&(R=E.shift()+m.nominalWidthX,T=!0),F&&t.U.P.closePath(v),O+=E.pop(),t.U.P.moveTo(v,P,O),F=!0;else if(le=="o5")for(;E.length>0;)P+=E.shift(),O+=E.shift(),t.U.P.lineTo(v,P,O);else if(le=="o6"||le=="o7")for(var Me=E.length,me=le=="o6",Te=0;Te<Me;Te++){var Ue=E.shift();me?P+=Ue:O+=Ue,me=!me,t.U.P.lineTo(v,P,O)}else if(le=="o8"||le=="o24"){Me=E.length;for(var Re=0;Re+6<=Me;)z=P+E.shift(),L=O+E.shift(),k=z+E.shift(),H=L+E.shift(),P=k+E.shift(),O=H+E.shift(),t.U.P.curveTo(v,z,L,k,H,P,O),Re+=6;le=="o24"&&(P+=E.shift(),O+=E.shift(),t.U.P.lineTo(v,P,O))}else{if(le=="o11")break;if(le=="o1234"||le=="o1235"||le=="o1236"||le=="o1237")le=="o1234"&&(L=O,k=(z=P+E.shift())+E.shift(),ue=H=L+E.shift(),W=H,Y=O,P=(J=(X=(ce=k+E.shift())+E.shift())+E.shift())+E.shift(),t.U.P.curveTo(v,z,L,k,H,ce,ue),t.U.P.curveTo(v,X,W,J,Y,P,O)),le=="o1235"&&(z=P+E.shift(),L=O+E.shift(),k=z+E.shift(),H=L+E.shift(),ce=k+E.shift(),ue=H+E.shift(),X=ce+E.shift(),W=ue+E.shift(),J=X+E.shift(),Y=W+E.shift(),P=J+E.shift(),O=Y+E.shift(),E.shift(),t.U.P.curveTo(v,z,L,k,H,ce,ue),t.U.P.curveTo(v,X,W,J,Y,P,O)),le=="o1236"&&(z=P+E.shift(),L=O+E.shift(),k=z+E.shift(),ue=H=L+E.shift(),W=H,J=(X=(ce=k+E.shift())+E.shift())+E.shift(),Y=W+E.shift(),P=J+E.shift(),t.U.P.curveTo(v,z,L,k,H,ce,ue),t.U.P.curveTo(v,X,W,J,Y,P,O)),le=="o1237"&&(z=P+E.shift(),L=O+E.shift(),k=z+E.shift(),H=L+E.shift(),ce=k+E.shift(),ue=H+E.shift(),X=ce+E.shift(),W=ue+E.shift(),J=X+E.shift(),Y=W+E.shift(),Math.abs(J-P)>Math.abs(Y-O)?P=J+E.shift():O=Y+E.shift(),t.U.P.curveTo(v,z,L,k,H,ce,ue),t.U.P.curveTo(v,X,W,J,Y,P,O));else if(le=="o14"){if(E.length>0&&!T&&(R=E.shift()+h.nominalWidthX,T=!0),E.length==4){var Ge=E.shift(),De=E.shift(),Xe=E.shift(),Ce=E.shift(),Ee=t.CFF.glyphBySE(h,Xe),_e=t.CFF.glyphBySE(h,Ce);t.U._drawCFF(h.CharStrings[Ee],p,h,m,v),p.x=Ge,p.y=De,t.U._drawCFF(h.CharStrings[_e],p,h,m,v)}F&&(t.U.P.closePath(v),F=!1)}else if(le=="o19"||le=="o20")E.length%2!=0&&!T&&(R=E.shift()+m.nominalWidthX),x+=E.length>>1,E.length=0,T=!0,U+=x+7>>3;else if(le=="o21")E.length>2&&!T&&(R=E.shift()+m.nominalWidthX,T=!0),O+=E.pop(),P+=E.pop(),F&&t.U.P.closePath(v),t.U.P.moveTo(v,P,O),F=!0;else if(le=="o22")E.length>1&&!T&&(R=E.shift()+m.nominalWidthX,T=!0),P+=E.pop(),F&&t.U.P.closePath(v),t.U.P.moveTo(v,P,O),F=!0;else if(le=="o25"){for(;E.length>6;)P+=E.shift(),O+=E.shift(),t.U.P.lineTo(v,P,O);z=P+E.shift(),L=O+E.shift(),k=z+E.shift(),H=L+E.shift(),P=k+E.shift(),O=H+E.shift(),t.U.P.curveTo(v,z,L,k,H,P,O)}else if(le=="o26")for(E.length%2&&(P+=E.shift());E.length>0;)z=P,L=O+E.shift(),P=k=z+E.shift(),O=(H=L+E.shift())+E.shift(),t.U.P.curveTo(v,z,L,k,H,P,O);else if(le=="o27")for(E.length%2&&(O+=E.shift());E.length>0;)L=O,k=(z=P+E.shift())+E.shift(),H=L+E.shift(),P=k+E.shift(),O=H,t.U.P.curveTo(v,z,L,k,H,P,O);else if(le=="o10"||le=="o29"){var oe=le=="o10"?m:h;if(E.length==0)Za.debug("error: empty stack");else{var Ae=E.pop(),Be=oe.Subrs[Ae+oe.Bias];p.x=P,p.y=O,p.nStems=x,p.haveWidth=T,p.width=R,p.open=F,t.U._drawCFF(Be,p,h,m,v),P=p.x,O=p.y,x=p.nStems,T=p.haveWidth,R=p.width,F=p.open}}else if(le=="o30"||le=="o31"){var ve=E.length,ke=(Re=0,le=="o31");for(Re+=ve-(Me=-3&ve);Re<Me;)ke?(L=O,k=(z=P+E.shift())+E.shift(),O=(H=L+E.shift())+E.shift(),Me-Re==5?(P=k+E.shift(),Re++):P=k,ke=!1):(z=P,L=O+E.shift(),k=z+E.shift(),H=L+E.shift(),P=k+E.shift(),Me-Re==5?(O=H+E.shift(),Re++):O=H,ke=!0),t.U.P.curveTo(v,z,L,k,H,P,O),Re+=4}else{if((le+"").charAt(0)=="o")throw Za.debug("Unknown operation: "+le,c),le;E.push(le)}}}p.x=P,p.y=O,p.nStems=x,p.haveWidth=T,p.width=R,p.open=F};var r=t,l={Typr:r};return s.Typr=r,s.default=l,Object.defineProperty(s,"__esModule",{value:!0}),s}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function Z_(){return function(s){var t=Uint8Array,r=Uint16Array,l=Uint32Array,c=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),p=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),h=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),m=function(le,Me){for(var me=new r(31),Te=0;Te<31;++Te)me[Te]=Me+=1<<le[Te-1];var Ue=new l(me[30]);for(Te=1;Te<30;++Te)for(var Re=me[Te];Re<me[Te+1];++Re)Ue[Re]=Re-me[Te]<<5|Te;return[me,Ue]},v=m(c,2),E=v[0],x=v[1];E[28]=258,x[258]=28;for(var T=m(p,0)[0],R=new r(32768),F=0;F<32768;++F){var U=(43690&F)>>>1|(21845&F)<<1;U=(61680&(U=(52428&U)>>>2|(13107&U)<<2))>>>4|(3855&U)<<4,R[F]=((65280&U)>>>8|(255&U)<<8)>>>1}var P=function(le,Me,me){for(var Te=le.length,Ue=0,Re=new r(Me);Ue<Te;++Ue)++Re[le[Ue]-1];var Ge,De=new r(Me);for(Ue=0;Ue<Me;++Ue)De[Ue]=De[Ue-1]+Re[Ue-1]<<1;if(me){Ge=new r(1<<Me);var Xe=15-Me;for(Ue=0;Ue<Te;++Ue)if(le[Ue])for(var Ce=Ue<<4|le[Ue],Ee=Me-le[Ue],_e=De[le[Ue]-1]++<<Ee,oe=_e|(1<<Ee)-1;_e<=oe;++_e)Ge[R[_e]>>>Xe]=Ce}else for(Ge=new r(Te),Ue=0;Ue<Te;++Ue)le[Ue]&&(Ge[Ue]=R[De[le[Ue]-1]++]>>>15-le[Ue]);return Ge},O=new t(288);for(F=0;F<144;++F)O[F]=8;for(F=144;F<256;++F)O[F]=9;for(F=256;F<280;++F)O[F]=7;for(F=280;F<288;++F)O[F]=8;var z=new t(32);for(F=0;F<32;++F)z[F]=5;var L=P(O,9,1),k=P(z,5,1),H=function(le){for(var Me=le[0],me=1;me<le.length;++me)le[me]>Me&&(Me=le[me]);return Me},X=function(le,Me,me){var Te=Me/8|0;return(le[Te]|le[Te+1]<<8)>>(7&Me)&me},W=function(le,Me){var me=Me/8|0;return(le[me]|le[me+1]<<8|le[me+2]<<16)>>(7&Me)},J=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Y=function(le,Me,me){var Te=new Error(Me||J[le]);if(Te.code=le,Error.captureStackTrace&&Error.captureStackTrace(Te,Y),!me)throw Te;return Te},ce=function(le,Me,me){var Te=le.length;if(!Te||me&&!me.l&&Te<5)return Me||new t(0);var Ue=!Me||me,Re=!me||me.i;me||(me={}),Me||(Me=new t(3*Te));var Ge,De=function(cr){var ni=Me.length;if(cr>ni){var pi=new t(Math.max(2*ni,cr));pi.set(Me),Me=pi}},Xe=me.f||0,Ce=me.p||0,Ee=me.b||0,_e=me.l,oe=me.d,Ae=me.m,Be=me.n,ve=8*Te;do{if(!_e){me.f=Xe=X(le,Ce,1);var ke=X(le,Ce+1,3);if(Ce+=3,!ke){var vt=le[(Fn=((Ge=Ce)/8|0)+(7&Ge&&1)+4)-4]|le[Fn-3]<<8,ht=Fn+vt;if(ht>Te){Re&&Y(0);break}Ue&&De(Ee+vt),Me.set(le.subarray(Fn,ht),Ee),me.b=Ee+=vt,me.p=Ce=8*ht;continue}if(ke==1)_e=L,oe=k,Ae=9,Be=5;else if(ke==2){var dt=X(le,Ce,31)+257,$e=X(le,Ce+10,15)+4,Kt=dt+X(le,Ce+5,31)+1;Ce+=14;for(var zt=new t(Kt),Bt=new t(19),Qe=0;Qe<$e;++Qe)Bt[h[Qe]]=X(le,Ce+3*Qe,7);Ce+=3*$e;var ze=H(Bt),Ft=(1<<ze)-1,bn=P(Bt,ze,1);for(Qe=0;Qe<Kt;){var Fn,Gt=bn[X(le,Ce,Ft)];if(Ce+=15&Gt,(Fn=Gt>>>4)<16)zt[Qe++]=Fn;else{var Yn=0,hr=0;for(Fn==16?(hr=3+X(le,Ce,3),Ce+=2,Yn=zt[Qe-1]):Fn==17?(hr=3+X(le,Ce,7),Ce+=3):Fn==18&&(hr=11+X(le,Ce,127),Ce+=7);hr--;)zt[Qe++]=Yn}}var Fr=zt.subarray(0,dt),Er=zt.subarray(dt);Ae=H(Fr),Be=H(Er),_e=P(Fr,Ae,1),oe=P(Er,Be,1)}else Y(1);if(Ce>ve){Re&&Y(0);break}}Ue&&De(Ee+131072);for(var Ii=(1<<Ae)-1,xi=(1<<Be)-1,Lr=Ce;;Lr=Ce){var Qr=(Yn=_e[W(le,Ce)&Ii])>>>4;if((Ce+=15&Yn)>ve){Re&&Y(0);break}if(Yn||Y(2),Qr<256)Me[Ee++]=Qr;else{if(Qr==256){Lr=Ce,_e=null;break}var Hi=Qr-254;if(Qr>264){var To=c[Qe=Qr-257];Hi=X(le,Ce,(1<<To)-1)+E[Qe],Ce+=To}var lt=oe[W(le,Ce)&xi],xn=lt>>>4;if(lt||Y(3),Ce+=15&lt,Er=T[xn],xn>3&&(To=p[xn],Er+=W(le,Ce)&(1<<To)-1,Ce+=To),Ce>ve){Re&&Y(0);break}Ue&&De(Ee+131072);for(var Gn=Ee+Hi;Ee<Gn;Ee+=4)Me[Ee]=Me[Ee-Er],Me[Ee+1]=Me[Ee+1-Er],Me[Ee+2]=Me[Ee+2-Er],Me[Ee+3]=Me[Ee+3-Er];Ee=Gn}}me.l=_e,me.p=Lr,me.b=Ee,_e&&(Xe=1,me.m=Ae,me.d=oe,me.n=Be)}while(!Xe);return Ee==Me.length?Me:function(cr,ni,pi){(ni==null||ni<0)&&(ni=0),(pi==null||pi>cr.length)&&(pi=cr.length);var yi=new(cr instanceof r?r:cr instanceof l?l:t)(pi-ni);return yi.set(cr.subarray(ni,pi)),yi}(Me,0,Ee)},ue=new t(0),ge=typeof TextDecoder!="undefined"&&new TextDecoder;try{ge.decode(ue,{stream:!0})}catch(le){}return s.convert_streams=function(le){var Me=new DataView(le),me=0;function Te(){var dt=Me.getUint16(me);return me+=2,dt}function Ue(){var dt=Me.getUint32(me);return me+=4,dt}function Re(dt){vt.setUint16(ht,dt),ht+=2}function Ge(dt){vt.setUint32(ht,dt),ht+=4}for(var De={signature:Ue(),flavor:Ue(),length:Ue(),numTables:Te(),reserved:Te(),totalSfntSize:Ue(),majorVersion:Te(),minorVersion:Te(),metaOffset:Ue(),metaLength:Ue(),metaOrigLength:Ue(),privOffset:Ue(),privLength:Ue()},Xe=0;Math.pow(2,Xe)<=De.numTables;)Xe++;Xe--;for(var Ce=16*Math.pow(2,Xe),Ee=16*De.numTables-Ce,_e=12,oe=[],Ae=0;Ae<De.numTables;Ae++)oe.push({tag:Ue(),offset:Ue(),compLength:Ue(),origLength:Ue(),origChecksum:Ue()}),_e+=16;var Be,ve=new Uint8Array(12+16*oe.length+oe.reduce(function(dt,$e){return dt+$e.origLength+4},0)),ke=ve.buffer,vt=new DataView(ke),ht=0;return Ge(De.flavor),Re(De.numTables),Re(Ce),Re(Xe),Re(Ee),oe.forEach(function(dt){Ge(dt.tag),Ge(dt.origChecksum),Ge(_e),Ge(dt.origLength),dt.outOffset=_e,(_e+=dt.origLength)%4!=0&&(_e+=4-_e%4)}),oe.forEach(function(dt){var $e,Kt=le.slice(dt.offset,dt.offset+dt.compLength);if(dt.compLength!=dt.origLength){var zt=new Uint8Array(dt.origLength);$e=new Uint8Array(Kt,2),ce($e,zt)}else zt=new Uint8Array(Kt);ve.set(zt,dt.outOffset);var Bt=0;(_e=dt.outOffset+dt.origLength)%4!=0&&(Bt=4-_e%4),ve.set(new Uint8Array(Bt).buffer,dt.outOffset+dt.origLength),Be=_e+Bt}),ke.slice(0,Be)},Object.defineProperty(s,"__esModule",{value:!0}),s}({}).convert_streams}function q_(s,t){const r={M:2,L:2,Q:4,C:6,Z:0},l={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},c=1,p=2,h=4,m=8,v=16,E=32;let x;function T(X){if(!x){const W={R:p,L:c,D:h,C:v,U:E,T:m};x=new Map;for(let J in l){let Y=0;l[J].split(",").forEach(ce=>{let[ue,ge]=ce.split("+");ue=parseInt(ue,36),ge=ge?parseInt(ge,36):0,x.set(Y+=ue,W[J]);for(let le=ge;le--;)x.set(++Y,W[J])})}}return x.get(X)||E}const R=1,F=2,U=3,P=4,O=[null,"isol","init","fina","medi"];function z(X){const W=new Uint8Array(X.length);let J=E,Y=R,ce=-1;for(let ue=0;ue<X.length;ue++){const ge=X.codePointAt(ue);let le=T(ge)|0,Me=R;le&m||(J&(c|h|v)?le&(p|h|v)?(Me=U,(Y===R||Y===U)&&W[ce]++):le&(c|E)&&(Y===F||Y===P)&&W[ce]--:J&(p|E)&&(Y===F||Y===P)&&W[ce]--,Y=W[ue]=Me,J=le,ce=ue,ge>65535&&ue++)}return W}function L(X,W){const J=[];for(let ce=0;ce<W.length;ce++){const ue=W.codePointAt(ce);ue>65535&&ce++,J.push(s.U.codeToGlyph(X,ue))}const Y=X.GSUB;if(Y){const{lookupList:ce,featureList:ue}=Y;let ge;const le=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,Me=[];ue.forEach(me=>{if(le.test(me.tag))for(let Te=0;Te<me.tab.length;Te++){if(Me[me.tab[Te]])continue;Me[me.tab[Te]]=!0;const Ue=ce[me.tab[Te]],Re=/^(isol|init|fina|medi)$/.test(me.tag);Re&&!ge&&(ge=z(W));for(let Ge=0;Ge<J.length;Ge++)(!ge||!Re||O[ge[Ge]]===me.tag)&&s.U._applySubs(J,Ge,Ue,ce)}})}return J}function k(...X){for(let W=0;W<X.length;W++)if(typeof X[W]=="number")return X[W]}function H(X){const W=Object.create(null),J=X["OS/2"],Y=X.hhea,ce=X.head.unitsPerEm,ue=k(J&&J.sTypoAscender,Y&&Y.ascender,ce),ge={unitsPerEm:ce,ascender:ue,descender:k(J&&J.sTypoDescender,Y&&Y.descender,0),capHeight:k(J&&J.sCapHeight,ue),xHeight:k(J&&J.sxHeight,ue),lineGap:k(J&&J.sTypoLineGap,Y&&Y.lineGap),forEachGlyph(le,Me,me,Te){let Ue=0;const Re=1/ge.unitsPerEm*Me,Ge=L(X,le);let De=0,Xe=-1;return Ge.forEach((Ce,Ee)=>{if(Ce!==-1){let _e=W[Ce];if(!_e){const{cmds:oe,crds:Ae}=s.U.glyphToPath(X,Ce);let Be="",ve=0;for(let $e=0,Kt=oe.length;$e<Kt;$e++){const zt=r[oe[$e]];Be+=oe[$e];for(let Bt=1;Bt<=zt;Bt++)Be+=(Bt>1?",":"")+Ae[ve++]}let ke,vt,ht,dt;if(Ae.length){ke=vt=1/0,ht=dt=-1/0;for(let $e=0,Kt=Ae.length;$e<Kt;$e+=2){let zt=Ae[$e],Bt=Ae[$e+1];zt<ke&&(ke=zt),Bt<vt&&(vt=Bt),zt>ht&&(ht=zt),Bt>dt&&(dt=Bt)}}else ke=ht=vt=dt=0;_e=W[Ce]={index:Ce,advanceWidth:X.hmtx.aWidth[Ce],xMin:ke,yMin:vt,xMax:ht,yMax:dt,path:Be,pathCommandCount:oe.length}}Xe!==-1&&(Ue+=s.U.getPairAdjustment(X,Xe,Ce)*Re),Te.call(null,_e,Ue,De),_e.advanceWidth&&(Ue+=_e.advanceWidth*Re),me&&(Ue+=me*Me),Xe=Ce}De+=le.codePointAt(De)>65535?2:1}),Ue}};return ge}return function(W){const J=new Uint8Array(W,0,4),Y=s._bin.readASCII(J,0,4);if(Y==="wOFF")W=t(W);else if(Y==="wOF2")throw new Error("woff2 fonts not supported");return H(s.parse(W)[0])}}const $_=Ug({name:"Typr Font Parser",dependencies:[J_,Z_,q_],init(s,t,r){const l=s(),c=t();return r(l,c)}}),yh={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},Cy=new i.Color;let Sy=!1;function yd(){return(self.performance||Date).now()}function wy(s){Sy?Za.warn("configureTextBuilder called after first font request; will be ignored."):w1(yh,s)}const p0=Object.create(null);function Ty(s,t){Sy=!0,s=w1({},s);const r=yd();if(s.font=Ef(s.font||yh.defaultFontURL),s.text=""+s.text,s.sdfGlyphSize=s.sdfGlyphSize||yh.sdfGlyphSize,s.colorRanges!=null){let T={};for(let R in s.colorRanges)if(s.colorRanges.hasOwnProperty(R)){let F=s.colorRanges[R];typeof F!="number"&&(F=Cy.set(F).getHex()),T[R]=F}s.colorRanges=T}Object.freeze(s);const{textureWidth:l,sdfExponent:c}=yh,{sdfGlyphSize:p}=s,h=l/p*4;let m=p0[p];if(!m){const T=document.createElement("canvas");T.width=l,T.height=p*256/h,m=p0[p]={glyphCount:0,sdfGlyphSize:p,sdfCanvas:T,sdfTexture:new i.Texture(T,void 0,void 0,void 0,i.LinearFilter,i.LinearFilter),contextLost:!1,glyphsByFont:new Map},m.sdfTexture.generateMipmaps=!1,e3(m)}const{sdfTexture:v,sdfCanvas:E}=m;let x=m.glyphsByFont.get(s.font);x||m.glyphsByFont.set(s.font,x=new Map),Fy(s).then(T=>{const{glyphIds:R,glyphPositions:F,fontSize:U,unitsPerEm:P,timings:O}=T,z=[],L=new Float32Array(R.length*4),k=U/P;let H=0,X=0;const W=yd();R.forEach((ge,le)=>{let Me=x.get(ge);if(!Me){const{path:Re,pathBounds:Ge}=T.glyphData[ge],De=Math.max(Ge[2]-Ge[0],Ge[3]-Ge[1])/p*(yh.sdfMargin*p+.5),Xe=m.glyphCount++,Ce=[Ge[0]-De,Ge[1]-De,Ge[2]+De,Ge[3]+De];x.set(ge,Me={path:Re,atlasIndex:Xe,sdfViewBox:Ce}),z.push(Me)}const{sdfViewBox:me}=Me,Te=F[X++],Ue=F[X++];L[H++]=Te+me[0]*k,L[H++]=Ue+me[1]*k,L[H++]=Te+me[2]*k,L[H++]=Ue+me[3]*k,R[le]=Me.atlasIndex}),O.quads=(O.quads||0)+(yd()-W);const J=yd();O.sdf={};const Y=E.height,ce=Math.ceil(m.glyphCount/h),ue=Math.pow(2,Math.ceil(Math.log2(ce*p)));ue>Y&&(Za.info(`Increasing SDF texture size ${Y}->${ue}`),Y_(E,l,ue),v.dispose()),Promise.all(z.map(ge=>By(ge,m,s.gpuAccelerateSDF).then(({timing:le})=>{O.sdf[ge.atlasIndex]=le}))).then(()=>{z.length&&!m.contextLost&&(Ry(m),v.needsUpdate=!0),O.sdfTotal=yd()-J,O.total=yd()-r,t(Object.freeze({parameters:s,sdfTexture:v,sdfGlyphSize:p,sdfExponent:c,glyphBounds:L,glyphAtlasIndices:R,glyphColors:T.glyphColors,caretPositions:T.caretPositions,caretHeight:T.caretHeight,chunkedBounds:T.chunkedBounds,ascender:T.ascender,descender:T.descender,lineHeight:T.lineHeight,capHeight:T.capHeight,xHeight:T.xHeight,topBaseline:T.topBaseline,blockBounds:T.blockBounds,visibleBounds:T.visibleBounds,timings:T.timings}))})}),Promise.resolve().then(()=>{m.contextLost||xy(E)})}function By({path:s,atlasIndex:t,sdfViewBox:r},{sdfGlyphSize:l,sdfCanvas:c,contextLost:p},h){if(p)return Promise.resolve({timing:-1});const{textureWidth:m,sdfExponent:v}=yh,E=Math.max(r[2]-r[0],r[3]-r[1]),x=Math.floor(t/4),T=x%(m/l)*l,R=Math.floor(x/(m/l))*l,F=t%4;return H_(l,l,s,r,E,v,c,T,R,F,h)}function e3(s){const t=s.sdfCanvas;t.addEventListener("webglcontextlost",r=>{Za.log("Context Lost",r),r.preventDefault(),s.contextLost=!0}),t.addEventListener("webglcontextrestored",r=>{Za.log("Context Restored",r),s.contextLost=!1;const l=[];s.glyphsByFont.forEach(c=>{c.forEach(p=>{l.push(By(p,s,!0))})}),Promise.all(l).then(()=>{Ry(s),s.sdfTexture.needsUpdate=!0})})}function t3({font:s,characters:t,sdfGlyphSize:r},l){let c=Array.isArray(t)?t.join(`
`):""+t;Ty({font:s,sdfGlyphSize:r,text:c},l)}function w1(s,t){for(let r in t)t.hasOwnProperty(r)&&(s[r]=t[r]);return s}let jg;function Ef(s){return jg||(jg=typeof document=="undefined"?{}:document.createElement("a")),jg.href=s,jg.href}function Ry(s){if(typeof createImageBitmap!="function"){Za.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:t,sdfTexture:r}=s,{width:l,height:c}=t,p=s.sdfCanvas.getContext("webgl");let h=r.image.data;(!h||h.length!==l*c*4)&&(h=new Uint8Array(l*c*4),r.image={width:l,height:c,data:h},r.flipY=!1,r.isDataTexture=!0),p.readPixels(0,0,l,c,p.RGBA,p.UNSIGNED_BYTE,h)}}const Fy=Ug({name:"Typesetter",dependencies:[Ug({name:"Typesetter",dependencies:[yh,$_,j_,D_],init(s,t,r,l){const{defaultFontURL:c}=s;return r(t,l(),{defaultFontURL:c})}})],init(s){return function(t){return new Promise(r=>{s.typeset(t,r)})}},getTransferables(s){const t=[s.glyphPositions.buffer,s.glyphIds.buffer];return s.caretPositions&&t.push(s.caretPositions.buffer),s.glyphColors&&t.push(s.glyphColors.buffer),t}});function Db(){Object.keys(p0).forEach(s=>{const t=p0[s].sdfCanvas,{width:r,height:l}=t;Za.log("%c.",`
      background: url(${t.toDataURL()});
      background-size: ${r}px ${l}px;
      color: transparent;
      font-size: 0;
      line-height: ${l}px;
      padding-left: ${r}px;
    `)})}const Oy={};function n3(s){let t=Oy[s];if(!t){const r=new i.PlaneGeometry(1,1,s,s),l=r.clone(),c=r.attributes,p=l.attributes,h=new i.BufferGeometry,m=c.uv.count;for(let v=0;v<m;v++)p.position.array[v*3]*=-1,p.normal.array[v*3+2]*=-1;["position","normal","uv"].forEach(v=>{h.setAttribute(v,new i.Float32BufferAttribute([...c[v].array,...p[v].array],c[v].itemSize))}),h.setIndex([...r.index.array,...l.index.array.map(v=>v+m)]),h.translate(.5,.5,0),t=Oy[s]=h}return t}const r3="aTroikaGlyphBounds",T1="aTroikaGlyphIndex",Dy="aTroikaGlyphColor";class u0 extends i.InstancedBufferGeometry{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new i.Sphere,this.boundingBox=new i.Box3}computeBoundingSphere(){}computeBoundingBox(){}setSide(t){const r=this.getIndex().count;this.setDrawRange(t===i.BackSide?r/2:0,t===i.DoubleSide?r:r/2)}set detail(t){if(t!==this._detail){this._detail=t,(typeof t!="number"||t<1)&&(t=1);let r=n3(t);["position","normal","uv"].forEach(l=>{this.attributes[l]=r.attributes[l].clone()}),this.setIndex(r.getIndex().clone())}}get detail(){return this._detail}set curveRadius(t){t!==this._curveRadius&&(this._curveRadius=t,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(t,r,l,c,p){bf(this,r3,t,4),bf(this,T1,r,1),bf(this,Dy,p,3),this._blockBounds=l,this._chunkedBounds=c,this.instanceCount=r.length,this._updateBounds()}_updateBounds(){const t=this._blockBounds;if(t){const{curveRadius:r,boundingBox:l}=this;if(r){const{PI:c,floor:p,min:h,max:m,sin:v,cos:E}=Math,x=c/2,T=c*2,R=Math.abs(r),F=t[0]/R,U=t[2]/R,P=p((F+x)/T)!==p((U+x)/T)?-R:h(v(F)*R,v(U)*R),O=p((F-x)/T)!==p((U-x)/T)?R:m(v(F)*R,v(U)*R),z=p((F+c)/T)!==p((U+c)/T)?R*2:m(R-E(F)*R,R-E(U)*R);l.min.set(P,t[1],r<0?-z:0),l.max.set(O,t[3],r<0?0:z)}else l.min.set(t[0],t[1],0),l.max.set(t[2],t[3],0);l.getBoundingSphere(this.boundingSphere)}}applyClipRect(t){let r=this.getAttribute(T1).count,l=this._chunkedBounds;if(l)for(let c=l.length;c--;){r=l[c].end;let p=l[c].rect;if(p[1]<t.w&&p[3]>t.y&&p[0]<t.z&&p[2]>t.x)break}this.instanceCount=r}}function bf(s,t,r,l){const c=s.getAttribute(t);r?c&&c.array.length===r.length?(c.array.set(r),c.needsUpdate=!0):(s.setAttribute(t,new i.InstancedBufferAttribute(r,l)),delete s._maxInstanceCount,s.dispose()):c&&s.deleteAttribute(t)}const Ly=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaDistanceOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,d0=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,Ll=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaDistanceOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaOutlineOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,vh=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function B1(s){const t=o0(s,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new i.Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new i.Vector4(0,0,0,0)},uTroikaClipRect:{value:new i.Vector4(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new i.Vector2},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new i.Color},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new i.Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:Ly,vertexTransform:d0,fragmentDefs:Ll,fragmentColorTransform:vh,customRewriter({vertexShader:r,fragmentShader:l}){let c=/\buniform\s+vec3\s+diffuse\b/;return c.test(l)&&(l=l.replace(c,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),c.test(r)||(r=r.replace(dy,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:r,fragmentShader:l}}});return t.transparent=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}const vd=new i.MeshBasicMaterial({color:16777215,side:i.DoubleSide,transparent:!0}),Mf=8421504,_h=new i.Matrix4,Bu=new i.Vector3,_d=new i.Vector3,Ru=[],Py=new i.Vector3,xf="+x+y";function Cf(s){return Array.isArray(s)?s[0]:s}let Hg=()=>{const s=new i.Mesh(new i.PlaneGeometry(1,1),vd);return Hg=()=>s,s},R1=()=>{const s=new i.Mesh(new i.PlaneGeometry(1,1,32,1),vd);return R1=()=>s,s};const I1={type:"syncstart"},ky={type:"synccomplete"},F1=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],h0=F1.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class Wg extends i.Mesh{constructor(){const t=new u0;super(t,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=Mf,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=xf,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(t){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(t):(this._isSyncing=!0,this.dispatchEvent(I1),Ty({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF},r=>{this._isSyncing=!1,this._textRenderInfo=r,this.geometry.updateGlyphs(r.glyphBounds,r.glyphAtlasIndices,r.blockBounds,r.chunkedBounds,r.glyphColors);const l=this._queuedSyncs;l&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{l.forEach(c=>c&&c())})),this.dispatchEvent(ky),t&&t()})))}onBeforeRender(t,r,l,c,p,h){this.sync(),p.isTroikaTextMaterial&&this._prepareForRender(p),p._hadOwnSide=p.hasOwnProperty("side"),this.geometry.setSide(p._actualSide=p.side),p.side=i.FrontSide}onAfterRender(t,r,l,c,p,h){p._hadOwnSide?p.side=p._actualSide:delete p.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let t=this._derivedMaterial;const r=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=vd.clone());if((!t||t.baseMaterial!==r)&&(t=this._derivedMaterial=B1(r),r.addEventListener("dispose",function l(){r.removeEventListener("dispose",l),t.dispose()})),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let l=t._outlineMtl;return l||(l=t._outlineMtl=Object.create(t,{id:{value:t.id+.1}}),l.isTextOutlineMaterial=!0,l.depthWrite=!1,l.map=null,t.addEventListener("dispose",function c(){t.removeEventListener("dispose",c),l.dispose()})),[l,t]}else return t}set material(t){t&&t.isTroikaTextMaterial?(this._derivedMaterial=t,this._baseMaterial=t.baseMaterial):this._baseMaterial=t}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(t){this.geometry.detail=t}get curveRadius(){return this.geometry.curveRadius}set curveRadius(t){this.geometry.curveRadius=t}get customDepthMaterial(){return Cf(this.material).getDepthMaterial()}get customDistanceMaterial(){return Cf(this.material).getDistanceMaterial()}_prepareForRender(t){const r=t.isTextOutlineMaterial,l=t.uniforms,c=this.textRenderInfo;if(c){const{sdfTexture:m,blockBounds:v}=c;l.uTroikaSDFTexture.value=m,l.uTroikaSDFTextureSize.value.set(m.image.width,m.image.height),l.uTroikaSDFGlyphSize.value=c.sdfGlyphSize,l.uTroikaSDFExponent.value=c.sdfExponent,l.uTroikaTotalBounds.value.fromArray(v),l.uTroikaUseGlyphColors.value=!r&&!!c.glyphColors;let E=0,x=0,T=0,R,F,U,P=0,O=0;if(r){let{outlineWidth:L,outlineOffsetX:k,outlineOffsetY:H,outlineBlur:X,outlineOpacity:W}=this;E=this._parsePercent(L)||0,x=Math.max(0,this._parsePercent(X)||0),R=W,P=this._parsePercent(k)||0,O=this._parsePercent(H)||0}else T=Math.max(0,this._parsePercent(this.strokeWidth)||0),T&&(U=this.strokeColor,l.uTroikaStrokeColor.value.set(U==null?Mf:U),F=this.strokeOpacity,F==null&&(F=1)),R=this.fillOpacity;l.uTroikaDistanceOffset.value=E,l.uTroikaPositionOffset.value.set(P,O),l.uTroikaBlurRadius.value=x,l.uTroikaStrokeWidth.value=T,l.uTroikaStrokeOpacity.value=F,l.uTroikaFillOpacity.value=R==null?1:R,l.uTroikaCurveRadius.value=this.curveRadius||0;let z=this.clipRect;if(z&&Array.isArray(z)&&z.length===4)l.uTroikaClipRect.value.fromArray(z);else{const L=(this.fontSize||.1)*100;l.uTroikaClipRect.value.set(v[0]-L,v[1]-L,v[2]+L,v[3]+L)}this.geometry.applyClipRect(l.uTroikaClipRect.value)}l.uTroikaSDFDebug.value=!!this.debugSDF,t.polygonOffset=!!this.depthOffset,t.polygonOffsetFactor=t.polygonOffsetUnits=this.depthOffset||0;const p=r?this.outlineColor||0:this.color;if(p==null)delete t.color;else{const m=t.hasOwnProperty("color")?t.color:t.color=new i.Color;(p!==m._input||typeof p=="object")&&m.set(m._input=p)}let h=this.orientation||xf;if(h!==t._orientation){let m=l.uTroikaOrient.value;h=h.replace(/[^-+xyz]/g,"");let v=h!==xf&&h.match(/^([-+])([xyz])([-+])([xyz])$/);if(v){let[,E,x,T,R]=v;Bu.set(0,0,0)[x]=E==="-"?1:-1,_d.set(0,0,0)[R]=T==="-"?-1:1,_h.lookAt(Py,Bu.cross(_d),_d),m.setFromMatrix4(_h)}else m.identity();t._orientation=h}}_parsePercent(t){if(typeof t=="string"){let r=t.match(/^(-?[\d.]+)%$/),l=r?parseFloat(r[1]):NaN;t=(isNaN(l)?0:l/100)*this.fontSize}return t}localPositionToTextCoords(t,r=new i.Vector2){r.copy(t);const l=this.curveRadius;return l&&(r.x=Math.atan2(t.x,Math.abs(l)-Math.abs(t.z))*Math.abs(l)),r}worldPositionToTextCoords(t,r=new i.Vector2){return Bu.copy(t),this.localPositionToTextCoords(this.worldToLocal(Bu),r)}raycast(t,r){const{textRenderInfo:l,curveRadius:c}=this;if(l){const p=l.blockBounds,h=c?R1():Hg(),m=h.geometry,{position:v,uv:E}=m.attributes;for(let x=0;x<E.count;x++){let T=p[0]+E.getX(x)*(p[2]-p[0]);const R=p[1]+E.getY(x)*(p[3]-p[1]);let F=0;c&&(F=c-Math.cos(T/c)*c,T=Math.sin(T/c)*c),v.setXYZ(x,T,R,F)}m.boundingSphere=this.geometry.boundingSphere,m.boundingBox=this.geometry.boundingBox,h.matrixWorld=this.matrixWorld,h.material.side=this.material.side,Ru.length=0,h.raycast(t,Ru);for(let x=0;x<Ru.length;x++)Ru[x].object=this,r.push(Ru[x])}}copy(t){const r=this.geometry;return super.copy(t),this.geometry=r,h0.forEach(l=>{this[l]=t[l]}),this}clone(){return new this.constructor().copy(this)}}F1.forEach(s=>{const t="_private_"+s;Object.defineProperty(Wg.prototype,s,{get(){return this[t]},set(r){r!==this[t]&&(this[t]=r,this._needsSync=!0)}})});function i3(s,t,r){let l=null;const{caretHeight:c}=s,p=zy(s);let h=1/0;return p.forEach((m,v)=>{Math.abs(r-(v+c/2))<Math.abs(r-(h+c/2))&&(h=v)}),p.get(h).forEach(m=>{(!l||Math.abs(t-m.x)<Math.abs(t-l.x))&&(l=m)}),l}const O1=new WeakMap;function o3(s,t,r){let l;if(s){let c=O1.get(s);if(c&&c.start===t&&c.end===r)return c.rects;const{caretPositions:p,caretHeight:h}=s;if(r<t){const v=t;t=r,r=v}t=Math.max(t,0),r=Math.min(r,p.length+1),l=[];let m=null;for(let v=t;v<r;v++){const E=p[v*3],x=p[v*3+1],T=Math.min(E,x),R=Math.max(E,x),F=p[v*3+2];(!m||F!==m.bottom||T>m.right||R<m.left)&&(m={left:1/0,right:-1/0,bottom:F,top:F+h},l.push(m)),m.left=Math.min(T,m.left),m.right=Math.max(R,m.right)}l.sort((v,E)=>E.bottom-v.bottom||v.left-E.left);for(let v=l.length-1;v-- >0;){const E=l[v],x=l[v+1];E.bottom===x.bottom&&E.left<=x.right&&E.right>=x.left&&(x.left=Math.min(x.left,E.left),x.right=Math.max(x.right,E.right),l.splice(v,1))}O1.set(s,{start:t,end:r,rects:l})}return l}const D1=new WeakMap;function zy(s){let t=D1.get(s);if(!t){const{caretPositions:r,caretHeight:l}=s;t=new Map;for(let c=0;c<r.length;c+=3){const p=r[c+2];let h=t.get(p);h||t.set(p,h=[]),h.push({x:r[c],y:p,height:l,charIndex:c/3}),c+3>=r.length&&h.push({x:r[c+1],y:p,height:l,charIndex:c/3+1})}}return D1.set(s,t),t}var Hc=A(8139);const Gy=d.forwardRef((x,E)=>{var T=x,{sdfGlyphSize:s=64,anchorX:t="center",anchorY:r="middle",font:l,fontSize:c=1,children:p,characters:h,onSync:m}=T,v=Cn(T,["sdfGlyphSize","anchorX","anchorY","font","fontSize","children","characters","onSync"]);const R=(0,_.z)(({invalidate:O})=>O),[F]=d.useState(()=>new Wg),[U,P]=d.useMemo(()=>{const O=[];let z="";return d.Children.forEach(p,L=>{typeof L=="string"||typeof L=="number"?z+=L:O.push(L)}),[O,z]},[p]);return(0,Hc.Rq)(()=>new Promise(O=>t3({font:l,characters:h},O)),["troika-text",l,h]),d.useLayoutEffect(()=>void F.sync(()=>{R(),m&&m(F)})),d.useEffect(()=>()=>F.dispose(),[F]),d.createElement("primitive",(0,C.Z)({object:F,ref:E,font:l,text:P,anchorX:t,anchorY:r,fontSize:c,sdfGlyphSize:s},v),U)});class Sf extends i.ExtrudeGeometry{constructor(t,r={}){const R=r,{bevelEnabled:l=!1,bevelSize:c=8,bevelThickness:p=10,font:h,height:m=50,size:v=100,lineHeight:E=1,letterSpacing:x=0}=R,T=Cn(R,["bevelEnabled","bevelSize","bevelThickness","font","height","size","lineHeight","letterSpacing"]);if(h===void 0)super();else{const F=h.generateShapes(t,v,{lineHeight:E,letterSpacing:x});super(F,os(Zn({},T),{bevelEnabled:l,bevelSize:c,bevelThickness:p,depth:m}))}this.type="TextGeometry"}}var ba=A(5108);const s3=(s,t)=>{const r=s[0].index!==null,l=new Set(Object.keys(s[0].attributes)),c=new Set(Object.keys(s[0].morphAttributes)),p={},h={},m=s[0].morphTargetsRelative,v=new BufferGeometry;let E=0;if(s.forEach((x,T)=>{let R=0;if(r!==(x.index!==null))return ba.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+T+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(let F in x.attributes){if(!l.has(F))return ba.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+T+'. All geometries must have compatible attributes; make sure "'+F+'" attribute exists among all geometries, or in none of them.'),null;p[F]===void 0&&(p[F]=[]),p[F].push(x.attributes[F]),R++}if(R!==l.size)return ba.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+T+". Make sure all geometries have the same number of attributes."),null;if(m!==x.morphTargetsRelative)return ba.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+T+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(let F in x.morphAttributes){if(!c.has(F))return ba.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+T+".  .morphAttributes must be consistent throughout all geometries."),null;h[F]===void 0&&(h[F]=[]),h[F].push(x.morphAttributes[F])}if(v.userData.mergedUserData=v.userData.mergedUserData||[],v.userData.mergedUserData.push(x.userData),t){let F;if(x.index)F=x.index.count;else if(x.attributes.position!==void 0)F=x.attributes.position.count;else return ba.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+T+". The geometry must have either an index or a position attribute"),null;v.addGroup(E,F,T),E+=F}}),r){let x=0;const T=[];s.forEach(R=>{const F=R.index;for(let U=0;U<F.count;++U)T.push(F.getX(U)+x);x+=R.attributes.position.count}),v.setIndex(T)}for(let x in p){const T=f0(p[x]);if(!T)return ba.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+x+" attribute."),null;v.setAttribute(x,T)}for(let x in h){const T=h[x][0].length;if(T===0)break;v.morphAttributes=v.morphAttributes||{},v.morphAttributes[x]=[];for(let R=0;R<T;++R){const F=[];for(let P=0;P<h[x].length;++P)F.push(h[x][P][R]);const U=f0(F);if(!U)return ba.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+x+" morphAttribute."),null;v.morphAttributes[x].push(U)}}return v},f0=s=>{let t,r,l,c=0;if(s.forEach(p=>{if(t===void 0&&(t=p.array.constructor),t!==p.array.constructor)return ba.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(r===void 0&&(r=p.itemSize),r!==p.itemSize)return ba.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(l===void 0&&(l=p.normalized),l!==p.normalized)return ba.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;c+=p.array.length}),t&&r){const p=new t(c);let h=0;return s.forEach(m=>{p.set(m.array,h),h+=m.array.length}),new BufferAttribute(p,r,l)}},a3=s=>{let t,r=0,l=0;for(let E=0,x=s.length;E<x;++E){const T=s[E];if(t===void 0&&(t=T.array.constructor),t!==T.array.constructor)return ba.error("AttributeBuffers of different types cannot be interleaved"),null;r+=T.array.length,l+=T.itemSize}const c=new InterleavedBuffer(new t(r),l);let p=0;const h=[],m=["getX","getY","getZ","getW"],v=["setX","setY","setZ","setW"];for(let E=0,x=s.length;E<x;E++){const T=s[E],R=T.itemSize,F=T.count,U=new InterleavedBufferAttribute(c,R,p,T.normalized);h.push(U),p+=R;for(let P=0;P<F;P++)for(let O=0;O<R;O++){const z=getWithKey(U,v[O]),L=getWithKey(T,m[O]);z(P,L(P))}}return h};function Uy(s){let t=0;for(let l in s.attributes){const c=s.getAttribute(l);t+=c.count*c.itemSize*c.array.BYTES_PER_ELEMENT}const r=s.getIndex();return t+=r?r.count*r.itemSize*r.array.BYTES_PER_ELEMENT:0,t}function wf(s,t=1e-4){t=Math.max(t,Number.EPSILON);const r={},l=s.getIndex(),c=s.getAttribute("position"),p=l?l.count:c.count;let h=0;const m=Object.keys(s.attributes),v={},E={},x=[],T=["getX","getY","getZ","getW"];for(let P=0,O=m.length;P<O;P++){const z=m[P];v[z]=[];const L=s.morphAttributes[z];L&&(E[z]=new Array(L.length).fill(0).map(()=>[]))}const R=Math.log10(1/t),F=Math.pow(10,R);for(let P=0;P<p;P++){const O=l?l.getX(P):P;let z="";for(let L=0,k=m.length;L<k;L++){const H=m[L],X=s.getAttribute(H),W=X.itemSize;for(let J=0;J<W;J++)z+=`${~~(X[T[J]](O)*F)},`}if(z in r)x.push(r[z]);else{for(let L=0,k=m.length;L<k;L++){const H=m[L],X=s.getAttribute(H),W=s.morphAttributes[H],J=X.itemSize,Y=v[H],ce=E[H];for(let ue=0;ue<J;ue++){const ge=T[ue];if(Y.push(X[ge](O)),W)for(let le=0,Me=W.length;le<Me;le++)ce[le].push(W[le][ge](O))}}r[z]=h,x.push(h),h++}}const U=s.clone();for(let P=0,O=m.length;P<O;P++){const z=m[P],L=s.getAttribute(z),k=new L.array.constructor(v[z]),H=new i.BufferAttribute(k,L.itemSize,L.normalized);if(U.setAttribute(z,H),z in E)for(let X=0;X<E[z].length;X++){const W=s.morphAttributes[z][X],J=new W.array.constructor(E[z][X]),Y=new i.BufferAttribute(J,W.itemSize,W.normalized);U.morphAttributes[z][X]=Y}}return U.setIndex(x),U}function L1(s,t){if(t===i.TrianglesDrawMode)return ba.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),s;if(t===i.TriangleFanDrawMode||t===i.TriangleStripDrawMode){let r=s.getIndex();if(r===null){const h=[],m=s.getAttribute("position");if(m!==void 0){for(let v=0;v<m.count;v++)h.push(v);s.setIndex(h),r=s.getIndex()}else return ba.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),s}const l=r.count-2,c=[];if(r)if(t===i.TriangleFanDrawMode)for(let h=1;h<=l;h++)c.push(r.getX(0)),c.push(r.getX(h)),c.push(r.getX(h+1));else for(let h=0;h<l;h++)h%2===0?(c.push(r.getX(h)),c.push(r.getX(h+1)),c.push(r.getX(h+2))):(c.push(r.getX(h+2)),c.push(r.getX(h+1)),c.push(r.getX(h)));c.length/3!==l&&ba.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const p=s.clone();return p.setIndex(c),p.clearGroups(),p}else return ba.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),s}function Lb(s){if(s.geometry.isBufferGeometry!==!0)return ba.error("THREE.BufferGeometryUtils: Geometry is not of type BufferGeometry."),null;const t=new Vector3,r=new Vector3,l=new Vector3,c=new Vector3,p=new Vector3,h=new Vector3,m=new Vector3,v=new Vector3,E=new Vector3;function x(Xe,Ce,Ee,_e,oe,Ae,Be,ve,ke){t.fromBufferAttribute(Ee,Ae),r.fromBufferAttribute(Ee,Be),l.fromBufferAttribute(Ee,ve);const vt=Xe.morphTargetInfluences;if(Ce.morphTargets&&_e&&vt){m.set(0,0,0),v.set(0,0,0),E.set(0,0,0);for(let ht=0,dt=_e.length;ht<dt;ht++){const $e=vt[ht],Kt=_e[ht];$e!==0&&(c.fromBufferAttribute(Kt,Ae),p.fromBufferAttribute(Kt,Be),h.fromBufferAttribute(Kt,ve),oe?(m.addScaledVector(c,$e),v.addScaledVector(p,$e),E.addScaledVector(h,$e)):(m.addScaledVector(c.sub(t),$e),v.addScaledVector(p.sub(r),$e),E.addScaledVector(h.sub(l),$e)))}t.add(m),r.add(v),l.add(E)}Xe.isSkinnedMesh&&(Xe.boneTransform(Ae,t),Xe.boneTransform(Be,r),Xe.boneTransform(ve,l)),ke[Ae*3+0]=t.x,ke[Ae*3+1]=t.y,ke[Ae*3+2]=t.z,ke[Be*3+0]=r.x,ke[Be*3+1]=r.y,ke[Be*3+2]=r.z,ke[ve*3+0]=l.x,ke[ve*3+1]=l.y,ke[ve*3+2]=l.z}const T=s.geometry,R=s.material;let F,U,P;const O=T.index,z=T.attributes.position,L=T.morphAttributes.position,k=T.morphTargetsRelative,H=T.attributes.normal,X=T.morphAttributes.position,W=T.groups,J=T.drawRange;let Y,ce,ue,ge,le,Me,me,Te;const Ue=new Float32Array(z.count*z.itemSize),Re=new Float32Array(H.count*H.itemSize);if(O!==null)if(Array.isArray(R))for(Y=0,ue=W.length;Y<ue;Y++)for(le=W[Y],Me=R[le.materialIndex],me=Math.max(le.start,J.start),Te=Math.min(le.start+le.count,J.start+J.count),ce=me,ge=Te;ce<ge;ce+=3)F=O.getX(ce),U=O.getX(ce+1),P=O.getX(ce+2),x(s,Me,z,L,k,F,U,P,Ue),x(s,Me,H,X,k,F,U,P,Re);else for(me=Math.max(0,J.start),Te=Math.min(O.count,J.start+J.count),Y=me,ue=Te;Y<ue;Y+=3)F=O.getX(Y),U=O.getX(Y+1),P=O.getX(Y+2),x(s,R,z,L,k,F,U,P,Ue),x(s,R,H,X,k,F,U,P,Re);else if(z!==void 0)if(Array.isArray(R))for(Y=0,ue=W.length;Y<ue;Y++)for(le=W[Y],Me=R[le.materialIndex],me=Math.max(le.start,J.start),Te=Math.min(le.start+le.count,J.start+J.count),ce=me,ge=Te;ce<ge;ce+=3)F=ce,U=ce+1,P=ce+2,x(s,Me,z,L,k,F,U,P,Ue),x(s,Me,H,X,k,F,U,P,Re);else for(me=Math.max(0,J.start),Te=Math.min(z.count,J.start+J.count),Y=me,ue=Te;Y<ue;Y+=3)F=Y,U=Y+1,P=Y+2,x(s,R,z,L,k,F,U,P,Ue),x(s,R,H,X,k,F,U,P,Re);const Ge=new Float32BufferAttribute(Ue,3),De=new Float32BufferAttribute(Re,3);return{positionAttribute:z,normalAttribute:H,morphedPositionAttribute:Ge,morphedNormalAttribute:De}}function g0(s,t=Math.PI/3){const r=Math.cos(t),l=(1+1e-10)*100,c=[new i.Vector3,new i.Vector3,new i.Vector3],p=new i.Vector3,h=new i.Vector3,m=new i.Vector3,v=new i.Vector3;function E(P){const O=~~(P.x*l),z=~~(P.y*l),L=~~(P.z*l);return`${O},${z},${L}`}const x=s.toNonIndexed(),T=x.attributes.position,R={};for(let P=0,O=T.count/3;P<O;P++){const z=3*P,L=c[0].fromBufferAttribute(T,z+0),k=c[1].fromBufferAttribute(T,z+1),H=c[2].fromBufferAttribute(T,z+2);p.subVectors(H,k),h.subVectors(L,k);const X=new i.Vector3().crossVectors(p,h).normalize();for(let W=0;W<3;W++){const J=c[W],Y=E(J);Y in R||(R[Y]=[]),R[Y].push(X)}}const F=new Float32Array(T.count*3),U=new i.BufferAttribute(F,3,!1);for(let P=0,O=T.count/3;P<O;P++){const z=3*P,L=c[0].fromBufferAttribute(T,z+0),k=c[1].fromBufferAttribute(T,z+1),H=c[2].fromBufferAttribute(T,z+2);p.subVectors(H,k),h.subVectors(L,k),m.crossVectors(p,h).normalize();for(let X=0;X<3;X++){const W=c[X],J=E(W),Y=R[J];v.set(0,0,0);for(let ce=0,ue=Y.length;ce<ue;ce++){const ge=Y[ce];m.dot(ge)>r&&v.add(ge)}v.normalize(),U.setXYZ(z+X,v.x,v.y,v.z)}}return x.setAttribute("normal",U),x}var Tf=A(5108),Bf=Object.defineProperty,Ny=(s,t,r)=>t in s?Bf(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,Rf=(s,t,r)=>(Ny(s,typeof t!="symbol"?t+"":t,r),r);class jy extends i.Loader{constructor(t){super(t)}load(t,r,l,c){const p=new i.FileLoader(this.manager);p.setPath(this.path),p.setRequestHeader(this.requestHeader),p.setWithCredentials(this.withCredentials),p.load(t,h=>{if(typeof h!="string")throw new Error("unsupported data type");const m=JSON.parse(h),v=this.parse(m);r&&r(v)},l,c)}loadAsync(t,r){return super.loadAsync(t,r)}parse(t){return new P1(t)}}class P1{constructor(t){Rf(this,"data"),this.data=t}generateShapes(t,r=100,l){const c=[],p=Zn({letterSpacing:0,lineHeight:1},l),h=Vg(t,r,this.data,p);for(let m=0,v=h.length;m<v;m++)Array.prototype.push.apply(c,h[m].toShapes(!1));return c}}Rf(P1,"isFont"),Rf(P1,"type");function Vg(s,t,r,l){const c=Array.from(s),p=t/r.resolution,h=(r.boundingBox.yMax-r.boundingBox.yMin+r.underlineThickness)*p,m=[];let v=0,E=0;for(let x=0;x<c.length;x++){const T=c[x];if(T===`
`)v=0,E-=h*l.lineHeight;else{const R=Qg(T,p,v,E,r);R&&(v+=R.offsetX+l.letterSpacing,m.push(R.path))}}return m}function Qg(s,t,r,l,c){const p=c.glyphs[s]||c.glyphs["?"];if(!p){Tf.error('THREE.Font: character "'+s+'" does not exists in font family '+c.familyName+".");return}const h=new i.ShapePath;let m,v,E,x,T,R,F,U;if(p.o){const P=p._cachedOutline||(p._cachedOutline=p.o.split(" "));for(let O=0,z=P.length;O<z;)switch(P[O++]){case"m":m=parseInt(P[O++])*t+r,v=parseInt(P[O++])*t+l,h.moveTo(m,v);break;case"l":m=parseInt(P[O++])*t+r,v=parseInt(P[O++])*t+l,h.lineTo(m,v);break;case"q":E=parseInt(P[O++])*t+r,x=parseInt(P[O++])*t+l,T=parseInt(P[O++])*t+r,R=parseInt(P[O++])*t+l,h.quadraticCurveTo(T,R,E,x);break;case"b":E=parseInt(P[O++])*t+r,x=parseInt(P[O++])*t+l,T=parseInt(P[O++])*t+r,R=parseInt(P[O++])*t+l,F=parseInt(P[O++])*t+r,U=parseInt(P[O++])*t+l,h.bezierCurveTo(T,R,F,U,E,x);break}}return{offsetX:p.ha*t,path:h}}let m0=null;function ml(s){return fs(this,null,function*(){m0||(m0=new jy);let t=typeof s=="string"?yield(yield fetch(s)).json():s;return m0.parse(t)})}function Kg(s){return(0,Hc.Rq)(ml,[s])}Kg.preload=s=>(0,Hc.MA)(ml,[s]),Kg.clear=s=>(0,Hc.ZH)([s]);const Hy=["string","number"],Wy=s=>{let t="";const r=[];return d.Children.forEach(s,l=>{Hy.includes(typeof l)?t+=l+"":r.push(l)}),[t,...r]},A0=d.forwardRef((P,U)=>{var O=P,{font:s,letterSpacing:t=0,lineHeight:r=1,size:l=1,height:c=.2,bevelThickness:p=.1,bevelSize:h=.01,bevelEnabled:m=!1,bevelOffset:v=0,bevelSegments:E=4,curveSegments:x=8,smooth:T,children:R}=O,F=Cn(O,["font","letterSpacing","lineHeight","size","height","bevelThickness","bevelSize","bevelEnabled","bevelOffset","bevelSegments","curveSegments","smooth","children"]);d.useMemo(()=>(0,_.e)({RenamedTextGeometry:Sf}),[]);const z=d.useRef(null),L=Kg(s),k=(0,d.useMemo)(()=>({font:L,size:l,height:c,bevelThickness:p,bevelSize:h,bevelEnabled:m,bevelSegments:E,bevelOffset:v,curveSegments:x,letterSpacing:t,lineHeight:r}),[L,l,c,p,h,m,E,v,x,t,r]),[H,...X]=(0,d.useMemo)(()=>Wy(R),[R]),W=d.useMemo(()=>[H,k],[H,k]);return d.useLayoutEffect(()=>{T&&(z.current.geometry=wf(z.current.geometry,T),z.current.geometry.computeVertexNormals())},[W,T]),d.useImperativeHandle(U,()=>z.current,[]),d.createElement("mesh",(0,C.Z)({},F,{ref:z}),d.createElement("renamedTextGeometry",{args:W}),X)}),Xg={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 texel = texture2D( tDiffuse, vUv );","	gl_FragColor = opacity * texel;","}"].join(`
`)};var Ed=A(5108),Vy=Object.defineProperty,Qy=(s,t,r)=>t in s?Vy(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,Al=(s,t,r)=>(Qy(s,typeof t!="symbol"?t+"":t,r),r);class Yg{constructor(){Al(this,"enabled",!0),Al(this,"needsSwap",!0),Al(this,"clear",!1),Al(this,"renderToScreen",!1)}setSize(t,r){}render(t,r,l,c,p){Ed.error("THREE.Pass: .render() must be implemented in derived pass.")}}class up{constructor(t){Al(this,"camera",new i.OrthographicCamera(-1,1,1,-1,0,1)),Al(this,"geometry",new i.PlaneGeometry(2,2)),Al(this,"mesh"),this.mesh=new i.Mesh(this.geometry,t)}get material(){return this.mesh.material}set material(t){this.mesh.material=t}dispose(){this.mesh.geometry.dispose()}render(t){t.render(this.mesh,this.camera)}}var Ky=Object.defineProperty,k1=(s,t,r)=>t in s?Ky(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,Eh=(s,t,r)=>(k1(s,typeof t!="symbol"?t+"":t,r),r);class If extends Yg{constructor(t,r="tDiffuse"){super(),Eh(this,"textureID"),Eh(this,"uniforms"),Eh(this,"material"),Eh(this,"fsQuad"),this.textureID=r,t instanceof i.ShaderMaterial?(this.uniforms=t.uniforms,this.material=t):(this.uniforms=i.UniformsUtils.clone(t.uniforms),this.material=new i.ShaderMaterial({defines:Object.assign({},t.defines),uniforms:this.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader})),this.fsQuad=new up(this.material)}render(t,r,l){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=l.texture),this.fsQuad.material=this.material,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(r),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),this.fsQuad.render(t))}}var Xy=Object.defineProperty,Yy=(s,t,r)=>t in s?Xy(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,z1=(s,t,r)=>(Yy(s,typeof t!="symbol"?t+"":t,r),r);class Jy extends Yg{constructor(t,r){super(),z1(this,"scene"),z1(this,"camera"),z1(this,"inverse"),this.scene=t,this.camera=r,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(t,r,l){const c=t.getContext(),p=t.state;p.buffers.color.setMask(!1),p.buffers.depth.setMask(!1),p.buffers.color.setLocked(!0),p.buffers.depth.setLocked(!0);let h,m;this.inverse?(h=0,m=1):(h=1,m=0),p.buffers.stencil.setTest(!0),p.buffers.stencil.setOp(c.REPLACE,c.REPLACE,c.REPLACE),p.buffers.stencil.setFunc(c.ALWAYS,h,4294967295),p.buffers.stencil.setClear(m),p.buffers.stencil.setLocked(!0),t.setRenderTarget(l),this.clear&&t.clear(),t.render(this.scene,this.camera),t.setRenderTarget(r),this.clear&&t.clear(),t.render(this.scene,this.camera),p.buffers.color.setLocked(!1),p.buffers.depth.setLocked(!1),p.buffers.stencil.setLocked(!1),p.buffers.stencil.setFunc(c.EQUAL,1,4294967295),p.buffers.stencil.setOp(c.KEEP,c.KEEP,c.KEEP),p.buffers.stencil.setLocked(!0)}}class G1 extends Yg{constructor(){super(),this.needsSwap=!1}render(t){t.state.buffers.stencil.setLocked(!1),t.state.buffers.stencil.setTest(!1)}}var Zy=A(5108),l3=Object.defineProperty,dp=(s,t,r)=>t in s?l3(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,Pl=(s,t,r)=>(dp(s,typeof t!="symbol"?t+"":t,r),r);class qy{constructor(t,r){if(Pl(this,"renderer"),Pl(this,"_pixelRatio"),Pl(this,"_width"),Pl(this,"_height"),Pl(this,"renderTarget1"),Pl(this,"renderTarget2"),Pl(this,"writeBuffer"),Pl(this,"readBuffer"),Pl(this,"renderToScreen"),Pl(this,"passes",[]),Pl(this,"copyPass"),Pl(this,"clock"),this.renderer=t,r===void 0){const l={minFilter:i.LinearFilter,magFilter:i.LinearFilter,format:i.RGBAFormat},c=t.getSize(new i.Vector2);this._pixelRatio=t.getPixelRatio(),this._width=c.width,this._height=c.height,r=new i.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,l),r.texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=r.width,this._height=r.height;this.renderTarget1=r,this.renderTarget2=r.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,Xg===void 0&&Zy.error("THREE.EffectComposer relies on CopyShader"),If===void 0&&Zy.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new If(Xg),this.clock=new i.Clock}swapBuffers(){const t=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=t}addPass(t){this.passes.push(t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(t,r){this.passes.splice(r,0,t),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(t){const r=this.passes.indexOf(t);r!==-1&&this.passes.splice(r,1)}isLastEnabledPass(t){for(let r=t+1;r<this.passes.length;r++)if(this.passes[r].enabled)return!1;return!0}render(t){t===void 0&&(t=this.clock.getDelta());const r=this.renderer.getRenderTarget();let l=!1;const c=this.passes.length;for(let p=0;p<c;p++){const h=this.passes[p];if(h.enabled!==!1){if(h.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(p),h.render(this.renderer,this.writeBuffer,this.readBuffer,t,l),h.needsSwap){if(l){const m=this.renderer.getContext(),v=this.renderer.state.buffers.stencil;v.setFunc(m.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,t),v.setFunc(m.EQUAL,1,4294967295)}this.swapBuffers()}Jy!==void 0&&(h instanceof Jy?l=!0:h instanceof G1&&(l=!1))}}this.renderer.setRenderTarget(r)}reset(t){if(t===void 0){const r=this.renderer.getSize(new i.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=r.width,this._height=r.height,t=this.renderTarget1.clone(),t.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=t,this.renderTarget2=t.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(t,r){this._width=t,this._height=r;const l=this._width*this._pixelRatio,c=this._height*this._pixelRatio;this.renderTarget1.setSize(l,c),this.renderTarget2.setSize(l,c);for(let p=0;p<this.passes.length;p++)this.passes[p].setSize(l,c)}setPixelRatio(t){this._pixelRatio=t,this.setSize(this._width,this._height)}}var U1=Object.defineProperty,y0=(s,t,r)=>t in s?U1(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,Iu=(s,t,r)=>(y0(s,typeof t!="symbol"?t+"":t,r),r);class N1 extends Yg{constructor(t,r,l,c,p=0){super(),Iu(this,"scene"),Iu(this,"camera"),Iu(this,"overrideMaterial"),Iu(this,"clearColor"),Iu(this,"clearAlpha"),Iu(this,"clearDepth",!1),Iu(this,"_oldClearColor",new i.Color),this.scene=t,this.camera=r,this.overrideMaterial=l,this.clearColor=c,this.clearAlpha=p,this.clear=!0,this.needsSwap=!1}render(t,r,l){let c=t.autoClear;t.autoClear=!1;let p,h=null;this.overrideMaterial!==void 0&&(h=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(t.getClearColor(this._oldClearColor),p=t.getClearAlpha(),t.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&t.clearDepth(),t.setRenderTarget(this.renderToScreen?null:l),this.clear&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),t.render(this.scene,this.camera),this.clearColor&&t.setClearColor(this._oldClearColor,p),this.overrideMaterial!==void 0&&(this.scene.overrideMaterial=h),t.autoClear=c}}const j1={uniforms:{tDiffuse:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","	vUv = uv;","	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join(`
`),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","	vec4 tex = texture2D( tDiffuse, vUv );","	gl_FragColor = LinearTosRGB( tex );","}"].join(`
`)},$y=()=>{try{var s=document.createElement("canvas");return!!(window.WebGL2RenderingContext&&s.getContext("webgl2"))}catch(t){return!1}},ev=d.forwardRef((F,R)=>{var U=F,{children:s,multisamping:t=8,renderIndex:r=1,disableRender:l,disableGamma:c,disableRenderPass:p,depthBuffer:h=!0,stencilBuffer:m=!1,anisotropy:v=1,encoding:E,type:x}=U,T=Cn(U,["children","multisamping","renderIndex","disableRender","disableGamma","disableRenderPass","depthBuffer","stencilBuffer","anisotropy","encoding","type"]);d.useMemo(()=>(0,_.e)({EffectComposer:qy,RenderPass:N1,ShaderPass:If}),[]);const P=d.useRef(),{scene:O,camera:z,gl:L,size:k,viewport:H}=(0,_.z)(),[X]=d.useState(()=>{const J=new i.WebGLRenderTarget(k.width,k.height,{type:x||i.HalfFloatType,format:i.RGBAFormat,depthBuffer:h,stencilBuffer:m,anisotropy:v});return x===i.UnsignedByteType&&E!=null&&("colorSpace"in J?J.texture.colorSpace=E:J.texture.encoding=E),J.samples=t,J});d.useEffect(()=>{var J,Y;(J=P.current)==null||J.setSize(k.width,k.height),(Y=P.current)==null||Y.setPixelRatio(H.dpr)},[L,k,H.dpr]),(0,_.A)(()=>{var J;l||(J=P.current)==null||J.render()},r);const W=[];return p||W.push(d.createElement("renderPass",{key:"renderpass",attach:`passes-${W.length}`,args:[O,z]})),c||W.push(d.createElement("shaderPass",{attach:`passes-${W.length}`,key:"gammapass",args:[j1]})),d.Children.forEach(s,J=>{J&&W.push(d.cloneElement(J,{key:W.length,attach:`passes-${W.length}`}))}),d.createElement("effectComposer",(0,C.Z)({ref:mt([R,P]),args:[L,X]},T),W)});function c3(c){var p=c,{stops:s,colors:t,size:r=1024}=p,l=Cn(p,["stops","colors","size"]);const h=d.useMemo(()=>{const m=document.createElement("canvas"),v=m.getContext("2d");m.width=16,m.height=r;const E=v.createLinearGradient(0,0,0,r);let x=s.length;for(;x--;)E.addColorStop(s[x],t[x]);return v.fillStyle=E,v.fillRect(0,0,16,r),m},[s]);return d.createElement("canvasTexture",(0,C.Z)({args:[h],attach:"map"},l))}function hp(s,t,r,l){const c=class extends i.ShaderMaterial{constructor(h={}){const m=Object.entries(s);super({uniforms:m.reduce((v,[E,x])=>{const T=i.UniformsUtils.clone({[E]:{value:x}});return Zn(Zn({},v),T)},{}),vertexShader:t,fragmentShader:r}),this.key="",m.forEach(([v])=>Object.defineProperty(this,v,{get:()=>this.uniforms[v].value,set:E=>this.uniforms[v].value=E})),Object.assign(this,h),l&&l(this)}};return c.key=i.MathUtils.generateUUID(),c}const Jg=s=>s===Object(s)&&!Array.isArray(s)&&typeof s!="function";function fp(s,t){const r=(0,_.z)(c=>c.gl),l=(0,_.D)(i.TextureLoader,Jg(s)?Object.values(s):s);if((0,d.useLayoutEffect)(()=>{t==null||t(l)},[t]),(0,d.useEffect)(()=>{(Array.isArray(l)?l:[l]).forEach(r.initTexture)},[r,l]),Jg(s)){const c=Object.keys(s),p={};return c.forEach(h=>Object.assign(p,{[h]:l[c.indexOf(h)]})),p}else return l}fp.preload=s=>_.D.preload(i.TextureLoader,s),fp.clear=s=>_.D.clear(i.TextureLoader,s);const p3=hp({color:new i.Color("white"),scale:[1,1],imageBounds:[1,1],map:null,zoom:1,grayscale:0,opacity:1},`
  varying vec2 vUv;
  void main() {
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
    vUv = uv;
  }
`,`
  // mostly from https://gist.github.com/statico/df64c5d167362ecf7b34fca0b1459a44
  varying vec2 vUv;
  uniform vec2 scale;
  uniform vec2 imageBounds;
  uniform vec3 color;
  uniform sampler2D map;
  uniform float zoom;
  uniform float grayscale;
  uniform float opacity;
  const vec3 luma = vec3(.299, 0.587, 0.114);
  vec4 toGrayscale(vec4 color, float intensity) {
    return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);
  }
  vec2 aspect(vec2 size) {
    return size / min(size.x, size.y);
  }
  void main() {
    vec2 s = aspect(scale);
    vec2 i = aspect(imageBounds);
    float rs = s.x / s.y;
    float ri = i.x / i.y;
    vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);
    vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;
    vec2 uv = vUv * s / new + offset;
    vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);
    gl_FragColor = toGrayscale(texture2D(map, zUv) * vec4(color, opacity), grayscale);
    
    #include <tonemapping_fragment>
    #include <encodings_fragment>
  }
`),tv=d.forwardRef((R,T)=>{var F=R,{children:s,color:t,segments:r=1,scale:l=1,zoom:c=1,grayscale:p=0,opacity:h=1,texture:m,toneMapped:v,transparent:E}=F,x=Cn(F,["children","color","segments","scale","zoom","grayscale","opacity","texture","toneMapped","transparent"]);(0,_.e)({ImageMaterial:p3});const U=Array.isArray(l)?[l[0],l[1]]:[l,l],P=[m.image.width,m.image.height];return d.createElement("mesh",(0,C.Z)({ref:T,scale:Array.isArray(l)?[...l,1]:l},x),d.createElement("planeGeometry",{args:[1,1,r,r]}),d.createElement("imageMaterial",{color:t,map:m,zoom:c,grayscale:p,opacity:h,scale:U,imageBounds:P,toneMapped:v,transparent:E}),s)}),u3=d.forwardRef((l,r)=>{var c=l,{url:s}=c,t=Cn(c,["url"]);const p=fp(s);return d.createElement(tv,(0,C.Z)({},t,{texture:p,ref:r}))}),d3=d.forwardRef((l,r)=>{var c=l,{url:s}=c,t=Cn(c,["url"]);return d.createElement(tv,(0,C.Z)({},t,{ref:r}))}),Zg=d.forwardRef((s,t)=>{if(s.url)return d.createElement(u3,(0,C.Z)({},s,{ref:t}));if(s.texture)return d.createElement(d3,(0,C.Z)({},s,{ref:t}));throw new Error("<Image /> requires a url or texture")}),v0=d.forwardRef((m,h)=>{var v=m,{userData:s,children:t,geometry:r,threshold:l=15,color:c="black"}=v,p=Cn(v,["userData","children","geometry","threshold","color"]);const E=d.useRef(null);return d.useLayoutEffect(()=>{const x=E.current.parent;if(x){const T=r||x.geometry;(T!==E.current.userData.currentGeom||l!==E.current.userData.currentThreshold)&&(E.current.userData.currentGeom=T,E.current.userData.currentThreshold=l,E.current.geometry=new i.EdgesGeometry(T,l))}}),d.useImperativeHandle(h,()=>E.current),d.createElement("lineSegments",(0,C.Z)({ref:E,raycast:()=>null},p),t||d.createElement("lineBasicMaterial",{color:c}))});var nv=Object.defineProperty,_0=(s,t,r)=>t in s?nv(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,Co=(s,t,r)=>(_0(s,typeof t!="symbol"?t+"":t,r),r);function qg(s,t,r,l,c){let p;if(s=s.subarray||s.slice?s:s.buffer,r=r.subarray||r.slice?r:r.buffer,s=t?s.subarray?s.subarray(t,c&&t+c):s.slice(t,c&&t+c):s,r.set)r.set(s,l);else for(p=0;p<s.length;p++)r[p+l]=s[p];return r}function H1(s){return s instanceof Float32Array?s:s instanceof i.BufferGeometry?s.getAttribute("position").array:s.map(t=>{const r=Array.isArray(t);return t instanceof i.Vector3?[t.x,t.y,t.z]:t instanceof i.Vector2?[t.x,t.y,0]:r&&t.length===3?[t[0],t[1],t[2]]:r&&t.length===2?[t[0],t[1],0]:t}).flat()}class W1 extends i.BufferGeometry{constructor(){super(),Co(this,"type","MeshLine"),Co(this,"isMeshLine",!0),Co(this,"positions",[]),Co(this,"previous",[]),Co(this,"next",[]),Co(this,"side",[]),Co(this,"width",[]),Co(this,"indices_array",[]),Co(this,"uvs",[]),Co(this,"counters",[]),Co(this,"widthCallback",null),Co(this,"_attributes"),Co(this,"_points",[]),Co(this,"points"),Co(this,"matrixWorld",new i.Matrix4),Object.defineProperties(this,{points:{enumerable:!0,get(){return this._points},set(t){this.setPoints(t,this.widthCallback)}}})}setMatrixWorld(t){this.matrixWorld=t}setPoints(t,r){if(t=H1(t),this._points=t,this.widthCallback=r!=null?r:null,this.positions=[],this.counters=[],t.length&&t[0]instanceof i.Vector3)for(let l=0;l<t.length;l++){const c=t[l],p=l/(t.length-1);this.positions.push(c.x,c.y,c.z),this.positions.push(c.x,c.y,c.z),this.counters.push(p),this.counters.push(p)}else for(let l=0;l<t.length;l+=3){const c=l/(t.length-1);this.positions.push(t[l],t[l+1],t[l+2]),this.positions.push(t[l],t[l+1],t[l+2]),this.counters.push(c),this.counters.push(c)}this.process()}compareV3(t,r){const l=t*6,c=r*6;return this.positions[l]===this.positions[c]&&this.positions[l+1]===this.positions[c+1]&&this.positions[l+2]===this.positions[c+2]}copyV3(t){const r=t*6;return[this.positions[r],this.positions[r+1],this.positions[r+2]]}process(){const t=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[];let r,l;this.compareV3(0,t-1)?l=this.copyV3(t-2):l=this.copyV3(0),this.previous.push(l[0],l[1],l[2]),this.previous.push(l[0],l[1],l[2]);for(let c=0;c<t;c++){if(this.side.push(1),this.side.push(-1),this.widthCallback?r=this.widthCallback(c/(t-1)):r=1,this.width.push(r),this.width.push(r),this.uvs.push(c/(t-1),0),this.uvs.push(c/(t-1),1),c<t-1){l=this.copyV3(c),this.previous.push(l[0],l[1],l[2]),this.previous.push(l[0],l[1],l[2]);const p=c*2;this.indices_array.push(p,p+1,p+2),this.indices_array.push(p+2,p+1,p+3)}c>0&&(l=this.copyV3(c),this.next.push(l[0],l[1],l[2]),this.next.push(l[0],l[1],l[2]))}this.compareV3(t-1,0)?l=this.copyV3(1):l=this.copyV3(t-1),this.next.push(l[0],l[1],l[2]),this.next.push(l[0],l[1],l[2]),!this._attributes||this._attributes.position.count!==this.positions.length?this._attributes={position:new i.BufferAttribute(new Float32Array(this.positions),3),previous:new i.BufferAttribute(new Float32Array(this.previous),3),next:new i.BufferAttribute(new Float32Array(this.next),3),side:new i.BufferAttribute(new Float32Array(this.side),1),width:new i.BufferAttribute(new Float32Array(this.width),1),uv:new i.BufferAttribute(new Float32Array(this.uvs),2),index:new i.BufferAttribute(new Uint16Array(this.indices_array),1),counters:new i.BufferAttribute(new Float32Array(this.counters),1)}:(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()}advance({x:t,y:r,z:l}){const c=this._attributes.position.array,p=this._attributes.previous.array,h=this._attributes.next.array,m=c.length;qg(c,0,p,0,m),qg(c,6,c,0,m-6),c[m-6]=t,c[m-5]=r,c[m-4]=l,c[m-3]=t,c[m-2]=r,c[m-1]=l,qg(c,6,h,0,m-6),h[m-6]=t,h[m-5]=r,h[m-4]=l,h[m-3]=t,h[m-2]=r,h[m-1]=l,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0}}const V1=`
  #include <common>
  #include <logdepthbuf_pars_vertex>
  #include <fog_pars_vertex>

  attribute vec3 previous;
  attribute vec3 next;
  attribute float side;
  attribute float width;
  attribute float counters;
  
  uniform vec2 resolution;
  uniform float lineWidth;
  uniform vec3 color;
  uniform float opacity;
  uniform float sizeAttenuation;
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  vec2 fix(vec4 i, float aspect) {
    vec2 res = i.xy / i.w;
    res.x *= aspect;
  	vCounters = counters;
    return res;
  }
  
  void main() {
    float aspect = resolution.x / resolution.y;
    vColor = vec4(color, opacity);
    vUV = uv;
  
    mat4 m = projectionMatrix * modelViewMatrix;
    vec4 finalPosition = m * vec4(position, 1.0);
    vec4 prevPos = m * vec4(previous, 1.0);
    vec4 nextPos = m * vec4(next, 1.0);
  
    vec2 currentP = fix(finalPosition, aspect);
    vec2 prevP = fix(prevPos, aspect);
    vec2 nextP = fix(nextPos, aspect);
  
    float w = lineWidth * width;
  
    vec2 dir;
    if (nextP == currentP) dir = normalize(currentP - prevP);
    else if (prevP == currentP) dir = normalize(nextP - currentP);
    else {
      vec2 dir1 = normalize(currentP - prevP);
      vec2 dir2 = normalize(nextP - currentP);
      dir = normalize(dir1 + dir2);
  
      vec2 perp = vec2(-dir1.y, dir1.x);
      vec2 miter = vec2(-dir.y, dir.x);
      //w = clamp(w / dot(miter, perp), 0., 4. * lineWidth * width);
    }
  
    //vec2 normal = (cross(vec3(dir, 0.), vec3(0., 0., 1.))).xy;
    vec4 normal = vec4(-dir.y, dir.x, 0., 1.);
    normal.xy *= .5 * w;
    //normal *= projectionMatrix;
    if (sizeAttenuation == 0.) {
      normal.xy *= finalPosition.w;
      normal.xy /= (vec4(resolution, 0., 1.) * projectionMatrix).xy;
    }
  
    finalPosition.xy += normal.xy * side;
    gl_Position = finalPosition;
    #include <logdepthbuf_vertex>
    #include <fog_vertex>
    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
    #include <fog_vertex>
  }
`,rv=`
  #include <fog_pars_fragment>
  #include <logdepthbuf_pars_fragment>
  
  uniform sampler2D map;
  uniform sampler2D alphaMap;
  uniform float useMap;
  uniform float useAlphaMap;
  uniform float useDash;
  uniform float dashArray;
  uniform float dashOffset;
  uniform float dashRatio;
  uniform float visibility;
  uniform float alphaTest;
  uniform vec2 repeat;
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  void main() {
    #include <logdepthbuf_fragment>
    vec4 c = vColor;
    if (useMap == 1.) c *= texture2D(map, vUV * repeat);
    if (useAlphaMap == 1.) c.a *= texture2D(alphaMap, vUV * repeat).a;
    if (c.a < alphaTest) discard;
    if (useDash == 1.) {
      c.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));
    }
    gl_FragColor = c;
    gl_FragColor.a *= step(vCounters, visibility);
    #include <fog_fragment>
    #include <tonemapping_fragment>
    #include <encodings_fragment>
  }
`;class $g extends i.ShaderMaterial{constructor(t){super({uniforms:os(Zn({},i.UniformsLib.fog),{lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new i.Color(16777215)},opacity:{value:1},resolution:{value:new i.Vector2(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new i.Vector2(1,1)}}),vertexShader:V1,fragmentShader:rv}),Co(this,"lineWidth"),Co(this,"map"),Co(this,"useMap"),Co(this,"alphaMap"),Co(this,"useAlphaMap"),Co(this,"color"),Co(this,"resolution"),Co(this,"sizeAttenuation"),Co(this,"dashArray"),Co(this,"dashOffset"),Co(this,"dashRatio"),Co(this,"useDash"),Co(this,"visibility"),Co(this,"repeat"),this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get(){return this.uniforms.lineWidth.value},set(r){this.uniforms.lineWidth.value=r}},map:{enumerable:!0,get(){return this.uniforms.map.value},set(r){this.uniforms.map.value=r}},useMap:{enumerable:!0,get(){return this.uniforms.useMap.value},set(r){this.uniforms.useMap.value=r}},alphaMap:{enumerable:!0,get(){return this.uniforms.alphaMap.value},set(r){this.uniforms.alphaMap.value=r}},useAlphaMap:{enumerable:!0,get(){return this.uniforms.useAlphaMap.value},set(r){this.uniforms.useAlphaMap.value=r}},color:{enumerable:!0,get(){return this.uniforms.color.value},set(r){this.uniforms.color.value=r}},opacity:{enumerable:!0,get(){return this.uniforms.opacity.value},set(r){this.uniforms.opacity.value=r}},resolution:{enumerable:!0,get(){return this.uniforms.resolution.value},set(r){this.uniforms.resolution.value.copy(r)}},sizeAttenuation:{enumerable:!0,get(){return this.uniforms.sizeAttenuation.value},set(r){this.uniforms.sizeAttenuation.value=r}},dashArray:{enumerable:!0,get(){return this.uniforms.dashArray.value},set(r){this.uniforms.dashArray.value=r,this.useDash=r!==0?1:0}},dashOffset:{enumerable:!0,get(){return this.uniforms.dashOffset.value},set(r){this.uniforms.dashOffset.value=r}},dashRatio:{enumerable:!0,get(){return this.uniforms.dashRatio.value},set(r){this.uniforms.dashRatio.value=r}},useDash:{enumerable:!0,get(){return this.uniforms.useDash.value},set(r){this.uniforms.useDash.value=r}},visibility:{enumerable:!0,get(){return this.uniforms.visibility.value},set(r){this.uniforms.visibility.value=r}},alphaTest:{enumerable:!0,get(){return this.uniforms.alphaTest.value},set(r){this.uniforms.alphaTest.value=r}},repeat:{enumerable:!0,get(){return this.uniforms.repeat.value},set(r){this.uniforms.repeat.value.copy(r)}}}),this.setValues(t)}copy(t){return super.copy(t),this.lineWidth=t.lineWidth,this.map=t.map,this.useMap=t.useMap,this.alphaMap=t.alphaMap,this.useAlphaMap=t.useAlphaMap,this.color.copy(t.color),this.opacity=t.opacity,this.resolution.copy(t.resolution),this.sizeAttenuation=t.sizeAttenuation,this.dashArray=t.dashArray,this.dashOffset=t.dashOffset,this.dashRatio=t.dashRatio,this.useDash=t.useDash,this.visibility=t.visibility,this.alphaTest=t.alphaTest,this.repeat.copy(t.repeat),this}}function em(s,t){const r=new THREE.Matrix4,l=new THREE.Ray,c=new THREE.Sphere,p=new THREE.Vector3,h=this.geometry;if(c.copy(h.boundingSphere),c.applyMatrix4(this.matrixWorld),!s.ray.intersectSphere(c,p))return;r.copy(this.matrixWorld).invert(),l.copy(s.ray).applyMatrix4(r);const m=new THREE.Vector3,v=new THREE.Vector3,E=new THREE.Vector3,x=this instanceof THREE.LineSegments?2:1,T=h.index,R=h.attributes;if(T!==null){const F=T.array,U=R.position.array,P=R.width.array;for(let O=0,z=F.length-1;O<z;O+=x){const L=F[O],k=F[O+1];m.fromArray(U,L*3),v.fromArray(U,k*3);const H=P[Math.floor(O/3)]!=null?P[Math.floor(O/3)]:1,X=s.params.Line.threshold+this.material.lineWidth*H/2,W=X*X;if(l.distanceSqToSegment(m,v,p,E)>W)continue;p.applyMatrix4(this.matrixWorld);const Y=s.ray.origin.distanceTo(p);Y<s.near||Y>s.far||(t.push({distance:Y,point:E.clone().applyMatrix4(this.matrixWorld),index:O,face:null,faceIndex:void 0,object:this}),O=z)}}}const Ff={width:.2,length:1,decay:1,local:!1,stride:0,interval:1},tm=(s,t=1)=>(s.set(s.subarray(t)),s.fill(-1/0,-t),s);function bd(s,t){const{length:r,local:l,decay:c,interval:p,stride:h}=Zn(Zn({},Ff),t),m=d.useRef(),[v]=d.useState(()=>new i.Vector3);d.useLayoutEffect(()=>{s&&(m.current=Float32Array.from({length:r*10*3},(T,R)=>s.position.getComponent(R%3)))},[r,s]);const E=d.useRef(new i.Vector3),x=d.useRef(0);return(0,_.A)(()=>{if(s&&m.current){if(x.current===0){let T;l?T=s.position:(s.getWorldPosition(v),T=v);const R=1*c;for(let F=0;F<R;F++)T.distanceTo(E.current)<h||(tm(m.current,3),m.current.set(T.toArray(),m.current.length-3));E.current.copy(T)}x.current++,x.current=x.current%p}}),m}const nm=d.forwardRef((s,t)=>{const{children:r}=s,{width:l,length:c,decay:p,local:h,stride:m,interval:v}=Zn(Zn({},Ff),s),{color:E="hotpink",attenuation:x,target:T}=s,R=(0,_.z)(H=>H.size),F=(0,_.z)(H=>H.scene),U=d.useRef(null),[P,O]=d.useState(null),z=bd(P,{length:c,decay:p,local:h,stride:m,interval:v});d.useEffect(()=>{const H=(T==null?void 0:T.current)||U.current.children.find(X=>X instanceof i.Object3D);H&&O(H)},[z,T]);const L=d.useMemo(()=>new W1,[]),k=d.useMemo(()=>{var H;const X=new $g({lineWidth:.1*l,color:E,sizeAttenuation:1,resolution:new i.Vector2(R.width,R.height)});let W;if(r)if(Array.isArray(r))W=r.find(J=>{const Y=J;return typeof Y.type=="string"&&Y.type==="meshLineMaterial"});else{const J=r;typeof J.type=="string"&&J.type==="meshLineMaterial"&&(W=J)}return typeof((H=W)==null?void 0:H.props)=="object"&&X.setValues(W.props),X},[l,E,R,r]);return d.useEffect(()=>{k.uniforms.resolution.value.set(R.width,R.height)},[R]),(0,_.A)(()=>{z.current&&L.setPoints(z.current,x)}),d.createElement("group",null,(0,_.g)(d.createElement("mesh",{ref:t,geometry:L,material:k}),F),d.createElement("group",{ref:U},r))});var Fu=A(5108);const Zs=new i.Triangle,bh=new i.Vector3;class E0{constructor(t){let r=t.geometry;r.index&&(Fu.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),r=r.toNonIndexed()),this.geometry=r,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(t){return this.weightAttribute=t?this.geometry.getAttribute(t):null,this}build(){const t=this.positionAttribute,r=this.weightAttribute,l=new Float32Array(t.count/3);for(let p=0;p<t.count;p+=3){let h=1;r&&(h=r.getX(p)+r.getX(p+1)+r.getX(p+2)),Zs.a.fromBufferAttribute(t,p),Zs.b.fromBufferAttribute(t,p+1),Zs.c.fromBufferAttribute(t,p+2),h*=Zs.getArea(),l[p/3]=h}this.distribution=new Float32Array(t.count/3);let c=0;for(let p=0;p<l.length;p++)c+=l[p],this.distribution[p]=c;return this}setRandomGenerator(t){return this.randomFunction=t,this}sample(t,r,l){const c=this.sampleFaceIndex();return this.sampleFace(c,t,r,l)}sampleFaceIndex(){const t=this.distribution[this.distribution.length-1];return this.binarySearch(this.randomFunction()*t)}binarySearch(t){const r=this.distribution;let l=0,c=r.length-1,p=-1;for(;l<=c;){const h=Math.ceil((l+c)/2);if(h===0||r[h-1]<=t&&r[h]>t){p=h;break}else t<r[h]?c=h-1:l=h+1}return p}sampleFace(t,r,l,c){let p=this.randomFunction(),h=this.randomFunction();return p+h>1&&(p=1-p,h=1-h),Zs.a.fromBufferAttribute(this.positionAttribute,t*3),Zs.b.fromBufferAttribute(this.positionAttribute,t*3+1),Zs.c.fromBufferAttribute(this.positionAttribute,t*3+2),r.set(0,0,0).addScaledVector(Zs.a,p).addScaledVector(Zs.b,h).addScaledVector(Zs.c,1-(p+h)),l!==void 0&&Zs.getNormal(l),c!==void 0&&this.colorAttribute!==void 0&&(Zs.a.fromBufferAttribute(this.colorAttribute,t*3),Zs.b.fromBufferAttribute(this.colorAttribute,t*3+1),Zs.c.fromBufferAttribute(this.colorAttribute,t*3+2),bh.set(0,0,0).addScaledVector(Zs.a,p).addScaledVector(Zs.b,h).addScaledVector(Zs.c,1-(p+h)),c.r=bh.x,c.g=bh.y,c.b=bh.z),this}}function b0(s,t=16,r,l,c){const[p,h]=d.useState(()=>{const m=Array.from({length:t},()=>[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]).flat();return new i.InstancedBufferAttribute(Float32Array.from(m),16)});return d.useLayoutEffect(()=>{if(typeof s.current=="undefined")return;const m=new E0(s.current);l&&m.setWeightAttribute(l),m.build();const v=new i.Vector3,E=new i.Vector3,x=new i.Color,T=new i.Object3D;s.current.updateMatrixWorld(!0);for(let R=0;R<t;R++)m.sample(v,E,x),typeof r=="function"?r({dummy:T,sampledMesh:s.current,position:v,normal:E,color:x},R):T.position.copy(v),T.updateMatrix(),c!=null&&c.current&&c.current.setMatrixAt(R,T.matrix),T.matrix.toArray(p.array,R*16);c!=null&&c.current&&(c.current.instanceMatrix.needsUpdate=!0),p.needsUpdate=!0,h(p.clone())},[s,c,l,t,r]),p}function M0(m){var v=m,{children:s,weight:t,transform:r,instances:l,mesh:c,count:p=16}=v,h=Cn(v,["children","weight","transform","instances","mesh","count"]);const E=d.useRef(null),x=d.useRef(null),T=d.useRef(null);return d.useLayoutEffect(()=>{var R,F;x.current=(R=l==null?void 0:l.current)!==null&&R!==void 0?R:E.current.children.find(U=>U.hasOwnProperty("instanceMatrix")),T.current=(F=c==null?void 0:c.current)!==null&&F!==void 0?F:E.current.children.find(U=>U.type==="Mesh")},[s,c==null?void 0:c.current,l==null?void 0:l.current]),b0(T,p,r,t,x),d.createElement("group",(0,C.Z)({ref:E},h),s)}const iv=l=>{var c=l,{compute:s,name:t}=c,r=Cn(c,["compute","name"]);const[p]=d.useState(()=>new i.BufferAttribute(new Float32Array(0),1)),h=d.useRef(null);return d.useLayoutEffect(()=>{if(h.current){var m;const v=(m=h.current.parent)!==null&&m!==void 0?m:h.current.__r3f.parent,E=s(v);h.current.copy(E)}},[s]),d.createElement("primitive",(0,C.Z)({ref:h,object:p,attach:`attributes-${t}`},r))};var Mh=A(5030),ov=A.n(Mh);function Q1(s,t,r={}){const l=new i.Vector3,c=new i.Quaternion,p=new i.Vector3,h=new i.Matrix4,m=new i.Matrix4,v=new i.Matrix4;r.preserveMatrix=r.preserveMatrix!==void 0?r.preserveMatrix:!0,r.preservePosition=r.preservePosition!==void 0?r.preservePosition:!0,r.preserveHipPosition=r.preserveHipPosition!==void 0?r.preserveHipPosition:!1,r.useTargetMatrix=r.useTargetMatrix!==void 0?r.useTargetMatrix:!1,r.hip=r.hip!==void 0?r.hip:"hip",r.names=r.names||{};const E=t.isObject3D?t.skeleton.bones:x0(t),x=s.isObject3D?s.skeleton.bones:x0(s);let T,R,F,U,P;if(s.isObject3D?s.skeleton.pose():(r.useTargetMatrix=!0,r.preserveMatrix=!1),r.preservePosition){P=[];for(let O=0;O<x.length;O++)P.push(x[O].position.clone())}if(r.preserveMatrix){s.updateMatrixWorld(),s.matrixWorld.identity();for(let O=0;O<s.children.length;++O)s.children[O].updateMatrixWorld(!0)}if(r.offsets){T=[];for(let O=0;O<x.length;++O)R=x[O],F=r.names[R.name]||R.name,r.offsets[F]&&(R.matrix.multiply(r.offsets[F]),R.matrix.decompose(R.position,R.quaternion,R.scale),R.updateMatrixWorld()),T.push(R.matrixWorld.clone())}for(let O=0;O<x.length;++O){if(R=x[O],F=r.names[R.name]||R.name,U=sv(F,E),v.copy(R.matrixWorld),U){if(U.updateMatrixWorld(),r.useTargetMatrix?m.copy(U.matrixWorld):(m.copy(s.matrixWorld).invert(),m.multiply(U.matrixWorld)),p.setFromMatrixScale(m),m.scale(p.set(1/p.x,1/p.y,1/p.z)),v.makeRotationFromQuaternion(c.setFromRotationMatrix(m)),s.isObject3D){const z=x.indexOf(R),L=T?T[z]:h.copy(s.skeleton.boneInverses[z]).invert();v.multiply(L)}v.copyPosition(m)}R.parent&&R.parent.isBone?(R.matrix.copy(R.parent.matrixWorld).invert(),R.matrix.multiply(v)):R.matrix.copy(v),r.preserveHipPosition&&F===r.hip&&R.matrix.setPosition(l.set(0,R.position.y,0)),R.matrix.decompose(R.position,R.quaternion,R.scale),R.updateMatrixWorld()}if(r.preservePosition)for(let O=0;O<x.length;++O)R=x[O],F=r.names[R.name]||R.name,F!==r.hip&&R.position.copy(P[O]);r.preserveMatrix&&s.updateMatrixWorld(!0)}function xh(s,t,r,l={}){l.useFirstFramePosition=l.useFirstFramePosition!==void 0?l.useFirstFramePosition:!1,l.fps=l.fps!==void 0?l.fps:30,l.names=l.names||[],t.isObject3D||(t=h3(t));const c=Math.round(r.duration*(l.fps/1e3)*1e3),p=1/l.fps,h=[],m=new i.AnimationMixer(t),v=x0(s.skeleton),E=[];let x,T,R,F,U;m.clipAction(r).play(),m.update(0),t.updateMatrixWorld();for(let P=0;P<c;++P){const O=P*p;Q1(s,t,l);for(let z=0;z<v.length;++z)U=l.names[v[z].name]||v[z].name,R=sv(U,t.skeleton),R&&(T=v[z],F=E[z]=E[z]||{bone:T},l.hip===U&&(F.pos||(F.pos={times:new Float32Array(c),values:new Float32Array(c*3)}),l.useFirstFramePosition&&(P===0&&(x=T.position.clone()),T.position.sub(x)),F.pos.times[P]=O,T.position.toArray(F.pos.values,P*3)),F.quat||(F.quat={times:new Float32Array(c),values:new Float32Array(c*4)}),F.quat.times[P]=O,T.quaternion.toArray(F.quat.values,P*4));m.update(p),t.updateMatrixWorld()}for(let P=0;P<E.length;++P)F=E[P],F&&(F.pos&&h.push(new i.VectorKeyframeTrack(".bones["+F.bone.name+"].position",F.pos.times,F.pos.values)),h.push(new i.QuaternionKeyframeTrack(".bones["+F.bone.name+"].quaternion",F.quat.times,F.quat.values)));return m.uncacheAction(r),new i.AnimationClip(r.name,-1,h)}function rm(s){const t=new Map,r=new Map,l=s.clone();return av(s,l,function(c,p){t.set(p,c),r.set(c,p)}),l.traverse(function(c){if(!c.isSkinnedMesh)return;const p=c,h=t.get(c),m=h.skeleton.bones;p.skeleton=h.skeleton.clone(),p.bindMatrix.copy(h.bindMatrix),p.skeleton.bones=m.map(function(v){return r.get(v)}),p.bind(p.skeleton,p.bindMatrix)}),l}function sv(s,t){for(let r=0,l=x0(t);r<l.length;r++)if(s===l[r].name)return l[r]}function x0(s){return Array.isArray(s)?s:s.bones}function h3(s){const t=new i.SkeletonHelper(s.bones[0]);return t.skeleton=s,t}function av(s,t,r){r(s,t);for(let l=0;l<s.children.length;l++)av(s.children[l],t.children[l],r)}const f3={retarget:Q1,retargetClip:xh,clone:rm};function g3(s,{keys:t=["near","far","color","distance","decay","penumbra","angle","intensity","skeleton","visible","castShadow","receiveShadow","morphTargetDictionary","morphTargetInfluences","name","geometry","material","position","rotation","scale","up","userData","bindMode","bindMatrix","bindMatrixInverse","skeleton"],deep:r,inject:l,castShadow:c,receiveShadow:p}){let h=ov()(s,t);return r&&(h.geometry&&r!=="materialsOnly"&&(h.geometry=h.geometry.clone()),h.material&&r!=="geometriesOnly"&&(h.material=h.material.clone())),l&&(typeof l=="function"?h=os(Zn({},h),{children:l(s)}):d.isValidElement(l)?h=os(Zn({},h),{children:l}):h=Zn(Zn({},h),l)),s instanceof i.Mesh&&(c&&(h.castShadow=!0),p&&(h.receiveShadow=!0)),h}const C0=d.forwardRef((x,E)=>{var T=x,{isChild:s=!1,object:t,children:r,deep:l,castShadow:c,receiveShadow:p,inject:h,keys:m}=T,v=Cn(T,["isChild","object","children","deep","castShadow","receiveShadow","inject","keys"]);var R;const F={keys:m,deep:l,inject:h,castShadow:c,receiveShadow:p};if(t=d.useMemo(()=>{if(s===!1&&!Array.isArray(t)){let L=!1;if(t.traverse(k=>{k.isSkinnedMesh&&(L=!0)}),L)return f3.clone(t)}return t},[t,s]),Array.isArray(t))return d.createElement("group",(0,C.Z)({},v,{ref:E}),t.map(L=>d.createElement(C0,(0,C.Z)({key:L.uuid,object:L},F))),r);const z=g3(t,F),{children:U}=z,P=Cn(z,["children"]),O=t.type[0].toLowerCase()+t.type.slice(1);return d.createElement(O,(0,C.Z)({},P,v,{ref:E}),((R=t)==null?void 0:R.children).map(L=>L.type==="Bone"?d.createElement("primitive",(0,C.Z)({key:L.uuid,object:L},F)):d.createElement(C0,(0,C.Z)({key:L.uuid,object:L},F,{isChild:!0}))),r,U)});var m3=A(5108);class A3 extends i.Mesh{constructor(t,r,l=!1,c=!1,p=1e4){const h=new i.BufferGeometry;super(h,r),this.isMarchingCubes=!0;const m=this,v=new Float32Array(12*3),E=new Float32Array(12*3),x=new Float32Array(12*3);this.enableUvs=l,this.enableColors=c,this.init=function(L){this.resolution=L,this.isolation=80,this.size=L,this.size2=this.size*this.size,this.size3=this.size2*this.size,this.halfsize=this.size/2,this.delta=2/this.size,this.yd=this.size,this.zd=this.size2,this.field=new Float32Array(this.size3),this.normal_cache=new Float32Array(this.size3*3),this.palette=new Float32Array(this.size3*3),this.count=0;const k=p*3;this.positionArray=new Float32Array(k*3);const H=new i.BufferAttribute(this.positionArray,3);H.setUsage(i.DynamicDrawUsage),h.setAttribute("position",H),this.normalArray=new Float32Array(k*3);const X=new i.BufferAttribute(this.normalArray,3);if(X.setUsage(i.DynamicDrawUsage),h.setAttribute("normal",X),this.enableUvs){this.uvArray=new Float32Array(k*2);const W=new i.BufferAttribute(this.uvArray,2);W.setUsage(i.DynamicDrawUsage),h.setAttribute("uv",W)}if(this.enableColors){this.colorArray=new Float32Array(k*3);const W=new i.BufferAttribute(this.colorArray,3);W.setUsage(i.DynamicDrawUsage),h.setAttribute("color",W)}h.boundingSphere=new i.Sphere(new i.Vector3,1)};function T(L,k,H){return L+(k-L)*H}function R(L,k,H,X,W,J,Y,ce,ue,ge){const le=(H-Y)/(ce-Y),Me=m.normal_cache;v[k+0]=X+le*m.delta,v[k+1]=W,v[k+2]=J,E[k+0]=T(Me[L+0],Me[L+3],le),E[k+1]=T(Me[L+1],Me[L+4],le),E[k+2]=T(Me[L+2],Me[L+5],le),x[k+0]=T(m.palette[ue*3+0],m.palette[ge*3+0],le),x[k+1]=T(m.palette[ue*3+1],m.palette[ge*3+1],le),x[k+2]=T(m.palette[ue*3+2],m.palette[ge*3+2],le)}function F(L,k,H,X,W,J,Y,ce,ue,ge){const le=(H-Y)/(ce-Y),Me=m.normal_cache;v[k+0]=X,v[k+1]=W+le*m.delta,v[k+2]=J;const me=L+m.yd*3;E[k+0]=T(Me[L+0],Me[me+0],le),E[k+1]=T(Me[L+1],Me[me+1],le),E[k+2]=T(Me[L+2],Me[me+2],le),x[k+0]=T(m.palette[ue*3+0],m.palette[ge*3+0],le),x[k+1]=T(m.palette[ue*3+1],m.palette[ge*3+1],le),x[k+2]=T(m.palette[ue*3+2],m.palette[ge*3+2],le)}function U(L,k,H,X,W,J,Y,ce,ue,ge){const le=(H-Y)/(ce-Y),Me=m.normal_cache;v[k+0]=X,v[k+1]=W,v[k+2]=J+le*m.delta;const me=L+m.zd*3;E[k+0]=T(Me[L+0],Me[me+0],le),E[k+1]=T(Me[L+1],Me[me+1],le),E[k+2]=T(Me[L+2],Me[me+2],le),x[k+0]=T(m.palette[ue*3+0],m.palette[ge*3+0],le),x[k+1]=T(m.palette[ue*3+1],m.palette[ge*3+1],le),x[k+2]=T(m.palette[ue*3+2],m.palette[ge*3+2],le)}function P(L){const k=L*3;m.normal_cache[k]===0&&(m.normal_cache[k+0]=m.field[L-1]-m.field[L+1],m.normal_cache[k+1]=m.field[L-m.yd]-m.field[L+m.yd],m.normal_cache[k+2]=m.field[L-m.zd]-m.field[L+m.zd])}function O(L,k,H,X,W){const J=X+1,Y=X+m.yd,ce=X+m.zd,ue=J+m.yd,ge=J+m.zd,le=X+m.yd+m.zd,Me=J+m.yd+m.zd;let me=0;const Te=m.field[X],Ue=m.field[J],Re=m.field[Y],Ge=m.field[ue],De=m.field[ce],Xe=m.field[ge],Ce=m.field[le],Ee=m.field[Me];Te<W&&(me|=1),Ue<W&&(me|=2),Re<W&&(me|=8),Ge<W&&(me|=4),De<W&&(me|=16),Xe<W&&(me|=32),Ce<W&&(me|=128),Ee<W&&(me|=64);const _e=y3[me];if(_e===0)return 0;const oe=m.delta,Ae=L+oe,Be=k+oe,ve=H+oe;_e&1&&(P(X),P(J),R(X*3,0,W,L,k,H,Te,Ue,X,J)),_e&2&&(P(J),P(ue),F(J*3,3,W,Ae,k,H,Ue,Ge,J,ue)),_e&4&&(P(Y),P(ue),R(Y*3,6,W,L,Be,H,Re,Ge,Y,ue)),_e&8&&(P(X),P(Y),F(X*3,9,W,L,k,H,Te,Re,X,Y)),_e&16&&(P(ce),P(ge),R(ce*3,12,W,L,k,ve,De,Xe,ce,ge)),_e&32&&(P(ge),P(Me),F(ge*3,15,W,Ae,k,ve,Xe,Ee,ge,Me)),_e&64&&(P(le),P(Me),R(le*3,18,W,L,Be,ve,Ce,Ee,le,Me)),_e&128&&(P(ce),P(le),F(ce*3,21,W,L,k,ve,De,Ce,ce,le)),_e&256&&(P(X),P(ce),U(X*3,24,W,L,k,H,Te,De,X,ce)),_e&512&&(P(J),P(ge),U(J*3,27,W,Ae,k,H,Ue,Xe,J,ge)),_e&1024&&(P(ue),P(Me),U(ue*3,30,W,Ae,Be,H,Ge,Ee,ue,Me)),_e&2048&&(P(Y),P(le),U(Y*3,33,W,L,Be,H,Re,Ce,Y,le)),me<<=4;let ke,vt,ht,dt=0,$e=0;for(;S0[me+$e]!=-1;)ke=me+$e,vt=ke+1,ht=ke+2,z(v,E,x,3*S0[ke],3*S0[vt],3*S0[ht]),$e+=3,dt++;return dt}function z(L,k,H,X,W,J){const Y=m.count*3;if(m.positionArray[Y+0]=L[X],m.positionArray[Y+1]=L[X+1],m.positionArray[Y+2]=L[X+2],m.positionArray[Y+3]=L[W],m.positionArray[Y+4]=L[W+1],m.positionArray[Y+5]=L[W+2],m.positionArray[Y+6]=L[J],m.positionArray[Y+7]=L[J+1],m.positionArray[Y+8]=L[J+2],m.material.flatShading===!0){const ce=(k[X+0]+k[W+0]+k[J+0])/3,ue=(k[X+1]+k[W+1]+k[J+1])/3,ge=(k[X+2]+k[W+2]+k[J+2])/3;m.normalArray[Y+0]=ce,m.normalArray[Y+1]=ue,m.normalArray[Y+2]=ge,m.normalArray[Y+3]=ce,m.normalArray[Y+4]=ue,m.normalArray[Y+5]=ge,m.normalArray[Y+6]=ce,m.normalArray[Y+7]=ue,m.normalArray[Y+8]=ge}else m.normalArray[Y+0]=k[X+0],m.normalArray[Y+1]=k[X+1],m.normalArray[Y+2]=k[X+2],m.normalArray[Y+3]=k[W+0],m.normalArray[Y+4]=k[W+1],m.normalArray[Y+5]=k[W+2],m.normalArray[Y+6]=k[J+0],m.normalArray[Y+7]=k[J+1],m.normalArray[Y+8]=k[J+2];if(m.enableUvs){const ce=m.count*2;m.uvArray[ce+0]=L[X+0],m.uvArray[ce+1]=L[X+2],m.uvArray[ce+2]=L[W+0],m.uvArray[ce+3]=L[W+2],m.uvArray[ce+4]=L[J+0],m.uvArray[ce+5]=L[J+2]}m.enableColors&&(m.colorArray[Y+0]=H[X+0],m.colorArray[Y+1]=H[X+1],m.colorArray[Y+2]=H[X+2],m.colorArray[Y+3]=H[W+0],m.colorArray[Y+4]=H[W+1],m.colorArray[Y+5]=H[W+2],m.colorArray[Y+6]=H[J+0],m.colorArray[Y+7]=H[J+1],m.colorArray[Y+8]=H[J+2]),m.count+=3}this.addBall=function(L,k,H,X,W,J){const Y=Math.sign(X);X=Math.abs(X);const ce=J!=null;let ue=new i.Color(L,k,H);if(ce)try{ue=J instanceof i.Color?J:Array.isArray(J)?new i.Color(Math.min(Math.abs(J[0]),1),Math.min(Math.abs(J[1]),1),Math.min(Math.abs(J[2]),1)):new i.Color(J)}catch($e){ue=new i.Color(L,k,H)}const ge=this.size*Math.sqrt(X/W),le=H*this.size,Me=k*this.size,me=L*this.size;let Te=Math.floor(le-ge);Te<1&&(Te=1);let Ue=Math.floor(le+ge);Ue>this.size-1&&(Ue=this.size-1);let Re=Math.floor(Me-ge);Re<1&&(Re=1);let Ge=Math.floor(Me+ge);Ge>this.size-1&&(Ge=this.size-1);let De=Math.floor(me-ge);De<1&&(De=1);let Xe=Math.floor(me+ge);Xe>this.size-1&&(Xe=this.size-1);let Ce,Ee,_e,oe,Ae,Be,ve,ke,vt,ht,dt;for(_e=Te;_e<Ue;_e++)for(Ae=this.size2*_e,ke=_e/this.size-H,vt=ke*ke,Ee=Re;Ee<Ge;Ee++)for(oe=Ae+this.size*Ee,ve=Ee/this.size-k,ht=ve*ve,Ce=De;Ce<Xe;Ce++)if(Be=Ce/this.size-L,dt=X/(1e-6+Be*Be+ht+vt)-W,dt>0){this.field[oe+Ce]+=dt*Y;const $e=Math.sqrt((Ce-me)*(Ce-me)+(Ee-Me)*(Ee-Me)+(_e-le)*(_e-le))/ge,Kt=1-$e*$e*$e*($e*($e*6-15)+10);this.palette[(oe+Ce)*3+0]+=ue.r*Kt,this.palette[(oe+Ce)*3+1]+=ue.g*Kt,this.palette[(oe+Ce)*3+2]+=ue.b*Kt}},this.addPlaneX=function(L,k){const H=this.size,X=this.yd,W=this.zd,J=this.field;let Y,ce,ue,ge,le,Me,me,Te=H*Math.sqrt(L/k);for(Te>H&&(Te=H),Y=0;Y<Te;Y++)if(Me=Y/H,ge=Me*Me,le=L/(1e-4+ge)-k,le>0)for(ce=0;ce<H;ce++)for(me=Y+ce*X,ue=0;ue<H;ue++)J[W*ue+me]+=le},this.addPlaneY=function(L,k){const H=this.size,X=this.yd,W=this.zd,J=this.field;let Y,ce,ue,ge,le,Me,me,Te,Ue=H*Math.sqrt(L/k);for(Ue>H&&(Ue=H),ce=0;ce<Ue;ce++)if(Me=ce/H,ge=Me*Me,le=L/(1e-4+ge)-k,le>0)for(me=ce*X,Y=0;Y<H;Y++)for(Te=me+Y,ue=0;ue<H;ue++)J[W*ue+Te]+=le},this.addPlaneZ=function(L,k){const H=this.size,X=this.yd,W=this.zd,J=this.field;let Y,ce,ue,ge,le,Me,me,Te,Ue=H*Math.sqrt(L/k);for(Ue>H&&(Ue=H),ue=0;ue<Ue;ue++)if(Me=ue/H,ge=Me*Me,le=L/(1e-4+ge)-k,le>0)for(me=W*ue,ce=0;ce<H;ce++)for(Te=me+ce*X,Y=0;Y<H;Y++)J[Te+Y]+=le},this.setCell=function(L,k,H,X){const W=this.size2*H+this.size*k+L;this.field[W]=X},this.getCell=function(L,k,H){const X=this.size2*H+this.size*k+L;return this.field[X]},this.blur=function(L=1){const k=this.field,H=k.slice(),X=this.size,W=this.size2;for(let J=0;J<X;J++)for(let Y=0;Y<X;Y++)for(let ce=0;ce<X;ce++){const ue=W*ce+X*Y+J;let ge=H[ue],le=1;for(let Me=-1;Me<=1;Me+=2){const me=Me+J;if(!(me<0||me>=X))for(let Te=-1;Te<=1;Te+=2){const Ue=Te+Y;if(!(Ue<0||Ue>=X))for(let Re=-1;Re<=1;Re+=2){const Ge=Re+ce;if(Ge<0||Ge>=X)continue;const De=W*Ge+X*Ue+me,Xe=H[De];le++,ge+=L*(Xe-ge)/le}}}k[ue]=ge}},this.reset=function(){for(let L=0;L<this.size3;L++)this.normal_cache[L*3]=0,this.field[L]=0,this.palette[L*3]=this.palette[L*3+1]=this.palette[L*3+2]=0},this.update=function(){this.count=0;const L=this.size-2;for(let k=1;k<L;k++){const H=this.size2*k,X=(k-this.halfsize)/this.halfsize;for(let W=1;W<L;W++){const J=H+this.size*W,Y=(W-this.halfsize)/this.halfsize;for(let ce=1;ce<L;ce++){const ue=(ce-this.halfsize)/this.halfsize,ge=J+ce;O(ue,Y,X,ge,this.isolation)}}}this.geometry.setDrawRange(0,this.count),h.getAttribute("position").needsUpdate=!0,h.getAttribute("normal").needsUpdate=!0,this.enableUvs&&(h.getAttribute("uv").needsUpdate=!0),this.enableColors&&(h.getAttribute("color").needsUpdate=!0),this.count/3>p&&m3.warn("THREE.MarchingCubes: Geometry buffers too small for rendering. Please create an instance with a higher poly count.")},this.init(t)}}const y3=new Int32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),S0=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]),im=d.createContext(null),v3=d.forwardRef((m,h)=>{var v=m,{resolution:s=28,maxPolyCount:t=1e4,enableUvs:r=!1,enableColors:l=!1,children:c}=v,p=Cn(v,["resolution","maxPolyCount","enableUvs","enableColors","children"]);const E=d.useRef(null),x=d.useMemo(()=>new A3(s,null,r,l,t),[s,t,r,l]),T=d.useMemo(()=>({getParent:()=>E}),[]);return(0,_.A)(()=>{x.update(),x.reset()},-1),d.createElement(d.Fragment,null,d.createElement("primitive",(0,C.Z)({object:x,ref:mt([E,h])},p),d.createElement(im.Provider,{value:T},c)))}),Of=d.forwardRef((p,c)=>{var h=p,{strength:s=.5,subtract:t=12,color:r}=h,l=Cn(h,["strength","subtract","color"]);const{getParent:m}=d.useContext(im),v=d.useMemo(()=>m(),[m]),E=d.useRef(),x=new i.Vector3;return(0,_.A)(T=>{!v.current||!E.current||(E.current.getWorldPosition(x),v.current.addBall(.5+x.x*.5,.5+x.y*.5,.5+x.z*.5,s,t,r))}),d.createElement("group",(0,C.Z)({ref:mt([c,E])},l))}),_3=d.forwardRef((p,c)=>{var h=p,{planeType:s="x",strength:t=.5,subtract:r=12}=h,l=Cn(h,["planeType","strength","subtract"]);const{getParent:m}=d.useContext(im),v=d.useMemo(()=>m(),[m]),E=d.useRef(),x=d.useMemo(()=>s==="x"?"addPlaneX":s==="y"?"addPlaneY":"addPlaneZ",[s]);return(0,_.A)(()=>{!v.current||!E.current||v.current[x](t,r)}),d.createElement("group",(0,C.Z)({ref:mt([c,E])},l))});var Cs=A(5108);class w0 extends i.BufferGeometry{constructor(t,r,l,c){super();const p=[],h=[],m=[],v=new i.Vector3,E=new i.Matrix4;E.makeRotationFromEuler(l),E.setPosition(r);const x=new i.Matrix4;x.copy(E).invert(),T(),this.setAttribute("position",new i.Float32BufferAttribute(p,3)),this.setAttribute("normal",new i.Float32BufferAttribute(h,3)),this.setAttribute("uv",new i.Float32BufferAttribute(m,2));function T(){let P,O=[];const z=new i.Vector3,L=new i.Vector3;if(t.geometry.isGeometry===!0){Cs.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");return}const k=t.geometry,H=k.attributes.position,X=k.attributes.normal;if(k.index!==null){const W=k.index;for(P=0;P<W.count;P++)z.fromBufferAttribute(H,W.getX(P)),L.fromBufferAttribute(X,W.getX(P)),R(O,z,L)}else for(P=0;P<H.count;P++)z.fromBufferAttribute(H,P),L.fromBufferAttribute(X,P),R(O,z,L);for(O=F(O,v.set(1,0,0)),O=F(O,v.set(-1,0,0)),O=F(O,v.set(0,1,0)),O=F(O,v.set(0,-1,0)),O=F(O,v.set(0,0,1)),O=F(O,v.set(0,0,-1)),P=0;P<O.length;P++){const W=O[P];m.push(.5+W.position.x/c.x,.5+W.position.y/c.y),W.position.applyMatrix4(E),p.push(W.position.x,W.position.y,W.position.z),h.push(W.normal.x,W.normal.y,W.normal.z)}}function R(P,O,z){O.applyMatrix4(t.matrixWorld),O.applyMatrix4(x),z.transformDirection(t.matrixWorld),P.push(new K1(O.clone(),z.clone()))}function F(P,O){const z=[],L=.5*Math.abs(c.dot(O));for(let k=0;k<P.length;k+=3){let H,X,W,J=0,Y,ce,ue,ge;const le=P[k+0].position.dot(O)-L,Me=P[k+1].position.dot(O)-L,me=P[k+2].position.dot(O)-L;switch(H=le>0,X=Me>0,W=me>0,J=(H?1:0)+(X?1:0)+(W?1:0),J){case 0:{z.push(P[k]),z.push(P[k+1]),z.push(P[k+2]);break}case 1:{if(H&&(Y=P[k+1],ce=P[k+2],ue=U(P[k],Y,O,L),ge=U(P[k],ce,O,L)),X){Y=P[k],ce=P[k+2],ue=U(P[k+1],Y,O,L),ge=U(P[k+1],ce,O,L),z.push(ue),z.push(ce.clone()),z.push(Y.clone()),z.push(ce.clone()),z.push(ue.clone()),z.push(ge);break}W&&(Y=P[k],ce=P[k+1],ue=U(P[k+2],Y,O,L),ge=U(P[k+2],ce,O,L)),z.push(Y.clone()),z.push(ce.clone()),z.push(ue),z.push(ge),z.push(ue.clone()),z.push(ce.clone());break}case 2:{H||(Y=P[k].clone(),ce=U(Y,P[k+1],O,L),ue=U(Y,P[k+2],O,L),z.push(Y),z.push(ce),z.push(ue)),X||(Y=P[k+1].clone(),ce=U(Y,P[k+2],O,L),ue=U(Y,P[k],O,L),z.push(Y),z.push(ce),z.push(ue)),W||(Y=P[k+2].clone(),ce=U(Y,P[k],O,L),ue=U(Y,P[k+1],O,L),z.push(Y),z.push(ce),z.push(ue));break}case 3:break}}return z}function U(P,O,z,L){const k=P.position.dot(z)-L,H=O.position.dot(z)-L,X=k/(k-H);return new K1(new i.Vector3(P.position.x+X*(O.position.x-P.position.x),P.position.y+X*(O.position.y-P.position.y),P.position.z+X*(O.position.z-P.position.z)),new i.Vector3(P.normal.x+X*(O.normal.x-P.normal.x),P.normal.y+X*(O.normal.y-P.normal.y),P.normal.z+X*(O.normal.z-P.normal.z)))}}}class K1{constructor(t,r){this.position=t,this.normal=r}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}function T0(s){return Array.isArray(s)}function Df(s=[0,0,0]){return T0(s)?s:s instanceof i.Vector3||s instanceof i.Euler?[s.x,s.y,s.z]:[s,s,s]}const E3=d.forwardRef(function(E,v){var x=E,{debug:t,mesh:r,children:l,position:c,rotation:p,scale:h}=x,m=Cn(x,["debug","mesh","children","position","rotation","scale"]);const T=d.useRef(null);d.useImperativeHandle(v,()=>T.current);const R=d.useRef(null);return d.useLayoutEffect(()=>{const F=(r==null?void 0:r.current)||T.current.parent,U=T.current;if(!(F instanceof i.Mesh))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');const P={position:new i.Vector3,rotation:new i.Euler,scale:new i.Vector3(1,1,1)};if(F){(0,_.j)(P,{position:c,scale:h});const O=F.matrixWorld.clone();if(F.matrixWorld.identity(),!p||typeof p=="number"){const z=new i.Object3D;z.position.copy(P.position),z.lookAt(F.position),typeof p=="number"&&z.rotateZ(p),(0,_.j)(P,{rotation:z.rotation})}else(0,_.j)(P,{rotation:p});return U.geometry=new w0(F,P.position,P.rotation,P.scale),R.current&&(0,_.j)(R.current,P),F.matrixWorld=O,()=>{U.geometry.dispose()}}},[r,...Df(c),...Df(h),...Df(p)]),d.createElement("mesh",{ref:T},l||d.createElement("meshStandardMaterial",(0,C.Z)({transparent:!0,polygonOffset:!0,polygonOffsetFactor:-10},m)),t&&d.createElement("mesh",{ref:R},d.createElement("boxGeometry",null),d.createElement("meshNormalMaterial",{wireframe:!0}),d.createElement("axesHelper",null)))});var Kp=A(5108);class om extends i.Loader{constructor(t){super(t),this.defaultDPI=90,this.defaultUnit="px"}load(t,r,l,c){const p=this,h=new i.FileLoader(p.manager);h.setPath(p.path),h.setRequestHeader(p.requestHeader),h.setWithCredentials(p.withCredentials),h.load(t,function(m){try{r(p.parse(m))}catch(v){c?c(v):Kp.error(v),p.manager.itemError(t)}},l,c)}parse(t){const r=this;function l(Ee,_e){if(Ee.nodeType!==1)return;const oe=H(Ee);let Ae=!0,Be=null;switch(Ee.nodeName){case"svg":break;case"style":p(Ee);break;case"g":_e=U(Ee,_e);break;case"path":_e=U(Ee,_e),Ee.hasAttribute("d")&&(Be=c(Ee));break;case"rect":_e=U(Ee,_e),Be=v(Ee);break;case"polygon":_e=U(Ee,_e),Be=E(Ee);break;case"polyline":_e=U(Ee,_e),Be=x(Ee);break;case"circle":_e=U(Ee,_e),Be=T(Ee);break;case"ellipse":_e=U(Ee,_e),Be=R(Ee);break;case"line":_e=U(Ee,_e),Be=F(Ee);break;case"defs":Ae=!1;break;case"mask":Ae=!1;break;case"use":_e=U(Ee,_e);const ve=Ee.href.baseVal.substring(1),ke=Ee.viewportElement.getElementById(ve);ke?l(ke,_e):Kp.warn("SVGLoader: 'use node' references non-existent node id: "+ve);break;default:}if(Be&&(_e.fill!==void 0&&_e.fill!=="none"&&Be.color.setStyle(_e.fill),W(Be,De),ue.push(Be),Be.userData={node:Ee,style:_e}),Ae){const ve=Ee.childNodes;for(let ke=0;ke<ve.length;ke++)l(ve[ke],_e)}oe&&(le.pop(),le.length>0?De.copy(le[le.length-1]):De.identity())}function c(Ee){const _e=new i.ShapePath,oe=new i.Vector2,Ae=new i.Vector2,Be=new i.Vector2;let ve=!0,ke=!1;const ht=Ee.getAttribute("d").match(/[a-df-z][^a-df-z]*/gi);for(let dt=0,$e=ht.length;dt<$e;dt++){const Kt=ht[dt],zt=Kt.charAt(0),Bt=Kt.substr(1).trim();ve===!0&&(ke=!0,ve=!1);let Qe;switch(zt){case"M":Qe=O(Bt);for(let ze=0,Ft=Qe.length;ze<Ft;ze+=2)oe.x=Qe[ze+0],oe.y=Qe[ze+1],Ae.x=oe.x,Ae.y=oe.y,ze===0?_e.moveTo(oe.x,oe.y):_e.lineTo(oe.x,oe.y),ze===0&&Be.copy(oe);break;case"H":Qe=O(Bt);for(let ze=0,Ft=Qe.length;ze<Ft;ze++)oe.x=Qe[ze],Ae.x=oe.x,Ae.y=oe.y,_e.lineTo(oe.x,oe.y),ze===0&&ke===!0&&Be.copy(oe);break;case"V":Qe=O(Bt);for(let ze=0,Ft=Qe.length;ze<Ft;ze++)oe.y=Qe[ze],Ae.x=oe.x,Ae.y=oe.y,_e.lineTo(oe.x,oe.y),ze===0&&ke===!0&&Be.copy(oe);break;case"L":Qe=O(Bt);for(let ze=0,Ft=Qe.length;ze<Ft;ze+=2)oe.x=Qe[ze+0],oe.y=Qe[ze+1],Ae.x=oe.x,Ae.y=oe.y,_e.lineTo(oe.x,oe.y),ze===0&&ke===!0&&Be.copy(oe);break;case"C":Qe=O(Bt);for(let ze=0,Ft=Qe.length;ze<Ft;ze+=6)_e.bezierCurveTo(Qe[ze+0],Qe[ze+1],Qe[ze+2],Qe[ze+3],Qe[ze+4],Qe[ze+5]),Ae.x=Qe[ze+2],Ae.y=Qe[ze+3],oe.x=Qe[ze+4],oe.y=Qe[ze+5],ze===0&&ke===!0&&Be.copy(oe);break;case"S":Qe=O(Bt);for(let ze=0,Ft=Qe.length;ze<Ft;ze+=4)_e.bezierCurveTo(P(oe.x,Ae.x),P(oe.y,Ae.y),Qe[ze+0],Qe[ze+1],Qe[ze+2],Qe[ze+3]),Ae.x=Qe[ze+0],Ae.y=Qe[ze+1],oe.x=Qe[ze+2],oe.y=Qe[ze+3],ze===0&&ke===!0&&Be.copy(oe);break;case"Q":Qe=O(Bt);for(let ze=0,Ft=Qe.length;ze<Ft;ze+=4)_e.quadraticCurveTo(Qe[ze+0],Qe[ze+1],Qe[ze+2],Qe[ze+3]),Ae.x=Qe[ze+0],Ae.y=Qe[ze+1],oe.x=Qe[ze+2],oe.y=Qe[ze+3],ze===0&&ke===!0&&Be.copy(oe);break;case"T":Qe=O(Bt);for(let ze=0,Ft=Qe.length;ze<Ft;ze+=2){const bn=P(oe.x,Ae.x),Fn=P(oe.y,Ae.y);_e.quadraticCurveTo(bn,Fn,Qe[ze+0],Qe[ze+1]),Ae.x=bn,Ae.y=Fn,oe.x=Qe[ze+0],oe.y=Qe[ze+1],ze===0&&ke===!0&&Be.copy(oe)}break;case"A":Qe=O(Bt,[3,4],7);for(let ze=0,Ft=Qe.length;ze<Ft;ze+=7){if(Qe[ze+5]==oe.x&&Qe[ze+6]==oe.y)continue;const bn=oe.clone();oe.x=Qe[ze+5],oe.y=Qe[ze+6],Ae.x=oe.x,Ae.y=oe.y,h(_e,Qe[ze],Qe[ze+1],Qe[ze+2],Qe[ze+3],Qe[ze+4],bn,oe),ze===0&&ke===!0&&Be.copy(oe)}break;case"m":Qe=O(Bt);for(let ze=0,Ft=Qe.length;ze<Ft;ze+=2)oe.x+=Qe[ze+0],oe.y+=Qe[ze+1],Ae.x=oe.x,Ae.y=oe.y,ze===0?_e.moveTo(oe.x,oe.y):_e.lineTo(oe.x,oe.y),ze===0&&Be.copy(oe);break;case"h":Qe=O(Bt);for(let ze=0,Ft=Qe.length;ze<Ft;ze++)oe.x+=Qe[ze],Ae.x=oe.x,Ae.y=oe.y,_e.lineTo(oe.x,oe.y),ze===0&&ke===!0&&Be.copy(oe);break;case"v":Qe=O(Bt);for(let ze=0,Ft=Qe.length;ze<Ft;ze++)oe.y+=Qe[ze],Ae.x=oe.x,Ae.y=oe.y,_e.lineTo(oe.x,oe.y),ze===0&&ke===!0&&Be.copy(oe);break;case"l":Qe=O(Bt);for(let ze=0,Ft=Qe.length;ze<Ft;ze+=2)oe.x+=Qe[ze+0],oe.y+=Qe[ze+1],Ae.x=oe.x,Ae.y=oe.y,_e.lineTo(oe.x,oe.y),ze===0&&ke===!0&&Be.copy(oe);break;case"c":Qe=O(Bt);for(let ze=0,Ft=Qe.length;ze<Ft;ze+=6)_e.bezierCurveTo(oe.x+Qe[ze+0],oe.y+Qe[ze+1],oe.x+Qe[ze+2],oe.y+Qe[ze+3],oe.x+Qe[ze+4],oe.y+Qe[ze+5]),Ae.x=oe.x+Qe[ze+2],Ae.y=oe.y+Qe[ze+3],oe.x+=Qe[ze+4],oe.y+=Qe[ze+5],ze===0&&ke===!0&&Be.copy(oe);break;case"s":Qe=O(Bt);for(let ze=0,Ft=Qe.length;ze<Ft;ze+=4)_e.bezierCurveTo(P(oe.x,Ae.x),P(oe.y,Ae.y),oe.x+Qe[ze+0],oe.y+Qe[ze+1],oe.x+Qe[ze+2],oe.y+Qe[ze+3]),Ae.x=oe.x+Qe[ze+0],Ae.y=oe.y+Qe[ze+1],oe.x+=Qe[ze+2],oe.y+=Qe[ze+3],ze===0&&ke===!0&&Be.copy(oe);break;case"q":Qe=O(Bt);for(let ze=0,Ft=Qe.length;ze<Ft;ze+=4)_e.quadraticCurveTo(oe.x+Qe[ze+0],oe.y+Qe[ze+1],oe.x+Qe[ze+2],oe.y+Qe[ze+3]),Ae.x=oe.x+Qe[ze+0],Ae.y=oe.y+Qe[ze+1],oe.x+=Qe[ze+2],oe.y+=Qe[ze+3],ze===0&&ke===!0&&Be.copy(oe);break;case"t":Qe=O(Bt);for(let ze=0,Ft=Qe.length;ze<Ft;ze+=2){const bn=P(oe.x,Ae.x),Fn=P(oe.y,Ae.y);_e.quadraticCurveTo(bn,Fn,oe.x+Qe[ze+0],oe.y+Qe[ze+1]),Ae.x=bn,Ae.y=Fn,oe.x=oe.x+Qe[ze+0],oe.y=oe.y+Qe[ze+1],ze===0&&ke===!0&&Be.copy(oe)}break;case"a":Qe=O(Bt,[3,4],7);for(let ze=0,Ft=Qe.length;ze<Ft;ze+=7){if(Qe[ze+5]==0&&Qe[ze+6]==0)continue;const bn=oe.clone();oe.x+=Qe[ze+5],oe.y+=Qe[ze+6],Ae.x=oe.x,Ae.y=oe.y,h(_e,Qe[ze],Qe[ze+1],Qe[ze+2],Qe[ze+3],Qe[ze+4],bn,oe),ze===0&&ke===!0&&Be.copy(oe)}break;case"Z":case"z":_e.currentPath.autoClose=!0,_e.currentPath.curves.length>0&&(oe.copy(Be),_e.currentPath.currentPoint.copy(oe),ve=!0);break;default:Kp.warn(Kt)}ke=!1}return _e}function p(Ee){if(!(!Ee.sheet||!Ee.sheet.cssRules||!Ee.sheet.cssRules.length))for(let _e=0;_e<Ee.sheet.cssRules.length;_e++){const oe=Ee.sheet.cssRules[_e];if(oe.type!==1)continue;const Ae=oe.selectorText.split(/,/gm).filter(Boolean).map(Be=>Be.trim());for(let Be=0;Be<Ae.length;Be++)ge[Ae[Be]]=Object.assign(ge[Ae[Be]]||{},oe.style)}}function h(Ee,_e,oe,Ae,Be,ve,ke,vt){if(_e==0||oe==0){Ee.lineTo(vt.x,vt.y);return}Ae=Ae*Math.PI/180,_e=Math.abs(_e),oe=Math.abs(oe);const ht=(ke.x-vt.x)/2,dt=(ke.y-vt.y)/2,$e=Math.cos(Ae)*ht+Math.sin(Ae)*dt,Kt=-Math.sin(Ae)*ht+Math.cos(Ae)*dt;let zt=_e*_e,Bt=oe*oe;const Qe=$e*$e,ze=Kt*Kt,Ft=Qe/zt+ze/Bt;if(Ft>1){const Lr=Math.sqrt(Ft);_e=Lr*_e,oe=Lr*oe,zt=_e*_e,Bt=oe*oe}const bn=zt*ze+Bt*Qe,Fn=(zt*Bt-bn)/bn;let Gt=Math.sqrt(Math.max(0,Fn));Be===ve&&(Gt=-Gt);const Yn=Gt*_e*Kt/oe,hr=-Gt*oe*$e/_e,Fr=Math.cos(Ae)*Yn-Math.sin(Ae)*hr+(ke.x+vt.x)/2,Er=Math.sin(Ae)*Yn+Math.cos(Ae)*hr+(ke.y+vt.y)/2,Ii=m(1,0,($e-Yn)/_e,(Kt-hr)/oe),xi=m(($e-Yn)/_e,(Kt-hr)/oe,(-$e-Yn)/_e,(-Kt-hr)/oe)%(Math.PI*2);Ee.currentPath.absellipse(Fr,Er,_e,oe,Ii,Ii+xi,ve===0,Ae)}function m(Ee,_e,oe,Ae){const Be=Ee*oe+_e*Ae,ve=Math.sqrt(Ee*Ee+_e*_e)*Math.sqrt(oe*oe+Ae*Ae);let ke=Math.acos(Math.max(-1,Math.min(1,Be/ve)));return Ee*Ae-_e*oe<0&&(ke=-ke),ke}function v(Ee){const _e=k(Ee.getAttribute("x")||0),oe=k(Ee.getAttribute("y")||0),Ae=k(Ee.getAttribute("rx")||Ee.getAttribute("ry")||0),Be=k(Ee.getAttribute("ry")||Ee.getAttribute("rx")||0),ve=k(Ee.getAttribute("width")),ke=k(Ee.getAttribute("height")),vt=1-.551915024494,ht=new i.ShapePath;return ht.moveTo(_e+Ae,oe),ht.lineTo(_e+ve-Ae,oe),(Ae!==0||Be!==0)&&ht.bezierCurveTo(_e+ve-Ae*vt,oe,_e+ve,oe+Be*vt,_e+ve,oe+Be),ht.lineTo(_e+ve,oe+ke-Be),(Ae!==0||Be!==0)&&ht.bezierCurveTo(_e+ve,oe+ke-Be*vt,_e+ve-Ae*vt,oe+ke,_e+ve-Ae,oe+ke),ht.lineTo(_e+Ae,oe+ke),(Ae!==0||Be!==0)&&ht.bezierCurveTo(_e+Ae*vt,oe+ke,_e,oe+ke-Be*vt,_e,oe+ke-Be),ht.lineTo(_e,oe+Be),(Ae!==0||Be!==0)&&ht.bezierCurveTo(_e,oe+Be*vt,_e+Ae*vt,oe,_e+Ae,oe),ht}function E(Ee){function _e(ve,ke,vt){const ht=k(ke),dt=k(vt);Be===0?Ae.moveTo(ht,dt):Ae.lineTo(ht,dt),Be++}const oe=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,Ae=new i.ShapePath;let Be=0;return Ee.getAttribute("points").replace(oe,_e),Ae.currentPath.autoClose=!0,Ae}function x(Ee){function _e(ve,ke,vt){const ht=k(ke),dt=k(vt);Be===0?Ae.moveTo(ht,dt):Ae.lineTo(ht,dt),Be++}const oe=/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,Ae=new i.ShapePath;let Be=0;return Ee.getAttribute("points").replace(oe,_e),Ae.currentPath.autoClose=!1,Ae}function T(Ee){const _e=k(Ee.getAttribute("cx")||0),oe=k(Ee.getAttribute("cy")||0),Ae=k(Ee.getAttribute("r")||0),Be=new i.Path;Be.absarc(_e,oe,Ae,0,Math.PI*2);const ve=new i.ShapePath;return ve.subPaths.push(Be),ve}function R(Ee){const _e=k(Ee.getAttribute("cx")||0),oe=k(Ee.getAttribute("cy")||0),Ae=k(Ee.getAttribute("rx")||0),Be=k(Ee.getAttribute("ry")||0),ve=new i.Path;ve.absellipse(_e,oe,Ae,Be,0,Math.PI*2);const ke=new i.ShapePath;return ke.subPaths.push(ve),ke}function F(Ee){const _e=k(Ee.getAttribute("x1")||0),oe=k(Ee.getAttribute("y1")||0),Ae=k(Ee.getAttribute("x2")||0),Be=k(Ee.getAttribute("y2")||0),ve=new i.ShapePath;return ve.moveTo(_e,oe),ve.lineTo(Ae,Be),ve.currentPath.autoClose=!1,ve}function U(Ee,_e){_e=Object.assign({},_e);let oe={};if(Ee.hasAttribute("class")){const ke=Ee.getAttribute("class").split(/\s/).filter(Boolean).map(vt=>vt.trim());for(let vt=0;vt<ke.length;vt++)oe=Object.assign(oe,ge["."+ke[vt]])}Ee.hasAttribute("id")&&(oe=Object.assign(oe,ge["#"+Ee.getAttribute("id")]));function Ae(ke,vt,ht){ht===void 0&&(ht=function($e){return $e.startsWith("url")&&Kp.warn("SVGLoader: url access in attributes is not implemented."),$e}),Ee.hasAttribute(ke)&&(_e[vt]=ht(Ee.getAttribute(ke))),oe[ke]&&(_e[vt]=ht(oe[ke])),Ee.style&&Ee.style[ke]!==""&&(_e[vt]=ht(Ee.style[ke]))}function Be(ke){return Math.max(0,Math.min(1,k(ke)))}function ve(ke){return Math.max(0,k(ke))}return Ae("fill","fill"),Ae("fill-opacity","fillOpacity",Be),Ae("fill-rule","fillRule"),Ae("opacity","opacity",Be),Ae("stroke","stroke"),Ae("stroke-opacity","strokeOpacity",Be),Ae("stroke-width","strokeWidth",ve),Ae("stroke-linejoin","strokeLineJoin"),Ae("stroke-linecap","strokeLineCap"),Ae("stroke-miterlimit","strokeMiterLimit",ve),Ae("visibility","visibility"),_e}function P(Ee,_e){return Ee-(_e-Ee)}function O(Ee,_e,oe){if(typeof Ee!="string")throw new TypeError("Invalid input: "+typeof Ee);const Ae={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/},Be=0,ve=1,ke=2,vt=3;let ht=Be,dt=!0,$e="",Kt="";const zt=[];function Bt(bn,Fn,Gt){const Yn=new SyntaxError('Unexpected character "'+bn+'" at index '+Fn+".");throw Yn.partial=Gt,Yn}function Qe(){$e!==""&&(Kt===""?zt.push(Number($e)):zt.push(Number($e)*Math.pow(10,Number(Kt)))),$e="",Kt=""}let ze;const Ft=Ee.length;for(let bn=0;bn<Ft;bn++){if(ze=Ee[bn],Array.isArray(_e)&&_e.includes(zt.length%oe)&&Ae.FLAGS.test(ze)){ht=ve,$e=ze,Qe();continue}if(ht===Be){if(Ae.WHITESPACE.test(ze))continue;if(Ae.DIGIT.test(ze)||Ae.SIGN.test(ze)){ht=ve,$e=ze;continue}if(Ae.POINT.test(ze)){ht=ke,$e=ze;continue}Ae.COMMA.test(ze)&&(dt&&Bt(ze,bn,zt),dt=!0)}if(ht===ve){if(Ae.DIGIT.test(ze)){$e+=ze;continue}if(Ae.POINT.test(ze)){$e+=ze,ht=ke;continue}if(Ae.EXP.test(ze)){ht=vt;continue}Ae.SIGN.test(ze)&&$e.length===1&&Ae.SIGN.test($e[0])&&Bt(ze,bn,zt)}if(ht===ke){if(Ae.DIGIT.test(ze)){$e+=ze;continue}if(Ae.EXP.test(ze)){ht=vt;continue}Ae.POINT.test(ze)&&$e[$e.length-1]==="."&&Bt(ze,bn,zt)}if(ht===vt){if(Ae.DIGIT.test(ze)){Kt+=ze;continue}if(Ae.SIGN.test(ze)){if(Kt===""){Kt+=ze;continue}Kt.length===1&&Ae.SIGN.test(Kt)&&Bt(ze,bn,zt)}}Ae.WHITESPACE.test(ze)?(Qe(),ht=Be,dt=!1):Ae.COMMA.test(ze)?(Qe(),ht=Be,dt=!0):Ae.SIGN.test(ze)?(Qe(),ht=ve,$e=ze):Ae.POINT.test(ze)?(Qe(),ht=ke,$e=ze):Bt(ze,bn,zt)}return Qe(),zt}const z=["mm","cm","in","pt","pc","px"],L={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:72/6,pc:1,px:-1},px:{px:1}};function k(Ee){let _e="px";if(typeof Ee=="string"||Ee instanceof String)for(let Ae=0,Be=z.length;Ae<Be;Ae++){const ve=z[Ae];if(Ee.endsWith(ve)){_e=ve,Ee=Ee.substring(0,Ee.length-ve.length);break}}let oe;return _e==="px"&&r.defaultUnit!=="px"?oe=L.in[r.defaultUnit]/r.defaultDPI:(oe=L[_e][r.defaultUnit],oe<0&&(oe=L[_e].in*r.defaultDPI)),oe*parseFloat(Ee)}function H(Ee){if(!(Ee.hasAttribute("transform")||Ee.nodeName==="use"&&(Ee.hasAttribute("x")||Ee.hasAttribute("y"))))return null;const _e=X(Ee);return le.length>0&&_e.premultiply(le[le.length-1]),De.copy(_e),le.push(_e),_e}function X(Ee){const _e=new i.Matrix3,oe=Me;if(Ee.nodeName==="use"&&(Ee.hasAttribute("x")||Ee.hasAttribute("y"))){const Ae=k(Ee.getAttribute("x")),Be=k(Ee.getAttribute("y"));_e.translate(Ae,Be)}if(Ee.hasAttribute("transform")){const Ae=Ee.getAttribute("transform").split(")");for(let Be=Ae.length-1;Be>=0;Be--){const ve=Ae[Be].trim();if(ve==="")continue;const ke=ve.indexOf("("),vt=ve.length;if(ke>0&&ke<vt){const ht=ve.substr(0,ke),dt=O(ve.substr(ke+1,vt-ke-1));switch(oe.identity(),ht){case"translate":if(dt.length>=1){const $e=dt[0];let Kt=$e;dt.length>=2&&(Kt=dt[1]),oe.translate($e,Kt)}break;case"rotate":if(dt.length>=1){let $e=0,Kt=0,zt=0;$e=-dt[0]*Math.PI/180,dt.length>=3&&(Kt=dt[1],zt=dt[2]),me.identity().translate(-Kt,-zt),Te.identity().rotate($e),Ue.multiplyMatrices(Te,me),me.identity().translate(Kt,zt),oe.multiplyMatrices(me,Ue)}break;case"scale":if(dt.length>=1){const $e=dt[0];let Kt=$e;dt.length>=2&&(Kt=dt[1]),oe.scale($e,Kt)}break;case"skewX":dt.length===1&&oe.set(1,Math.tan(dt[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":dt.length===1&&oe.set(1,0,0,Math.tan(dt[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":dt.length===6&&oe.set(dt[0],dt[2],dt[4],dt[1],dt[3],dt[5],0,0,1);break}}_e.premultiply(oe)}}return _e}function W(Ee,_e){function oe(ve){Ge.set(ve.x,ve.y,1).applyMatrix3(_e),ve.set(Ge.x,Ge.y)}const Ae=J(_e),Be=Ee.subPaths;for(let ve=0,ke=Be.length;ve<ke;ve++){const ht=Be[ve].curves;for(let dt=0;dt<ht.length;dt++){const $e=ht[dt];$e.isLineCurve?(oe($e.v1),oe($e.v2)):$e.isCubicBezierCurve?(oe($e.v0),oe($e.v1),oe($e.v2),oe($e.v3)):$e.isQuadraticBezierCurve?(oe($e.v0),oe($e.v1),oe($e.v2)):$e.isEllipseCurve&&(Ae&&Kp.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),Re.set($e.aX,$e.aY),oe(Re),$e.aX=Re.x,$e.aY=Re.y,$e.xRadius*=Y(_e),$e.yRadius*=ce(_e))}}}function J(Ee){return Ee.elements[1]!==0||Ee.elements[3]!==0}function Y(Ee){const _e=Ee.elements;return Math.sqrt(_e[0]*_e[0]+_e[1]*_e[1])}function ce(Ee){const _e=Ee.elements;return Math.sqrt(_e[3]*_e[3]+_e[4]*_e[4])}const ue=[],ge={},le=[],Me=new i.Matrix3,me=new i.Matrix3,Te=new i.Matrix3,Ue=new i.Matrix3,Re=new i.Vector2,Ge=new i.Vector3,De=new i.Matrix3,Xe=new DOMParser().parseFromString(t,"image/svg+xml");return l(Xe.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:ue,xml:Xe.documentElement}}static createShapes(t){const l={ORIGIN:0,DESTINATION:1,BETWEEN:2,LEFT:3,RIGHT:4,BEHIND:5,BEYOND:6},c={loc:l.ORIGIN,t:0};function p(O,z,L,k){const H=O.x,X=z.x,W=L.x,J=k.x,Y=O.y,ce=z.y,ue=L.y,ge=k.y,le=(J-W)*(Y-ue)-(ge-ue)*(H-W),Me=(X-H)*(Y-ue)-(ce-Y)*(H-W),me=(ge-ue)*(X-H)-(J-W)*(ce-Y),Te=le/me,Ue=Me/me;if(me===0&&le!==0||Te<=0||Te>=1||Ue<0||Ue>1)return null;if(le===0&&me===0){for(let Re=0;Re<2;Re++)if(h(Re===0?L:k,O,z),c.loc==l.ORIGIN){const Ge=Re===0?L:k;return{x:Ge.x,y:Ge.y,t:c.t}}else if(c.loc==l.BETWEEN){const Ge=+(H+c.t*(X-H)).toPrecision(10),De=+(Y+c.t*(ce-Y)).toPrecision(10);return{x:Ge,y:De,t:c.t}}return null}else{for(let De=0;De<2;De++)if(h(De===0?L:k,O,z),c.loc==l.ORIGIN){const Xe=De===0?L:k;return{x:Xe.x,y:Xe.y,t:c.t}}const Re=+(H+Te*(X-H)).toPrecision(10),Ge=+(Y+Te*(ce-Y)).toPrecision(10);return{x:Re,y:Ge,t:Te}}}function h(O,z,L){const k=L.x-z.x,H=L.y-z.y,X=O.x-z.x,W=O.y-z.y,J=k*W-X*H;if(O.x===z.x&&O.y===z.y){c.loc=l.ORIGIN,c.t=0;return}if(O.x===L.x&&O.y===L.y){c.loc=l.DESTINATION,c.t=1;return}if(J<-Number.EPSILON){c.loc=l.LEFT;return}if(J>Number.EPSILON){c.loc=l.RIGHT;return}if(k*X<0||H*W<0){c.loc=l.BEHIND;return}if(Math.sqrt(k*k+H*H)<Math.sqrt(X*X+W*W)){c.loc=l.BEYOND;return}let Y;k!==0?Y=X/k:Y=W/H,c.loc=l.BETWEEN,c.t=Y}function m(O,z){const L=[],k=[];for(let H=1;H<O.length;H++){const X=O[H-1],W=O[H];for(let J=1;J<z.length;J++){const Y=z[J-1],ce=z[J],ue=p(X,W,Y,ce);ue!==null&&L.find(ge=>ge.t<=ue.t+Number.EPSILON&&ge.t>=ue.t-Number.EPSILON)===void 0&&(L.push(ue),k.push(new i.Vector2(ue.x,ue.y)))}}return k}function v(O,z,L){const k=new i.Vector2;z.getCenter(k);const H=[];return L.forEach(X=>{X.boundingBox.containsPoint(k)&&m(O,X.points).forEach(J=>{H.push({identifier:X.identifier,isCW:X.isCW,point:J})})}),H.sort((X,W)=>X.point.x-W.point.x),H}function E(O,z,L,k,H){(H==null||H==="")&&(H="nonzero");const X=new i.Vector2;O.boundingBox.getCenter(X);const W=[new i.Vector2(L,X.y),new i.Vector2(k,X.y)],J=v(W,O.boundingBox,z);J.sort((Me,me)=>Me.point.x-me.point.x);const Y=[],ce=[];J.forEach(Me=>{Me.identifier===O.identifier?Y.push(Me):ce.push(Me)});const ue=Y[0].point.x,ge=[];let le=0;for(;le<ce.length&&ce[le].point.x<ue;)ge.length>0&&ge[ge.length-1]===ce[le].identifier?ge.pop():ge.push(ce[le].identifier),le++;if(ge.push(O.identifier),H==="evenodd"){const Me=ge.length%2===0,me=ge[ge.length-2];return{identifier:O.identifier,isHole:Me,for:me}}else if(H==="nonzero"){let Me=!0,me=null,Te=null;for(let Ue=0;Ue<ge.length;Ue++){const Re=ge[Ue];Me?(Te=z[Re].isCW,Me=!1,me=Re):Te!==z[Re].isCW&&(Te=z[Re].isCW,Me=!0)}return{identifier:O.identifier,isHole:Me,for:me}}else Kp.warn('fill-rule: "'+H+'" is currently not implemented.')}let x=0,T=999999999,R=-999999999,F=t.subPaths.map(O=>{const z=O.getPoints();let L=-999999999,k=999999999,H=-999999999,X=999999999;for(let W=0;W<z.length;W++){const J=z[W];J.y>L&&(L=J.y),J.y<k&&(k=J.y),J.x>H&&(H=J.x),J.x<X&&(X=J.x)}return R<=H&&(R=H+1),T>=X&&(T=X-1),{curves:O.curves,points:z,isCW:i.ShapeUtils.isClockWise(z),identifier:x++,boundingBox:new i.Box2(new i.Vector2(X,k),new i.Vector2(H,L))}});F=F.filter(O=>O.points.length>1);const U=F.map(O=>E(O,F,T,R,t.userData.style.fillRule)),P=[];return F.forEach(O=>{if(!U[O.identifier].isHole){const L=new i.Shape;L.curves=O.curves,U.filter(H=>H.isHole&&H.for===O.identifier).forEach(H=>{const X=F[H.identifier],W=new i.Path;W.curves=X.curves,L.holes.push(W)}),P.push(L)}}),P}static getStrokeStyle(t,r,l,c,p){return t=t!==void 0?t:1,r=r!==void 0?r:"#000",l=l!==void 0?l:"miter",c=c!==void 0?c:"butt",p=p!==void 0?p:4,{strokeColor:r,strokeWidth:t,strokeLineJoin:l,strokeLineCap:c,strokeMiterLimit:p}}static pointsToStroke(t,r,l,c){const p=[],h=[],m=[];if(om.pointsToStrokeWithBuffers(t,r,l,c,p,h,m)===0)return null;const v=new i.BufferGeometry;return v.setAttribute("position",new i.Float32BufferAttribute(p,3)),v.setAttribute("normal",new i.Float32BufferAttribute(h,3)),v.setAttribute("uv",new i.Float32BufferAttribute(m,2)),v}static pointsToStrokeWithBuffers(t,r,l,c,p,h,m,v){const E=new i.Vector2,x=new i.Vector2,T=new i.Vector2,R=new i.Vector2,F=new i.Vector2,U=new i.Vector2,P=new i.Vector2,O=new i.Vector2,z=new i.Vector2,L=new i.Vector2,k=new i.Vector2,H=new i.Vector2,X=new i.Vector2,W=new i.Vector2,J=new i.Vector2,Y=new i.Vector2,ce=new i.Vector2;l=l!==void 0?l:12,c=c!==void 0?c:.001,v=v!==void 0?v:0,t=Kt(t);const ue=t.length;if(ue<2)return 0;const ge=t[0].equals(t[ue-1]);let le,Me=t[0],me;const Te=r.strokeWidth/2,Ue=1/(ue-1);let Re=0,Ge,De,Xe,Ce,Ee=!1,_e=0,oe=v*3,Ae=v*2;Be(t[0],t[1],E).multiplyScalar(Te),O.copy(t[0]).sub(E),z.copy(t[0]).add(E),L.copy(O),k.copy(z);for(let zt=1;zt<ue;zt++){le=t[zt],zt===ue-1?ge?me=t[1]:me=void 0:me=t[zt+1];const Bt=E;if(Be(Me,le,Bt),T.copy(Bt).multiplyScalar(Te),H.copy(le).sub(T),X.copy(le).add(T),Ge=Re+Ue,De=!1,me!==void 0){Be(le,me,x),T.copy(x).multiplyScalar(Te),W.copy(le).sub(T),J.copy(le).add(T),Xe=!0,T.subVectors(me,Me),Bt.dot(T)<0&&(Xe=!1),zt===1&&(Ee=Xe),T.subVectors(me,le),T.normalize();const Qe=Math.abs(Bt.dot(T));if(Qe!==0){const ze=Te/Qe;T.multiplyScalar(-ze),R.subVectors(le,Me),F.copy(R).setLength(ze).add(T),Y.copy(F).negate();const Ft=F.length(),bn=R.length();R.divideScalar(bn),U.subVectors(me,le);const Fn=U.length();switch(U.divideScalar(Fn),R.dot(Y)<bn&&U.dot(Y)<Fn&&(De=!0),ce.copy(F).add(le),Y.add(le),Ce=!1,De?Xe?(J.copy(Y),X.copy(Y)):(W.copy(Y),H.copy(Y)):vt(),r.strokeLineJoin){case"bevel":ht(Xe,De,Ge);break;case"round":dt(Xe,De),Xe?ke(le,H,W,Ge,0):ke(le,J,X,Ge,1);break;case"miter":case"miter-clip":default:const Gt=Te*r.strokeMiterLimit/Ft;if(Gt<1)if(r.strokeLineJoin!=="miter-clip"){ht(Xe,De,Ge);break}else dt(Xe,De),Xe?(U.subVectors(ce,H).multiplyScalar(Gt).add(H),P.subVectors(ce,W).multiplyScalar(Gt).add(W),ve(H,Ge,0),ve(U,Ge,0),ve(le,Ge,.5),ve(le,Ge,.5),ve(U,Ge,0),ve(P,Ge,0),ve(le,Ge,.5),ve(P,Ge,0),ve(W,Ge,0)):(U.subVectors(ce,X).multiplyScalar(Gt).add(X),P.subVectors(ce,J).multiplyScalar(Gt).add(J),ve(X,Ge,1),ve(U,Ge,1),ve(le,Ge,.5),ve(le,Ge,.5),ve(U,Ge,1),ve(P,Ge,1),ve(le,Ge,.5),ve(P,Ge,1),ve(J,Ge,1));else De?(Xe?(ve(z,Re,1),ve(O,Re,0),ve(ce,Ge,0),ve(z,Re,1),ve(ce,Ge,0),ve(Y,Ge,1)):(ve(z,Re,1),ve(O,Re,0),ve(ce,Ge,1),ve(O,Re,0),ve(Y,Ge,0),ve(ce,Ge,1)),Xe?W.copy(ce):J.copy(ce)):Xe?(ve(H,Ge,0),ve(ce,Ge,0),ve(le,Ge,.5),ve(le,Ge,.5),ve(ce,Ge,0),ve(W,Ge,0)):(ve(X,Ge,1),ve(ce,Ge,1),ve(le,Ge,.5),ve(le,Ge,.5),ve(ce,Ge,1),ve(J,Ge,1)),Ce=!0;break}}else vt()}else vt();!ge&&zt===ue-1&&$e(t[0],L,k,Xe,!0,Re),Re=Ge,Me=le,O.copy(W),z.copy(J)}if(!ge)$e(le,H,X,Xe,!1,Ge);else if(De&&p){let zt=ce,Bt=Y;Ee!==Xe&&(zt=Y,Bt=ce),Xe?(Ce||Ee)&&(Bt.toArray(p,0*3),Bt.toArray(p,3*3),Ce&&zt.toArray(p,1*3)):(Ce||!Ee)&&(Bt.toArray(p,1*3),Bt.toArray(p,3*3),Ce&&zt.toArray(p,0*3))}return _e;function Be(zt,Bt,Qe){return Qe.subVectors(Bt,zt),Qe.set(-Qe.y,Qe.x).normalize()}function ve(zt,Bt,Qe){p&&(p[oe]=zt.x,p[oe+1]=zt.y,p[oe+2]=0,h&&(h[oe]=0,h[oe+1]=0,h[oe+2]=1),oe+=3,m&&(m[Ae]=Bt,m[Ae+1]=Qe,Ae+=2)),_e+=3}function ke(zt,Bt,Qe,ze,Ft){E.copy(Bt).sub(zt).normalize(),x.copy(Qe).sub(zt).normalize();let bn=Math.PI;const Fn=E.dot(x);Math.abs(Fn)<1&&(bn=Math.abs(Math.acos(Fn))),bn/=l,T.copy(Bt);for(let Gt=0,Yn=l-1;Gt<Yn;Gt++)R.copy(T).rotateAround(zt,bn),ve(T,ze,Ft),ve(R,ze,Ft),ve(zt,ze,.5),T.copy(R);ve(R,ze,Ft),ve(Qe,ze,Ft),ve(zt,ze,.5)}function vt(){ve(z,Re,1),ve(O,Re,0),ve(H,Ge,0),ve(z,Re,1),ve(H,Ge,1),ve(X,Ge,0)}function ht(zt,Bt,Qe){Bt?zt?(ve(z,Re,1),ve(O,Re,0),ve(H,Ge,0),ve(z,Re,1),ve(H,Ge,0),ve(Y,Ge,1),ve(H,Qe,0),ve(W,Qe,0),ve(Y,Qe,.5)):(ve(z,Re,1),ve(O,Re,0),ve(X,Ge,1),ve(O,Re,0),ve(Y,Ge,0),ve(X,Ge,1),ve(X,Qe,1),ve(J,Qe,0),ve(Y,Qe,.5)):zt?(ve(H,Qe,0),ve(W,Qe,0),ve(le,Qe,.5)):(ve(X,Qe,1),ve(J,Qe,0),ve(le,Qe,.5))}function dt(zt,Bt){Bt&&(zt?(ve(z,Re,1),ve(O,Re,0),ve(H,Ge,0),ve(z,Re,1),ve(H,Ge,0),ve(Y,Ge,1),ve(H,Re,0),ve(le,Ge,.5),ve(Y,Ge,1),ve(le,Ge,.5),ve(W,Re,0),ve(Y,Ge,1)):(ve(z,Re,1),ve(O,Re,0),ve(X,Ge,1),ve(O,Re,0),ve(Y,Ge,0),ve(X,Ge,1),ve(X,Re,1),ve(Y,Ge,0),ve(le,Ge,.5),ve(le,Ge,.5),ve(Y,Ge,0),ve(J,Re,1)))}function $e(zt,Bt,Qe,ze,Ft,bn){switch(r.strokeLineCap){case"round":Ft?ke(zt,Qe,Bt,bn,.5):ke(zt,Bt,Qe,bn,.5);break;case"square":if(Ft)E.subVectors(Bt,zt),x.set(E.y,-E.x),T.addVectors(E,x).add(zt),R.subVectors(x,E).add(zt),ze?(T.toArray(p,1*3),R.toArray(p,0*3),R.toArray(p,3*3)):(T.toArray(p,1*3),T.toArray(p,3*3),R.toArray(p,0*3));else{E.subVectors(Qe,zt),x.set(E.y,-E.x),T.addVectors(E,x).add(zt),R.subVectors(x,E).add(zt);const Fn=p.length;ze?(T.toArray(p,Fn-1*3),R.toArray(p,Fn-2*3),R.toArray(p,Fn-4*3)):(T.toArray(p,Fn-2*3),R.toArray(p,Fn-1*3),R.toArray(p,Fn-4*3))}break;case"butt":default:break}}function Kt(zt){let Bt=!1;for(let ze=1,Ft=zt.length-1;ze<Ft;ze++)if(zt[ze].distanceTo(zt[ze+1])<c){Bt=!0;break}if(!Bt)return zt;const Qe=[];Qe.push(zt[0]);for(let ze=1,Ft=zt.length-1;ze<Ft;ze++)zt[ze].distanceTo(zt[ze+1])>=c&&Qe.push(zt[ze]);return Qe.push(zt[zt.length-1]),Qe}}}const lv=(0,d.forwardRef)(function(x,E){var T=x,{src:t,skipFill:r,skipStrokes:l,fillMaterial:c,strokeMaterial:p,fillMeshProps:h,strokeMeshProps:m}=T,v=Cn(T,["src","skipFill","skipStrokes","fillMaterial","strokeMaterial","fillMeshProps","strokeMeshProps"]);const R=(0,_.D)(om,t.startsWith("<svg")?`data:image/svg+xml;utf8,${t}`:t),F=(0,d.useMemo)(()=>l?[]:R.paths.map(U=>{var P;return((P=U.userData)==null?void 0:P.style.stroke)===void 0||U.userData.style.stroke==="none"?null:U.subPaths.map(O=>om.pointsToStroke(O.getPoints(),U.userData.style))}),[R,l]);return(0,d.useEffect)(()=>()=>F.forEach(U=>U&&U.map(P=>P.dispose())),[F]),d.createElement("object3D",(0,C.Z)({ref:E},v),d.createElement("object3D",{scale:[1,-1,1]},R.paths.map((U,P)=>{var O,z;return d.createElement(d.Fragment,{key:P},!r&&((O=U.userData)==null?void 0:O.style.fill)!==void 0&&U.userData.style.fill!=="none"&&om.createShapes(U).map((L,k)=>d.createElement("mesh",(0,C.Z)({key:k},h),d.createElement("shapeGeometry",{args:[L]}),d.createElement("meshBasicMaterial",(0,C.Z)({color:U.userData.style.fill,opacity:U.userData.style.fillOpacity,transparent:!0,side:i.DoubleSide,depthWrite:!1},c)))),!l&&((z=U.userData)==null?void 0:z.style.stroke)!==void 0&&U.userData.style.stroke!=="none"&&U.subPaths.map((L,k)=>d.createElement("mesh",(0,C.Z)({key:k,geometry:F[P][k]},m),d.createElement("meshBasicMaterial",(0,C.Z)({color:U.userData.style.stroke,opacity:U.userData.style.strokeOpacity,transparent:!0,side:i.DoubleSide,depthWrite:!1},p)))))})))});var B0=A(5108);const Ch=new WeakMap;class X1 extends i.Loader{constructor(t){super(t),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(t){return this.decoderPath=t,this}setDecoderConfig(t){return this.decoderConfig=t,this}setWorkerLimit(t){return this.workerLimit=t,this}load(t,r,l,c){const p=new i.FileLoader(this.manager);p.setPath(this.path),p.setResponseType("arraybuffer"),p.setRequestHeader(this.requestHeader),p.setWithCredentials(this.withCredentials),p.load(t,h=>{const m={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(h,m).then(r).catch(c)},l,c)}decodeDracoFile(t,r,l,c){const p={attributeIDs:l||this.defaultAttributeIDs,attributeTypes:c||this.defaultAttributeTypes,useUniqueIDs:!!l};this.decodeGeometry(t,p).then(r)}decodeGeometry(t,r){for(const v in r.attributeTypes){const E=r.attributeTypes[v];E.BYTES_PER_ELEMENT!==void 0&&(r.attributeTypes[v]=E.name)}const l=JSON.stringify(r);if(Ch.has(t)){const v=Ch.get(t);if(v.key===l)return v.promise;if(t.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let c;const p=this.workerNextTaskID++,h=t.byteLength,m=this._getWorker(p,h).then(v=>(c=v,new Promise((E,x)=>{c._callbacks[p]={resolve:E,reject:x},c.postMessage({type:"decode",id:p,taskConfig:r,buffer:t},[t])}))).then(v=>this._createGeometry(v.geometry));return m.catch(()=>!0).then(()=>{c&&p&&this._releaseTask(c,p)}),Ch.set(t,{key:l,promise:m}),m}_createGeometry(t){const r=new i.BufferGeometry;t.index&&r.setIndex(new i.BufferAttribute(t.index.array,1));for(let l=0;l<t.attributes.length;l++){const c=t.attributes[l],p=c.name,h=c.array,m=c.itemSize;r.setAttribute(p,new i.BufferAttribute(h,m))}return r}_loadLibrary(t,r){const l=new i.FileLoader(this.manager);return l.setPath(this.decoderPath),l.setResponseType(r),l.setWithCredentials(this.withCredentials),new Promise((c,p)=>{l.load(t,c,void 0,p)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const t=typeof WebAssembly!="object"||this.decoderConfig.type==="js",r=[];return t?r.push(this._loadLibrary("draco_decoder.js","text")):(r.push(this._loadLibrary("draco_wasm_wrapper.js","text")),r.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(r).then(l=>{const c=l[0];t||(this.decoderConfig.wasmBinary=l[1]);const p=b3.toString(),h=["/* draco decoder */",c,"","/* worker */",p.substring(p.indexOf("{")+1,p.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([h]))}),this.decoderPending}_getWorker(t,r){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const c=new Worker(this.workerSourceURL);c._callbacks={},c._taskCosts={},c._taskLoad=0,c.postMessage({type:"init",decoderConfig:this.decoderConfig}),c.onmessage=function(p){const h=p.data;switch(h.type){case"decode":c._callbacks[h.id].resolve(h);break;case"error":c._callbacks[h.id].reject(h);break;default:B0.error('THREE.DRACOLoader: Unexpected message, "'+h.type+'"')}},this.workerPool.push(c)}else this.workerPool.sort(function(c,p){return c._taskLoad>p._taskLoad?-1:1});const l=this.workerPool[this.workerPool.length-1];return l._taskCosts[t]=r,l._taskLoad+=r,l})}_releaseTask(t,r){t._taskLoad-=t._taskCosts[r],delete t._callbacks[r],delete t._taskCosts[r]}debug(){B0.log("Task load: ",this.workerPool.map(t=>t._taskLoad))}dispose(){for(let t=0;t<this.workerPool.length;++t)this.workerPool[t].terminate();return this.workerPool.length=0,this}}function b3(){let s,t;onmessage=function(h){const m=h.data;switch(m.type){case"init":s=m.decoderConfig,t=new Promise(function(x){s.onModuleLoaded=function(T){x({draco:T})},DracoDecoderModule(s)});break;case"decode":const v=m.buffer,E=m.taskConfig;t.then(x=>{const T=x.draco,R=new T.Decoder,F=new T.DecoderBuffer;F.Init(new Int8Array(v),v.byteLength);try{const U=r(T,R,F,E),P=U.attributes.map(O=>O.array.buffer);U.index&&P.push(U.index.array.buffer),self.postMessage({type:"decode",id:m.id,geometry:U},P)}catch(U){B0.error(U),self.postMessage({type:"error",id:m.id,error:U.message})}finally{T.destroy(F),T.destroy(R)}});break}};function r(h,m,v,E){const x=E.attributeIDs,T=E.attributeTypes;let R,F;const U=m.GetEncodedGeometryType(v);if(U===h.TRIANGULAR_MESH)R=new h.Mesh,F=m.DecodeBufferToMesh(v,R);else if(U===h.POINT_CLOUD)R=new h.PointCloud,F=m.DecodeBufferToPointCloud(v,R);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!F.ok()||R.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+F.error_msg());const P={index:null,attributes:[]};for(const O in x){const z=self[T[O]];let L,k;if(E.useUniqueIDs)k=x[O],L=m.GetAttributeByUniqueId(R,k);else{if(k=m.GetAttributeId(R,h[x[O]]),k===-1)continue;L=m.GetAttribute(R,k)}P.attributes.push(c(h,m,R,O,z,L))}return U===h.TRIANGULAR_MESH&&(P.index=l(h,m,R)),h.destroy(R),P}function l(h,m,v){const x=v.num_faces()*3,T=x*4,R=h._malloc(T);m.GetTrianglesUInt32Array(v,T,R);const F=new Uint32Array(h.HEAPF32.buffer,R,x).slice();return h._free(R),{array:F,itemSize:1}}function c(h,m,v,E,x,T){const R=T.num_components(),U=v.num_points()*R,P=U*x.BYTES_PER_ELEMENT,O=p(h,x),z=h._malloc(P);m.GetAttributeDataArrayForAllPoints(v,T,O,P,z);const L=new x(h.HEAPF32.buffer,z,U).slice();return h._free(z),{name:E,array:L,itemSize:R}}function p(h,m){switch(m){case Float32Array:return h.DT_FLOAT32;case Int8Array:return h.DT_INT8;case Int16Array:return h.DT_INT16;case Int32Array:return h.DT_INT32;case Uint8Array:return h.DT_UINT8;case Uint16Array:return h.DT_UINT16;case Uint32Array:return h.DT_UINT32}}}let Sc;const R0=()=>{if(Sc)return Sc;const s="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",t="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB",r=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),l=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let c=s;WebAssembly.validate(r)&&(c=t);let p;const h=WebAssembly.instantiate(m(c),{}).then(T=>{p=T.instance,p.exports.__wasm_call_ctors()});function m(T){const R=new Uint8Array(T.length);for(let U=0;U<T.length;++U){const P=T.charCodeAt(U);R[U]=P>96?P-71:P>64?P-65:P>47?P+4:P>46?63:62}let F=0;for(let U=0;U<T.length;++U)R[F++]=R[U]<60?l[R[U]]:(R[U]-60)*64+R[++U];return R.buffer.slice(0,F)}function v(T,R,F,U,P,O){const z=p.exports.sbrk,L=F+3&-4,k=z(L*U),H=z(P.length),X=new Uint8Array(p.exports.memory.buffer);X.set(P,H);const W=T(k,F,U,H,P.length);if(W===0&&O&&O(k,L,U),R.set(X.subarray(k,k+F*U)),z(k-z(0)),W!==0)throw new Error(`Malformed buffer data: ${W}`)}const E={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},x={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Sc={ready:h,supported:!0,decodeVertexBuffer(T,R,F,U,P){v(p.exports.meshopt_decodeVertexBuffer,T,R,F,U,p.exports[E[P]])},decodeIndexBuffer(T,R,F,U){v(p.exports.meshopt_decodeIndexBuffer,T,R,F,U)},decodeIndexSequence(T,R,F,U){v(p.exports.meshopt_decodeIndexSequence,T,R,F,U)},decodeGltfBuffer(T,R,F,U,P,O){v(p.exports[x[P]],T,R,F,U,p.exports[E[O]])}},Sc};var Xp=A(5108);class Sh extends i.Loader{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(r){return new lm(r)}),this.register(function(r){return new pv(r)}),this.register(function(r){return new uv(r)}),this.register(function(r){return new dv(r)}),this.register(function(r){return new Pf(r)}),this.register(function(r){return new cm(r)}),this.register(function(r){return new pm(r)}),this.register(function(r){return new um(r)}),this.register(function(r){return new am(r)}),this.register(function(r){return new dm(r)}),this.register(function(r){return new x3(r)}),this.register(function(r){return new cv(r)}),this.register(function(r){return new sm(r)}),this.register(function(r){return new hv(r)}),this.register(function(r){return new Y1(r)})}load(t,r,l,c){const p=this;let h;this.resourcePath!==""?h=this.resourcePath:this.path!==""?h=this.path:h=i.LoaderUtils.extractUrlBase(t),this.manager.itemStart(t);const m=function(E){c?c(E):Xp.error(E),p.manager.itemError(t),p.manager.itemEnd(t)},v=new i.FileLoader(this.manager);v.setPath(this.path),v.setResponseType("arraybuffer"),v.setRequestHeader(this.requestHeader),v.setWithCredentials(this.withCredentials),v.load(t,function(E){try{p.parse(E,h,function(x){r(x),p.manager.itemEnd(t)},m)}catch(x){m(x)}},l,m)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,r,l,c){let p;const h={},m={};if(typeof t=="string")p=JSON.parse(t);else if(t instanceof ArrayBuffer)if(i.LoaderUtils.decodeText(new Uint8Array(t.slice(0,4)))===J1){try{h[ro.KHR_BINARY_GLTF]=new fv(t)}catch(x){c&&c(x);return}p=JSON.parse(h[ro.KHR_BINARY_GLTF].content)}else p=JSON.parse(i.LoaderUtils.decodeText(new Uint8Array(t)));else p=t;if(p.asset===void 0||p.asset.version[0]<2){c&&c(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const v=new C3(p,{path:r||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});v.fileLoader.setRequestHeader(this.requestHeader);for(let E=0;E<this.pluginCallbacks.length;E++){const x=this.pluginCallbacks[E](v);m[x.name]=x,h[x.name]=!0}if(p.extensionsUsed)for(let E=0;E<p.extensionsUsed.length;++E){const x=p.extensionsUsed[E],T=p.extensionsRequired||[];switch(x){case ro.KHR_MATERIALS_UNLIT:h[x]=new Lf;break;case ro.KHR_DRACO_MESH_COMPRESSION:h[x]=new gv(p,this.dracoLoader);break;case ro.KHR_TEXTURE_TRANSFORM:h[x]=new mv;break;case ro.KHR_MESH_QUANTIZATION:h[x]=new Av;break;default:T.indexOf(x)>=0&&m[x]===void 0&&Xp.warn('THREE.GLTFLoader: Unknown extension "'+x+'".')}}v.setExtensions(h),v.setPlugins(m),v.parse(l,c)}parseAsync(t,r){const l=this;return new Promise(function(c,p){l.parse(t,r,c,p)})}}function M3(){let s={};return{get:function(t){return s[t]},add:function(t,r){s[t]=r},remove:function(t){delete s[t]},removeAll:function(){s={}}}}const ro={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class sm{constructor(t){this.parser=t,this.name=ro.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,r=this.parser.json.nodes||[];for(let l=0,c=r.length;l<c;l++){const p=r[l];p.extensions&&p.extensions[this.name]&&p.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,p.extensions[this.name].light)}}_loadLight(t){const r=this.parser,l="light:"+t;let c=r.cache.get(l);if(c)return c;const p=r.json,v=((p.extensions&&p.extensions[this.name]||{}).lights||[])[t];let E;const x=new i.Color(16777215);v.color!==void 0&&x.fromArray(v.color);const T=v.range!==void 0?v.range:0;switch(v.type){case"directional":E=new i.DirectionalLight(x),E.target.position.set(0,0,-1),E.add(E.target);break;case"point":E=new i.PointLight(x),E.distance=T;break;case"spot":E=new i.SpotLight(x),E.distance=T,v.spot=v.spot||{},v.spot.innerConeAngle=v.spot.innerConeAngle!==void 0?v.spot.innerConeAngle:0,v.spot.outerConeAngle=v.spot.outerConeAngle!==void 0?v.spot.outerConeAngle:Math.PI/4,E.angle=v.spot.outerConeAngle,E.penumbra=1-v.spot.innerConeAngle/v.spot.outerConeAngle,E.target.position.set(0,0,-1),E.add(E.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+v.type)}return E.position.set(0,0,0),E.decay=2,nc(E,v),v.intensity!==void 0&&(E.intensity=v.intensity),E.name=r.createUniqueName(v.name||"light_"+t),c=Promise.resolve(E),r.cache.add(l,c),c}getDependency(t,r){if(t==="light")return this._loadLight(r)}createNodeAttachment(t){const r=this,l=this.parser,p=l.json.nodes[t],m=(p.extensions&&p.extensions[this.name]||{}).light;return m===void 0?null:this._loadLight(m).then(function(v){return l._getNodeRef(r.cache,m,v)})}}class Lf{constructor(){this.name=ro.KHR_MATERIALS_UNLIT}getMaterialType(){return i.MeshBasicMaterial}extendParams(t,r,l){const c=[];t.color=new i.Color(1,1,1),t.opacity=1;const p=r.pbrMetallicRoughness;if(p){if(Array.isArray(p.baseColorFactor)){const h=p.baseColorFactor;t.color.fromArray(h),t.opacity=h[3]}p.baseColorTexture!==void 0&&c.push(l.assignTexture(t,"map",p.baseColorTexture,3001))}return Promise.all(c)}}class am{constructor(t){this.parser=t,this.name=ro.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,r){const c=this.parser.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=c.extensions[this.name].emissiveStrength;return p!==void 0&&(r.emissiveIntensity=p),Promise.resolve()}}class lm{constructor(t){this.parser=t,this.name=ro.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:i.MeshPhysicalMaterial}extendMaterialParams(t,r){const l=this.parser,c=l.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=[],h=c.extensions[this.name];if(h.clearcoatFactor!==void 0&&(r.clearcoat=h.clearcoatFactor),h.clearcoatTexture!==void 0&&p.push(l.assignTexture(r,"clearcoatMap",h.clearcoatTexture)),h.clearcoatRoughnessFactor!==void 0&&(r.clearcoatRoughness=h.clearcoatRoughnessFactor),h.clearcoatRoughnessTexture!==void 0&&p.push(l.assignTexture(r,"clearcoatRoughnessMap",h.clearcoatRoughnessTexture)),h.clearcoatNormalTexture!==void 0&&(p.push(l.assignTexture(r,"clearcoatNormalMap",h.clearcoatNormalTexture)),h.clearcoatNormalTexture.scale!==void 0)){const m=h.clearcoatNormalTexture.scale;r.clearcoatNormalScale=new i.Vector2(m,m)}return Promise.all(p)}}class x3{constructor(t){this.parser=t,this.name=ro.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:i.MeshPhysicalMaterial}extendMaterialParams(t,r){const l=this.parser,c=l.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=[],h=c.extensions[this.name];return h.iridescenceFactor!==void 0&&(r.iridescence=h.iridescenceFactor),h.iridescenceTexture!==void 0&&p.push(l.assignTexture(r,"iridescenceMap",h.iridescenceTexture)),h.iridescenceIor!==void 0&&(r.iridescenceIOR=h.iridescenceIor),r.iridescenceThicknessRange===void 0&&(r.iridescenceThicknessRange=[100,400]),h.iridescenceThicknessMinimum!==void 0&&(r.iridescenceThicknessRange[0]=h.iridescenceThicknessMinimum),h.iridescenceThicknessMaximum!==void 0&&(r.iridescenceThicknessRange[1]=h.iridescenceThicknessMaximum),h.iridescenceThicknessTexture!==void 0&&p.push(l.assignTexture(r,"iridescenceThicknessMap",h.iridescenceThicknessTexture)),Promise.all(p)}}class Pf{constructor(t){this.parser=t,this.name=ro.KHR_MATERIALS_SHEEN}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:i.MeshPhysicalMaterial}extendMaterialParams(t,r){const l=this.parser,c=l.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=[];r.sheenColor=new i.Color(0,0,0),r.sheenRoughness=0,r.sheen=1;const h=c.extensions[this.name];return h.sheenColorFactor!==void 0&&r.sheenColor.fromArray(h.sheenColorFactor),h.sheenRoughnessFactor!==void 0&&(r.sheenRoughness=h.sheenRoughnessFactor),h.sheenColorTexture!==void 0&&p.push(l.assignTexture(r,"sheenColorMap",h.sheenColorTexture,3001)),h.sheenRoughnessTexture!==void 0&&p.push(l.assignTexture(r,"sheenRoughnessMap",h.sheenRoughnessTexture)),Promise.all(p)}}class cm{constructor(t){this.parser=t,this.name=ro.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:i.MeshPhysicalMaterial}extendMaterialParams(t,r){const l=this.parser,c=l.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=[],h=c.extensions[this.name];return h.transmissionFactor!==void 0&&(r.transmission=h.transmissionFactor),h.transmissionTexture!==void 0&&p.push(l.assignTexture(r,"transmissionMap",h.transmissionTexture)),Promise.all(p)}}class pm{constructor(t){this.parser=t,this.name=ro.KHR_MATERIALS_VOLUME}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:i.MeshPhysicalMaterial}extendMaterialParams(t,r){const l=this.parser,c=l.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=[],h=c.extensions[this.name];r.thickness=h.thicknessFactor!==void 0?h.thicknessFactor:0,h.thicknessTexture!==void 0&&p.push(l.assignTexture(r,"thicknessMap",h.thicknessTexture)),r.attenuationDistance=h.attenuationDistance||1/0;const m=h.attenuationColor||[1,1,1];return r.attenuationColor=new i.Color(m[0],m[1],m[2]),Promise.all(p)}}class um{constructor(t){this.parser=t,this.name=ro.KHR_MATERIALS_IOR}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:i.MeshPhysicalMaterial}extendMaterialParams(t,r){const c=this.parser.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=c.extensions[this.name];return r.ior=p.ior!==void 0?p.ior:1.5,Promise.resolve()}}class dm{constructor(t){this.parser=t,this.name=ro.KHR_MATERIALS_SPECULAR}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:i.MeshPhysicalMaterial}extendMaterialParams(t,r){const l=this.parser,c=l.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=[],h=c.extensions[this.name];r.specularIntensity=h.specularFactor!==void 0?h.specularFactor:1,h.specularTexture!==void 0&&p.push(l.assignTexture(r,"specularIntensityMap",h.specularTexture));const m=h.specularColorFactor||[1,1,1];return r.specularColor=new i.Color(m[0],m[1],m[2]),h.specularColorTexture!==void 0&&p.push(l.assignTexture(r,"specularColorMap",h.specularColorTexture,3001)),Promise.all(p)}}class cv{constructor(t){this.parser=t,this.name=ro.KHR_MATERIALS_ANISOTROPY}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:i.MeshPhysicalMaterial}extendMaterialParams(t,r){const l=this.parser,c=l.json.materials[t];if(!c.extensions||!c.extensions[this.name])return Promise.resolve();const p=[],h=c.extensions[this.name];return h.anisotropyStrength!==void 0&&(r.anisotropy=h.anisotropyStrength),h.anisotropyRotation!==void 0&&(r.anisotropyRotation=h.anisotropyRotation),h.anisotropyTexture!==void 0&&p.push(l.assignTexture(r,"anisotropyMap",h.anisotropyTexture)),Promise.all(p)}}class pv{constructor(t){this.parser=t,this.name=ro.KHR_TEXTURE_BASISU}loadTexture(t){const r=this.parser,l=r.json,c=l.textures[t];if(!c.extensions||!c.extensions[this.name])return null;const p=c.extensions[this.name],h=r.options.ktx2Loader;if(!h){if(l.extensionsRequired&&l.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return r.loadTextureImage(t,p.source,h)}}class uv{constructor(t){this.parser=t,this.name=ro.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const r=this.name,l=this.parser,c=l.json,p=c.textures[t];if(!p.extensions||!p.extensions[r])return null;const h=p.extensions[r],m=c.images[h.source];let v=l.textureLoader;if(m.uri){const E=l.options.manager.getHandler(m.uri);E!==null&&(v=E)}return this.detectSupport().then(function(E){if(E)return l.loadTextureImage(t,h.source,v);if(c.extensionsRequired&&c.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return l.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const r=new Image;r.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",r.onload=r.onerror=function(){t(r.height===1)}})),this.isSupported}}class dv{constructor(t){this.parser=t,this.name=ro.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(t){const r=this.name,l=this.parser,c=l.json,p=c.textures[t];if(!p.extensions||!p.extensions[r])return null;const h=p.extensions[r],m=c.images[h.source];let v=l.textureLoader;if(m.uri){const E=l.options.manager.getHandler(m.uri);E!==null&&(v=E)}return this.detectSupport().then(function(E){if(E)return l.loadTextureImage(t,h.source,v);if(c.extensionsRequired&&c.extensionsRequired.indexOf(r)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return l.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const r=new Image;r.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",r.onload=r.onerror=function(){t(r.height===1)}})),this.isSupported}}class hv{constructor(t){this.name=ro.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const r=this.parser.json,l=r.bufferViews[t];if(l.extensions&&l.extensions[this.name]){const c=l.extensions[this.name],p=this.parser.getDependency("buffer",c.buffer),h=this.parser.options.meshoptDecoder;if(!h||!h.supported){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return p.then(function(m){const v=c.byteOffset||0,E=c.byteLength||0,x=c.count,T=c.byteStride,R=new Uint8Array(m,v,E);return h.decodeGltfBufferAsync?h.decodeGltfBufferAsync(x,T,R,c.mode,c.filter).then(function(F){return F.buffer}):h.ready.then(function(){const F=new ArrayBuffer(x*T);return h.decodeGltfBuffer(new Uint8Array(F),x,T,R,c.mode,c.filter),F})})}else return null}}class Y1{constructor(t){this.name=ro.EXT_MESH_GPU_INSTANCING,this.parser=t}createNodeMesh(t){const r=this.parser.json,l=r.nodes[t];if(!l.extensions||!l.extensions[this.name]||l.mesh===void 0)return null;const c=r.meshes[l.mesh];for(const E of c.primitives)if(E.mode!==Tc.TRIANGLES&&E.mode!==Tc.TRIANGLE_STRIP&&E.mode!==Tc.TRIANGLE_FAN&&E.mode!==void 0)return null;const h=l.extensions[this.name].attributes,m=[],v={};for(const E in h)m.push(this.parser.getDependency("accessor",h[E]).then(x=>(v[E]=x,v[E])));return m.length<1?null:(m.push(this.parser.createNodeMesh(t)),Promise.all(m).then(E=>{const x=E.pop(),T=x.isGroup?x.children:[x],R=E[0].count,F=[];for(const U of T){const P=new i.Matrix4,O=new i.Vector3,z=new i.Quaternion,L=new i.Vector3(1,1,1),k=new i.InstancedMesh(U.geometry,U.material,R);for(let H=0;H<R;H++)v.TRANSLATION&&O.fromBufferAttribute(v.TRANSLATION,H),v.ROTATION&&z.fromBufferAttribute(v.ROTATION,H),v.SCALE&&L.fromBufferAttribute(v.SCALE,H),k.setMatrixAt(H,P.compose(O,z,L));for(const H in v)H!=="TRANSLATION"&&H!=="ROTATION"&&H!=="SCALE"&&U.geometry.setAttribute(H,v[H]);i.Object3D.prototype.copy.call(k,U),this.parser.assignFinalMaterial(k),F.push(k)}return x.isGroup?(x.clear(),x.add(...F),x):F[0]}))}}const J1="glTF",kf=12,Z1={JSON:1313821514,BIN:5130562};class fv{constructor(t){this.name=ro.KHR_BINARY_GLTF,this.content=null,this.body=null;const r=new DataView(t,0,kf);if(this.header={magic:i.LoaderUtils.decodeText(new Uint8Array(t.slice(0,4))),version:r.getUint32(4,!0),length:r.getUint32(8,!0)},this.header.magic!==J1)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const l=this.header.length-kf,c=new DataView(t,kf);let p=0;for(;p<l;){const h=c.getUint32(p,!0);p+=4;const m=c.getUint32(p,!0);if(p+=4,m===Z1.JSON){const v=new Uint8Array(t,kf+p,h);this.content=i.LoaderUtils.decodeText(v)}else if(m===Z1.BIN){const v=kf+p;this.body=t.slice(v,v+h)}p+=h}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class gv{constructor(t,r){if(!r)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=ro.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=r,this.dracoLoader.preload()}decodePrimitive(t,r){const l=this.json,c=this.dracoLoader,p=t.extensions[this.name].bufferView,h=t.extensions[this.name].attributes,m={},v={},E={};for(const x in h){const T=eA[x]||x.toLowerCase();m[T]=h[x]}for(const x in t.attributes){const T=eA[x]||x.toLowerCase();if(h[x]!==void 0){const R=l.accessors[t.attributes[x]],F=Md[R.componentType];E[T]=F.name,v[T]=R.normalized===!0}}return r.getDependency("bufferView",p).then(function(x){return new Promise(function(T){c.decodeDracoFile(x,function(R){for(const F in R.attributes){const U=R.attributes[F],P=v[F];P!==void 0&&(U.normalized=P)}T(R)},m,E)})})}}class mv{constructor(){this.name=ro.KHR_TEXTURE_TRANSFORM}extendTexture(t,r){return(r.texCoord===void 0||r.texCoord===t.channel)&&r.offset===void 0&&r.rotation===void 0&&r.scale===void 0||(t=t.clone(),r.texCoord!==void 0&&(t.channel=r.texCoord),r.offset!==void 0&&t.offset.fromArray(r.offset),r.rotation!==void 0&&(t.rotation=r.rotation),r.scale!==void 0&&t.repeat.fromArray(r.scale),t.needsUpdate=!0),t}}class Av{constructor(){this.name=ro.KHR_MESH_QUANTIZATION}}class wc extends i.Interpolant{constructor(t,r,l,c){super(t,r,l,c)}copySampleValue_(t){const r=this.resultBuffer,l=this.sampleValues,c=this.valueSize,p=t*c*3+c;for(let h=0;h!==c;h++)r[h]=l[p+h];return r}interpolate_(t,r,l,c){const p=this.resultBuffer,h=this.sampleValues,m=this.valueSize,v=m*2,E=m*3,x=c-r,T=(l-r)/x,R=T*T,F=R*T,U=t*E,P=U-E,O=-2*F+3*R,z=F-R,L=1-O,k=z-R+T;for(let H=0;H!==m;H++){const X=h[P+H+m],W=h[P+H+v]*x,J=h[U+H+m],Y=h[U+H]*x;p[H]=L*X+k*W+O*J+z*Y}return p}}const wh=new i.Quaternion;class q1 extends wc{interpolate_(t,r,l,c){const p=super.interpolate_(t,r,l,c);return wh.fromArray(p).normalize().toArray(p),p}}const Tc={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},Md={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},I0={9728:i.NearestFilter,9729:i.LinearFilter,9984:i.NearestMipmapNearestFilter,9985:i.LinearMipmapNearestFilter,9986:i.NearestMipmapLinearFilter,9987:i.LinearMipmapLinearFilter},yv={33071:i.ClampToEdgeWrapping,33648:i.MirroredRepeatWrapping,10497:i.RepeatWrapping},$1={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},eA=os(Zn({POSITION:"position",NORMAL:"normal",TANGENT:"tangent"},i.REVISION.replace(/\D+/g,"")>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"}),{COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"}),Wc={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},vv={CUBICSPLINE:void 0,LINEAR:i.InterpolateLinear,STEP:i.InterpolateDiscrete},hm={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function _v(s){return s.DefaultMaterial===void 0&&(s.DefaultMaterial=new i.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:i.FrontSide})),s.DefaultMaterial}function qa(s,t,r){for(const l in r.extensions)s[l]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[l]=r.extensions[l])}function nc(s,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(s.userData,t.extras):Xp.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function tA(s,t,r){let l=!1,c=!1,p=!1;for(let E=0,x=t.length;E<x;E++){const T=t[E];if(T.POSITION!==void 0&&(l=!0),T.NORMAL!==void 0&&(c=!0),T.COLOR_0!==void 0&&(p=!0),l&&c&&p)break}if(!l&&!c&&!p)return Promise.resolve(s);const h=[],m=[],v=[];for(let E=0,x=t.length;E<x;E++){const T=t[E];if(l){const R=T.POSITION!==void 0?r.getDependency("accessor",T.POSITION):s.attributes.position;h.push(R)}if(c){const R=T.NORMAL!==void 0?r.getDependency("accessor",T.NORMAL):s.attributes.normal;m.push(R)}if(p){const R=T.COLOR_0!==void 0?r.getDependency("accessor",T.COLOR_0):s.attributes.color;v.push(R)}}return Promise.all([Promise.all(h),Promise.all(m),Promise.all(v)]).then(function(E){const x=E[0],T=E[1],R=E[2];return l&&(s.morphAttributes.position=x),c&&(s.morphAttributes.normal=T),p&&(s.morphAttributes.color=R),s.morphTargetsRelative=!0,s})}function fm(s,t){if(s.updateMorphTargets(),t.weights!==void 0)for(let r=0,l=t.weights.length;r<l;r++)s.morphTargetInfluences[r]=t.weights[r];if(t.extras&&Array.isArray(t.extras.targetNames)){const r=t.extras.targetNames;if(s.morphTargetInfluences.length===r.length){s.morphTargetDictionary={};for(let l=0,c=r.length;l<c;l++)s.morphTargetDictionary[r[l]]=l}else Xp.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Ev(s){let t;const r=s.extensions&&s.extensions[ro.KHR_DRACO_MESH_COMPRESSION];if(r?t="draco:"+r.bufferView+":"+r.indices+":"+xd(r.attributes):t=s.indices+":"+xd(s.attributes)+":"+s.mode,s.targets!==void 0)for(let l=0,c=s.targets.length;l<c;l++)t+=":"+xd(s.targets[l]);return t}function xd(s){let t="";const r=Object.keys(s).sort();for(let l=0,c=r.length;l<c;l++)t+=r[l]+":"+s[r[l]]+";";return t}function Ou(s){switch(s){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function gm(s){return s.search(/\.jpe?g($|\?)/i)>0||s.search(/^data\:image\/jpeg/)===0?"image/jpeg":s.search(/\.webp($|\?)/i)>0||s.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const mm=new i.Matrix4;class C3{constructor(t={},r={}){this.json=t,this.extensions={},this.plugins={},this.options=r,this.cache=new M3,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let l=!1,c=!1,p=-1;typeof navigator!="undefined"&&typeof navigator.userAgent!="undefined"&&(l=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,c=navigator.userAgent.indexOf("Firefox")>-1,p=c?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap=="undefined"||l||c&&p<98?this.textureLoader=new i.TextureLoader(this.options.manager):this.textureLoader=new i.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new i.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,r){const l=this,c=this.json,p=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(h){return h._markDefs&&h._markDefs()}),Promise.all(this._invokeAll(function(h){return h.beforeRoot&&h.beforeRoot()})).then(function(){return Promise.all([l.getDependencies("scene"),l.getDependencies("animation"),l.getDependencies("camera")])}).then(function(h){const m={scene:h[0][c.scene||0],scenes:h[0],animations:h[1],cameras:h[2],asset:c.asset,parser:l,userData:{}};qa(p,m,c),nc(m,c),Promise.all(l._invokeAll(function(v){return v.afterRoot&&v.afterRoot(m)})).then(function(){t(m)})}).catch(r)}_markDefs(){const t=this.json.nodes||[],r=this.json.skins||[],l=this.json.meshes||[];for(let c=0,p=r.length;c<p;c++){const h=r[c].joints;for(let m=0,v=h.length;m<v;m++)t[h[m]].isBone=!0}for(let c=0,p=t.length;c<p;c++){const h=t[c];h.mesh!==void 0&&(this._addNodeRef(this.meshCache,h.mesh),h.skin!==void 0&&(l[h.mesh].isSkinnedMesh=!0)),h.camera!==void 0&&this._addNodeRef(this.cameraCache,h.camera)}}_addNodeRef(t,r){r!==void 0&&(t.refs[r]===void 0&&(t.refs[r]=t.uses[r]=0),t.refs[r]++)}_getNodeRef(t,r,l){if(t.refs[r]<=1)return l;const c=l.clone(),p=(h,m)=>{const v=this.associations.get(h);v!=null&&this.associations.set(m,v);for(const[E,x]of h.children.entries())p(x,m.children[E])};return p(l,c),c.name+="_instance_"+t.uses[r]++,c}_invokeOne(t){const r=Object.values(this.plugins);r.push(this);for(let l=0;l<r.length;l++){const c=t(r[l]);if(c)return c}return null}_invokeAll(t){const r=Object.values(this.plugins);r.unshift(this);const l=[];for(let c=0;c<r.length;c++){const p=t(r[c]);p&&l.push(p)}return l}getDependency(t,r){const l=t+":"+r;let c=this.cache.get(l);if(!c){switch(t){case"scene":c=this.loadScene(r);break;case"node":c=this._invokeOne(function(p){return p.loadNode&&p.loadNode(r)});break;case"mesh":c=this._invokeOne(function(p){return p.loadMesh&&p.loadMesh(r)});break;case"accessor":c=this.loadAccessor(r);break;case"bufferView":c=this._invokeOne(function(p){return p.loadBufferView&&p.loadBufferView(r)});break;case"buffer":c=this.loadBuffer(r);break;case"material":c=this._invokeOne(function(p){return p.loadMaterial&&p.loadMaterial(r)});break;case"texture":c=this._invokeOne(function(p){return p.loadTexture&&p.loadTexture(r)});break;case"skin":c=this.loadSkin(r);break;case"animation":c=this._invokeOne(function(p){return p.loadAnimation&&p.loadAnimation(r)});break;case"camera":c=this.loadCamera(r);break;default:if(c=this._invokeOne(function(p){return p!=this&&p.getDependency&&p.getDependency(t,r)}),!c)throw new Error("Unknown type: "+t);break}this.cache.add(l,c)}return c}getDependencies(t){let r=this.cache.get(t);if(!r){const l=this,c=this.json[t+(t==="mesh"?"es":"s")]||[];r=Promise.all(c.map(function(p,h){return l.getDependency(t,h)})),this.cache.add(t,r)}return r}loadBuffer(t){const r=this.json.buffers[t],l=this.fileLoader;if(r.type&&r.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+r.type+" buffer type is not supported.");if(r.uri===void 0&&t===0)return Promise.resolve(this.extensions[ro.KHR_BINARY_GLTF].body);const c=this.options;return new Promise(function(p,h){l.load(i.LoaderUtils.resolveURL(r.uri,c.path),p,void 0,function(){h(new Error('THREE.GLTFLoader: Failed to load buffer "'+r.uri+'".'))})})}loadBufferView(t){const r=this.json.bufferViews[t];return this.getDependency("buffer",r.buffer).then(function(l){const c=r.byteLength||0,p=r.byteOffset||0;return l.slice(p,p+c)})}loadAccessor(t){const r=this,l=this.json,c=this.json.accessors[t];if(c.bufferView===void 0&&c.sparse===void 0){const h=$1[c.type],m=Md[c.componentType],v=c.normalized===!0,E=new m(c.count*h);return Promise.resolve(new i.BufferAttribute(E,h,v))}const p=[];return c.bufferView!==void 0?p.push(this.getDependency("bufferView",c.bufferView)):p.push(null),c.sparse!==void 0&&(p.push(this.getDependency("bufferView",c.sparse.indices.bufferView)),p.push(this.getDependency("bufferView",c.sparse.values.bufferView))),Promise.all(p).then(function(h){const m=h[0],v=$1[c.type],E=Md[c.componentType],x=E.BYTES_PER_ELEMENT,T=x*v,R=c.byteOffset||0,F=c.bufferView!==void 0?l.bufferViews[c.bufferView].byteStride:void 0,U=c.normalized===!0;let P,O;if(F&&F!==T){const z=Math.floor(R/F),L="InterleavedBuffer:"+c.bufferView+":"+c.componentType+":"+z+":"+c.count;let k=r.cache.get(L);k||(P=new E(m,z*F,c.count*F/x),k=new i.InterleavedBuffer(P,F/x),r.cache.add(L,k)),O=new i.InterleavedBufferAttribute(k,v,R%F/x,U)}else m===null?P=new E(c.count*v):P=new E(m,R,c.count*v),O=new i.BufferAttribute(P,v,U);if(c.sparse!==void 0){const z=$1.SCALAR,L=Md[c.sparse.indices.componentType],k=c.sparse.indices.byteOffset||0,H=c.sparse.values.byteOffset||0,X=new L(h[1],k,c.sparse.count*z),W=new E(h[2],H,c.sparse.count*v);m!==null&&(O=new i.BufferAttribute(O.array.slice(),O.itemSize,O.normalized));for(let J=0,Y=X.length;J<Y;J++){const ce=X[J];if(O.setX(ce,W[J*v]),v>=2&&O.setY(ce,W[J*v+1]),v>=3&&O.setZ(ce,W[J*v+2]),v>=4&&O.setW(ce,W[J*v+3]),v>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return O})}loadTexture(t){const r=this.json,l=this.options,p=r.textures[t].source,h=r.images[p];let m=this.textureLoader;if(h.uri){const v=l.manager.getHandler(h.uri);v!==null&&(m=v)}return this.loadTextureImage(t,p,m)}loadTextureImage(t,r,l){const c=this,p=this.json,h=p.textures[t],m=p.images[r],v=(m.uri||m.bufferView)+":"+h.sampler;if(this.textureCache[v])return this.textureCache[v];const E=this.loadImageSource(r,l).then(function(x){x.flipY=!1,x.name=h.name||m.name||"",x.name===""&&typeof m.uri=="string"&&m.uri.startsWith("data:image/")===!1&&(x.name=m.uri);const R=(p.samplers||{})[h.sampler]||{};return x.magFilter=I0[R.magFilter]||i.LinearFilter,x.minFilter=I0[R.minFilter]||i.LinearMipmapLinearFilter,x.wrapS=yv[R.wrapS]||i.RepeatWrapping,x.wrapT=yv[R.wrapT]||i.RepeatWrapping,c.associations.set(x,{textures:t}),x}).catch(function(){return null});return this.textureCache[v]=E,E}loadImageSource(t,r){const l=this,c=this.json,p=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(T=>T.clone());const h=c.images[t],m=self.URL||self.webkitURL;let v=h.uri||"",E=!1;if(h.bufferView!==void 0)v=l.getDependency("bufferView",h.bufferView).then(function(T){E=!0;const R=new Blob([T],{type:h.mimeType});return v=m.createObjectURL(R),v});else if(h.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const x=Promise.resolve(v).then(function(T){return new Promise(function(R,F){let U=R;r.isImageBitmapLoader===!0&&(U=function(P){const O=new i.Texture(P);O.needsUpdate=!0,R(O)}),r.load(i.LoaderUtils.resolveURL(T,p.path),U,void 0,F)})}).then(function(T){return E===!0&&m.revokeObjectURL(v),T.userData.mimeType=h.mimeType||gm(h.uri),T}).catch(function(T){throw Xp.error("THREE.GLTFLoader: Couldn't load texture",v),T});return this.sourceCache[t]=x,x}assignTexture(t,r,l,c){const p=this;return this.getDependency("texture",l.index).then(function(h){if(!h)return null;if(l.texCoord!==void 0&&l.texCoord>0&&(h=h.clone(),h.channel=l.texCoord),p.extensions[ro.KHR_TEXTURE_TRANSFORM]){const m=l.extensions!==void 0?l.extensions[ro.KHR_TEXTURE_TRANSFORM]:void 0;if(m){const v=p.associations.get(h);h=p.extensions[ro.KHR_TEXTURE_TRANSFORM].extendTexture(h,m),p.associations.set(h,v)}}return c!==void 0&&("colorSpace"in h?h.colorSpace=c===3001?"srgb":"srgb-linear":h.encoding=c),t[r]=h,h})}assignFinalMaterial(t){const r=t.geometry;let l=t.material;const c=r.attributes.tangent===void 0,p=r.attributes.color!==void 0,h=r.attributes.normal===void 0;if(t.isPoints){const m="PointsMaterial:"+l.uuid;let v=this.cache.get(m);v||(v=new i.PointsMaterial,i.Material.prototype.copy.call(v,l),v.color.copy(l.color),v.map=l.map,v.sizeAttenuation=!1,this.cache.add(m,v)),l=v}else if(t.isLine){const m="LineBasicMaterial:"+l.uuid;let v=this.cache.get(m);v||(v=new i.LineBasicMaterial,i.Material.prototype.copy.call(v,l),v.color.copy(l.color),v.map=l.map,this.cache.add(m,v)),l=v}if(c||p||h){let m="ClonedMaterial:"+l.uuid+":";c&&(m+="derivative-tangents:"),p&&(m+="vertex-colors:"),h&&(m+="flat-shading:");let v=this.cache.get(m);v||(v=l.clone(),p&&(v.vertexColors=!0),h&&(v.flatShading=!0),c&&(v.normalScale&&(v.normalScale.y*=-1),v.clearcoatNormalScale&&(v.clearcoatNormalScale.y*=-1)),this.cache.add(m,v),this.associations.set(v,this.associations.get(l))),l=v}t.material=l}getMaterialType(){return i.MeshStandardMaterial}loadMaterial(t){const r=this,l=this.json,c=this.extensions,p=l.materials[t];let h;const m={},v=p.extensions||{},E=[];if(v[ro.KHR_MATERIALS_UNLIT]){const T=c[ro.KHR_MATERIALS_UNLIT];h=T.getMaterialType(),E.push(T.extendParams(m,p,r))}else{const T=p.pbrMetallicRoughness||{};if(m.color=new i.Color(1,1,1),m.opacity=1,Array.isArray(T.baseColorFactor)){const R=T.baseColorFactor;m.color.fromArray(R),m.opacity=R[3]}T.baseColorTexture!==void 0&&E.push(r.assignTexture(m,"map",T.baseColorTexture,3001)),m.metalness=T.metallicFactor!==void 0?T.metallicFactor:1,m.roughness=T.roughnessFactor!==void 0?T.roughnessFactor:1,T.metallicRoughnessTexture!==void 0&&(E.push(r.assignTexture(m,"metalnessMap",T.metallicRoughnessTexture)),E.push(r.assignTexture(m,"roughnessMap",T.metallicRoughnessTexture))),h=this._invokeOne(function(R){return R.getMaterialType&&R.getMaterialType(t)}),E.push(Promise.all(this._invokeAll(function(R){return R.extendMaterialParams&&R.extendMaterialParams(t,m)})))}p.doubleSided===!0&&(m.side=i.DoubleSide);const x=p.alphaMode||hm.OPAQUE;if(x===hm.BLEND?(m.transparent=!0,m.depthWrite=!1):(m.transparent=!1,x===hm.MASK&&(m.alphaTest=p.alphaCutoff!==void 0?p.alphaCutoff:.5)),p.normalTexture!==void 0&&h!==i.MeshBasicMaterial&&(E.push(r.assignTexture(m,"normalMap",p.normalTexture)),m.normalScale=new i.Vector2(1,1),p.normalTexture.scale!==void 0)){const T=p.normalTexture.scale;m.normalScale.set(T,T)}return p.occlusionTexture!==void 0&&h!==i.MeshBasicMaterial&&(E.push(r.assignTexture(m,"aoMap",p.occlusionTexture)),p.occlusionTexture.strength!==void 0&&(m.aoMapIntensity=p.occlusionTexture.strength)),p.emissiveFactor!==void 0&&h!==i.MeshBasicMaterial&&(m.emissive=new i.Color().fromArray(p.emissiveFactor)),p.emissiveTexture!==void 0&&h!==i.MeshBasicMaterial&&E.push(r.assignTexture(m,"emissiveMap",p.emissiveTexture,3001)),Promise.all(E).then(function(){const T=new h(m);return p.name&&(T.name=p.name),nc(T,p),r.associations.set(T,{materials:t}),p.extensions&&qa(c,T,p),T})}createUniqueName(t){const r=i.PropertyBinding.sanitizeNodeName(t||"");return r in this.nodeNamesUsed?r+"_"+ ++this.nodeNamesUsed[r]:(this.nodeNamesUsed[r]=0,r)}loadGeometries(t){const r=this,l=this.extensions,c=this.primitiveCache;function p(m){return l[ro.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(m,r).then(function(v){return Cd(v,m,r)})}const h=[];for(let m=0,v=t.length;m<v;m++){const E=t[m],x=Ev(E),T=c[x];if(T)h.push(T.promise);else{let R;E.extensions&&E.extensions[ro.KHR_DRACO_MESH_COMPRESSION]?R=p(E):R=Cd(new i.BufferGeometry,E,r),c[x]={primitive:E,promise:R},h.push(R)}}return Promise.all(h)}loadMesh(t){const r=this,l=this.json,c=this.extensions,p=l.meshes[t],h=p.primitives,m=[];for(let v=0,E=h.length;v<E;v++){const x=h[v].material===void 0?_v(this.cache):this.getDependency("material",h[v].material);m.push(x)}return m.push(r.loadGeometries(h)),Promise.all(m).then(function(v){const E=v.slice(0,v.length-1),x=v[v.length-1],T=[];for(let F=0,U=x.length;F<U;F++){const P=x[F],O=h[F];let z;const L=E[F];if(O.mode===Tc.TRIANGLES||O.mode===Tc.TRIANGLE_STRIP||O.mode===Tc.TRIANGLE_FAN||O.mode===void 0)z=p.isSkinnedMesh===!0?new i.SkinnedMesh(P,L):new i.Mesh(P,L),z.isSkinnedMesh===!0&&z.normalizeSkinWeights(),O.mode===Tc.TRIANGLE_STRIP?z.geometry=L1(z.geometry,i.TriangleStripDrawMode):O.mode===Tc.TRIANGLE_FAN&&(z.geometry=L1(z.geometry,i.TriangleFanDrawMode));else if(O.mode===Tc.LINES)z=new i.LineSegments(P,L);else if(O.mode===Tc.LINE_STRIP)z=new i.Line(P,L);else if(O.mode===Tc.LINE_LOOP)z=new i.LineLoop(P,L);else if(O.mode===Tc.POINTS)z=new i.Points(P,L);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+O.mode);Object.keys(z.geometry.morphAttributes).length>0&&fm(z,p),z.name=r.createUniqueName(p.name||"mesh_"+t),nc(z,p),O.extensions&&qa(c,z,O),r.assignFinalMaterial(z),T.push(z)}for(let F=0,U=T.length;F<U;F++)r.associations.set(T[F],{meshes:t,primitives:F});if(T.length===1)return p.extensions&&qa(c,T[0],p),T[0];const R=new i.Group;p.extensions&&qa(c,R,p),r.associations.set(R,{meshes:t});for(let F=0,U=T.length;F<U;F++)R.add(T[F]);return R})}loadCamera(t){let r;const l=this.json.cameras[t],c=l[l.type];if(!c){Xp.warn("THREE.GLTFLoader: Missing camera parameters.");return}return l.type==="perspective"?r=new i.PerspectiveCamera(i.MathUtils.radToDeg(c.yfov),c.aspectRatio||1,c.znear||1,c.zfar||2e6):l.type==="orthographic"&&(r=new i.OrthographicCamera(-c.xmag,c.xmag,c.ymag,-c.ymag,c.znear,c.zfar)),l.name&&(r.name=this.createUniqueName(l.name)),nc(r,l),Promise.resolve(r)}loadSkin(t){const r=this.json.skins[t],l=[];for(let c=0,p=r.joints.length;c<p;c++)l.push(this._loadNodeShallow(r.joints[c]));return r.inverseBindMatrices!==void 0?l.push(this.getDependency("accessor",r.inverseBindMatrices)):l.push(null),Promise.all(l).then(function(c){const p=c.pop(),h=c,m=[],v=[];for(let E=0,x=h.length;E<x;E++){const T=h[E];if(T){m.push(T);const R=new i.Matrix4;p!==null&&R.fromArray(p.array,E*16),v.push(R)}else Xp.warn('THREE.GLTFLoader: Joint "%s" could not be found.',r.joints[E])}return new i.Skeleton(m,v)})}loadAnimation(t){const l=this.json.animations[t],c=l.name?l.name:"animation_"+t,p=[],h=[],m=[],v=[],E=[];for(let x=0,T=l.channels.length;x<T;x++){const R=l.channels[x],F=l.samplers[R.sampler],U=R.target,P=U.node,O=l.parameters!==void 0?l.parameters[F.input]:F.input,z=l.parameters!==void 0?l.parameters[F.output]:F.output;U.node!==void 0&&(p.push(this.getDependency("node",P)),h.push(this.getDependency("accessor",O)),m.push(this.getDependency("accessor",z)),v.push(F),E.push(U))}return Promise.all([Promise.all(p),Promise.all(h),Promise.all(m),Promise.all(v),Promise.all(E)]).then(function(x){const T=x[0],R=x[1],F=x[2],U=x[3],P=x[4],O=[];for(let z=0,L=T.length;z<L;z++){const k=T[z],H=R[z],X=F[z],W=U[z],J=P[z];if(k===void 0)continue;k.updateMatrix();let Y;switch(Wc[J.path]){case Wc.weights:Y=i.NumberKeyframeTrack;break;case Wc.rotation:Y=i.QuaternionKeyframeTrack;break;case Wc.position:case Wc.scale:default:Y=i.VectorKeyframeTrack;break}const ce=k.name?k.name:k.uuid,ue=W.interpolation!==void 0?vv[W.interpolation]:i.InterpolateLinear,ge=[];Wc[J.path]===Wc.weights?k.traverse(function(Me){Me.morphTargetInfluences&&ge.push(Me.name?Me.name:Me.uuid)}):ge.push(ce);let le=X.array;if(X.normalized){const Me=Ou(le.constructor),me=new Float32Array(le.length);for(let Te=0,Ue=le.length;Te<Ue;Te++)me[Te]=le[Te]*Me;le=me}for(let Me=0,me=ge.length;Me<me;Me++){const Te=new Y(ge[Me]+"."+Wc[J.path],H.array,le,ue);W.interpolation==="CUBICSPLINE"&&(Te.createInterpolant=function(Re){const Ge=this instanceof i.QuaternionKeyframeTrack?q1:wc;return new Ge(this.times,this.values,this.getValueSize()/3,Re)},Te.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),O.push(Te)}}return new i.AnimationClip(c,void 0,O)})}createNodeMesh(t){const r=this.json,l=this,c=r.nodes[t];return c.mesh===void 0?null:l.getDependency("mesh",c.mesh).then(function(p){const h=l._getNodeRef(l.meshCache,c.mesh,p);return c.weights!==void 0&&h.traverse(function(m){if(m.isMesh)for(let v=0,E=c.weights.length;v<E;v++)m.morphTargetInfluences[v]=c.weights[v]}),h})}loadNode(t){const r=this.json,l=this,c=r.nodes[t],p=l._loadNodeShallow(t),h=[],m=c.children||[];for(let E=0,x=m.length;E<x;E++)h.push(l.getDependency("node",m[E]));const v=c.skin===void 0?Promise.resolve(null):l.getDependency("skin",c.skin);return Promise.all([p,Promise.all(h),v]).then(function(E){const x=E[0],T=E[1],R=E[2];R!==null&&x.traverse(function(F){F.isSkinnedMesh&&F.bind(R,mm)});for(let F=0,U=T.length;F<U;F++)x.add(T[F]);return x})}_loadNodeShallow(t){const r=this.json,l=this.extensions,c=this;if(this.nodeCache[t]!==void 0)return this.nodeCache[t];const p=r.nodes[t],h=p.name?c.createUniqueName(p.name):"",m=[],v=c._invokeOne(function(E){return E.createNodeMesh&&E.createNodeMesh(t)});return v&&m.push(v),p.camera!==void 0&&m.push(c.getDependency("camera",p.camera).then(function(E){return c._getNodeRef(c.cameraCache,p.camera,E)})),c._invokeAll(function(E){return E.createNodeAttachment&&E.createNodeAttachment(t)}).forEach(function(E){m.push(E)}),this.nodeCache[t]=Promise.all(m).then(function(E){let x;if(p.isBone===!0?x=new i.Bone:E.length>1?x=new i.Group:E.length===1?x=E[0]:x=new i.Object3D,x!==E[0])for(let T=0,R=E.length;T<R;T++)x.add(E[T]);if(p.name&&(x.userData.name=p.name,x.name=h),nc(x,p),p.extensions&&qa(l,x,p),p.matrix!==void 0){const T=new i.Matrix4;T.fromArray(p.matrix),x.applyMatrix4(T)}else p.translation!==void 0&&x.position.fromArray(p.translation),p.rotation!==void 0&&x.quaternion.fromArray(p.rotation),p.scale!==void 0&&x.scale.fromArray(p.scale);return c.associations.has(x)||c.associations.set(x,{}),c.associations.get(x).nodes=t,x}),this.nodeCache[t]}loadScene(t){const r=this.extensions,l=this.json.scenes[t],c=this,p=new i.Group;l.name&&(p.name=c.createUniqueName(l.name)),nc(p,l),l.extensions&&qa(r,p,l);const h=l.nodes||[],m=[];for(let v=0,E=h.length;v<E;v++)m.push(c.getDependency("node",h[v]));return Promise.all(m).then(function(v){for(let x=0,T=v.length;x<T;x++)p.add(v[x]);const E=x=>{const T=new Map;for(const[R,F]of c.associations)(R instanceof i.Material||R instanceof i.Texture)&&T.set(R,F);return x.traverse(R=>{const F=c.associations.get(R);F!=null&&T.set(R,F)}),T};return c.associations=E(p),p})}}function S3(s,t,r){const l=t.attributes,c=new i.Box3;if(l.POSITION!==void 0){const m=r.json.accessors[l.POSITION],v=m.min,E=m.max;if(v!==void 0&&E!==void 0){if(c.set(new i.Vector3(v[0],v[1],v[2]),new i.Vector3(E[0],E[1],E[2])),m.normalized){const x=Ou(Md[m.componentType]);c.min.multiplyScalar(x),c.max.multiplyScalar(x)}}else{Xp.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const p=t.targets;if(p!==void 0){const m=new i.Vector3,v=new i.Vector3;for(let E=0,x=p.length;E<x;E++){const T=p[E];if(T.POSITION!==void 0){const R=r.json.accessors[T.POSITION],F=R.min,U=R.max;if(F!==void 0&&U!==void 0){if(v.setX(Math.max(Math.abs(F[0]),Math.abs(U[0]))),v.setY(Math.max(Math.abs(F[1]),Math.abs(U[1]))),v.setZ(Math.max(Math.abs(F[2]),Math.abs(U[2]))),R.normalized){const P=Ou(Md[R.componentType]);v.multiplyScalar(P)}m.max(v)}else Xp.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}c.expandByVector(m)}s.boundingBox=c;const h=new i.Sphere;c.getCenter(h.center),h.radius=c.min.distanceTo(c.max)/2,s.boundingSphere=h}function Cd(s,t,r){const l=t.attributes,c=[];function p(h,m){return r.getDependency("accessor",h).then(function(v){s.setAttribute(m,v)})}for(const h in l){const m=eA[h]||h.toLowerCase();m in s.attributes||c.push(p(l[h],m))}if(t.indices!==void 0&&!s.index){const h=r.getDependency("accessor",t.indices).then(function(m){s.setIndex(m)});c.push(h)}return nc(s,t),S3(s,t,r),Promise.all(c).then(function(){return t.targets!==void 0?tA(s,t.targets,r):s})}let zf=null;function nA(s,t,r){return l=>{r&&r(l),s&&(zf||(zf=new X1),zf.setDecoderPath(typeof s=="string"?s:"https://www.gstatic.com/draco/versioned/decoders/1.5.5/"),l.setDRACOLoader(zf)),t&&l.setMeshoptDecoder(typeof R0=="function"?R0():R0)}}function yl(s,t=!0,r=!0,l){return(0,_.D)(Sh,s,nA(t,r,l))}yl.preload=(s,t=!0,r=!0,l)=>_.D.preload(Sh,s,nA(t,r,l)),yl.clear=s=>_.D.clear(Sh,s);const Du=d.forwardRef((l,r)=>{var c=l,{src:s}=c,t=Cn(c,["src"]);const{scene:p}=yl(s);return d.createElement(C0,(0,C.Z)({ref:r},t,{object:p}))});class w3{constructor(t,r=" .:-=+*#%@",l={}){const c=l.resolution||.15,p=l.scale||1,h=l.color||!1,m=l.alpha||!1,v=l.block||!1,E=l.invert||!1,x=l.strResolution||"low";let T,R;const F=document.createElement("div");F.style.cursor="default";const U=document.createElement("table");F.appendChild(U);let P,O,z;this.setSize=function(me,Te){T=me,R=Te,t.setSize(me,Te),L()},this.render=function(me,Te){t.render(me,Te),Me(U)},this.domElement=F;function L(){P=Math.floor(T*c),O=Math.floor(R*c),J.width=P,J.height=O,z=t.domElement,z.style.backgroundColor&&(U.rows[0].cells[0].style.backgroundColor=z.style.backgroundColor,U.rows[0].cells[0].style.color=z.style.color),U.cellSpacing=0,U.cellPadding=0;const me=U.style;me.whiteSpace="pre",me.margin="0px",me.padding="0px",me.letterSpacing=le+"px",me.fontFamily=X,me.fontSize=ue+"px",me.lineHeight=ge+"px",me.textAlign="left",me.textDecoration="none"}const k=" .,:;i1tfLCG08@".split(""),H=" CGO08@".split(""),X="courier new, monospace",W=t.domElement,J=document.createElement("canvas");if(!J.getContext)return;const Y=J.getContext("2d");if(!Y.getImageData)return;let ce=h?H:k;r&&(ce=r);const ue=2/c*p,ge=2/c*p;let le=0;if(x=="low")switch(p){case 1:le=-1;break;case 2:case 3:le=-2.1;break;case 4:le=-3.1;break;case 5:le=-4.15;break}if(x=="medium")switch(p){case 1:le=0;break;case 2:le=-1;break;case 3:le=-1.04;break;case 4:case 5:le=-2.1;break}if(x=="high")switch(p){case 1:case 2:le=0;break;case 3:case 4:case 5:le=-1;break}function Me(me){Y.clearRect(0,0,P,O),Y.drawImage(W,0,0,P,O);const Te=Y.getImageData(0,0,P,O).data;let Ue="";for(let Re=0;Re<O;Re+=2){for(let Ge=0;Ge<P;Ge++){const De=(Re*P+Ge)*4,Xe=Te[De],Ce=Te[De+1],Ee=Te[De+2],_e=Te[De+3];let oe,Ae;Ae=(.3*Xe+.59*Ce+.11*Ee)/255,_e==0&&(Ae=1),oe=Math.floor((1-Ae)*(ce.length-1)),E&&(oe=ce.length-oe-1);let Be=ce[oe];(Be===void 0||Be==" ")&&(Be="&nbsp;"),h?Ue+="<span style='color:rgb("+Xe+","+Ce+","+Ee+");"+(v?"background-color:rgb("+Xe+","+Ce+","+Ee+");":"")+(m?"opacity:"+_e/255+";":"")+"'>"+Be+"</span>":Ue+=Be}Ue+="<br/>"}me.innerHTML=`<tr><td style="display:block;width:${T}px;height:${R}px;overflow:hidden">${Ue}</td></tr>`}}}function Lu({renderIndex:s=1,bgColor:t="black",fgColor:r="white",characters:l=" .:-+*=%@#",invert:c=!0,color:p=!1,resolution:h=.15}){const{size:m,gl:v,scene:E,camera:x}=(0,_.z)(),T=d.useMemo(()=>{const R=new w3(v,l,{invert:c,color:p,resolution:h});return R.domElement.style.position="absolute",R.domElement.style.top="0px",R.domElement.style.left="0px",R.domElement.style.pointerEvents="none",R},[l,c,p,h]);return d.useLayoutEffect(()=>{T.domElement.style.color=r,T.domElement.style.backgroundColor=t},[r,t]),d.useEffect(()=>(v.domElement.style.opacity="0",v.domElement.parentNode.appendChild(T.domElement),()=>{v.domElement.style.opacity="1",v.domElement.parentNode.removeChild(T.domElement)}),[T]),d.useEffect(()=>{T.setSize(m.width,m.height)},[T,m]),(0,_.A)(R=>{T.render(E,x)},s),d.createElement(d.Fragment,null)}function rc(s,t,r){const l=(0,_.z)(F=>F.size),c=(0,_.z)(F=>F.viewport),p=typeof s=="number"?s:l.width*c.dpr,h=typeof t=="number"?t:l.height*c.dpr,R=(typeof s=="number"?r:s)||{},{samples:v=0,depth:E}=R,x=Cn(R,["samples","depth"]),T=d.useMemo(()=>{const F=new i.WebGLRenderTarget(p,h,Zn({minFilter:i.LinearFilter,magFilter:i.LinearFilter,type:i.HalfFloatType},x));return E&&(F.depthTexture=new i.DepthTexture(p,h,i.FloatType)),F.samples=v,F},[]);return d.useLayoutEffect(()=>{T.setSize(p,h),v&&(T.samples=v)},[v,T,p,h]),d.useEffect(()=>()=>T.dispose(),[]),T}const T3=s=>typeof s=="function",Gf=d.forwardRef((m,h)=>{var v=m,{envMap:s,resolution:t=256,frames:r=1/0,children:l,makeDefault:c}=v,p=Cn(v,["envMap","resolution","frames","children","makeDefault"]);const E=(0,_.z)(({set:L})=>L),x=(0,_.z)(({camera:L})=>L),T=(0,_.z)(({size:L})=>L),R=d.useRef(null),F=d.useRef(null),U=rc(t);d.useLayoutEffect(()=>{p.manual||R.current.updateProjectionMatrix()},[T,p]),d.useLayoutEffect(()=>{R.current.updateProjectionMatrix()}),d.useLayoutEffect(()=>{if(c){const L=x;return E(()=>({camera:R.current})),()=>E(()=>({camera:L}))}},[R,c,E]);let P=0,O=null;const z=T3(l);return(0,_.A)(L=>{z&&(r===1/0||P<r)&&(F.current.visible=!1,L.gl.setRenderTarget(U),O=L.scene.background,s&&(L.scene.background=s),L.gl.render(L.scene,R.current),L.scene.background=O,L.gl.setRenderTarget(null),F.current.visible=!0,P++)}),d.createElement(d.Fragment,null,d.createElement("orthographicCamera",(0,C.Z)({left:T.width/-2,right:T.width/2,top:T.height/2,bottom:T.height/-2,ref:mt([R,h])},p),!z&&l),d.createElement("group",{ref:F},z&&l(U.texture)))}),B3=s=>typeof s=="function",R3=d.forwardRef((m,h)=>{var v=m,{envMap:s,resolution:t=256,frames:r=1/0,makeDefault:l,children:c}=v,p=Cn(v,["envMap","resolution","frames","makeDefault","children"]);const E=(0,_.z)(({set:L})=>L),x=(0,_.z)(({camera:L})=>L),T=(0,_.z)(({size:L})=>L),R=d.useRef(null),F=d.useRef(null),U=rc(t);d.useLayoutEffect(()=>{p.manual||(R.current.aspect=T.width/T.height)},[T,p]),d.useLayoutEffect(()=>{R.current.updateProjectionMatrix()});let P=0,O=null;const z=B3(c);return(0,_.A)(L=>{z&&(r===1/0||P<r)&&(F.current.visible=!1,L.gl.setRenderTarget(U),O=L.scene.background,s&&(L.scene.background=s),L.gl.render(L.scene,R.current),L.scene.background=O,L.gl.setRenderTarget(null),F.current.visible=!0,P++)}),d.useLayoutEffect(()=>{if(l){const L=x;return E(()=>({camera:R.current})),()=>E(()=>({camera:L}))}},[R,l,E]),d.createElement(d.Fragment,null,d.createElement("perspectiveCamera",(0,C.Z)({ref:mt([R,h])},p),!z&&c),d.createElement("group",{ref:F},z&&c(U.texture)))});function bv({resolution:s=256,near:t=.1,far:r=1e3,envMap:l,fog:c}={}){const p=(0,_.z)(({gl:R})=>R),h=(0,_.z)(({scene:R})=>R),m=(0,d.useMemo)(()=>{const R=new i.WebGLCubeRenderTarget(s);return R.texture.type=i.HalfFloatType,R},[s]);(0,d.useEffect)(()=>()=>{m.dispose()},[m]);const v=(0,d.useMemo)(()=>new i.CubeCamera(t,r,m),[t,r,m]);let E,x;const T=d.useCallback(()=>{E=h.fog,x=h.background,h.background=l||x,h.fog=c||E,v.update(p,h),h.fog=E,h.background=x},[p,h,v]);return{fbo:m,camera:v,update:T}}function Sd(v){var E=v,{children:s,frames:t=1/0,resolution:r,near:l,far:c,envMap:p,fog:h}=E,m=Cn(E,["children","frames","resolution","near","far","envMap","fog"]);const x=d.useRef(),{fbo:T,camera:R,update:F}=bv({resolution:r,near:l,far:c,envMap:p,fog:h});let U=0;return(0,_.A)(()=>{x.current&&(t===1/0||U<t)&&(x.current.visible=!1,F(),x.current.visible=!0,U++)}),d.createElement("group",m,d.createElement("primitive",{object:R}),d.createElement("group",{ref:x},s(T.texture)))}var Mv=A(5108),rA=Object.defineProperty,xv=(s,t,r)=>t in s?rA(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,da=(s,t,r)=>(xv(s,typeof t!="symbol"?t+"":t,r),r);class iA extends i.EventDispatcher{constructor(t){super(),da(this,"object"),da(this,"changeEvent",{type:"change"}),da(this,"EPS",1e-6),da(this,"enabled",!0),da(this,"deviceOrientation",{alpha:0,beta:0,gamma:0}),da(this,"screenOrientation",0),da(this,"alphaOffset",0),da(this,"onDeviceOrientationChangeEvent",r=>{this.deviceOrientation=r}),da(this,"onScreenOrientationChangeEvent",()=>{this.screenOrientation=window.orientation||0}),da(this,"zee",new i.Vector3(0,0,1)),da(this,"euler",new i.Euler),da(this,"q0",new i.Quaternion),da(this,"q1",new i.Quaternion(-Math.sqrt(.5),0,0,Math.sqrt(.5))),da(this,"setObjectQuaternion",(r,l,c,p,h)=>{this.euler.set(c,l,-p,"YXZ"),r.setFromEuler(this.euler),r.multiply(this.q1),r.multiply(this.q0.setFromAxisAngle(this.zee,-h))}),da(this,"connect",()=>{this.onScreenOrientationChangeEvent(),window.DeviceOrientationEvent!==void 0&&typeof window.DeviceOrientationEvent.requestPermission=="function"?window.DeviceOrientationEvent.requestPermission().then(r=>{r=="granted"&&(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent))}).catch(r=>{Mv.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",r)}):(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent)),this.enabled=!0}),da(this,"disconnect",()=>{window.removeEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.removeEventListener("deviceorientation",this.onDeviceOrientationChangeEvent),this.enabled=!1}),da(this,"lastQuaternion",new i.Quaternion),da(this,"update",()=>{if(this.enabled===!1)return;const r=this.deviceOrientation;if(r){const l=r.alpha?i.MathUtils.degToRad(r.alpha)+this.alphaOffset:0,c=r.beta?i.MathUtils.degToRad(r.beta):0,p=r.gamma?i.MathUtils.degToRad(r.gamma):0,h=this.screenOrientation?i.MathUtils.degToRad(this.screenOrientation):0;this.setObjectQuaternion(this.object.quaternion,l,c,p,h),8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS&&(this.lastQuaternion.copy(this.object.quaternion),this.dispatchEvent(this.changeEvent))}}),da(this,"dispose",()=>this.disconnect()),this.object=t,this.object.rotation.reorder("YXZ"),this.connect()}}const I3=d.forwardRef((s,t)=>{const R=s,{camera:r,onChange:l,makeDefault:c}=R,p=Cn(R,["camera","onChange","makeDefault"]),h=(0,_.z)(F=>F.camera),m=(0,_.z)(F=>F.invalidate),v=(0,_.z)(F=>F.get),E=(0,_.z)(F=>F.set),x=r||h,[T]=d.useState(()=>new iA(x));return d.useEffect(()=>{const F=U=>{m(),l&&l(U)};return T==null||T.addEventListener==null||T.addEventListener("change",F),()=>T==null||T.removeEventListener==null?void 0:T.removeEventListener("change",F)},[l,T,m]),(0,_.A)(()=>T==null?void 0:T.update(),-1),d.useEffect(()=>{const F=T;return F==null||F.connect(),()=>F==null?void 0:F.dispose()},[T]),d.useEffect(()=>{if(c){const F=v().controls;return E({controls:T}),()=>E({controls:F})}},[c,T]),T?d.createElement("primitive",(0,C.Z)({ref:t,object:T},p)):null});var Cv=Object.defineProperty,Sv=(s,t,r)=>t in s?Cv(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,vo=(s,t,r)=>(Sv(s,typeof t!="symbol"?t+"":t,r),r);function F0(s){s.preventDefault()}class F3 extends i.EventDispatcher{constructor(t,r){super(),vo(this,"object"),vo(this,"domElement",null),vo(this,"movementSpeed",1),vo(this,"rollSpeed",.005),vo(this,"dragToLook",!1),vo(this,"autoForward",!1),vo(this,"changeEvent",{type:"change"}),vo(this,"EPS",1e-6),vo(this,"tmpQuaternion",new i.Quaternion),vo(this,"mouseStatus",0),vo(this,"movementSpeedMultiplier",1),vo(this,"moveState",{up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0}),vo(this,"moveVector",new i.Vector3(0,0,0)),vo(this,"rotationVector",new i.Vector3(0,0,0)),vo(this,"keydown",l=>{if(!l.altKey){switch(l.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1;break}this.updateMovementVector(),this.updateRotationVector()}}),vo(this,"keyup",l=>{switch(l.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0;break}this.updateMovementVector(),this.updateRotationVector()}),vo(this,"pointerdown",l=>{if(this.dragToLook)this.mouseStatus++;else{switch(l.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1;break}this.updateMovementVector()}}),vo(this,"pointermove",l=>{if(!this.dragToLook||this.mouseStatus>0){const c=this.getContainerDimensions(),p=c.size[0]/2,h=c.size[1]/2;this.moveState.yawLeft=-(l.pageX-c.offset[0]-p)/p,this.moveState.pitchDown=(l.pageY-c.offset[1]-h)/h,this.updateRotationVector()}}),vo(this,"pointerup",l=>{if(this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(l.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0;break}this.updateMovementVector()}this.updateRotationVector()}),vo(this,"lastQuaternion",new i.Quaternion),vo(this,"lastPosition",new i.Vector3),vo(this,"update",l=>{const c=l*this.movementSpeed,p=l*this.rollSpeed;this.object.translateX(this.moveVector.x*c),this.object.translateY(this.moveVector.y*c),this.object.translateZ(this.moveVector.z*c),this.tmpQuaternion.set(this.rotationVector.x*p,this.rotationVector.y*p,this.rotationVector.z*p,1).normalize(),this.object.quaternion.multiply(this.tmpQuaternion),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS)&&(this.dispatchEvent(this.changeEvent),this.lastQuaternion.copy(this.object.quaternion),this.lastPosition.copy(this.object.position))}),vo(this,"updateMovementVector",()=>{const l=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-l+this.moveState.back}),vo(this,"updateRotationVector",()=>{this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft}),vo(this,"getContainerDimensions",()=>this.domElement!=document&&!(this.domElement instanceof Document)?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}),vo(this,"connect",l=>{this.domElement=l,l&&!(l instanceof Document)&&l.setAttribute("tabindex",-1),this.domElement.addEventListener("contextmenu",F0),this.domElement.addEventListener("pointermove",this.pointermove),this.domElement.addEventListener("pointerdown",this.pointerdown),this.domElement.addEventListener("pointerup",this.pointerup),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup)}),vo(this,"dispose",()=>{this.domElement.removeEventListener("contextmenu",F0),this.domElement.removeEventListener("pointermove",this.pointermove),this.domElement.removeEventListener("pointerdown",this.pointerdown),this.domElement.removeEventListener("pointerup",this.pointerup),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup)}),this.object=t,r!==void 0&&this.connect(r),this.updateMovementVector(),this.updateRotationVector()}}const wv=d.forwardRef((l,r)=>{var c=l,{domElement:s}=c,t=Cn(c,["domElement"]);const O=t,{onChange:p,makeDefault:h}=O,m=Cn(O,["onChange","makeDefault"]),v=(0,_.z)(z=>z.invalidate),E=(0,_.z)(z=>z.camera),x=(0,_.z)(z=>z.gl),T=(0,_.z)(z=>z.events),R=(0,_.z)(z=>z.get),F=(0,_.z)(z=>z.set),U=s||T.connected||x.domElement,P=d.useMemo(()=>new F3(E),[E]);return d.useEffect(()=>(P.connect(U),()=>void P.dispose()),[U,P,v]),d.useEffect(()=>{const z=L=>{v(),p&&p(L)};return P.addEventListener==null||P.addEventListener("change",z),()=>P.removeEventListener==null?void 0:P.removeEventListener("change",z)},[p,v]),d.useEffect(()=>{if(h){const z=R().controls;return F({controls:P}),()=>F({controls:z})}},[h,P]),(0,_.A)((z,L)=>P.update(L)),d.createElement("primitive",(0,C.Z)({ref:r,object:P,args:[E,U]},m))});var O0=A(5108),Tv=Object.defineProperty,Bv=(s,t,r)=>t in s?Tv(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,Ti=(s,t,r)=>(Bv(s,typeof t!="symbol"?t+"":t,r),r);const oA=(s,t)=>(s%t+t)%t;class Am extends i.EventDispatcher{constructor(t,r){super(),Ti(this,"object"),Ti(this,"domElement"),Ti(this,"enabled",!0),Ti(this,"target",new i.Vector3),Ti(this,"minDistance",0),Ti(this,"maxDistance",1/0),Ti(this,"minZoom",0),Ti(this,"maxZoom",1/0),Ti(this,"minPolarAngle",0),Ti(this,"maxPolarAngle",Math.PI),Ti(this,"minAzimuthAngle",-1/0),Ti(this,"maxAzimuthAngle",1/0),Ti(this,"enableDamping",!1),Ti(this,"dampingFactor",.05),Ti(this,"enableZoom",!0),Ti(this,"zoomSpeed",1),Ti(this,"enableRotate",!0),Ti(this,"rotateSpeed",1),Ti(this,"enablePan",!0),Ti(this,"panSpeed",1),Ti(this,"screenSpacePanning",!0),Ti(this,"keyPanSpeed",7),Ti(this,"autoRotate",!1),Ti(this,"autoRotateSpeed",2),Ti(this,"reverseOrbit",!1),Ti(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Ti(this,"mouseButtons",{LEFT:i.MOUSE.ROTATE,MIDDLE:i.MOUSE.DOLLY,RIGHT:i.MOUSE.PAN}),Ti(this,"touches",{ONE:i.TOUCH.ROTATE,TWO:i.TOUCH.DOLLY_PAN}),Ti(this,"target0"),Ti(this,"position0"),Ti(this,"zoom0"),Ti(this,"_domElementKeyEvents",null),Ti(this,"getPolarAngle"),Ti(this,"getAzimuthalAngle"),Ti(this,"setPolarAngle"),Ti(this,"setAzimuthalAngle"),Ti(this,"getDistance"),Ti(this,"listenToKeyEvents"),Ti(this,"saveState"),Ti(this,"reset"),Ti(this,"update"),Ti(this,"connect"),Ti(this,"dispose"),this.object=t,this.domElement=r,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>x.phi,this.getAzimuthalAngle=()=>x.theta,this.setPolarAngle=lt=>{let xn=oA(lt,2*Math.PI),Gn=x.phi;Gn<0&&(Gn+=2*Math.PI),xn<0&&(xn+=2*Math.PI);let cr=Math.abs(xn-Gn);2*Math.PI-cr<cr&&(xn<Gn?xn+=2*Math.PI:Gn+=2*Math.PI),T.phi=xn-Gn,l.update()},this.setAzimuthalAngle=lt=>{let xn=oA(lt,2*Math.PI),Gn=x.theta;Gn<0&&(Gn+=2*Math.PI),xn<0&&(xn+=2*Math.PI);let cr=Math.abs(xn-Gn);2*Math.PI-cr<cr&&(xn<Gn?xn+=2*Math.PI:Gn+=2*Math.PI),T.theta=xn-Gn,l.update()},this.getDistance=()=>l.object.position.distanceTo(l.target),this.listenToKeyEvents=lt=>{lt.addEventListener("keydown",Fr),this._domElementKeyEvents=lt},this.saveState=()=>{l.target0.copy(l.target),l.position0.copy(l.object.position),l.zoom0=l.object.zoom},this.reset=()=>{l.target.copy(l.target0),l.object.position.copy(l.position0),l.object.zoom=l.zoom0,l.object.updateProjectionMatrix(),l.dispatchEvent(c),l.update(),v=m.NONE},this.update=(()=>{const lt=new i.Vector3,xn=new i.Quaternion().setFromUnitVectors(t.up,new i.Vector3(0,1,0)),Gn=xn.clone().invert(),cr=new i.Vector3,ni=new i.Quaternion,pi=2*Math.PI;return function(){const fi=l.object.position;lt.copy(fi).sub(l.target),lt.applyQuaternion(xn),x.setFromVector3(lt),l.autoRotate&&v===m.NONE&&le(ue()),l.enableDamping?(x.theta+=T.theta*l.dampingFactor,x.phi+=T.phi*l.dampingFactor):(x.theta+=T.theta,x.phi+=T.phi);let Tn=l.minAzimuthAngle,so=l.maxAzimuthAngle;return isFinite(Tn)&&isFinite(so)&&(Tn<-Math.PI?Tn+=pi:Tn>Math.PI&&(Tn-=pi),so<-Math.PI?so+=pi:so>Math.PI&&(so-=pi),Tn<=so?x.theta=Math.max(Tn,Math.min(so,x.theta)):x.theta=x.theta>(Tn+so)/2?Math.max(Tn,x.theta):Math.min(so,x.theta)),x.phi=Math.max(l.minPolarAngle,Math.min(l.maxPolarAngle,x.phi)),x.makeSafe(),x.radius*=R,x.radius=Math.max(l.minDistance,Math.min(l.maxDistance,x.radius)),l.enableDamping===!0?l.target.addScaledVector(F,l.dampingFactor):l.target.add(F),lt.setFromSpherical(x),lt.applyQuaternion(Gn),fi.copy(l.target).add(lt),l.object.lookAt(l.target),l.enableDamping===!0?(T.theta*=1-l.dampingFactor,T.phi*=1-l.dampingFactor,F.multiplyScalar(1-l.dampingFactor)):(T.set(0,0,0),F.set(0,0,0)),R=1,U||cr.distanceToSquared(l.object.position)>E||8*(1-ni.dot(l.object.quaternion))>E?(l.dispatchEvent(c),cr.copy(l.object.position),ni.copy(l.object.quaternion),U=!1,!0):!1}})(),this.connect=lt=>{lt===document&&O0.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),l.domElement=lt,l.domElement.style.touchAction="none",l.domElement.addEventListener("contextmenu",xi),l.domElement.addEventListener("pointerdown",ze),l.domElement.addEventListener("pointercancel",Fn),l.domElement.addEventListener("wheel",hr)},this.dispose=()=>{var lt,xn,Gn,cr,ni,pi;(lt=l.domElement)==null||lt.removeEventListener("contextmenu",xi),(xn=l.domElement)==null||xn.removeEventListener("pointerdown",ze),(Gn=l.domElement)==null||Gn.removeEventListener("pointercancel",Fn),(cr=l.domElement)==null||cr.removeEventListener("wheel",hr),(ni=l.domElement)==null||ni.ownerDocument.removeEventListener("pointermove",Ft),(pi=l.domElement)==null||pi.ownerDocument.removeEventListener("pointerup",bn),l._domElementKeyEvents!==null&&l._domElementKeyEvents.removeEventListener("keydown",Fr)};const l=this,c={type:"change"},p={type:"start"},h={type:"end"},m={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let v=m.NONE;const E=1e-6,x=new i.Spherical,T=new i.Spherical;let R=1;const F=new i.Vector3;let U=!1;const P=new i.Vector2,O=new i.Vector2,z=new i.Vector2,L=new i.Vector2,k=new i.Vector2,H=new i.Vector2,X=new i.Vector2,W=new i.Vector2,J=new i.Vector2,Y=[],ce={};function ue(){return 2*Math.PI/60/60*l.autoRotateSpeed}function ge(){return Math.pow(.95,l.zoomSpeed)}function le(lt){l.reverseOrbit?T.theta+=lt:T.theta-=lt}function Me(lt){l.reverseOrbit?T.phi+=lt:T.phi-=lt}const me=(()=>{const lt=new i.Vector3;return function(Gn,cr){lt.setFromMatrixColumn(cr,0),lt.multiplyScalar(-Gn),F.add(lt)}})(),Te=(()=>{const lt=new i.Vector3;return function(Gn,cr){l.screenSpacePanning===!0?lt.setFromMatrixColumn(cr,1):(lt.setFromMatrixColumn(cr,0),lt.crossVectors(l.object.up,lt)),lt.multiplyScalar(Gn),F.add(lt)}})(),Ue=(()=>{const lt=new i.Vector3;return function(Gn,cr){const ni=l.domElement;if(ni&&l.object instanceof i.PerspectiveCamera&&l.object.isPerspectiveCamera){const pi=l.object.position;lt.copy(pi).sub(l.target);let yi=lt.length();yi*=Math.tan(l.object.fov/2*Math.PI/180),me(2*Gn*yi/ni.clientHeight,l.object.matrix),Te(2*cr*yi/ni.clientHeight,l.object.matrix)}else ni&&l.object instanceof i.OrthographicCamera&&l.object.isOrthographicCamera?(me(Gn*(l.object.right-l.object.left)/l.object.zoom/ni.clientWidth,l.object.matrix),Te(cr*(l.object.top-l.object.bottom)/l.object.zoom/ni.clientHeight,l.object.matrix)):(O0.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),l.enablePan=!1)}})();function Re(lt){l.object instanceof i.PerspectiveCamera&&l.object.isPerspectiveCamera?R/=lt:l.object instanceof i.OrthographicCamera&&l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom*lt)),l.object.updateProjectionMatrix(),U=!0):(O0.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function Ge(lt){l.object instanceof i.PerspectiveCamera&&l.object.isPerspectiveCamera?R*=lt:l.object instanceof i.OrthographicCamera&&l.object.isOrthographicCamera?(l.object.zoom=Math.max(l.minZoom,Math.min(l.maxZoom,l.object.zoom/lt)),l.object.updateProjectionMatrix(),U=!0):(O0.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),l.enableZoom=!1)}function De(lt){P.set(lt.clientX,lt.clientY)}function Xe(lt){X.set(lt.clientX,lt.clientY)}function Ce(lt){L.set(lt.clientX,lt.clientY)}function Ee(lt){O.set(lt.clientX,lt.clientY),z.subVectors(O,P).multiplyScalar(l.rotateSpeed);const xn=l.domElement;xn&&(le(2*Math.PI*z.x/xn.clientHeight),Me(2*Math.PI*z.y/xn.clientHeight)),P.copy(O),l.update()}function _e(lt){W.set(lt.clientX,lt.clientY),J.subVectors(W,X),J.y>0?Re(ge()):J.y<0&&Ge(ge()),X.copy(W),l.update()}function oe(lt){k.set(lt.clientX,lt.clientY),H.subVectors(k,L).multiplyScalar(l.panSpeed),Ue(H.x,H.y),L.copy(k),l.update()}function Ae(lt){lt.deltaY<0?Ge(ge()):lt.deltaY>0&&Re(ge()),l.update()}function Be(lt){let xn=!1;switch(lt.code){case l.keys.UP:Ue(0,l.keyPanSpeed),xn=!0;break;case l.keys.BOTTOM:Ue(0,-l.keyPanSpeed),xn=!0;break;case l.keys.LEFT:Ue(l.keyPanSpeed,0),xn=!0;break;case l.keys.RIGHT:Ue(-l.keyPanSpeed,0),xn=!0;break}xn&&(lt.preventDefault(),l.update())}function ve(){if(Y.length==1)P.set(Y[0].pageX,Y[0].pageY);else{const lt=.5*(Y[0].pageX+Y[1].pageX),xn=.5*(Y[0].pageY+Y[1].pageY);P.set(lt,xn)}}function ke(){if(Y.length==1)L.set(Y[0].pageX,Y[0].pageY);else{const lt=.5*(Y[0].pageX+Y[1].pageX),xn=.5*(Y[0].pageY+Y[1].pageY);L.set(lt,xn)}}function vt(){const lt=Y[0].pageX-Y[1].pageX,xn=Y[0].pageY-Y[1].pageY,Gn=Math.sqrt(lt*lt+xn*xn);X.set(0,Gn)}function ht(){l.enableZoom&&vt(),l.enablePan&&ke()}function dt(){l.enableZoom&&vt(),l.enableRotate&&ve()}function $e(lt){if(Y.length==1)O.set(lt.pageX,lt.pageY);else{const Gn=To(lt),cr=.5*(lt.pageX+Gn.x),ni=.5*(lt.pageY+Gn.y);O.set(cr,ni)}z.subVectors(O,P).multiplyScalar(l.rotateSpeed);const xn=l.domElement;xn&&(le(2*Math.PI*z.x/xn.clientHeight),Me(2*Math.PI*z.y/xn.clientHeight)),P.copy(O)}function Kt(lt){if(Y.length==1)k.set(lt.pageX,lt.pageY);else{const xn=To(lt),Gn=.5*(lt.pageX+xn.x),cr=.5*(lt.pageY+xn.y);k.set(Gn,cr)}H.subVectors(k,L).multiplyScalar(l.panSpeed),Ue(H.x,H.y),L.copy(k)}function zt(lt){const xn=To(lt),Gn=lt.pageX-xn.x,cr=lt.pageY-xn.y,ni=Math.sqrt(Gn*Gn+cr*cr);W.set(0,ni),J.set(0,Math.pow(W.y/X.y,l.zoomSpeed)),Re(J.y),X.copy(W)}function Bt(lt){l.enableZoom&&zt(lt),l.enablePan&&Kt(lt)}function Qe(lt){l.enableZoom&&zt(lt),l.enableRotate&&$e(lt)}function ze(lt){var xn,Gn;l.enabled!==!1&&(Y.length===0&&((xn=l.domElement)==null||xn.ownerDocument.addEventListener("pointermove",Ft),(Gn=l.domElement)==null||Gn.ownerDocument.addEventListener("pointerup",bn)),Lr(lt),lt.pointerType==="touch"?Er(lt):Gt(lt))}function Ft(lt){l.enabled!==!1&&(lt.pointerType==="touch"?Ii(lt):Yn(lt))}function bn(lt){var xn,Gn,cr;Qr(lt),Y.length===0&&((xn=l.domElement)==null||xn.releasePointerCapture(lt.pointerId),(Gn=l.domElement)==null||Gn.ownerDocument.removeEventListener("pointermove",Ft),(cr=l.domElement)==null||cr.ownerDocument.removeEventListener("pointerup",bn)),l.dispatchEvent(h),v=m.NONE}function Fn(lt){Qr(lt)}function Gt(lt){let xn;switch(lt.button){case 0:xn=l.mouseButtons.LEFT;break;case 1:xn=l.mouseButtons.MIDDLE;break;case 2:xn=l.mouseButtons.RIGHT;break;default:xn=-1}switch(xn){case i.MOUSE.DOLLY:if(l.enableZoom===!1)return;Xe(lt),v=m.DOLLY;break;case i.MOUSE.ROTATE:if(lt.ctrlKey||lt.metaKey||lt.shiftKey){if(l.enablePan===!1)return;Ce(lt),v=m.PAN}else{if(l.enableRotate===!1)return;De(lt),v=m.ROTATE}break;case i.MOUSE.PAN:if(lt.ctrlKey||lt.metaKey||lt.shiftKey){if(l.enableRotate===!1)return;De(lt),v=m.ROTATE}else{if(l.enablePan===!1)return;Ce(lt),v=m.PAN}break;default:v=m.NONE}v!==m.NONE&&l.dispatchEvent(p)}function Yn(lt){if(l.enabled!==!1)switch(v){case m.ROTATE:if(l.enableRotate===!1)return;Ee(lt);break;case m.DOLLY:if(l.enableZoom===!1)return;_e(lt);break;case m.PAN:if(l.enablePan===!1)return;oe(lt);break}}function hr(lt){l.enabled===!1||l.enableZoom===!1||v!==m.NONE&&v!==m.ROTATE||(lt.preventDefault(),l.dispatchEvent(p),Ae(lt),l.dispatchEvent(h))}function Fr(lt){l.enabled===!1||l.enablePan===!1||Be(lt)}function Er(lt){switch(Hi(lt),Y.length){case 1:switch(l.touches.ONE){case i.TOUCH.ROTATE:if(l.enableRotate===!1)return;ve(),v=m.TOUCH_ROTATE;break;case i.TOUCH.PAN:if(l.enablePan===!1)return;ke(),v=m.TOUCH_PAN;break;default:v=m.NONE}break;case 2:switch(l.touches.TWO){case i.TOUCH.DOLLY_PAN:if(l.enableZoom===!1&&l.enablePan===!1)return;ht(),v=m.TOUCH_DOLLY_PAN;break;case i.TOUCH.DOLLY_ROTATE:if(l.enableZoom===!1&&l.enableRotate===!1)return;dt(),v=m.TOUCH_DOLLY_ROTATE;break;default:v=m.NONE}break;default:v=m.NONE}v!==m.NONE&&l.dispatchEvent(p)}function Ii(lt){switch(Hi(lt),v){case m.TOUCH_ROTATE:if(l.enableRotate===!1)return;$e(lt),l.update();break;case m.TOUCH_PAN:if(l.enablePan===!1)return;Kt(lt),l.update();break;case m.TOUCH_DOLLY_PAN:if(l.enableZoom===!1&&l.enablePan===!1)return;Bt(lt),l.update();break;case m.TOUCH_DOLLY_ROTATE:if(l.enableZoom===!1&&l.enableRotate===!1)return;Qe(lt),l.update();break;default:v=m.NONE}}function xi(lt){l.enabled!==!1&&lt.preventDefault()}function Lr(lt){Y.push(lt)}function Qr(lt){delete ce[lt.pointerId];for(let xn=0;xn<Y.length;xn++)if(Y[xn].pointerId==lt.pointerId){Y.splice(xn,1);return}}function Hi(lt){let xn=ce[lt.pointerId];xn===void 0&&(xn=new i.Vector2,ce[lt.pointerId]=xn),xn.set(lt.pageX,lt.pageY)}function To(lt){const xn=lt.pointerId===Y[0].pointerId?Y[1]:Y[0];return ce[xn.pointerId]}r!==void 0&&this.connect(r),this.update()}}class D0 extends Am{constructor(t,r){super(t,r),this.screenSpacePanning=!1,this.mouseButtons.LEFT=i.MOUSE.PAN,this.mouseButtons.RIGHT=i.MOUSE.ROTATE,this.touches.ONE=i.TOUCH.PAN,this.touches.TWO=i.TOUCH.DOLLY_ROTATE}}const sA=d.forwardRef((s={enableDamping:!0},t)=>{const L=s,{domElement:r,camera:l,makeDefault:c,onChange:p,onStart:h,onEnd:m}=L,v=Cn(L,["domElement","camera","makeDefault","onChange","onStart","onEnd"]),E=(0,_.z)(k=>k.invalidate),x=(0,_.z)(k=>k.camera),T=(0,_.z)(k=>k.gl),R=(0,_.z)(k=>k.events),F=(0,_.z)(k=>k.set),U=(0,_.z)(k=>k.get),P=r||R.connected||T.domElement,O=l||x,z=d.useMemo(()=>new D0(O),[O]);return d.useEffect(()=>{z.connect(P);const k=H=>{E(),p&&p(H)};return z.addEventListener("change",k),h&&z.addEventListener("start",h),m&&z.addEventListener("end",m),()=>{z.dispose(),z.removeEventListener("change",k),h&&z.removeEventListener("start",h),m&&z.removeEventListener("end",m)}},[p,h,m,z,E,P]),d.useEffect(()=>{if(c){const k=U().controls;return F({controls:z}),()=>F({controls:k})}},[c,z]),(0,_.A)(()=>z.update(),-1),d.createElement("primitive",(0,C.Z)({ref:t,object:z,enableDamping:!0},v))}),Rv=d.forwardRef((T,x)=>{var R=T,{makeDefault:s,camera:t,regress:r,domElement:l,enableDamping:c=!0,keyEvents:p=!1,onChange:h,onStart:m,onEnd:v}=R,E=Cn(R,["makeDefault","camera","regress","domElement","enableDamping","keyEvents","onChange","onStart","onEnd"]);const F=(0,_.z)(Y=>Y.invalidate),U=(0,_.z)(Y=>Y.camera),P=(0,_.z)(Y=>Y.gl),O=(0,_.z)(Y=>Y.events),z=(0,_.z)(Y=>Y.setEvents),L=(0,_.z)(Y=>Y.set),k=(0,_.z)(Y=>Y.get),H=(0,_.z)(Y=>Y.performance),X=t||U,W=l||O.connected||P.domElement,J=d.useMemo(()=>new Am(X),[X]);return(0,_.A)(()=>{J.enabled&&J.update()},-1),d.useEffect(()=>(p&&J.connect(p===!0?W:p),J.connect(W),()=>void J.dispose()),[p,W,r,J,F]),d.useEffect(()=>{const Y=ge=>{F(),r&&H.regress(),h&&h(ge)},ce=ge=>{m&&m(ge)},ue=ge=>{v&&v(ge)};return J.addEventListener("change",Y),J.addEventListener("start",ce),J.addEventListener("end",ue),()=>{J.removeEventListener("start",ce),J.removeEventListener("end",ue),J.removeEventListener("change",Y)}},[h,m,v,J,F,z]),d.useEffect(()=>{if(s){const Y=k().controls;return L({controls:J}),()=>L({controls:Y})}},[s,J]),d.createElement("primitive",(0,C.Z)({ref:x,object:J,enableDamping:c},E))});var ym=A(5108),O3=Object.defineProperty,D3=(s,t,r)=>t in s?O3(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,rr=(s,t,r)=>(D3(s,typeof t!="symbol"?t+"":t,r),r);class Iv extends i.EventDispatcher{constructor(t,r){super(),rr(this,"enabled",!0),rr(this,"screen",{left:0,top:0,width:0,height:0}),rr(this,"rotateSpeed",1),rr(this,"zoomSpeed",1.2),rr(this,"panSpeed",.3),rr(this,"noRotate",!1),rr(this,"noZoom",!1),rr(this,"noPan",!1),rr(this,"staticMoving",!1),rr(this,"dynamicDampingFactor",.2),rr(this,"minDistance",0),rr(this,"maxDistance",1/0),rr(this,"keys",["KeyA","KeyS","KeyD"]),rr(this,"mouseButtons",{LEFT:i.MOUSE.ROTATE,MIDDLE:i.MOUSE.DOLLY,RIGHT:i.MOUSE.PAN}),rr(this,"object"),rr(this,"domElement"),rr(this,"cursorZoom",!1),rr(this,"target",new i.Vector3),rr(this,"mousePosition",new i.Vector2),rr(this,"STATE",{NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4}),rr(this,"EPS",1e-6),rr(this,"lastZoom",1),rr(this,"lastPosition",new i.Vector3),rr(this,"cursorVector",new i.Vector3),rr(this,"targetVector",new i.Vector3),rr(this,"_state",this.STATE.NONE),rr(this,"_keyState",this.STATE.NONE),rr(this,"_eye",new i.Vector3),rr(this,"_movePrev",new i.Vector2),rr(this,"_moveCurr",new i.Vector2),rr(this,"_lastAxis",new i.Vector3),rr(this,"_lastAngle",0),rr(this,"_zoomStart",new i.Vector2),rr(this,"_zoomEnd",new i.Vector2),rr(this,"_touchZoomDistanceStart",0),rr(this,"_touchZoomDistanceEnd",0),rr(this,"_panStart",new i.Vector2),rr(this,"_panEnd",new i.Vector2),rr(this,"target0"),rr(this,"position0"),rr(this,"up0"),rr(this,"zoom0"),rr(this,"changeEvent",{type:"change"}),rr(this,"startEvent",{type:"start"}),rr(this,"endEvent",{type:"end"}),rr(this,"onScreenVector",new i.Vector2),rr(this,"getMouseOnScreen",(l,c)=>(this.onScreenVector.set((l-this.screen.left)/this.screen.width,(c-this.screen.top)/this.screen.height),this.onScreenVector)),rr(this,"onCircleVector",new i.Vector2),rr(this,"getMouseOnCircle",(l,c)=>(this.onCircleVector.set((l-this.screen.width*.5-this.screen.left)/(this.screen.width*.5),(this.screen.height+2*(this.screen.top-c))/this.screen.width),this.onCircleVector)),rr(this,"axis",new i.Vector3),rr(this,"quaternion",new i.Quaternion),rr(this,"eyeDirection",new i.Vector3),rr(this,"objectUpDirection",new i.Vector3),rr(this,"objectSidewaysDirection",new i.Vector3),rr(this,"moveDirection",new i.Vector3),rr(this,"angle",0),rr(this,"rotateCamera",()=>{this.moveDirection.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0),this.angle=this.moveDirection.length(),this.angle?(this._eye.copy(this.object.position).sub(this.target),this.eyeDirection.copy(this._eye).normalize(),this.objectUpDirection.copy(this.object.up).normalize(),this.objectSidewaysDirection.crossVectors(this.objectUpDirection,this.eyeDirection).normalize(),this.objectUpDirection.setLength(this._moveCurr.y-this._movePrev.y),this.objectSidewaysDirection.setLength(this._moveCurr.x-this._movePrev.x),this.moveDirection.copy(this.objectUpDirection.add(this.objectSidewaysDirection)),this.axis.crossVectors(this.moveDirection,this._eye).normalize(),this.angle*=this.rotateSpeed,this.quaternion.setFromAxisAngle(this.axis,this.angle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion),this._lastAxis.copy(this.axis),this._lastAngle=this.angle):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),this.quaternion.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion)),this._movePrev.copy(this._moveCurr)}),rr(this,"zoomCamera",()=>{let l;if(this._state===this.STATE.TOUCH_ZOOM_PAN)l=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(l):this.object.isOrthographicCamera?(this.object.zoom/=l,this.object.updateProjectionMatrix()):ym.warn("THREE.TrackballControls: Unsupported camera type");else{if(l=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,Math.abs(l-1)>this.EPS&&l>0&&(this.object.isPerspectiveCamera?(l>1&&this._eye.length()>=this.maxDistance-this.EPS&&(l=1),this._eye.multiplyScalar(l)):this.object.isOrthographicCamera?(l>1&&this.object.zoom<this.maxDistance*this.maxDistance&&(l=1),this.object.zoom/=l):ym.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor,this.cursorZoom){this.targetVector.copy(this.target).project(this.object);let c=this.cursorVector.set(this.mousePosition.x,this.mousePosition.y,this.targetVector.z).unproject(this.object);this.target.lerpVectors(c,this.target,l)}this.object.isOrthographicCamera&&this.object.updateProjectionMatrix()}}),rr(this,"mouseChange",new i.Vector2),rr(this,"objectUp",new i.Vector3),rr(this,"pan",new i.Vector3),rr(this,"panCamera",()=>{if(this.domElement&&(this.mouseChange.copy(this._panEnd).sub(this._panStart),this.mouseChange.lengthSq()>this.EPS)){if(this.object.isOrthographicCamera){const l=this.object,c=(l.right-l.left)/this.object.zoom,p=(l.top-l.bottom)/this.object.zoom;this.mouseChange.x*=c,this.mouseChange.y*=p}else this.mouseChange.multiplyScalar(this._eye.length()*this.panSpeed);this.pan.copy(this._eye).cross(this.object.up).setLength(this.mouseChange.x),this.pan.add(this.objectUp.copy(this.object.up).setLength(this.mouseChange.y)),this.object.position.add(this.pan),this.target.add(this.pan),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(this.mouseChange.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}}),rr(this,"checkDistances",()=>{(!this.noZoom||!this.noPan)&&(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))}),rr(this,"handleResize",()=>{if(!this.domElement)return;const l=this.domElement.getBoundingClientRect(),c=this.domElement.ownerDocument.documentElement;this.screen.left=l.left+window.pageXOffset-c.clientLeft,this.screen.top=l.top+window.pageYOffset-c.clientTop,this.screen.width=l.width,this.screen.height=l.height}),rr(this,"update",()=>{this._eye.subVectors(this.object.position,this.target),this.noRotate||this.rotateCamera(),this.noZoom||this.zoomCamera(),this.noPan||this.panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this.checkDistances(),this.object.lookAt(this.target),this.lastPosition.distanceToSquared(this.object.position)>this.EPS&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||this.lastZoom!==this.object.zoom)&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom)):ym.warn("THREE.TrackballControls: Unsupported camera type")}),rr(this,"reset",()=>{this._state=this.STATE.NONE,this._keyState=this.STATE.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.up.copy(this.up0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom}),rr(this,"keydown",l=>{this.enabled!==!1&&(window.removeEventListener("keydown",this.keydown),this._keyState===this.STATE.NONE&&(l.code===this.keys[this.STATE.ROTATE]&&!this.noRotate?this._keyState=this.STATE.ROTATE:l.code===this.keys[this.STATE.ZOOM]&&!this.noZoom?this._keyState=this.STATE.ZOOM:l.code===this.keys[this.STATE.PAN]&&!this.noPan&&(this._keyState=this.STATE.PAN)))}),rr(this,"onPointerDown",l=>{if(this.enabled!==!1)switch(l.pointerType){case"mouse":case"pen":this.onMouseDown(l);break}}),rr(this,"onPointerMove",l=>{if(this.enabled!==!1)switch(l.pointerType){case"mouse":case"pen":this.onMouseMove(l);break}}),rr(this,"onPointerUp",l=>{if(this.enabled!==!1)switch(l.pointerType){case"mouse":case"pen":this.onMouseUp();break}}),rr(this,"keyup",()=>{this.enabled!==!1&&(this._keyState=this.STATE.NONE,window.addEventListener("keydown",this.keydown))}),rr(this,"onMouseDown",l=>{if(!this.domElement)return;if(this._state===this.STATE.NONE)switch(l.button){case this.mouseButtons.LEFT:this._state=this.STATE.ROTATE;break;case this.mouseButtons.MIDDLE:this._state=this.STATE.ZOOM;break;case this.mouseButtons.RIGHT:this._state=this.STATE.PAN;break;default:this._state=this.STATE.NONE}const c=this._keyState!==this.STATE.NONE?this._keyState:this._state;c===this.STATE.ROTATE&&!this.noRotate?(this._moveCurr.copy(this.getMouseOnCircle(l.pageX,l.pageY)),this._movePrev.copy(this._moveCurr)):c===this.STATE.ZOOM&&!this.noZoom?(this._zoomStart.copy(this.getMouseOnScreen(l.pageX,l.pageY)),this._zoomEnd.copy(this._zoomStart)):c===this.STATE.PAN&&!this.noPan&&(this._panStart.copy(this.getMouseOnScreen(l.pageX,l.pageY)),this._panEnd.copy(this._panStart)),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.startEvent)}),rr(this,"onMouseMove",l=>{if(this.enabled===!1)return;const c=this._keyState!==this.STATE.NONE?this._keyState:this._state;c===this.STATE.ROTATE&&!this.noRotate?(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(l.pageX,l.pageY))):c===this.STATE.ZOOM&&!this.noZoom?this._zoomEnd.copy(this.getMouseOnScreen(l.pageX,l.pageY)):c===this.STATE.PAN&&!this.noPan&&this._panEnd.copy(this.getMouseOnScreen(l.pageX,l.pageY))}),rr(this,"onMouseUp",()=>{this.domElement&&this.enabled!==!1&&(this._state=this.STATE.NONE,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.endEvent))}),rr(this,"mousewheel",l=>{if(this.enabled!==!1&&this.noZoom!==!0){switch(l.preventDefault(),l.deltaMode){case 2:this._zoomStart.y-=l.deltaY*.025;break;case 1:this._zoomStart.y-=l.deltaY*.01;break;default:this._zoomStart.y-=l.deltaY*25e-5;break}this.mousePosition.x=l.offsetX/this.screen.width*2-1,this.mousePosition.y=-(l.offsetY/this.screen.height)*2+1,this.dispatchEvent(this.startEvent),this.dispatchEvent(this.endEvent)}}),rr(this,"touchstart",l=>{if(this.enabled!==!1){switch(l.preventDefault(),l.touches.length){case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(l.touches[0].pageX,l.touches[0].pageY)),this._movePrev.copy(this._moveCurr);break;default:this._state=this.STATE.TOUCH_ZOOM_PAN;const c=l.touches[0].pageX-l.touches[1].pageX,p=l.touches[0].pageY-l.touches[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(c*c+p*p);const h=(l.touches[0].pageX+l.touches[1].pageX)/2,m=(l.touches[0].pageY+l.touches[1].pageY)/2;this._panStart.copy(this.getMouseOnScreen(h,m)),this._panEnd.copy(this._panStart);break}this.dispatchEvent(this.startEvent)}}),rr(this,"touchmove",l=>{if(this.enabled!==!1)switch(l.preventDefault(),l.touches.length){case 1:this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(l.touches[0].pageX,l.touches[0].pageY));break;default:const c=l.touches[0].pageX-l.touches[1].pageX,p=l.touches[0].pageY-l.touches[1].pageY;this._touchZoomDistanceEnd=Math.sqrt(c*c+p*p);const h=(l.touches[0].pageX+l.touches[1].pageX)/2,m=(l.touches[0].pageY+l.touches[1].pageY)/2;this._panEnd.copy(this.getMouseOnScreen(h,m));break}}),rr(this,"touchend",l=>{if(this.enabled!==!1){switch(l.touches.length){case 0:this._state=this.STATE.NONE;break;case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(l.touches[0].pageX,l.touches[0].pageY)),this._movePrev.copy(this._moveCurr);break}this.dispatchEvent(this.endEvent)}}),rr(this,"contextmenu",l=>{this.enabled!==!1&&l.preventDefault()}),rr(this,"connect",l=>{l===document&&ym.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=l,this.domElement.addEventListener("contextmenu",this.contextmenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.mousewheel),this.domElement.addEventListener("touchstart",this.touchstart),this.domElement.addEventListener("touchend",this.touchend),this.domElement.addEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),this.handleResize()}),rr(this,"dispose",()=>{this.domElement&&(this.domElement.removeEventListener("contextmenu",this.contextmenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.mousewheel),this.domElement.removeEventListener("touchstart",this.touchstart),this.domElement.removeEventListener("touchend",this.touchend),this.domElement.removeEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup))}),this.object=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,r!==void 0&&this.connect(r),this.update()}}const L3=d.forwardRef((E,v)=>{var x=E,{makeDefault:s,camera:t,domElement:r,regress:l,onChange:c,onStart:p,onEnd:h}=x,m=Cn(x,["makeDefault","camera","domElement","regress","onChange","onStart","onEnd"]);const{invalidate:T,camera:R,gl:F,events:U,set:P,get:O,performance:z,viewport:L}=(0,_.z)(),k=t||R,H=r||U.connected||F.domElement,X=d.useMemo(()=>new Iv(k),[k]);return(0,_.A)(()=>{X.enabled&&X.update()},-1),d.useEffect(()=>(X.connect(H),()=>void X.dispose()),[H,l,X,T]),d.useEffect(()=>{const W=J=>{T(),l&&z.regress(),c&&c(J)};return X.addEventListener("change",W),p&&X.addEventListener("start",p),h&&X.addEventListener("end",h),()=>{p&&X.removeEventListener("start",p),h&&X.removeEventListener("end",h),X.removeEventListener("change",W)}},[c,p,h,X,T]),d.useEffect(()=>{X.handleResize()},[L]),d.useEffect(()=>{if(s){const W=O().controls;return P({controls:X}),()=>P({controls:W})}},[s,X]),d.createElement("primitive",(0,C.Z)({ref:v,object:X},m))});var L0=A(5108),aA=Object.defineProperty,P3=(s,t,r)=>t in s?aA(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,Lt=(s,t,r)=>(P3(s,typeof t!="symbol"?t+"":t,r),r);const Zr={IDLE:Symbol(),ROTATE:Symbol(),PAN:Symbol(),SCALE:Symbol(),FOV:Symbol(),FOCUS:Symbol(),ZROTATE:Symbol(),TOUCH_MULTI:Symbol(),ANIMATION_FOCUS:Symbol(),ANIMATION_ROTATE:Symbol()},So={NONE:Symbol(),ONE_FINGER:Symbol(),ONE_FINGER_SWITCHED:Symbol(),TWO_FINGER:Symbol(),MULT_FINGER:Symbol(),CURSOR:Symbol()},Bi={x:0,y:0},Ma={camera:new i.Matrix4,gizmos:new i.Matrix4},us={type:"change"},Vc={type:"start"},Bc={type:"end"};class Th extends i.EventDispatcher{constructor(t,r=null,l=null){super(),Lt(this,"camera"),Lt(this,"domElement"),Lt(this,"scene"),Lt(this,"mouseActions"),Lt(this,"_mouseOp"),Lt(this,"_v2_1"),Lt(this,"_v3_1"),Lt(this,"_v3_2"),Lt(this,"_m4_1"),Lt(this,"_m4_2"),Lt(this,"_quat"),Lt(this,"_translationMatrix"),Lt(this,"_rotationMatrix"),Lt(this,"_scaleMatrix"),Lt(this,"_rotationAxis"),Lt(this,"_cameraMatrixState"),Lt(this,"_cameraProjectionState"),Lt(this,"_fovState"),Lt(this,"_upState"),Lt(this,"_zoomState"),Lt(this,"_nearPos"),Lt(this,"_farPos"),Lt(this,"_gizmoMatrixState"),Lt(this,"_up0"),Lt(this,"_zoom0"),Lt(this,"_fov0"),Lt(this,"_initialNear"),Lt(this,"_nearPos0"),Lt(this,"_initialFar"),Lt(this,"_farPos0"),Lt(this,"_cameraMatrixState0"),Lt(this,"_gizmoMatrixState0"),Lt(this,"_button"),Lt(this,"_touchStart"),Lt(this,"_touchCurrent"),Lt(this,"_input"),Lt(this,"_switchSensibility"),Lt(this,"_startFingerDistance"),Lt(this,"_currentFingerDistance"),Lt(this,"_startFingerRotation"),Lt(this,"_currentFingerRotation"),Lt(this,"_devPxRatio"),Lt(this,"_downValid"),Lt(this,"_nclicks"),Lt(this,"_downEvents"),Lt(this,"_clickStart"),Lt(this,"_maxDownTime"),Lt(this,"_maxInterval"),Lt(this,"_posThreshold"),Lt(this,"_movementThreshold"),Lt(this,"_currentCursorPosition"),Lt(this,"_startCursorPosition"),Lt(this,"_grid"),Lt(this,"_gridPosition"),Lt(this,"_gizmos"),Lt(this,"_curvePts"),Lt(this,"_timeStart"),Lt(this,"_animationId"),Lt(this,"focusAnimationTime"),Lt(this,"_timePrev"),Lt(this,"_timeCurrent"),Lt(this,"_anglePrev"),Lt(this,"_angleCurrent"),Lt(this,"_cursorPosPrev"),Lt(this,"_cursorPosCurr"),Lt(this,"_wPrev"),Lt(this,"_wCurr"),Lt(this,"adjustNearFar"),Lt(this,"scaleFactor"),Lt(this,"dampingFactor"),Lt(this,"wMax"),Lt(this,"enableAnimations"),Lt(this,"enableGrid"),Lt(this,"cursorZoom"),Lt(this,"minFov"),Lt(this,"maxFov"),Lt(this,"enabled"),Lt(this,"enablePan"),Lt(this,"enableRotate"),Lt(this,"enableZoom"),Lt(this,"minDistance"),Lt(this,"maxDistance"),Lt(this,"minZoom"),Lt(this,"maxZoom"),Lt(this,"target"),Lt(this,"_currentTarget"),Lt(this,"_tbRadius"),Lt(this,"_state"),Lt(this,"onWindowResize",()=>{const c=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3;if(this.camera){const E=this.calculateTbRadius(this.camera);E!==void 0&&(this._tbRadius=E)}const p=this._tbRadius/c,m=new i.EllipseCurve(0,0,p,p).getPoints(this._curvePts),v=new i.BufferGeometry().setFromPoints(m);for(const E in this._gizmos.children){const x=this._gizmos.children[E];x.geometry=v}this.dispatchEvent(us)}),Lt(this,"onContextMenu",c=>{if(this.enabled){for(let p=0;p<this.mouseActions.length;p++)if(this.mouseActions[p].mouse==2){c.preventDefault();break}}}),Lt(this,"onPointerCancel",()=>{this._touchStart.splice(0,this._touchStart.length),this._touchCurrent.splice(0,this._touchCurrent.length),this._input=So.NONE}),Lt(this,"onPointerDown",c=>{if(c.button==0&&c.isPrimary?(this._downValid=!0,this._downEvents.push(c)):this._downValid=!1,c.pointerType=="touch"&&this._input!=So.CURSOR)switch(this._touchStart.push(c),this._touchCurrent.push(c),this._input){case So.NONE:this._input=So.ONE_FINGER,this.onSinglePanStart(c,"ROTATE"),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp);break;case So.ONE_FINGER:case So.ONE_FINGER_SWITCHED:this._input=So.TWO_FINGER,this.onRotateStart(),this.onPinchStart(),this.onDoublePanStart();break;case So.TWO_FINGER:this._input=So.MULT_FINGER,this.onTriplePanStart();break}else if(c.pointerType!="touch"&&this._input==So.NONE){let p=null;c.ctrlKey||c.metaKey?p="CTRL":c.shiftKey&&(p="SHIFT"),this._mouseOp=this.getOpFromAction(c.button,p),this._mouseOp&&(window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp),this._input=So.CURSOR,this._button=c.button,this.onSinglePanStart(c,this._mouseOp))}}),Lt(this,"onPointerMove",c=>{if(c.pointerType=="touch"&&this._input!=So.CURSOR)switch(this._input){case So.ONE_FINGER:this.updateTouchEvent(c),this.onSinglePanMove(c,Zr.ROTATE);break;case So.ONE_FINGER_SWITCHED:if(this.calculatePointersDistance(this._touchCurrent[0],c)*this._devPxRatio>=this._switchSensibility){this._input=So.ONE_FINGER,this.updateTouchEvent(c),this.onSinglePanStart(c,"ROTATE");break}break;case So.TWO_FINGER:this.updateTouchEvent(c),this.onRotateMove(),this.onPinchMove(),this.onDoublePanMove();break;case So.MULT_FINGER:this.updateTouchEvent(c),this.onTriplePanMove();break}else if(c.pointerType!="touch"&&this._input==So.CURSOR){let p=null;c.ctrlKey||c.metaKey?p="CTRL":c.shiftKey&&(p="SHIFT");const h=this.getOpStateFromAction(this._button,p);h&&this.onSinglePanMove(c,h)}this._downValid&&this.calculatePointersDistance(this._downEvents[this._downEvents.length-1],c)*this._devPxRatio>this._movementThreshold&&(this._downValid=!1)}),Lt(this,"onPointerUp",c=>{if(c.pointerType=="touch"&&this._input!=So.CURSOR){const p=this._touchCurrent.length;for(let h=0;h<p;h++)if(this._touchCurrent[h].pointerId==c.pointerId){this._touchCurrent.splice(h,1),this._touchStart.splice(h,1);break}switch(this._input){case So.ONE_FINGER:case So.ONE_FINGER_SWITCHED:window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=So.NONE,this.onSinglePanEnd();break;case So.TWO_FINGER:this.onDoublePanEnd(),this.onPinchEnd(),this.onRotateEnd(),this._input=So.ONE_FINGER_SWITCHED;break;case So.MULT_FINGER:this._touchCurrent.length==0&&(window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=So.NONE,this.onTriplePanEnd());break}}else c.pointerType!="touch"&&this._input==So.CURSOR&&(window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=So.NONE,this.onSinglePanEnd(),this._button=-1);if(c.isPrimary)if(this._downValid)if(c.timeStamp-this._downEvents[this._downEvents.length-1].timeStamp<=this._maxDownTime)if(this._nclicks==0)this._nclicks=1,this._clickStart=performance.now();else{const h=c.timeStamp-this._clickStart,m=this.calculatePointersDistance(this._downEvents[1],this._downEvents[0])*this._devPxRatio;h<=this._maxInterval&&m<=this._posThreshold?(this._nclicks=0,this._downEvents.splice(0,this._downEvents.length),this.onDoubleTap(c)):(this._nclicks=1,this._downEvents.shift(),this._clickStart=performance.now())}else this._downValid=!1,this._nclicks=0,this._downEvents.splice(0,this._downEvents.length);else this._nclicks=0,this._downEvents.splice(0,this._downEvents.length)}),Lt(this,"onWheel",c=>{var p,h;if(this.enabled&&this.enableZoom&&this.domElement){let m=null;c.ctrlKey||c.metaKey?m="CTRL":c.shiftKey&&(m="SHIFT");const v=this.getOpFromAction("WHEEL",m);if(v){c.preventDefault(),this.dispatchEvent(Vc);const E=125;let x=c.deltaY/E,T=1;switch(x>0?T=1/this.scaleFactor:x<0&&(T=this.scaleFactor),v){case"ZOOM":if(this.updateTbState(Zr.SCALE,!0),x>0?T=1/Math.pow(this.scaleFactor,x):x<0&&(T=Math.pow(this.scaleFactor,-x)),this.cursorZoom&&this.enablePan){let R;this.camera instanceof i.OrthographicCamera&&(R=(p=this.unprojectOnTbPlane(this.camera,c.clientX,c.clientY,this.domElement))==null?void 0:p.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position)),this.camera instanceof i.PerspectiveCamera&&(R=(h=this.unprojectOnTbPlane(this.camera,c.clientX,c.clientY,this.domElement))==null?void 0:h.applyQuaternion(this.camera.quaternion).add(this._gizmos.position)),R!==void 0&&this.applyTransformMatrix(this.applyScale(T,R))}else this.applyTransformMatrix(this.applyScale(T,this._gizmos.position));this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(Zr.IDLE,!1),this.dispatchEvent(us),this.dispatchEvent(Bc);break;case"FOV":if(this.camera instanceof i.PerspectiveCamera){this.updateTbState(Zr.FOV,!0),c.deltaX!=0&&(x=c.deltaX/E,T=1,x>0?T=1/Math.pow(this.scaleFactor,x):x<0&&(T=Math.pow(this.scaleFactor,-x))),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const R=this._v3_1.distanceTo(this._gizmos.position);let F=R/T;F=i.MathUtils.clamp(F,this.minDistance,this.maxDistance);const U=R*Math.tan(i.MathUtils.DEG2RAD*this.camera.fov*.5);let P=i.MathUtils.RAD2DEG*(Math.atan(U/F)*2);P>this.maxFov?P=this.maxFov:P<this.minFov&&(P=this.minFov);const O=U/Math.tan(i.MathUtils.DEG2RAD*(P/2));T=R/O,this.setFov(P),this.applyTransformMatrix(this.applyScale(T,this._gizmos.position,!1))}this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(Zr.IDLE,!1),this.dispatchEvent(us),this.dispatchEvent(Bc);break}}}}),Lt(this,"onSinglePanStart",(c,p)=>{if(this.enabled&&this.domElement)switch(this.dispatchEvent(Vc),this.setCenter(c.clientX,c.clientY),p){case"PAN":if(!this.enablePan)return;if(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(us)),this.camera){this.updateTbState(Zr.PAN,!0);const h=this.unprojectOnTbPlane(this.camera,Bi.x,Bi.y,this.domElement);h!==void 0&&this._startCursorPosition.copy(h),this.enableGrid&&(this.drawGrid(),this.dispatchEvent(us))}break;case"ROTATE":if(!this.enableRotate)return;if(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1),this.camera){this.updateTbState(Zr.ROTATE,!0);const h=this.unprojectOnTbSurface(this.camera,Bi.x,Bi.y,this.domElement,this._tbRadius);h!==void 0&&this._startCursorPosition.copy(h),this.activateGizmos(!0),this.enableAnimations&&(this._timePrev=this._timeCurrent=performance.now(),this._angleCurrent=this._anglePrev=0,this._cursorPosPrev.copy(this._startCursorPosition),this._cursorPosCurr.copy(this._cursorPosPrev),this._wCurr=0,this._wPrev=this._wCurr)}this.dispatchEvent(us);break;case"FOV":if(!this.enableZoom)return;this.camera instanceof i.PerspectiveCamera&&(this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(us)),this.updateTbState(Zr.FOV,!0),this._startCursorPosition.setY(this.getCursorNDC(Bi.x,Bi.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition));break;case"ZOOM":if(!this.enableZoom)return;this._animationId!=-1&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(us)),this.updateTbState(Zr.SCALE,!0),this._startCursorPosition.setY(this.getCursorNDC(Bi.x,Bi.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition);break}}),Lt(this,"onSinglePanMove",(c,p)=>{if(this.enabled&&this.domElement){const h=p!=this._state;switch(this.setCenter(c.clientX,c.clientY),p){case Zr.PAN:if(this.enablePan&&this.camera)if(h){this.dispatchEvent(Bc),this.dispatchEvent(Vc),this.updateTbState(p,!0);const m=this.unprojectOnTbPlane(this.camera,Bi.x,Bi.y,this.domElement);m!==void 0&&this._startCursorPosition.copy(m),this.enableGrid&&this.drawGrid(),this.activateGizmos(!1)}else{const m=this.unprojectOnTbPlane(this.camera,Bi.x,Bi.y,this.domElement);m!==void 0&&this._currentCursorPosition.copy(m),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition))}break;case Zr.ROTATE:if(this.enableRotate&&this.camera)if(h){this.dispatchEvent(Bc),this.dispatchEvent(Vc),this.updateTbState(p,!0);const m=this.unprojectOnTbSurface(this.camera,Bi.x,Bi.y,this.domElement,this._tbRadius);m!==void 0&&this._startCursorPosition.copy(m),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!0)}else{const m=this.unprojectOnTbSurface(this.camera,Bi.x,Bi.y,this.domElement,this._tbRadius);m!==void 0&&this._currentCursorPosition.copy(m);const v=this._startCursorPosition.distanceTo(this._currentCursorPosition),E=this._startCursorPosition.angleTo(this._currentCursorPosition),x=Math.max(v/this._tbRadius,E);this.applyTransformMatrix(this.rotate(this.calculateRotationAxis(this._startCursorPosition,this._currentCursorPosition),x)),this.enableAnimations&&(this._timePrev=this._timeCurrent,this._timeCurrent=performance.now(),this._anglePrev=this._angleCurrent,this._angleCurrent=x,this._cursorPosPrev.copy(this._cursorPosCurr),this._cursorPosCurr.copy(this._currentCursorPosition),this._wPrev=this._wCurr,this._wCurr=this.calculateAngularSpeed(this._anglePrev,this._angleCurrent,this._timePrev,this._timeCurrent))}break;case Zr.SCALE:if(this.enableZoom)if(h)this.dispatchEvent(Bc),this.dispatchEvent(Vc),this.updateTbState(p,!0),this._startCursorPosition.setY(this.getCursorNDC(Bi.x,Bi.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(Bi.x,Bi.y,this.domElement).y*.5);const v=this._currentCursorPosition.y-this._startCursorPosition.y;let E=1;v<0?E=1/Math.pow(this.scaleFactor,-v*8):v>0&&(E=Math.pow(this.scaleFactor,v*8)),this.applyTransformMatrix(this.applyScale(E,this._gizmos.position))}break;case Zr.FOV:if(this.enableZoom&&this.camera instanceof i.PerspectiveCamera)if(h)this.dispatchEvent(Bc),this.dispatchEvent(Vc),this.updateTbState(p,!0),this._startCursorPosition.setY(this.getCursorNDC(Bi.x,Bi.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{this._currentCursorPosition.setY(this.getCursorNDC(Bi.x,Bi.y,this.domElement).y*.5);const v=this._currentCursorPosition.y-this._startCursorPosition.y;let E=1;v<0?E=1/Math.pow(this.scaleFactor,-v*8):v>0&&(E=Math.pow(this.scaleFactor,v*8)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const x=this._v3_1.distanceTo(this._gizmos.position);let T=x/E;T=i.MathUtils.clamp(T,this.minDistance,this.maxDistance);const R=x*Math.tan(i.MathUtils.DEG2RAD*this._fovState*.5);let F=i.MathUtils.RAD2DEG*(Math.atan(R/T)*2);F=i.MathUtils.clamp(F,this.minFov,this.maxFov);const U=R/Math.tan(i.MathUtils.DEG2RAD*(F/2));E=x/U,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(F),this.applyTransformMatrix(this.applyScale(E,this._v3_2,!1));const P=this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(U/x);this._m4_1.makeTranslation(P.x,P.y,P.z)}break}this.dispatchEvent(us)}}),Lt(this,"onSinglePanEnd",()=>{if(this._state==Zr.ROTATE){if(!this.enableRotate)return;if(this.enableAnimations)if(performance.now()-this._timeCurrent<120){const p=Math.abs((this._wPrev+this._wCurr)/2),h=this;this._animationId=window.requestAnimationFrame(function(m){h.updateTbState(Zr.ANIMATION_ROTATE,!0);const v=h.calculateRotationAxis(h._cursorPosPrev,h._cursorPosCurr);h.onRotationAnim(m,v,Math.min(p,h.wMax))})}else this.updateTbState(Zr.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(us);else this.updateTbState(Zr.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(us)}else(this._state==Zr.PAN||this._state==Zr.IDLE)&&(this.updateTbState(Zr.IDLE,!1),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1),this.dispatchEvent(us));this.dispatchEvent(Bc)}),Lt(this,"onDoubleTap",c=>{if(this.enabled&&this.enablePan&&this.scene&&this.camera&&this.domElement){this.dispatchEvent(Vc),this.setCenter(c.clientX,c.clientY);const p=this.unprojectOnObj(this.getCursorNDC(Bi.x,Bi.y,this.domElement),this.camera);if(p&&this.enableAnimations){const h=this;this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),this._timeStart=-1,this._animationId=window.requestAnimationFrame(function(m){h.updateTbState(Zr.ANIMATION_FOCUS,!0),h.onFocusAnim(m,p,h._cameraMatrixState,h._gizmoMatrixState)})}else p&&!this.enableAnimations&&(this.updateTbState(Zr.FOCUS,!0),this.focus(p,this.scaleFactor),this.updateTbState(Zr.IDLE,!1),this.dispatchEvent(us))}this.dispatchEvent(Bc)}),Lt(this,"onDoublePanStart",()=>{if(this.enabled&&this.enablePan&&this.camera&&this.domElement){this.dispatchEvent(Vc),this.updateTbState(Zr.PAN,!0),this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const c=this.unprojectOnTbPlane(this.camera,Bi.x,Bi.y,this.domElement,!0);c!==void 0&&this._startCursorPosition.copy(c),this._currentCursorPosition.copy(this._startCursorPosition),this.activateGizmos(!1)}}),Lt(this,"onDoublePanMove",()=>{if(this.enabled&&this.enablePan&&this.camera&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._state!=Zr.PAN&&(this.updateTbState(Zr.PAN,!0),this._startCursorPosition.copy(this._currentCursorPosition));const c=this.unprojectOnTbPlane(this.camera,Bi.x,Bi.y,this.domElement,!0);c!==void 0&&this._currentCursorPosition.copy(c),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition,!0)),this.dispatchEvent(us)}}),Lt(this,"onDoublePanEnd",()=>{this.updateTbState(Zr.IDLE,!1),this.dispatchEvent(Bc)}),Lt(this,"onRotateStart",()=>{var c;this.enabled&&this.enableRotate&&(this.dispatchEvent(Vc),this.updateTbState(Zr.ZROTATE,!0),this._startFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this._currentFingerRotation=this._startFingerRotation,(c=this.camera)==null||c.getWorldDirection(this._rotationAxis),!this.enablePan&&!this.enableZoom&&this.activateGizmos(!0))}),Lt(this,"onRotateMove",()=>{var c;if(this.enabled&&this.enableRotate&&this.camera&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);let p;this._state!=Zr.ZROTATE&&(this.updateTbState(Zr.ZROTATE,!0),this._startFingerRotation=this._currentFingerRotation),this._currentFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this.enablePan?this.camera&&(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),p=(c=this.unprojectOnTbPlane(this.camera,Bi.x,Bi.y,this.domElement))==null?void 0:c.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._v3_2)):p=new i.Vector3().setFromMatrixPosition(this._gizmoMatrixState);const h=i.MathUtils.DEG2RAD*(this._startFingerRotation-this._currentFingerRotation);p!==void 0&&this.applyTransformMatrix(this.zRotate(p,h)),this.dispatchEvent(us)}}),Lt(this,"onRotateEnd",()=>{this.updateTbState(Zr.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(Bc)}),Lt(this,"onPinchStart",()=>{this.enabled&&this.enableZoom&&(this.dispatchEvent(Vc),this.updateTbState(Zr.SCALE,!0),this._startFingerDistance=this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),this._currentFingerDistance=this._startFingerDistance,this.activateGizmos(!1))}),Lt(this,"onPinchMove",()=>{var c,p;if(this.enabled&&this.enableZoom&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const h=12;this._state!=Zr.SCALE&&(this._startFingerDistance=this._currentFingerDistance,this.updateTbState(Zr.SCALE,!0)),this._currentFingerDistance=Math.max(this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),h*this._devPxRatio);const m=this._currentFingerDistance/this._startFingerDistance;let v;this.enablePan?this.camera instanceof i.OrthographicCamera?v=(c=this.unprojectOnTbPlane(this.camera,Bi.x,Bi.y,this.domElement))==null?void 0:c.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position):this.camera instanceof i.PerspectiveCamera&&(v=(p=this.unprojectOnTbPlane(this.camera,Bi.x,Bi.y,this.domElement))==null?void 0:p.applyQuaternion(this.camera.quaternion).add(this._gizmos.position)):v=this._gizmos.position,v!==void 0&&this.applyTransformMatrix(this.applyScale(m,v)),this.dispatchEvent(us)}}),Lt(this,"onPinchEnd",()=>{this.updateTbState(Zr.IDLE,!1),this.dispatchEvent(Bc)}),Lt(this,"onTriplePanStart",()=>{if(this.enabled&&this.enableZoom&&this.domElement){this.dispatchEvent(Vc),this.updateTbState(Zr.SCALE,!0);let c=0,p=0;const h=this._touchCurrent.length;for(let m=0;m<h;m++)c+=this._touchCurrent[m].clientX,p+=this._touchCurrent[m].clientY;this.setCenter(c/h,p/h),this._startCursorPosition.setY(this.getCursorNDC(Bi.x,Bi.y,this.domElement).y*.5),this._currentCursorPosition.copy(this._startCursorPosition)}}),Lt(this,"onTriplePanMove",()=>{if(this.enabled&&this.enableZoom&&this.camera&&this.domElement){let c=0,p=0;const h=this._touchCurrent.length;for(let O=0;O<h;O++)c+=this._touchCurrent[O].clientX,p+=this._touchCurrent[O].clientY;this.setCenter(c/h,p/h);const m=8;this._currentCursorPosition.setY(this.getCursorNDC(Bi.x,Bi.y,this.domElement).y*.5);const v=this._currentCursorPosition.y-this._startCursorPosition.y;let E=1;v<0?E=1/Math.pow(this.scaleFactor,-v*m):v>0&&(E=Math.pow(this.scaleFactor,v*m)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const x=this._v3_1.distanceTo(this._gizmos.position);let T=x/E;T=i.MathUtils.clamp(T,this.minDistance,this.maxDistance);const R=x*Math.tan(i.MathUtils.DEG2RAD*this._fovState*.5);let F=i.MathUtils.RAD2DEG*(Math.atan(R/T)*2);F=i.MathUtils.clamp(F,this.minFov,this.maxFov);const U=R/Math.tan(i.MathUtils.DEG2RAD*(F/2));E=x/U,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(F),this.applyTransformMatrix(this.applyScale(E,this._v3_2,!1));const P=this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(U/x);this._m4_1.makeTranslation(P.x,P.y,P.z),this.dispatchEvent(us)}}),Lt(this,"onTriplePanEnd",()=>{this.updateTbState(Zr.IDLE,!1),this.dispatchEvent(Bc)}),Lt(this,"setCenter",(c,p)=>{Bi.x=c,Bi.y=p}),Lt(this,"initializeMouseActions",()=>{this.setMouseAction("PAN",0,"CTRL"),this.setMouseAction("PAN",2),this.setMouseAction("ROTATE",0),this.setMouseAction("ZOOM","WHEEL"),this.setMouseAction("ZOOM",1),this.setMouseAction("FOV","WHEEL","SHIFT"),this.setMouseAction("FOV",1,"SHIFT")}),Lt(this,"setMouseAction",(c,p,h=null)=>{const m=["PAN","ROTATE","ZOOM","FOV"],v=[0,1,2,"WHEEL"],E=["CTRL","SHIFT",null];let x;if(!m.includes(c)||!v.includes(p)||!E.includes(h)||p=="WHEEL"&&c!="ZOOM"&&c!="FOV")return!1;switch(c){case"PAN":x=Zr.PAN;break;case"ROTATE":x=Zr.ROTATE;break;case"ZOOM":x=Zr.SCALE;break;case"FOV":x=Zr.FOV;break}const T={operation:c,mouse:p,key:h,state:x};for(let R=0;R<this.mouseActions.length;R++)if(this.mouseActions[R].mouse==T.mouse&&this.mouseActions[R].key==T.key)return this.mouseActions.splice(R,1,T),!0;return this.mouseActions.push(T),!0}),Lt(this,"getOpFromAction",(c,p)=>{let h;for(let m=0;m<this.mouseActions.length;m++)if(h=this.mouseActions[m],h.mouse==c&&h.key==p)return h.operation;if(p){for(let m=0;m<this.mouseActions.length;m++)if(h=this.mouseActions[m],h.mouse==c&&h.key==null)return h.operation}return null}),Lt(this,"getOpStateFromAction",(c,p)=>{let h;for(let m=0;m<this.mouseActions.length;m++)if(h=this.mouseActions[m],h.mouse==c&&h.key==p)return h.state;if(p){for(let m=0;m<this.mouseActions.length;m++)if(h=this.mouseActions[m],h.mouse==c&&h.key==null)return h.state}return null}),Lt(this,"getAngle",(c,p)=>Math.atan2(p.clientY-c.clientY,p.clientX-c.clientX)*180/Math.PI),Lt(this,"updateTouchEvent",c=>{for(let p=0;p<this._touchCurrent.length;p++)if(this._touchCurrent[p].pointerId==c.pointerId){this._touchCurrent.splice(p,1,c);break}}),Lt(this,"calculateAngularSpeed",(c,p,h,m)=>{const v=p-c,E=(m-h)/1e3;return E==0?0:v/E}),Lt(this,"calculatePointersDistance",(c,p)=>Math.sqrt(Math.pow(p.clientX-c.clientX,2)+Math.pow(p.clientY-c.clientY,2))),Lt(this,"calculateRotationAxis",(c,p)=>(this._rotationMatrix.extractRotation(this._cameraMatrixState),this._quat.setFromRotationMatrix(this._rotationMatrix),this._rotationAxis.crossVectors(c,p).applyQuaternion(this._quat),this._rotationAxis.normalize().clone())),Lt(this,"calculateTbRadius",c=>{const h=c.position.distanceTo(this._gizmos.position);if(c instanceof i.PerspectiveCamera){const m=i.MathUtils.DEG2RAD*c.fov*.5,v=Math.atan(c.aspect*Math.tan(m));return Math.tan(Math.min(m,v))*h*.67}else if(c instanceof i.OrthographicCamera)return Math.min(c.top,c.right)*.67}),Lt(this,"focus",(c,p,h=1)=>{if(this.camera){const m=c.clone();m.sub(this._gizmos.position).multiplyScalar(h),this._translationMatrix.makeTranslation(m.x,m.y,m.z);const v=this._gizmoMatrixState.clone();this._gizmoMatrixState.premultiply(this._translationMatrix),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale);const E=this._cameraMatrixState.clone();this._cameraMatrixState.premultiply(this._translationMatrix),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.enableZoom&&this.applyTransformMatrix(this.applyScale(p,this._gizmos.position)),this._gizmoMatrixState.copy(v),this._cameraMatrixState.copy(E)}}),Lt(this,"drawGrid",()=>{if(this.scene){let h,m,v,E;if(this.camera instanceof i.OrthographicCamera){const x=this.camera.right-this.camera.left,T=this.camera.bottom-this.camera.top;v=Math.max(x,T),E=v/20,h=v/this.camera.zoom*3,m=h/E*this.camera.zoom}else if(this.camera instanceof i.PerspectiveCamera){const x=this.camera.position.distanceTo(this._gizmos.position),T=i.MathUtils.DEG2RAD*this.camera.fov*.5,R=Math.atan(this.camera.aspect*Math.tan(T));v=Math.tan(Math.max(T,R))*x*2,E=v/20,h=v*3,m=h/E}this._grid==null&&this.camera&&(this._grid=new i.GridHelper(h,m,8947848,8947848),this._grid.position.copy(this._gizmos.position),this._gridPosition.copy(this._grid.position),this._grid.quaternion.copy(this.camera.quaternion),this._grid.rotateX(Math.PI*.5),this.scene.add(this._grid))}}),Lt(this,"connect",c=>{c===document&&L0.error('THREE.ArcballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=c,this.domElement.style.touchAction="none",this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointercancel",this.onPointerCancel),this.domElement.addEventListener("wheel",this.onWheel)}),Lt(this,"dispose",()=>{var c,p,h,m,v;this._animationId!=-1&&window.cancelAnimationFrame(this._animationId),(c=this.domElement)==null||c.removeEventListener("pointerdown",this.onPointerDown),(p=this.domElement)==null||p.removeEventListener("pointercancel",this.onPointerCancel),(h=this.domElement)==null||h.removeEventListener("wheel",this.onWheel),(m=this.domElement)==null||m.removeEventListener("contextmenu",this.onContextMenu),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("resize",this.onWindowResize),(v=this.scene)==null||v.remove(this._gizmos),this.disposeGrid()}),Lt(this,"disposeGrid",()=>{this._grid&&this.scene&&(this.scene.remove(this._grid),this._grid=null)}),Lt(this,"easeOutCubic",c=>1-Math.pow(1-c,3)),Lt(this,"activateGizmos",c=>{for(const p of this._gizmos.children)p.material.setValues({opacity:c?1:.6})}),Lt(this,"getCursorNDC",(c,p,h)=>{const m=h.getBoundingClientRect();return this._v2_1.setX((c-m.left)/m.width*2-1),this._v2_1.setY((m.bottom-p)/m.height*2-1),this._v2_1.clone()}),Lt(this,"getCursorPosition",(c,p,h)=>(this._v2_1.copy(this.getCursorNDC(c,p,h)),this.camera instanceof i.OrthographicCamera&&(this._v2_1.x*=(this.camera.right-this.camera.left)*.5,this._v2_1.y*=(this.camera.top-this.camera.bottom)*.5),this._v2_1.clone())),Lt(this,"setCamera",c=>{if(c){c.lookAt(this.target),c.updateMatrix(),c instanceof i.PerspectiveCamera&&(this._fov0=c.fov,this._fovState=c.fov),this._cameraMatrixState0.copy(c.matrix),this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraProjectionState.copy(c.projectionMatrix),this._zoom0=c.zoom,this._zoomState=this._zoom0,this._initialNear=c.near,this._nearPos0=c.position.distanceTo(this.target)-c.near,this._nearPos=this._initialNear,this._initialFar=c.far,this._farPos0=c.position.distanceTo(this.target)-c.far,this._farPos=this._initialFar,this._up0.copy(c.up),this._upState.copy(c.up),this.camera=c,this.camera.updateProjectionMatrix();const p=this.calculateTbRadius(c);p!==void 0&&(this._tbRadius=p),this.makeGizmos(this.target,this._tbRadius)}}),Lt(this,"makeGizmos",(c,p)=>{const m=new i.EllipseCurve(0,0,p,p).getPoints(this._curvePts),v=new i.BufferGeometry().setFromPoints(m),E=new i.LineBasicMaterial({color:16744576,fog:!1,transparent:!0,opacity:.6}),x=new i.LineBasicMaterial({color:8454016,fog:!1,transparent:!0,opacity:.6}),T=new i.LineBasicMaterial({color:8421631,fog:!1,transparent:!0,opacity:.6}),R=new i.Line(v,E),F=new i.Line(v,x),U=new i.Line(v,T),P=Math.PI*.5;if(R.rotation.x=P,F.rotation.y=P,this._gizmoMatrixState0.identity().setPosition(c),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this.camera&&this.camera.zoom!=1){const O=1/this.camera.zoom;this._scaleMatrix.makeScale(O,O,O),this._translationMatrix.makeTranslation(-c.x,-c.y,-c.z),this._gizmoMatrixState.premultiply(this._translationMatrix).premultiply(this._scaleMatrix),this._translationMatrix.makeTranslation(c.x,c.y,c.z),this._gizmoMatrixState.premultiply(this._translationMatrix)}this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.clear(),this._gizmos.add(R),this._gizmos.add(F),this._gizmos.add(U)}),Lt(this,"onFocusAnim",(c,p,h,m)=>{if(this._timeStart==-1&&(this._timeStart=c),this._state==Zr.ANIMATION_FOCUS){const E=(c-this._timeStart)/this.focusAnimationTime;if(this._gizmoMatrixState.copy(m),E>=1)this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(p,this.scaleFactor),this._timeStart=-1,this.updateTbState(Zr.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(us);else{const x=this.easeOutCubic(E),T=1-x+this.scaleFactor*x;this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(p,T,x),this.dispatchEvent(us);const R=this;this._animationId=window.requestAnimationFrame(function(F){R.onFocusAnim(F,p,h,m.clone())})}}else this._animationId=-1,this._timeStart=-1}),Lt(this,"onRotationAnim",(c,p,h)=>{if(this._timeStart==-1&&(this._anglePrev=0,this._angleCurrent=0,this._timeStart=c),this._state==Zr.ANIMATION_ROTATE){const m=(c-this._timeStart)/1e3;if(h+-this.dampingFactor*m>0){this._angleCurrent=.5*-this.dampingFactor*Math.pow(m,2)+h*m+0,this.applyTransformMatrix(this.rotate(p,this._angleCurrent)),this.dispatchEvent(us);const E=this;this._animationId=window.requestAnimationFrame(function(x){E.onRotationAnim(x,p,h)})}else this._animationId=-1,this._timeStart=-1,this.updateTbState(Zr.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(us)}else this._animationId=-1,this._timeStart=-1,this._state!=Zr.ROTATE&&(this.activateGizmos(!1),this.dispatchEvent(us))}),Lt(this,"pan",(c,p,h=!1)=>{if(this.camera){const m=c.clone().sub(p);if(this.camera instanceof i.OrthographicCamera&&m.multiplyScalar(1/this.camera.zoom),this.camera instanceof i.PerspectiveCamera&&h){this._v3_1.setFromMatrixPosition(this._cameraMatrixState0),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0);const v=this._v3_1.distanceTo(this._v3_2)/this.camera.position.distanceTo(this._gizmos.position);m.multiplyScalar(1/v)}this._v3_1.set(m.x,m.y,0).applyQuaternion(this.camera.quaternion),this._m4_1.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z),this.setTransformationMatrices(this._m4_1,this._m4_1)}return Ma}),Lt(this,"reset",()=>{if(this.camera){this.camera.zoom=this._zoom0,this.camera instanceof i.PerspectiveCamera&&(this.camera.fov=this._fov0),this.camera.near=this._nearPos,this.camera.far=this._farPos,this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(this._up0),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this._gizmoMatrixState0.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix();const c=this.calculateTbRadius(this.camera);c!==void 0&&(this._tbRadius=c),this.makeGizmos(this._gizmos.position,this._tbRadius),this.camera.lookAt(this._gizmos.position),this.updateTbState(Zr.IDLE,!1),this.dispatchEvent(us)}}),Lt(this,"rotate",(c,p)=>{const h=this._gizmos.position;return this._translationMatrix.makeTranslation(-h.x,-h.y,-h.z),this._rotationMatrix.makeRotationAxis(c,-p),this._m4_1.makeTranslation(h.x,h.y,h.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1),Ma}),Lt(this,"copyState",()=>{if(this.camera){const c=JSON.stringify(this.camera instanceof i.OrthographicCamera?{arcballState:{cameraFar:this.camera.far,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}}:{arcballState:{cameraFar:this.camera.far,cameraFov:this.camera.fov,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}});navigator.clipboard.writeText(c)}}),Lt(this,"pasteState",()=>{const c=this;navigator.clipboard.readText().then(function(h){c.setStateFromJSON(h)})}),Lt(this,"saveState",()=>{this.camera&&(this._cameraMatrixState0.copy(this.camera.matrix),this._gizmoMatrixState0.copy(this._gizmos.matrix),this._nearPos=this.camera.near,this._farPos=this.camera.far,this._zoom0=this.camera.zoom,this._up0.copy(this.camera.up),this.camera instanceof i.PerspectiveCamera&&(this._fov0=this.camera.fov))}),Lt(this,"applyScale",(c,p,h=!0)=>{if(!this.camera)return;const m=p.clone();let v=1/c;if(this.camera instanceof i.OrthographicCamera){this.camera.zoom=this._zoomState,this.camera.zoom*=c,this.camera.zoom>this.maxZoom?(this.camera.zoom=this.maxZoom,v=this._zoomState/this.maxZoom):this.camera.zoom<this.minZoom&&(this.camera.zoom=this.minZoom,v=this._zoomState/this.minZoom),this.camera.updateProjectionMatrix(),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState),this._scaleMatrix.makeScale(v,v,v),this._translationMatrix.makeTranslation(-this._v3_1.x,-this._v3_1.y,-this._v3_1.z),this._m4_2.makeTranslation(this._v3_1.x,this._v3_1.y,this._v3_1.z).multiply(this._scaleMatrix),this._m4_2.multiply(this._translationMatrix),m.sub(this._v3_1);const E=m.clone().multiplyScalar(v);return m.sub(E),this._m4_1.makeTranslation(m.x,m.y,m.z),this._m4_2.premultiply(this._m4_1),this.setTransformationMatrices(this._m4_1,this._m4_2),Ma}if(this.camera instanceof i.PerspectiveCamera){this._v3_1.setFromMatrixPosition(this._cameraMatrixState),this._v3_2.setFromMatrixPosition(this._gizmoMatrixState);let E=this._v3_1.distanceTo(m),x=E-E*v;const T=E-x;T<this.minDistance?(v=this.minDistance/E,x=E-E*v):T>this.maxDistance&&(v=this.maxDistance/E,x=E-E*v);let R=m.clone().sub(this._v3_1).normalize().multiplyScalar(x);if(this._m4_1.makeTranslation(R.x,R.y,R.z),h){const F=this._v3_2;E=F.distanceTo(m),x=E-E*v,R=m.clone().sub(this._v3_2).normalize().multiplyScalar(x),this._translationMatrix.makeTranslation(F.x,F.y,F.z),this._scaleMatrix.makeScale(v,v,v),this._m4_2.makeTranslation(R.x,R.y,R.z).multiply(this._translationMatrix),this._m4_2.multiply(this._scaleMatrix),this._translationMatrix.makeTranslation(-F.x,-F.y,-F.z),this._m4_2.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1,this._m4_2)}else this.setTransformationMatrices(this._m4_1);return Ma}}),Lt(this,"setFov",c=>{this.camera instanceof i.PerspectiveCamera&&(this.camera.fov=i.MathUtils.clamp(c,this.minFov,this.maxFov),this.camera.updateProjectionMatrix())}),Lt(this,"setTarget",(c,p,h)=>{if(this.camera){this.target.set(c,p,h),this._gizmos.position.set(c,p,h);const m=this.calculateTbRadius(this.camera);m!==void 0&&(this._tbRadius=m),this.makeGizmos(this.target,this._tbRadius),this.camera.lookAt(this.target)}}),Lt(this,"zRotate",(c,p)=>(this._rotationMatrix.makeRotationAxis(this._rotationAxis,p),this._translationMatrix.makeTranslation(-c.x,-c.y,-c.z),this._m4_1.makeTranslation(c.x,c.y,c.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState).sub(c),this._v3_2.copy(this._v3_1).applyAxisAngle(this._rotationAxis,p),this._v3_2.sub(this._v3_1),this._m4_2.makeTranslation(this._v3_2.x,this._v3_2.y,this._v3_2.z),this.setTransformationMatrices(this._m4_1,this._m4_2),Ma)),Lt(this,"unprojectOnObj",(c,p)=>{if(!this.scene)return null;const h=new i.Raycaster;h.near=p.near,h.far=p.far,h.setFromCamera(c,p);const m=h.intersectObjects(this.scene.children,!0);for(let v=0;v<m.length;v++)if(m[v].object.uuid!=this._gizmos.uuid&&m[v].face)return m[v].point.clone();return null}),Lt(this,"unprojectOnTbSurface",(c,p,h,m,v)=>{if(c instanceof i.OrthographicCamera){this._v2_1.copy(this.getCursorPosition(p,h,m)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0);const E=Math.pow(this._v2_1.x,2),x=Math.pow(this._v2_1.y,2),T=Math.pow(this._tbRadius,2);return E+x<=T*.5?this._v3_1.setZ(Math.sqrt(T-(E+x))):this._v3_1.setZ(T*.5/Math.sqrt(E+x)),this._v3_1}if(c instanceof i.PerspectiveCamera){this._v2_1.copy(this.getCursorNDC(p,h,m)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(c.projectionMatrixInverse);const E=this._v3_1.clone().normalize(),x=c.position.distanceTo(this._gizmos.position),T=Math.pow(v,2),R=this._v3_1.z,F=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));if(F==0)return E.set(this._v3_1.x,this._v3_1.y,v),E;const U=R/F,P=x;let O=Math.pow(U,2)+1,z=2*U*P,L=Math.pow(P,2)-T,k=Math.pow(z,2)-4*O*L;if(k>=0&&(this._v2_1.setX((-z-Math.sqrt(k))/(2*O)),this._v2_1.setY(U*this._v2_1.x+P),i.MathUtils.RAD2DEG*this._v2_1.angle()>=45)){const W=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(x-this._v2_1.y,2));return E.multiplyScalar(W),E.z+=x,E}O=U,z=P,L=-T*.5,k=Math.pow(z,2)-4*O*L,this._v2_1.setX((-z-Math.sqrt(k))/(2*O)),this._v2_1.setY(U*this._v2_1.x+P);const H=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(x-this._v2_1.y,2));return E.multiplyScalar(H),E.z+=x,E}}),Lt(this,"unprojectOnTbPlane",(c,p,h,m,v=!1)=>{if(c instanceof i.OrthographicCamera)return this._v2_1.copy(this.getCursorPosition(p,h,m)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0),this._v3_1.clone();if(c instanceof i.PerspectiveCamera){this._v2_1.copy(this.getCursorNDC(p,h,m)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(c.projectionMatrixInverse);const E=this._v3_1.clone().normalize(),x=this._v3_1.z,T=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));let R;if(v?R=this._v3_1.setFromMatrixPosition(this._cameraMatrixState0).distanceTo(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState0)):R=c.position.distanceTo(this._gizmos.position),T==0)return E.set(0,0,0),E;const F=x/T,U=R,P=-U/F,O=Math.sqrt(Math.pow(U,2)+Math.pow(P,2));return E.multiplyScalar(O),E.z=0,E}}),Lt(this,"updateMatrixState",()=>{this.camera&&(this._cameraMatrixState.copy(this.camera.matrix),this._gizmoMatrixState.copy(this._gizmos.matrix),this.camera instanceof i.OrthographicCamera&&(this._cameraProjectionState.copy(this.camera.projectionMatrix),this.camera.updateProjectionMatrix(),this._zoomState=this.camera.zoom),this.camera instanceof i.PerspectiveCamera&&(this._fovState=this.camera.fov))}),Lt(this,"updateTbState",(c,p)=>{this._state=c,p&&this.updateMatrixState()}),Lt(this,"update",()=>{if(!this.target.equals(this._currentTarget)&&this.camera){this._gizmos.position.set(this.target.x,this.target.y,this.target.z);const p=this.calculateTbRadius(this.camera);p!==void 0&&(this._tbRadius=p),this.makeGizmos(this.target,this._tbRadius),this._currentTarget.copy(this.target)}if(this.camera){if(this.camera instanceof i.OrthographicCamera&&(this.camera.zoom>this.maxZoom||this.camera.zoom<this.minZoom)){const p=i.MathUtils.clamp(this.camera.zoom,this.minZoom,this.maxZoom);this.applyTransformMatrix(this.applyScale(p/this.camera.zoom,this._gizmos.position,!0))}if(this.camera instanceof i.PerspectiveCamera){const p=this.camera.position.distanceTo(this._gizmos.position);if(p>this.maxDistance+1e-6||p<this.minDistance-1e-6){const v=i.MathUtils.clamp(p,this.minDistance,this.maxDistance);this.applyTransformMatrix(this.applyScale(v/p,this._gizmos.position)),this.updateMatrixState()}(this.camera.fov<this.minFov||this.camera.fov>this.maxFov)&&(this.camera.fov=i.MathUtils.clamp(this.camera.fov,this.minFov,this.maxFov),this.camera.updateProjectionMatrix());const h=this._tbRadius,m=this.calculateTbRadius(this.camera);if(m!==void 0&&(this._tbRadius=m),h<this._tbRadius-1e-6||h>this._tbRadius+1e-6){const v=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3,E=this._tbRadius/v,T=new i.EllipseCurve(0,0,E,E).getPoints(this._curvePts),R=new i.BufferGeometry().setFromPoints(T);for(const F in this._gizmos.children){const U=this._gizmos.children[F];U.geometry=R}}}this.camera.lookAt(this._gizmos.position)}}),Lt(this,"setStateFromJSON",c=>{const p=JSON.parse(c);if(p.arcballState&&this.camera){this._cameraMatrixState.fromArray(p.arcballState.cameraMatrix.elements),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(p.arcballState.cameraUp),this.camera.near=p.arcballState.cameraNear,this.camera.far=p.arcballState.cameraFar,this.camera.zoom=p.arcballState.cameraZoom,this.camera instanceof i.PerspectiveCamera&&(this.camera.fov=p.arcballState.cameraFov),this._gizmoMatrixState.fromArray(p.arcballState.gizmoMatrix.elements),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmos.updateMatrix();const h=this.calculateTbRadius(this.camera);h!==void 0&&(this._tbRadius=h);const m=new i.Matrix4().copy(this._gizmoMatrixState0);this.makeGizmos(this._gizmos.position,this._tbRadius),this._gizmoMatrixState0.copy(m),this.camera.lookAt(this._gizmos.position),this.updateTbState(Zr.IDLE,!1),this.dispatchEvent(us)}}),this.camera=null,this.domElement=r,this.scene=l,this.mouseActions=[],this._mouseOp=null,this._v2_1=new i.Vector2,this._v3_1=new i.Vector3,this._v3_2=new i.Vector3,this._m4_1=new i.Matrix4,this._m4_2=new i.Matrix4,this._quat=new i.Quaternion,this._translationMatrix=new i.Matrix4,this._rotationMatrix=new i.Matrix4,this._scaleMatrix=new i.Matrix4,this._rotationAxis=new i.Vector3,this._cameraMatrixState=new i.Matrix4,this._cameraProjectionState=new i.Matrix4,this._fovState=1,this._upState=new i.Vector3,this._zoomState=1,this._nearPos=0,this._farPos=0,this._gizmoMatrixState=new i.Matrix4,this._up0=new i.Vector3,this._zoom0=1,this._fov0=0,this._initialNear=0,this._nearPos0=0,this._initialFar=0,this._farPos0=0,this._cameraMatrixState0=new i.Matrix4,this._gizmoMatrixState0=new i.Matrix4,this._button=-1,this._touchStart=[],this._touchCurrent=[],this._input=So.NONE,this._switchSensibility=32,this._startFingerDistance=0,this._currentFingerDistance=0,this._startFingerRotation=0,this._currentFingerRotation=0,this._devPxRatio=0,this._downValid=!0,this._nclicks=0,this._downEvents=[],this._clickStart=0,this._maxDownTime=250,this._maxInterval=300,this._posThreshold=24,this._movementThreshold=24,this._currentCursorPosition=new i.Vector3,this._startCursorPosition=new i.Vector3,this._grid=null,this._gridPosition=new i.Vector3,this._gizmos=new i.Group,this._curvePts=128,this._timeStart=-1,this._animationId=-1,this.focusAnimationTime=500,this._timePrev=0,this._timeCurrent=0,this._anglePrev=0,this._angleCurrent=0,this._cursorPosPrev=new i.Vector3,this._cursorPosCurr=new i.Vector3,this._wPrev=0,this._wCurr=0,this.adjustNearFar=!1,this.scaleFactor=1.1,this.dampingFactor=25,this.wMax=20,this.enableAnimations=!0,this.enableGrid=!1,this.cursorZoom=!1,this.minFov=5,this.maxFov=90,this.enabled=!0,this.enablePan=!0,this.enableRotate=!0,this.enableZoom=!0,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.target=new i.Vector3(0,0,0),this._currentTarget=new i.Vector3(0,0,0),this._tbRadius=1,this._state=Zr.IDLE,this.setCamera(t),this.scene&&this.scene.add(this._gizmos),this._devPxRatio=window.devicePixelRatio,this.initializeMouseActions(),this.domElement&&this.connect(this.domElement),window.addEventListener("resize",this.onWindowResize)}applyTransformMatrix(t){if(t!=null&&t.camera&&this.camera&&(this._m4_1.copy(this._cameraMatrixState).premultiply(t.camera),this._m4_1.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.updateMatrix(),(this._state==Zr.ROTATE||this._state==Zr.ZROTATE||this._state==Zr.ANIMATION_ROTATE)&&this.camera.up.copy(this._upState).applyQuaternion(this.camera.quaternion)),t!=null&&t.gizmos&&(this._m4_1.copy(this._gizmoMatrixState).premultiply(t.gizmos),this._m4_1.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix()),(this._state==Zr.SCALE||this._state==Zr.FOCUS||this._state==Zr.ANIMATION_FOCUS)&&this.camera){const r=this.calculateTbRadius(this.camera);if(r!==void 0&&(this._tbRadius=r),this.adjustNearFar){const l=this.camera.position.distanceTo(this._gizmos.position),c=new i.Box3;c.setFromObject(this._gizmos);const p=new i.Sphere;c.getBoundingSphere(p);const h=Math.max(this._nearPos0,p.radius+p.center.length()),m=l-this._initialNear,v=Math.min(h,m);this.camera.near=l-v;const E=Math.min(this._farPos0,-p.radius+p.center.length()),x=l-this._initialFar,T=Math.min(E,x);this.camera.far=l-T,this.camera.updateProjectionMatrix()}else{let l=!1;this.camera.near!=this._initialNear&&(this.camera.near=this._initialNear,l=!0),this.camera.far!=this._initialFar&&(this.camera.far=this._initialFar,l=!0),l&&this.camera.updateProjectionMatrix()}}}setGizmosVisible(t){this._gizmos.visible=t,this.dispatchEvent(us)}setTransformationMatrices(t=null,r=null){t?Ma.camera?Ma.camera.copy(t):Ma.camera=t.clone():Ma.camera=null,r?Ma.gizmos?Ma.gizmos.copy(r):Ma.gizmos=r.clone():Ma.gizmos=null}}const Fv=(0,d.forwardRef)((E,v)=>{var x=E,{camera:s,makeDefault:t,regress:r,domElement:l,onChange:c,onStart:p,onEnd:h}=x,m=Cn(x,["camera","makeDefault","regress","domElement","onChange","onStart","onEnd"]);const T=(0,_.z)(X=>X.invalidate),R=(0,_.z)(X=>X.camera),F=(0,_.z)(X=>X.gl),U=(0,_.z)(X=>X.events),P=(0,_.z)(X=>X.set),O=(0,_.z)(X=>X.get),z=(0,_.z)(X=>X.performance),L=s||R,k=l||U.connected||F.domElement,H=(0,d.useMemo)(()=>new Th(L),[L]);return(0,_.A)(()=>{H.enabled&&H.update()},-1),(0,d.useEffect)(()=>(H.connect(k),()=>void H.dispose()),[k,r,H,T]),(0,d.useEffect)(()=>{const X=W=>{T(),r&&z.regress(),c&&c(W)};return H.addEventListener("change",X),p&&H.addEventListener("start",p),h&&H.addEventListener("end",h),()=>{H.removeEventListener("change",X),p&&H.removeEventListener("start",p),h&&H.removeEventListener("end",h)}},[c,p,h]),(0,d.useEffect)(()=>{if(t){const X=O().controls;return P({controls:H}),()=>P({controls:X})}},[t,H]),d.createElement("primitive",(0,C.Z)({ref:v,object:H},m))});var k3=A(6427),Bh=A.n(k3),lA=A(5108),Ov=Object.defineProperty,Rh=(s,t,r)=>t in s?Ov(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,nn=(s,t,r)=>(Rh(s,typeof t!="symbol"?t+"":t,r),r);class z3 extends i.Object3D{constructor(t,r){super(),nn(this,"isTransformControls",!0),nn(this,"visible",!1),nn(this,"domElement"),nn(this,"raycaster",new i.Raycaster),nn(this,"gizmo"),nn(this,"plane"),nn(this,"tempVector",new i.Vector3),nn(this,"tempVector2",new i.Vector3),nn(this,"tempQuaternion",new i.Quaternion),nn(this,"unit",{X:new i.Vector3(1,0,0),Y:new i.Vector3(0,1,0),Z:new i.Vector3(0,0,1)}),nn(this,"pointStart",new i.Vector3),nn(this,"pointEnd",new i.Vector3),nn(this,"offset",new i.Vector3),nn(this,"rotationAxis",new i.Vector3),nn(this,"startNorm",new i.Vector3),nn(this,"endNorm",new i.Vector3),nn(this,"rotationAngle",0),nn(this,"cameraPosition",new i.Vector3),nn(this,"cameraQuaternion",new i.Quaternion),nn(this,"cameraScale",new i.Vector3),nn(this,"parentPosition",new i.Vector3),nn(this,"parentQuaternion",new i.Quaternion),nn(this,"parentQuaternionInv",new i.Quaternion),nn(this,"parentScale",new i.Vector3),nn(this,"worldPositionStart",new i.Vector3),nn(this,"worldQuaternionStart",new i.Quaternion),nn(this,"worldScaleStart",new i.Vector3),nn(this,"worldPosition",new i.Vector3),nn(this,"worldQuaternion",new i.Quaternion),nn(this,"worldQuaternionInv",new i.Quaternion),nn(this,"worldScale",new i.Vector3),nn(this,"eye",new i.Vector3),nn(this,"positionStart",new i.Vector3),nn(this,"quaternionStart",new i.Quaternion),nn(this,"scaleStart",new i.Vector3),nn(this,"camera"),nn(this,"object"),nn(this,"enabled",!0),nn(this,"axis",null),nn(this,"mode","translate"),nn(this,"translationSnap",null),nn(this,"rotationSnap",null),nn(this,"scaleSnap",null),nn(this,"space","world"),nn(this,"size",1),nn(this,"dragging",!1),nn(this,"showX",!0),nn(this,"showY",!0),nn(this,"showZ",!0),nn(this,"changeEvent",{type:"change"}),nn(this,"mouseDownEvent",{type:"mouseDown",mode:this.mode}),nn(this,"mouseUpEvent",{type:"mouseUp",mode:this.mode}),nn(this,"objectChangeEvent",{type:"objectChange"}),nn(this,"intersectObjectWithRay",(c,p,h)=>{const m=p.intersectObject(c,!0);for(let v=0;v<m.length;v++)if(m[v].object.visible||h)return m[v];return!1}),nn(this,"attach",c=>(this.object=c,this.visible=!0,this)),nn(this,"detach",()=>(this.object=void 0,this.visible=!1,this.axis=null,this)),nn(this,"reset",()=>this.enabled?(this.dragging&&this.object!==void 0&&(this.object.position.copy(this.positionStart),this.object.quaternion.copy(this.quaternionStart),this.object.scale.copy(this.scaleStart),this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent),this.pointStart.copy(this.pointEnd)),this):this),nn(this,"updateMatrixWorld",()=>{this.object!==void 0&&(this.object.updateMatrixWorld(),this.object.parent===null?lA.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this.parentPosition,this.parentQuaternion,this.parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this.worldScale),this.parentQuaternionInv.copy(this.parentQuaternion).invert(),this.worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this.cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld()}),nn(this,"pointerHover",c=>{if(this.object===void 0||this.dragging===!0)return;this.raycaster.setFromCamera(c,this.camera);const p=this.intersectObjectWithRay(this.gizmo.picker[this.mode],this.raycaster);p?this.axis=p.object.name:this.axis=null}),nn(this,"pointerDown",c=>{if(!(this.object===void 0||this.dragging===!0||c.button!==0)&&this.axis!==null){this.raycaster.setFromCamera(c,this.camera);const p=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(p){let h=this.space;if(this.mode==="scale"?h="local":(this.axis==="E"||this.axis==="XYZE"||this.axis==="XYZ")&&(h="world"),h==="local"&&this.mode==="rotate"){const m=this.rotationSnap;this.axis==="X"&&m&&(this.object.rotation.x=Math.round(this.object.rotation.x/m)*m),this.axis==="Y"&&m&&(this.object.rotation.y=Math.round(this.object.rotation.y/m)*m),this.axis==="Z"&&m&&(this.object.rotation.z=Math.round(this.object.rotation.z/m)*m)}this.object.updateMatrixWorld(),this.object.parent&&this.object.parent.updateMatrixWorld(),this.positionStart.copy(this.object.position),this.quaternionStart.copy(this.object.quaternion),this.scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this.worldScaleStart),this.pointStart.copy(p.point).sub(this.worldPositionStart)}this.dragging=!0,this.mouseDownEvent.mode=this.mode,this.dispatchEvent(this.mouseDownEvent)}}),nn(this,"pointerMove",c=>{const p=this.axis,h=this.mode,m=this.object;let v=this.space;if(h==="scale"?v="local":(p==="E"||p==="XYZE"||p==="XYZ")&&(v="world"),m===void 0||p===null||this.dragging===!1||c.button!==-1)return;this.raycaster.setFromCamera(c,this.camera);const E=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(E){if(this.pointEnd.copy(E.point).sub(this.worldPositionStart),h==="translate")this.offset.copy(this.pointEnd).sub(this.pointStart),v==="local"&&p!=="XYZ"&&this.offset.applyQuaternion(this.worldQuaternionInv),p.indexOf("X")===-1&&(this.offset.x=0),p.indexOf("Y")===-1&&(this.offset.y=0),p.indexOf("Z")===-1&&(this.offset.z=0),v==="local"&&p!=="XYZ"?this.offset.applyQuaternion(this.quaternionStart).divide(this.parentScale):this.offset.applyQuaternion(this.parentQuaternionInv).divide(this.parentScale),m.position.copy(this.offset).add(this.positionStart),this.translationSnap&&(v==="local"&&(m.position.applyQuaternion(this.tempQuaternion.copy(this.quaternionStart).invert()),p.search("X")!==-1&&(m.position.x=Math.round(m.position.x/this.translationSnap)*this.translationSnap),p.search("Y")!==-1&&(m.position.y=Math.round(m.position.y/this.translationSnap)*this.translationSnap),p.search("Z")!==-1&&(m.position.z=Math.round(m.position.z/this.translationSnap)*this.translationSnap),m.position.applyQuaternion(this.quaternionStart)),v==="world"&&(m.parent&&m.position.add(this.tempVector.setFromMatrixPosition(m.parent.matrixWorld)),p.search("X")!==-1&&(m.position.x=Math.round(m.position.x/this.translationSnap)*this.translationSnap),p.search("Y")!==-1&&(m.position.y=Math.round(m.position.y/this.translationSnap)*this.translationSnap),p.search("Z")!==-1&&(m.position.z=Math.round(m.position.z/this.translationSnap)*this.translationSnap),m.parent&&m.position.sub(this.tempVector.setFromMatrixPosition(m.parent.matrixWorld))));else if(h==="scale"){if(p.search("XYZ")!==-1){let x=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(x*=-1),this.tempVector2.set(x,x,x)}else this.tempVector.copy(this.pointStart),this.tempVector2.copy(this.pointEnd),this.tempVector.applyQuaternion(this.worldQuaternionInv),this.tempVector2.applyQuaternion(this.worldQuaternionInv),this.tempVector2.divide(this.tempVector),p.search("X")===-1&&(this.tempVector2.x=1),p.search("Y")===-1&&(this.tempVector2.y=1),p.search("Z")===-1&&(this.tempVector2.z=1);m.scale.copy(this.scaleStart).multiply(this.tempVector2),this.scaleSnap&&this.object&&(p.search("X")!==-1&&(this.object.scale.x=Math.round(m.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),p.search("Y")!==-1&&(m.scale.y=Math.round(m.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),p.search("Z")!==-1&&(m.scale.z=Math.round(m.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(h==="rotate"){this.offset.copy(this.pointEnd).sub(this.pointStart);const x=20/this.worldPosition.distanceTo(this.tempVector.setFromMatrixPosition(this.camera.matrixWorld));p==="E"?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this.startNorm.copy(this.pointStart).normalize(),this.endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this.endNorm.cross(this.startNorm).dot(this.eye)<0?1:-1):p==="XYZE"?(this.rotationAxis.copy(this.offset).cross(this.eye).normalize(),this.rotationAngle=this.offset.dot(this.tempVector.copy(this.rotationAxis).cross(this.eye))*x):(p==="X"||p==="Y"||p==="Z")&&(this.rotationAxis.copy(this.unit[p]),this.tempVector.copy(this.unit[p]),v==="local"&&this.tempVector.applyQuaternion(this.worldQuaternion),this.rotationAngle=this.offset.dot(this.tempVector.cross(this.eye).normalize())*x),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),v==="local"&&p!=="E"&&p!=="XYZE"?(m.quaternion.copy(this.quaternionStart),m.quaternion.multiply(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this.parentQuaternionInv),m.quaternion.copy(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),m.quaternion.multiply(this.quaternionStart).normalize())}this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent)}}),nn(this,"pointerUp",c=>{c.button===0&&(this.dragging&&this.axis!==null&&(this.mouseUpEvent.mode=this.mode,this.dispatchEvent(this.mouseUpEvent)),this.dragging=!1,this.axis=null)}),nn(this,"getPointer",c=>{var p,h;if(this.domElement&&((p=this.domElement.ownerDocument)!=null&&p.pointerLockElement))return{x:0,y:0,button:c.button};{const m=c.changedTouches?c.changedTouches[0]:c,v=(h=this.domElement)==null?void 0:h.getBoundingClientRect();return{x:(m.clientX-v.left)/v.width*2-1,y:-(m.clientY-v.top)/v.height*2+1,button:c.button}}}),nn(this,"onPointerHover",c=>{if(this.enabled)switch(c.pointerType){case"mouse":case"pen":this.pointerHover(this.getPointer(c));break}}),nn(this,"onPointerDown",c=>{!this.enabled||!this.domElement||(this.domElement.style.touchAction="none",this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.pointerHover(this.getPointer(c)),this.pointerDown(this.getPointer(c)))}),nn(this,"onPointerMove",c=>{this.enabled&&this.pointerMove(this.getPointer(c))}),nn(this,"onPointerUp",c=>{!this.enabled||!this.domElement||(this.domElement.style.touchAction="",this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.pointerUp(this.getPointer(c)))}),nn(this,"getMode",()=>this.mode),nn(this,"setMode",c=>{this.mode=c}),nn(this,"setTranslationSnap",c=>{this.translationSnap=c}),nn(this,"setRotationSnap",c=>{this.rotationSnap=c}),nn(this,"setScaleSnap",c=>{this.scaleSnap=c}),nn(this,"setSize",c=>{this.size=c}),nn(this,"setSpace",c=>{this.space=c}),nn(this,"update",()=>{lA.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}),nn(this,"connect",c=>{c===document&&lA.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=c,this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointermove",this.onPointerHover),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp)}),nn(this,"dispose",()=>{var c,p,h,m,v,E;(c=this.domElement)==null||c.removeEventListener("pointerdown",this.onPointerDown),(p=this.domElement)==null||p.removeEventListener("pointermove",this.onPointerHover),(m=(h=this.domElement)==null?void 0:h.ownerDocument)==null||m.removeEventListener("pointermove",this.onPointerMove),(E=(v=this.domElement)==null?void 0:v.ownerDocument)==null||E.removeEventListener("pointerup",this.onPointerUp),this.traverse(x=>{const T=x;T.geometry&&T.geometry.dispose(),T.material&&T.material.dispose()})}),this.domElement=r,this.camera=t,this.gizmo=new Ih,this.add(this.gizmo),this.plane=new G3,this.add(this.plane);const l=(c,p)=>{let h=p;Object.defineProperty(this,c,{get:function(){return h!==void 0?h:p},set:function(m){h!==m&&(h=m,this.plane[c]=m,this.gizmo[c]=m,this.dispatchEvent({type:c+"-changed",value:m}),this.dispatchEvent(this.changeEvent))}}),this[c]=p,this.plane[c]=p,this.gizmo[c]=p};l("camera",this.camera),l("object",this.object),l("enabled",this.enabled),l("axis",this.axis),l("mode",this.mode),l("translationSnap",this.translationSnap),l("rotationSnap",this.rotationSnap),l("scaleSnap",this.scaleSnap),l("space",this.space),l("size",this.size),l("dragging",this.dragging),l("showX",this.showX),l("showY",this.showY),l("showZ",this.showZ),l("worldPosition",this.worldPosition),l("worldPositionStart",this.worldPositionStart),l("worldQuaternion",this.worldQuaternion),l("worldQuaternionStart",this.worldQuaternionStart),l("cameraPosition",this.cameraPosition),l("cameraQuaternion",this.cameraQuaternion),l("pointStart",this.pointStart),l("pointEnd",this.pointEnd),l("rotationAxis",this.rotationAxis),l("rotationAngle",this.rotationAngle),l("eye",this.eye),r!==void 0&&this.connect(r)}}class Ih extends i.Object3D{constructor(){super(),nn(this,"isTransformControlsGizmo",!0),nn(this,"type","TransformControlsGizmo"),nn(this,"tempVector",new i.Vector3(0,0,0)),nn(this,"tempEuler",new i.Euler),nn(this,"alignVector",new i.Vector3(0,1,0)),nn(this,"zeroVector",new i.Vector3(0,0,0)),nn(this,"lookAtMatrix",new i.Matrix4),nn(this,"tempQuaternion",new i.Quaternion),nn(this,"tempQuaternion2",new i.Quaternion),nn(this,"identityQuaternion",new i.Quaternion),nn(this,"unitX",new i.Vector3(1,0,0)),nn(this,"unitY",new i.Vector3(0,1,0)),nn(this,"unitZ",new i.Vector3(0,0,1)),nn(this,"gizmo"),nn(this,"picker"),nn(this,"helper"),nn(this,"rotationAxis",new i.Vector3),nn(this,"cameraPosition",new i.Vector3),nn(this,"worldPositionStart",new i.Vector3),nn(this,"worldQuaternionStart",new i.Quaternion),nn(this,"worldPosition",new i.Vector3),nn(this,"worldQuaternion",new i.Quaternion),nn(this,"eye",new i.Vector3),nn(this,"camera",null),nn(this,"enabled",!0),nn(this,"axis",null),nn(this,"mode","translate"),nn(this,"space","world"),nn(this,"size",1),nn(this,"dragging",!1),nn(this,"showX",!0),nn(this,"showY",!0),nn(this,"showZ",!0),nn(this,"updateMatrixWorld",()=>{let Xe=this.space;this.mode==="scale"&&(Xe="local");const Ce=Xe==="local"?this.worldQuaternion:this.identityQuaternion;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let Ee=[];Ee=Ee.concat(this.picker[this.mode].children),Ee=Ee.concat(this.gizmo[this.mode].children),Ee=Ee.concat(this.helper[this.mode].children);for(let _e=0;_e<Ee.length;_e++){const oe=Ee[_e];oe.visible=!0,oe.rotation.set(0,0,0),oe.position.copy(this.worldPosition);let Ae;if(this.camera.isOrthographicCamera?Ae=(this.camera.top-this.camera.bottom)/this.camera.zoom:Ae=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),oe.scale.set(1,1,1).multiplyScalar(Ae*this.size/7),oe.tag==="helper"){oe.visible=!1,oe.name==="AXIS"?(oe.position.copy(this.worldPositionStart),oe.visible=!!this.axis,this.axis==="X"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,0)),oe.quaternion.copy(Ce).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(Ce).dot(this.eye))>.9&&(oe.visible=!1)),this.axis==="Y"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,Math.PI/2)),oe.quaternion.copy(Ce).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(Ce).dot(this.eye))>.9&&(oe.visible=!1)),this.axis==="Z"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),oe.quaternion.copy(Ce).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(Ce).dot(this.eye))>.9&&(oe.visible=!1)),this.axis==="XYZE"&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),this.alignVector.copy(this.rotationAxis),oe.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.zeroVector,this.alignVector,this.unitY)),oe.quaternion.multiply(this.tempQuaternion),oe.visible=this.dragging),this.axis==="E"&&(oe.visible=!1)):oe.name==="START"?(oe.position.copy(this.worldPositionStart),oe.visible=this.dragging):oe.name==="END"?(oe.position.copy(this.worldPosition),oe.visible=this.dragging):oe.name==="DELTA"?(oe.position.copy(this.worldPositionStart),oe.quaternion.copy(this.worldQuaternionStart),this.tempVector.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),this.tempVector.applyQuaternion(this.worldQuaternionStart.clone().invert()),oe.scale.copy(this.tempVector),oe.visible=this.dragging):(oe.quaternion.copy(Ce),this.dragging?oe.position.copy(this.worldPositionStart):oe.position.copy(this.worldPosition),this.axis&&(oe.visible=this.axis.search(oe.name)!==-1));continue}oe.quaternion.copy(Ce),this.mode==="translate"||this.mode==="scale"?((oe.name==="X"||oe.name==="XYZX")&&Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(Ce).dot(this.eye))>.99&&(oe.scale.set(1e-10,1e-10,1e-10),oe.visible=!1),(oe.name==="Y"||oe.name==="XYZY")&&Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(Ce).dot(this.eye))>.99&&(oe.scale.set(1e-10,1e-10,1e-10),oe.visible=!1),(oe.name==="Z"||oe.name==="XYZZ")&&Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(Ce).dot(this.eye))>.99&&(oe.scale.set(1e-10,1e-10,1e-10),oe.visible=!1),oe.name==="XY"&&Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(Ce).dot(this.eye))<.2&&(oe.scale.set(1e-10,1e-10,1e-10),oe.visible=!1),oe.name==="YZ"&&Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(Ce).dot(this.eye))<.2&&(oe.scale.set(1e-10,1e-10,1e-10),oe.visible=!1),oe.name==="XZ"&&Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(Ce).dot(this.eye))<.2&&(oe.scale.set(1e-10,1e-10,1e-10),oe.visible=!1),oe.name.search("X")!==-1&&(this.alignVector.copy(this.unitX).applyQuaternion(Ce).dot(this.eye)<0?oe.tag==="fwd"?oe.visible=!1:oe.scale.x*=-1:oe.tag==="bwd"&&(oe.visible=!1)),oe.name.search("Y")!==-1&&(this.alignVector.copy(this.unitY).applyQuaternion(Ce).dot(this.eye)<0?oe.tag==="fwd"?oe.visible=!1:oe.scale.y*=-1:oe.tag==="bwd"&&(oe.visible=!1)),oe.name.search("Z")!==-1&&(this.alignVector.copy(this.unitZ).applyQuaternion(Ce).dot(this.eye)<0?oe.tag==="fwd"?oe.visible=!1:oe.scale.z*=-1:oe.tag==="bwd"&&(oe.visible=!1))):this.mode==="rotate"&&(this.tempQuaternion2.copy(Ce),this.alignVector.copy(this.eye).applyQuaternion(this.tempQuaternion.copy(Ce).invert()),oe.name.search("E")!==-1&&oe.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.eye,this.zeroVector,this.unitY)),oe.name==="X"&&(this.tempQuaternion.setFromAxisAngle(this.unitX,Math.atan2(-this.alignVector.y,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),oe.quaternion.copy(this.tempQuaternion)),oe.name==="Y"&&(this.tempQuaternion.setFromAxisAngle(this.unitY,Math.atan2(this.alignVector.x,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),oe.quaternion.copy(this.tempQuaternion)),oe.name==="Z"&&(this.tempQuaternion.setFromAxisAngle(this.unitZ,Math.atan2(this.alignVector.y,this.alignVector.x)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),oe.quaternion.copy(this.tempQuaternion))),oe.visible=oe.visible&&(oe.name.indexOf("X")===-1||this.showX),oe.visible=oe.visible&&(oe.name.indexOf("Y")===-1||this.showY),oe.visible=oe.visible&&(oe.name.indexOf("Z")===-1||this.showZ),oe.visible=oe.visible&&(oe.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),oe.material.tempOpacity=oe.material.tempOpacity||oe.material.opacity,oe.material.tempColor=oe.material.tempColor||oe.material.color.clone(),oe.material.color.copy(oe.material.tempColor),oe.material.opacity=oe.material.tempOpacity,this.enabled?this.axis&&(oe.name===this.axis?(oe.material.opacity=1,oe.material.color.lerp(new i.Color(1,1,1),.5)):this.axis.split("").some(function(Be){return oe.name===Be})?(oe.material.opacity=1,oe.material.color.lerp(new i.Color(1,1,1),.5)):(oe.material.opacity*=.25,oe.material.color.lerp(new i.Color(1,1,1),.5))):(oe.material.opacity*=.5,oe.material.color.lerp(new i.Color(1,1,1),.5))}super.updateMatrixWorld()});const t=new i.MeshBasicMaterial({depthTest:!1,depthWrite:!1,transparent:!0,side:i.DoubleSide,fog:!1,toneMapped:!1}),r=new i.LineBasicMaterial({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),l=t.clone();l.opacity=.15;const c=t.clone();c.opacity=.33;const p=t.clone();p.color.set(16711680);const h=t.clone();h.color.set(65280);const m=t.clone();m.color.set(255);const v=t.clone();v.opacity=.25;const E=v.clone();E.color.set(16776960);const x=v.clone();x.color.set(65535);const T=v.clone();T.color.set(16711935),t.clone().color.set(16776960);const F=r.clone();F.color.set(16711680);const U=r.clone();U.color.set(65280);const P=r.clone();P.color.set(255);const O=r.clone();O.color.set(65535);const z=r.clone();z.color.set(16711935);const L=r.clone();L.color.set(16776960);const k=r.clone();k.color.set(7895160);const H=L.clone();H.opacity=.25;const X=new i.CylinderGeometry(0,.05,.2,12,1,!1),W=new i.BoxGeometry(.125,.125,.125),J=new i.BufferGeometry;J.setAttribute("position",new i.Float32BufferAttribute([0,0,0,1,0,0],3));const Y=(Xe,Ce)=>{const Ee=new i.BufferGeometry,_e=[];for(let oe=0;oe<=64*Ce;++oe)_e.push(0,Math.cos(oe/32*Math.PI)*Xe,Math.sin(oe/32*Math.PI)*Xe);return Ee.setAttribute("position",new i.Float32BufferAttribute(_e,3)),Ee},ce=()=>{const Xe=new i.BufferGeometry;return Xe.setAttribute("position",new i.Float32BufferAttribute([0,0,0,1,1,1],3)),Xe},ue={X:[[new i.Mesh(X,p),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new i.Mesh(X,p),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new i.Line(J,F)]],Y:[[new i.Mesh(X,h),[0,1,0],null,null,"fwd"],[new i.Mesh(X,h),[0,1,0],[Math.PI,0,0],null,"bwd"],[new i.Line(J,U),null,[0,0,Math.PI/2]]],Z:[[new i.Mesh(X,m),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new i.Mesh(X,m),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new i.Line(J,P),null,[0,-Math.PI/2,0]]],XYZ:[[new i.Mesh(new i.OctahedronGeometry(.1,0),v.clone()),[0,0,0],[0,0,0]]],XY:[[new i.Mesh(new i.PlaneGeometry(.295,.295),E.clone()),[.15,.15,0]],[new i.Line(J,L),[.18,.3,0],null,[.125,1,1]],[new i.Line(J,L),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new i.Mesh(new i.PlaneGeometry(.295,.295),x.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new i.Line(J,O),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new i.Line(J,O),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new i.Mesh(new i.PlaneGeometry(.295,.295),T.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new i.Line(J,z),[.18,0,.3],null,[.125,1,1]],[new i.Line(J,z),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},ge={X:[[new i.Mesh(new i.CylinderGeometry(.2,0,1,4,1,!1),l),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new i.Mesh(new i.CylinderGeometry(.2,0,1,4,1,!1),l),[0,.6,0]]],Z:[[new i.Mesh(new i.CylinderGeometry(.2,0,1,4,1,!1),l),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new i.Mesh(new i.OctahedronGeometry(.2,0),l)]],XY:[[new i.Mesh(new i.PlaneGeometry(.4,.4),l),[.2,.2,0]]],YZ:[[new i.Mesh(new i.PlaneGeometry(.4,.4),l),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new i.Mesh(new i.PlaneGeometry(.4,.4),l),[.2,0,.2],[-Math.PI/2,0,0]]]},le={START:[[new i.Mesh(new i.OctahedronGeometry(.01,2),c),null,null,null,"helper"]],END:[[new i.Mesh(new i.OctahedronGeometry(.01,2),c),null,null,null,"helper"]],DELTA:[[new i.Line(ce(),c),null,null,null,"helper"]],X:[[new i.Line(J,c.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new i.Line(J,c.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new i.Line(J,c.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},Me={X:[[new i.Line(Y(1,.5),F)],[new i.Mesh(new i.OctahedronGeometry(.04,0),p),[0,0,.99],null,[1,3,1]]],Y:[[new i.Line(Y(1,.5),U),null,[0,0,-Math.PI/2]],[new i.Mesh(new i.OctahedronGeometry(.04,0),h),[0,0,.99],null,[3,1,1]]],Z:[[new i.Line(Y(1,.5),P),null,[0,Math.PI/2,0]],[new i.Mesh(new i.OctahedronGeometry(.04,0),m),[.99,0,0],null,[1,3,1]]],E:[[new i.Line(Y(1.25,1),H),null,[0,Math.PI/2,0]],[new i.Mesh(new i.CylinderGeometry(.03,0,.15,4,1,!1),H),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new i.Mesh(new i.CylinderGeometry(.03,0,.15,4,1,!1),H),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new i.Mesh(new i.CylinderGeometry(.03,0,.15,4,1,!1),H),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new i.Mesh(new i.CylinderGeometry(.03,0,.15,4,1,!1),H),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new i.Line(Y(1,1),k),null,[0,Math.PI/2,0]]]},me={AXIS:[[new i.Line(J,c.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},Te={X:[[new i.Mesh(new i.TorusGeometry(1,.1,4,24),l),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new i.Mesh(new i.TorusGeometry(1,.1,4,24),l),[0,0,0],[Math.PI/2,0,0]]],Z:[[new i.Mesh(new i.TorusGeometry(1,.1,4,24),l),[0,0,0],[0,0,-Math.PI/2]]],E:[[new i.Mesh(new i.TorusGeometry(1.25,.1,2,24),l)]],XYZE:[[new i.Mesh(new i.SphereGeometry(.7,10,8),l)]]},Ue={X:[[new i.Mesh(W,p),[.8,0,0],[0,0,-Math.PI/2]],[new i.Line(J,F),null,null,[.8,1,1]]],Y:[[new i.Mesh(W,h),[0,.8,0]],[new i.Line(J,U),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new i.Mesh(W,m),[0,0,.8],[Math.PI/2,0,0]],[new i.Line(J,P),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new i.Mesh(W,E),[.85,.85,0],null,[2,2,.2]],[new i.Line(J,L),[.855,.98,0],null,[.125,1,1]],[new i.Line(J,L),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new i.Mesh(W,x),[0,.85,.85],null,[.2,2,2]],[new i.Line(J,O),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new i.Line(J,O),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new i.Mesh(W,T),[.85,0,.85],null,[2,.2,2]],[new i.Line(J,z),[.855,0,.98],null,[.125,1,1]],[new i.Line(J,z),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new i.Mesh(new i.BoxGeometry(.125,.125,.125),v.clone()),[1.1,0,0]]],XYZY:[[new i.Mesh(new i.BoxGeometry(.125,.125,.125),v.clone()),[0,1.1,0]]],XYZZ:[[new i.Mesh(new i.BoxGeometry(.125,.125,.125),v.clone()),[0,0,1.1]]]},Re={X:[[new i.Mesh(new i.CylinderGeometry(.2,0,.8,4,1,!1),l),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new i.Mesh(new i.CylinderGeometry(.2,0,.8,4,1,!1),l),[0,.5,0]]],Z:[[new i.Mesh(new i.CylinderGeometry(.2,0,.8,4,1,!1),l),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new i.Mesh(W,l),[.85,.85,0],null,[3,3,.2]]],YZ:[[new i.Mesh(W,l),[0,.85,.85],null,[.2,3,3]]],XZ:[[new i.Mesh(W,l),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new i.Mesh(new i.BoxGeometry(.2,.2,.2),l),[1.1,0,0]]],XYZY:[[new i.Mesh(new i.BoxGeometry(.2,.2,.2),l),[0,1.1,0]]],XYZZ:[[new i.Mesh(new i.BoxGeometry(.2,.2,.2),l),[0,0,1.1]]]},Ge={X:[[new i.Line(J,c.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new i.Line(J,c.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new i.Line(J,c.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},De=Xe=>{const Ce=new i.Object3D;for(let Ee in Xe)for(let _e=Xe[Ee].length;_e--;){const oe=Xe[Ee][_e][0].clone(),Ae=Xe[Ee][_e][1],Be=Xe[Ee][_e][2],ve=Xe[Ee][_e][3],ke=Xe[Ee][_e][4];oe.name=Ee,oe.tag=ke,Ae&&oe.position.set(Ae[0],Ae[1],Ae[2]),Be&&oe.rotation.set(Be[0],Be[1],Be[2]),ve&&oe.scale.set(ve[0],ve[1],ve[2]),oe.updateMatrix();const vt=oe.geometry.clone();vt.applyMatrix4(oe.matrix),oe.geometry=vt,oe.renderOrder=1/0,oe.position.set(0,0,0),oe.rotation.set(0,0,0),oe.scale.set(1,1,1),Ce.add(oe)}return Ce};this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=De(ue)),this.add(this.gizmo.rotate=De(Me)),this.add(this.gizmo.scale=De(Ue)),this.add(this.picker.translate=De(ge)),this.add(this.picker.rotate=De(Te)),this.add(this.picker.scale=De(Re)),this.add(this.helper.translate=De(le)),this.add(this.helper.rotate=De(me)),this.add(this.helper.scale=De(Ge)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}}class G3 extends i.Mesh{constructor(){super(new i.PlaneGeometry(1e5,1e5,2,2),new i.MeshBasicMaterial({visible:!1,wireframe:!0,side:i.DoubleSide,transparent:!0,opacity:.1,toneMapped:!1})),nn(this,"isTransformControlsPlane",!0),nn(this,"type","TransformControlsPlane"),nn(this,"unitX",new i.Vector3(1,0,0)),nn(this,"unitY",new i.Vector3(0,1,0)),nn(this,"unitZ",new i.Vector3(0,0,1)),nn(this,"tempVector",new i.Vector3),nn(this,"dirVector",new i.Vector3),nn(this,"alignVector",new i.Vector3),nn(this,"tempMatrix",new i.Matrix4),nn(this,"identityQuaternion",new i.Quaternion),nn(this,"cameraQuaternion",new i.Quaternion),nn(this,"worldPosition",new i.Vector3),nn(this,"worldQuaternion",new i.Quaternion),nn(this,"eye",new i.Vector3),nn(this,"axis",null),nn(this,"mode","translate"),nn(this,"space","world"),nn(this,"updateMatrixWorld",()=>{let t=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(t="local"),this.unitX.set(1,0,0).applyQuaternion(t==="local"?this.worldQuaternion:this.identityQuaternion),this.unitY.set(0,1,0).applyQuaternion(t==="local"?this.worldQuaternion:this.identityQuaternion),this.unitZ.set(0,0,1).applyQuaternion(t==="local"?this.worldQuaternion:this.identityQuaternion),this.alignVector.copy(this.unitY),this.mode){case"translate":case"scale":switch(this.axis){case"X":this.alignVector.copy(this.eye).cross(this.unitX),this.dirVector.copy(this.unitX).cross(this.alignVector);break;case"Y":this.alignVector.copy(this.eye).cross(this.unitY),this.dirVector.copy(this.unitY).cross(this.alignVector);break;case"Z":this.alignVector.copy(this.eye).cross(this.unitZ),this.dirVector.copy(this.unitZ).cross(this.alignVector);break;case"XY":this.dirVector.copy(this.unitZ);break;case"YZ":this.dirVector.copy(this.unitX);break;case"XZ":this.alignVector.copy(this.unitZ),this.dirVector.copy(this.unitY);break;case"XYZ":case"E":this.dirVector.set(0,0,0);break}break;case"rotate":default:this.dirVector.set(0,0,0)}this.dirVector.length()===0?this.quaternion.copy(this.cameraQuaternion):(this.tempMatrix.lookAt(this.tempVector.set(0,0,0),this.dirVector,this.alignVector),this.quaternion.setFromRotationMatrix(this.tempMatrix)),super.updateMatrixWorld()})}}const U3=d.forwardRef((x,E)=>{var T=x,{children:s,domElement:t,onChange:r,onMouseDown:l,onMouseUp:c,onObjectChange:p,object:h,makeDefault:m}=T,v=Cn(T,["children","domElement","onChange","onMouseDown","onMouseUp","onObjectChange","object","makeDefault"]);const R=["enabled","axis","mode","translationSnap","rotationSnap","scaleSnap","space","size","showX","showY","showZ"],Ue=v,{camera:F}=Ue,U=Cn(Ue,["camera"]),P=ov()(U,R),O=Bh()(U,R),z=(0,_.z)(Re=>Re.controls),L=(0,_.z)(Re=>Re.gl),k=(0,_.z)(Re=>Re.events),H=(0,_.z)(Re=>Re.camera),X=(0,_.z)(Re=>Re.invalidate),W=(0,_.z)(Re=>Re.get),J=(0,_.z)(Re=>Re.set),Y=F||H,ce=t||k.connected||L.domElement,ue=d.useMemo(()=>new z3(Y,ce),[Y,ce]),ge=d.useRef();d.useLayoutEffect(()=>(h?ue.attach(h instanceof i.Object3D?h:h.current):ge.current instanceof i.Object3D&&ue.attach(ge.current),()=>void ue.detach()),[h,s,ue]),d.useEffect(()=>{if(z){const Re=Ge=>z.enabled=!Ge.value;return ue.addEventListener("dragging-changed",Re),()=>ue.removeEventListener("dragging-changed",Re)}},[ue,z]);const le=d.useRef(),Me=d.useRef(),me=d.useRef(),Te=d.useRef();return d.useLayoutEffect(()=>void(le.current=r),[r]),d.useLayoutEffect(()=>void(Me.current=l),[l]),d.useLayoutEffect(()=>void(me.current=c),[c]),d.useLayoutEffect(()=>void(Te.current=p),[p]),d.useEffect(()=>{const Re=Ce=>{X(),le.current==null||le.current(Ce)},Ge=Ce=>Me.current==null?void 0:Me.current(Ce),De=Ce=>me.current==null?void 0:me.current(Ce),Xe=Ce=>Te.current==null?void 0:Te.current(Ce);return ue.addEventListener("change",Re),ue.addEventListener("mouseDown",Ge),ue.addEventListener("mouseUp",De),ue.addEventListener("objectChange",Xe),()=>{ue.removeEventListener("change",Re),ue.removeEventListener("mouseDown",Ge),ue.removeEventListener("mouseUp",De),ue.removeEventListener("objectChange",Xe)}},[X,ue]),d.useEffect(()=>{if(m){const Re=W().controls;return J({controls:ue}),()=>J({controls:Re})}},[m,ue]),ue?d.createElement(d.Fragment,null,d.createElement("primitive",(0,C.Z)({ref:E,object:ue},P)),d.createElement("group",(0,C.Z)({ref:ge},O),s)):null});var Dv=A(5108),cA=Object.defineProperty,N3=(s,t,r)=>t in s?cA(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,qs=(s,t,r)=>(N3(s,typeof t!="symbol"?t+"":t,r),r);const Uf=new i.Euler(0,0,0,"YXZ"),Nf=new i.Vector3,j3={type:"change"},H3={type:"lock"},W3={type:"unlock"},Lv=Math.PI/2;class V3 extends i.EventDispatcher{constructor(t,r){super(),qs(this,"camera"),qs(this,"domElement"),qs(this,"isLocked"),qs(this,"minPolarAngle"),qs(this,"maxPolarAngle"),qs(this,"pointerSpeed"),qs(this,"onMouseMove",l=>{if(!this.domElement||this.isLocked===!1)return;const c=l.movementX||l.mozMovementX||l.webkitMovementX||0,p=l.movementY||l.mozMovementY||l.webkitMovementY||0;Uf.setFromQuaternion(this.camera.quaternion),Uf.y-=c*.002*this.pointerSpeed,Uf.x-=p*.002*this.pointerSpeed,Uf.x=Math.max(Lv-this.maxPolarAngle,Math.min(Lv-this.minPolarAngle,Uf.x)),this.camera.quaternion.setFromEuler(Uf),this.dispatchEvent(j3)}),qs(this,"onPointerlockChange",()=>{this.domElement&&(this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(H3),this.isLocked=!0):(this.dispatchEvent(W3),this.isLocked=!1))}),qs(this,"onPointerlockError",()=>{Dv.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}),qs(this,"connect",l=>{this.domElement=l||this.domElement,this.domElement&&(this.domElement.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError))}),qs(this,"disconnect",()=>{this.domElement&&(this.domElement.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError))}),qs(this,"dispose",()=>{this.disconnect()}),qs(this,"getObject",()=>this.camera),qs(this,"direction",new i.Vector3(0,0,-1)),qs(this,"getDirection",l=>l.copy(this.direction).applyQuaternion(this.camera.quaternion)),qs(this,"moveForward",l=>{Nf.setFromMatrixColumn(this.camera.matrix,0),Nf.crossVectors(this.camera.up,Nf),this.camera.position.addScaledVector(Nf,l)}),qs(this,"moveRight",l=>{Nf.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(Nf,l)}),qs(this,"lock",()=>{this.domElement&&this.domElement.requestPointerLock()}),qs(this,"unlock",()=>{this.domElement&&this.domElement.ownerDocument.exitPointerLock()}),this.camera=t,this.domElement=r,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,r&&this.connect(r)}}const Q3=d.forwardRef((E,v)=>{var x=E,{domElement:s,selector:t,onChange:r,onLock:l,onUnlock:c,enabled:p=!0,makeDefault:h}=x,m=Cn(x,["domElement","selector","onChange","onLock","onUnlock","enabled","makeDefault"]);const J=m,{camera:T}=J,R=Cn(J,["camera"]),F=(0,_.z)(Y=>Y.setEvents),U=(0,_.z)(Y=>Y.gl),P=(0,_.z)(Y=>Y.camera),O=(0,_.z)(Y=>Y.invalidate),z=(0,_.z)(Y=>Y.events),L=(0,_.z)(Y=>Y.get),k=(0,_.z)(Y=>Y.set),H=T||P,X=s||z.connected||U.domElement,[W]=d.useState(()=>new V3(H));return d.useEffect(()=>{if(p){W.connect(X);const Y=L().events.compute;return F({compute(ce,ue){const ge=ue.size.width/2,le=ue.size.height/2;ue.pointer.set(ge/ue.size.width*2-1,-(le/ue.size.height)*2+1),ue.raycaster.setFromCamera(ue.pointer,ue.camera)}}),()=>{W.disconnect(),F({compute:Y})}}},[p,W]),d.useEffect(()=>{const Y=ge=>{O(),r&&r(ge)};W.addEventListener("change",Y),l&&W.addEventListener("lock",l),c&&W.addEventListener("unlock",c);const ce=()=>W.lock(),ue=t?Array.from(document.querySelectorAll(t)):[document];return ue.forEach(ge=>ge&&ge.addEventListener("click",ce)),()=>{W.removeEventListener("change",Y),l&&W.addEventListener("lock",l),c&&W.addEventListener("unlock",c),ue.forEach(ge=>ge?ge.removeEventListener("click",ce):void 0)}},[r,l,c,t,W,O]),d.useEffect(()=>{if(h){const Y=L().controls;return k({controls:W}),()=>k({controls:Y})}},[h,W]),d.createElement("primitive",(0,C.Z)({ref:v,object:W},R))});var go=Object.defineProperty,K3=(s,t,r)=>t in s?go(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,Ei=(s,t,r)=>(K3(s,typeof t!="symbol"?t+"":t,r),r);const Pv=new i.Vector3;class X3 extends i.EventDispatcher{constructor(t,r){super(),Ei(this,"object"),Ei(this,"domElement"),Ei(this,"enabled",!0),Ei(this,"movementSpeed",1),Ei(this,"lookSpeed",.005),Ei(this,"lookVertical",!0),Ei(this,"autoForward",!1),Ei(this,"activeLook",!0),Ei(this,"heightSpeed",!1),Ei(this,"heightCoef",1),Ei(this,"heightMin",0),Ei(this,"heightMax",1),Ei(this,"constrainVertical",!1),Ei(this,"verticalMin",0),Ei(this,"verticalMax",Math.PI),Ei(this,"mouseDragOn",!1),Ei(this,"autoSpeedFactor",0),Ei(this,"mouseX",0),Ei(this,"mouseY",0),Ei(this,"moveForward",!1),Ei(this,"moveBackward",!1),Ei(this,"moveLeft",!1),Ei(this,"moveRight",!1),Ei(this,"moveUp",!1),Ei(this,"moveDown",!1),Ei(this,"viewHalfX",0),Ei(this,"viewHalfY",0),Ei(this,"lat",0),Ei(this,"lon",0),Ei(this,"lookDirection",new i.Vector3),Ei(this,"spherical",new i.Spherical),Ei(this,"target",new i.Vector3),Ei(this,"connect",l=>{l.setAttribute("tabindex","-1"),l.style.touchAction="none",l.addEventListener("contextmenu",this.contextmenu),l.addEventListener("mousemove",this.onMouseMove),l.addEventListener("mousedown",this.onMouseDown),l.addEventListener("mouseup",this.onMouseUp),this.domElement=l,window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),this.handleResize()}),Ei(this,"dispose",()=>{var l,c,p,h;(l=this.domElement)==null||l.removeEventListener("contextmenu",this.contextmenu),(c=this.domElement)==null||c.removeEventListener("mousedown",this.onMouseDown),(p=this.domElement)==null||p.removeEventListener("mousemove",this.onMouseMove),(h=this.domElement)==null||h.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)}),Ei(this,"handleResize",()=>{this.domElement&&(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)}),Ei(this,"onMouseDown",l=>{var c;if((c=this.domElement)==null||c.focus(),this.activeLook)switch(l.button){case 0:this.moveForward=!0;break;case 2:this.moveBackward=!0;break}this.mouseDragOn=!0}),Ei(this,"onMouseUp",l=>{if(this.activeLook)switch(l.button){case 0:this.moveForward=!1;break;case 2:this.moveBackward=!1;break}this.mouseDragOn=!1}),Ei(this,"onMouseMove",l=>{this.domElement&&(this.mouseX=l.pageX-this.domElement.offsetLeft-this.viewHalfX,this.mouseY=l.pageY-this.domElement.offsetTop-this.viewHalfY)}),Ei(this,"onKeyDown",l=>{switch(l.code){case"ArrowUp":case"KeyW":this.moveForward=!0;break;case"ArrowLeft":case"KeyA":this.moveLeft=!0;break;case"ArrowDown":case"KeyS":this.moveBackward=!0;break;case"ArrowRight":case"KeyD":this.moveRight=!0;break;case"KeyR":this.moveUp=!0;break;case"KeyF":this.moveDown=!0;break}}),Ei(this,"onKeyUp",l=>{switch(l.code){case"ArrowUp":case"KeyW":this.moveForward=!1;break;case"ArrowLeft":case"KeyA":this.moveLeft=!1;break;case"ArrowDown":case"KeyS":this.moveBackward=!1;break;case"ArrowRight":case"KeyD":this.moveRight=!1;break;case"KeyR":this.moveUp=!1;break;case"KeyF":this.moveDown=!1;break}}),Ei(this,"lookAt",(l,c,p)=>(l instanceof i.Vector3?this.target.copy(l):c&&p&&this.target.set(l,c,p),this.object.lookAt(this.target),this.setOrientation(),this)),Ei(this,"update",l=>{if(!this.enabled)return;if(this.heightSpeed){const T=i.MathUtils.clamp(this.object.position.y,this.heightMin,this.heightMax)-this.heightMin;this.autoSpeedFactor=l*(T*this.heightCoef)}else this.autoSpeedFactor=0;const c=l*this.movementSpeed;(this.moveForward||this.autoForward&&!this.moveBackward)&&this.object.translateZ(-(c+this.autoSpeedFactor)),this.moveBackward&&this.object.translateZ(c),this.moveLeft&&this.object.translateX(-c),this.moveRight&&this.object.translateX(c),this.moveUp&&this.object.translateY(c),this.moveDown&&this.object.translateY(-c);let p=l*this.lookSpeed;this.activeLook||(p=0);let h=1;this.constrainVertical&&(h=Math.PI/(this.verticalMax-this.verticalMin)),this.lon-=this.mouseX*p,this.lookVertical&&(this.lat-=this.mouseY*p*h),this.lat=Math.max(-85,Math.min(85,this.lat));let m=i.MathUtils.degToRad(90-this.lat);const v=i.MathUtils.degToRad(this.lon);this.constrainVertical&&(m=i.MathUtils.mapLinear(m,0,Math.PI,this.verticalMin,this.verticalMax));const E=this.object.position;Pv.setFromSphericalCoords(1,m,v).add(E),this.object.lookAt(Pv)}),Ei(this,"contextmenu",l=>l.preventDefault()),Ei(this,"setOrientation",()=>{this.lookDirection.set(0,0,-1).applyQuaternion(this.object.quaternion),this.spherical.setFromVector3(this.lookDirection),this.lat=90-i.MathUtils.radToDeg(this.spherical.phi),this.lon=i.MathUtils.radToDeg(this.spherical.theta)}),this.object=t,this.domElement=r,this.setOrientation(),r&&this.connect(r)}}const pA=d.forwardRef((c,l)=>{var p=c,{domElement:s,makeDefault:t}=p,r=Cn(p,["domElement","makeDefault"]);const h=(0,_.z)(F=>F.camera),m=(0,_.z)(F=>F.gl),v=(0,_.z)(F=>F.events),E=(0,_.z)(F=>F.get),x=(0,_.z)(F=>F.set),T=s||v.connected||m.domElement,[R]=d.useState(()=>new X3(h,T));return d.useEffect(()=>{if(t){const F=E().controls;return x({controls:R}),()=>x({controls:F})}},[t,R]),(0,_.A)((F,U)=>{R.update(U)},-1),R?d.createElement("primitive",(0,C.Z)({ref:l,object:R},r)):null});var Pu=A(5108);/*!
 * camera-controls
 * https://github.com/yomotsu/camera-controls
 * (c) 2017 @yomotsu
 * Released under the MIT License.
 */const di={LEFT:1,RIGHT:2,MIDDLE:4},sn=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),jf={NONE:0,IN:1,OUT:-1};function Fh(s){return s.isPerspectiveCamera}function ku(s){return s.isOrthographicCamera}const wd=Math.PI*2,kv=Math.PI/2,zv=1e-5,Hf=Math.PI/180;function Wf(s,t,r){return Math.max(t,Math.min(r,s))}function Xo(s,t=zv){return Math.abs(s)<t}function mo(s,t,r=zv){return Xo(s-t,r)}function Gv(s,t){return Math.round(s/t)*t}function Vf(s){return isFinite(s)?s:s<0?-Number.MAX_VALUE:Number.MAX_VALUE}function vm(s){return Math.abs(s)<Number.MAX_VALUE?s:s*(1/0)}function gp(s,t,r,l,c=1/0,p){l=Math.max(1e-4,l);const h=2/l,m=h*p,v=1/(1+m+.48*m*m+.235*m*m*m);let E=s-t;const x=t,T=c*l;E=Wf(E,-T,T),t=s-E;const R=(r.value+h*E)*p;r.value=(r.value-h*R)*v;let F=t+(E+R)*v;return x-s>0==F>x&&(F=x,r.value=(F-x)/p),F}function _m(s,t,r,l,c=1/0,p,h){l=Math.max(1e-4,l);const m=2/l,v=m*p,E=1/(1+v+.48*v*v+.235*v*v*v);let x=t.x,T=t.y,R=t.z,F=s.x-x,U=s.y-T,P=s.z-R;const O=x,z=T,L=R,k=c*l,H=k*k,X=F*F+U*U+P*P;if(X>H){const Te=Math.sqrt(X);F=F/Te*k,U=U/Te*k,P=P/Te*k}x=s.x-F,T=s.y-U,R=s.z-P;const W=(r.x+m*F)*p,J=(r.y+m*U)*p,Y=(r.z+m*P)*p;r.x=(r.x-m*W)*E,r.y=(r.y-m*J)*E,r.z=(r.z-m*Y)*E,h.x=x+(F+W)*E,h.y=T+(U+J)*E,h.z=R+(P+Y)*E;const ce=O-s.x,ue=z-s.y,ge=L-s.z,le=h.x-O,Me=h.y-z,me=h.z-L;return ce*le+ue*Me+ge*me>0&&(h.x=O,h.y=z,h.z=L,r.x=(h.x-O)/p,r.y=(h.y-z)/p,r.z=(h.z-L)/p),h}function Em(s,t){t.set(0,0),s.forEach(r=>{t.x+=r.clientX,t.y+=r.clientY}),t.x/=s.length,t.y/=s.length}function uA(s,t){return ku(s)?(Pu.warn(`${t} is not supported in OrthographicCamera`),!0):!1}class Uv{constructor(){this._listeners={}}addEventListener(t,r){const l=this._listeners;l[t]===void 0&&(l[t]=[]),l[t].indexOf(r)===-1&&l[t].push(r)}hasEventListener(t,r){const l=this._listeners;return l[t]!==void 0&&l[t].indexOf(r)!==-1}removeEventListener(t,r){const c=this._listeners[t];if(c!==void 0){const p=c.indexOf(r);p!==-1&&c.splice(p,1)}}removeAllEventListeners(t){if(!t){this._listeners={};return}Array.isArray(this._listeners[t])&&(this._listeners[t].length=0)}dispatchEvent(t){const l=this._listeners[t.type];if(l!==void 0){t.target=this;const c=l.slice(0);for(let p=0,h=c.length;p<h;p++)c[p].call(this,t)}}}const Y3="2.6.0",P0=1/8,dA=typeof window!="undefined",Nv=dA&&/Mac/.test(navigator.platform),J3=!(dA&&"PointerEvent"in window);let li,jv,bm,Qf,kl,ki,io,Yo,Mm,wo,Rc,Oh,Hv,Wv,Ic,Td,Bd,Vv,hA,Qv,fA,gA,k0;class Kf extends Uv{static install(t){li=t.THREE,jv=Object.freeze(new li.Vector3(0,0,0)),bm=Object.freeze(new li.Vector3(0,1,0)),Qf=Object.freeze(new li.Vector3(0,0,1)),kl=new li.Vector2,ki=new li.Vector3,io=new li.Vector3,Yo=new li.Vector3,Mm=new li.Vector3,wo=new li.Vector3,Rc=new li.Vector3,Oh=new li.Vector3,Hv=new li.Vector3,Wv=new li.Vector3,Ic=new li.Spherical,Td=new li.Spherical,Bd=new li.Box3,Vv=new li.Box3,hA=new li.Sphere,Qv=new li.Quaternion,fA=new li.Quaternion,gA=new li.Matrix4,k0=new li.Raycaster}static get ACTION(){return sn}constructor(t,r){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=sn.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._activePointers=[],this._lockedPointer=null,this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=jf.NONE,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new li.Vector3,this._focalOffsetVelocity=new li.Vector3,this._zoomVelocity={value:0},this._truckInternal=(H,X,W)=>{let J,Y;if(Fh(this._camera)){const ce=ki.copy(this._camera.position).sub(this._target),ue=this._camera.getEffectiveFOV()*Hf,ge=ce.length()*Math.tan(ue*.5);J=this.truckSpeed*H*ge/this._elementRect.height,Y=this.truckSpeed*X*ge/this._elementRect.height}else if(ku(this._camera)){const ce=this._camera;J=H*(ce.right-ce.left)/ce.zoom/this._elementRect.width,Y=X*(ce.top-ce.bottom)/ce.zoom/this._elementRect.height}else return;this.verticalDragToForward?(W?this.setFocalOffset(this._focalOffsetEnd.x+J,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(J,0,!0),this.forward(-Y,!0)):W?this.setFocalOffset(this._focalOffsetEnd.x+J,this._focalOffsetEnd.y+Y,this._focalOffsetEnd.z,!0):this.truck(J,Y,!0)},this._rotateInternal=(H,X)=>{const W=wd*this.azimuthRotateSpeed*H/this._elementRect.height,J=wd*this.polarRotateSpeed*X/this._elementRect.height;this.rotate(W,J,!0)},this._dollyInternal=(H,X,W)=>{const J=Math.pow(.95,-H*this.dollySpeed),Y=this._sphericalEnd.radius,ce=this._sphericalEnd.radius*J,ue=li.MathUtils.clamp(ce,this.minDistance,this.maxDistance),ge=ue-ce;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(ce,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(ge,!0),this._dollyToNoClamp(ue,!0)):this._dollyToNoClamp(ue,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?ce:ue)-Y,this._dollyControlCoord.set(X,W)),this._lastDollyDirection=Math.sign(-H)},this._zoomInternal=(H,X,W)=>{const J=Math.pow(.95,H*this.dollySpeed),Y=this._zoom,ce=this._zoom*J;this.zoomTo(ce,!0),this.dollyToCursor&&(this._changedZoom+=ce-Y,this._dollyControlCoord.set(X,W))},typeof li=="undefined"&&Pu.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=t,this._yAxisUpSpace=new li.Quaternion().setFromUnitVectors(this._camera.up,bm),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=sn.NONE,this._target=new li.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new li.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=new li.Spherical().setFromVector3(ki.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new li.Vector3,new li.Vector3,new li.Vector3,new li.Vector3],this._updateNearPlaneCorners(),this._boundary=new li.Box3(new li.Vector3(-1/0,-1/0,-1/0),new li.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new li.Vector2,this.mouseButtons={left:sn.ROTATE,middle:sn.DOLLY,right:sn.TRUCK,wheel:Fh(this._camera)?sn.DOLLY:ku(this._camera)?sn.ZOOM:sn.NONE},this.touches={one:sn.TOUCH_ROTATE,two:Fh(this._camera)?sn.TOUCH_DOLLY_TRUCK:ku(this._camera)?sn.TOUCH_ZOOM_TRUCK:sn.NONE,three:sn.TOUCH_TRUCK};const l=new li.Vector2,c=new li.Vector2,p=new li.Vector2,h=H=>{if(!this._enabled||!this._domElement)return;const X=H.pointerType!=="mouse"?null:(H.buttons&di.LEFT)===di.LEFT?di.LEFT:(H.buttons&di.MIDDLE)===di.MIDDLE?di.MIDDLE:(H.buttons&di.RIGHT)===di.RIGHT?di.RIGHT:null;if(X!==null){const J=this._findPointerByMouseButton(X);J&&this._disposePointer(J)}if((H.buttons&di.LEFT)===di.LEFT&&this._lockedPointer)return;const W={pointerId:H.pointerId,clientX:H.clientX,clientY:H.clientY,deltaX:0,deltaY:0,mouseButton:X};this._activePointers.push(W),this._domElement.ownerDocument.removeEventListener("pointermove",v,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",x),this._domElement.ownerDocument.addEventListener("pointermove",v,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",x),this._isDragging=!0,P(H)},m=H=>{if(!this._enabled||!this._domElement||this._lockedPointer)return;const X=(H.buttons&di.LEFT)===di.LEFT?di.LEFT:(H.buttons&di.MIDDLE)===di.MIDDLE?di.MIDDLE:(H.buttons&di.RIGHT)===di.RIGHT?di.RIGHT:null;if(X!==null){const J=this._findPointerByMouseButton(X);J&&this._disposePointer(J)}const W={pointerId:1,clientX:H.clientX,clientY:H.clientY,deltaX:0,deltaY:0,mouseButton:(H.buttons&di.LEFT)===di.LEFT?di.LEFT:(H.buttons&di.MIDDLE)===di.LEFT?di.MIDDLE:(H.buttons&di.RIGHT)===di.LEFT?di.RIGHT:null};this._activePointers.push(W),this._domElement.ownerDocument.removeEventListener("mousemove",E),this._domElement.ownerDocument.removeEventListener("mouseup",T),this._domElement.ownerDocument.addEventListener("mousemove",E),this._domElement.ownerDocument.addEventListener("mouseup",T),this._isDragging=!0,P(H)},v=H=>{H.cancelable&&H.preventDefault();const X=H.pointerId,W=this._lockedPointer||this._findPointerById(X);if(W){if(W.clientX=H.clientX,W.clientY=H.clientY,W.deltaX=H.movementX,W.deltaY=H.movementY,this._state=0,H.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(H.buttons&di.LEFT)===di.LEFT)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(H.buttons&di.MIDDLE)===di.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(H.buttons&di.RIGHT)===di.RIGHT&&(this._state=this._state|this.mouseButtons.right);O()}},E=H=>{const X=this._lockedPointer||this._findPointerById(1);X&&(X.clientX=H.clientX,X.clientY=H.clientY,X.deltaX=H.movementX,X.deltaY=H.movementY,this._state=0,(this._lockedPointer||(H.buttons&di.LEFT)===di.LEFT)&&(this._state=this._state|this.mouseButtons.left),(H.buttons&di.MIDDLE)===di.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(H.buttons&di.RIGHT)===di.RIGHT&&(this._state=this._state|this.mouseButtons.right),O())},x=H=>{const X=this._findPointerById(H.pointerId);if(!(X&&X===this._lockedPointer)){if(X&&this._disposePointer(X),H.pointerType==="touch")switch(this._activePointers.length){case 0:this._state=sn.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else this._state=sn.NONE;z()}},T=()=>{const H=this._findPointerById(1);H&&H===this._lockedPointer||(H&&this._disposePointer(H),this._state=sn.NONE,z())};let R=-1;const F=H=>{if(!this._enabled||this.mouseButtons.wheel===sn.NONE)return;if(H.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===sn.ROTATE||this.mouseButtons.wheel===sn.TRUCK){const ce=performance.now();R-ce<1e3&&this._getClientRect(this._elementRect),R=ce}const X=Nv?-1:-3,W=H.deltaMode===1?H.deltaY/X:H.deltaY/(X*10),J=this.dollyToCursor?(H.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,Y=this.dollyToCursor?(H.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case sn.ROTATE:{this._rotateInternal(H.deltaX,H.deltaY),this._isUserControllingRotate=!0;break}case sn.TRUCK:{this._truckInternal(H.deltaX,H.deltaY,!1),this._isUserControllingTruck=!0;break}case sn.OFFSET:{this._truckInternal(H.deltaX,H.deltaY,!0),this._isUserControllingOffset=!0;break}case sn.DOLLY:{this._dollyInternal(-W,J,Y),this._isUserControllingDolly=!0;break}case sn.ZOOM:{this._zoomInternal(-W,J,Y),this._isUserControllingZoom=!0;break}}this.dispatchEvent({type:"control"})},U=H=>{if(!(!this._domElement||!this._enabled)){if(this.mouseButtons.right===Kf.ACTION.NONE){const X=H instanceof PointerEvent?H.pointerId:(H instanceof MouseEvent,0),W=this._findPointerById(X);W&&this._disposePointer(W),this._domElement.ownerDocument.removeEventListener("pointermove",v,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",x),this._domElement.ownerDocument.removeEventListener("mousemove",E),this._domElement.ownerDocument.removeEventListener("mouseup",T);return}H.preventDefault()}},P=H=>{if(!this._enabled)return;if(Em(this._activePointers,kl),this._getClientRect(this._elementRect),l.copy(kl),c.copy(kl),this._activePointers.length>=2){const W=kl.x-this._activePointers[1].clientX,J=kl.y-this._activePointers[1].clientY,Y=Math.sqrt(W*W+J*J);p.set(0,Y);const ce=(this._activePointers[0].clientX+this._activePointers[1].clientX)*.5,ue=(this._activePointers[0].clientY+this._activePointers[1].clientY)*.5;c.set(ce,ue)}if(this._state=0,!H)this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);else if("pointerType"in H&&H.pointerType==="touch")switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three;break}else!this._lockedPointer&&(H.buttons&di.LEFT)===di.LEFT&&(this._state=this._state|this.mouseButtons.left),(H.buttons&di.MIDDLE)===di.MIDDLE&&(this._state=this._state|this.mouseButtons.middle),(H.buttons&di.RIGHT)===di.RIGHT&&(this._state=this._state|this.mouseButtons.right);((this._state&sn.ROTATE)===sn.ROTATE||(this._state&sn.TOUCH_ROTATE)===sn.TOUCH_ROTATE||(this._state&sn.TOUCH_DOLLY_ROTATE)===sn.TOUCH_DOLLY_ROTATE||(this._state&sn.TOUCH_ZOOM_ROTATE)===sn.TOUCH_ZOOM_ROTATE)&&(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),((this._state&sn.TRUCK)===sn.TRUCK||(this._state&sn.TOUCH_TRUCK)===sn.TOUCH_TRUCK||(this._state&sn.TOUCH_DOLLY_TRUCK)===sn.TOUCH_DOLLY_TRUCK||(this._state&sn.TOUCH_ZOOM_TRUCK)===sn.TOUCH_ZOOM_TRUCK)&&(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),((this._state&sn.DOLLY)===sn.DOLLY||(this._state&sn.TOUCH_DOLLY)===sn.TOUCH_DOLLY||(this._state&sn.TOUCH_DOLLY_TRUCK)===sn.TOUCH_DOLLY_TRUCK||(this._state&sn.TOUCH_DOLLY_OFFSET)===sn.TOUCH_DOLLY_OFFSET||(this._state&sn.TOUCH_DOLLY_ROTATE)===sn.TOUCH_DOLLY_ROTATE)&&(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),((this._state&sn.ZOOM)===sn.ZOOM||(this._state&sn.TOUCH_ZOOM)===sn.TOUCH_ZOOM||(this._state&sn.TOUCH_ZOOM_TRUCK)===sn.TOUCH_ZOOM_TRUCK||(this._state&sn.TOUCH_ZOOM_OFFSET)===sn.TOUCH_ZOOM_OFFSET||(this._state&sn.TOUCH_ZOOM_ROTATE)===sn.TOUCH_ZOOM_ROTATE)&&(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),((this._state&sn.OFFSET)===sn.OFFSET||(this._state&sn.TOUCH_OFFSET)===sn.TOUCH_OFFSET||(this._state&sn.TOUCH_DOLLY_OFFSET)===sn.TOUCH_DOLLY_OFFSET||(this._state&sn.TOUCH_ZOOM_OFFSET)===sn.TOUCH_ZOOM_OFFSET)&&(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},O=()=>{if(!this._enabled)return;Em(this._activePointers,kl);const X=this._domElement&&document.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,W=X?-X.deltaX:c.x-kl.x,J=X?-X.deltaY:c.y-kl.y;if(c.copy(kl),((this._state&sn.ROTATE)===sn.ROTATE||(this._state&sn.TOUCH_ROTATE)===sn.TOUCH_ROTATE||(this._state&sn.TOUCH_DOLLY_ROTATE)===sn.TOUCH_DOLLY_ROTATE||(this._state&sn.TOUCH_ZOOM_ROTATE)===sn.TOUCH_ZOOM_ROTATE)&&(this._rotateInternal(W,J),this._isUserControllingRotate=!0),(this._state&sn.DOLLY)===sn.DOLLY||(this._state&sn.ZOOM)===sn.ZOOM){const Y=this.dollyToCursor?(l.x-this._elementRect.x)/this._elementRect.width*2-1:0,ce=this.dollyToCursor?(l.y-this._elementRect.y)/this._elementRect.height*-2+1:0,ue=this.dollyDragInverted?-1:1;(this._state&sn.DOLLY)===sn.DOLLY?(this._dollyInternal(ue*J*P0,Y,ce),this._isUserControllingDolly=!0):(this._zoomInternal(ue*J*P0,Y,ce),this._isUserControllingZoom=!0)}if((this._state&sn.TOUCH_DOLLY)===sn.TOUCH_DOLLY||(this._state&sn.TOUCH_ZOOM)===sn.TOUCH_ZOOM||(this._state&sn.TOUCH_DOLLY_TRUCK)===sn.TOUCH_DOLLY_TRUCK||(this._state&sn.TOUCH_ZOOM_TRUCK)===sn.TOUCH_ZOOM_TRUCK||(this._state&sn.TOUCH_DOLLY_OFFSET)===sn.TOUCH_DOLLY_OFFSET||(this._state&sn.TOUCH_ZOOM_OFFSET)===sn.TOUCH_ZOOM_OFFSET||(this._state&sn.TOUCH_DOLLY_ROTATE)===sn.TOUCH_DOLLY_ROTATE||(this._state&sn.TOUCH_ZOOM_ROTATE)===sn.TOUCH_ZOOM_ROTATE){const Y=kl.x-this._activePointers[1].clientX,ce=kl.y-this._activePointers[1].clientY,ue=Math.sqrt(Y*Y+ce*ce),ge=p.y-ue;p.set(0,ue);const le=this.dollyToCursor?(c.x-this._elementRect.x)/this._elementRect.width*2-1:0,Me=this.dollyToCursor?(c.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&sn.TOUCH_DOLLY)===sn.TOUCH_DOLLY||(this._state&sn.TOUCH_DOLLY_ROTATE)===sn.TOUCH_DOLLY_ROTATE||(this._state&sn.TOUCH_DOLLY_TRUCK)===sn.TOUCH_DOLLY_TRUCK||(this._state&sn.TOUCH_DOLLY_OFFSET)===sn.TOUCH_DOLLY_OFFSET?(this._dollyInternal(ge*P0,le,Me),this._isUserControllingDolly=!0):(this._zoomInternal(ge*P0,le,Me),this._isUserControllingZoom=!0)}((this._state&sn.TRUCK)===sn.TRUCK||(this._state&sn.TOUCH_TRUCK)===sn.TOUCH_TRUCK||(this._state&sn.TOUCH_DOLLY_TRUCK)===sn.TOUCH_DOLLY_TRUCK||(this._state&sn.TOUCH_ZOOM_TRUCK)===sn.TOUCH_ZOOM_TRUCK)&&(this._truckInternal(W,J,!1),this._isUserControllingTruck=!0),((this._state&sn.OFFSET)===sn.OFFSET||(this._state&sn.TOUCH_OFFSET)===sn.TOUCH_OFFSET||(this._state&sn.TOUCH_DOLLY_OFFSET)===sn.TOUCH_DOLLY_OFFSET||(this._state&sn.TOUCH_ZOOM_OFFSET)===sn.TOUCH_ZOOM_OFFSET)&&(this._truckInternal(W,J,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},z=()=>{Em(this._activePointers,kl),c.copy(kl),(this._activePointers.length===0||this._activePointers.length===1&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),this._activePointers.length===0&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",v,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",E),this._domElement.ownerDocument.removeEventListener("pointerup",x),this._domElement.ownerDocument.removeEventListener("mouseup",T),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{!this._enabled||!this._domElement||(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",v,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",x),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",L),this._domElement.ownerDocument.addEventListener("pointerlockerror",k),this._domElement.ownerDocument.addEventListener("pointermove",v,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",x),P())},this.unlockPointer=()=>{this._lockedPointer!==null&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),document.exitPointerLock(),this.cancel(),this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointerlockchange",L),this._domElement.ownerDocument.removeEventListener("pointerlockerror",k))};const L=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},k=()=>{this.unlockPointer()};this._addAllEventListeners=H=>{this._domElement=H,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",h),J3&&this._domElement.addEventListener("mousedown",m),this._domElement.addEventListener("pointercancel",x),this._domElement.addEventListener("wheel",F,{passive:!1}),this._domElement.addEventListener("contextmenu",U)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",h),this._domElement.removeEventListener("mousedown",m),this._domElement.removeEventListener("pointercancel",x),this._domElement.removeEventListener("wheel",F,{passive:!1}),this._domElement.removeEventListener("contextmenu",U),this._domElement.ownerDocument.removeEventListener("pointermove",v,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",E),this._domElement.ownerDocument.removeEventListener("pointerup",x),this._domElement.ownerDocument.removeEventListener("mouseup",T),this._domElement.ownerDocument.removeEventListener("pointerlockchange",L),this._domElement.ownerDocument.removeEventListener("pointerlockerror",k))},this.cancel=()=>{this._state!==sn.NONE&&(this._state=sn.NONE,this._activePointers.length=0,z())},r&&this.connect(r),this.update(0)}get camera(){return this._camera}set camera(t){this._camera=t,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._domElement&&(t?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(t){this._spherical.radius===t&&this._sphericalEnd.radius===t||(this._spherical.radius=t,this._sphericalEnd.radius=t,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(t){this._spherical.theta===t&&this._sphericalEnd.theta===t||(this._spherical.theta=t,this._sphericalEnd.theta=t,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(t){this._spherical.phi===t&&this._sphericalEnd.phi===t||(this._spherical.phi=t,this._sphericalEnd.phi=t,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(t){this._boundaryEnclosesCamera=t,this._needsUpdate=!0}addEventListener(t,r){super.addEventListener(t,r)}removeEventListener(t,r){super.removeEventListener(t,r)}rotate(t,r,l=!1){return this.rotateTo(this._sphericalEnd.theta+t,this._sphericalEnd.phi+r,l)}rotateAzimuthTo(t,r=!1){return this.rotateTo(t,this._sphericalEnd.phi,r)}rotatePolarTo(t,r=!1){return this.rotateTo(this._sphericalEnd.theta,t,r)}rotateTo(t,r,l=!1){this._isUserControllingRotate=!1;const c=Wf(t,this.minAzimuthAngle,this.maxAzimuthAngle),p=Wf(r,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=c,this._sphericalEnd.phi=p,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,l||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const h=!l||mo(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&mo(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(h)}dolly(t,r=!1){return this.dollyTo(this._sphericalEnd.radius-t,r)}dollyTo(t,r=!1){return this._isUserControllingDolly=!1,this._lastDollyDirection=jf.NONE,this._changedDolly=0,this._dollyToNoClamp(Wf(t,this.minDistance,this.maxDistance),r)}_dollyToNoClamp(t,r=!1){const l=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const h=this._collisionTest(),m=mo(h,this._spherical.radius);if(!(l>t)&&m)return Promise.resolve();this._sphericalEnd.radius=Math.min(t,h)}else this._sphericalEnd.radius=t;this._needsUpdate=!0,r||(this._spherical.radius=this._sphericalEnd.radius);const p=!r||mo(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(p)}dollyInFixed(t,r=!1){this._targetEnd.add(this._getCameraDirection(Mm).multiplyScalar(t)),r||this._target.copy(this._targetEnd);const l=!r||mo(this._target.x,this._targetEnd.x,this.restThreshold)&&mo(this._target.y,this._targetEnd.y,this.restThreshold)&&mo(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(l)}zoom(t,r=!1){return this.zoomTo(this._zoomEnd+t,r)}zoomTo(t,r=!1){this._isUserControllingZoom=!1,this._zoomEnd=Wf(t,this.minZoom,this.maxZoom),this._needsUpdate=!0,r||(this._zoom=this._zoomEnd);const l=!r||mo(this._zoom,this._zoomEnd,this.restThreshold);return this._createOnRestPromise(l)}pan(t,r,l=!1){return Pu.warn("`pan` has been renamed to `truck`"),this.truck(t,r,l)}truck(t,r,l=!1){this._camera.updateMatrix(),wo.setFromMatrixColumn(this._camera.matrix,0),Rc.setFromMatrixColumn(this._camera.matrix,1),wo.multiplyScalar(t),Rc.multiplyScalar(-r);const c=ki.copy(wo).add(Rc),p=io.copy(this._targetEnd).add(c);return this.moveTo(p.x,p.y,p.z,l)}forward(t,r=!1){ki.setFromMatrixColumn(this._camera.matrix,0),ki.crossVectors(this._camera.up,ki),ki.multiplyScalar(t);const l=io.copy(this._targetEnd).add(ki);return this.moveTo(l.x,l.y,l.z,r)}elevate(t,r=!1){return ki.copy(this._camera.up).multiplyScalar(t),this.moveTo(this._targetEnd.x+ki.x,this._targetEnd.y+ki.y,this._targetEnd.z+ki.z,r)}moveTo(t,r,l,c=!1){this._isUserControllingTruck=!1;const p=ki.set(t,r,l).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,p,this.boundaryFriction),this._needsUpdate=!0,c||this._target.copy(this._targetEnd);const h=!c||mo(this._target.x,this._targetEnd.x,this.restThreshold)&&mo(this._target.y,this._targetEnd.y,this.restThreshold)&&mo(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(h)}lookInDirectionOf(t,r,l,c=!1){const m=ki.set(t,r,l).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius);return this.setPosition(m.x,m.y,m.z,c)}fitToBox(t,r,{cover:l=!1,paddingLeft:c=0,paddingRight:p=0,paddingBottom:h=0,paddingTop:m=0}={}){const v=[],E=t.isBox3?Bd.copy(t):Bd.setFromObject(t);E.isEmpty()&&(Pu.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const x=Gv(this._sphericalEnd.theta,kv),T=Gv(this._sphericalEnd.phi,kv);v.push(this.rotateTo(x,T,r));const R=ki.setFromSpherical(this._sphericalEnd).normalize(),F=Qv.setFromUnitVectors(R,Qf),U=mo(Math.abs(R.y),1);U&&F.multiply(fA.setFromAxisAngle(bm,x)),F.multiply(this._yAxisUpSpaceInverse);const P=Vv.makeEmpty();io.copy(E.min).applyQuaternion(F),P.expandByPoint(io),io.copy(E.min).setX(E.max.x).applyQuaternion(F),P.expandByPoint(io),io.copy(E.min).setY(E.max.y).applyQuaternion(F),P.expandByPoint(io),io.copy(E.max).setZ(E.min.z).applyQuaternion(F),P.expandByPoint(io),io.copy(E.min).setZ(E.max.z).applyQuaternion(F),P.expandByPoint(io),io.copy(E.max).setY(E.min.y).applyQuaternion(F),P.expandByPoint(io),io.copy(E.max).setX(E.min.x).applyQuaternion(F),P.expandByPoint(io),io.copy(E.max).applyQuaternion(F),P.expandByPoint(io),P.min.x-=c,P.min.y-=h,P.max.x+=p,P.max.y+=m,F.setFromUnitVectors(Qf,R),U&&F.premultiply(fA.invert()),F.premultiply(this._yAxisUpSpace);const O=P.getSize(ki),z=P.getCenter(io).applyQuaternion(F);if(Fh(this._camera)){const L=this.getDistanceToFitBox(O.x,O.y,O.z,l);v.push(this.moveTo(z.x,z.y,z.z,r)),v.push(this.dollyTo(L,r)),v.push(this.setFocalOffset(0,0,0,r))}else if(ku(this._camera)){const L=this._camera,k=L.right-L.left,H=L.top-L.bottom,X=l?Math.max(k/O.x,H/O.y):Math.min(k/O.x,H/O.y);v.push(this.moveTo(z.x,z.y,z.z,r)),v.push(this.zoomTo(X,r)),v.push(this.setFocalOffset(0,0,0,r))}return Promise.all(v)}fitToSphere(t,r){const l=[],p=t instanceof li.Sphere?hA.copy(t):Kf.createBoundingSphere(t,hA);if(l.push(this.moveTo(p.center.x,p.center.y,p.center.z,r)),Fh(this._camera)){const h=this.getDistanceToFitSphere(p.radius);l.push(this.dollyTo(h,r))}else if(ku(this._camera)){const h=this._camera.right-this._camera.left,m=this._camera.top-this._camera.bottom,v=2*p.radius,E=Math.min(h/v,m/v);l.push(this.zoomTo(E,r))}return l.push(this.setFocalOffset(0,0,0,r)),Promise.all(l)}setLookAt(t,r,l,c,p,h,m=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=jf.NONE,this._changedDolly=0;const v=io.set(c,p,h),E=ki.set(t,r,l);this._targetEnd.copy(v),this._sphericalEnd.setFromVector3(E.sub(v).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,m||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const x=!m||mo(this._target.x,this._targetEnd.x,this.restThreshold)&&mo(this._target.y,this._targetEnd.y,this.restThreshold)&&mo(this._target.z,this._targetEnd.z,this.restThreshold)&&mo(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&mo(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&mo(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(x)}lerpLookAt(t,r,l,c,p,h,m,v,E,x,T,R,F,U=!1){this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=jf.NONE,this._changedDolly=0;const P=ki.set(c,p,h),O=io.set(t,r,l);Ic.setFromVector3(O.sub(P).applyQuaternion(this._yAxisUpSpace));const z=Yo.set(x,T,R),L=io.set(m,v,E);Td.setFromVector3(L.sub(z).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(P.lerp(z,F));const k=Td.theta-Ic.theta,H=Td.phi-Ic.phi,X=Td.radius-Ic.radius;this._sphericalEnd.set(Ic.radius+X*F,Ic.phi+H*F,Ic.theta+k*F),this.normalizeRotations(),this._needsUpdate=!0,U||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const W=!U||mo(this._target.x,this._targetEnd.x,this.restThreshold)&&mo(this._target.y,this._targetEnd.y,this.restThreshold)&&mo(this._target.z,this._targetEnd.z,this.restThreshold)&&mo(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&mo(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&mo(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(W)}setPosition(t,r,l,c=!1){return this.setLookAt(t,r,l,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,c)}setTarget(t,r,l,c=!1){const p=this.getPosition(ki),h=this.setLookAt(p.x,p.y,p.z,t,r,l,c);return this._sphericalEnd.phi=Wf(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),h}setFocalOffset(t,r,l,c=!1){this._isUserControllingOffset=!1,this._focalOffsetEnd.set(t,r,l),this._needsUpdate=!0,c||this._focalOffset.copy(this._focalOffsetEnd);const p=!c||mo(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&mo(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&mo(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(p)}setOrbitPoint(t,r,l){this._camera.updateMatrixWorld(),wo.setFromMatrixColumn(this._camera.matrixWorldInverse,0),Rc.setFromMatrixColumn(this._camera.matrixWorldInverse,1),Oh.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const c=ki.set(t,r,l),p=c.distanceTo(this._camera.position),h=c.sub(this._camera.position);wo.multiplyScalar(h.x),Rc.multiplyScalar(h.y),Oh.multiplyScalar(h.z),ki.copy(wo).add(Rc).add(Oh),ki.z=ki.z+p,this.dollyTo(p,!1),this.setFocalOffset(-ki.x,ki.y,-ki.z,!1),this.moveTo(t,r,l,!1)}setBoundary(t){if(!t){this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),this._needsUpdate=!0;return}this._boundary.copy(t),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(t,r,l,c){if(t===null){this._viewport=null;return}this._viewport=this._viewport||new li.Vector4,typeof t=="number"?this._viewport.set(t,r,l,c):this._viewport.copy(t)}getDistanceToFitBox(t,r,l,c=!1){if(uA(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const p=t/r,h=this._camera.getEffectiveFOV()*Hf,m=this._camera.aspect;return((c?p>m:p<m)?r:t/m)*.5/Math.tan(h*.5)+l*.5}getDistanceToFitSphere(t){if(uA(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const r=this._camera.getEffectiveFOV()*Hf,l=Math.atan(Math.tan(r*.5)*this._camera.aspect)*2,c=1<this._camera.aspect?r:l;return t/Math.sin(c*.5)}getTarget(t,r=!0){return(t&&t.isVector3?t:new li.Vector3).copy(r?this._targetEnd:this._target)}getPosition(t,r=!0){return(t&&t.isVector3?t:new li.Vector3).setFromSpherical(r?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(r?this._targetEnd:this._target)}getSpherical(t,r=!0){return(t&&t instanceof li.Spherical?t:new li.Spherical).copy(r?this._sphericalEnd:this._spherical)}getFocalOffset(t,r=!0){return(t&&t.isVector3?t:new li.Vector3).copy(r?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%wd,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=wd),this._spherical.theta+=wd*Math.round((this._sphericalEnd.theta-this._spherical.theta)/wd)}reset(t=!1){if(!mo(this._camera.up.x,this._cameraUp0.x)||!mo(this._camera.up.y,this._cameraUp0.y)||!mo(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const l=this.getPosition(ki);this.updateCameraUp(),this.setPosition(l.x,l.y,l.z)}const r=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,t),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,t),this.zoomTo(this._zoom0,t)];return Promise.all(r)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,bm),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const t=ki.subVectors(this._target,this._camera.position).normalize(),r=io.crossVectors(t,this._camera.up);this._camera.up.crossVectors(r,t),this._camera.updateMatrixWorld();const l=this.getPosition(ki);this.updateCameraUp(),this.setPosition(l.x,l.y,l.z)}update(t){const r=this._sphericalEnd.theta-this._spherical.theta,l=this._sphericalEnd.phi-this._spherical.phi,c=this._sphericalEnd.radius-this._spherical.radius,p=Hv.subVectors(this._targetEnd,this._target),h=Wv.subVectors(this._focalOffsetEnd,this._focalOffset),m=this._zoomEnd-this._zoom;if(Xo(r))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const T=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=gp(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,T,1/0,t),this._needsUpdate=!0}if(Xo(l))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const T=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=gp(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,T,1/0,t),this._needsUpdate=!0}if(Xo(c))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const T=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=gp(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,T,this.maxSpeed,t),this._needsUpdate=!0}if(Xo(p.x)&&Xo(p.y)&&Xo(p.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const T=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;_m(this._target,this._targetEnd,this._targetVelocity,T,this.maxSpeed,t,this._target),this._needsUpdate=!0}if(Xo(h.x)&&Xo(h.y)&&Xo(h.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const T=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;_m(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,T,this.maxSpeed,t,this._focalOffset),this._needsUpdate=!0}if(Xo(m))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const T=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=gp(this._zoom,this._zoomEnd,this._zoomVelocity,T,1/0,t)}if(this.dollyToCursor){if(Fh(this._camera)&&this._changedDolly!==0){const T=this._spherical.radius-this._lastDistance,R=this._camera,F=this._getCameraDirection(Mm),U=ki.copy(F).cross(R.up).normalize();U.lengthSq()===0&&(U.x=1);const P=io.crossVectors(U,F),O=this._sphericalEnd.radius*Math.tan(R.getEffectiveFOV()*Hf*.5),L=(this._sphericalEnd.radius-T-this._sphericalEnd.radius)/this._sphericalEnd.radius,k=Yo.copy(this._targetEnd).add(U.multiplyScalar(this._dollyControlCoord.x*O*R.aspect)).add(P.multiplyScalar(this._dollyControlCoord.y*O)),H=ki.copy(this._targetEnd).lerp(k,L),X=this._lastDollyDirection===jf.IN&&this._spherical.radius<=this.minDistance,W=this._lastDollyDirection===jf.OUT&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(X||W)){this._sphericalEnd.radius-=T,this._spherical.radius-=T;const Y=io.copy(F).multiplyScalar(-T);H.add(Y)}this._boundary.clampPoint(H,H);const J=io.subVectors(H,this._targetEnd);this._targetEnd.copy(H),this._target.add(J),this._changedDolly-=T,Xo(this._changedDolly)&&(this._changedDolly=0)}else if(ku(this._camera)&&this._changedZoom!==0){const T=this._zoom-this._lastZoom,R=this._camera,F=ki.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(R.near+R.far)/(R.near-R.far)).unproject(R),U=io.set(0,0,-1).applyQuaternion(R.quaternion),P=Yo.copy(F).add(U.multiplyScalar(-F.dot(R.up))),z=-(this._zoom-T-this._zoom)/this._zoom,L=this._getCameraDirection(Mm),k=this._targetEnd.dot(L),H=ki.copy(this._targetEnd).lerp(P,z),X=H.dot(L),W=L.multiplyScalar(X-k);H.sub(W),this._boundary.clampPoint(H,H);const J=io.subVectors(H,this._targetEnd);this._targetEnd.copy(H),this._target.add(J),this._changedZoom-=T,Xo(this._changedZoom)&&(this._changedZoom=0)}}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);const v=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,v),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!Xo(this._focalOffset.x)||!Xo(this._focalOffset.y)||!Xo(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),wo.setFromMatrixColumn(this._camera.matrix,0),Rc.setFromMatrixColumn(this._camera.matrix,1),Oh.setFromMatrixColumn(this._camera.matrix,2),wo.multiplyScalar(this._focalOffset.x),Rc.multiplyScalar(-this._focalOffset.y),Oh.multiplyScalar(this._focalOffset.z),ki.copy(wo).add(Rc).add(Oh),this._camera.position.add(ki)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),ki.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const x=this._needsUpdate;return x&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):x?(this.dispatchEvent({type:"update"}),Xo(r,this.restThreshold)&&Xo(l,this.restThreshold)&&Xo(c,this.restThreshold)&&Xo(p.x,this.restThreshold)&&Xo(p.y,this.restThreshold)&&Xo(p.z,this.restThreshold)&&Xo(h.x,this.restThreshold)&&Xo(h.y,this.restThreshold)&&Xo(h.z,this.restThreshold)&&Xo(m,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!x&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=x,this._needsUpdate=!1,x}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:Vf(this.maxDistance),minZoom:this.minZoom,maxZoom:Vf(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:Vf(this.maxPolarAngle),minAzimuthAngle:Vf(this.minAzimuthAngle),maxAzimuthAngle:Vf(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:ki.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(t,r=!1){const l=JSON.parse(t);this.enabled=l.enabled,this.minDistance=l.minDistance,this.maxDistance=vm(l.maxDistance),this.minZoom=l.minZoom,this.maxZoom=vm(l.maxZoom),this.minPolarAngle=l.minPolarAngle,this.maxPolarAngle=vm(l.maxPolarAngle),this.minAzimuthAngle=vm(l.minAzimuthAngle),this.maxAzimuthAngle=vm(l.maxAzimuthAngle),this.smoothTime=l.smoothTime,this.draggingSmoothTime=l.draggingSmoothTime,this.dollySpeed=l.dollySpeed,this.truckSpeed=l.truckSpeed,this.dollyToCursor=l.dollyToCursor,this.verticalDragToForward=l.verticalDragToForward,this._target0.fromArray(l.target0),this._position0.fromArray(l.position0),this._zoom0=l.zoom0,this._focalOffset0.fromArray(l.focalOffset0),this.moveTo(l.target[0],l.target[1],l.target[2],r),Ic.setFromVector3(ki.fromArray(l.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(Ic.theta,Ic.phi,r),this.dollyTo(Ic.radius,r),this.zoomTo(l.zoom,r),this.setFocalOffset(l.focalOffset[0],l.focalOffset[1],l.focalOffset[2],r),this._needsUpdate=!0}connect(t){if(this._domElement){Pu.warn("camera-controls is already connected.");return}t.setAttribute("data-camera-controls-version",Y3),this._addAllEventListeners(t)}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(t){return t.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(t){return this._getTargetDirection(t).negate()}_findPointerById(t){return this._activePointers.find(r=>r.pointerId===t)}_findPointerByMouseButton(t){return this._activePointers.find(r=>r.mouseButton===t)}_disposePointer(t){this._activePointers.splice(this._activePointers.indexOf(t),1)}_encloseToBoundary(t,r,l){const c=r.lengthSq();if(c===0)return t;const p=io.copy(r).add(t),m=this._boundary.clampPoint(p,Yo).sub(p),v=m.lengthSq();if(v===0)return t.add(r);if(v===c)return t;if(l===0)return t.add(r).add(m);{const E=1+l*v/r.dot(m);return t.add(io.copy(r).multiplyScalar(E)).add(m.multiplyScalar(1-l))}}_updateNearPlaneCorners(){if(Fh(this._camera)){const t=this._camera,r=t.near,l=t.getEffectiveFOV()*Hf,c=Math.tan(l*.5)*r,p=c*t.aspect;this._nearPlaneCorners[0].set(-p,-c,0),this._nearPlaneCorners[1].set(p,-c,0),this._nearPlaneCorners[2].set(p,c,0),this._nearPlaneCorners[3].set(-p,c,0)}else if(ku(this._camera)){const t=this._camera,r=1/t.zoom,l=t.left*r,c=t.right*r,p=t.top*r,h=t.bottom*r;this._nearPlaneCorners[0].set(l,p,0),this._nearPlaneCorners[1].set(c,p,0),this._nearPlaneCorners[2].set(c,h,0),this._nearPlaneCorners[3].set(l,h,0)}}_collisionTest(){let t=1/0;if(!(this.colliderMeshes.length>=1)||uA(this._camera,"_collisionTest"))return t;const l=this._getTargetDirection(Mm);gA.lookAt(jv,l,this._camera.up);for(let c=0;c<4;c++){const p=io.copy(this._nearPlaneCorners[c]);p.applyMatrix4(gA);const h=Yo.addVectors(this._target,p);k0.set(h,l),k0.far=this._spherical.radius+1;const m=k0.intersectObjects(this.colliderMeshes);m.length!==0&&m[0].distance<t&&(t=m[0].distance)}return t}_getClientRect(t){if(!this._domElement)return;const r=this._domElement.getBoundingClientRect();return t.x=r.left,t.y=r.top,this._viewport?(t.x+=this._viewport.x,t.y+=r.height-this._viewport.w-this._viewport.y,t.width=this._viewport.z,t.height=this._viewport.w):(t.width=r.width,t.height=r.height),t}_createOnRestPromise(t){return t?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise(r=>{const l=()=>{this.removeEventListener("rest",l),r()};this.addEventListener("rest",l)}))}_addAllEventListeners(t){}_removeAllEventListeners(){}get dampingFactor(){return Pu.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(t){Pu.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return Pu.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(t){Pu.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(t,r=new li.Sphere){const l=r,c=l.center;Bd.makeEmpty(),t.traverseVisible(h=>{h.isMesh&&Bd.expandByObject(h)}),Bd.getCenter(c);let p=0;return t.traverseVisible(h=>{if(!h.isMesh)return;const m=h,v=m.geometry.clone();v.applyMatrix4(m.matrixWorld);const x=v.attributes.position;for(let T=0,R=x.count;T<R;T++)ki.fromBufferAttribute(x,T),p=Math.max(p,c.distanceToSquared(ki))}),l.radius=Math.sqrt(p),l}}const Z3=(0,d.forwardRef)((s,t)=>{(0,d.useMemo)(()=>{const W={Box3:i.Box3,MathUtils:{clamp:i.MathUtils.clamp},Matrix4:i.Matrix4,Quaternion:i.Quaternion,Raycaster:i.Raycaster,Sphere:i.Sphere,Spherical:i.Spherical,Vector2:i.Vector2,Vector3:i.Vector3,Vector4:i.Vector4};Kf.install({THREE:W}),(0,_.e)({CameraControlsImpl:Kf})},[]);const X=s,{camera:r,domElement:l,makeDefault:c,onStart:p,onEnd:h,onChange:m,regress:v}=X,E=Cn(X,["camera","domElement","makeDefault","onStart","onEnd","onChange","regress"]),x=(0,_.z)(W=>W.camera),T=(0,_.z)(W=>W.gl),R=(0,_.z)(W=>W.invalidate),F=(0,_.z)(W=>W.events),U=(0,_.z)(W=>W.setEvents),P=(0,_.z)(W=>W.set),O=(0,_.z)(W=>W.get),z=(0,_.z)(W=>W.performance),L=r||x,k=l||F.connected||T.domElement,H=(0,d.useMemo)(()=>new Kf(L),[L]);return(0,_.A)((W,J)=>{H.enabled&&H.update(J)},-1),(0,d.useEffect)(()=>(H.connect(k),()=>void H.disconnect()),[k,H]),(0,d.useEffect)(()=>{const W=ce=>{R(),v&&z.regress(),m&&m(ce)},J=ce=>{p&&p(ce)},Y=ce=>{h&&h(ce)};return H.addEventListener("update",W),H.addEventListener("controlstart",J),H.addEventListener("controlend",Y),H.addEventListener("control",W),H.addEventListener("transitionstart",W),H.addEventListener("wake",W),()=>{H.removeEventListener("update",W),H.removeEventListener("controlstart",J),H.removeEventListener("controlend",Y),H.removeEventListener("control",W),H.removeEventListener("transitionstart",W),H.removeEventListener("wake",W)}},[H,p,h,R,U,v,m]),(0,d.useEffect)(()=>{if(c){const W=O().controls;return P({controls:H}),()=>P({controls:W})}},[c,H]),d.createElement("primitive",(0,C.Z)({ref:t,object:H},E))});function Kv(s,t){const x=Zn({unsuspend:"loadedmetadata",crossOrigin:"Anonymous",muted:!0,loop:!0,start:!0,playsInline:!0},t),{unsuspend:r,start:l,crossOrigin:c,muted:p,loop:h}=x,m=Cn(x,["unsuspend","start","crossOrigin","muted","loop"]),v=(0,_.z)(T=>T.gl),E=(0,Hc.Rq)(()=>new Promise((T,R)=>{const F=Object.assign(document.createElement("video"),Zn({src:typeof s=="string"&&s||void 0,srcObject:s instanceof MediaStream&&s||void 0,crossOrigin:c,loop:h,muted:p},m)),U=new i.VideoTexture(F);"colorSpace"in U?U.colorSpace=v.outputColorSpace:U.encoding=v.outputEncoding,F.addEventListener(r,()=>T(U))}),[s]);return(0,d.useEffect)(()=>void(l&&E.image.play()),[E,l]),E}var Xv=A(5108);const q3=new i.Vector3(0,0,-1),$3=function(){const s=new i.Vector3,t=new i.Vector3,r=new i.Vector3,l=new i.Vector3,c=new i.Vector3;return function(p,h,m,v){return s.copy(p),t.copy(h),r.copy(m),l.copy(t).sub(s),c.copy(r).sub(s),v.crossVectors(c,l).normalize()}}();function eE(s,t){return s.clone().add(t).multiplyScalar(.5)}const Yv=d.forwardRef((z,O)=>{var L=z,{points:s=z0.SAMPLE_FACELANDMARKER_RESULT.faceLandmarks[0],face:t,facialTransformationMatrix:r,faceBlendshapes:l,offset:c,offsetScalar:p=80,width:h,height:m,depth:v=1,verticalTri:E=[159,386,152],origin:x,eyes:T=!0,eyesAsOrigin:R=!1,debug:F=!1,children:U}=L,P=Cn(L,["points","face","facialTransformationMatrix","faceBlendshapes","offset","offsetScalar","width","height","depth","verticalTri","origin","eyes","eyesAsOrigin","debug","children"]);var k;t&&(s=t.keypoints,Xv.warn("Facemesh `face` prop is deprecated: use `points` instead"));const H=d.useRef(null),X=d.useRef(null),W=d.useRef(null),J=d.useRef(null),Y=d.useRef(null),ce=d.useRef(null),ue=d.useRef(null),[ge]=d.useState(()=>new i.Vector3),[le]=d.useState(()=>new i.Object3D),[Me]=d.useState(()=>new i.Quaternion),[me]=d.useState(()=>new i.Vector3),{invalidate:Te}=(0,_.z)();d.useEffect(()=>{var Ce;(Ce=Y.current)==null||Ce.geometry.setIndex(z0.TRIANGULATION)},[]);const[Ue]=d.useState(()=>new i.Vector3);d.useEffect(()=>{var Ce,Ee;const _e=(Ce=Y.current)==null?void 0:Ce.geometry;if(!_e)return;if(_e.setFromPoints(s),_e.setDrawRange(0,z0.TRIANGULATION.length),r)if(le.matrix.fromArray(r.data),le.matrix.decompose(le.position,le.quaternion,le.scale),le.rotation.y*=-1,le.rotation.z*=-1,Me.setFromEuler(le.rotation),c){var oe;le.position.y*=-1,le.position.z*=-1,(oe=H.current)==null||oe.position.copy(le.position.divideScalar(p))}else{var Ae;(Ae=H.current)==null||Ae.position.set(0,0,0)}else $3(s[E[0]],s[E[1]],s[E[2]],ge),Me.setFromUnitVectors(q3,ge);const Be=Me.clone().invert();if(_e.computeBoundingBox(),F&&Te(),_e.center(),_e.applyQuaternion(Be),(Ee=J.current)==null||Ee.setRotationFromQuaternion(Me),T){if(!l)Xv.warn("Facemesh `eyes` option only works if `faceBlendshapes` is provided: skipping.");else if(ce.current&&ue.current&&W.current)if(R){const ve=ce.current._computeSphere(_e),ke=ue.current._computeSphere(_e);x=eE(ve.center,ke.center).negate(),ce.current._update(_e,l,ve),ue.current._update(_e,l,ke)}else ce.current._update(_e,l),ue.current._update(_e,l)}if(W.current){if(x!==void 0)if(typeof x=="number"){const ve=_e.getAttribute("position");me.set(-ve.getX(x),-ve.getY(x),-ve.getZ(x))}else x.isVector3&&me.copy(x);else me.setScalar(0);W.current.position.copy(me)}if(X.current){let ve=1;(h||m||v)&&(_e.boundingBox.getSize(Ue),h&&(ve=h/Ue.x),m&&(ve=m/Ue.y),v&&(ve=v/Ue.z)),X.current.scale.setScalar(ve!==1?ve:1)}_e.computeVertexNormals(),_e.attributes.position.needsUpdate=!0},[s,r,l,le,c,p,h,m,v,E,x,T,F,Te,ge,Me,Ue,me]);const Re=d.useMemo(()=>({outerRef:J,meshRef:Y,eyeRightRef:ce,eyeLeftRef:ue}),[]);d.useImperativeHandle(O,()=>Re,[Re]);const[Ge]=d.useState(()=>new i.Vector3),De=(k=Y.current)==null?void 0:k.geometry.boundingBox,Xe=(De==null?void 0:De.getSize(Ge).z)||1;return d.createElement("group",P,d.createElement("group",{ref:H},d.createElement("group",{ref:J},d.createElement("group",{ref:X},F?d.createElement(d.Fragment,null,d.createElement("axesHelper",{args:[Xe]}),d.createElement(Qp,{points:[[0,0,0],[0,0,-Xe]],color:65535})):null,d.createElement("group",{ref:W},T&&l&&d.createElement("group",{name:"eyes"},d.createElement(mA,{side:"left",ref:ce,debug:F}),d.createElement(mA,{side:"right",ref:ue,debug:F})),d.createElement("mesh",{ref:Y,name:"face"},U,F?d.createElement(d.Fragment,null,De&&d.createElement("box3Helper",{args:[De]})):null))))))}),Xf={contourLandmarks:{right:[33,133,159,145,153],left:[263,362,386,374,380]},blendshapes:{right:[14,16,18,12],left:[13,15,17,11]},color:{right:"red",left:"#00ff00"},fov:{horizontal:100,vertical:90}},mA=d.forwardRef(({side:s,debug:t=!0},r)=>{const l=d.useRef(null),c=d.useRef(null),[p]=d.useState(()=>new i.Sphere),h=d.useCallback(T=>{const R=T.getAttribute("position"),U=Xf.contourLandmarks[s].map(P=>new i.Vector3(R.getX(P),R.getY(P),R.getZ(P)));return p.center.set(0,0,0),U.forEach(P=>p.center.add(P)),p.center.divideScalar(U.length),p.radius=U[0].sub(U[1]).length()/2,p},[p,s]),[m]=d.useState(()=>new i.Euler),v=d.useCallback((T,R,F)=>{if(l.current){var U;(U=F)!==null&&U!==void 0||(F=h(T)),l.current.position.copy(F.center),l.current.scale.setScalar(F.radius)}if(R&&c.current){const P=Xf.blendshapes[s],O=R.categories[P[0]].score,z=R.categories[P[1]].score,L=R.categories[P[2]].score,k=R.categories[P[3]].score,H=Xf.fov.horizontal*i.MathUtils.DEG2RAD,X=Xf.fov.vertical*i.MathUtils.DEG2RAD,W=H*.5*(k-L),J=X*.5*(O-z)*(s==="left"?1:-1);m.set(W,J,0),c.current.setRotationFromEuler(m)}},[h,s,m]),E=d.useMemo(()=>({eyeMeshRef:l,irisDirRef:c,_computeSphere:h,_update:v}),[h,v]);d.useImperativeHandle(r,()=>E,[E]);const x=Xf.color[s];return d.createElement("group",null,d.createElement("group",{ref:l},t&&d.createElement("axesHelper",null),d.createElement("group",{ref:c},d.createElement(d.Fragment,null,t&&d.createElement(Qp,{points:[[0,0,0],[0,0,-2]],lineWidth:1,color:x})))))}),z0={TRIANGULATION:[127,34,139,11,0,37,232,231,120,72,37,39,128,121,47,232,121,128,104,69,67,175,171,148,157,154,155,118,50,101,73,39,40,9,151,108,48,115,131,194,204,211,74,40,185,80,42,183,40,92,186,230,229,118,202,212,214,83,18,17,76,61,146,160,29,30,56,157,173,106,204,194,135,214,192,203,165,98,21,71,68,51,45,4,144,24,23,77,146,91,205,50,187,201,200,18,91,106,182,90,91,181,85,84,17,206,203,36,148,171,140,92,40,39,193,189,244,159,158,28,247,246,161,236,3,196,54,68,104,193,168,8,117,228,31,189,193,55,98,97,99,126,47,100,166,79,218,155,154,26,209,49,131,135,136,150,47,126,217,223,52,53,45,51,134,211,170,140,67,69,108,43,106,91,230,119,120,226,130,247,63,53,52,238,20,242,46,70,156,78,62,96,46,53,63,143,34,227,173,155,133,123,117,111,44,125,19,236,134,51,216,206,205,154,153,22,39,37,167,200,201,208,36,142,100,57,212,202,20,60,99,28,158,157,35,226,113,160,159,27,204,202,210,113,225,46,43,202,204,62,76,77,137,123,116,41,38,72,203,129,142,64,98,240,49,102,64,41,73,74,212,216,207,42,74,184,169,170,211,170,149,176,105,66,69,122,6,168,123,147,187,96,77,90,65,55,107,89,90,180,101,100,120,63,105,104,93,137,227,15,86,85,129,102,49,14,87,86,55,8,9,100,47,121,145,23,22,88,89,179,6,122,196,88,95,96,138,172,136,215,58,172,115,48,219,42,80,81,195,3,51,43,146,61,171,175,199,81,82,38,53,46,225,144,163,110,246,33,7,52,65,66,229,228,117,34,127,234,107,108,69,109,108,151,48,64,235,62,78,191,129,209,126,111,35,143,163,161,246,117,123,50,222,65,52,19,125,141,221,55,65,3,195,197,25,7,33,220,237,44,70,71,139,122,193,245,247,130,33,71,21,162,153,158,159,170,169,150,188,174,196,216,186,92,144,160,161,2,97,167,141,125,241,164,167,37,72,38,12,145,159,160,38,82,13,63,68,71,226,35,111,158,153,154,101,50,205,206,92,165,209,198,217,165,167,97,220,115,218,133,112,243,239,238,241,214,135,169,190,173,133,171,208,32,125,44,237,86,87,178,85,86,179,84,85,180,83,84,181,201,83,182,137,93,132,76,62,183,61,76,184,57,61,185,212,57,186,214,207,187,34,143,156,79,239,237,123,137,177,44,1,4,201,194,32,64,102,129,213,215,138,59,166,219,242,99,97,2,94,141,75,59,235,24,110,228,25,130,226,23,24,229,22,23,230,26,22,231,112,26,232,189,190,243,221,56,190,28,56,221,27,28,222,29,27,223,30,29,224,247,30,225,238,79,20,166,59,75,60,75,240,147,177,215,20,79,166,187,147,213,112,233,244,233,128,245,128,114,188,114,217,174,131,115,220,217,198,236,198,131,134,177,132,58,143,35,124,110,163,7,228,110,25,356,389,368,11,302,267,452,350,349,302,303,269,357,343,277,452,453,357,333,332,297,175,152,377,384,398,382,347,348,330,303,304,270,9,336,337,278,279,360,418,262,431,304,408,409,310,415,407,270,409,410,450,348,347,422,430,434,313,314,17,306,307,375,387,388,260,286,414,398,335,406,418,364,367,416,423,358,327,251,284,298,281,5,4,373,374,253,307,320,321,425,427,411,421,313,18,321,405,406,320,404,405,315,16,17,426,425,266,377,400,369,322,391,269,417,465,464,386,257,258,466,260,388,456,399,419,284,332,333,417,285,8,346,340,261,413,441,285,327,460,328,355,371,329,392,439,438,382,341,256,429,420,360,364,394,379,277,343,437,443,444,283,275,440,363,431,262,369,297,338,337,273,375,321,450,451,349,446,342,467,293,334,282,458,461,462,276,353,383,308,324,325,276,300,293,372,345,447,382,398,362,352,345,340,274,1,19,456,248,281,436,427,425,381,256,252,269,391,393,200,199,428,266,330,329,287,273,422,250,462,328,258,286,384,265,353,342,387,259,257,424,431,430,342,353,276,273,335,424,292,325,307,366,447,345,271,303,302,423,266,371,294,455,460,279,278,294,271,272,304,432,434,427,272,407,408,394,430,431,395,369,400,334,333,299,351,417,168,352,280,411,325,319,320,295,296,336,319,403,404,330,348,349,293,298,333,323,454,447,15,16,315,358,429,279,14,15,316,285,336,9,329,349,350,374,380,252,318,402,403,6,197,419,318,319,325,367,364,365,435,367,397,344,438,439,272,271,311,195,5,281,273,287,291,396,428,199,311,271,268,283,444,445,373,254,339,263,466,249,282,334,296,449,347,346,264,447,454,336,296,299,338,10,151,278,439,455,292,407,415,358,371,355,340,345,372,390,249,466,346,347,280,442,443,282,19,94,370,441,442,295,248,419,197,263,255,359,440,275,274,300,383,368,351,412,465,263,467,466,301,368,389,380,374,386,395,378,379,412,351,419,436,426,322,373,390,388,2,164,393,370,462,461,164,0,267,302,11,12,374,373,387,268,12,13,293,300,301,446,261,340,385,384,381,330,266,425,426,423,391,429,355,437,391,327,326,440,457,438,341,382,362,459,457,461,434,430,394,414,463,362,396,369,262,354,461,457,316,403,402,315,404,403,314,405,404,313,406,405,421,418,406,366,401,361,306,408,407,291,409,408,287,410,409,432,436,410,434,416,411,264,368,383,309,438,457,352,376,401,274,275,4,421,428,262,294,327,358,433,416,367,289,455,439,462,370,326,2,326,370,305,460,455,254,449,448,255,261,446,253,450,449,252,451,450,256,452,451,341,453,452,413,464,463,441,413,414,258,442,441,257,443,442,259,444,443,260,445,444,467,342,445,459,458,250,289,392,290,290,328,460,376,433,435,250,290,392,411,416,433,341,463,464,453,464,465,357,465,412,343,412,399,360,363,440,437,399,456,420,456,363,401,435,288,372,383,353,339,255,249,448,261,255,133,243,190,133,155,112,33,246,247,33,130,25,398,384,286,362,398,414,362,463,341,263,359,467,263,249,255,466,467,260,75,60,166,238,239,79,162,127,139,72,11,37,121,232,120,73,72,39,114,128,47,233,232,128,103,104,67,152,175,148,173,157,155,119,118,101,74,73,40,107,9,108,49,48,131,32,194,211,184,74,185,191,80,183,185,40,186,119,230,118,210,202,214,84,83,17,77,76,146,161,160,30,190,56,173,182,106,194,138,135,192,129,203,98,54,21,68,5,51,4,145,144,23,90,77,91,207,205,187,83,201,18,181,91,182,180,90,181,16,85,17,205,206,36,176,148,140,165,92,39,245,193,244,27,159,28,30,247,161,174,236,196,103,54,104,55,193,8,111,117,31,221,189,55,240,98,99,142,126,100,219,166,218,112,155,26,198,209,131,169,135,150,114,47,217,224,223,53,220,45,134,32,211,140,109,67,108,146,43,91,231,230,120,113,226,247,105,63,52,241,238,242,124,46,156,95,78,96,70,46,63,116,143,227,116,123,111,1,44,19,3,236,51,207,216,205,26,154,22,165,39,167,199,200,208,101,36,100,43,57,202,242,20,99,56,28,157,124,35,113,29,160,27,211,204,210,124,113,46,106,43,204,96,62,77,227,137,116,73,41,72,36,203,142,235,64,240,48,49,64,42,41,74,214,212,207,183,42,184,210,169,211,140,170,176,104,105,69,193,122,168,50,123,187,89,96,90,66,65,107,179,89,180,119,101,120,68,63,104,234,93,227,16,15,85,209,129,49,15,14,86,107,55,9,120,100,121,153,145,22,178,88,179,197,6,196,89,88,96,135,138,136,138,215,172,218,115,219,41,42,81,5,195,51,57,43,61,208,171,199,41,81,38,224,53,225,24,144,110,105,52,66,118,229,117,227,34,234,66,107,69,10,109,151,219,48,235,183,62,191,142,129,126,116,111,143,7,163,246,118,117,50,223,222,52,94,19,141,222,221,65,196,3,197,45,220,44,156,70,139,188,122,245,139,71,162,145,153,159,149,170,150,122,188,196,206,216,92,163,144,161,164,2,167,242,141,241,0,164,37,11,72,12,144,145,160,12,38,13,70,63,71,31,226,111,157,158,154,36,101,205,203,206,165,126,209,217,98,165,97,237,220,218,237,239,241,210,214,169,140,171,32,241,125,237,179,86,178,180,85,179,181,84,180,182,83,181,194,201,182,177,137,132,184,76,183,185,61,184,186,57,185,216,212,186,192,214,187,139,34,156,218,79,237,147,123,177,45,44,4,208,201,32,98,64,129,192,213,138,235,59,219,141,242,97,97,2,141,240,75,235,229,24,228,31,25,226,230,23,229,231,22,230,232,26,231,233,112,232,244,189,243,189,221,190,222,28,221,223,27,222,224,29,223,225,30,224,113,247,225,99,60,240,213,147,215,60,20,166,192,187,213,243,112,244,244,233,245,245,128,188,188,114,174,134,131,220,174,217,236,236,198,134,215,177,58,156,143,124,25,110,7,31,228,25,264,356,368,0,11,267,451,452,349,267,302,269,350,357,277,350,452,357,299,333,297,396,175,377,381,384,382,280,347,330,269,303,270,151,9,337,344,278,360,424,418,431,270,304,409,272,310,407,322,270,410,449,450,347,432,422,434,18,313,17,291,306,375,259,387,260,424,335,418,434,364,416,391,423,327,301,251,298,275,281,4,254,373,253,375,307,321,280,425,411,200,421,18,335,321,406,321,320,405,314,315,17,423,426,266,396,377,369,270,322,269,413,417,464,385,386,258,248,456,419,298,284,333,168,417,8,448,346,261,417,413,285,326,327,328,277,355,329,309,392,438,381,382,256,279,429,360,365,364,379,355,277,437,282,443,283,281,275,363,395,431,369,299,297,337,335,273,321,348,450,349,359,446,467,283,293,282,250,458,462,300,276,383,292,308,325,283,276,293,264,372,447,346,352,340,354,274,19,363,456,281,426,436,425,380,381,252,267,269,393,421,200,428,371,266,329,432,287,422,290,250,328,385,258,384,446,265,342,386,387,257,422,424,430,445,342,276,422,273,424,306,292,307,352,366,345,268,271,302,358,423,371,327,294,460,331,279,294,303,271,304,436,432,427,304,272,408,395,394,431,378,395,400,296,334,299,6,351,168,376,352,411,307,325,320,285,295,336,320,319,404,329,330,349,334,293,333,366,323,447,316,15,315,331,358,279,317,14,316,8,285,9,277,329,350,253,374,252,319,318,403,351,6,419,324,318,325,397,367,365,288,435,397,278,344,439,310,272,311,248,195,281,375,273,291,175,396,199,312,311,268,276,283,445,390,373,339,295,282,296,448,449,346,356,264,454,337,336,299,337,338,151,294,278,455,308,292,415,429,358,355,265,340,372,388,390,466,352,346,280,295,442,282,354,19,370,285,441,295,195,248,197,457,440,274,301,300,368,417,351,465,251,301,389,385,380,386,394,395,379,399,412,419,410,436,322,387,373,388,326,2,393,354,370,461,393,164,267,268,302,12,386,374,387,312,268,13,298,293,301,265,446,340,380,385,381,280,330,425,322,426,391,420,429,437,393,391,326,344,440,438,458,459,461,364,434,394,428,396,262,274,354,457,317,316,402,316,315,403,315,314,404,314,313,405,313,421,406,323,366,361,292,306,407,306,291,408,291,287,409,287,432,410,427,434,411,372,264,383,459,309,457,366,352,401,1,274,4,418,421,262,331,294,358,435,433,367,392,289,439,328,462,326,94,2,370,289,305,455,339,254,448,359,255,446,254,253,449,253,252,450,252,256,451,256,341,452,414,413,463,286,441,414,286,258,441,258,257,442,257,259,443,259,260,444,260,467,445,309,459,250,305,289,290,305,290,460,401,376,435,309,250,392,376,411,433,453,341,464,357,453,465,343,357,412,437,343,399,344,360,440,420,437,456,360,420,363,361,401,288,265,372,353,390,339,249,339,448,255],SAMPLE_FACE:{keypoints:[{x:356.2804412841797,y:295.1960563659668,z:-23.786449432373047,name:"lips"},{x:354.8859405517578,y:264.69520568847656,z:-36.718435287475586},{x:355.2180862426758,y:275.3360366821289,z:-21.183712482452393},{x:347.349853515625,y:242.4400234222412,z:-25.093655586242676},{x:354.40135955810547,y:256.67933464050293,z:-38.23572635650635},{x:353.7689971923828,y:247.54886627197266,z:-34.5475435256958},{x:352.1288299560547,y:227.34312057495117,z:-13.095386028289795},{x:303.5013198852539,y:234.67002868652344,z:12.500141859054565,name:"rightEye"},{x:351.09378814697266,y:211.87547206878662,z:-6.413471698760986},{x:350.7115936279297,y:202.1251630783081,z:-6.413471698760986},{x:348.33667755126953,y:168.7741756439209,z:6.483500003814697,name:"faceOval"},{x:356.4806365966797,y:299.2995357513428,z:-23.144519329071045},{x:356.5511703491211,y:302.66146659851074,z:-21.020312309265137},{x:356.6239547729492,y:304.1536331176758,z:-18.137459754943848,name:"lips"},{x:356.5807342529297,y:305.1840591430664,z:-18.767719268798828,name:"lips"},{x:356.8241500854492,y:308.25711250305176,z:-20.16829490661621},{x:357.113037109375,y:312.26277351379395,z:-22.10575819015503},{x:357.34962463378906,y:317.1123218536377,z:-21.837315559387207,name:"lips"},{x:357.6658630371094,y:325.51036834716797,z:-16.27002477645874},{x:355.0201416015625,y:269.36279296875,z:-33.73054027557373},{x:348.5237503051758,y:270.33411026000977,z:-24.93025302886963},{x:279.97331619262695,y:213.24176788330078,z:47.759642601013184,name:"faceOval"},{x:322.66529083251953,y:238.5027265548706,z:5.535193085670471},{x:316.0983657836914,y:239.94489669799805,z:5.777376294136047},{x:309.9431610107422,y:240.24518966674805,z:7.510589361190796},{x:301.31994247436523,y:237.86138534545898,z:13.118728399276733},{x:328.14266204833984,y:235.80496788024902,z:6.646900177001953},{x:313.7326431274414,y:222.11161136627197,z:3.9887237548828125},{x:320.45196533203125,y:221.87729358673096,z:4.601476192474365},{x:307.35679626464844,y:223.63793849945068,z:5.932023525238037},{x:303.0031204223633,y:226.3743782043457,z:8.479321002960205},{x:296.80023193359375,y:242.94299125671387,z:15.931552648544312},{x:332.2352981567383,y:340.77341079711914,z:-10.165848731994629},{x:301.38587951660156,y:233.46447944641113,z:14.764405488967896,name:"rightEye"},{x:279.0147018432617,y:244.37155723571777,z:45.77549457550049},{x:289.60548400878906,y:239.1807460784912,z:23.191204071044922},{x:320.32257080078125,y:267.1292781829834,z:-4.954537749290466},{x:347.64583587646484,y:294.4955062866211,z:-23.062820434570312,name:"lips"},{x:349.28138732910156,y:303.1095886230469,z:-20.238323211669922},{x:338.9453125,y:298.19186210632324,z:-19.456336498260498,name:"lips"},{x:333.36788177490234,y:302.6706790924072,z:-14.776077270507812,name:"lips"},{x:342.89188385009766,y:304.3561363220215,z:-17.752301692962646},{x:337.7375030517578,y:306.0098361968994,z:-13.410515785217285},{x:325.6159210205078,y:316.22995376586914,z:-6.681914925575256},{x:349.0104675292969,y:264.9818515777588,z:-36.274919509887695},{x:347.7138900756836,y:257.5664806365967,z:-37.67549514770508},{x:291.79357528686523,y:218.88171672821045,z:11.578094959259033,name:"rightEyebrow"},{x:332.2689437866211,y:247.56946563720703,z:-3.3730539679527283},{x:332.0074462890625,y:267.1201229095459,z:-19.969879388809204},{x:331.27952575683594,y:263.6967658996582,z:-17.47218608856201},{x:301.04373931884766,y:269.56552505493164,z:3.61815482378006},{x:347.4863815307617,y:249.0706443786621,z:-32.633421421051025},{x:307.26118087768555,y:208.2646894454956,z:1.1591226607561111,name:"rightEyebrow"},{x:297.91919708251953,y:212.22604751586914,z:5.914516448974609,name:"rightEyebrow"},{x:285.1651382446289,y:197.98450469970703,z:36.391637325286865,name:"faceOval"},{x:337.04097747802734,y:211.25229835510254,z:-4.548954665660858},{x:326.5912628173828,y:223.16698551177979,z:6.670243740081787},{x:320.05664825439453,y:309.5834255218506,z:-4.055835008621216},{x:289.6866226196289,y:314.617395401001,z:53.875489234924316,name:"faceOval"},{x:337.4256896972656,y:270.8755302429199,z:-17.67060160636902},{x:343.69922637939453,y:273.0000400543213,z:-18.756048679351807},{x:327.4242401123047,y:309.22399520874023,z:-4.703601002693176,name:"lips"},{x:330.37220001220703,y:308.3323001861572,z:-6.442649960517883},{x:293.87027740478516,y:207.7961826324463,z:9.821539521217346,name:"rightEyebrow"},{x:332.11437225341797,y:271.22812271118164,z:-16.64351224899292},{x:320.1197814941406,y:207.40366458892822,z:-2.48164564371109,name:"rightEyebrow"},{x:318.59575271606445,y:201.07443809509277,z:-3.110446035861969,name:"rightEyebrow"},{x:310.72303771972656,y:175.75075149536133,z:13.328815698623657,name:"faceOval"},{x:289.67578887939453,y:202.29835510253906,z:21.370456218719482},{x:315.30879974365234,y:187.35260009765625,z:5.0304025411605835},{x:287.8936767578125,y:216.54793739318848,z:17.81065821647644,name:"rightEyebrow"},{x:283.9391899108887,y:215.01142501831055,z:32.04984903335571},{x:348.35330963134766,y:299.4155788421631,z:-22.47924566268921},{x:341.1790466308594,y:301.8221855163574,z:-18.977805376052856},{x:335.69713592529297,y:304.4266891479492,z:-14.682706594467163},{x:339.4615173339844,y:272.3654365539551,z:-16.38674020767212},{x:328.99600982666016,y:308.86685371398926,z:-5.616893768310547},{x:332.00313568115234,y:309.1875743865967,z:-10.335084199905396},{x:331.0068130493164,y:307.9274368286133,z:-6.681914925575256,name:"lips"},{x:341.13792419433594,y:266.4876937866211,z:-26.56425952911377},{x:339.02950286865234,y:305.6663703918457,z:-12.33674168586731,name:"lips"},{x:344.22935485839844,y:304.9452781677246,z:-15.161235332489014,name:"lips"},{x:350.1844024658203,y:304.374303817749,z:-17.5305438041687,name:"lips"},{x:348.52630615234375,y:325.9562301635742,z:-16.164982318878174},{x:348.6581802368164,y:317.1624183654785,z:-21.510512828826904,name:"lips"},{x:348.9766311645508,y:312.1923065185547,z:-21.708929538726807},{x:349.2427444458008,y:308.0660820007324,z:-19.643079042434692},{x:349.67491149902344,y:305.42747497558594,z:-18.16080331802368,name:"lips"},{x:337.95589447021484,y:306.6535949707031,z:-12.803598642349243,name:"lips"},{x:337.06878662109375,y:307.63169288635254,z:-14.274203777313232},{x:335.77449798583984,y:309.8449516296387,z:-15.698124170303345},{x:334.6099090576172,y:312.7997016906738,z:-14.764405488967896,name:"lips"},{x:327.2330856323242,y:293.80866050720215,z:-11.864047050476074},{x:280.97679138183594,y:279.79928970336914,z:68.90834331512451,name:"faceOval"},{x:355.13843536376953,y:271.7875671386719,z:-25.350427627563477},{x:334.7235870361328,y:307.4656391143799,z:-9.302158951759338,name:"lips"},{x:333.5293960571289,y:307.89782524108887,z:-10.200862884521484},{x:346.29688262939453,y:276.4256286621094,z:-19.748122692108154},{x:335.16246795654297,y:276.22097969055176,z:-12.313398122787476},{x:345.09132385253906,y:274.7082996368408,z:-19.304605722427368},{x:325.4267883300781,y:252.95130729675293,z:-1.6661019623279572},{x:315.347843170166,y:259.05200958251953,z:-.25604281574487686},{x:330.44933319091797,y:267.7570152282715,z:-14.017432928085327},{x:294.96768951416016,y:185.26001930236816,z:23.903164863586426,name:"faceOval"},{x:299.63531494140625,y:192.7913761138916,z:12.640198469161987},{x:304.5452117919922,y:202.4142837524414,z:3.244667649269104,name:"rightEyebrow"},{x:331.6915512084961,y:320.0467872619629,z:-10.632705688476562},{x:334.5911407470703,y:201.27566814422607,z:-6.133356094360352,name:"rightEyebrow"},{x:331.4815902709961,y:185.44180870056152,z:.6627205014228821},{x:328.05816650390625,y:170.8385467529297,z:7.358860373497009,name:"faceOval"},{x:304.49764251708984,y:239.76297855377197,z:10.387605428695679},{x:290.6382179260254,y:248.85257720947266,z:19.03616428375244},{x:331.5682601928711,y:233.20727348327637,z:7.837390303611755},{x:295.5115509033203,y:228.9834451675415,z:14.41426157951355},{x:336.94332122802734,y:241.8259334564209,z:-5.27842104434967},{x:336.2792205810547,y:262.7049922943115,z:-26.12074375152588},{x:284.4102478027344,y:255.3262710571289,z:25.467140674591064},{x:295.1420593261719,y:253.02655220031738,z:12.430112361907959},{x:303.5196113586426,y:254.20703887939453,z:6.139191389083862},{x:315.73450088500977,y:251.64799690246582,z:3.3788898587226868},{x:324.69661712646484,y:247.56494522094727,z:2.3328344523906708},{x:331.57970428466797,y:243.02241325378418,z:1.1423448473215103},{x:345.6210708618164,y:229.9976634979248,z:-10.825285911560059},{x:286.26644134521484,y:270.37991523742676,z:21.708929538726807},{x:290.2525520324707,y:228.4921360015869,z:17.71728754043579},{x:351.65367126464844,y:269.3400764465332,z:-33.450424671173096},{x:333.1378936767578,y:253.88388633728027,z:-7.230473756790161},{x:277.8318977355957,y:246.95331573486328,z:68.20805549621582,name:"faceOval"},{x:336.6680908203125,y:238.10003757476807,z:.7688578963279724},{x:329.95800018310547,y:269.18323516845703,z:-7.207130789756775},{x:299.17491912841797,y:234.13324356079102,z:15.95489501953125},{x:335.61729431152344,y:258.71752738952637,z:-23.016133308410645},{x:284.1079330444336,y:297.0343494415283,z:63.25934886932373,name:"faceOval"},{x:331.44542694091797,y:230.6892442703247,z:9.92658257484436,name:"rightEye"},{x:341.41536712646484,y:253.01264762878418,z:-29.038610458374023},{x:303.5472869873047,y:327.5896739959717,z:16.725212335586548},{x:304.7756576538086,y:337.4389457702637,z:27.38126277923584,name:"faceOval"},{x:280.80501556396484,y:275.32050132751465,z:45.0752067565918},{x:295.43582916259766,y:318.4501647949219,z:26.2608003616333},{x:281.4303207397461,y:228.7355661392212,z:40.94350814819336},{x:331.2549591064453,y:349.4216537475586,z:-7.376367449760437},{x:352.4247741699219,y:271.7330074310303,z:-24.953596591949463},{x:327.5672912597656,y:260.41900634765625,z:-5.456410646438599},{x:284.5432472229004,y:241.7647933959961,z:29.668869972229004},{x:310,y:235.66174507141113,z:8.502663969993591,name:"rightEye"},{x:315.7071113586426,y:235.7572603225708,z:6.938687562942505,name:"rightEye"},{x:330.41088104248047,y:311.04143142700195,z:-9.325502514839172,name:"lips"},{x:288.5377502441406,y:285.31983375549316,z:21.837315559387207},{x:344.55039978027344,y:359.4300842285156,z:-6.705257892608643,name:"faceOval"},{x:323.41880798339844,y:351.67362213134766,z:7.802375555038452,name:"faceOval"},{x:314.64088439941406,y:346.11894607543945,z:16.36339783668518,name:"faceOval"},{x:349.4945526123047,y:184.8434829711914,z:-.21847527474164963},{x:359.24694061279297,y:359.8348903656006,z:-8.403456211090088,name:"faceOval"},{x:321.26182556152344,y:234.64492321014404,z:6.90950870513916,name:"rightEye"},{x:326.318359375,y:232.90250301361084,z:8.029969334602356,name:"rightEye"},{x:329.6211624145508,y:231.6195774078369,z:9.722331762313843,name:"rightEye"},{x:285.9398078918457,y:228.2351303100586,z:24.650139808654785},{x:325.79288482666016,y:227.88007736206055,z:7.469738721847534,name:"rightEye"},{x:320.1699447631836,y:227.5934886932373,z:6.168370842933655,name:"rightEye"},{x:314.85408782958984,y:227.85282611846924,z:6.2675780057907104,name:"rightEye"},{x:309.3084907531738,y:229.1516876220703,z:7.7031683921813965,name:"rightEye"},{x:305.5621337890625,y:230.92366218566895,z:9.722331762313843,name:"rightEye"},{x:277.8681945800781,y:228.5354232788086,z:59.71122741699219,name:"faceOval"},{x:306.1444664001465,y:235.1954698562622,z:10.603528022766113,name:"rightEye"},{x:355.4478454589844,y:281.96210861206055,z:-20.565123558044434},{x:333.02661895751953,y:288.0105400085449,z:-14.72939133644104},{x:337.15728759765625,y:269.2059516906738,z:-19.8414945602417},{x:345.9898376464844,y:283.5453128814697,z:-20.4834246635437},{x:351.48963928222656,y:219.98916149139404,z:-7.0378947257995605},{x:312.39574432373047,y:336.50628089904785,z:8.671900033950806},{x:321.32152557373047,y:343.1755256652832,z:.9067271649837494},{x:343.78379821777344,y:353.2975959777832,z:-14.355905055999756},{x:296.8791389465332,y:327.91497230529785,z:41.01353645324707,name:"faceOval"},{x:329.6939468383789,y:229.27897453308105,z:8.934508562088013,name:"rightEye"},{x:341.6905212402344,y:241.4073657989502,z:-14.589333534240723},{x:359.03079986572266,y:353.48859786987305,z:-15.803166627883911},{x:333.1861877441406,y:356.43213272094727,z:-1.0234417766332626,name:"faceOval"},{x:283.97483825683594,y:291.4318656921387,z:41.94725513458252},{x:343.33770751953125,y:305.830135345459,z:-15.756480693817139,name:"lips"},{x:342.40283966064453,y:307.7453899383545,z:-17.4021577835083},{x:341.53621673583984,y:311.0595703125,z:-19.047834873199463},{x:340.9107208251953,y:315.4837703704834,z:-18.5576331615448,name:"lips"},{x:339.1478729248047,y:323.42233657836914,z:-14.367576837539673},{x:333.3201599121094,y:307.4406337738037,z:-9.617288708686829},{x:331.2411117553711,y:306.9811820983887,z:-9.669809937477112},{x:329.23255920410156,y:306.0508346557617,z:-9.582273960113525,name:"lips"},{x:322.4586486816406,y:301.33323669433594,z:-7.720675468444824},{x:297.1712112426758,y:286.9552803039551,z:8.240055441856384},{x:341.3060760498047,y:235.4432201385498,z:-7.504753470420837},{x:336.9318389892578,y:224.3451976776123,z:5.829898118972778},{x:332.65323638916016,y:226.70403957366943,z:8.105834126472473},{x:334.67357635498047,y:306.4397621154785,z:-8.981193900108337,name:"lips"},{x:297.4601936340332,y:306.29210472106934,z:15.476365089416504},{x:342.9119110107422,y:222.37077713012695,z:-2.754466235637665},{x:335.4629898071289,y:332.20250129699707,z:-11.823196411132812},{x:353.2412338256836,y:240.56339263916016,z:-27.147831916809082},{x:346.3080596923828,y:236.41446590423584,z:-18.452589511871338},{x:352.6475143432617,y:234.1420555114746,z:-19.748122692108154},{x:337.3209762573242,y:253.39937210083008,z:-16.024924516677856},{x:358.6122131347656,y:344.90861892700195,z:-18.592647314071655},{x:358.1117248535156,y:334.64990615844727,z:-17.49552845954895},{x:346.4450454711914,y:335.0321102142334,z:-16.32838249206543},{x:319.17640686035156,y:320.2833938598633,z:-3.276764452457428},{x:325.2540588378906,y:276.2369728088379,z:-6.460157036781311},{x:326.7214584350586,y:327.3939514160156,z:-7.417217493057251},{x:310.7190132141113,y:277.2265148162842,z:-3.5452082753181458},{x:319.78355407714844,y:284.8238182067871,z:-6.4543211460113525},{x:305.773983001709,y:290.83580017089844,z:.06907138042151928},{x:344.4001770019531,y:344.85408782958984,z:-16.946970224380493},{x:333.1879425048828,y:258.74256134033203,z:-11.90489649772644},{x:313.80598068237305,y:327.08919525146484,z:2.2277912497520447},{x:322.9637908935547,y:334.6819496154785,z:-3.3643004298210144},{x:313.4055519104004,y:311.2166690826416,z:-1.1175429821014404},{x:291.0865783691406,y:298.2831001281738,z:22.467575073242188},{x:305.6580924987793,y:313.3707904815674,z:5.561453700065613},{x:288.23760986328125,y:305.9941864013672,z:36.765122413635254},{x:315.10692596435547,y:296.26991271972656,z:-4.604393839836121},{x:337.50518798828125,y:247.5944423675537,z:-10.597691535949707},{x:338.8450622558594,y:265.47778129577637,z:-27.778091430664062},{x:334.25254821777344,y:269.0671920776367,z:-20.938611030578613},{x:341.64512634277344,y:259.6387195587158,z:-32.189905643463135},{x:331.44081115722656,y:219.0976095199585,z:4.207563698291779},{x:320.56339263916016,y:216.49658203125,z:2.930997312068939},{x:311.21912002563477,y:216.57853603363037,z:2.9674705862998962},{x:303.46256256103516,y:218.54614734649658,z:5.357203483581543},{x:297.99999237060547,y:222.505202293396,z:9.325502514839172},{x:294.93839263916016,y:236.39654159545898,z:18.534289598464966},{x:278.87489318847656,y:259.7095584869385,z:45.68212032318115},{x:300.3782653808594,y:245.38593292236328,z:12.278382778167725},{x:307.06348419189453,y:246.36857986450195,z:8.164191246032715},{x:315.5229187011719,y:245.3949737548828,z:5.503097176551819},{x:323.71395111083984,y:242.75178909301758,z:4.6335723996162415},{x:330.2785873413086,y:239.34658527374268,z:4.937030673027039},{x:334.6982192993164,y:236.0460376739502,z:4.823233783245087},{x:279.3412208557129,y:263.5196113586426,z:70.91583728790283,name:"faceOval"},{x:334.65972900390625,y:271.6648578643799,z:-17.775644063949585},{x:342.05677032470703,y:246.99846267700195,z:-20.84523916244507},{x:344.0357971191406,y:264.5701503753662,z:-32.936880588531494},{x:348.25531005859375,y:268.6645030975342,z:-30.695960521697998},{x:344.12227630615234,y:266.34212493896484,z:-29.808926582336426},{x:337.12318420410156,y:274.2556858062744,z:-15.768152475357056},{x:349.49047088623047,y:269.071683883667,z:-32.51670837402344},{x:350.1683044433594,y:271.4691352844238,z:-24.93025302886963},{x:333.9634704589844,y:230.56639194488525,z:8.89949381351471},{x:338.2147979736328,y:231.4807891845703,z:4.6715047955513},{x:340.4712677001953,y:231.74463272094727,z:-.34996166825294495},{x:303.28975677490234,y:232.24980354309082,z:11.916568279266357,name:"rightEye"},{x:299.4649124145508,y:229.53842639923096,z:12.325069904327393},{x:359.09618377685547,y:241.77349090576172,z:-24.650139808654785},{x:399.46216583251953,y:229.89503860473633,z:15.919880867004395,name:"leftEye"},{x:361.38919830322266,y:269.6129894256592,z:-24.510080814361572},{x:416.9973373413086,y:206.0895538330078,z:53.26857566833496,name:"faceOval"},{x:381.32179260253906,y:235.5476474761963,z:7.6214683055877686},{x:387.8068542480469,y:236.25958442687988,z:8.345099091529846},{x:393.95751953125,y:235.8660364151001,z:10.475142002105713},{x:401.84600830078125,y:232.77019500732422,z:16.760226488113403},{x:375.70568084716797,y:233.48456382751465,z:8.234220147132874},{x:388.17752838134766,y:218.94717693328857,z:6.810300946235657},{x:381.64928436279297,y:219.2656660079956,z:6.711093783378601},{x:394.4760513305664,y:219.66821193695068,z:9.173773527145386},{x:398.8843536376953,y:221.8837022781372,z:12.03328251838684},{x:406.5454864501953,y:237.12156772613525,z:19.7131085395813},{x:383.87447357177734,y:337.6932907104492,z:-8.631049990653992},{x:401.2682342529297,y:228.5916566848755,z:18.359217643737793,name:"leftEye"},{x:422.0449447631836,y:236.73934936523438,z:51.16771221160889},{x:412.69153594970703,y:232.80198097229004,z:27.52131938934326},{x:387.3497772216797,y:263.298397064209,z:-2.8609684109687805},{x:364.5124053955078,y:293.39221000671387,z:-22.397546768188477,name:"lips"},{x:363.62987518310547,y:302.1291446685791,z:-19.643079042434692},{x:373.2334518432617,y:295.8647060394287,z:-18.125789165496826,name:"lips"},{x:378.83365631103516,y:299.5177745819092,z:-13.153743743896484,name:"lips"},{x:369.91477966308594,y:302.5704002380371,z:-16.65518283843994},{x:374.9167251586914,y:303.5416603088379,z:-11.963253021240234},{x:387.58888244628906,y:312.2716999053955,z:-4.680258631706238},{x:360.6635284423828,y:264.31986808776855,z:-35.94811677932739},{x:361.04564666748047,y:256.8225860595703,z:-37.278664112091064},{x:408.3855438232422,y:213.52088928222656,z:15.756480693817139,name:"leftEyebrow"},{x:373.2946014404297,y:245.38101196289062,z:-1.9316278398036957},{x:376.83860778808594,y:264.3721103668213,z:-18.510947227478027},{x:376.9546127319336,y:261.0010528564453,z:-15.989909172058105},{x:406.1498260498047,y:263.5030174255371,z:7.072908878326416},{x:360.07205963134766,y:248.3631706237793,z:-32.16656446456909},{x:393.11119079589844,y:205.10473251342773,z:3.7786373496055603,name:"leftEyebrow"},{x:402.12791442871094,y:207.89000988006592,z:9.383859634399414,name:"leftEyebrow"},{x:410.8693313598633,y:191.6182279586792,z:41.27030849456787,name:"faceOval"},{x:364.9509811401367,y:210.40483474731445,z:-3.758212625980377},{x:375.94444274902344,y:221.1331844329834,z:8.368442058563232},{x:392.1904754638672,y:305.0360298156738,z:-1.752179116010666},{x:419.50225830078125,y:307.25592613220215,z:58.96425247192383,name:"faceOval"},{x:372.0027160644531,y:268.7212657928467,z:-16.631840467453003},{x:366.1614227294922,y:271.6237449645996,z:-18.219159841537476},{x:385.00938415527344,y:305.3863334655762,z:-2.567722797393799},{x:381.99771881103516,y:304.9723720550537,z:-4.575215280056},{x:405.078125,y:203.21216583251953,z:13.713973760604858,name:"leftEyebrow"},{x:377.13207244873047,y:268.4710121154785,z:-15.266278982162476},{x:380.9713363647461,y:205.36980628967285,z:-.7250899076461792,name:"leftEyebrow"},{x:381.7788314819336,y:198.9268398284912,z:-1.184653863310814,name:"leftEyebrow"},{x:385.5204772949219,y:172.1484375,z:16.04826807975769,name:"faceOval"},{x:407.94189453125,y:196.76236152648926,z:25.723915100097656},{x:383.03890228271484,y:184.5157527923584,z:7.393874526023865},{x:411.61781311035156,y:210.79241752624512,z:22.315845489501953,name:"leftEyebrow"},{x:414.30870056152344,y:208.4643030166626,z:37.021894454956055},{x:364.28722381591797,y:298.35777282714844,z:-21.86065673828125},{x:371.3682556152344,y:299.78848457336426,z:-17.834001779556274},{x:376.88201904296875,y:301.6696071624756,z:-13.153743743896484},{x:370.2193832397461,y:270.49095153808594,z:-15.569736957550049},{x:383.5081100463867,y:305.2726364135742,z:-3.673594295978546},{x:380.73760986328125,y:305.96869468688965,z:-8.660228252410889},{x:381.2334442138672,y:304.63574409484863,z:-4.820316135883331,name:"lips"},{x:368.1698989868164,y:264.8884963989258,z:-25.653886795043945},{x:373.5087203979492,y:303.4233856201172,z:-10.95950722694397,name:"lips"},{x:368.4544372558594,y:303.29601287841797,z:-14.169161319732666,name:"lips"},{x:362.76554107666016,y:303.5735607147217,z:-16.911956071853638,name:"lips"},{x:366.60980224609375,y:324.8870658874512,z:-15.616422891616821},{x:365.7067108154297,y:315.95678329467773,z:-20.903596878051758,name:"lips"},{x:365.0083923339844,y:311.2232208251953,z:-21.066999435424805},{x:364.1508102416992,y:307.0583438873291,z:-18.907777070999146},{x:363.37512969970703,y:304.5721435546875,z:-17.42550015449524,name:"lips"},{x:374.580078125,y:304.3059539794922,z:-11.40302300453186,name:"lips"},{x:375.55362701416016,y:305.0998020172119,z:-12.861957550048828},{x:377.2437286376953,y:307.1674346923828,z:-14.215847253799438},{x:378.68587493896484,y:309.9015712738037,z:-13.223772048950195,name:"lips"},{x:383.8992691040039,y:290.29629707336426,z:-9.97326910495758},{x:423.3871841430664,y:271.91688537597656,z:74.37058925628662,name:"faceOval"},{x:377.68043518066406,y:304.62209701538086,z:-7.603961229324341,name:"lips"},{x:379.00428771972656,y:304.9314594268799,z:-8.57852816581726},{x:364.00279998779297,y:275.2813911437988,z:-19.25792098045349},{x:374.68231201171875,y:273.82555961608887,z:-11.28047227859497},{x:365.0354766845703,y:273.4548568725586,z:-18.791062831878662},{x:380.61901092529297,y:249.8848056793213,z:.15501167625188828},{x:391.14158630371094,y:254.7934627532959,z:2.0906515419483185},{x:378.1761169433594,y:264.9612236022949,z:-12.605184316635132},{x:400.9540557861328,y:179.99592304229736,z:27.82477855682373,name:"faceOval"},{x:398.0038833618164,y:188.50656509399414,z:16.094952821731567},{x:394.8717498779297,y:199.0359592437744,z:6.226727366447449,name:"leftEyebrow"},{x:382.10926055908203,y:316.83926582336426,z:-8.946179747581482},{x:366.51588439941406,y:200.32583713531494,z:-5.24632453918457,name:"leftEyebrow"},{x:367.4893569946289,y:183.87210845947266,z:1.9039081037044525},{x:368.6243438720703,y:168.8127565383911,z:8.736093044281006,name:"faceOval"},{x:398.96175384521484,y:234.9675178527832,z:13.713973760604858},{x:412.9645538330078,y:242.23042488098145,z:23.272905349731445},{x:372.05257415771484,y:231.41919136047363,z:9.226294755935669},{x:406.0722351074219,y:223.58965873718262,z:18.370890617370605},{x:368.27442169189453,y:240.2039337158203,z:-4.166713654994965},{x:372.3575210571289,y:260.66442489624023,z:-24.976940155029297},{x:419.2244338989258,y:247.9079246520996,z:30.299127101898193},{x:409.43885803222656,y:246.60913467407227,z:16.398411989212036},{x:401.69139862060547,y:248.76328468322754,z:9.395531415939331},{x:389.7608184814453,y:247.56915092468262,z:5.841569304466248},{x:380.5461883544922,y:244.55984115600586,z:4.263003468513489},{x:373.25817108154297,y:240.80214500427246,z:2.5356262922286987},{x:358.77086639404297,y:229.35615062713623,z:-10.387605428695679},{x:419.5793914794922,y:262.8478717803955,z:26.5175724029541},{x:410.8808898925781,y:222.51372814178467,z:22.199130058288574},{x:358.45714569091797,y:268.91467094421387,z:-33.17030906677246},{x:373.4129333496094,y:251.6385841369629,z:-5.771540403366089},{x:422.5408172607422,y:239.23919677734375,z:74.04378890991211,name:"faceOval"},{x:367.8171920776367,y:236.58040523529053,z:1.820748895406723},{x:378.51959228515625,y:266.2532329559326,z:-5.74819803237915},{x:403.3472442626953,y:229.05112266540527,z:19.689764976501465},{x:372.34840393066406,y:256.6451168060303,z:-21.872329711914062},{x:422.54566192626953,y:289.1587829589844,z:68.67491245269775,name:"faceOval"},{x:371.9297409057617,y:228.90116214752197,z:11.432201862335205,name:"leftEye"},{x:366.21360778808594,y:251.6158962249756,z:-28.19826364517212},{x:409.1571807861328,y:321.3156223297119,z:20.2266526222229},{x:408.52943420410156,y:331.44238471984863,z:31.09278917312622,name:"faceOval"},{x:424.2788314819336,y:267.1992301940918,z:50.467424392700195},{x:415.60352325439453,y:311.6528606414795,z:30.579242706298828},{x:418.12793731689453,y:221.59927368164062,z:46.26569747924805},{x:385.68286895751953,y:346.0184955596924,z:-5.70151150226593},{x:357.82936096191406,y:271.3758373260498,z:-24.836881160736084},{x:379.588623046875,y:257.5071716308594,z:-3.755294680595398},{x:417.4592590332031,y:234.71948146820068,z:34.5475435256958},{x:393.4684371948242,y:231.58967971801758,z:11.408859491348267,name:"leftEye"},{x:387.8864288330078,y:232.14245796203613,z:9.51808214187622,name:"leftEye"},{x:382.4981689453125,y:307.5654888153076,z:-7.522260546684265,name:"lips"},{x:419.00169372558594,y:277.8332805633545,z:26.424202919006348},{x:373.62953186035156,y:357.6375102996826,z:-5.75986921787262,name:"faceOval"},{x:392.8708267211914,y:347.72446632385254,z:10.154176950454712,name:"faceOval"},{x:400.3953552246094,y:341.0005187988281,z:19.39797878265381,name:"faceOval"},{x:382.25440979003906,y:231.66935920715332,z:8.998700976371765,name:"leftEye"},{x:377.14550018310547,y:230.4228687286377,z:9.804032444953918,name:"leftEye"},{x:373.8358688354492,y:229.64950561523438,z:11.292144060134888,name:"leftEye"},{x:414.5794677734375,y:221.67891025543213,z:29.412097930908203},{x:377.00672149658203,y:225.66201210021973,z:9.360517263412476,name:"leftEye"},{x:382.29530334472656,y:224.8431158065796,z:8.32175612449646,name:"leftEye"},{x:387.5133514404297,y:224.49507236480713,z:8.917000889778137,name:"leftEye"},{x:393.15906524658203,y:225.24795055389404,z:10.737749338150024,name:"leftEye"},{x:397.05554962158203,y:226.55359268188477,z:13.002015352249146,name:"leftEye"},{x:420.5299377441406,y:221.014666557312,z:65.40690422058105,name:"faceOval"},{x:397.06920623779297,y:230.6661558151245,z:13.807345628738403,name:"leftEye"},{x:377.94647216796875,y:285.1647090911865,z:-13.305472135543823},{x:372.1118927001953,y:267.1267318725586,z:-18.83774757385254},{x:364.9968719482422,y:282.24411964416504,z:-19.818150997161865},{x:401.973876953125,y:331.20131492614746,z:11.566424369812012},{x:394.3083190917969,y:338.86693954467773,z:3.142542541027069},{x:373.9820861816406,y:351.4504623413086,z:-13.50388765335083},{x:414.3888854980469,y:321.24735832214355,z:45.51872253417969,name:"faceOval"},{x:373.44234466552734,y:227.33163356781006,z:10.626870393753052,name:"leftEye"},{x:364.0731430053711,y:240.31539916992188,z:-13.807345628738403},{x:384.2658233642578,y:353.3793067932129,z:.7385850697755814,name:"faceOval"},{x:423.20526123046875,y:283.5176181793213,z:47.152724266052246},{x:369.42798614501953,y:304.0898895263672,z:-14.647691249847412,name:"lips"},{x:370.63812255859375,y:305.90051651000977,z:-16.211668252944946},{x:371.91192626953125,y:309.0167713165283,z:-17.84567356109619},{x:373.0583953857422,y:313.3545398712158,z:-17.378815412521362,name:"lips"},{x:375.39905548095703,y:321.09289169311523,z:-13.118728399276733},{x:379.2567825317383,y:304.3582534790039,z:-7.924926280975342},{x:381.18797302246094,y:303.7031364440918,z:-7.843226194381714},{x:383.0918502807617,y:302.4884605407715,z:-7.6506465673446655,name:"lips"},{x:389.09461975097656,y:297.1475315093994,z:-5.5497825145721436},{x:411.6408920288086,y:280.24898529052734,z:12.02161192893982},{x:363.3110809326172,y:234.27620887756348,z:-6.775286793708801},{x:366.0474395751953,y:223.29872131347656,z:6.827808618545532},{x:370.34427642822266,y:225.1457118988037,z:9.558931589126587},{x:377.5371551513672,y:303.60079765319824,z:-7.358860373497009,name:"lips"},{x:412.9557800292969,y:299.53579902648926,z:19.39797878265381},{x:360.0810241699219,y:221.72012329101562,z:-2.153385728597641},{x:379.82784271240234,y:329.47723388671875,z:-10.48097848892212},{x:359.08477783203125,y:235.7911491394043,z:-18.079102039337158},{x:369.6688461303711,y:251.5407943725586,z:-14.962821006774902},{x:369.5555114746094,y:333.5307312011719,z:-15.67478060722351},{x:394.0193176269531,y:315.6973171234131,z:-.9920747578144073},{x:383.78997802734375,y:272.7268695831299,z:-4.689012169837952},{x:387.67765045166016,y:323.6722755432129,z:-5.640236139297485},{x:397.8769302368164,y:272.1331214904785,z:-.9395531564950943},{x:389.87476348876953,y:280.5630111694336,z:-4.29218202829361},{x:403.83888244628906,y:285.1167869567871,z:3.0229100584983826},{x:372.5467300415039,y:343.1070327758789,z:-16.153310537338257},{x:374.1112518310547,y:256.3721466064453,z:-10.574349164962769},{x:399.73785400390625,y:321.77515983581543,z:4.849494695663452},{x:392.03365325927734,y:330.56447982788086,z:-1.3407598435878754},{x:398.59134674072266,y:305.93902587890625,z:1.517290621995926},{x:417.95997619628906,y:290.9716987609863,z:26.89105987548828},{x:406.04541778564453,y:307.35154151916504,z:8.666064143180847},{x:420.75328826904297,y:298.40752601623535,z:41.78385257720947},{x:395.4522705078125,y:291.4153575897217,z:-2.1752697229385376},{x:368.6452102661133,y:245.8882999420166,z:-9.453888535499573},{x:370.34900665283203,y:263.56690406799316,z:-26.75100326538086},{x:374.98477935791016,y:266.6126346588135,z:-19.77146625518799},{x:366.99840545654297,y:258.12140464782715,z:-31.372904777526855},{x:371.00616455078125,y:217.63479709625244,z:5.60522198677063},{x:381.30577087402344,y:214.14087295532227,z:4.983716309070587},{x:390.1496124267578,y:213.38221549987793,z:5.593550801277161},{x:397.7696990966797,y:214.3659782409668,z:8.57852816581726},{x:403.1652069091797,y:217.65509605407715,z:13.013685941696167},{x:407.3551940917969,y:230.72525024414062,z:22.444231510162354},{x:424.0876770019531,y:251.7839241027832,z:51.16771221160889},{x:403.50196838378906,y:239.88757610321045,z:15.803166627883911},{x:397.31719970703125,y:241.49806022644043,z:11.233787536621094},{x:388.99425506591797,y:241.4366912841797,z:7.948269248008728},{x:380.7804489135742,y:239.78078842163086,z:6.600214838981628},{x:374.01336669921875,y:237.11946487426758,z:6.349278092384338},{x:369.39125061035156,y:234.35351371765137,z:5.987462401390076},{x:422.9730987548828,y:255.76455116271973,z:76.61150932312012,name:"faceOval"},{x:374.73915100097656,y:269.24214363098145,z:-16.608498096466064},{x:364.61681365966797,y:245.71088790893555,z:-20.02823829650879},{x:365.3834533691406,y:263.34174156188965,z:-32.32996463775635},{x:361.58252716064453,y:267.8273677825928,z:-30.345816612243652},{x:365.37208557128906,y:265.0249671936035,z:-29.178667068481445},{x:372.72605895996094,y:272.05135345458984,z:-14.834434986114502},{x:360.48614501953125,y:268.34827423095703,z:-32.189905643463135},{x:359.9516296386719,y:270.8049201965332,z:-24.650139808654785},{x:369.5049285888672,y:229.01945114135742,z:10.107489824295044},{x:365.5447769165039,y:230.24096488952637,z:5.593550801277161},{x:363.50669860839844,y:230.6208372116089,z:.43622106313705444},{x:399.3529510498047,y:227.65677452087402,z:15.35965085029602,name:"leftEye"},{x:402.5693130493164,y:224.60190296173096,z:15.931552648544312}],box:{xMin:277.8318977355957,yMin:168.7741756439209,xMax:424.2788314819336,yMax:359.8348903656006,width:146.4469337463379,height:191.0607147216797}},SAMPLE_FACELANDMARKER_RESULT:{faceLandmarks:[[{x:.5760777592658997,y:.8639070391654968,z:-.030997956171631813},{x:.572094738483429,y:.7886289358139038,z:-.07189624011516571},{x:.5723551511764526,y:.8075382709503174,z:-.03578168898820877},{x:.5548420548439026,y:.7188365459442139,z:-.057787876576185226},{x:.5706077814102173,y:.7674974799156189,z:-.07740399986505508},{x:.5681378245353699,y:.7387768030166626,z:-.07356284558773041},{x:.5621535181999207,y:.6681165099143982,z:-.04189874976873398},{x:.46613582968711853,y:.6679812073707581,z:.011289681307971478},{x:.5579932928085327,y:.6174106597900391,z:-.03502821549773216},{x:.5563451647758484,y:.5905600190162659,z:-.03928658738732338},{x:.5487832427024841,y:.4900572597980499,z:-.029898937791585922},{x:.5765544176101685,y:.8692144751548767,z:-.02831427752971649},{x:.5771114230155945,y:.873644232749939,z:-.02345779910683632},{x:.5771905779838562,y:.877016007900238,z:-.016658689826726913},{x:.5778058767318726,y:.8770116567611694,z:-.014505492523312569},{x:.5783766508102417,y:.8835000991821289,z:-.015996402129530907},{x:.5792440176010132,y:.8913810849189758,z:-.01924579218029976},{x:.5796768069267273,y:.8996334671974182,z:-.018261712044477463},{x:.5817288160324097,y:.9255813956260681,z:-.007126849144697189},{x:.5726592540740967,y:.7992473244667053,z:-.0643521398305893},{x:.5579419136047363,y:.7996989488601685,z:-.04566684365272522},{x:.4216199815273285,y:.5958762764930725,z:.06776496022939682},{x:.5052269697189331,y:.6796539425849915,z:-.0010737782577052712},{x:.49243026971817017,y:.6838865876197815,z:-.0005227324436418712},{x:.4796970784664154,y:.6856290102005005,z:.002684245817363262},{x:.4618356227874756,y:.6764569878578186,z:.013439622707664967},{x:.5160380601882935,y:.6737282276153564,z:-17607348127057776e-21},{x:.48070961236953735,y:.6255870461463928,z:-.008339674212038517},{x:.49719780683517456,y:.6256808042526245,z:-.008027955889701843},{x:.46674346923828125,y:.6317623853683472,z:-.004460199736058712},{x:.4582492709159851,y:.641118049621582,z:.0011905613355338573},{x:.45408669114112854,y:.6911458969116211,z:.020514748990535736},{x:.535312294960022,y:.9619986414909363,z:.012499462813138962},{x:.4608460068702698,y:.6628725528717041,z:.01517564244568348},{x:.4206731915473938,y:.6828458309173584,z:.07848648726940155},{x:.4390624463558197,y:.6796106696128845,z:.03283142298460007},{x:.5029968619346619,y:.7701570391654968,z:-.009734481573104858},{x:.5595027208328247,y:.8607323169708252,z:-.030043255537748337},{x:.5621269941329956,y:.8738374710083008,z:-.021709579974412918},{x:.5451499819755554,y:.865527331829071,z:-.022014077752828598},{x:.5351184010505676,y:.8705098032951355,z:-.011602800339460373},{x:.5495014190673828,y:.8744956254959106,z:-.016490943729877472},{x:.5395170450210571,y:.8759440779685974,z:-.007333362940698862},{x:.5183624029159546,y:.8959754705429077,z:.010520773939788342},{x:.5604349374771118,y:.7895449995994568,z:-.07082037627696991},{x:.557381272315979,y:.7687489986419678,z:-.07590588927268982},{x:.4432901442050934,y:.6308897733688354,z:.0027153254486620426},{x:.5258325338363647,y:.7151225805282593,z:-.014676518738269806},{x:.5271827578544617,y:.7833116054534912,z:-.037643320858478546},{x:.5257382988929749,y:.7717816233634949,z:-.03401920944452286},{x:.46516409516334534,y:.7705106735229492,z:.0065747760236263275},{x:.5558893084526062,y:.7420997619628906,z:-.0694495290517807},{x:.4720408320426941,y:.6066038608551025,z:-.021204356104135513},{x:.45432573556900024,y:.6158540844917297,z:-.011054684408009052},{x:.4305151402950287,y:.5608053803443909,z:.0396830290555954},{x:.5310865640640259,y:.6157484650611877,z:-.03081176057457924},{x:.5114666223526001,y:.6329749226570129,z:-.00335998204536736},{x:.506435751914978,y:.8786543607711792,z:.012980876490473747},{x:.4480472207069397,y:.8640613555908203,z:.12569651007652283},{x:.5372058153152466,y:.7942581176757812,z:-.03168361634016037},{x:.5488379597663879,y:.8001630306243896,z:-.03280917927622795},{x:.5213388204574585,y:.8794381618499756,z:.011892606504261494},{x:.5242055654525757,y:.8789222240447998,z:.008370225317776203},{x:.4477175176143646,y:.6039950251579285,z:-.0050799972377717495},{x:.526964008808136,y:.7916748523712158,z:-.02968614175915718},{x:.4971255660057068,y:.6050706505775452,z:-.028175678104162216},{x:.4938119053840637,y:.5882453918457031,z:-.03210941329598427},{x:.4757143557071686,y:.5094879865646362,z:-.01300730835646391},{x:.43947282433509827,y:.5816648006439209,z:.01415177434682846},{x:.485664039850235,y:.5477864146232605,z:-.023685332387685776},{x:.43635931611061096,y:.6226438283920288,z:.013606148771941662},{x:.42910251021385193,y:.6102726459503174,z:.03926564007997513},{x:.5605402588844299,y:.8680099248886108,z:-.027318159118294716},{x:.5474816560745239,y:.8702861070632935,z:-.019686367362737656},{x:.5373021364212036,y:.8728838562965393,z:-.010484928265213966},{x:.540735125541687,y:.7979167103767395,z:-.029073253273963928},{x:.5228585004806519,y:.87913578748703,z:.009915109723806381},{x:.530497670173645,y:.8815253973007202,z:.0020524784922599792},{x:.5259912610054016,y:.8790552616119385,z:.007895970717072487},{x:.5433906316757202,y:.7882310748100281,z:-.05121905356645584},{x:.541388213634491,y:.8777219653129578,z:-.00466804439201951},{x:.5515822172164917,y:.8767023086547852,z:-.010475946590304375},{x:.5637003779411316,y:.877059817314148,z:-.015273625031113625},{x:.5640299320220947,y:.9263423085212708,z:-.00658724969252944},{x:.5642300248146057,y:.8993074893951416,z:-.017653480172157288},{x:.5637336373329163,y:.8910360932350159,z:-.01852807030081749},{x:.5637134313583374,y:.8837276697158813,z:-.01482592523097992},{x:.564205527305603,y:.8768964409828186,z:-.01331155002117157},{x:.5419867634773254,y:.8778373599052429,z:-.0037720394320786},{x:.5404468774795532,y:.880696177482605,z:-.005610354244709015},{x:.5392338633537292,y:.8845721483230591,z:-.007352025713771582},{x:.538469672203064,y:.8891173601150513,z:-.005154991988092661},{x:.5189250111579895,y:.8452741503715515,z:-.009755070321261883},{x:.4258975088596344,y:.7662280797958374,z:.1387351155281067},{x:.5725725293159485,y:.8041572570800781,z:-.04583907872438431},{x:.5342061519622803,y:.8785833120346069,z:.002659974154084921},{x:.5324031114578247,y:.8804071545600891,z:.0017832003068178892},{x:.5538818836212158,y:.8078407645225525,z:-.03254539892077446},{x:.5325431823730469,y:.8026832938194275,z:-.019140373915433884},{x:.5514076948165894,y:.8043903112411499,z:-.03313535451889038},{x:.5131856203079224,y:.7284771800041199,z:-.009399853646755219},{x:.49331504106521606,y:.7443980574607849,z:-.005225230939686298},{x:.5239617824554443,y:.7807451486587524,z:-.025881027802824974},{x:.4473606050014496,y:.5315827131271362,z:.011164786294102669},{x:.45718759298324585,y:.5604941248893738,z:-.005943301599472761},{x:.4670005738735199,y:.5909327268600464,z:-.019681761041283607},{x:.5311570167541504,y:.9076261520385742,z:.00389476353302598},{x:.5249923467636108,y:.5893563628196716,z:-.037981919944286346},{x:.5166932344436646,y:.5429551005363464,z:-.03319704160094261},{x:.5085030198097229,y:.49676206707954407,z:-.02691275253891945},{x:.4687720239162445,y:.6834565997123718,z:.008113506250083447},{x:.4426414966583252,y:.7069531679153442,z:.028577271848917007},{x:.5230373740196228,y:.6675713658332825,z:.001773772411979735},{x:.4481240212917328,y:.6527872085571289,z:.012414850294589996},{x:.5339856743812561,y:.7012367844581604,z:-.020220188423991203},{x:.5347223281860352,y:.7761190533638,z:-.05141595005989075},{x:.4315067231655121,y:.7211957573890686,z:.04381405934691429},{x:.45203351974487305,y:.7206180095672607,z:.017288070172071457},{x:.46892452239990234,y:.7265436053276062,z:.005602988880127668},{x:.49314674735069275,y:.7202282547950745,z:-.0006408205372281373},{x:.5104925632476807,y:.7091827392578125,z:-.00362918758764863},{x:.5232142210006714,y:.698553740978241,z:-.00787867046892643},{x:.5497883558273315,y:.6743605136871338,z:-.036349106580019},{x:.43658503890037537,y:.7627100348472595,z:.042555369436740875},{x:.4397648870944977,y:.6528646349906921,z:.017956094816327095},{x:.5653332471847534,y:.7992802858352661,z:-.06365057826042175},{x:.5285563468933105,y:.736810564994812,z:-.018836988136172295},{x:.4180678725242615,y:.6792560815811157,z:.12284679710865021},{x:.5328429937362671,y:.6865872144699097,z:-.010484723374247551},{x:.5230283141136169,y:.7809416055679321,z:-.011922398582100868},{x:.4551771283149719,y:.6650775074958801,z:.01774493046104908},{x:.5337203741073608,y:.7618928551673889,z:-.04697106033563614},{x:.43463975191116333,y:.8133478164672852,z:.1354849934577942},{x:.5225707292556763,y:.6605283617973328,z:.004980515688657761},{x:.5441933870315552,y:.7497199773788452,z:-.06091512367129326},{x:.4774007797241211,y:.9159183502197266,z:.059622734785079956},{x:.48068761825561523,y:.9364941716194153,z:.08404944837093353},{x:.4268292486667633,y:.7657528519630432,z:.09051097184419632},{x:.46051913499832153,y:.8880485892295837,z:.0738474428653717},{x:.4243420660495758,y:.6434382200241089,z:.06230505183339119},{x:.5342157483100891,y:.9835634231567383,z:.021662971004843712},{x:.5668109655380249,y:.8042187094688416,z:-.044937074184417725},{x:.5176341533660889,y:.7530587315559387,z:-.012967454269528389},{x:.430206298828125,y:.6835605502128601,z:.04612284153699875},{x:.4794231951236725,y:.6732114553451538,z:.003970044665038586},{x:.49073347449302673,y:.6722435355186462,z:.0008692514384165406},{x:.5294116139411926,y:.884677529335022,z:.004413890186697245},{x:.4430122375488281,y:.80235356092453,z:.04987282305955887},{x:.5603825449943542,y:1.0092442035675049,z:.026417359709739685},{x:.5186598300933838,y:.9828659892082214,z:.0513598807156086},{x:.5010536909103394,y:.9640932679176331,z:.06591596454381943},{x:.5524769425392151,y:.539441704750061,z:-.035816047340631485},{x:.5879997611045837,y:1.0091472864151,z:.02285068854689598},{x:.5016193985939026,y:.6684437990188599,z:.00028415941051207483},{x:.511952817440033,y:.6642197370529175,z:.0021144719794392586},{x:.5194343328475952,y:.6623469591140747,z:.004674181342124939},{x:.4321230351924896,y:.6496355533599854,z:.03124697133898735},{x:.508686363697052,y:.6479565501213074,z:-.00044765998609364033},{x:.4963986277580261,y:.6431032419204712,z:-.0032507688738405704},{x:.4845542013645172,y:.6430778503417969,z:-.002903624437749386},{x:.4733612537384033,y:.647506833076477,z:.00023347247042693198},{x:.4668654501438141,y:.653346598148346,z:.004762572236359119},{x:.41815051436424255,y:.633708119392395,z:.09809435904026031},{x:.47159942984580994,y:.6711485385894775,z:.007849935442209244},{x:.5734396576881409,y:.8256140351295471,z:-.03155219927430153},{x:.5306524038314819,y:.8337990641593933,z:-.018351426348090172},{x:.5371729135513306,y:.7910830974578857,z:-.037286680191755295},{x:.5549534559249878,y:.8275275826454163,z:-.030664825811982155},{x:.5597432255744934,y:.6418541669845581,z:-.03318847343325615},{x:.4958484172821045,y:.9429569244384766,z:.048340678215026855},{x:.5140507817268372,y:.9634028077125549,z:.03589847311377525},{x:.5587693452835083,y:.9951097369194031,z:.00908728688955307},{x:.46411189436912537,y:.9051855206489563,z:.10601935535669327},{x:.5181609392166138,y:.6554316878318787,z:.002546071307733655},{x:.5436590909957886,y:.7085841298103333,z:-.03844436630606651},{x:.5872187614440918,y:.9960382580757141,z:.0063423276878893375},{x:.5379653573036194,y:.9989125728607178,z:.03636329993605614},{x:.4350326955318451,y:.8088565468788147,z:.09147704392671585},{x:.5523084998130798,y:.8773422837257385,z:-.009068487212061882},{x:.5510149598121643,y:.8816931843757629,z:-.011043853126466274},{x:.5503793954849243,y:.88776695728302,z:-.01348799467086792},{x:.5501549243927002,y:.8954370617866516,z:-.012142189778387547},{x:.546072781085968,y:.9192524552345276,z:-.003157563041895628},{x:.5314661860466003,y:.8771666884422302,z:.0005075141089037061},{x:.5293324589729309,y:.8762547969818115,z:.00039177737198770046},{x:.5275698900222778,y:.8750609755516052,z:47732755774632096e-21},{x:.5104271173477173,y:.8607332110404968,z:.0012934643309563398},{x:.45938700437545776,y:.8134918212890625,z:.023569690063595772},{x:.5418947339057922,y:.6864100694656372,z:-.027333909645676613},{x:.531914234161377,y:.6456130743026733,z:-.005434140563011169},{x:.523697018623352,y:.647885262966156,z:-.0002466466394253075},{x:.5338191390037537,y:.8783687353134155,z:.002268768846988678},{x:.46226605772972107,y:.8610277771949768,z:.04718952998518944},{x:.5434442758560181,y:.6456181406974792,z:-.02327350154519081},{x:.5399754643440247,y:.940219521522522,z:.005075343884527683},{x:.5661457777023315,y:.71457839012146,z:-.06242101639509201},{x:.5523148775100708,y:.6974870562553406,z:-.04863070324063301},{x:.5639959573745728,y:.6923378109931946,z:-.05180761218070984},{x:.5367592573165894,y:.7423217296600342,z:-.03623027727007866},{x:.5853689908981323,y:.9752064943313599,z:-.002361974213272333},{x:.5835235118865967,y:.9493685960769653,z:-.003941743168979883},{x:.5615018606185913,y:.949194610118866,z:-.0015953965485095978},{x:.5068561434745789,y:.9048219323158264,z:.01862684078514576},{x:.5134067535400391,y:.7971825003623962,z:-.008485661819577217},{x:.5223897099494934,y:.925589919090271,z:.01249657291918993},{x:.48500555753707886,y:.7959478497505188,z:-.0032065745908766985},{x:.5037734508514404,y:.8184596300125122,z:-.004932103678584099},{x:.4766361117362976,y:.828806459903717,z:.01027688942849636},{x:.5589827299118042,y:.974656343460083,z:.0009666886180639267},{x:.5294582843780518,y:.7541216611862183,z:-.025603046640753746},{x:.4973002076148987,y:.9208990931510925,z:.031931452453136444},{x:.5163551568984985,y:.9432790875434875,z:.024321340024471283},{x:.49399662017822266,y:.8814862370491028,z:.018687399104237556},{x:.44948166608810425,y:.836137592792511,z:.05702034756541252},{x:.47898444533348083,y:.8836610913276672,z:.03150695189833641},{x:.4454479217529297,y:.8499438166618347,z:.08868525922298431},{x:.49572959542274475,y:.8452823758125305,z:.0036111653316766024},{x:.5362502336502075,y:.7222585678100586,z:-.027912352234125137},{x:.5393770337104797,y:.7850722074508667,z:-.05415399745106697},{x:.531399667263031,y:.7898418307304382,z:-.03883346915245056},{x:.5451627373695374,y:.7717036604881287,z:-.06480253487825394},{x:.5206395983695984,y:.6287745833396912,z:-.010521138086915016},{x:.4974782466888428,y:.6191938519477844,z:-.014098240062594414},{x:.4774145185947418,y:.6193130612373352,z:-.013643337413668633},{x:.4616098403930664,y:.6259890198707581,z:-.008448202162981033},{x:.4516478478908539,y:.6368461847305298,z:9050309745362028e-20},{x:.4485096037387848,y:.6719120740890503,z:.022984720766544342},{x:.42177659273147583,y:.7240667343139648,z:.08511673659086227},{x:.4616215229034424,y:.6988231539726257,z:.014238474890589714},{x:.4755798876285553,y:.7034608721733093,z:.00625590980052948},{x:.4924992024898529,y:.7005885243415833,z:.0009391739731654525},{x:.5082254409790039,y:.693384051322937,z:-.0009464038303121924},{x:.5203112959861755,y:.6849707961082458,z:-.0022114769089967012},{x:.52867591381073,y:.6779075860977173,z:-.002962538506835699},{x:.4213953912258148,y:.7219811677932739,z:.1350894570350647},{x:.5320829749107361,y:.794858992099762,z:-.03181503340601921},{x:.5452795028686523,y:.7286570072174072,z:-.04771539941430092},{x:.5496407747268677,y:.7866933345794678,z:-.06452003121376038},{x:.557040274143219,y:.7962084412574768,z:-.05837344378232956},{x:.549176812171936,y:.7895247936248779,z:-.057761140167713165},{x:.5362890362739563,y:.8005836606025696,z:-.026903774589300156},{x:.560200035572052,y:.7983731031417847,z:-.06172555685043335},{x:.5616944432258606,y:.8022753596305847,z:-.045200999826192856},{x:.5273328423500061,y:.6611284017562866,z:.0029021520167589188},{x:.534850537776947,y:.6660012006759644,z:-.005215510260313749},{x:.5394860506057739,y:.6701375246047974,z:-.014931917190551758},{x:.4634307324886322,y:.658291757106781,z:.009295716881752014},{x:.4538393020629883,y:.6519932150840759,z:.00930330716073513},{x:.5776031613349915,y:.7159298658370972,z:-.057365912944078445},{x:.6504855155944824,y:.6461779475212097,z:.014184834435582161},{x:.5860154032707214,y:.7962266206741333,z:-.04522843658924103},{x:.6842049360275269,y:.5631637573242188,z:.07207967340946198},{x:.6152560710906982,y:.6674962639808655,z:.0007529259892180562},{x:.6280948519706726,y:.6684326529502869,z:.0016892586136236787},{x:.6408625245094299,y:.6663892269134521,z:.005331226624548435},{x:.6557814478874207,y:.6534678936004639,z:.01646413467824459},{x:.6035663485527039,y:.6639701724052429,z:.0013799630105495453},{x:.6329053044319153,y:.608010470867157,z:-.006195899099111557},{x:.6167260408401489,y:.6117533445358276,z:-.006319951266050339},{x:.6471013426780701,y:.6112449765205383,z:-.0017843559617176652},{x:.6560901999473572,y:.6185776591300964,z:.004047257360070944},{x:.6666946411132812,y:.6651176810264587,z:.023647578433156013},{x:.6311345100402832,y:.9495396018028259,z:.014004078693687916},{x:.6544655561447144,y:.6397901773452759,z:.01809609681367874},{x:.6965808868408203,y:.6482675075531006,z:.08304904401302338},{x:.679817259311676,y:.650188148021698,z:.03632688894867897},{x:.6336516737937927,y:.7541458010673523,z:-.007742783520370722},{x:.5921701192855835,y:.8567668199539185,z:-.029399123042821884},{x:.591663658618927,y:.870215654373169,z:-.02103729173541069},{x:.6068367958068848,y:.8584195375442505,z:-.020668085664510727},{x:.6176617741584778,y:.860965371131897,z:-.009790095500648022},{x:.6040634512901306,y:.8686612844467163,z:-.015289564616978168},{x:.6143736839294434,y:.8671170473098755,z:-.005712216719985008},{x:.6373105049133301,y:.8815656900405884,z:.012672550976276398},{x:.5832505822181702,y:.7866312861442566,z:-.07051534950733185},{x:.5836675763130188,y:.7658692598342896,z:-.07566110789775848},{x:.6709531545639038,y:.604898989200592,z:.005951565690338612},{x:.6029891967773438,y:.705652117729187,z:-.013388276100158691},{x:.6131622195243835,y:.7728396058082581,z:-.036248479038476944},{x:.6123163104057312,y:.7612020373344421,z:-.03264721855521202},{x:.6696187853813171,y:.744706928730011,z:.009673702530562878},{x:.5803102254867554,y:.7385968565940857,z:-.0689152330160141},{x:.6404349207878113,y:.5877999663352966,z:-.01929756999015808},{x:.6588467955589294,y:.5929454565048218,z:-.008487257175147533},{x:.6720337867736816,y:.530631422996521,z:.043437421321868896},{x:.584305465221405,y:.6099005341529846,z:-.030301367864012718},{x:.6034283638000488,y:.6217452883720398,z:-.001970183802768588},{x:.6460927724838257,y:.8608663082122803,z:.015541625209152699},{x:.6957815289497375,y:.8326103091239929,z:.13015234470367432},{x:.6043362617492676,y:.7861682772636414,z:-.030476901680231094},{x:.594293475151062,y:.7942103147506714,z:-.032218821346759796},{x:.6324057579040527,y:.8665139675140381,z:.014255806803703308},{x:.6296147704124451,y:.8667733669281006,z:.010388285852968693},{x:.663644552230835,y:.5798642635345459,z:-.0022301070857793093},{x:.6140630841255188,y:.7809288501739502,z:-.02835679054260254},{x:.615908145904541,y:.5921698212623596,z:-.026804860681295395},{x:.617181122303009,y:.5748661756515503,z:-.03060605563223362},{x:.6222207546234131,y:.49137672781944275,z:-.011151673272252083},{x:.6669357419013977,y:.5541607141494751,z:.017466170713305473},{x:.6182981729507446,y:.5320425629615784,z:-.021793590858578682},{x:.6760554313659668,y:.595052182674408,z:.017115700989961624},{x:.6801463961601257,y:.5800720453262329,z:.043127160519361496},{x:.5922210812568665,y:.8644017577171326,z:-.02662893570959568},{x:.6054555177688599,y:.8637874722480774,z:-.018363753333687782},{x:.6161889433860779,y:.8641164898872375,z:-.008808949030935764},{x:.6017249822616577,y:.7901403307914734,z:-.028126630932092667},{x:.631446123123169,y:.8664817810058594,z:.012112865224480629},{x:.6249198913574219,y:.8716511130332947,z:.003882825840264559},{x:.6281915903091431,y:.867301881313324,z:.009891441091895103},{x:.5986843109130859,y:.7813931703567505,z:-.050227612257003784},{x:.6126407384872437,y:.869275689125061,z:-.0031255714129656553},{x:.6027271151542664,y:.8711842894554138,z:-.009324162267148495},{x:.59088134765625,y:.8742044568061829,z:-.014608660712838173},{x:.5984604358673096,y:.9216185212135315,z:-.005981989670544863},{x:.5950398445129395,y:.8964707255363464,z:-.01703473925590515},{x:.5941568613052368,y:.8882410526275635,z:-.017784785479307175},{x:.5928806662559509,y:.8803883194923401,z:-.014153128489851952},{x:.5909661054611206,y:.8748103976249695,z:-.012609979137778282},{x:.6128016710281372,y:.8702545762062073,z:-.0022550546564161777},{x:.6150846481323242,y:.8726804256439209,z:-.00414019962772727},{x:.6173093914985657,y:.8770190477371216,z:-.005970994010567665},{x:.619335412979126,y:.8814800977706909,z:-.0036864024586975574},{x:.6292637586593628,y:.8314558267593384,z:-.007714875973761082},{x:.702275276184082,y:.7320667505264282,z:.1433621346950531},{x:.6204835176467896,y:.8689177632331848,z:.0044869170524179935},{x:.6223508715629578,y:.8704851269721985,z:.00352082890458405},{x:.590448260307312,y:.8029727935791016,z:-.03200828656554222},{x:.6097423434257507,y:.7933741211891174,z:-.018042555078864098},{x:.59229576587677,y:.7993767261505127,z:-.032564569264650345},{x:.6171364188194275,y:.7153720259666443,z:-.007672437466681004},{x:.6389747858047485,y:.726390540599823,z:-.002999067772179842},{x:.6151940226554871,y:.769412100315094,z:-.024427521973848343},{x:.6526776552200317,y:.505868136882782,z:.01412637997418642},{x:.6475822329521179,y:.5375454425811768,z:-.0033899128902703524},{x:.6433356404304504,y:.5714520215988159,z:-.017428796738386154},{x:.626949667930603,y:.8962116837501526,z:.005602736957371235},{x:.5868416428565979,y:.5829002261161804,z:-.03727729618549347},{x:.5877229571342468,y:.5345035791397095,z:-.032396964728832245},{x:.5887066125869751,y:.48655083775520325,z:-.025856535881757736},{x:.6507197618484497,y:.6612282991409302,z:.011114613153040409},{x:.6803066730499268,y:.677992045879364,z:.032125361263751984},{x:.5963194370269775,y:.6598632335662842,z:.002976928371936083},{x:.667536199092865,y:.6274255514144897,z:.015618261881172657},{x:.5930740833282471,y:.6940041780471802,z:-.019217798486351967},{x:.6053346395492554,y:.7676517963409424,z:-.050308309495449066},{x:.6934473514556885,y:.6884298920631409,z:.04794462397694588},{x:.6738007664680481,y:.6934011578559875,z:.020697161555290222},{x:.6588084697723389,y:.7033141851425171,z:.008462334051728249},{x:.6346072554588318,y:.7029502391815186,z:.001542167621664703},{x:.6157816648483276,y:.6966525912284851,z:-.002009218093007803},{x:.6015574336051941,y:.688928484916687,z:-.006588225718587637},{x:.5746836066246033,y:.6711069345474243,z:-.03597589209675789},{x:.6947521567344666,y:.7309479117393494,z:.046707939356565475},{x:.6759101152420044,y:.6249120831489563,z:.021654341369867325},{x:.5794773101806641,y:.7971615195274353,z:-.06339326500892639},{x:.6041849851608276,y:.727514922618866,z:-.017512541264295578},{x:.6968844532966614,y:.6440950036048889,z:.12727996706962585},{x:.5910853147506714,y:.679325520992279,z:-.009497715160250664},{x:.6157375574111938,y:.7695677280426025,z:-.010624290443956852},{x:.6606494784355164,y:.6410489678382874,z:.0208158977329731},{x:.6040687561035156,y:.7531470656394958,z:-.045887019485235214},{x:.7012156248092651,y:.780247151851654,z:.14028730988502502},{x:.595149576663971,y:.6527782678604126,z:.006308757700026035},{x:.5925500392913818,y:.7436665892601013,z:-.060151755809783936},{x:.6780198812484741,y:.8905693888664246,z:.0626060739159584},{x:.676746666431427,y:.9113880395889282,z:.08726003766059875},{x:.7030686140060425,y:.7312687635421753,z:.09529774636030197},{x:.688987135887146,y:.8588417172431946,z:.07752864807844162},{x:.6883691549301147,y:.6109960675239563,z:.06669612973928452},{x:.6358906030654907,y:.9702065587043762,z:.023120900616049767},{x:.5781539678573608,y:.8023634552955627,z:-.044763918966054916},{x:.6170316934585571,y:.7408350706100464,z:-.011375460773706436},{x:.688542366027832,y:.6516284346580505,z:.050206027925014496},{x:.6385149359703064,y:.6540714502334595,z:.006462941411882639},{x:.6279382109642029,y:.6563615798950195,z:.003062846139073372},{x:.6268895268440247,y:.8736732006072998,z:.00627936702221632},{x:.6944946050643921,y:.7709181308746338,z:.053824134171009064},{x:.614617109298706,y:1.0022112131118774,z:.02719894051551819},{x:.6493719220161438,y:.9665167927742004,z:.053563784807920456},{x:.6624587178230286,y:.943530797958374,z:.068605437874794},{x:.6162528991699219,y:.6558693051338196,z:.002187855076044798},{x:.6058168411254883,y:.654328465461731,z:.0036193584091961384},{x:.5987918972969055,y:.6536934971809387,z:.006134530063718557},{x:.6831037402153015,y:.6195642948150635,z:.03511790186166763},{x:.6062582731246948,y:.6356398463249207,z:.001280312892049551},{x:.6174948811531067,y:.62776118516922,z:-.0013642468256875873},{x:.6297246217727661,y:.6253792643547058,z:-.0007034156005829573},{x:.6407091617584229,y:.627578616142273,z:.0028144705574959517},{x:.6479622721672058,y:.6322650909423828,z:.00750273372977972},{x:.6915091276168823,y:.5990704298019409,z:.10270945727825165},{x:.6457163095474243,y:.6504453420639038,z:.010696077719330788},{x:.6164222955703735,y:.8231936097145081,z:-.016772059723734856},{x:.6042401194572449,y:.7830976843833923,z:-.03630910441279411},{x:.5922216773033142,y:.8228387236595154,z:-.029992375522851944},{x:.6646111011505127,y:.92097008228302,z:.050967294722795486},{x:.651232898235321,y:.9460107088088989,z:.038000158965587616},{x:.6140977144241333,y:.9882472157478333,z:.009882091544568539},{x:.6870781183242798,y:.8768675327301025,z:.10980932414531708},{x:.5986856818199158,y:.6456438899040222,z:.003999010659754276},{x:.585981547832489,y:.7034481763839722,z:-.0377722829580307},{x:.6342031359672546,y:.9867448806762695,z:.03786521404981613},{x:.7013950943946838,y:.776049017906189,z:.09598205983638763},{x:.6030206680297852,y:.8719133138656616,z:-.007931148633360863},{x:.6050592064857483,y:.8767156004905701,z:-.009791925549507141},{x:.6073468923568726,y:.8831382393836975,z:-.012361008673906326},{x:.6087977290153503,y:.890143632888794,z:-.01098148338496685},{x:.6147705316543579,y:.9110084772109985,z:-.0018823575228452682},{x:.622577965259552,y:.8670604825019836,z:.002609190298244357},{x:.6241236329078674,y:.8651344180107117,z:.0025534380692988634},{x:.6257084608078003,y:.8638408184051514,z:.0023300074972212315},{x:.639931321144104,y:.8449671268463135,z:.0038123116828501225},{x:.6810906529426575,y:.7856625318527222,z:.02717764675617218},{x:.583532452583313,y:.6811994910240173,z:-.026588857173919678},{x:.5855660438537598,y:.6393819451332092,z:-.004512844607234001},{x:.5932201743125916,y:.6398029327392578,z:.0008020466193556786},{x:.6200879812240601,y:.8683351874351501,z:.00417016725987196},{x:.6842559576034546,y:.8330534100532532,z:.050836317241191864},{x:.5754412412643433,y:.6418221592903137,z:-.022838059812784195},{x:.6232790350914001,y:.9295297265052795,z:.006339520215988159},{x:.5764067769050598,y:.694546639919281,z:-.04825803264975548},{x:.59778892993927,y:.7343927621841431,z:-.035004377365112305},{x:.6042810678482056,y:.9441440105438232,z:-.0010970570147037506},{x:.6496372222900391,y:.8869078159332275,z:.021036235615611076},{x:.6274012327194214,y:.7830310463905334,z:-.006658440921455622},{x:.637792706489563,y:.9104999899864197,z:.014290250837802887},{x:.6549934148788452,y:.7748609185218811,z:-.0006672973395325243},{x:.6404005289077759,y:.801220715045929,z:-.0026642554439604282},{x:.6671456694602966,y:.8045546412467957,z:.013180811889469624},{x:.6107483506202698,y:.9680658578872681,z:.001778992242179811},{x:.6060343980789185,y:.744587242603302,z:-.024382334202528},{x:.6602751612663269,y:.8998945355415344,z:.0344940721988678},{x:.6463775038719177,y:.9262562394142151,z:.02617623284459114},{x:.6579852104187012,y:.8602304458618164,z:.021586716175079346},{x:.6926165223121643,y:.8053340315818787,z:.061075080186128616},{x:.6724731922149658,y:.8594399690628052,z:.03457934781908989},{x:.6975721716880798,y:.8183245062828064,z:.09300774335861206},{x:.6512877941131592,y:.8258221745491028,z:.006324059329926968},{x:.594887375831604,y:.7148372530937195,z:-.026898479089140892},{x:.6017440557479858,y:.7773507833480835,z:-.05312420800328255},{x:.6096571683883667,y:.7806998491287231,z:-.037646256387233734},{x:.5952993035316467,y:.7654367685317993,z:-.06398405134677887},{x:.5950021147727966,y:.6201304793357849,z:-.009297547861933708},{x:.6165438890457153,y:.6052900552749634,z:-.012455573305487633},{x:.6362661719322205,y:.6015968918800354,z:-.011649220250546932},{x:.6522727608680725,y:.6046400666236877,z:-.005903332494199276},{x:.6625409722328186,y:.6128141283988953,z:.0030042496509850025},{x:.6688099503517151,y:.6457712054252625,z:.026322703808546066},{x:.7013440728187561,y:.6893666386604309,z:.08984331786632538},{x:.6608623266220093,y:.6749406456947327,z:.0172116681933403},{x:.6482325196266174,y:.6823726296424866,z:.008881398476660252},{x:.6313265562057495,y:.6842025518417358,z:.0031308617908507586},{x:.6147016286849976,y:.6809731721878052,z:.0007630771724507213},{x:.6018834114074707,y:.6755372285842896,z:-.0008834321051836014},{x:.5925027132034302,y:.670681357383728,z:-.001968748401850462},{x:.700127363204956,y:.6871103644371033,z:.13980500400066376},{x:.6095665693283081,y:.7853189706802368,z:-.03074747882783413},{x:.5880423784255981,y:.7229287028312683,z:-.04691500961780548},{x:.5930182337760925,y:.7811514139175415,z:-.06398335844278336},{x:.5867722034454346,y:.7922660112380981,z:-.05794971063733101},{x:.5933279991149902,y:.7842848896980286,z:-.05714067071676254},{x:.6063535809516907,y:.7920218706130981,z:-.02590685710310936},{x:.5839452743530273,y:.794978141784668,z:-.0615212507545948},{x:.5828126072883606,y:.8000800013542175,z:-.0449722595512867},{x:.5909603834152222,y:.6541213393211365,z:.003991890233010054},{x:.5852181911468506,y:.6602938771247864,z:-.004428438376635313},{x:.5825737714767456,y:.6651063561439514,z:-.014345290139317513},{x:.6517343521118164,y:.6362385153770447,z:.012151890434324741},{x:.6615052819252014,y:.6281577944755554,z:.0123682152479887},{x:.4856873154640198,y:.6568945646286011,z:.000720038078725338},{x:.49988406896591187,y:.6547410488128662,z:.0006949726957827806},{x:.48438939452171326,y:.6392973065376282,z:.000705525919329375},{x:.47143134474754333,y:.6589511632919312,z:.0006980331381782889},{x:.48704618215560913,y:.6752797961235046,z:.0006921177846379578},{x:.6243702173233032,y:.640461802482605,z:-6592126737814397e-20},{x:.6390967965126038,y:.6385173797607422,z:-.00016105435497593135},{x:.6230536699295044,y:.6224825382232666,z:-.00016136496560648084},{x:.6095397472381592,y:.641917884349823,z:-.0001803556369850412},{x:.6250996589660645,y:.6586247682571411,z:-.0001785515050869435}]],faceBlendshapes:[{categories:[{index:0,score:5187174338061595e-21,categoryName:"_neutral",displayName:""},{index:1,score:.24521504342556,categoryName:"browDownLeft",displayName:""},{index:2,score:.1987743377685547,categoryName:"browDownRight",displayName:""},{index:3,score:.013400448486208916,categoryName:"browInnerUp",displayName:""},{index:4,score:.012361560948193073,categoryName:"browOuterUpLeft",displayName:""},{index:5,score:.019305096939206123,categoryName:"browOuterUpRight",displayName:""},{index:6,score:28426356948330067e-21,categoryName:"cheekPuff",displayName:""},{index:7,score:34500112633395474e-23,categoryName:"cheekSquintLeft",displayName:""},{index:8,score:483789051486383e-21,categoryName:"cheekSquintRight",displayName:""},{index:9,score:.07650448381900787,categoryName:"eyeBlinkLeft",displayName:""},{index:10,score:.05070012807846069,categoryName:"eyeBlinkRight",displayName:""},{index:11,score:.13978900015354156,categoryName:"eyeLookDownLeft",displayName:""},{index:12,score:.14198613166809082,categoryName:"eyeLookDownRight",displayName:""},{index:13,score:.2177766114473343,categoryName:"eyeLookInLeft",displayName:""},{index:14,score:.014739357866346836,categoryName:"eyeLookInRight",displayName:""},{index:15,score:.02361512929201126,categoryName:"eyeLookOutLeft",displayName:""},{index:16,score:.19679604470729828,categoryName:"eyeLookOutRight",displayName:""},{index:17,score:.04874616861343384,categoryName:"eyeLookUpLeft",displayName:""},{index:18,score:.049392376095056534,categoryName:"eyeLookUpRight",displayName:""},{index:19,score:.34944331645965576,categoryName:"eyeSquintLeft",displayName:""},{index:20,score:.2939716875553131,categoryName:"eyeSquintRight",displayName:""},{index:21,score:.005955042317509651,categoryName:"eyeWideLeft",displayName:""},{index:22,score:.006776117719709873,categoryName:"eyeWideRight",displayName:""},{index:23,score:16942436559475027e-21,categoryName:"jawForward",displayName:""},{index:24,score:.0045165494084358215,categoryName:"jawLeft",displayName:""},{index:25,score:.07803940027952194,categoryName:"jawOpen",displayName:""},{index:26,score:2090057751047425e-20,categoryName:"jawRight",displayName:""},{index:27,score:.06032035872340202,categoryName:"mouthClose",displayName:""},{index:28,score:.00228882092051208,categoryName:"mouthDimpleLeft",displayName:""},{index:29,score:.00781762320548296,categoryName:"mouthDimpleRight",displayName:""},{index:30,score:.0017093931091949344,categoryName:"mouthFrownLeft",displayName:""},{index:31,score:.0019319106359034777,categoryName:"mouthFrownRight",displayName:""},{index:32,score:8485237776767462e-20,categoryName:"mouthFunnel",displayName:""},{index:33,score:.0009051355300471187,categoryName:"mouthLeft",displayName:""},{index:34,score:.0003630454302765429,categoryName:"mouthLowerDownLeft",displayName:""},{index:35,score:.00017601238505449146,categoryName:"mouthLowerDownRight",displayName:""},{index:36,score:.12865161895751953,categoryName:"mouthPressLeft",displayName:""},{index:37,score:.20137207210063934,categoryName:"mouthPressRight",displayName:""},{index:38,score:.0022203284315764904,categoryName:"mouthPucker",displayName:""},{index:39,score:.0009096377179957926,categoryName:"mouthRight",displayName:""},{index:40,score:.34189721941947937,categoryName:"mouthRollLower",displayName:""},{index:41,score:.11409689486026764,categoryName:"mouthRollUpper",displayName:""},{index:42,score:.17172536253929138,categoryName:"mouthShrugLower",displayName:""},{index:43,score:.004038424696773291,categoryName:"mouthShrugUpper",displayName:""},{index:44,score:.00023205230536404997,categoryName:"mouthSmileLeft",displayName:""},{index:45,score:.00019313619122840464,categoryName:"mouthSmileRight",displayName:""},{index:46,score:.0018571305554360151,categoryName:"mouthStretchLeft",displayName:""},{index:47,score:.0023813238367438316,categoryName:"mouthStretchRight",displayName:""},{index:48,score:24323100660694763e-21,categoryName:"mouthUpperUpLeft",displayName:""},{index:49,score:3161552012898028e-20,categoryName:"mouthUpperUpRight",displayName:""},{index:50,score:108198406678639e-21,categoryName:"noseSneerLeft",displayName:""},{index:51,score:12652527630052646e-22,categoryName:"noseSneerRight",displayName:""}],headIndex:-1,headName:""}],facialTransformationMatrixes:[{rows:4,columns:4,data:[.9947517514228821,.10230544209480286,.0013679931871592999,0,-.10230997204780579,.9947447776794434,.003816320328041911,0,-.000970348424743861,-.0039362297393381596,.9999914169311523,0,2.8888821601867676,-7.808934211730957,-30.52109146118164,1]}]}};var Jv=A(203);const Zv=(0,d.createContext)({}),AA={basePath:"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.2-rc2/wasm",options:{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/1/face_landmarker.task",delegate:"GPU"},runningMode:"VIDEO",outputFaceBlendshapes:!0,outputFacialTransformationMatrixes:!0}};function tE({basePath:s=AA.basePath,options:t=AA.options,children:r}){const l=JSON.stringify(t),c=(0,Hc.Rq)(()=>fs(this,null,function*(){return yield Jv.n.forVisionTasks(s).then(p=>Jv.jr.createFromOptions(p,t))}),[s,l]);return(0,d.useEffect)(()=>()=>{c==null||c.close(),(0,Hc.ZH)([s,l])},[c,s,l]),d.createElement(Zv.Provider,{value:c},r)}function qv(){return(0,d.useContext)(Zv)}function S(s,t){return s.clone().add(t).multiplyScalar(.5)}function e(s,t,r){const l=s.localToWorld(t);return r.worldToLocal(l)}const o=(0,d.createContext)({}),f=(0,d.forwardRef)(({camera:s,autostart:t=!0,webcam:r=!0,webcamVideoTextureSrc:l,manualUpdate:c=!1,manualDetect:p=!1,onVideoFrame:h,smoothTime:m=.25,offset:v=!0,offsetScalar:E=80,eyes:x=!1,eyesAsOrigin:T=!0,depth:R=.15,debug:F=!1,facemesh:U,makeDefault:P},O)=>{var z,L;const k=(0,_.z)(Be=>Be.scene),H=(0,_.z)(Be=>Be.camera),X=(0,_.z)(Be=>Be.set),W=(0,_.z)(Be=>Be.get),J=s||H,Y=(0,d.useRef)(null),ce=(0,d.useRef)(null),[ue]=(0,d.useState)(()=>new i.Object3D),[ge]=(0,d.useState)(()=>new i.Vector3),[le]=(0,d.useState)(()=>new i.Vector3),[Me]=(0,d.useState)(()=>new i.Vector3),[me]=(0,d.useState)(()=>new i.Vector3),Te=(0,d.useCallback)(()=>{ue.parent=J.parent;const Be=ce.current;if(Be){const{outerRef:ve,eyeRightRef:ke,eyeLeftRef:vt}=Be;if(ke.current&&vt.current){const{irisDirRef:ht}=ke.current,{irisDirRef:dt}=vt.current;ht.current&&dt.current&&ve.current&&(ge.copy(e(ht.current,new i.Vector3(0,0,0),ve.current)),le.copy(e(dt.current,new i.Vector3(0,0,0),ve.current)),ue.position.copy(e(ve.current,S(ge,le),J.parent||k)),Me.copy(e(ht.current,new i.Vector3(0,0,1),ve.current)),me.copy(e(dt.current,new i.Vector3(0,0,1),ve.current)),ue.lookAt(ve.current.localToWorld(S(Me,me))))}else ve.current&&(ue.position.copy(e(ve.current,new i.Vector3(0,0,0),J.parent||k)),ue.lookAt(ve.current.localToWorld(new i.Vector3(0,0,1))))}return ue},[J,le,me,ge,Me,k,ue]),[Ue]=(0,d.useState)(()=>new i.Object3D),Re=(0,d.useCallback)(function(Be,ve){if(J){var ke;(ke=ve)!==null&&ke!==void 0||(ve=Te()),m>0?(Ts.damp3(Ue.position,ve.position,m,Be,void 0,void 0,1e-9),Ts.dampE(Ue.rotation,ve.rotation,m,Be,void 0,void 0,1e-9)):(Ue.position.copy(ve.position),Ue.rotation.copy(ve.rotation)),J.position.copy(Ue.position),J.rotation.copy(Ue.rotation)}},[J,Te,m,Ue.position,Ue.rotation]),[Ge,De]=(0,d.useState)(),Xe=qv(),Ce=(0,d.useCallback)((Be,ve)=>{const ke=Xe==null?void 0:Xe.detectForVideo(Be,ve);De(ke)},[Xe]);(0,_.A)((Be,ve)=>{c||Re(ve)});const Ee=(0,d.useMemo)(()=>Object.assign(Object.create(i.EventDispatcher.prototype),{detect:Ce,computeTarget:Te,update:Re,facemeshApiRef:ce,webcamApiRef:Y,play:()=>{var Be,ve;(Be=Y.current)==null||(ve=Be.videoTextureApiRef.current)==null||ve.texture.source.data.play()},pause:()=>{var Be,ve;(Be=Y.current)==null||(ve=Be.videoTextureApiRef.current)==null||ve.texture.source.data.pause()}}),[Ce,Te,Re]);(0,d.useImperativeHandle)(O,()=>Ee,[Ee]),(0,d.useEffect)(()=>{const Be=ve=>{p||Ce(ve.texture.source.data,ve.time),h&&h(ve)};return Ee.addEventListener("videoFrame",Be),()=>{Ee.removeEventListener("videoFrame",Be)}},[Ee,Ce,Xe,p,h]),(0,d.useEffect)(()=>{if(P){const Be=W().controls;return X({controls:Ee}),()=>X({controls:Be})}},[P,Ee,W,X]);const _e=Ge==null?void 0:Ge.faceLandmarks[0],oe=Ge==null||(z=Ge.facialTransformationMatrixes)==null?void 0:z[0],Ae=Ge==null||(L=Ge.faceBlendshapes)==null?void 0:L[0];return d.createElement(o.Provider,{value:Ee},r&&d.createElement(d.Suspense,{fallback:null},d.createElement(b,{ref:Y,autostart:t,videoTextureSrc:l})),d.createElement(Yv,(0,C.Z)({ref:ce},U,{points:_e,depth:R,facialTransformationMatrix:oe,faceBlendshapes:Ae,eyes:x,eyesAsOrigin:T,offset:v,offsetScalar:E,debug:F,"rotation-z":Math.PI,visible:F}),d.createElement("meshBasicMaterial",{side:i.DoubleSide})))}),y=()=>(0,d.useContext)(o),b=(0,d.forwardRef)(({videoTextureSrc:s,autostart:t=!0},r)=>{const l=(0,d.useRef)(null),c=y(),p=(0,Hc.Rq)(()=>fs(this,null,function*(){return s?Promise.resolve(null):yield navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}})}),[s]);(0,d.useEffect)(()=>(c.dispatchEvent({type:"stream",stream:p}),()=>{p==null||p.getTracks().forEach(m=>m.stop()),(0,Hc.ZH)([s])}),[p,c,s]);const h=(0,d.useMemo)(()=>({videoTextureApiRef:l}),[]);return(0,d.useImperativeHandle)(r,()=>h,[h]),d.createElement(d.Suspense,{fallback:null},d.createElement(B,{ref:l,src:s||p,start:t}))}),B=(0,d.forwardRef)(({src:s,start:t},r)=>{const l=Kv(s,{start:t}),c=l.source.data,p=y(),h=(0,d.useCallback)(v=>{p.dispatchEvent({type:"videoFrame",texture:l,time:v})},[l,p]);I(c,h);const m=(0,d.useMemo)(()=>({texture:l}),[l]);return(0,d.useImperativeHandle)(r,()=>m,[m]),d.createElement(d.Fragment,null)}),I=(s,t)=>{(0,d.useEffect)(()=>{if(!s||!s.requestVideoFrameCallback)return;let r;function l(...c){t(...c),r=s.requestVideoFrameCallback(l)}return s.requestVideoFrameCallback(l),()=>s.cancelVideoFrameCallback(r)},[s,t])};function D({defaultScene:s,defaultCamera:t,renderPriority:r=1}){const{gl:l,scene:c,camera:p}=(0,_.z)();let h;return(0,_.A)(()=>{h=l.autoClear,r===1&&(l.autoClear=!0,l.render(s,t)),l.autoClear=!1,l.clearDepth(),l.render(c,p),l.autoClear=h},r),d.createElement("group",{onPointerOver:()=>null})}function N({children:s,renderPriority:t=1}){const{scene:r,camera:l}=(0,_.z)(),[c]=d.useState(()=>new i.Scene);return d.createElement(d.Fragment,null,(0,_.g)(d.createElement(d.Fragment,null,s,d.createElement(D,{defaultScene:r,defaultCamera:l,renderPriority:t})),c,{events:{priority:t+1}}))}const K=d.createContext({}),Z=()=>d.useContext(K),q=2*Math.PI,ee=new i.Object3D,ie=new i.Matrix4,[he,se]=[new i.Quaternion,new i.Quaternion],ne=new i.Vector3,be=new i.Vector3,fe=s=>"minPolarAngle"in s,xe=({alignment:s="bottom-right",margin:t=[80,80],renderPriority:r=1,onUpdate:l,onTarget:c,children:p})=>{const h=(0,_.z)(W=>W.size),m=(0,_.z)(W=>W.camera),v=(0,_.z)(W=>W.controls),E=(0,_.z)(W=>W.invalidate),x=d.useRef(),T=d.useRef(null),R=d.useRef(!1),F=d.useRef(0),U=d.useRef(new i.Vector3(0,0,0)),P=d.useRef(new i.Vector3(0,0,0));d.useEffect(()=>{P.current.copy(m.up)},[m]);const O=d.useCallback(W=>{R.current=!0,(v||c)&&(U.current=(v==null?void 0:v.target)||(c==null?void 0:c())),F.current=m.position.distanceTo(ne),he.copy(m.quaternion),be.copy(W).multiplyScalar(F.current).add(ne),ee.lookAt(be),ee.up.copy(m.up),se.copy(ee.quaternion),E()},[v,m,c,E]);(0,_.A)((W,J)=>{if(T.current&&x.current){var Y;if(R.current)if(he.angleTo(se)<.01)R.current=!1,fe(v)&&m.up.copy(P.current);else{const ce=J*q;he.rotateTowards(se,ce),m.position.set(0,0,1).applyQuaternion(he).multiplyScalar(F.current).add(U.current),m.up.set(0,1,0).applyQuaternion(he).normalize(),m.quaternion.copy(he),l?l():v&&v.update(),E()}ie.copy(m.matrix).invert(),(Y=x.current)==null||Y.quaternion.setFromRotationMatrix(ie)}});const z=d.useMemo(()=>({tweenCamera:O}),[O]),[L,k]=t,H=s.endsWith("-center")?0:s.endsWith("-left")?-h.width/2+L:h.width/2-L,X=s.startsWith("center-")?0:s.startsWith("top-")?h.height/2-k:-h.height/2+k;return d.createElement(N,{renderPriority:r},d.createElement(K.Provider,{value:z},d.createElement(Gf,{makeDefault:!0,ref:T,position:[0,0,200]}),d.createElement("group",{ref:x,position:[H,X,0]},p)))},Le={bg:"#f0f0f0",hover:"#999",text:"black",stroke:"black"},He=["Right","Left","Top","Bottom","Front","Back"],qe=s=>new i.Vector3(...s).multiplyScalar(.38),et=[[1,1,1],[1,1,-1],[1,-1,1],[1,-1,-1],[-1,1,1],[-1,1,-1],[-1,-1,1],[-1,-1,-1]].map(qe),we=[.25,.25,.25],We=[[1,1,0],[1,0,1],[1,0,-1],[1,-1,0],[0,1,1],[0,1,-1],[0,-1,1],[0,-1,-1],[-1,1,0],[-1,0,1],[-1,0,-1],[-1,-1,0]].map(qe),Wt=We.map(s=>s.toArray().map(t=>t==0?.5:.25)),Rn=({hover:s,index:t,font:r="20px Inter var, Arial, sans-serif",faces:l=He,color:c=Le.bg,hoverColor:p=Le.hover,textColor:h=Le.text,strokeColor:m=Le.stroke,opacity:v=1})=>{const E=(0,_.z)(T=>T.gl),x=d.useMemo(()=>{const T=document.createElement("canvas");T.width=128,T.height=128;const R=T.getContext("2d");return R.fillStyle=c,R.fillRect(0,0,T.width,T.height),R.strokeStyle=m,R.strokeRect(0,0,T.width,T.height),R.font=r,R.textAlign="center",R.fillStyle=h,R.fillText(l[t].toUpperCase(),64,76),new i.CanvasTexture(T)},[t,l,r,c,h,m]);return d.createElement("meshLambertMaterial",{map:x,"map-anisotropy":E.capabilities.getMaxAnisotropy()||1,attach:`material-${t}`,color:s?p:"white",transparent:!0,opacity:v})},Ut=s=>{const{tweenCamera:t}=Z(),[r,l]=d.useState(null),c=m=>{m.stopPropagation(),l(null)},p=m=>{m.stopPropagation(),t(m.face.normal)},h=m=>{m.stopPropagation(),l(Math.floor(m.faceIndex/2))};return d.createElement("mesh",{onPointerOut:c,onPointerMove:h,onClick:s.onClick||p},[...Array(6)].map((m,v)=>d.createElement(Rn,(0,C.Z)({key:v,index:v,hover:r===v},s))),d.createElement("boxGeometry",null))},Ht=({onClick:s,dimensions:t,position:r,hoverColor:l=Le.hover})=>{const{tweenCamera:c}=Z(),[p,h]=d.useState(!1),m=x=>{x.stopPropagation(),h(!1)},v=x=>{x.stopPropagation(),h(!0)},E=x=>{x.stopPropagation(),c(r)};return d.createElement("mesh",{scale:1.01,position:r,onPointerOver:v,onPointerOut:m,onClick:s||E},d.createElement("meshBasicMaterial",{color:p?l:"white",transparent:!0,opacity:.6,visible:p}),d.createElement("boxGeometry",{args:t}))},Jt=s=>d.createElement("group",{scale:[60,60,60]},d.createElement(Ut,s),We.map((t,r)=>d.createElement(Ht,(0,C.Z)({key:r,position:t,dimensions:Wt[r]},s))),et.map((t,r)=>d.createElement(Ht,(0,C.Z)({key:r,position:t,dimensions:we},s))),d.createElement("ambientLight",{intensity:.5}),d.createElement("pointLight",{position:[10,10,10],intensity:.5}));function Sn({scale:s=[.8,.05,.05],color:t,rotation:r}){return d.createElement("group",{rotation:r},d.createElement("mesh",{position:[.4,0,0]},d.createElement("boxGeometry",{args:s}),d.createElement("meshBasicMaterial",{color:t,toneMapped:!1})))}function cn(v){var E=v,{onClick:s,font:t,disabled:r,arcStyle:l,label:c,labelColor:p,axisHeadScale:h=1}=E,m=Cn(E,["onClick","font","disabled","arcStyle","label","labelColor","axisHeadScale"]);const x=(0,_.z)(z=>z.gl),T=d.useMemo(()=>{const z=document.createElement("canvas");z.width=64,z.height=64;const L=z.getContext("2d");return L.beginPath(),L.arc(32,32,16,0,2*Math.PI),L.closePath(),L.fillStyle=l,L.fill(),c&&(L.font=t,L.textAlign="center",L.fillStyle=p,L.fillText(c,32,41)),new i.CanvasTexture(z)},[l,c,p,t]),[R,F]=d.useState(!1),U=(c?1:.75)*(R?1.2:1)*h,P=z=>{z.stopPropagation(),F(!0)},O=z=>{z.stopPropagation(),F(!1)};return d.createElement("sprite",(0,C.Z)({scale:U,onPointerOver:r?void 0:P,onPointerOut:r?void 0:s||O},m),d.createElement("spriteMaterial",{map:T,"map-anisotropy":x.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:c?1:.75,toneMapped:!1}))}const En=T=>{var R=T,{hideNegativeAxes:s,hideAxisHeads:t,disabled:r,font:l="18px Inter var, Arial, sans-serif",axisColors:c=["#ff2060","#20df80","#2080ff"],axisHeadScale:p=1,axisScale:h,labels:m=["X","Y","Z"],labelColor:v="#000",onClick:E}=R,x=Cn(R,["hideNegativeAxes","hideAxisHeads","disabled","font","axisColors","axisHeadScale","axisScale","labels","labelColor","onClick"]);const[F,U,P]=c,{tweenCamera:O}=Z(),z={font:l,disabled:r,labelColor:v,onClick:E,axisHeadScale:p,onPointerDown:r?void 0:L=>{O(L.object.position),L.stopPropagation()}};return d.createElement("group",(0,C.Z)({scale:40},x),d.createElement(Sn,{color:F,rotation:[0,0,0],scale:h}),d.createElement(Sn,{color:U,rotation:[0,0,Math.PI/2],scale:h}),d.createElement(Sn,{color:P,rotation:[0,-Math.PI/2,0],scale:h}),!t&&d.createElement(d.Fragment,null,d.createElement(cn,(0,C.Z)({arcStyle:F,position:[1,0,0],label:m[0]},z)),d.createElement(cn,(0,C.Z)({arcStyle:U,position:[0,1,0],label:m[1]},z)),d.createElement(cn,(0,C.Z)({arcStyle:P,position:[0,0,1],label:m[2]},z)),!s&&d.createElement(d.Fragment,null,d.createElement(cn,(0,C.Z)({arcStyle:F,position:[-1,0,0]},z)),d.createElement(cn,(0,C.Z)({arcStyle:U,position:[0,-1,0]},z)),d.createElement(cn,(0,C.Z)({arcStyle:P,position:[0,0,-1]},z)))),d.createElement("ambientLight",{intensity:.5}),d.createElement("pointLight",{position:[10,10,10],intensity:.5}))},In=hp({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,cellThickness:.5,sectionThickness:1,cellColor:new i.Color,sectionColor:new i.Color,infiniteGrid:!1,followCamera:!1},`
    varying vec3 worldPosition;
    uniform float fadeDistance;
    uniform bool infiniteGrid;
    uniform bool followCamera;

    void main() {
      worldPosition = position.xzy;
      if (infiniteGrid) worldPosition *= 1.0 + fadeDistance;
      if (followCamera) worldPosition.xz +=cameraPosition.xz;

      gl_Position = projectionMatrix * modelViewMatrix * vec4(worldPosition, 1.0);
    }
  `,`
    varying vec3 worldPosition;
    uniform float cellSize;
    uniform float sectionSize;
    uniform vec3 cellColor;
    uniform vec3 sectionColor;
    uniform float fadeDistance;
    uniform float fadeStrength;
    uniform float cellThickness;
    uniform float sectionThickness;

    float getGrid(float size, float thickness) {
      vec2 r = worldPosition.xz / size;
      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);
      float line = min(grid.x, grid.y) + 1. - thickness;
      return 1.0 - min(line, 1.);
    }

    void main() {
      float g1 = getGrid(cellSize, cellThickness);
      float g2 = getGrid(sectionSize, sectionThickness);

      float d = 1.0 - min(distance(cameraPosition.xz, worldPosition.xz) / fadeDistance, 1.);
      vec3 color = mix(cellColor, sectionColor, min(1.,sectionThickness * g2));

      gl_FragColor = vec4(color, (g1 + g2) * pow(d,fadeStrength));
      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);
      if (gl_FragColor.a <= 0.0) discard;

      #include <tonemapping_fragment>
      #include <encodings_fragment>
    }
  `),kn=d.forwardRef((U,F)=>{var P=U,{args:s,cellColor:t="#000000",sectionColor:r="#2080ff",cellSize:l=.5,sectionSize:c=1,followCamera:p=!1,infiniteGrid:h=!1,fadeDistance:m=100,fadeStrength:v=1,cellThickness:E=.5,sectionThickness:x=1,side:T=i.BackSide}=P,R=Cn(P,["args","cellColor","sectionColor","cellSize","sectionSize","followCamera","infiniteGrid","fadeDistance","fadeStrength","cellThickness","sectionThickness","side"]);(0,_.e)({GridMaterial:In});const O={cellSize:l,sectionSize:c,cellColor:t,sectionColor:r,cellThickness:E,sectionThickness:x},z={fadeDistance:m,fadeStrength:v,infiniteGrid:h,followCamera:p};return d.createElement("mesh",(0,C.Z)({ref:F,frustumCulled:!1},R),d.createElement("gridMaterial",(0,C.Z)({transparent:!0,"extensions-derivatives":!0,side:T},O,z)),d.createElement("planeGeometry",{args:s}))});function wr(s,{path:t}){const[r]=(0,_.D)(i.CubeTextureLoader,[s],l=>l.setPath(t));return r}wr.preload=(s,{path:t})=>_.D.preload(i.CubeTextureLoader,[s],r=>r.setPath(t));var Zt={},zn=function(s,t,r,l,c){var p=new Worker(Zt[t]||(Zt[t]=URL.createObjectURL(new Blob([s],{type:"text/javascript"}))));return p.onerror=function(h){return c(h.error,null)},p.onmessage=function(h){return c(null,h.data)},p.postMessage(r,l),p},hn=Uint8Array,ir=Uint16Array,Cr=Uint32Array,kr=new hn([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),hi=new hn([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ci=new hn([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),Lo=function(s,t){for(var r=new ir(31),l=0;l<31;++l)r[l]=t+=1<<s[l-1];for(var c=new Cr(r[30]),l=1;l<30;++l)for(var p=r[l];p<r[l+1];++p)c[p]=p-r[l]<<5|l;return[r,c]},bi=Lo(kr,2),tt=bi[0],qn=bi[1];tt[28]=258,qn[258]=28;for(var An=Lo(hi,0),tr=An[0],wn=An[1],Hr=new ir(32768),jn=0;jn<32768;++jn){var Tr=(jn&43690)>>>1|(jn&21845)<<1;Tr=(Tr&52428)>>>2|(Tr&13107)<<2,Tr=(Tr&61680)>>>4|(Tr&3855)<<4,Hr[jn]=((Tr&65280)>>>8|(Tr&255)<<8)>>>1}for(var ri=function(s,t,r){for(var l=s.length,c=0,p=new ir(t);c<l;++c)++p[s[c]-1];var h=new ir(t);for(c=0;c<t;++c)h[c]=h[c-1]+p[c-1]<<1;var m;if(r){m=new ir(1<<t);var v=15-t;for(c=0;c<l;++c)if(s[c])for(var E=c<<4|s[c],x=t-s[c],T=h[s[c]-1]++<<x,R=T|(1<<x)-1;T<=R;++T)m[Hr[T]>>>v]=E}else for(m=new ir(l),c=0;c<l;++c)s[c]&&(m[c]=Hr[h[s[c]-1]++]>>>15-s[c]);return m},Di=new hn(288),jn=0;jn<144;++jn)Di[jn]=8;for(var jn=144;jn<256;++jn)Di[jn]=9;for(var jn=256;jn<280;++jn)Di[jn]=7;for(var jn=280;jn<288;++jn)Di[jn]=8;for(var ts=new hn(32),jn=0;jn<32;++jn)ts[jn]=5;var Ye=null,Fe=ri(Di,9,1),an=null,Kn=ri(ts,5,1),Hn=function(s){for(var t=s[0],r=1;r<s.length;++r)s[r]>t&&(t=s[r]);return t},$n=function(s,t,r){var l=t/8|0;return(s[l]|s[l+1]<<8)>>(t&7)&r},Wr=function(s,t){var r=t/8|0;return(s[r]|s[r+1]<<8|s[r+2]<<16)>>(t&7)},dr=function(s){return(s/8|0)+(s&7&&1)},on=function(s,t,r){(t==null||t<0)&&(t=0),(r==null||r>s.length)&&(r=s.length);var l=new(s instanceof ir?ir:s instanceof Cr?Cr:hn)(r-t);return l.set(s.subarray(t,r)),l},ti=function(s,t,r){var l=s.length;if(!l||r&&!r.l&&l<5)return t||new hn(0);var c=!t||r,p=!r||r.i;r||(r={}),t||(t=new hn(l*3));var h=function(Be){var ve=t.length;if(Be>ve){var ke=new hn(Math.max(ve*2,Be));ke.set(t),t=ke}},m=r.f||0,v=r.p||0,E=r.b||0,x=r.l,T=r.d,R=r.m,F=r.n,U=l*8;do{if(!x){r.f=m=$n(s,v,1);var P=$n(s,v+1,3);if(v+=3,P)if(P==1)x=Fe,T=Kn,R=9,F=5;else if(P==2){var k=$n(s,v,31)+257,H=$n(s,v+10,15)+4,X=k+$n(s,v+5,31)+1;v+=14;for(var W=new hn(X),J=new hn(19),Y=0;Y<H;++Y)J[ci[Y]]=$n(s,v+Y*3,7);v+=H*3;for(var ce=Hn(J),ue=(1<<ce)-1,ge=ri(J,ce,1),Y=0;Y<X;){var le=ge[$n(s,v,ue)];v+=le&15;var O=le>>>4;if(O<16)W[Y++]=O;else{var Me=0,me=0;for(O==16?(me=3+$n(s,v,3),v+=2,Me=W[Y-1]):O==17?(me=3+$n(s,v,7),v+=3):O==18&&(me=11+$n(s,v,127),v+=7);me--;)W[Y++]=Me}}var Te=W.subarray(0,k),Ue=W.subarray(k);R=Hn(Te),F=Hn(Ue),x=ri(Te,R,1),T=ri(Ue,F,1)}else throw"invalid block type";else{var O=dr(v)+4,z=s[O-4]|s[O-3]<<8,L=O+z;if(L>l){if(p)throw"unexpected EOF";break}c&&h(E+z),t.set(s.subarray(O,L),E),r.b=E+=z,r.p=v=L*8;continue}if(v>U){if(p)throw"unexpected EOF";break}}c&&h(E+131072);for(var Re=(1<<R)-1,Ge=(1<<F)-1,De=v;;De=v){var Me=x[Wr(s,v)&Re],Xe=Me>>>4;if(v+=Me&15,v>U){if(p)throw"unexpected EOF";break}if(!Me)throw"invalid length/literal";if(Xe<256)t[E++]=Xe;else if(Xe==256){De=v,x=null;break}else{var Ce=Xe-254;if(Xe>264){var Y=Xe-257,Ee=kr[Y];Ce=$n(s,v,(1<<Ee)-1)+tt[Y],v+=Ee}var _e=T[Wr(s,v)&Ge],oe=_e>>>4;if(!_e)throw"invalid distance";v+=_e&15;var Ue=tr[oe];if(oe>3){var Ee=hi[oe];Ue+=Wr(s,v)&(1<<Ee)-1,v+=Ee}if(v>U){if(p)throw"unexpected EOF";break}c&&h(E+131072);for(var Ae=E+Ce;E<Ae;E+=4)t[E]=t[E-Ue],t[E+1]=t[E+1-Ue],t[E+2]=t[E+2-Ue],t[E+3]=t[E+3-Ue];E=Ae}}r.l=x,r.p=De,r.b=E,x&&(m=1,r.m=R,r.d=T,r.n=F)}while(!m);return E==t.length?t:on(t,0,E)},Vr=function(s,t,r){r<<=t&7;var l=t/8|0;s[l]|=r,s[l+1]|=r>>>8},$r=function(s,t,r){r<<=t&7;var l=t/8|0;s[l]|=r,s[l+1]|=r>>>8,s[l+2]|=r>>>16},zr=function(s,t){for(var r=[],l=0;l<s.length;++l)s[l]&&r.push({s:l,f:s[l]});var c=r.length,p=r.slice();if(!c)return[sr,0];if(c==1){var h=new hn(r[0].s+1);return h[r[0].s]=1,[h,1]}r.sort(function(X,W){return X.f-W.f}),r.push({s:-1,f:25001});var m=r[0],v=r[1],E=0,x=1,T=2;for(r[0]={s:-1,f:m.f+v.f,l:m,r:v};x!=c-1;)m=r[r[E].f<r[T].f?E++:T++],v=r[E!=x&&r[E].f<r[T].f?E++:T++],r[x++]={s:-1,f:m.f+v.f,l:m,r:v};for(var R=p[0].s,l=1;l<c;++l)p[l].s>R&&(R=p[l].s);var F=new ir(R+1),U=Gr(r[x-1],F,0);if(U>t){var l=0,P=0,O=U-t,z=1<<O;for(p.sort(function(W,J){return F[J.s]-F[W.s]||W.f-J.f});l<c;++l){var L=p[l].s;if(F[L]>t)P+=z-(1<<U-F[L]),F[L]=t;else break}for(P>>>=O;P>0;){var k=p[l].s;F[k]<t?P-=1<<t-F[k]++-1:++l}for(;l>=0&&P;--l){var H=p[l].s;F[H]==t&&(--F[H],++P)}U=t}return[new hn(F),U]},Gr=function(s,t,r){return s.s==-1?Math.max(Gr(s.l,t,r+1),Gr(s.r,t,r+1)):t[s.s]=r},Ki=function(s){for(var t=s.length;t&&!s[--t];);for(var r=new ir(++t),l=0,c=s[0],p=1,h=function(v){r[l++]=v},m=1;m<=t;++m)if(s[m]==c&&m!=t)++p;else{if(!c&&p>2){for(;p>138;p-=138)h(32754);p>2&&(h(p>10?p-11<<5|28690:p-3<<5|12305),p=0)}else if(p>3){for(h(c),--p;p>6;p-=6)h(8304);p>2&&(h(p-3<<5|8208),p=0)}for(;p--;)h(c);p=1,c=s[m]}return[r.subarray(0,l),t]},_o=function(s,t){for(var r=0,l=0;l<t.length;++l)r+=s[l]*t[l];return r},ft=function(s,t,r){var l=r.length,c=dr(t+2);s[c]=l&255,s[c+1]=l>>>8,s[c+2]=s[c]^255,s[c+3]=s[c+1]^255;for(var p=0;p<l;++p)s[c+p+4]=r[p];return(c+4+l)*8},mr=function(s,t,r,l,c,p,h,m,v,E,x){Vr(t,x++,r),++c[256];for(var T=zr(c,15),R=T[0],F=T[1],U=zr(p,15),P=U[0],O=U[1],z=Ki(R),L=z[0],k=z[1],H=Ki(P),X=H[0],W=H[1],J=new ir(19),Y=0;Y<L.length;++Y)J[L[Y]&31]++;for(var Y=0;Y<X.length;++Y)J[X[Y]&31]++;for(var ce=zr(J,7),ue=ce[0],ge=ce[1],le=19;le>4&&!ue[ci[le-1]];--le);var Me=E+5<<3,me=_o(c,Di)+_o(p,ts)+h,Te=_o(c,R)+_o(p,P)+h+14+3*le+_o(J,ue)+(2*J[16]+3*J[17]+7*J[18]);if(Me<=me&&Me<=Te)return ft(t,x,s.subarray(v,v+E));var Ue,Re,Ge,De;if(Vr(t,x,1+(Te<me)),x+=2,Te<me){Ue=ri(R,F,0),Re=R,Ge=ri(P,O,0),De=P;var Xe=ri(ue,ge,0);Vr(t,x,k-257),Vr(t,x+5,W-1),Vr(t,x+10,le-4),x+=14;for(var Y=0;Y<le;++Y)Vr(t,x+3*Y,ue[ci[Y]]);x+=3*le;for(var Ce=[L,X],Ee=0;Ee<2;++Ee)for(var _e=Ce[Ee],Y=0;Y<_e.length;++Y){var oe=_e[Y]&31;Vr(t,x,Xe[oe]),x+=ue[oe],oe>15&&(Vr(t,x,_e[Y]>>>5&127),x+=_e[Y]>>>12)}}else Ue=Ye,Re=Di,Ge=an,De=ts;for(var Y=0;Y<m;++Y)if(l[Y]>255){var oe=l[Y]>>>18&31;$r(t,x,Ue[oe+257]),x+=Re[oe+257],oe>7&&(Vr(t,x,l[Y]>>>23&31),x+=kr[oe]);var Ae=l[Y]&31;$r(t,x,Ge[Ae]),x+=De[Ae],Ae>3&&($r(t,x,l[Y]>>>5&8191),x+=hi[Ae])}else $r(t,x,Ue[l[Y]]),x+=Re[l[Y]];return $r(t,x,Ue[256]),x+Re[256]},Xt=new Cr([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),sr=new hn(0),Mr=function(s,t,r,l,c,p){var h=s.length,m=new hn(l+h+5*(1+Math.ceil(h/7e3))+c),v=m.subarray(l,m.length-c),E=0;if(!t||h<8)for(var x=0;x<=h;x+=65535){var T=x+65535;T<h?E=ft(v,E,s.subarray(x,T)):(v[x]=p,E=ft(v,E,s.subarray(x,h)))}else{for(var R=Xt[t-1],F=R>>>13,U=R&8191,P=(1<<r)-1,O=new ir(32768),z=new ir(P+1),L=Math.ceil(r/3),k=2*L,H=function(zt){return(s[zt]^s[zt+1]<<L^s[zt+2]<<k)&P},X=new Cr(25e3),W=new ir(288),J=new ir(32),Y=0,ce=0,x=0,ue=0,ge=0,le=0;x<h;++x){var Me=H(x),me=x&32767,Te=z[Me];if(O[me]=Te,z[Me]=me,ge<=x){var Ue=h-x;if((Y>7e3||ue>24576)&&Ue>423){E=mr(s,v,0,X,W,J,ce,ue,le,x-le,E),ue=Y=ce=0,le=x;for(var Re=0;Re<286;++Re)W[Re]=0;for(var Re=0;Re<30;++Re)J[Re]=0}var Ge=2,De=0,Xe=U,Ce=me-Te&32767;if(Ue>2&&Me==H(x-Ce))for(var Ee=Math.min(F,Ue)-1,_e=Math.min(32767,x),oe=Math.min(258,Ue);Ce<=_e&&--Xe&&me!=Te;){if(s[x+Ge]==s[x+Ge-Ce]){for(var Ae=0;Ae<oe&&s[x+Ae]==s[x+Ae-Ce];++Ae);if(Ae>Ge){if(Ge=Ae,De=Ce,Ae>Ee)break;for(var Be=Math.min(Ce,Ae-2),ve=0,Re=0;Re<Be;++Re){var ke=x-Ce+Re+32768&32767,vt=O[ke],ht=ke-vt+32768&32767;ht>ve&&(ve=ht,Te=ke)}}}me=Te,Te=O[me],Ce+=me-Te+32768&32767}if(De){X[ue++]=268435456|qn[Ge]<<18|wn[De];var dt=qn[Ge]&31,$e=wn[De]&31;ce+=kr[dt]+hi[$e],++W[257+dt],++J[$e],ge=x+Ge,++Y}else X[ue++]=s[x],++W[s[x]]}}E=mr(s,v,p,X,W,J,ce,ue,le,x-le,E),!p&&E&7&&(E=ft(v,E+1,sr))}return on(m,0,l+dr(E)+c)},Ao=null,ds=function(){var s=-1;return{p:function(t){for(var r=s,l=0;l<t.length;++l)r=Ao[r&255^t[l]]^r>>>8;s=r},d:function(){return~s}}},$s=function(){var s=1,t=0;return{p:function(r){for(var l=s,c=t,p=r.length,h=0;h!=p;){for(var m=Math.min(h+2655,p);h<m;++h)c+=l+=r[h];l=(l&65535)+15*(l>>16),c=(c&65535)+15*(c>>16)}s=l,t=c},d:function(){return s%=65521,t%=65521,(s&255)<<24|s>>>8<<16|(t&255)<<8|t>>>8}}},Yp=function(s,t,r,l,c){return Mr(s,t.level==null?6:t.level,t.mem==null?Math.ceil(Math.max(8,Math.min(13,Math.log(s.length)))*1.5):12+t.mem,r,l,!c)},hs=function(s,t){var r={};for(var l in s)r[l]=s[l];for(var l in t)r[l]=t[l];return r},mp=function(s,t,r){for(var l=s(),c=s.toString(),p=c.slice(c.indexOf("[")+1,c.lastIndexOf("]")).replace(/ /g,"").split(","),h=0;h<l.length;++h){var m=l[h],v=p[h];if(typeof m=="function"){t+=";"+v+"=";var E=m.toString();if(m.prototype)if(E.indexOf("[native code]")!=-1){var x=E.indexOf(" ",8)+1;t+=E.slice(x,E.indexOf("(",x))}else{t+=E;for(var T in m.prototype)t+=";"+v+".prototype."+T+"="+m.prototype[T].toString()}else t+=E}else r[v]=m}return[t,r]},La=null,$v=function(s){var t=[];for(var r in s)(s[r]instanceof hn||s[r]instanceof ir||s[r]instanceof Cr)&&t.push((s[r]=new s[r].constructor(s[r])).buffer);return t},yA=function(s,t,r,l){var c;if(!La[r]){for(var p="",h={},m=s.length-1,v=0;v<m;++v)c=mp(s[v],p,h),p=c[0],h=c[1];La[r]=mp(s[m],p,h)}var E=hs({},La[r][1]);return zn(La[r][0]+";onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage="+t.toString()+"}",r,E,$v(E),l)},vA=function(){return[hn,ir,Cr,kr,hi,ci,tt,tr,Fe,Kn,Hr,ri,Hn,$n,Wr,dr,on,ti,Jf,Rd,_A]},Yf=function(){return[hn,ir,Cr,kr,hi,ci,qn,wn,Ye,Di,an,ts,Hr,Xt,sr,ri,Vr,$r,zr,Gr,Ki,_o,ft,mr,dr,on,Mr,Yp,eo,Rd]},e2=function(){return[Ai,Ri,xr,ds,Ao]},G0=function(){return[Mi,Zi]},t2=function(){return[zi,xr,$s]},nE=function(){return[ns]},Rd=function(s){return postMessage(s,[s.buffer])},_A=function(s){return s&&s.size&&new hn(s.size)},Ne=function(s,t,r,l,c,p){var h=yA(r,l,c,function(m,v){h.terminate(),p(m,v)});return h.postMessage([s,t],t.consume?[s.buffer]:[]),function(){h.terminate()}},Nt=function(s){return s.ondata=function(t,r){return postMessage([t,r],[t.buffer])},function(t){return s.push(t.data[0],t.data[1])}},pn=function(s,t,r,l,c){var p,h=yA(s,l,c,function(m,v){m?(h.terminate(),t.ondata.call(t,m)):(v[1]&&h.terminate(),t.ondata.call(t,m,v[0],v[1]))});h.postMessage(r),t.push=function(m,v){if(p)throw"stream finished";if(!t.ondata)throw"no stream handler";h.postMessage([m,p=v],[m.buffer])},t.terminate=function(){h.terminate()}},Ct=function(s,t){return s[t]|s[t+1]<<8},qt=function(s,t){return(s[t]|s[t+1]<<8|s[t+2]<<16|s[t+3]<<24)>>>0},Pr=function(s,t){return qt(s,t)+qt(s,t+4)*4294967296},xr=function(s,t,r){for(;r;++t)s[t]=r,r>>>=8},Ai=function(s,t){var r=t.filename;if(s[0]=31,s[1]=139,s[2]=8,s[8]=t.level<2?4:t.level==9?2:0,s[9]=3,t.mtime!=0&&xr(s,4,Math.floor(new Date(t.mtime||Date.now())/1e3)),r){s[3]=8;for(var l=0;l<=r.length;++l)s[l+10]=r.charCodeAt(l)}},Mi=function(s){if(s[0]!=31||s[1]!=139||s[2]!=8)throw"invalid gzip data";var t=s[3],r=10;t&4&&(r+=s[10]|(s[11]<<8)+2);for(var l=(t>>3&1)+(t>>4&1);l>0;l-=!s[r++]);return r+(t&2)},Zi=function(s){var t=s.length;return(s[t-4]|s[t-3]<<8|s[t-2]<<16|s[t-1]<<24)>>>0},Ri=function(s){return 10+(s.filename&&s.filename.length+1||0)},zi=function(s,t){var r=t.level,l=r==0?0:r<6?1:r==9?3:2;s[0]=120,s[1]=l<<6|(l?32-2*l:1)},ns=function(s){if((s[0]&15)!=8||s[0]>>>4>7||(s[0]<<8|s[1])%31)throw"invalid zlib data";if(s[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function ha(s,t){return!t&&typeof s=="function"&&(t=s,s={}),this.ondata=t,s}var Jp=null,Id=null;function fa(s,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return Ne(s,t,[Yf],function(l){return Rd(eo(l.data[0],l.data[1]))},0,r)}function eo(s,t){return Yp(s,t||{},0,0)}var n2=null,$a=null;function Fd(s,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return Ne(s,t,[vA],function(l){return Rd(Jf(l.data[0],_A(l.data[1])))},1,r)}function Jf(s,t){return ti(s,t)}var U0=null,r2=null;function ic(s,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return Ne(s,t,[Yf,e2,function(){return[Od]}],function(l){return Rd(Od(l.data[0],l.data[1]))},2,r)}function Od(s,t){t||(t={});var r=ds(),l=s.length;r.p(s);var c=Yp(s,t,Ri(t),8),p=c.length;return Ai(c,t),xr(c,p-8,r.d()),xr(c,p-4,l),c}var i2=null,Qc=null;function EA(s,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return Ne(s,t,[vA,G0,function(){return[bA]}],function(l){return Rd(bA(l.data[0]))},3,r)}function bA(s,t){return ti(s.subarray(Mi(s),-8),t||new hn(Zi(s)))}var rE=null,GB=null;function UB(s,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return Ne(s,t,[Yf,t2,function(){return[Pb]}],function(l){return Rd(Pb(l.data[0],l.data[1]))},4,r)}function Pb(s,t){t||(t={});var r=$s();r.p(s);var l=Yp(s,t,2,4);return zi(l,t),xr(l,l.length-4,r.d()),l}var NB=null,jB=null;function zC(s,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return Ne(s,t,[vA,nE,function(){return[Zf]}],function(l){return Rd(Zf(l.data[0],_A(l.data[1])))},5,r)}function Zf(s,t){return ti((ns(s),s.subarray(2,-4)),t)}var HB=null,WB=null;function VB(s,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";return s[0]==31&&s[1]==139&&s[2]==8?EA(s,t,r):(s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31?Fd(s,t,r):zC(s,t,r)}function QB(s,t){return s[0]==31&&s[1]==139&&s[2]==8?bA(s,t):(s[0]&15)!=8||s[0]>>4>7||(s[0]<<8|s[1])%31?Jf(s,t):Zf(s,t)}var iE=function(s,t,r,l){for(var c in s){var p=s[c],h=t+c;p instanceof hn?r[h]=[p,l]:Array.isArray(p)?r[h]=[p[0],hs(l,p[1])]:iE(p,h+"/",r,l)}},kb=typeof TextEncoder!="undefined"&&new TextEncoder,oE=typeof TextDecoder!="undefined"&&new TextDecoder,GC=0;try{oE.decode(sr,{stream:!0}),GC=1}catch(s){}var UC=function(s){for(var t="",r=0;;){var l=s[r++],c=(l>127)+(l>223)+(l>239);if(r+c>s.length)return[t,on(s,r-1)];c?c==3?(l=((l&15)<<18|(s[r++]&63)<<12|(s[r++]&63)<<6|s[r++]&63)-65536,t+=String.fromCharCode(55296|l>>10,56320|l&1023)):c&1?t+=String.fromCharCode((l&31)<<6|s[r++]&63):t+=String.fromCharCode((l&15)<<12|(s[r++]&63)<<6|s[r++]&63):t+=String.fromCharCode(l)}},KB=null,XB=null;function o2(s,t){if(t){for(var r=new hn(s.length),l=0;l<s.length;++l)r[l]=s.charCodeAt(l);return r}if(kb)return kb.encode(s);for(var c=s.length,p=new hn(s.length+(s.length>>1)),h=0,m=function(x){p[h++]=x},l=0;l<c;++l){if(h+5>p.length){var v=new hn(h+8+(c-l<<1));v.set(p),p=v}var E=s.charCodeAt(l);E<128||t?m(E):E<2048?(m(192|E>>6),m(128|E&63)):E>55295&&E<57344?(E=65536+(E&1047552)|s.charCodeAt(++l)&1023,m(240|E>>18),m(128|E>>12&63),m(128|E>>6&63),m(128|E&63)):(m(224|E>>12),m(128|E>>6&63),m(128|E&63))}return on(p,0,h)}function NC(s,t){if(t){for(var r="",l=0;l<s.length;l+=16384)r+=String.fromCharCode.apply(null,s.subarray(l,l+16384));return r}else{if(oE)return oE.decode(s);var c=UC(s),p=c[0],h=c[1];if(h.length)throw"invalid utf-8 data";return p}}var YB=function(s){return s==1?3:s<6?2:s==9?1:0},zb=function(s,t){return t+30+Ct(s,t+26)+Ct(s,t+28)},Gb=function(s,t,r){var l=Ct(s,t+28),c=NC(s.subarray(t+46,t+46+l),!(Ct(s,t+8)&2048)),p=t+46+l,h=qt(s,t+20),m=r&&h==4294967295?jC(s,p):[h,qt(s,t+24),qt(s,t+42)],v=m[0],E=m[1],x=m[2];return[Ct(s,t+10),v,E,c,p+Ct(s,t+30)+Ct(s,t+32),x]},jC=function(s,t){for(;Ct(s,t)!=1;t+=4+Ct(s,t+2));return[Pr(s,t+12),Pr(s,t+4),Pr(s,t+20)]},MA=function(s){var t=0;if(s)for(var r in s){var l=s[r].length;if(l>65535)throw"extra field too long";t+=l+4}return t},s2=function(s,t,r,l,c,p,h,m){var v=l.length,E=r.extra,x=m&&m.length,T=MA(E);xr(s,t,h!=null?33639248:67324752),t+=4,h!=null&&(s[t++]=20,s[t++]=r.os),s[t]=20,t+=2,s[t++]=r.flag<<1|(p==null&&8),s[t++]=c&&8,s[t++]=r.compression&255,s[t++]=r.compression>>8;var R=new Date(r.mtime==null?Date.now():r.mtime),F=R.getFullYear()-1980;if(F<0||F>119)throw"date not in range 1980-2099";if(xr(s,t,F<<25|R.getMonth()+1<<21|R.getDate()<<16|R.getHours()<<11|R.getMinutes()<<5|R.getSeconds()>>>1),t+=4,p!=null&&(xr(s,t,r.crc),xr(s,t+4,p),xr(s,t+8,r.size)),xr(s,t+12,v),xr(s,t+14,T),t+=16,h!=null&&(xr(s,t,x),xr(s,t+6,r.attrs),xr(s,t+10,h),t+=14),s.set(l,t),t+=v,T)for(var U in E){var P=E[U],O=P.length;xr(s,t,+U),xr(s,t+2,O),s.set(P,t+4),t+=4+O}return x&&(s.set(m,t),t+=x),t},Ub=function(s,t,r,l,c){xr(s,t,101010256),xr(s,t+8,r),xr(s,t+10,r),xr(s,t+12,l),xr(s,t+16,c)},JB=null,ZB=null,qB=null,$B=null;function eR(s,t,r){if(r||(r=t,t={}),typeof r!="function")throw"no callback";var l={};iE(s,"",l,t);var c=Object.keys(l),p=c.length,h=0,m=0,v=p,E=new Array(p),x=[],T=function(){for(var P=0;P<x.length;++P)x[P]()},R=function(){var P=new hn(m+22),O=h,z=m-h;m=0;for(var L=0;L<v;++L){var k=E[L];try{var H=k.c.length;s2(P,m,k,k.f,k.u,H);var X=30+k.f.length+MA(k.extra),W=m+X;P.set(k.c,W),s2(P,h,k,k.f,k.u,H,m,k.m),h+=16+X+(k.m?k.m.length:0),m=W+H}catch(J){return r(J,null)}}Ub(P,h,E.length,z,O),r(null,P)};p||R();for(var F=function(P){var O=c[P],z=l[O],L=z[0],k=z[1],H=ds(),X=L.length;H.p(L);var W=o2(O),J=W.length,Y=k.comment,ce=Y&&o2(Y),ue=ce&&ce.length,ge=MA(k.extra),le=k.level==0?0:8,Me=function(me,Te){if(me)T(),r(me,null);else{var Ue=Te.length;E[P]=hs(k,{size:X,crc:H.d(),c:Te,f:W,m:ce,u:J!=O.length||ce&&Y.length!=ue,compression:le}),h+=30+J+ge+Ue,m+=76+2*(J+ge)+(ue||0)+Ue,--p||R()}};if(J>65535&&Me("filename too long",null),!le)Me(null,L);else if(X<16e4)try{Me(null,eo(L,k))}catch(me){Me(me,null)}else x.push(fa(L,k,Me))},U=0;U<v;++U)F(U);return T}function tR(s,t){t||(t={});var r={},l=[];iE(s,"",r,t);var c=0,p=0;for(var h in r){var m=r[h],v=m[0],E=m[1],x=E.level==0?0:8,T=o2(h),R=T.length,F=E.comment,U=F&&o2(F),P=U&&U.length,O=MA(E.extra);if(R>65535)throw"filename too long";var z=x?eo(v,E):v,L=z.length,k=ds();k.p(v),l.push(hs(E,{size:v.length,crc:k.d(),c:z,f:T,m:U,u:R!=h.length||U&&F.length!=P,o:c,compression:x})),c+=30+R+O+L,p+=76+2*(R+O)+(P||0)+L}for(var H=new hn(p+22),X=c,W=p-c,J=0;J<l.length;++J){var T=l[J];s2(H,T.o,T,T.f,T.u,T.c.length);var Y=30+T.f.length+MA(T.extra);H.set(T.c,T.o+Y),s2(H,c,T,T.f,T.u,T.c.length,T.o,T.m),c+=16+Y+(T.m?T.m.length:0)}return Ub(H,c,l.length,W,X),H}var nR=null,rR=null,iR=null,oR=null;function sR(s,t){if(typeof t!="function")throw"no callback";for(var r=[],l=function(){for(var R=0;R<r.length;++R)r[R]()},c={},p=s.length-22;qt(s,p)!=101010256;--p)if(!p||s.length-p>65558){t("invalid zip file",null);return}var h=Ct(s,p+8);h||t(null,{});var m=h,v=qt(s,p+16),E=v==4294967295;if(E){if(p=qt(s,p-12),qt(s,p)!=101075792){t("invalid zip file",null);return}m=h=qt(s,p+32),v=qt(s,p+48)}for(var x=function(R){var F=Gb(s,v,E),U=F[0],P=F[1],O=F[2],z=F[3],L=F[4],k=F[5],H=zb(s,k);v=L;var X=function(J,Y){J?(l(),t(J,null)):(c[z]=Y,--h||t(null,c))};if(!U)X(null,on(s,H,H+P));else if(U==8){var W=s.subarray(H,H+P);if(P<32e4)try{X(null,Jf(W,new hn(O)))}catch(J){X(J,null)}else r.push(Fd(W,{size:O},X))}else X("unknown compression type "+U,null)},T=0;T<m;++T)x(T);return l}function aR(s){for(var t={},r=s.length-22;qt(s,r)!=101010256;--r)if(!r||s.length-r>65558)throw"invalid zip file";var l=Ct(s,r+8);if(!l)return{};var c=qt(s,r+16),p=c==4294967295;if(p){if(r=qt(s,r-12),qt(s,r)!=101075792)throw"invalid zip file";l=qt(s,r+32),c=qt(s,r+48)}for(var h=0;h<l;++h){var m=Gb(s,c,p),v=m[0],E=m[1],x=m[2],T=m[3],R=m[4],F=m[5],U=zb(s,F);if(c=R,!v)t[T]=on(s,U,U+E);else if(v==8)t[T]=Jf(s.subarray(U,U+E),new hn(x));else throw"unknown compression type "+v}return t}function a2(s,t,r){const l=r.length-s-1;if(t>=r[l])return l-1;if(t<=r[s])return s;let c=s,p=l,h=Math.floor((c+p)/2);for(;t<r[h]||t>=r[h+1];)t<r[h]?p=h:c=h,h=Math.floor((c+p)/2);return h}function sE(s,t,r,l){const c=[],p=[],h=[];c[0]=1;for(let m=1;m<=r;++m){p[m]=t-l[s+1-m],h[m]=l[s+m]-t;let v=0;for(let E=0;E<m;++E){const x=h[E+1],T=p[m-E],R=c[E]/(x+T);c[E]=v+x*R,v=T*R}c[m]=v}return c}function HC(s,t,r,l){const c=a2(s,l,t),p=sE(c,l,s,t),h=new i.Vector4(0,0,0,0);for(let m=0;m<=s;++m){const v=r[c-s+m],E=p[m],x=v.w*E;h.x+=v.x*x,h.y+=v.y*x,h.z+=v.z*x,h.w+=v.w*E}return h}function WC(s,t,r,l,c){const p=[];for(let T=0;T<=r;++T)p[T]=0;const h=[];for(let T=0;T<=l;++T)h[T]=p.slice(0);const m=[];for(let T=0;T<=r;++T)m[T]=p.slice(0);m[0][0]=1;const v=p.slice(0),E=p.slice(0);for(let T=1;T<=r;++T){v[T]=t-c[s+1-T],E[T]=c[s+T]-t;let R=0;for(let F=0;F<T;++F){const U=E[F+1],P=v[T-F];m[T][F]=U+P;const O=m[F][T-1]/m[T][F];m[F][T]=R+U*O,R=P*O}m[T][T]=R}for(let T=0;T<=r;++T)h[0][T]=m[T][r];for(let T=0;T<=r;++T){let R=0,F=1;const U=[];for(let P=0;P<=r;++P)U[P]=p.slice(0);U[0][0]=1;for(let P=1;P<=l;++P){let O=0;const z=T-P,L=r-P;T>=P&&(U[F][0]=U[R][0]/m[L+1][z],O=U[F][0]*m[z][L]);const k=z>=-1?1:-z,H=T-1<=L?P-1:r-T;for(let W=k;W<=H;++W)U[F][W]=(U[R][W]-U[R][W-1])/m[L+1][z+W],O+=U[F][W]*m[z+W][L];T<=L&&(U[F][P]=-U[R][P-1]/m[L+1][T],O+=U[F][P]*m[T][L]),h[P][T]=O;const X=R;R=F,F=X}}let x=r;for(let T=1;T<=l;++T){for(let R=0;R<=r;++R)h[T][R]*=x;x*=r-T}return h}function VC(s,t,r,l,c){const p=c<s?c:s,h=[],m=a2(s,l,t),v=WC(m,l,s,p,t),E=[];for(let x=0;x<r.length;++x){const T=r[x].clone(),R=T.w;T.x*=R,T.y*=R,T.z*=R,E[x]=T}for(let x=0;x<=p;++x){const T=E[m-s].clone().multiplyScalar(v[x][0]);for(let R=1;R<=s;++R)T.add(E[m-s+R].clone().multiplyScalar(v[x][R]));h[x]=T}for(let x=p+1;x<=c+1;++x)h[x]=new i.Vector4(0,0,0);return h}function QC(s,t){let r=1;for(let c=2;c<=s;++c)r*=c;let l=1;for(let c=2;c<=t;++c)l*=c;for(let c=2;c<=s-t;++c)l*=c;return r/l}function KC(s){const t=s.length,r=[],l=[];for(let p=0;p<t;++p){const h=s[p];r[p]=new i.Vector3(h.x,h.y,h.z),l[p]=h.w}const c=[];for(let p=0;p<t;++p){const h=r[p].clone();for(let m=1;m<=p;++m)h.sub(c[p-m].clone().multiplyScalar(QC(p,m)*l[m]));c[p]=h.divideScalar(l[0])}return c}function XC(s,t,r,l,c){const p=VC(s,t,r,l,c);return KC(p)}function lR(s,t,r,l,c,p,h,m){const v=a2(s,p,r),E=a2(t,h,l),x=sE(v,p,s,r),T=sE(E,h,t,l),R=[];for(let U=0;U<=t;++U){R[U]=new Vector4(0,0,0,0);for(let P=0;P<=s;++P){const O=c[v-s+P][E-t+U].clone(),z=O.w;O.x*=z,O.y*=z,O.z*=z,R[U].add(O.multiplyScalar(x[P]))}}const F=new Vector4(0,0,0,0);for(let U=0;U<=t;++U)F.add(R[U].multiplyScalar(T[U]));F.divideScalar(F.w),m.set(F.x,F.y,F.z)}class Nb extends i.Curve{constructor(t,r,l,c,p){super(),this.degree=t,this.knots=r,this.controlPoints=[],this.startKnot=c||0,this.endKnot=p||this.knots.length-1;for(let h=0;h<l.length;++h){const m=l[h];this.controlPoints[h]=new i.Vector4(m.x,m.y,m.z,m.w)}}getPoint(t,r){const l=r||new i.Vector3,c=this.knots[this.startKnot]+t*(this.knots[this.endKnot]-this.knots[this.startKnot]),p=HC(this.degree,this.knots,this.controlPoints,c);return p.w!=1&&p.divideScalar(p.w),l.set(p.x,p.y,p.z)}getTangent(t,r){const l=r||new i.Vector3,c=this.knots[0]+t*(this.knots[this.knots.length-1]-this.knots[0]),p=XC(this.degree,this.knots,this.controlPoints,c,1);return l.copy(p[1]).normalize(),l}}var el=A(5108);let oo,xa,Kc;class aE extends i.Loader{constructor(t){super(t)}load(t,r,l,c){const p=this,h=p.path===""?i.LoaderUtils.extractUrlBase(t):p.path,m=new i.FileLoader(this.manager);m.setPath(p.path),m.setResponseType("arraybuffer"),m.setRequestHeader(p.requestHeader),m.setWithCredentials(p.withCredentials),m.load(t,function(v){try{r(p.parse(v,h))}catch(E){c?c(E):el.error(E),p.manager.itemError(t)}},l,c)}parse(t,r){if(eS(t))oo=new $C().parse(t);else{const c=Kb(t);if(!tS(c))throw new Error("THREE.FBXLoader: Unknown format.");if(Wb(c)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+Wb(c));oo=new qC().parse(c)}const l=new i.TextureLoader(this.manager).setPath(this.resourcePath||r).setCrossOrigin(this.crossOrigin);return new YC(l,this.manager).parse(oo)}}class YC{constructor(t,r){this.textureLoader=t,this.manager=r}parse(){xa=this.parseConnections();const t=this.parseImages(),r=this.parseTextures(t),l=this.parseMaterials(r),c=this.parseDeformers(),p=new JC().parse(c);return this.parseScene(c,p,l),Kc}parseConnections(){const t=new Map;return"Connections"in oo&&oo.Connections.connections.forEach(function(l){const c=l[0],p=l[1],h=l[2];t.has(c)||t.set(c,{parents:[],children:[]});const m={ID:p,relationship:h};t.get(c).parents.push(m),t.has(p)||t.set(p,{parents:[],children:[]});const v={ID:c,relationship:h};t.get(p).children.push(v)}),t}parseImages(){const t={},r={};if("Video"in oo.Objects){const l=oo.Objects.Video;for(const c in l){const p=l[c],h=parseInt(c);if(t[h]=p.RelativeFilename||p.Filename,"Content"in p){const m=p.Content instanceof ArrayBuffer&&p.Content.byteLength>0,v=typeof p.Content=="string"&&p.Content!=="";if(m||v){const E=this.parseImage(l[c]);r[p.RelativeFilename||p.Filename]=E}}}}for(const l in t){const c=t[l];r[c]!==void 0?t[l]=r[c]:t[l]=t[l].split("\\").pop()}return t}parseImage(t){const r=t.Content,l=t.RelativeFilename||t.Filename,c=l.slice(l.lastIndexOf(".")+1).toLowerCase();let p;switch(c){case"bmp":p="image/bmp";break;case"jpg":case"jpeg":p="image/jpeg";break;case"png":p="image/png";break;case"tif":p="image/tiff";break;case"tga":this.manager.getHandler(".tga")===null&&el.warn("FBXLoader: TGA loader not found, skipping ",l),p="image/tga";break;default:el.warn('FBXLoader: Image type "'+c+'" is not supported.');return}if(typeof r=="string")return"data:"+p+";base64,"+r;{const h=new Uint8Array(r);return window.URL.createObjectURL(new Blob([h],{type:p}))}}parseTextures(t){const r=new Map;if("Texture"in oo.Objects){const l=oo.Objects.Texture;for(const c in l){const p=this.parseTexture(l[c],t);r.set(parseInt(c),p)}}return r}parseTexture(t,r){const l=this.loadTexture(t,r);l.ID=t.id,l.name=t.attrName;const c=t.WrapModeU,p=t.WrapModeV,h=c!==void 0?c.value:0,m=p!==void 0?p.value:0;if(l.wrapS=h===0?i.RepeatWrapping:i.ClampToEdgeWrapping,l.wrapT=m===0?i.RepeatWrapping:i.ClampToEdgeWrapping,"Scaling"in t){const v=t.Scaling.value;l.repeat.x=v[0],l.repeat.y=v[1]}return l}loadTexture(t,r){let l;const c=this.textureLoader.path,p=xa.get(t.id).children;p!==void 0&&p.length>0&&r[p[0].ID]!==void 0&&(l=r[p[0].ID],(l.indexOf("blob:")===0||l.indexOf("data:")===0)&&this.textureLoader.setPath(void 0));let h;const m=t.FileName.slice(-3).toLowerCase();if(m==="tga"){const v=this.manager.getHandler(".tga");v===null?(el.warn("FBXLoader: TGA loader not found, creating placeholder texture for",t.RelativeFilename),h=new i.Texture):(v.setPath(this.textureLoader.path),h=v.load(l))}else m==="psd"?(el.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",t.RelativeFilename),h=new i.Texture):h=this.textureLoader.load(l);return this.textureLoader.setPath(c),h}parseMaterials(t){const r=new Map;if("Material"in oo.Objects){const l=oo.Objects.Material;for(const c in l){const p=this.parseMaterial(l[c],t);p!==null&&r.set(parseInt(c),p)}}return r}parseMaterial(t,r){const l=t.id,c=t.attrName;let p=t.ShadingModel;if(typeof p=="object"&&(p=p.value),!xa.has(l))return null;const h=this.parseParameters(t,r,l);let m;switch(p.toLowerCase()){case"phong":m=new i.MeshPhongMaterial;break;case"lambert":m=new i.MeshLambertMaterial;break;default:el.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',p),m=new i.MeshPhongMaterial;break}return m.setValues(h),m.name=c,m}parseParameters(t,r,l){const c={};t.BumpFactor&&(c.bumpScale=t.BumpFactor.value),t.Diffuse?c.color=new i.Color().fromArray(t.Diffuse.value):t.DiffuseColor&&(t.DiffuseColor.type==="Color"||t.DiffuseColor.type==="ColorRGB")&&(c.color=new i.Color().fromArray(t.DiffuseColor.value)),t.DisplacementFactor&&(c.displacementScale=t.DisplacementFactor.value),t.Emissive?c.emissive=new i.Color().fromArray(t.Emissive.value):t.EmissiveColor&&(t.EmissiveColor.type==="Color"||t.EmissiveColor.type==="ColorRGB")&&(c.emissive=new i.Color().fromArray(t.EmissiveColor.value)),t.EmissiveFactor&&(c.emissiveIntensity=parseFloat(t.EmissiveFactor.value)),t.Opacity&&(c.opacity=parseFloat(t.Opacity.value)),c.opacity<1&&(c.transparent=!0),t.ReflectionFactor&&(c.reflectivity=t.ReflectionFactor.value),t.Shininess&&(c.shininess=t.Shininess.value),t.Specular?c.specular=new i.Color().fromArray(t.Specular.value):t.SpecularColor&&t.SpecularColor.type==="Color"&&(c.specular=new i.Color().fromArray(t.SpecularColor.value));const p=this;return xa.get(l).children.forEach(function(h){const m=h.relationship;switch(m){case"Bump":c.bumpMap=p.getTexture(r,h.ID);break;case"Maya|TEX_ao_map":c.aoMap=p.getTexture(r,h.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":c.map=p.getTexture(r,h.ID),c.map!==void 0&&("colorSpace"in c.map?c.map.colorSpace="srgb":c.map.encoding=3001);break;case"DisplacementColor":c.displacementMap=p.getTexture(r,h.ID);break;case"EmissiveColor":c.emissiveMap=p.getTexture(r,h.ID),c.emissiveMap!==void 0&&("colorSpace"in c.emissiveMap?c.emissiveMap.colorSpace="srgb":c.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":c.normalMap=p.getTexture(r,h.ID);break;case"ReflectionColor":c.envMap=p.getTexture(r,h.ID),c.envMap!==void 0&&(c.envMap.mapping=i.EquirectangularReflectionMapping,"colorSpace"in c.envMap?c.envMap.colorSpace="srgb":c.envMap.encoding=3001);break;case"SpecularColor":c.specularMap=p.getTexture(r,h.ID),c.specularMap!==void 0&&("colorSpace"in c.specularMap?c.specularMap.colorSpace="srgb":c.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":c.alphaMap=p.getTexture(r,h.ID),c.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:el.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",m);break}}),c}getTexture(t,r){return"LayeredTexture"in oo.Objects&&r in oo.Objects.LayeredTexture&&(el.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),r=xa.get(r).children[0].ID),t.get(r)}parseDeformers(){const t={},r={};if("Deformer"in oo.Objects){const l=oo.Objects.Deformer;for(const c in l){const p=l[c],h=xa.get(parseInt(c));if(p.attrType==="Skin"){const m=this.parseSkeleton(h,l);m.ID=c,h.parents.length>1&&el.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),m.geometryID=h.parents[0].ID,t[c]=m}else if(p.attrType==="BlendShape"){const m={id:c};m.rawTargets=this.parseMorphTargets(h,l),m.id=c,h.parents.length>1&&el.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),r[c]=m}}}return{skeletons:t,morphTargets:r}}parseSkeleton(t,r){const l=[];return t.children.forEach(function(c){const p=r[c.ID];if(p.attrType!=="Cluster")return;const h={ID:c.ID,indices:[],weights:[],transformLink:new i.Matrix4().fromArray(p.TransformLink.a)};"Indexes"in p&&(h.indices=p.Indexes.a,h.weights=p.Weights.a),l.push(h)}),{rawBones:l,bones:[]}}parseMorphTargets(t,r){const l=[];for(let c=0;c<t.children.length;c++){const p=t.children[c],h=r[p.ID],m={name:h.attrName,initialWeight:h.DeformPercent,id:h.id,fullWeights:h.FullWeights.a};if(h.attrType!=="BlendShapeChannel")return;m.geoID=xa.get(parseInt(p.ID)).children.filter(function(v){return v.relationship===void 0})[0].ID,l.push(m)}return l}parseScene(t,r,l){Kc=new i.Group;const c=this.parseModels(t.skeletons,r,l),p=oo.Objects.Model,h=this;c.forEach(function(v){const E=p[v.ID];h.setLookAtProperties(v,E),xa.get(v.ID).parents.forEach(function(T){const R=c.get(T.ID);R!==void 0&&R.add(v)}),v.parent===null&&Kc.add(v)}),this.bindSkeleton(t.skeletons,r,c),this.createAmbientLight(),Kc.traverse(function(v){if(v.userData.transformData){v.parent&&(v.userData.transformData.parentMatrix=v.parent.matrix,v.userData.transformData.parentMatrixWorld=v.parent.matrixWorld);const E=Vb(v.userData.transformData);v.applyMatrix4(E),v.updateWorldMatrix()}});const m=new ZC().parse();Kc.children.length===1&&Kc.children[0].isGroup&&(Kc.children[0].animations=m,Kc=Kc.children[0]),Kc.animations=m}parseModels(t,r,l){const c=new Map,p=oo.Objects.Model;for(const h in p){const m=parseInt(h),v=p[h],E=xa.get(m);let x=this.buildSkeleton(E,t,m,v.attrName);if(!x){switch(v.attrType){case"Camera":x=this.createCamera(E);break;case"Light":x=this.createLight(E);break;case"Mesh":x=this.createMesh(E,r,l);break;case"NurbsCurve":x=this.createCurve(E,r);break;case"LimbNode":case"Root":x=new i.Bone;break;case"Null":default:x=new i.Group;break}x.name=v.attrName?i.PropertyBinding.sanitizeNodeName(v.attrName):"",x.ID=m}this.getTransformData(x,v),c.set(m,x)}return c}buildSkeleton(t,r,l,c){let p=null;return t.parents.forEach(function(h){for(const m in r){const v=r[m];v.rawBones.forEach(function(E,x){if(E.ID===h.ID){const T=p;p=new i.Bone,p.matrixWorld.copy(E.transformLink),p.name=c?i.PropertyBinding.sanitizeNodeName(c):"",p.ID=l,v.bones[x]=p,T!==null&&p.add(T)}})}}),p}createCamera(t){let r,l;if(t.children.forEach(function(c){const p=oo.Objects.NodeAttribute[c.ID];p!==void 0&&(l=p)}),l===void 0)r=new i.Object3D;else{let c=0;l.CameraProjectionType!==void 0&&l.CameraProjectionType.value===1&&(c=1);let p=1;l.NearPlane!==void 0&&(p=l.NearPlane.value/1e3);let h=1e3;l.FarPlane!==void 0&&(h=l.FarPlane.value/1e3);let m=window.innerWidth,v=window.innerHeight;l.AspectWidth!==void 0&&l.AspectHeight!==void 0&&(m=l.AspectWidth.value,v=l.AspectHeight.value);const E=m/v;let x=45;l.FieldOfView!==void 0&&(x=l.FieldOfView.value);const T=l.FocalLength?l.FocalLength.value:null;switch(c){case 0:r=new i.PerspectiveCamera(x,E,p,h),T!==null&&r.setFocalLength(T);break;case 1:r=new i.OrthographicCamera(-m/2,m/2,v/2,-v/2,p,h);break;default:el.warn("THREE.FBXLoader: Unknown camera type "+c+"."),r=new i.Object3D;break}}return r}createLight(t){let r,l;if(t.children.forEach(function(c){const p=oo.Objects.NodeAttribute[c.ID];p!==void 0&&(l=p)}),l===void 0)r=new i.Object3D;else{let c;l.LightType===void 0?c=0:c=l.LightType.value;let p=16777215;l.Color!==void 0&&(p=new i.Color().fromArray(l.Color.value));let h=l.Intensity===void 0?1:l.Intensity.value/100;l.CastLightOnObject!==void 0&&l.CastLightOnObject.value===0&&(h=0);let m=0;l.FarAttenuationEnd!==void 0&&(l.EnableFarAttenuation!==void 0&&l.EnableFarAttenuation.value===0?m=0:m=l.FarAttenuationEnd.value);const v=1;switch(c){case 0:r=new i.PointLight(p,h,m,v);break;case 1:r=new i.DirectionalLight(p,h);break;case 2:let E=Math.PI/3;l.InnerAngle!==void 0&&(E=i.MathUtils.degToRad(l.InnerAngle.value));let x=0;l.OuterAngle!==void 0&&(x=i.MathUtils.degToRad(l.OuterAngle.value),x=Math.max(x,1)),r=new i.SpotLight(p,h,m,E,x,v);break;default:el.warn("THREE.FBXLoader: Unknown light type "+l.LightType.value+", defaulting to a PointLight."),r=new i.PointLight(p,h);break}l.CastShadows!==void 0&&l.CastShadows.value===1&&(r.castShadow=!0)}return r}createMesh(t,r,l){let c,p=null,h=null;const m=[];return t.children.forEach(function(v){r.has(v.ID)&&(p=r.get(v.ID)),l.has(v.ID)&&m.push(l.get(v.ID))}),m.length>1?h=m:m.length>0?h=m[0]:(h=new i.MeshPhongMaterial({color:13421772}),m.push(h)),"color"in p.attributes&&m.forEach(function(v){v.vertexColors=!0}),p.FBX_Deformer?(c=new i.SkinnedMesh(p,h),c.normalizeSkinWeights()):c=new i.Mesh(p,h),c}createCurve(t,r){const l=t.children.reduce(function(p,h){return r.has(h.ID)&&(p=r.get(h.ID)),p},null),c=new i.LineBasicMaterial({color:3342591,linewidth:1});return new i.Line(l,c)}getTransformData(t,r){const l={};"InheritType"in r&&(l.inheritType=parseInt(r.InheritType.value)),"RotationOrder"in r?l.eulerOrder=Qb(r.RotationOrder.value):l.eulerOrder="ZYX","Lcl_Translation"in r&&(l.translation=r.Lcl_Translation.value),"PreRotation"in r&&(l.preRotation=r.PreRotation.value),"Lcl_Rotation"in r&&(l.rotation=r.Lcl_Rotation.value),"PostRotation"in r&&(l.postRotation=r.PostRotation.value),"Lcl_Scaling"in r&&(l.scale=r.Lcl_Scaling.value),"ScalingOffset"in r&&(l.scalingOffset=r.ScalingOffset.value),"ScalingPivot"in r&&(l.scalingPivot=r.ScalingPivot.value),"RotationOffset"in r&&(l.rotationOffset=r.RotationOffset.value),"RotationPivot"in r&&(l.rotationPivot=r.RotationPivot.value),t.userData.transformData=l}setLookAtProperties(t,r){"LookAtProperty"in r&&xa.get(t.ID).children.forEach(function(c){if(c.relationship==="LookAtProperty"){const p=oo.Objects.Model[c.ID];if("Lcl_Translation"in p){const h=p.Lcl_Translation.value;t.target!==void 0?(t.target.position.fromArray(h),Kc.add(t.target)):t.lookAt(new i.Vector3().fromArray(h))}}})}bindSkeleton(t,r,l){const c=this.parsePoseNodes();for(const p in t){const h=t[p];xa.get(parseInt(h.ID)).parents.forEach(function(v){if(r.has(v.ID)){const E=v.ID;xa.get(E).parents.forEach(function(T){l.has(T.ID)&&l.get(T.ID).bind(new i.Skeleton(h.bones),c[T.ID])})}})}}parsePoseNodes(){const t={};if("Pose"in oo.Objects){const r=oo.Objects.Pose;for(const l in r)if(r[l].attrType==="BindPose"&&r[l].NbPoseNodes>0){const c=r[l].PoseNode;Array.isArray(c)?c.forEach(function(p){t[p.Node]=new i.Matrix4().fromArray(p.Matrix.a)}):t[c.Node]=new i.Matrix4().fromArray(c.Matrix.a)}}return t}createAmbientLight(){if("GlobalSettings"in oo&&"AmbientColor"in oo.GlobalSettings){const t=oo.GlobalSettings.AmbientColor.value,r=t[0],l=t[1],c=t[2];if(r!==0||l!==0||c!==0){const p=new i.Color(r,l,c);Kc.add(new i.AmbientLight(p,1))}}}}class JC{parse(t){const r=new Map;if("Geometry"in oo.Objects){const l=oo.Objects.Geometry;for(const c in l){const p=xa.get(parseInt(c)),h=this.parseGeometry(p,l[c],t);r.set(parseInt(c),h)}}return r}parseGeometry(t,r,l){switch(r.attrType){case"Mesh":return this.parseMeshGeometry(t,r,l);case"NurbsCurve":return this.parseNurbsGeometry(r)}}parseMeshGeometry(t,r,l){const c=l.skeletons,p=[],h=t.parents.map(function(T){return oo.Objects.Model[T.ID]});if(h.length===0)return;const m=t.children.reduce(function(T,R){return c[R.ID]!==void 0&&(T=c[R.ID]),T},null);t.children.forEach(function(T){l.morphTargets[T.ID]!==void 0&&p.push(l.morphTargets[T.ID])});const v=h[0],E={};"RotationOrder"in v&&(E.eulerOrder=Qb(v.RotationOrder.value)),"InheritType"in v&&(E.inheritType=parseInt(v.InheritType.value)),"GeometricTranslation"in v&&(E.translation=v.GeometricTranslation.value),"GeometricRotation"in v&&(E.rotation=v.GeometricRotation.value),"GeometricScaling"in v&&(E.scale=v.GeometricScaling.value);const x=Vb(E);return this.genGeometry(r,m,p,x)}genGeometry(t,r,l,c){const p=new i.BufferGeometry;t.attrName&&(p.name=t.attrName);const h=this.parseGeoNode(t,r),m=this.genBuffers(h),v=new i.Float32BufferAttribute(m.vertex,3);if(v.applyMatrix4(c),p.setAttribute("position",v),m.colors.length>0&&p.setAttribute("color",new i.Float32BufferAttribute(m.colors,3)),r&&(p.setAttribute("skinIndex",new i.Uint16BufferAttribute(m.weightsIndices,4)),p.setAttribute("skinWeight",new i.Float32BufferAttribute(m.vertexWeights,4)),p.FBX_Deformer=r),m.normal.length>0){const E=new i.Matrix3().getNormalMatrix(c),x=new i.Float32BufferAttribute(m.normal,3);x.applyNormalMatrix(E),p.setAttribute("normal",x)}if(m.uvs.forEach(function(E,x){let T="uv"+(x+1).toString();x===0&&(T="uv"),p.setAttribute(T,new i.Float32BufferAttribute(m.uvs[x],2))}),h.material&&h.material.mappingType!=="AllSame"){let E=m.materialIndex[0],x=0;if(m.materialIndex.forEach(function(T,R){T!==E&&(p.addGroup(x,R-x,E),E=T,x=R)}),p.groups.length>0){const T=p.groups[p.groups.length-1],R=T.start+T.count;R!==m.materialIndex.length&&p.addGroup(R,m.materialIndex.length-R,E)}p.groups.length===0&&p.addGroup(0,m.materialIndex.length,m.materialIndex[0])}return this.addMorphTargets(p,t,l,c),p}parseGeoNode(t,r){const l={};if(l.vertexPositions=t.Vertices!==void 0?t.Vertices.a:[],l.vertexIndices=t.PolygonVertexIndex!==void 0?t.PolygonVertexIndex.a:[],t.LayerElementColor&&(l.color=this.parseVertexColors(t.LayerElementColor[0])),t.LayerElementMaterial&&(l.material=this.parseMaterialIndices(t.LayerElementMaterial[0])),t.LayerElementNormal&&(l.normal=this.parseNormals(t.LayerElementNormal[0])),t.LayerElementUV){l.uv=[];let c=0;for(;t.LayerElementUV[c];)t.LayerElementUV[c].UV&&l.uv.push(this.parseUVs(t.LayerElementUV[c])),c++}return l.weightTable={},r!==null&&(l.skeleton=r,r.rawBones.forEach(function(c,p){c.indices.forEach(function(h,m){l.weightTable[h]===void 0&&(l.weightTable[h]=[]),l.weightTable[h].push({id:p,weight:c.weights[m]})})})),l}genBuffers(t){const r={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let l=0,c=0,p=!1,h=[],m=[],v=[],E=[],x=[],T=[];const R=this;return t.vertexIndices.forEach(function(F,U){let P,O=!1;F<0&&(F=F^-1,O=!0);let z=[],L=[];if(h.push(F*3,F*3+1,F*3+2),t.color){const k=l2(U,l,F,t.color);v.push(k[0],k[1],k[2])}if(t.skeleton){if(t.weightTable[F]!==void 0&&t.weightTable[F].forEach(function(k){L.push(k.weight),z.push(k.id)}),L.length>4){p||(el.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),p=!0);const k=[0,0,0,0],H=[0,0,0,0];L.forEach(function(X,W){let J=X,Y=z[W];H.forEach(function(ce,ue,ge){if(J>ce){ge[ue]=J,J=ce;const le=k[ue];k[ue]=Y,Y=le}})}),z=k,L=H}for(;L.length<4;)L.push(0),z.push(0);for(let k=0;k<4;++k)x.push(L[k]),T.push(z[k])}if(t.normal){const k=l2(U,l,F,t.normal);m.push(k[0],k[1],k[2])}t.material&&t.material.mappingType!=="AllSame"&&(P=l2(U,l,F,t.material)[0]),t.uv&&t.uv.forEach(function(k,H){const X=l2(U,l,F,k);E[H]===void 0&&(E[H]=[]),E[H].push(X[0]),E[H].push(X[1])}),c++,O&&(R.genFace(r,t,h,P,m,v,E,x,T,c),l++,c=0,h=[],m=[],v=[],E=[],x=[],T=[])}),r}genFace(t,r,l,c,p,h,m,v,E,x){for(let T=2;T<x;T++)t.vertex.push(r.vertexPositions[l[0]]),t.vertex.push(r.vertexPositions[l[1]]),t.vertex.push(r.vertexPositions[l[2]]),t.vertex.push(r.vertexPositions[l[(T-1)*3]]),t.vertex.push(r.vertexPositions[l[(T-1)*3+1]]),t.vertex.push(r.vertexPositions[l[(T-1)*3+2]]),t.vertex.push(r.vertexPositions[l[T*3]]),t.vertex.push(r.vertexPositions[l[T*3+1]]),t.vertex.push(r.vertexPositions[l[T*3+2]]),r.skeleton&&(t.vertexWeights.push(v[0]),t.vertexWeights.push(v[1]),t.vertexWeights.push(v[2]),t.vertexWeights.push(v[3]),t.vertexWeights.push(v[(T-1)*4]),t.vertexWeights.push(v[(T-1)*4+1]),t.vertexWeights.push(v[(T-1)*4+2]),t.vertexWeights.push(v[(T-1)*4+3]),t.vertexWeights.push(v[T*4]),t.vertexWeights.push(v[T*4+1]),t.vertexWeights.push(v[T*4+2]),t.vertexWeights.push(v[T*4+3]),t.weightsIndices.push(E[0]),t.weightsIndices.push(E[1]),t.weightsIndices.push(E[2]),t.weightsIndices.push(E[3]),t.weightsIndices.push(E[(T-1)*4]),t.weightsIndices.push(E[(T-1)*4+1]),t.weightsIndices.push(E[(T-1)*4+2]),t.weightsIndices.push(E[(T-1)*4+3]),t.weightsIndices.push(E[T*4]),t.weightsIndices.push(E[T*4+1]),t.weightsIndices.push(E[T*4+2]),t.weightsIndices.push(E[T*4+3])),r.color&&(t.colors.push(h[0]),t.colors.push(h[1]),t.colors.push(h[2]),t.colors.push(h[(T-1)*3]),t.colors.push(h[(T-1)*3+1]),t.colors.push(h[(T-1)*3+2]),t.colors.push(h[T*3]),t.colors.push(h[T*3+1]),t.colors.push(h[T*3+2])),r.material&&r.material.mappingType!=="AllSame"&&(t.materialIndex.push(c),t.materialIndex.push(c),t.materialIndex.push(c)),r.normal&&(t.normal.push(p[0]),t.normal.push(p[1]),t.normal.push(p[2]),t.normal.push(p[(T-1)*3]),t.normal.push(p[(T-1)*3+1]),t.normal.push(p[(T-1)*3+2]),t.normal.push(p[T*3]),t.normal.push(p[T*3+1]),t.normal.push(p[T*3+2])),r.uv&&r.uv.forEach(function(R,F){t.uvs[F]===void 0&&(t.uvs[F]=[]),t.uvs[F].push(m[F][0]),t.uvs[F].push(m[F][1]),t.uvs[F].push(m[F][(T-1)*2]),t.uvs[F].push(m[F][(T-1)*2+1]),t.uvs[F].push(m[F][T*2]),t.uvs[F].push(m[F][T*2+1])})}addMorphTargets(t,r,l,c){if(l.length===0)return;t.morphTargetsRelative=!0,t.morphAttributes.position=[];const p=this;l.forEach(function(h){h.rawTargets.forEach(function(m){const v=oo.Objects.Geometry[m.geoID];v!==void 0&&p.genMorphGeometry(t,r,v,c,m.name)})})}genMorphGeometry(t,r,l,c,p){const h=r.PolygonVertexIndex!==void 0?r.PolygonVertexIndex.a:[],m=l.Vertices!==void 0?l.Vertices.a:[],v=l.Indexes!==void 0?l.Indexes.a:[],E=t.attributes.position.count*3,x=new Float32Array(E);for(let U=0;U<v.length;U++){const P=v[U]*3;x[P]=m[U*3],x[P+1]=m[U*3+1],x[P+2]=m[U*3+2]}const T={vertexIndices:h,vertexPositions:x},R=this.genBuffers(T),F=new i.Float32BufferAttribute(R.vertex,3);F.name=p||l.attrName,F.applyMatrix4(c),t.morphAttributes.position.push(F)}parseNormals(t){const r=t.MappingInformationType,l=t.ReferenceInformationType,c=t.Normals.a;let p=[];return l==="IndexToDirect"&&("NormalIndex"in t?p=t.NormalIndex.a:"NormalsIndex"in t&&(p=t.NormalsIndex.a)),{dataSize:3,buffer:c,indices:p,mappingType:r,referenceType:l}}parseUVs(t){const r=t.MappingInformationType,l=t.ReferenceInformationType,c=t.UV.a;let p=[];return l==="IndexToDirect"&&(p=t.UVIndex.a),{dataSize:2,buffer:c,indices:p,mappingType:r,referenceType:l}}parseVertexColors(t){const r=t.MappingInformationType,l=t.ReferenceInformationType,c=t.Colors.a;let p=[];return l==="IndexToDirect"&&(p=t.ColorIndex.a),{dataSize:4,buffer:c,indices:p,mappingType:r,referenceType:l}}parseMaterialIndices(t){const r=t.MappingInformationType,l=t.ReferenceInformationType;if(r==="NoMappingInformation")return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:l};const c=t.Materials.a,p=[];for(let h=0;h<c.length;++h)p.push(h);return{dataSize:1,buffer:c,indices:p,mappingType:r,referenceType:l}}parseNurbsGeometry(t){if(Nb===void 0)return el.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new i.BufferGeometry;const r=parseInt(t.Order);if(isNaN(r))return el.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",t.Order,t.id),new i.BufferGeometry;const l=r-1,c=t.KnotVector.a,p=[],h=t.Points.a;for(let T=0,R=h.length;T<R;T+=4)p.push(new i.Vector4().fromArray(h,T));let m,v;if(t.Form==="Closed")p.push(p[0]);else if(t.Form==="Periodic"){m=l,v=c.length-1-m;for(let T=0;T<l;++T)p.push(p[T])}const x=new Nb(l,c,p,m,v).getPoints(p.length*12);return new i.BufferGeometry().setFromPoints(x)}}class ZC{parse(){const t=[],r=this.parseClips();if(r!==void 0)for(const l in r){const c=r[l],p=this.addClip(c);t.push(p)}return t}parseClips(){if(oo.Objects.AnimationCurve===void 0)return;const t=this.parseAnimationCurveNodes();this.parseAnimationCurves(t);const r=this.parseAnimationLayers(t);return this.parseAnimStacks(r)}parseAnimationCurveNodes(){const t=oo.Objects.AnimationCurveNode,r=new Map;for(const l in t){const c=t[l];if(c.attrName.match(/S|R|T|DeformPercent/)!==null){const p={id:c.id,attr:c.attrName,curves:{}};r.set(p.id,p)}}return r}parseAnimationCurves(t){const r=oo.Objects.AnimationCurve;for(const l in r){const c={id:r[l].id,times:r[l].KeyTime.a.map(nS),values:r[l].KeyValueFloat.a},p=xa.get(c.id);if(p!==void 0){const h=p.parents[0].ID,m=p.parents[0].relationship;m.match(/X/)?t.get(h).curves.x=c:m.match(/Y/)?t.get(h).curves.y=c:m.match(/Z/)?t.get(h).curves.z=c:m.match(/d|DeformPercent/)&&t.has(h)&&(t.get(h).curves.morph=c)}}}parseAnimationLayers(t){const r=oo.Objects.AnimationLayer,l=new Map;for(const c in r){const p=[],h=xa.get(parseInt(c));h!==void 0&&(h.children.forEach(function(v,E){if(t.has(v.ID)){const x=t.get(v.ID);if(x.curves.x!==void 0||x.curves.y!==void 0||x.curves.z!==void 0){if(p[E]===void 0){const T=xa.get(v.ID).parents.filter(function(R){return R.relationship!==void 0})[0].ID;if(T!==void 0){const R=oo.Objects.Model[T.toString()];if(R===void 0){el.warn("THREE.FBXLoader: Encountered a unused curve.",v);return}const F={modelName:R.attrName?i.PropertyBinding.sanitizeNodeName(R.attrName):"",ID:R.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Kc.traverse(function(U){U.ID===R.id&&(F.transform=U.matrix,U.userData.transformData&&(F.eulerOrder=U.userData.transformData.eulerOrder))}),F.transform||(F.transform=new i.Matrix4),"PreRotation"in R&&(F.preRotation=R.PreRotation.value),"PostRotation"in R&&(F.postRotation=R.PostRotation.value),p[E]=F}}p[E]&&(p[E][x.attr]=x)}else if(x.curves.morph!==void 0){if(p[E]===void 0){const T=xa.get(v.ID).parents.filter(function(z){return z.relationship!==void 0})[0].ID,R=xa.get(T).parents[0].ID,F=xa.get(R).parents[0].ID,U=xa.get(F).parents[0].ID,P=oo.Objects.Model[U],O={modelName:P.attrName?i.PropertyBinding.sanitizeNodeName(P.attrName):"",morphName:oo.Objects.Deformer[T].attrName};p[E]=O}p[E][x.attr]=x}}}),l.set(parseInt(c),p))}return l}parseAnimStacks(t){const r=oo.Objects.AnimationStack,l={};for(const c in r){const p=xa.get(parseInt(c)).children;p.length>1&&el.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const h=t.get(p[0].ID);l[c]={name:r[c].attrName,layer:h}}return l}addClip(t){let r=[];const l=this;return t.layer.forEach(function(c){r=r.concat(l.generateTracks(c))}),new i.AnimationClip(t.name,-1,r)}generateTracks(t){const r=[];let l=new i.Vector3,c=new i.Quaternion,p=new i.Vector3;if(t.transform&&t.transform.decompose(l,c,p),l=l.toArray(),c=new i.Euler().setFromQuaternion(c,t.eulerOrder).toArray(),p=p.toArray(),t.T!==void 0&&Object.keys(t.T.curves).length>0){const h=this.generateVectorTrack(t.modelName,t.T.curves,l,"position");h!==void 0&&r.push(h)}if(t.R!==void 0&&Object.keys(t.R.curves).length>0){const h=this.generateRotationTrack(t.modelName,t.R.curves,c,t.preRotation,t.postRotation,t.eulerOrder);h!==void 0&&r.push(h)}if(t.S!==void 0&&Object.keys(t.S.curves).length>0){const h=this.generateVectorTrack(t.modelName,t.S.curves,p,"scale");h!==void 0&&r.push(h)}if(t.DeformPercent!==void 0){const h=this.generateMorphTrack(t);h!==void 0&&r.push(h)}return r}generateVectorTrack(t,r,l,c){const p=this.getTimesForAllAxes(r),h=this.getKeyframeTrackValues(p,r,l);return new i.VectorKeyframeTrack(t+"."+c,p,h)}generateRotationTrack(t,r,l,c,p,h){r.x!==void 0&&(this.interpolateRotations(r.x),r.x.values=r.x.values.map(i.MathUtils.degToRad)),r.y!==void 0&&(this.interpolateRotations(r.y),r.y.values=r.y.values.map(i.MathUtils.degToRad)),r.z!==void 0&&(this.interpolateRotations(r.z),r.z.values=r.z.values.map(i.MathUtils.degToRad));const m=this.getTimesForAllAxes(r),v=this.getKeyframeTrackValues(m,r,l);c!==void 0&&(c=c.map(i.MathUtils.degToRad),c.push(h),c=new i.Euler().fromArray(c),c=new i.Quaternion().setFromEuler(c)),p!==void 0&&(p=p.map(i.MathUtils.degToRad),p.push(h),p=new i.Euler().fromArray(p),p=new i.Quaternion().setFromEuler(p).invert());const E=new i.Quaternion,x=new i.Euler,T=[];for(let R=0;R<v.length;R+=3)x.set(v[R],v[R+1],v[R+2],h),E.setFromEuler(x),c!==void 0&&E.premultiply(c),p!==void 0&&E.multiply(p),E.toArray(T,R/3*4);return new i.QuaternionKeyframeTrack(t+".quaternion",m,T)}generateMorphTrack(t){const r=t.DeformPercent.curves.morph,l=r.values.map(function(p){return p/100}),c=Kc.getObjectByName(t.modelName).morphTargetDictionary[t.morphName];return new i.NumberKeyframeTrack(t.modelName+".morphTargetInfluences["+c+"]",r.times,l)}getTimesForAllAxes(t){let r=[];if(t.x!==void 0&&(r=r.concat(t.x.times)),t.y!==void 0&&(r=r.concat(t.y.times)),t.z!==void 0&&(r=r.concat(t.z.times)),r=r.sort(function(l,c){return l-c}),r.length>1){let l=1,c=r[0];for(let p=1;p<r.length;p++){const h=r[p];h!==c&&(r[l]=h,c=h,l++)}r=r.slice(0,l)}return r}getKeyframeTrackValues(t,r,l){const c=l,p=[];let h=-1,m=-1,v=-1;return t.forEach(function(E){if(r.x&&(h=r.x.times.indexOf(E)),r.y&&(m=r.y.times.indexOf(E)),r.z&&(v=r.z.times.indexOf(E)),h!==-1){const x=r.x.values[h];p.push(x),c[0]=x}else p.push(c[0]);if(m!==-1){const x=r.y.values[m];p.push(x),c[1]=x}else p.push(c[1]);if(v!==-1){const x=r.z.values[v];p.push(x),c[2]=x}else p.push(c[2])}),p}interpolateRotations(t){for(let r=1;r<t.values.length;r++){const l=t.values[r-1],c=t.values[r]-l,p=Math.abs(c);if(p>=180){const h=p/180,m=c/h;let v=l+m;const E=t.times[r-1],T=(t.times[r]-E)/h;let R=E+T;const F=[],U=[];for(;R<t.times[r];)F.push(R),R+=T,U.push(v),v+=m;t.times=Xb(t.times,r,F),t.values=Xb(t.values,r,U)}}}}class qC{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(t){this.nodeStack.push(t),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(t,r){this.currentProp=t,this.currentPropName=r}parse(t){this.currentIndent=0,this.allNodes=new Hb,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const r=this,l=t.split(/[\r\n]+/);return l.forEach(function(c,p){const h=c.match(/^[\s\t]*;/),m=c.match(/^[\s\t]*$/);if(h||m)return;const v=c.match("^\\t{"+r.currentIndent+"}(\\w+):(.*){",""),E=c.match("^\\t{"+r.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),x=c.match("^\\t{"+(r.currentIndent-1)+"}}");v?r.parseNodeBegin(c,v):E?r.parseNodeProperty(c,E,l[++p]):x?r.popStack():c.match(/^[^\s\t}]/)&&r.parseNodePropertyContinued(c)}),this.allNodes}parseNodeBegin(t,r){const l=r[1].trim().replace(/^"/,"").replace(/"$/,""),c=r[2].split(",").map(function(v){return v.trim().replace(/^"/,"").replace(/"$/,"")}),p={name:l},h=this.parseNodeAttr(c),m=this.getCurrentNode();this.currentIndent===0?this.allNodes.add(l,p):l in m?(l==="PoseNode"?m.PoseNode.push(p):m[l].id!==void 0&&(m[l]={},m[l][m[l].id]=m[l]),h.id!==""&&(m[l][h.id]=p)):typeof h.id=="number"?(m[l]={},m[l][h.id]=p):l!=="Properties70"&&(l==="PoseNode"?m[l]=[p]:m[l]=p),typeof h.id=="number"&&(p.id=h.id),h.name!==""&&(p.attrName=h.name),h.type!==""&&(p.attrType=h.type),this.pushStack(p)}parseNodeAttr(t){let r=t[0];t[0]!==""&&(r=parseInt(t[0]),isNaN(r)&&(r=t[0]));let l="",c="";return t.length>1&&(l=t[1].replace(/^(\w+)::/,""),c=t[2]),{id:r,name:l,type:c}}parseNodeProperty(t,r,l){let c=r[1].replace(/^"/,"").replace(/"$/,"").trim(),p=r[2].replace(/^"/,"").replace(/"$/,"").trim();c==="Content"&&p===","&&(p=l.replace(/"/g,"").replace(/,$/,"").trim());const h=this.getCurrentNode();if(h.name==="Properties70"){this.parseNodeSpecialProperty(t,c,p);return}if(c==="C"){const v=p.split(",").slice(1),E=parseInt(v[0]),x=parseInt(v[1]);let T=p.split(",").slice(3);T=T.map(function(R){return R.trim().replace(/^"/,"")}),c="connections",p=[E,x],iS(p,T),h[c]===void 0&&(h[c]=[])}c==="Node"&&(h.id=p),c in h&&Array.isArray(h[c])?h[c].push(p):c!=="a"?h[c]=p:h.a=p,this.setCurrentProp(h,c),c==="a"&&p.slice(-1)!==","&&(h.a=cE(p))}parseNodePropertyContinued(t){const r=this.getCurrentNode();r.a+=t,t.slice(-1)!==","&&(r.a=cE(r.a))}parseNodeSpecialProperty(t,r,l){const c=l.split('",').map(function(x){return x.trim().replace(/^\"/,"").replace(/\s/,"_")}),p=c[0],h=c[1],m=c[2],v=c[3];let E=c[4];switch(h){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":E=parseFloat(E);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":E=cE(E);break}this.getPrevNode()[p]={type:h,type2:m,flag:v,value:E},this.setCurrentProp(this.getPrevNode(),p)}}class $C{parse(t){const r=new jb(t);r.skip(23);const l=r.getUint32();if(l<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+l);const c=new Hb;for(;!this.endOfContent(r);){const p=this.parseNode(r,l);p!==null&&c.add(p.name,p)}return c}endOfContent(t){return t.size()%16===0?(t.getOffset()+160+16&-16)>=t.size():t.getOffset()+160+16>=t.size()}parseNode(t,r){const l={},c=r>=7500?t.getUint64():t.getUint32(),p=r>=7500?t.getUint64():t.getUint32();r>=7500?t.getUint64():t.getUint32();const h=t.getUint8(),m=t.getString(h);if(c===0)return null;const v=[];for(let R=0;R<p;R++)v.push(this.parseProperty(t));const E=v.length>0?v[0]:"",x=v.length>1?v[1]:"",T=v.length>2?v[2]:"";for(l.singleProperty=p===1&&t.getOffset()===c;c>t.getOffset();){const R=this.parseNode(t,r);R!==null&&this.parseSubNode(m,l,R)}return l.propertyList=v,typeof E=="number"&&(l.id=E),x!==""&&(l.attrName=x),T!==""&&(l.attrType=T),m!==""&&(l.name=m),l}parseSubNode(t,r,l){if(l.singleProperty===!0){const c=l.propertyList[0];Array.isArray(c)?(r[l.name]=l,l.a=c):r[l.name]=c}else if(t==="Connections"&&l.name==="C"){const c=[];l.propertyList.forEach(function(p,h){h!==0&&c.push(p)}),r.connections===void 0&&(r.connections=[]),r.connections.push(c)}else if(l.name==="Properties70")Object.keys(l).forEach(function(p){r[p]=l[p]});else if(t==="Properties70"&&l.name==="P"){let c=l.propertyList[0],p=l.propertyList[1];const h=l.propertyList[2],m=l.propertyList[3];let v;c.indexOf("Lcl ")===0&&(c=c.replace("Lcl ","Lcl_")),p.indexOf("Lcl ")===0&&(p=p.replace("Lcl ","Lcl_")),p==="Color"||p==="ColorRGB"||p==="Vector"||p==="Vector3D"||p.indexOf("Lcl_")===0?v=[l.propertyList[4],l.propertyList[5],l.propertyList[6]]:v=l.propertyList[4],r[c]={type:p,type2:h,flag:m,value:v}}else r[l.name]===void 0?typeof l.id=="number"?(r[l.name]={},r[l.name][l.id]=l):r[l.name]=l:l.name==="PoseNode"?(Array.isArray(r[l.name])||(r[l.name]=[r[l.name]]),r[l.name].push(l)):r[l.name][l.id]===void 0&&(r[l.name][l.id]=l)}parseProperty(t){const r=t.getString(1);let l;switch(r){case"C":return t.getBoolean();case"D":return t.getFloat64();case"F":return t.getFloat32();case"I":return t.getInt32();case"L":return t.getInt64();case"R":return l=t.getUint32(),t.getArrayBuffer(l);case"S":return l=t.getUint32(),t.getString(l);case"Y":return t.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const c=t.getUint32(),p=t.getUint32(),h=t.getUint32();if(p===0)switch(r){case"b":case"c":return t.getBooleanArray(c);case"d":return t.getFloat64Array(c);case"f":return t.getFloat32Array(c);case"i":return t.getInt32Array(c);case"l":return t.getInt64Array(c)}const m=Zf(new Uint8Array(t.getArrayBuffer(h))),v=new jb(m.buffer);switch(r){case"b":case"c":return v.getBooleanArray(c);case"d":return v.getFloat64Array(c);case"f":return v.getFloat32Array(c);case"i":return v.getInt32Array(c);case"l":return v.getInt64Array(c)}default:throw new Error("THREE.FBXLoader: Unknown property type "+r)}}}class jb{constructor(t,r){this.dv=new DataView(t),this.offset=0,this.littleEndian=r!==void 0?r:!0}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(t){this.offset+=t}getBoolean(){return(this.getUint8()&1)===1}getBooleanArray(t){const r=[];for(let l=0;l<t;l++)r.push(this.getBoolean());return r}getUint8(){const t=this.dv.getUint8(this.offset);return this.offset+=1,t}getInt16(){const t=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}getInt32(){const t=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}getInt32Array(t){const r=[];for(let l=0;l<t;l++)r.push(this.getInt32());return r}getUint32(){const t=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}getInt64(){let t,r;return this.littleEndian?(t=this.getUint32(),r=this.getUint32()):(r=this.getUint32(),t=this.getUint32()),r&2147483648?(r=~r&4294967295,t=~t&4294967295,t===4294967295&&(r=r+1&4294967295),t=t+1&4294967295,-(r*4294967296+t)):r*4294967296+t}getInt64Array(t){const r=[];for(let l=0;l<t;l++)r.push(this.getInt64());return r}getUint64(){let t,r;return this.littleEndian?(t=this.getUint32(),r=this.getUint32()):(r=this.getUint32(),t=this.getUint32()),r*4294967296+t}getFloat32(){const t=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}getFloat32Array(t){const r=[];for(let l=0;l<t;l++)r.push(this.getFloat32());return r}getFloat64(){const t=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}getFloat64Array(t){const r=[];for(let l=0;l<t;l++)r.push(this.getFloat64());return r}getArrayBuffer(t){const r=this.dv.buffer.slice(this.offset,this.offset+t);return this.offset+=t,r}getString(t){let r=[];for(let c=0;c<t;c++)r[c]=this.getUint8();const l=r.indexOf(0);return l>=0&&(r=r.slice(0,l)),i.LoaderUtils.decodeText(new Uint8Array(r))}}class Hb{add(t,r){this[t]=r}}function eS(s){const t="Kaydara FBX Binary  \0";return s.byteLength>=t.length&&t===Kb(s,0,t.length)}function tS(s){const t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let r=0;function l(c){const p=s[c-1];return s=s.slice(r+c),r++,p}for(let c=0;c<t.length;++c)if(l(1)===t[c])return!1;return!0}function Wb(s){const t=/FBXVersion: (\d+)/,r=s.match(t);if(r)return parseInt(r[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function nS(s){return s/46186158e3}const rS=[];function l2(s,t,r,l){let c;switch(l.mappingType){case"ByPolygonVertex":c=s;break;case"ByPolygon":c=t;break;case"ByVertice":c=r;break;case"AllSame":c=l.indices[0];break;default:el.warn("THREE.FBXLoader: unknown attribute mapping type "+l.mappingType)}l.referenceType==="IndexToDirect"&&(c=l.indices[c]);const p=c*l.dataSize,h=p+l.dataSize;return oS(rS,l.buffer,p,h)}const lE=new i.Euler,N0=new i.Vector3;function Vb(s){const t=new i.Matrix4,r=new i.Matrix4,l=new i.Matrix4,c=new i.Matrix4,p=new i.Matrix4,h=new i.Matrix4,m=new i.Matrix4,v=new i.Matrix4,E=new i.Matrix4,x=new i.Matrix4,T=new i.Matrix4,R=new i.Matrix4,F=s.inheritType?s.inheritType:0;if(s.translation&&t.setPosition(N0.fromArray(s.translation)),s.preRotation){const ue=s.preRotation.map(i.MathUtils.degToRad);ue.push(s.eulerOrder),r.makeRotationFromEuler(lE.fromArray(ue))}if(s.rotation){const ue=s.rotation.map(i.MathUtils.degToRad);ue.push(s.eulerOrder),l.makeRotationFromEuler(lE.fromArray(ue))}if(s.postRotation){const ue=s.postRotation.map(i.MathUtils.degToRad);ue.push(s.eulerOrder),c.makeRotationFromEuler(lE.fromArray(ue)),c.invert()}s.scale&&p.scale(N0.fromArray(s.scale)),s.scalingOffset&&m.setPosition(N0.fromArray(s.scalingOffset)),s.scalingPivot&&h.setPosition(N0.fromArray(s.scalingPivot)),s.rotationOffset&&v.setPosition(N0.fromArray(s.rotationOffset)),s.rotationPivot&&E.setPosition(N0.fromArray(s.rotationPivot)),s.parentMatrixWorld&&(T.copy(s.parentMatrix),x.copy(s.parentMatrixWorld));const U=r.clone().multiply(l).multiply(c),P=new i.Matrix4;P.extractRotation(x);const O=new i.Matrix4;O.copyPosition(x);const z=O.clone().invert().multiply(x),L=P.clone().invert().multiply(z),k=p,H=new i.Matrix4;if(F===0)H.copy(P).multiply(U).multiply(L).multiply(k);else if(F===1)H.copy(P).multiply(L).multiply(U).multiply(k);else{const ge=new i.Matrix4().scale(new i.Vector3().setFromMatrixScale(T)).clone().invert(),le=L.clone().multiply(ge);H.copy(P).multiply(U).multiply(le).multiply(k)}const X=E.clone().invert(),W=h.clone().invert();let J=t.clone().multiply(v).multiply(E).multiply(r).multiply(l).multiply(c).multiply(X).multiply(m).multiply(h).multiply(p).multiply(W);const Y=new i.Matrix4().copyPosition(J),ce=x.clone().multiply(Y);return R.copyPosition(ce),J=R.clone().multiply(H),J.premultiply(x.invert()),J}function Qb(s){s=s||0;const t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return s===6?(el.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[s]}function cE(s){return s.split(",").map(function(r){return parseFloat(r)})}function Kb(s,t,r){return t===void 0&&(t=0),r===void 0&&(r=s.byteLength),i.LoaderUtils.decodeText(new Uint8Array(s,t,r))}function iS(s,t){for(let r=0,l=s.length,c=t.length;r<c;r++,l++)s[l]=t[r]}function oS(s,t,r,l){for(let c=r,p=0;c<l;c++,p++)s[p]=t[c];return s}function Xb(s,t,r){return s.slice(0,t).concat(r).concat(s.slice(t))}function pE(s){return(0,_.D)(aE,s)}pE.preload=s=>_.D.preload(aE,s),pE.clear=s=>_.D.clear(aE,s);class sS{constructor(t=4){this.pool=t,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(t){if(!this.workers[t]){const r=this.workerCreator();r.addEventListener("message",this._onMessage.bind(this,t)),this.workers[t]=r}}_getIdleWorker(){for(let t=0;t<this.pool;t++)if(!(this.workerStatus&1<<t))return t;return-1}_onMessage(t,r){const l=this.workersResolve[t];if(l&&l(r),this.queue.length){const{resolve:c,msg:p,transfer:h}=this.queue.shift();this.workersResolve[t]=c,this.workers[t].postMessage(p,h)}else this.workerStatus^=1<<t}setWorkerCreator(t){this.workerCreator=t}setWorkerLimit(t){this.pool=t}postMessage(t,r){return new Promise(l=>{const c=this._getIdleWorker();c!==-1?(this._initWorker(c),this.workerStatus|=1<<c,this.workersResolve[c]=l,this.workers[c].postMessage(t,r)):this.queue.push({resolve:l,msg:t,transfer:r})})}dispose(){this.workers.forEach(t=>t.terminate()),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}var Yb=A(8764).lW;const Jb=0,cR=1,aS=2,pR=3,Zb=0,lS=0,cS=2,pS=0,uR=1,dR=160,hR=161,fR=162,gR=163,mR=166,uS=0,dS=1,AR=0,yR=1,uE=2,vR=3,_R=4,ER=5,bR=6,MR=7,xR=8,CR=9,SR=10,wR=11,TR=12,BR=13,RR=14,IR=15,FR=16,OR=17,DR=18,LR=0,hS=1,PR=2,kR=3,zR=4,GR=5,UR=6,NR=7,jR=8,HR=9,WR=10,VR=11,QR=0,KR=1,XR=2,YR=13,JR=14,ZR=15,qR=128,qb=64,$R=32,eI=16,$b=0,tI=1,nI=2,rI=3,iI=4,oI=5,sI=6,aI=7,lI=8,eM=9,cI=10,pI=13,uI=14,dE=15,tM=16,dI=17,hI=20,fI=21,hE=22,gI=23,mI=24,AI=27,yI=28,vI=29,_I=30,EI=31,bI=34,MI=35,xI=36,nM=37,CI=38,SI=41,wI=42,fE=43,TI=44,BI=45,RI=48,II=49,FI=50,OI=58,DI=59,LI=62,PI=63,kI=64,zI=65,GI=68,UI=69,NI=70,jI=71,HI=74,WI=75,rM=76,VI=77,QI=78,KI=81,XI=82,iM=83,YI=84,JI=85,ZI=88,qI=89,$I=90,eF=91,tF=92,nF=95,rF=96,oM=97,iF=98,oF=99,sM=100,sF=101,aF=102,aM=103,lF=104,cF=105,pF=106,uF=107,dF=108,lM=109,hF=110,fF=111,gF=112,mF=113,AF=114,yF=115,vF=116,_F=117,EF=118,bF=119,MF=120,xF=121,CF=122,SF=123,wF=124,TF=125,BF=126,RF=127,IF=128,FF=129,OF=130,DF=131,LF=132,PF=133,kF=134,zF=135,GF=136,UF=137,NF=138,jF=139,HF=140,WF=141,VF=142,QF=143,KF=144,XF=145,YF=146,JF=147,ZF=148,qF=149,$F=150,e6=151,t6=152,n6=153,r6=154,i6=155,o6=156,s6=157,a6=158,l6=159,c6=160,p6=161,u6=162,d6=163,h6=164,f6=165,g6=166,m6=167,A6=168,y6=169,v6=170,_6=171,E6=172,b6=173,M6=174,x6=175,C6=176,S6=177,w6=178,T6=179,B6=180,R6=181,I6=182,F6=183,O6=184,D6=1000156007,L6=1000156008,P6=1000156009,k6=1000156010,z6=1000156011,G6=1000156017,U6=1000156018,N6=1000156019,j6=1000156020,H6=1000156021,W6=1000054e3,V6=1000054001,Q6=1000054002,K6=1000054003,X6=1000054004,Y6=1000054005,J6=1000054006,Z6=1000054007,q6=1000066e3,$6=1000066001,eO=1000066002,tO=1000066003,nO=1000066004,rO=1000066005,iO=1000066006,oO=1000066007,sO=1000066008,aO=1000066009,lO=1000066010,cO=1000066011,pO=1000066012,uO=1000066013,dO=100034e4,hO=1000340001;class fS{constructor(){this.vkFormat=$b,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=Jb,this.levels=[],this.dataFormatDescriptor=[{vendorId:lS,descriptorType:Zb,descriptorBlockSize:0,versionNumber:cS,colorModel:pS,colorPrimaries:hS,transferFunction:uE,flags:uS,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class xA{constructor(t,r,l,c){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(t.buffer,t.byteOffset+r,l),this._littleEndian=c,this._offset=0}_nextUint8(){const t=this._dataView.getUint8(this._offset);return this._offset+=1,t}_nextUint16(){const t=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,t}_nextUint32(){const t=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,t}_nextUint64(){const t=this._dataView.getUint32(this._offset,this._littleEndian),r=this._dataView.getUint32(this._offset+4,this._littleEndian),l=t+Y2(2,32)*r;return this._offset+=8,l}_nextInt32(){const t=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,t}_skip(t){return this._offset+=t,this}_scan(t,r=0){const l=this._offset;let c=0;for(;this._dataView.getUint8(this._offset)!==r&&c<t;)c++,this._offset++;return c<t&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+l,c)}}const gS=null,cM=new Uint8Array([0]),zl=[171,75,84,88,32,50,48,187,13,10,26,10],pM=68;function uM(s){return typeof TextEncoder!="undefined"?new TextEncoder().encode(s):Yb.from(s)}function dM(s){return typeof TextDecoder!="undefined"?new TextDecoder().decode(s):Yb.from(s).toString("utf8")}function c2(s){let t=0;for(const c of s)t+=c.byteLength;const r=new Uint8Array(t);let l=0;for(const c of s)r.set(new Uint8Array(c),l),l+=c.byteLength;return r}function mS(s){const t=new Uint8Array(s.buffer,s.byteOffset,zl.length);if(t[0]!==zl[0]||t[1]!==zl[1]||t[2]!==zl[2]||t[3]!==zl[3]||t[4]!==zl[4]||t[5]!==zl[5]||t[6]!==zl[6]||t[7]!==zl[7]||t[8]!==zl[8]||t[9]!==zl[9]||t[10]!==zl[10]||t[11]!==zl[11])throw new Error("Missing KTX 2.0 identifier.");const r=new fS,l=17*Uint32Array.BYTES_PER_ELEMENT,c=new xA(s,zl.length,l,!0);r.vkFormat=c._nextUint32(),r.typeSize=c._nextUint32(),r.pixelWidth=c._nextUint32(),r.pixelHeight=c._nextUint32(),r.pixelDepth=c._nextUint32(),r.layerCount=c._nextUint32(),r.faceCount=c._nextUint32();const p=c._nextUint32();r.supercompressionScheme=c._nextUint32();const h=c._nextUint32(),m=c._nextUint32(),v=c._nextUint32(),E=c._nextUint32(),x=c._nextUint64(),T=c._nextUint64(),R=p*3*8,F=new xA(s,zl.length+l,R,!0);for(let Xe=0;Xe<p;Xe++)r.levels.push({levelData:new Uint8Array(s.buffer,s.byteOffset+F._nextUint64(),F._nextUint64()),uncompressedByteLength:F._nextUint64()});const U=new xA(s,h,m,!0),P={vendorId:U._skip(4)._nextUint16(),descriptorType:U._nextUint16(),versionNumber:U._nextUint16(),descriptorBlockSize:U._nextUint16(),colorModel:U._nextUint8(),colorPrimaries:U._nextUint8(),transferFunction:U._nextUint8(),flags:U._nextUint8(),texelBlockDimension:[U._nextUint8(),U._nextUint8(),U._nextUint8(),U._nextUint8()],bytesPlane:[U._nextUint8(),U._nextUint8(),U._nextUint8(),U._nextUint8(),U._nextUint8(),U._nextUint8(),U._nextUint8(),U._nextUint8()],samples:[]},O=6,z=4,L=(P.descriptorBlockSize/4-O)/z;for(let Xe=0;Xe<L;Xe++){const Ce={bitOffset:U._nextUint16(),bitLength:U._nextUint8(),channelType:U._nextUint8(),samplePosition:[U._nextUint8(),U._nextUint8(),U._nextUint8(),U._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};Ce.channelType&qb?(Ce.sampleLower=U._nextInt32(),Ce.sampleUpper=U._nextInt32()):(Ce.sampleLower=U._nextUint32(),Ce.sampleUpper=U._nextUint32()),P.samples[Xe]=Ce}r.dataFormatDescriptor.length=0,r.dataFormatDescriptor.push(P);const k=new xA(s,v,E,!0);for(;k._offset<E;){const Xe=k._nextUint32(),Ce=k._scan(Xe),Ee=dM(Ce),_e=k._scan(Xe-Ce.byteLength);r.keyValue[Ee]=Ee.match(/^ktx/i)?dM(_e):_e,k._offset%4&&k._skip(4-k._offset%4)}if(T<=0)return r;const H=new xA(s,x,T,!0),X=H._nextUint16(),W=H._nextUint16(),J=H._nextUint32(),Y=H._nextUint32(),ce=H._nextUint32(),ue=H._nextUint32(),ge=[];for(let Xe=0;Xe<p;Xe++)ge.push({imageFlags:H._nextUint32(),rgbSliceByteOffset:H._nextUint32(),rgbSliceByteLength:H._nextUint32(),alphaSliceByteOffset:H._nextUint32(),alphaSliceByteLength:H._nextUint32()});const le=x+H._offset,Me=le+J,me=Me+Y,Te=me+ce,Ue=new Uint8Array(s.buffer,s.byteOffset+le,J),Re=new Uint8Array(s.buffer,s.byteOffset+Me,Y),Ge=new Uint8Array(s.buffer,s.byteOffset+me,ce),De=new Uint8Array(s.buffer,s.byteOffset+Te,ue);return r.globalData={endpointCount:X,selectorCount:W,imageDescs:ge,endpointsData:Ue,selectorsData:Re,tablesData:Ge,extendedData:De},r}function p2(){return p2=Object.assign?Object.assign.bind():function(s){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(s[l]=r[l])}return s},p2.apply(this,arguments)}const AS={keepWriter:!1};function fO(s,t={}){t=p2({},AS,t);let r=new ArrayBuffer(0);if(s.globalData){const L=new ArrayBuffer(20+s.globalData.imageDescs.length*5*4),k=new DataView(L);k.setUint16(0,s.globalData.endpointCount,!0),k.setUint16(2,s.globalData.selectorCount,!0),k.setUint32(4,s.globalData.endpointsData.byteLength,!0),k.setUint32(8,s.globalData.selectorsData.byteLength,!0),k.setUint32(12,s.globalData.tablesData.byteLength,!0),k.setUint32(16,s.globalData.extendedData.byteLength,!0);for(let H=0;H<s.globalData.imageDescs.length;H++){const X=s.globalData.imageDescs[H];k.setUint32(20+H*5*4+0,X.imageFlags,!0),k.setUint32(20+H*5*4+4,X.rgbSliceByteOffset,!0),k.setUint32(20+H*5*4+8,X.rgbSliceByteLength,!0),k.setUint32(20+H*5*4+12,X.alphaSliceByteOffset,!0),k.setUint32(20+H*5*4+16,X.alphaSliceByteLength,!0)}r=c2([L,s.globalData.endpointsData,s.globalData.selectorsData,s.globalData.tablesData,s.globalData.extendedData])}const l=[];let c=s.keyValue;t.keepWriter||(c=p2({},s.keyValue,{KTXwriter:gS}));for(const L in c){const k=c[L],H=uM(L),X=typeof k=="string"?uM(k):k,W=H.byteLength+1+X.byteLength+1,J=W%4?4-W%4:0;l.push(c2([new Uint32Array([W]),H,cM,X,cM,new Uint8Array(J).fill(0)]))}const p=c2(l);if(s.dataFormatDescriptor.length!==1||s.dataFormatDescriptor[0].descriptorType!==Zb)throw new Error("Only BASICFORMAT Data Format Descriptor output supported.");const h=s.dataFormatDescriptor[0],m=new ArrayBuffer(28+h.samples.length*16),v=new DataView(m),E=24+h.samples.length*16;if(v.setUint32(0,m.byteLength,!0),v.setUint16(4,h.vendorId,!0),v.setUint16(6,h.descriptorType,!0),v.setUint16(8,h.versionNumber,!0),v.setUint16(10,E,!0),v.setUint8(12,h.colorModel),v.setUint8(13,h.colorPrimaries),v.setUint8(14,h.transferFunction),v.setUint8(15,h.flags),!Array.isArray(h.texelBlockDimension))throw new Error("texelBlockDimension is now an array. For dimensionality `d`, set `d - 1`.");v.setUint8(16,h.texelBlockDimension[0]),v.setUint8(17,h.texelBlockDimension[1]),v.setUint8(18,h.texelBlockDimension[2]),v.setUint8(19,h.texelBlockDimension[3]);for(let L=0;L<8;L++)v.setUint8(20+L,h.bytesPlane[L]);for(let L=0;L<h.samples.length;L++){const k=h.samples[L],H=28+L*16;if(k.channelID)throw new Error("channelID has been renamed to channelType.");v.setUint16(H+0,k.bitOffset,!0),v.setUint8(H+2,k.bitLength),v.setUint8(H+3,k.channelType),v.setUint8(H+4,k.samplePosition[0]),v.setUint8(H+5,k.samplePosition[1]),v.setUint8(H+6,k.samplePosition[2]),v.setUint8(H+7,k.samplePosition[3]),k.channelType&qb?(v.setInt32(H+8,k.sampleLower,!0),v.setInt32(H+12,k.sampleUpper,!0)):(v.setUint32(H+8,k.sampleLower,!0),v.setUint32(H+12,k.sampleUpper,!0))}const x=zl.length+pM+s.levels.length*3*8,T=x+m.byteLength;let R=r.byteLength>0?T+p.byteLength:0;R%8&&(R+=8-R%8);const F=[],U=new DataView(new ArrayBuffer(s.levels.length*3*8));let P=(R||T+p.byteLength)+r.byteLength;for(let L=0;L<s.levels.length;L++){const k=s.levels[L];F.push(k.levelData),U.setBigUint64(L*24+0,BigInt(P),!0),U.setBigUint64(L*24+8,BigInt(k.levelData.byteLength),!0),U.setBigUint64(L*24+16,BigInt(k.uncompressedByteLength),!0),P+=k.levelData.byteLength}const O=new ArrayBuffer(pM),z=new DataView(O);return z.setUint32(0,s.vkFormat,!0),z.setUint32(4,s.typeSize,!0),z.setUint32(8,s.pixelWidth,!0),z.setUint32(12,s.pixelHeight,!0),z.setUint32(16,s.pixelDepth,!0),z.setUint32(20,s.layerCount,!0),z.setUint32(24,s.faceCount,!0),z.setUint32(28,s.levels.length,!0),z.setUint32(32,s.supercompressionScheme,!0),z.setUint32(36,x,!0),z.setUint32(40,m.byteLength,!0),z.setUint32(44,T,!0),z.setUint32(48,p.byteLength,!0),z.setBigUint64(52,BigInt(r.byteLength>0?R:0),!0),z.setBigUint64(60,BigInt(r.byteLength),!0),new Uint8Array(c2([new Uint8Array(zl).buffer,O,U.buffer,m,p,R>0?new ArrayBuffer(R-(T+p.byteLength)):new ArrayBuffer(0),r,...F]))}var yS=A(8764).lW;let gE,Dh,mE;const AE={env:{emscripten_notify_memory_growth:function(s){mE=new Uint8Array(Dh.exports.memory.buffer)}}};class vS{init(){return gE||(gE=typeof fetch!="undefined"?fetch("data:application/wasm;base64,"+hM).then(t=>t.arrayBuffer()).then(t=>WebAssembly.instantiate(t,AE)).then(this._init):WebAssembly.instantiate(yS.from(hM,"base64"),AE).then(this._init),gE)}_init(t){Dh=t.instance,AE.env.emscripten_notify_memory_growth(0)}decode(t,r=0){if(!Dh)throw new Error("ZSTDDecoder: Await .init() before decoding.");const l=t.byteLength,c=Dh.exports.malloc(l);mE.set(t,c),r=r||Number(Dh.exports.ZSTD_findDecompressedSize(c,l));const p=Dh.exports.malloc(r),h=Dh.exports.ZSTD_decompress(p,r,c,l),m=mE.slice(p,p+h);return Dh.exports.free(c),Dh.exports.free(p),m}}const hM="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ";class _S extends i.CompressedTexture{constructor(t,r,l,c,p,h){super(t,r,l,p,h),this.isCompressedArrayTexture=!0,this.image.depth=c,this.wrapR=i.ClampToEdgeWrapping}}class ES extends i.Texture{constructor(t=null,r=1,l=1,c=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:r,height:l,depth:c},this.magFilter=i.NearestFilter,this.minFilter=i.NearestFilter,this.wrapR=i.ClampToEdgeWrapping,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}var CA=A(5108),bS=Object.defineProperty,MS=(s,t,r)=>t in s?bS(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,u2=(s,t,r)=>(MS(s,typeof t!="symbol"?t+"":t,r),r);const yE=new WeakMap;let vE=0,_E;const SA=class extends i.Loader{constructor(s){super(s),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new sS,this.workerSourceURL="",this.workerConfig=null,typeof MSC_TRANSCODER!="undefined"&&CA.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(s){return this.transcoderPath=s,this}setWorkerLimit(s){return this.workerPool.setWorkerLimit(s),this}detectSupport(s){return this.workerConfig={astcSupported:s.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:s.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:s.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:s.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:s.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:s.extensions.has("WEBGL_compressed_texture_pvrtc")||s.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},s.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const s=new i.FileLoader(this.manager);s.setPath(this.transcoderPath),s.setWithCredentials(this.withCredentials);const t=s.loadAsync("basis_transcoder.js"),r=new i.FileLoader(this.manager);r.setPath(this.transcoderPath),r.setResponseType("arraybuffer"),r.setWithCredentials(this.withCredentials);const l=r.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([t,l]).then(([c,p])=>{const h=SA.BasisWorker.toString(),m=["/* constants */","let _EngineFormat = "+JSON.stringify(SA.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(SA.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(SA.BasisFormat),"/* basis_transcoder.js */",c,"/* worker */",h.substring(h.indexOf("{")+1,h.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([m])),this.transcoderBinary=p,this.workerPool.setWorkerCreator(()=>{const v=new Worker(this.workerSourceURL),E=this.transcoderBinary.slice(0);return v.postMessage({type:"init",config:this.workerConfig,transcoderBinary:E},[E]),v})}),vE>0&&CA.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),vE++}return this.transcoderPending}load(s,t,r,l){if(this.workerConfig===null)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const c=new i.FileLoader(this.manager);c.setResponseType("arraybuffer"),c.setWithCredentials(this.withCredentials),c.load(s,p=>{if(yE.has(p))return yE.get(p).promise.then(t).catch(l);this._createTexture(p).then(h=>t?t(h):null).catch(l)},r,l)}_createTextureFrom(s,t){const{mipmaps:r,width:l,height:c,format:p,type:h,error:m,dfdTransferFn:v,dfdFlags:E}=s;if(h==="error")return Promise.reject(m);const x=t.layerCount>1?new _S(r,l,c,t.layerCount,p,i.UnsignedByteType):new i.CompressedTexture(r,l,c,p,i.UnsignedByteType);return x.minFilter=r.length===1?i.LinearFilter:i.LinearMipmapLinearFilter,x.magFilter=i.LinearFilter,x.generateMipmaps=!1,x.needsUpdate=!0,"colorSpace"in x?x.colorSpace=v===uE?"srgb":"srgb-linear":x.encoding=v===uE?3001:3e3,x.premultiplyAlpha=!!(E&dS),x}_createTexture(r){return fs(this,arguments,function*(s,t={}){const l=mS(new Uint8Array(s));if(l.vkFormat!==$b)return CS(l);const c=t,p=this.init().then(()=>this.workerPool.postMessage({type:"transcode",buffer:s,taskConfig:c},[s])).then(h=>this._createTextureFrom(h.data,l));return yE.set(s,{promise:p}),p})}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),vE--,this}};let xm=SA;u2(xm,"BasisFormat",{ETC1S:0,UASTC_4x4:1}),u2(xm,"TranscoderFormat",{ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16}),u2(xm,"EngineFormat",{RGBAFormat:i.RGBAFormat,RGBA_ASTC_4x4_Format:i.RGBA_ASTC_4x4_Format,RGBA_BPTC_Format:i.RGBA_BPTC_Format,RGBA_ETC2_EAC_Format:i.RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format:i.RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format:i.RGBA_S3TC_DXT5_Format,RGB_ETC1_Format:i.RGB_ETC1_Format,RGB_ETC2_Format:i.RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format:i.RGB_PVRTC_4BPPV1_Format,RGB_S3TC_DXT1_Format:i.RGB_S3TC_DXT1_Format}),u2(xm,"BasisWorker",function(){let s,t,r;const l=_EngineFormat,c=_TranscoderFormat,p=_BasisFormat;self.addEventListener("message",function(U){const P=U.data;switch(P.type){case"init":s=P.config,h(P.transcoderBinary);break;case"transcode":t.then(()=>{try{const{width:O,height:z,hasAlpha:L,mipmaps:k,format:H,dfdTransferFn:X,dfdFlags:W}=m(P.buffer),J=[];for(let Y=0;Y<k.length;++Y)J.push(k[Y].data.buffer);self.postMessage({type:"transcode",id:P.id,width:O,height:z,hasAlpha:L,mipmaps:k,format:H,dfdTransferFn:X,dfdFlags:W},J)}catch(O){CA.error(O),self.postMessage({type:"error",id:P.id,error:O.message})}});break}});function h(U){t=new Promise(P=>{r={wasmBinary:U,onRuntimeInitialized:P},BASIS(r)}).then(()=>{r.initializeBasis(),r.KTX2File===void 0&&CA.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")})}function m(U){const P=new r.KTX2File(new Uint8Array(U));function O(){P.close(),P.delete()}if(!P.isValid())throw O(),new Error("THREE.KTX2Loader:	Invalid or unsupported .ktx2 file");const z=P.isUASTC()?p.UASTC_4x4:p.ETC1S,L=P.getWidth(),k=P.getHeight(),H=P.getLayers()||1,X=P.getLevels(),W=P.getHasAlpha(),J=P.getDFDTransferFunc(),Y=P.getDFDFlags(),{transcoderFormat:ce,engineFormat:ue}=T(z,L,k,W);if(!L||!k||!X)throw O(),new Error("THREE.KTX2Loader:	Invalid texture");if(!P.startTranscoding())throw O(),new Error("THREE.KTX2Loader: .startTranscoding failed");const ge=[];for(let le=0;le<X;le++){const Me=[];let me,Te;for(let Ue=0;Ue<H;Ue++){const Re=P.getImageLevelInfo(le,Ue,0);me=Re.origWidth<4?Re.origWidth:Re.width,Te=Re.origHeight<4?Re.origHeight:Re.height;const Ge=new Uint8Array(P.getImageTranscodedSizeInBytes(le,Ue,0,ce));if(!P.transcodeImage(Ge,le,Ue,0,ce,0,-1,-1))throw O(),new Error("THREE.KTX2Loader: .transcodeImage failed.");Me.push(Ge)}ge.push({data:F(Me),width:me,height:Te})}return O(),{width:L,height:k,hasAlpha:W,mipmaps:ge,format:ue,dfdTransferFn:J,dfdFlags:Y}}const v=[{if:"astcSupported",basisFormat:[p.UASTC_4x4],transcoderFormat:[c.ASTC_4x4,c.ASTC_4x4],engineFormat:[l.RGBA_ASTC_4x4_Format,l.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[c.BC7_M5,c.BC7_M5],engineFormat:[l.RGBA_BPTC_Format,l.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[c.BC1,c.BC3],engineFormat:[l.RGB_S3TC_DXT1_Format,l.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[c.ETC1,c.ETC2],engineFormat:[l.RGB_ETC2_Format,l.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[c.ETC1],engineFormat:[l.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[p.ETC1S,p.UASTC_4x4],transcoderFormat:[c.PVRTC1_4_RGB,c.PVRTC1_4_RGBA],engineFormat:[l.RGB_PVRTC_4BPPV1_Format,l.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],E=v.sort(function(U,P){return U.priorityETC1S-P.priorityETC1S}),x=v.sort(function(U,P){return U.priorityUASTC-P.priorityUASTC});function T(U,P,O,z){let L,k;const H=U===p.ETC1S?E:x;for(let X=0;X<H.length;X++){const W=H[X];if(s[W.if]&&W.basisFormat.includes(U)&&!(z&&W.transcoderFormat.length<2)&&!(W.needsPowerOfTwo&&!(R(P)&&R(O))))return L=W.transcoderFormat[z?1:0],k=W.engineFormat[z?1:0],{transcoderFormat:L,engineFormat:k}}return CA.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),L=c.RGBA32,k=l.RGBAFormat,{transcoderFormat:L,engineFormat:k}}function R(U){return U<=2?!0:(U&U-1)===0&&U!==0}function F(U){let P=0;for(let L=0;L<U.length;L++){const k=U[L];P+=k.byteLength}const O=new Uint8Array(P);let z=0;for(let L=0;L<U.length;L++){const k=U[L];O.set(k,z),z+=k.byteLength}return O}});const fM={[lM]:i.RGBAFormat,[oM]:i.RGBAFormat,[nM]:i.RGBAFormat,[fE]:i.RGBAFormat,[aM]:i.RGFormat,[iM]:i.RGFormat,[tM]:i.RGFormat,[hE]:i.RGFormat,[sM]:i.RedFormat,[rM]:i.RedFormat,[dE]:i.RedFormat,[eM]:i.RedFormat},EE={[lM]:i.FloatType,[oM]:i.HalfFloatType,[nM]:i.UnsignedByteType,[fE]:i.UnsignedByteType,[aM]:i.FloatType,[iM]:i.HalfFloatType,[tM]:i.UnsignedByteType,[hE]:i.UnsignedByteType,[sM]:i.FloatType,[rM]:i.HalfFloatType,[dE]:i.UnsignedByteType,[eM]:i.UnsignedByteType},xS={[fE]:3001,[hE]:3001,[dE]:3001};function CS(s){return fs(this,null,function*(){const{vkFormat:t,pixelWidth:r,pixelHeight:l,pixelDepth:c}=s;if(fM[t]===void 0)throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");const p=s.levels[0];let h,m;if(s.supercompressionScheme===Jb)h=p.levelData;else if(s.supercompressionScheme===aS)_E||(_E=new Promise(E=>fs(this,null,function*(){const x=new vS;yield x.init(),E(x)}))),h=(yield _E).decode(p.levelData,p.uncompressedByteLength);else throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");EE[t]===i.FloatType?m=new Float32Array(h.buffer,h.byteOffset,h.byteLength/Float32Array.BYTES_PER_ELEMENT):EE[t]===i.HalfFloatType?m=new Uint16Array(h.buffer,h.byteOffset,h.byteLength/Uint16Array.BYTES_PER_ELEMENT):m=h;const v=c===0?new i.DataTexture(m,r,l):new ES(m,r,l,c);return v.type=EE[t],v.format=fM[t],v.encoding=xS[t]||3e3,v.needsUpdate=!0,Promise.resolve(v)})}const gM="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master";function bE(s,t=`${gM}/basis/`){const r=(0,_.z)(c=>c.gl),l=(0,_.D)(xm,Jg(s)?Object.values(s):s,c=>{c.detectSupport(r),c.setTranscoderPath(t)});if((0,d.useEffect)(()=>{(Array.isArray(l)?l:[l]).forEach(r.initTexture)},[r,l]),Jg(s)){const c=Object.keys(s),p={};return c.forEach(h=>Object.assign(p,{[h]:l[c.indexOf(h)]})),p}else return l}bE.preload=(s,t=`${gM}/basis/`)=>_.D.preload(xm,s,r=>{r.setTranscoderPath(t)}),bE.clear=s=>_.D.clear(xm,s);var SS=A(3466),wS=A.n(SS);function mM(s,t){typeof s=="function"?s(t):s!=null&&(s.current=t)}function TS(s,t=[],r){const[l,c]=d.useState();return d.useLayoutEffect(()=>{const p=s();return c(p),mM(r,p),()=>mM(r,null)},t),l}function BS({showPanel:s=0,className:t,parent:r}){const l=TS(()=>new(wS()),[]);return d.useEffect(()=>{if(l){const c=r&&r.current||document.body;l.showPanel(s),c==null||c.appendChild(l.dom),t&&l.dom.classList.add(...t.split(" ").filter(m=>m));const p=(0,_.n)(()=>l.begin()),h=(0,_.o)(()=>l.end());return()=>{c==null||c.removeChild(l.dom),p(),h()}}},[r,l,t,s]),null}function RS({size:s=256,frames:t=1/0}={}){const r=(0,_.z)(x=>x.viewport.dpr),{width:l,height:c}=(0,_.z)(x=>x.size),p=s||l*r,h=s||c*r,m=d.useMemo(()=>{const x=new i.DepthTexture(p,h);return x.format=i.DepthFormat,x.type=i.UnsignedShortType,{depthTexture:x}},[p,h]);let v=0;const E=rc(p,h,m);return(0,_.A)(x=>{(t===1/0||v<t)&&(x.gl.setRenderTarget(E),x.gl.render(x.scene,x.camera),x.gl.setRenderTarget(null),v++)}),E.depthTexture}function IS(s,t,r=1){const l=(0,_.z)(h=>h.viewport),c=t*(l.aspect>s/t?l.width/s:l.height/t);return[s*(l.aspect>s/t?l.width/s:l.height/t)*r,c*r,1]}function FS(s,t){const r=(0,_.z)(c=>c.pointer),[l]=d.useState(()=>{const c=new i.Raycaster;return t&&(0,_.j)(c,t,{}),function(p,h){c.setFromCamera(r,s instanceof i.Camera?s:s.current);const m=this.constructor.prototype.raycast.bind(this);m&&m(c,h)}});return l}function ME(s,t,r,l){return new(r||(r=Promise))(function(c,p){function h(E){try{v(l.next(E))}catch(x){p(x)}}function m(E){try{v(l.throw(E))}catch(x){p(x)}}function v(E){var x;E.done?c(E.value):(x=E.value,x instanceof r?x:new r(function(T){T(x)})).then(h,m)}v((l=l.apply(s,t||[])).next())})}const OS=["geforce 320m","geforce 8600","geforce 8600m gt","geforce 8800 gs","geforce 8800 gt","geforce 9400","geforce 9400m g","geforce 9400m","geforce 9600m gt","geforce 9600m","geforce fx go5200","geforce gt 120","geforce gt 130","geforce gt 330m","geforce gtx 285","google swiftshader","intel g41","intel g45","intel gma 4500mhd","intel gma x3100","intel hd 3000","intel q45","legacy","mali-2","mali-3","mali-4","quadro fx 1500","quadro fx 4","quadro fx 5","radeon hd 2400","radeon hd 2600","radeon hd 4670","radeon hd 4850","radeon hd 4870","radeon hd 5670","radeon hd 5750","radeon hd 6290","radeon hd 6300","radeon hd 6310","radeon hd 6320","radeon hd 6490m","radeon hd 6630m","radeon hd 6750m","radeon hd 6770m","radeon hd 6970m","sgx 543","sgx543"];function AM(s){return s=s.toLowerCase().replace(/.*angle ?\((.+)\)(?: on vulkan [0-9.]+)?$/i,"$1").replace(/\s(\d{1,2}gb|direct3d.+$)|\(r\)| \([^)]+\)$/g,"").replace(/(?:vulkan|opengl) \d+\.\d+(?:\.\d+)?(?: \((.*)\))?/,"$1")}const yM=typeof window=="undefined",qf=(()=>{if(yM)return;const{userAgent:s,platform:t,maxTouchPoints:r}=window.navigator,l=/(iphone|ipod|ipad)/i.test(s),c=t==="iPad"||t==="MacIntel"&&r>0&&!window.MSStream;return{isIpad:c,isMobile:/android/i.test(s)||l||c,isSafari12:/Version\/12.+Safari/.test(s)}})();function DS(s,t,r){if(!r)return[t];const l=function(E){const x=`
    precision highp float;
    attribute vec3 aPosition;
    varying float vvv;
    void main() {
      vvv = 0.31622776601683794;
      gl_Position = vec4(aPosition, 1.0);
    }
  `,T=`
    precision highp float;
    varying float vvv;
    void main() {
      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;
      enc = fract(enc);
      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);
      gl_FragColor = enc;
    }
  `,R=E.createShader(35633),F=E.createShader(35632),U=E.createProgram();if(!(F&&R&&U))return;E.shaderSource(R,x),E.shaderSource(F,T),E.compileShader(R),E.compileShader(F),E.attachShader(U,R),E.attachShader(U,F),E.linkProgram(U),E.detachShader(U,R),E.detachShader(U,F),E.deleteShader(R),E.deleteShader(F),E.useProgram(U);const P=E.createBuffer();E.bindBuffer(34962,P),E.bufferData(34962,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),35044);const O=E.getAttribLocation(U,"aPosition");E.vertexAttribPointer(O,3,5126,!1,0,0),E.enableVertexAttribArray(O),E.clearColor(1,1,1,1),E.clear(16384),E.viewport(0,0,1,1),E.drawArrays(4,0,3);const z=new Uint8Array(4);return E.readPixels(0,0,1,1,6408,5121,z),E.deleteProgram(U),E.deleteBuffer(P),z.join("")}(s),c="801621810",p="8016218135",h="80162181161",m=qf!=null&&qf.isIpad?[["a7",h,12],["a8",p,15],["a8x",p,15],["a9",p,15],["a9x",p,15],["a10",p,15],["a10x",p,15],["a12",c,15],["a12x",c,15],["a12z",c,15],["a14",c,15],["m1",c,15]]:[["a7",h,12],["a8",p,12],["a9",p,15],["a10",p,15],["a11",c,15],["a12",c,15],["a13",c,15],["a14",c,15]];let v;return l==="80162181255"?v=m.filter(([,,E])=>E>=14):(v=m.filter(([,E])=>E===l),v.length||(v=m)),v.map(([E])=>`apple ${E} gpu`)}class vM extends Error{constructor(t){super(t),Object.setPrototypeOf(this,new.target.prototype)}}const xE=[],_M=[];function LS(s,t){if(s===t)return 0;const r=s;s.length>t.length&&(s=t,t=r);let l=s.length,c=t.length;for(;l>0&&s.charCodeAt(~-l)===t.charCodeAt(~-c);)l--,c--;let p,h=0;for(;h<l&&s.charCodeAt(h)===t.charCodeAt(h);)h++;if(l-=h,c-=h,l===0)return c;let m,v,E=0,x=0,T=0;for(;x<l;)_M[x]=s.charCodeAt(h+x),xE[x]=++x;for(;T<c;)for(p=t.charCodeAt(h+T),m=T++,E=T,x=0;x<l;x++)v=p===_M[x]?m:m+1,m=xE[x],E=xE[x]=m>E?v>E?E+1:v:v>m?m+1:v;return E}function PS(s){return s!=null}const kS=({mobileTiers:s=[0,15,30,60],desktopTiers:t=[0,15,30,60],override:r={},glContext:l,failIfMajorPerformanceCaveat:c=!1,benchmarksURL:p="https://unpkg.com/detect-gpu@5.0.29/dist/benchmarks"}={})=>ME(void 0,void 0,void 0,function*(){const h={};if(yM)return{tier:0,type:"SSR"};const{isIpad:m=!!(qf!=null&&qf.isIpad),isMobile:v=!!(qf!=null&&qf.isMobile),screenSize:E=window.screen,loadBenchmarks:x=X=>ME(void 0,void 0,void 0,function*(){const W=yield fetch(`${p}/${X}`).then(J=>J.json());if(parseInt(W.shift().split(".")[0],10)<4)throw new vM("Detect GPU benchmark data is out of date. Please update to version 4x");return W})}=r;let{renderer:T}=r;const R=(X,W,J,Y,ce)=>({device:ce,fps:Y,gpu:J,isMobile:v,tier:X,type:W});let F,U="";if(T)T=AM(T),F=[T];else{const X=l||function(J,Y=!1){const ce={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:Y,powerPreference:"high-performance",stencil:!1};J&&delete ce.powerPreference;const ue=window.document.createElement("canvas"),ge=ue.getContext("webgl",ce)||ue.getContext("experimental-webgl",ce);return ge!=null?ge:void 0}(qf==null?void 0:qf.isSafari12,c);if(!X)return R(0,"WEBGL_UNSUPPORTED");const W=X.getExtension("WEBGL_debug_renderer_info");if(W&&(T=X.getParameter(W.UNMASKED_RENDERER_WEBGL)),!T)return R(1,"FALLBACK");U=T,T=AM(T),F=function(J,Y,ce){return Y==="apple gpu"?DS(J,Y,ce):[Y]}(X,T,v)}const P=(yield Promise.all(F.map(function(X){var W;return ME(this,void 0,void 0,function*(){const J=(_e=>{const oe=v?["adreno","apple","mali-t","mali","nvidia","powervr","samsung"]:["intel","apple","amd","radeon","nvidia","geforce"];for(const Ae of oe)if(_e.includes(Ae))return Ae})(X);if(!J)return;const Y=`${v?"m":"d"}-${J}${m?"-ipad":""}.json`,ce=h[Y]=(W=h[Y])!==null&&W!==void 0?W:x(Y);let ue;try{ue=yield ce}catch(_e){if(_e instanceof vM)throw _e;return}const ge=function(_e){var oe;const Ae=(_e=_e.replace(/\([^)]+\)/,"")).match(/\d+/)||_e.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return(oe=Ae==null?void 0:Ae.join("").replace(/\W|amd/g,""))!==null&&oe!==void 0?oe:""}(X);let le=ue.filter(([,_e])=>_e===ge);le.length||(le=ue.filter(([_e])=>_e.includes(X)));const Me=le.length;if(Me===0)return;const me=X.split(/[.,()\[\]/\s]/g).sort().filter((_e,oe,Ae)=>oe===0||_e!==Ae[oe-1]).join(" ");let Te,[Ue,,,,Re]=Me>1?le.map(_e=>[_e,LS(me,_e[2])]).sort(([,_e],[,oe])=>_e-oe)[0][0]:le[0],Ge=Number.MAX_VALUE;const{devicePixelRatio:De}=window,Xe=E.width*De*E.height*De;for(const _e of Re){const[oe,Ae]=_e,Be=oe*Ae,ve=Math.abs(Xe-Be);ve<Ge&&(Ge=ve,Te=_e)}if(!Te)return;const[,,Ce,Ee]=Te;return[Ge,Ce,Ue,Ee]})}))).filter(PS).sort(([X=Number.MAX_VALUE,W],[J=Number.MAX_VALUE,Y])=>X===J?W-Y:X-J);if(!P.length){const X=OS.find(W=>T.includes(W));return X?R(0,"BLOCKLISTED",X):R(1,"FALLBACK",`${T} (${U})`)}const[,O,z,L]=P[0];if(O===-1)return R(0,"BLOCKLISTED",z,O,L);const k=v?s:t;let H=0;for(let X=0;X<k.length;X++)O>=k[X]&&(H=X);return R(H,"BENCHMARK",z,O,L)}),zS=s=>(0,Hc.Rq)(()=>kS(s),["useDetectGPU"]);function EM(s,t,...r){const l=d.useRef(),c=(0,_.z)(p=>p.scene);return d.useLayoutEffect(()=>{let p;if(s&&s!=null&&s.current&&t&&(l.current=p=new t(s.current,...r)),p)return c.add(p),()=>{l.current=void 0,c.remove(p),p.dispose==null||p.dispose()}},[c,t,s,...r]),(0,_.A)(()=>{var p;return void((p=l.current)==null||p.update==null?void 0:p.update())}),l}const bM=0,GS=1,d2=2,gO=0,mO=1,MM=2,CE=1.25,xM=1,Cm=6*4+4+4,SE=65535,US=Math.pow(2,-24),j0=new i.Vector3,H0=new i.Vector3,W0=new i.Vector3,h2=new i.Vector2,f2=new i.Vector2,g2=new i.Vector2,CM=new i.Vector3,SM=new i.Vector3,wM=new i.Vector3,m2=new i.Vector3;function NS(s,t,r,l,c,p){let h;return p===i.BackSide?h=s.intersectTriangle(l,r,t,!0,c):h=s.intersectTriangle(t,r,l,p!==i.DoubleSide,c),h===null?null:{distance:s.origin.distanceTo(c),point:c.clone()}}function jS(s,t,r,l,c,p,h,m,v){j0.fromBufferAttribute(t,p),H0.fromBufferAttribute(t,h),W0.fromBufferAttribute(t,m);const E=NS(s,j0,H0,W0,m2,v);if(E){l&&(h2.fromBufferAttribute(l,p),f2.fromBufferAttribute(l,h),g2.fromBufferAttribute(l,m),E.uv=i.Triangle.getInterpolation(m2,j0,H0,W0,h2,f2,g2,new i.Vector2)),c&&(h2.fromBufferAttribute(c,p),f2.fromBufferAttribute(c,h),g2.fromBufferAttribute(c,m),E.uv1=i.Triangle.getInterpolation(m2,j0,H0,W0,h2,f2,g2,new i.Vector2)),r&&(CM.fromBufferAttribute(r,p),SM.fromBufferAttribute(r,h),wM.fromBufferAttribute(r,m),E.normal=i.Triangle.getInterpolation(m2,j0,H0,W0,CM,SM,wM,new i.Vector3),E.normal.dot(s.direction)>0&&E.normal.multiplyScalar(-1));const x={a:p,b:h,c:m,normal:new i.Vector3,materialIndex:0};i.Triangle.getNormal(j0,H0,W0,x.normal),E.face=x,E.faceIndex=p}return E}function TM(s,t,r,l,c){const p=l*3,h=s.index.getX(p),m=s.index.getX(p+1),v=s.index.getX(p+2),{position:E,normal:x,uv:T,uv1:R}=s.attributes,F=jS(r,E,x,T,R,h,m,v,t);return F?(F.faceIndex=l,c&&c.push(F),F):null}function HS(s,t,r,l,c,p){for(let h=l,m=l+c;h<m;h++)TM(s,t,r,h,p)}function WS(s,t,r,l,c){let p=1/0,h=null;for(let m=l,v=l+c;m<v;m++){const E=TM(s,t,r,m);E&&E.distance<p&&(h=E,p=E.distance)}return h}function BM(s,t,r){return s===null||(s.point.applyMatrix4(t.matrixWorld),s.distance=s.point.distanceTo(r.ray.origin),s.object=t,s.distance<r.near||s.distance>r.far)?null:s}class A2{constructor(){}}function Dd(s,t,r){return r.min.x=t[s],r.min.y=t[s+1],r.min.z=t[s+2],r.max.x=t[s+3],r.max.y=t[s+4],r.max.z=t[s+5],r}function RM(s){let t=-1,r=-1/0;for(let l=0;l<3;l++){const c=s[l+3]-s[l];c>r&&(r=c,t=l)}return t}function IM(s,t){t.set(s)}function FM(s,t,r){let l,c;for(let p=0;p<3;p++){const h=p+3;l=s[p],c=t[p],r[p]=l<c?l:c,l=s[h],c=t[h],r[h]=l>c?l:c}}function y2(s,t,r){for(let l=0;l<3;l++){const c=t[s+2*l],p=t[s+2*l+1],h=c-p,m=c+p;h<r[l]&&(r[l]=h),m>r[l+3]&&(r[l+3]=m)}}function wA(s){const t=s[3]-s[0],r=s[4]-s[1],l=s[5]-s[2];return 2*(t*r+r*l+l*t)}var wE=A(5108);function VS(s,t){if(!s.index){const r=s.attributes.position.count,l=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;let c;r>65535?c=new Uint32Array(new l(4*r)):c=new Uint16Array(new l(2*r)),s.setIndex(new i.BufferAttribute(c,1));for(let p=0;p<r;p++)c[p]=p}}function QS(s){if(!s.groups||!s.groups.length)return[{offset:0,count:s.index.count/3}];const t=[],r=new Set;for(const c of s.groups)r.add(c.start),r.add(c.start+c.count);const l=Array.from(r.values()).sort((c,p)=>c-p);for(let c=0;c<l.length-1;c++){const p=l[c],h=l[c+1];t.push({offset:p/3,count:(h-p)/3})}return t}function TE(s,t,r,l,c=null){let p=1/0,h=1/0,m=1/0,v=-1/0,E=-1/0,x=-1/0,T=1/0,R=1/0,F=1/0,U=-1/0,P=-1/0,O=-1/0;const z=c!==null;for(let L=t*6,k=(t+r)*6;L<k;L+=6){const H=s[L+0],X=s[L+1],W=H-X,J=H+X;W<p&&(p=W),J>v&&(v=J),z&&H<T&&(T=H),z&&H>U&&(U=H);const Y=s[L+2],ce=s[L+3],ue=Y-ce,ge=Y+ce;ue<h&&(h=ue),ge>E&&(E=ge),z&&Y<R&&(R=Y),z&&Y>P&&(P=Y);const le=s[L+4],Me=s[L+5],me=le-Me,Te=le+Me;me<m&&(m=me),Te>x&&(x=Te),z&&le<F&&(F=le),z&&le>O&&(O=le)}l[0]=p,l[1]=h,l[2]=m,l[3]=v,l[4]=E,l[5]=x,z&&(c[0]=T,c[1]=R,c[2]=F,c[3]=U,c[4]=P,c[5]=O)}function KS(s,t,r,l){let c=1/0,p=1/0,h=1/0,m=-1/0,v=-1/0,E=-1/0;for(let x=t*6,T=(t+r)*6;x<T;x+=6){const R=s[x+0];R<c&&(c=R),R>m&&(m=R);const F=s[x+2];F<p&&(p=F),F>v&&(v=F);const U=s[x+4];U<h&&(h=U),U>E&&(E=U)}l[0]=c,l[1]=p,l[2]=h,l[3]=m,l[4]=v,l[5]=E}function XS(s,t,r,l,c){let p=r,h=r+l-1;const m=c.pos,v=c.axis*2;for(;;){for(;p<=h&&t[p*6+v]<m;)p++;for(;p<=h&&t[h*6+v]>=m;)h--;if(p<h){for(let E=0;E<3;E++){let x=s[p*3+E];s[p*3+E]=s[h*3+E],s[h*3+E]=x;let T=t[p*6+E*2+0];t[p*6+E*2+0]=t[h*6+E*2+0],t[h*6+E*2+0]=T;let R=t[p*6+E*2+1];t[p*6+E*2+1]=t[h*6+E*2+1],t[h*6+E*2+1]=R}p++,h--}else return p}}const Lh=32,YS=(s,t)=>s.candidate-t.candidate,$f=new Array(Lh).fill().map(()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0})),v2=new Float32Array(6);function JS(s,t,r,l,c,p){let h=-1,m=0;if(p===bM)h=RM(t),h!==-1&&(m=(t[h]+t[h+3])/2);else if(p===GS)h=RM(s),h!==-1&&(m=ZS(r,l,c,h));else if(p===d2){const v=wA(s);let E=CE*c;const x=l*6,T=(l+c)*6;for(let R=0;R<3;R++){const F=t[R],O=(t[R+3]-F)/Lh;if(c<Lh/4){const z=[...$f];z.length=c;let L=0;for(let H=x;H<T;H+=6,L++){const X=z[L];X.candidate=r[H+2*R],X.count=0;const{bounds:W,leftCacheBounds:J,rightCacheBounds:Y}=X;for(let ce=0;ce<3;ce++)Y[ce]=1/0,Y[ce+3]=-1/0,J[ce]=1/0,J[ce+3]=-1/0,W[ce]=1/0,W[ce+3]=-1/0;y2(H,r,W)}z.sort(YS);let k=c;for(let H=0;H<k;H++){const X=z[H];for(;H+1<k&&z[H+1].candidate===X.candidate;)z.splice(H+1,1),k--}for(let H=x;H<T;H+=6){const X=r[H+2*R];for(let W=0;W<k;W++){const J=z[W];X>=J.candidate?y2(H,r,J.rightCacheBounds):(y2(H,r,J.leftCacheBounds),J.count++)}}for(let H=0;H<k;H++){const X=z[H],W=X.count,J=c-X.count,Y=X.leftCacheBounds,ce=X.rightCacheBounds;let ue=0;W!==0&&(ue=wA(Y)/v);let ge=0;J!==0&&(ge=wA(ce)/v);const le=xM+CE*(ue*W+ge*J);le<E&&(h=R,E=le,m=X.candidate)}}else{for(let k=0;k<Lh;k++){const H=$f[k];H.count=0,H.candidate=F+O+k*O;const X=H.bounds;for(let W=0;W<3;W++)X[W]=1/0,X[W+3]=-1/0}for(let k=x;k<T;k+=6){let W=~~((r[k+2*R]-F)/O);W>=Lh&&(W=Lh-1);const J=$f[W];J.count++,y2(k,r,J.bounds)}const z=$f[Lh-1];IM(z.bounds,z.rightCacheBounds);for(let k=Lh-2;k>=0;k--){const H=$f[k],X=$f[k+1];FM(H.bounds,X.rightCacheBounds,H.rightCacheBounds)}let L=0;for(let k=0;k<Lh-1;k++){const H=$f[k],X=H.count,W=H.bounds,Y=$f[k+1].rightCacheBounds;X!==0&&(L===0?IM(W,v2):FM(W,v2,v2)),L+=X;let ce=0,ue=0;L!==0&&(ce=wA(v2)/v);const ge=c-L;ge!==0&&(ue=wA(Y)/v);const le=xM+CE*(ce*L+ue*ge);le<E&&(h=R,E=le,m=H.candidate)}}}}else wE.warn(`MeshBVH: Invalid build strategy value ${p} used.`);return{axis:h,pos:m}}function ZS(s,t,r,l){let c=0;for(let p=t,h=t+r;p<h;p++)c+=s[p*6+l*2];return c/r}function qS(s,t){const r=s.attributes.position,l=s.index.array,c=l.length/3,p=new Float32Array(c*6),h=r.normalized,m=r.array,v=r.offset||0;let E=3;r.isInterleavedBufferAttribute&&(E=r.data.stride);const x=["getX","getY","getZ"];for(let T=0;T<c;T++){const R=T*3,F=T*6;let U,P,O;h?(U=l[R+0],P=l[R+1],O=l[R+2]):(U=l[R+0]*E+v,P=l[R+1]*E+v,O=l[R+2]*E+v);for(let z=0;z<3;z++){let L,k,H;h?(L=r[x[z]](U),k=r[x[z]](P),H=r[x[z]](O)):(L=m[U+z],k=m[P+z],H=m[O+z]);let X=L;k<X&&(X=k),H<X&&(X=H);let W=L;k>W&&(W=k),H>W&&(W=H);const J=(W-X)/2,Y=z*2;p[F+Y+0]=X+J,p[F+Y+1]=J+(Math.abs(X)+J)*US,X<t[z]&&(t[z]=X),W>t[z+3]&&(t[z+3]=W)}}return p}function $S(s,t){function r(z){R&&R(z/F)}function l(z,L,k,H=null,X=0){if(!U&&X>=v&&(U=!0,E&&(wE.warn(`MeshBVH: Max depth of ${v} reached when generating BVH. Consider increasing maxDepth.`),wE.warn(s))),k<=x||X>=v)return r(L+k),z.offset=L,z.count=k,z;const W=JS(z.boundingData,H,h,L,k,T);if(W.axis===-1)return r(L+k),z.offset=L,z.count=k,z;const J=XS(m,h,L,k,W);if(J===L||J===L+k)r(L+k),z.offset=L,z.count=k;else{z.splitAxis=W.axis;const Y=new A2,ce=L,ue=J-L;z.left=Y,Y.boundingData=new Float32Array(6),TE(h,ce,ue,Y.boundingData,p),l(Y,ce,ue,p,X+1);const ge=new A2,le=J,Me=k-ue;z.right=ge,ge.boundingData=new Float32Array(6),TE(h,le,Me,ge.boundingData,p),l(ge,le,Me,p,X+1)}return z}VS(s,t);const c=new Float32Array(6),p=new Float32Array(6),h=qS(s,c),m=s.index.array,v=t.maxDepth,E=t.verbose,x=t.maxLeafTris,T=t.strategy,R=t.onProgress,F=s.index.count/3;let U=!1;const P=[],O=QS(s);if(O.length===1){const z=O[0],L=new A2;L.boundingData=c,KS(h,z.offset,z.count,p),l(L,z.offset,z.count,p),P.push(L)}else for(let z of O){const L=new A2;L.boundingData=new Float32Array(6),TE(h,z.offset,z.count,L.boundingData,p),l(L,z.offset,z.count,p),P.push(L)}return P}function e4(s,t){const r=$S(s,t);let l,c,p;const h=[],m=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;for(let x=0;x<r.length;x++){const T=r[x];let R=v(T);const F=new m(Cm*R);l=new Float32Array(F),c=new Uint32Array(F),p=new Uint16Array(F),E(0,T),h.push(F)}return h;function v(x){return x.count?1:1+v(x.left)+v(x.right)}function E(x,T){const R=x/4,F=x/2,U=!!T.count,P=T.boundingData;for(let O=0;O<6;O++)l[R+O]=P[O];if(U){const O=T.offset,z=T.count;return c[R+6]=O,p[F+14]=z,p[F+15]=SE,x+Cm}else{const O=T.left,z=T.right,L=T.splitAxis;let k;if(k=E(x+Cm,O),k/4>Math.pow(2,32))throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return c[R+6]=k/4,k=E(k,z),c[R+7]=L,k}}}class Ld{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(t,r){let l=1/0,c=-1/0;for(let p=0,h=t.length;p<h;p++){const v=t[p][r];l=v<l?v:l,c=v>c?v:c}this.min=l,this.max=c}setFromPoints(t,r){let l=1/0,c=-1/0;for(let p=0,h=r.length;p<h;p++){const m=r[p],v=t.dot(m);l=v<l?v:l,c=v>c?v:c}this.min=l,this.max=c}isSeparated(t){return this.min>t.max||t.min>this.max}}Ld.prototype.setFromBox=function(){const s=new i.Vector3;return function(r,l){const c=l.min,p=l.max;let h=1/0,m=-1/0;for(let v=0;v<=1;v++)for(let E=0;E<=1;E++)for(let x=0;x<=1;x++){s.x=c.x*v+p.x*(1-v),s.y=c.y*E+p.y*(1-E),s.z=c.z*x+p.z*(1-x);const T=r.dot(s);h=Math.min(T,h),m=Math.max(T,m)}this.min=h,this.max=m}}();const AO=function(){const s=new Ld;return function(r,l){const c=r.points,p=r.satAxes,h=r.satBounds,m=l.points,v=l.satAxes,E=l.satBounds;for(let x=0;x<3;x++){const T=h[x],R=p[x];if(s.setFromPoints(R,m),T.isSeparated(s))return!1}for(let x=0;x<3;x++){const T=E[x],R=v[x];if(s.setFromPoints(R,c),T.isSeparated(s))return!1}}}(),t4=function(){const s=new i.Vector3,t=new i.Vector3,r=new i.Vector3;return function(c,p,h){const m=c.start,v=s,E=p.start,x=t;r.subVectors(m,E),s.subVectors(c.end,c.start),t.subVectors(p.end,p.start);const T=r.dot(x),R=x.dot(v),F=x.dot(x),U=r.dot(v),O=v.dot(v)*F-R*R;let z,L;O!==0?z=(T*R-U*F)/O:z=0,L=(T+z*R)/F,h.x=z,h.y=L}}(),BE=function(){const s=new i.Vector2,t=new i.Vector3,r=new i.Vector3;return function(c,p,h,m){t4(c,p,s);let v=s.x,E=s.y;if(v>=0&&v<=1&&E>=0&&E<=1){c.at(v,h),p.at(E,m);return}else if(v>=0&&v<=1){E<0?p.at(0,m):p.at(1,m),c.closestPointToPoint(m,!0,h);return}else if(E>=0&&E<=1){v<0?c.at(0,h):c.at(1,h),p.closestPointToPoint(h,!0,m);return}else{let x;v<0?x=c.start:x=c.end;let T;E<0?T=p.start:T=p.end;const R=t,F=r;if(c.closestPointToPoint(T,!0,t),p.closestPointToPoint(x,!0,r),R.distanceToSquared(T)<=F.distanceToSquared(x)){h.copy(R),m.copy(T);return}else{h.copy(x),m.copy(F);return}}}}(),n4=function(){const s=new i.Vector3,t=new i.Vector3,r=new i.Plane,l=new i.Line3;return function(p,h){const{radius:m,center:v}=p,{a:E,b:x,c:T}=h;if(l.start=E,l.end=x,l.closestPointToPoint(v,!0,s).distanceTo(v)<=m||(l.start=E,l.end=T,l.closestPointToPoint(v,!0,s).distanceTo(v)<=m)||(l.start=x,l.end=T,l.closestPointToPoint(v,!0,s).distanceTo(v)<=m))return!0;const P=h.getPlane(r);if(Math.abs(P.distanceToPoint(v))<=m){const z=P.projectPoint(v,t);if(h.containsPoint(z))return!0}return!1}}();var r4=A(5108);const i4=1e-15;function V0(s){return Math.abs(s)<i4}class Ph extends i.Triangle{constructor(...t){super(...t),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map(()=>new i.Vector3),this.satBounds=new Array(4).fill().map(()=>new Ld),this.points=[this.a,this.b,this.c],this.sphere=new i.Sphere,this.plane=new i.Plane,this.needsUpdate=!0}intersectsSphere(t){return n4(t,this)}update(){const t=this.a,r=this.b,l=this.c,c=this.points,p=this.satAxes,h=this.satBounds,m=p[0],v=h[0];this.getNormal(m),v.setFromPoints(m,c);const E=p[1],x=h[1];E.subVectors(t,r),x.setFromPoints(E,c);const T=p[2],R=h[2];T.subVectors(r,l),R.setFromPoints(T,c);const F=p[3],U=h[3];F.subVectors(l,t),U.setFromPoints(F,c),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(m,t),this.needsUpdate=!1}}Ph.prototype.closestPointToSegment=function(){const s=new i.Vector3,t=new i.Vector3,r=new i.Line3;return function(c,p=null,h=null){const{start:m,end:v}=c,E=this.points;let x,T=1/0;for(let R=0;R<3;R++){const F=(R+1)%3;r.start.copy(E[R]),r.end.copy(E[F]),BE(r,c,s,t),x=s.distanceToSquared(t),x<T&&(T=x,p&&p.copy(s),h&&h.copy(t))}return this.closestPointToPoint(m,s),x=m.distanceToSquared(s),x<T&&(T=x,p&&p.copy(s),h&&h.copy(m)),this.closestPointToPoint(v,s),x=v.distanceToSquared(s),x<T&&(T=x,p&&p.copy(s),h&&h.copy(v)),Math.sqrt(T)}}(),Ph.prototype.intersectsTriangle=function(){const s=new Ph,t=new Array(3),r=new Array(3),l=new Ld,c=new Ld,p=new i.Vector3,h=new i.Vector3,m=new i.Vector3,v=new i.Vector3,E=new i.Line3,x=new i.Line3,T=new i.Line3;return function(F,U=null,P=!1){this.needsUpdate&&this.update(),F.isExtendedTriangle?F.needsUpdate&&F.update():(s.copy(F),s.update(),F=s);const O=this.plane,z=F.plane;if(Math.abs(O.normal.dot(z.normal))>1-1e-10){const L=this.satBounds,k=this.satAxes;r[0]=F.a,r[1]=F.b,r[2]=F.c;for(let W=0;W<4;W++){const J=L[W],Y=k[W];if(l.setFromPoints(Y,r),J.isSeparated(l))return!1}const H=F.satBounds,X=F.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let W=0;W<4;W++){const J=H[W],Y=X[W];if(l.setFromPoints(Y,t),J.isSeparated(l))return!1}for(let W=0;W<4;W++){const J=k[W];for(let Y=0;Y<4;Y++){const ce=X[Y];if(p.crossVectors(J,ce),l.setFromPoints(p,t),c.setFromPoints(p,r),l.isSeparated(c))return!1}}return U&&(P||r4.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),U.start.set(0,0,0),U.end.set(0,0,0)),!0}else{const L=this.points;let k=!1,H=0;for(let me=0;me<3;me++){const Te=L[me],Ue=L[(me+1)%3];E.start.copy(Te),E.end.copy(Ue),E.delta(h);const Re=k?x.start:x.end,Ge=V0(z.distanceToPoint(Te));if(V0(z.normal.dot(h))&&Ge){x.copy(E),H=2;break}if((z.intersectLine(E,Re)||Ge)&&!V0(Re.distanceTo(Ue))){if(H++,k)break;k=!0}}if(H===1&&F.containsPoint(x.end))return U&&(U.start.copy(x.end),U.end.copy(x.end)),!0;if(H!==2)return!1;const X=F.points;let W=!1,J=0;for(let me=0;me<3;me++){const Te=X[me],Ue=X[(me+1)%3];E.start.copy(Te),E.end.copy(Ue),E.delta(m);const Re=W?T.start:T.end,Ge=V0(O.distanceToPoint(Te));if(V0(O.normal.dot(m))&&Ge){T.copy(E),J=2;break}if((O.intersectLine(E,Re)||Ge)&&!V0(Re.distanceTo(Ue))){if(J++,W)break;W=!0}}if(J===1&&this.containsPoint(T.end))return U&&(U.start.copy(T.end),U.end.copy(T.end)),!0;if(J!==2)return!1;if(x.delta(h),T.delta(m),h.dot(m)<0){let me=T.start;T.start=T.end,T.end=me}const Y=x.start.dot(h),ce=x.end.dot(h),ue=T.start.dot(h),ge=T.end.dot(h),le=ce<ue,Me=Y<ge;return Y!==ge&&ue!==ce&&le===Me?!1:(U&&(v.subVectors(x.start,T.start),v.dot(h)>0?U.start.copy(x.start):U.start.copy(T.start),v.subVectors(x.end,T.end),v.dot(h)<0?U.end.copy(x.end):U.end.copy(T.end)),!0)}}}(),Ph.prototype.distanceToPoint=function(){const s=new i.Vector3;return function(r){return this.closestPointToPoint(r,s),r.distanceTo(s)}}(),Ph.prototype.distanceToTriangle=function(){const s=new i.Vector3,t=new i.Vector3,r=["a","b","c"],l=new i.Line3,c=new i.Line3;return function(h,m=null,v=null){const E=m||v?l:null;if(this.intersectsTriangle(h,E))return(m||v)&&(m&&E.getCenter(m),v&&E.getCenter(v)),0;let x=1/0;for(let T=0;T<3;T++){let R;const F=r[T],U=h[F];this.closestPointToPoint(U,s),R=U.distanceToSquared(s),R<x&&(x=R,m&&m.copy(s),v&&v.copy(U));const P=this[F];h.closestPointToPoint(P,s),R=P.distanceToSquared(s),R<x&&(x=R,m&&m.copy(P),v&&v.copy(s))}for(let T=0;T<3;T++){const R=r[T],F=r[(T+1)%3];l.set(this[R],this[F]);for(let U=0;U<3;U++){const P=r[U],O=r[(U+1)%3];c.set(h[P],h[O]),BE(l,c,s,t);const z=s.distanceToSquared(t);z<x&&(x=z,m&&m.copy(s),v&&v.copy(t))}}return Math.sqrt(x)}}();class Pd{constructor(t,r,l){this.isOrientedBox=!0,this.min=new i.Vector3,this.max=new i.Vector3,this.matrix=new i.Matrix4,this.invMatrix=new i.Matrix4,this.points=new Array(8).fill().map(()=>new i.Vector3),this.satAxes=new Array(3).fill().map(()=>new i.Vector3),this.satBounds=new Array(3).fill().map(()=>new Ld),this.alignedSatBounds=new Array(3).fill().map(()=>new Ld),this.needsUpdate=!1,t&&this.min.copy(t),r&&this.max.copy(r),l&&this.matrix.copy(l)}set(t,r,l){this.min.copy(t),this.max.copy(r),this.matrix.copy(l),this.needsUpdate=!0}copy(t){this.min.copy(t.min),this.max.copy(t.max),this.matrix.copy(t.matrix),this.needsUpdate=!0}}Pd.prototype.update=function(){return function(){const t=this.matrix,r=this.min,l=this.max,c=this.points;for(let E=0;E<=1;E++)for(let x=0;x<=1;x++)for(let T=0;T<=1;T++){const R=1*E|2*x|4*T,F=c[R];F.x=E?l.x:r.x,F.y=x?l.y:r.y,F.z=T?l.z:r.z,F.applyMatrix4(t)}const p=this.satBounds,h=this.satAxes,m=c[0];for(let E=0;E<3;E++){const x=h[E],T=p[E],R=1<<E,F=c[R];x.subVectors(m,F),T.setFromPoints(x,c)}const v=this.alignedSatBounds;v[0].setFromPointsField(c,"x"),v[1].setFromPointsField(c,"y"),v[2].setFromPointsField(c,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1}}(),Pd.prototype.intersectsBox=function(){const s=new Ld;return function(r){this.needsUpdate&&this.update();const l=r.min,c=r.max,p=this.satBounds,h=this.satAxes,m=this.alignedSatBounds;if(s.min=l.x,s.max=c.x,m[0].isSeparated(s)||(s.min=l.y,s.max=c.y,m[1].isSeparated(s))||(s.min=l.z,s.max=c.z,m[2].isSeparated(s)))return!1;for(let v=0;v<3;v++){const E=h[v],x=p[v];if(s.setFromBox(E,r),x.isSeparated(s))return!1}return!0}}(),Pd.prototype.intersectsTriangle=function(){const s=new Ph,t=new Array(3),r=new Ld,l=new Ld,c=new i.Vector3;return function(h){this.needsUpdate&&this.update(),h.isExtendedTriangle?h.needsUpdate&&h.update():(s.copy(h),s.update(),h=s);const m=this.satBounds,v=this.satAxes;t[0]=h.a,t[1]=h.b,t[2]=h.c;for(let R=0;R<3;R++){const F=m[R],U=v[R];if(r.setFromPoints(U,t),F.isSeparated(r))return!1}const E=h.satBounds,x=h.satAxes,T=this.points;for(let R=0;R<3;R++){const F=E[R],U=x[R];if(r.setFromPoints(U,T),F.isSeparated(r))return!1}for(let R=0;R<3;R++){const F=v[R];for(let U=0;U<4;U++){const P=x[U];if(c.crossVectors(F,P),r.setFromPoints(c,t),l.setFromPoints(c,T),r.isSeparated(l))return!1}}return!0}}(),Pd.prototype.closestPointToPoint=function(){return function(t,r){return this.needsUpdate&&this.update(),r.copy(t).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),r}}(),Pd.prototype.distanceToPoint=function(){const s=new i.Vector3;return function(r){return this.closestPointToPoint(r,s),r.distanceTo(s)}}(),Pd.prototype.distanceToBox=function(){const s=["x","y","z"],t=new Array(12).fill().map(()=>new i.Line3),r=new Array(12).fill().map(()=>new i.Line3),l=new i.Vector3,c=new i.Vector3;return function(h,m=0,v=null,E=null){if(this.needsUpdate&&this.update(),this.intersectsBox(h))return(v||E)&&(h.getCenter(c),this.closestPointToPoint(c,l),h.closestPointToPoint(l,c),v&&v.copy(l),E&&E.copy(c)),0;const x=m*m,T=h.min,R=h.max,F=this.points;let U=1/0;for(let O=0;O<8;O++){const z=F[O];c.copy(z).clamp(T,R);const L=z.distanceToSquared(c);if(L<U&&(U=L,v&&v.copy(z),E&&E.copy(c),L<x))return Math.sqrt(L)}let P=0;for(let O=0;O<3;O++)for(let z=0;z<=1;z++)for(let L=0;L<=1;L++){const k=(O+1)%3,H=(O+2)%3,X=z<<k|L<<H,W=1<<O|z<<k|L<<H,J=F[X],Y=F[W];t[P].set(J,Y);const ue=s[O],ge=s[k],le=s[H],Me=r[P],me=Me.start,Te=Me.end;me[ue]=T[ue],me[ge]=z?T[ge]:R[ge],me[le]=L?T[le]:R[ge],Te[ue]=R[ue],Te[ge]=z?T[ge]:R[ge],Te[le]=L?T[le]:R[ge],P++}for(let O=0;O<=1;O++)for(let z=0;z<=1;z++)for(let L=0;L<=1;L++){c.x=O?R.x:T.x,c.y=z?R.y:T.y,c.z=L?R.z:T.z,this.closestPointToPoint(c,l);const k=c.distanceToSquared(l);if(k<U&&(U=k,v&&v.copy(l),E&&E.copy(c),k<x))return Math.sqrt(k)}for(let O=0;O<12;O++){const z=t[O];for(let L=0;L<12;L++){const k=r[L];BE(z,k,l,c);const H=l.distanceToSquared(c);if(H<U&&(U=H,v&&v.copy(l),E&&E.copy(c),H<x))return Math.sqrt(H)}}return Math.sqrt(U)}}();function kd(s,t,r,l){const c=s.a,p=s.b,h=s.c;let m=t,v=t+1,E=t+2;r&&(m=r.getX(t),v=r.getX(t+1),E=r.getX(t+2)),c.x=l.getX(m),c.y=l.getY(m),c.z=l.getZ(m),p.x=l.getX(v),p.y=l.getY(v),p.z=l.getZ(v),h.x=l.getX(E),h.y=l.getY(E),h.z=l.getZ(E)}function OM(s,t,r,l,c,p,h){const m=r.index,v=r.attributes.position;for(let E=s,x=t+s;E<x;E++)if(kd(h,E*3,m,v),h.needsUpdate=!0,l(h,E,c,p))return!0;return!1}const _2=new i.Vector3,E2=new i.Vector3,b2=new i.Vector3,DM=new i.Vector2,LM=new i.Vector2,PM=new i.Vector2;function yO(s,t,r,l){const c=t.getIndex().array,p=t.getAttribute("position"),h=t.getAttribute("uv"),m=c[r*3],v=c[r*3+1],E=c[r*3+2];_2.fromBufferAttribute(p,m),E2.fromBufferAttribute(p,v),b2.fromBufferAttribute(p,E);let x=0;const T=t.groups,R=r*3;for(let U=0,P=T.length;U<P;U++){const O=T[U],{start:z,count:L}=O;if(R>=z&&R<z+L){x=O.materialIndex;break}}let F=null;return h&&(DM.fromBufferAttribute(h,m),LM.fromBufferAttribute(h,v),PM.fromBufferAttribute(h,E),l&&l.uv?F=l.uv:F=new Vector2,Triangle.getInterpolation(s,_2,E2,b2,DM,LM,PM,F)),l?(l.face||(l.face={}),l.face.a=m,l.face.b=v,l.face.c=E,l.face.materialIndex=x,l.face.normal||(l.face.normal=new Vector3),Triangle.getNormal(_2,E2,b2,l.face.normal),F&&(l.uv=F),l):{face:{a:m,b:v,c:E,materialIndex:x,normal:Triangle.getNormal(_2,E2,b2,new Vector3)},uv:F}}class kM{constructor(t){this._getNewPrimitive=t,this._primitives=[]}getPrimitive(){const t=this._primitives;return t.length===0?this._getNewPrimitive():t.pop()}releasePrimitive(t){this._primitives.push(t)}}function kh(s,t){return t[s+15]===65535}function Sm(s,t){return t[s+6]}function Q0(s,t){return t[s+14]}function TA(s){return s+8}function K0(s,t){return t[s+6]}function zM(s,t){return t[s+7]}function vO(s){return s}const X0=new i.Box3,M2=new i.Vector3,o4=["x","y","z"];function RE(s,t,r,l,c){let p=s*2,h=Y0,m=eg,v=tg;if(kh(p,m)){const x=Sm(s,v),T=Q0(p,m);HS(t,r,l,x,T,c)}else{const x=TA(s);x2(x,h,l,M2)&&RE(x,t,r,l,c);const T=K0(s,v);x2(T,h,l,M2)&&RE(T,t,r,l,c)}}function IE(s,t,r,l){let c=s*2,p=Y0,h=eg,m=tg;if(kh(c,h)){const E=Sm(s,m),x=Q0(c,h);return WS(t,r,l,E,x)}else{const E=zM(s,m),x=o4[E],R=l.direction[x]>=0;let F,U;R?(F=TA(s),U=K0(s,m)):(F=K0(s,m),U=TA(s));const O=x2(F,p,l,M2)?IE(F,t,r,l):null;if(O){const k=O.point[x];if(R?k<=p[U+E]:k>=p[U+E+3])return O}const L=x2(U,p,l,M2)?IE(U,t,r,l):null;return O&&L?O.distance<=L.distance?O:L:O||L||null}}const s4=function(){let s,t;const r=[],l=new kM(()=>new i.Box3);return function(...h){s=l.getPrimitive(),t=l.getPrimitive(),r.push(s,t);const m=c(...h);l.releasePrimitive(s),l.releasePrimitive(t),r.pop(),r.pop();const v=r.length;return v>0&&(t=r[v-1],s=r[v-2]),m};function c(p,h,m,v,E=null,x=0,T=0){function R(k){let H=k*2,X=eg,W=tg;for(;!kh(H,X);)k=TA(k),H=k*2;return Sm(k,W)}function F(k){let H=k*2,X=eg,W=tg;for(;!kh(H,X);)k=K0(k,W),H=k*2;return Sm(k,W)+Q0(H,X)}let U=p*2,P=Y0,O=eg,z=tg;if(kh(U,O)){const k=Sm(p,z),H=Q0(U,O);return Dd(p,P,s),v(k,H,!1,T,x+p,s)}else{const k=TA(p),H=K0(p,z);let X=k,W=H,J,Y,ce,ue;if(E&&(ce=s,ue=t,Dd(X,P,ce),Dd(W,P,ue),J=E(ce),Y=E(ue),Y<J)){X=H,W=k;const Re=J;J=Y,Y=Re,ce=ue}ce||(ce=s,Dd(X,P,ce));const ge=kh(X*2,O),le=m(ce,ge,J,T+1,x+X);let Me;if(le===MM){const Re=R(X),De=F(X)-Re;Me=v(Re,De,!0,T+1,x+X,ce)}else Me=le&&c(X,h,m,v,E,x,T+1);if(Me)return!0;ue=t,Dd(W,P,ue);const me=kh(W*2,O),Te=m(ue,me,Y,T+1,x+W);let Ue;if(Te===MM){const Re=R(W),De=F(W)-Re;Ue=v(Re,De,!0,T+1,x+W,ue)}else Ue=Te&&c(W,h,m,v,E,x,T+1);return!!Ue}}}(),a4=function(){const s=new Ph,t=new Ph,r=new i.Matrix4,l=new Pd,c=new Pd;return function p(h,m,v,E,x=null){let T=h*2,R=Y0,F=eg,U=tg;if(x===null&&(v.boundingBox||v.computeBoundingBox(),l.set(v.boundingBox.min,v.boundingBox.max,E),x=l),kh(T,F)){const O=m,z=O.index,L=O.attributes.position,k=v.index,H=v.attributes.position,X=Sm(h,U),W=Q0(T,F);if(r.copy(E).invert(),v.boundsTree)return Dd(h,R,c),c.matrix.copy(r),c.needsUpdate=!0,v.boundsTree.shapecast({intersectsBounds:Y=>c.intersectsBox(Y),intersectsTriangle:Y=>{Y.a.applyMatrix4(E),Y.b.applyMatrix4(E),Y.c.applyMatrix4(E),Y.needsUpdate=!0;for(let ce=X*3,ue=(W+X)*3;ce<ue;ce+=3)if(kd(t,ce,z,L),t.needsUpdate=!0,Y.intersectsTriangle(t))return!0;return!1}});for(let J=X*3,Y=W+X*3;J<Y;J+=3){kd(s,J,z,L),s.a.applyMatrix4(r),s.b.applyMatrix4(r),s.c.applyMatrix4(r),s.needsUpdate=!0;for(let ce=0,ue=k.count;ce<ue;ce+=3)if(kd(t,ce,k,H),t.needsUpdate=!0,s.intersectsTriangle(t))return!0}}else{const O=h+8,z=U[h+6];return Dd(O,R,X0),!!(x.intersectsBox(X0)&&p(O,m,v,E,x)||(Dd(z,R,X0),x.intersectsBox(X0)&&p(z,m,v,E,x)))}}}();function x2(s,t,r,l){return Dd(s,t,X0),r.intersectBox(X0,l)}const FE=[];let C2,Y0,eg,tg;function BA(s){C2&&FE.push(C2),C2=s,Y0=new Float32Array(s),eg=new Uint16Array(s),tg=new Uint32Array(s)}function S2(){C2=null,Y0=null,eg=null,tg=null,FE.length&&BA(FE.pop())}var OE=A(5108);const DE=Symbol("skip tree generation"),LE=new i.Box3,PE=new i.Box3,J0=new i.Matrix4,wm=new Pd,RA=new Pd,IA=new i.Vector3,w2=new i.Vector3,l4=new i.Vector3,c4=new i.Vector3,p4=new i.Vector3,GM=new i.Box3,zd=new kM(()=>new Ph);class Z0{static serialize(t,r={}){if(r.isBufferGeometry)return OE.warn("MeshBVH.serialize: The arguments for the function have changed. See documentation for new signature."),Z0.serialize(arguments[0],{cloneBuffers:arguments[2]===void 0?!0:arguments[2]});r=Zn({cloneBuffers:!0},r);const l=t.geometry,c=t._roots,p=l.getIndex();let h;return r.cloneBuffers?h={roots:c.map(m=>m.slice()),index:p.array.slice()}:h={roots:c,index:p.array},h}static deserialize(t,r,l={}){if(typeof l=="boolean")return OE.warn("MeshBVH.deserialize: The arguments for the function have changed. See documentation for new signature."),Z0.deserialize(arguments[0],arguments[1],{setIndex:arguments[2]===void 0?!0:arguments[2]});l=Zn({setIndex:!0},l);const{index:c,roots:p}=t,h=new Z0(r,os(Zn({},l),{[DE]:!0}));if(h._roots=p,l.setIndex){const m=r.getIndex();if(m===null){const v=new i.BufferAttribute(t.index,1,!1);r.setIndex(v)}else m.array!==c&&(m.array.set(c),m.needsUpdate=!0)}return h}constructor(t,r={}){if(t.isBufferGeometry){if(t.index&&t.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.")}else throw new Error("MeshBVH: Only BufferGeometries are supported.");if(r=Object.assign({strategy:bM,maxDepth:40,maxLeafTris:10,verbose:!0,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,[DE]:!1},r),r.useSharedArrayBuffer&&typeof SharedArrayBuffer=="undefined")throw new Error("MeshBVH: SharedArrayBuffer is not available.");this._roots=null,r[DE]||(this._roots=e4(t,r),!t.boundingBox&&r.setBoundingBox&&(t.boundingBox=this.getBoundingBox(new i.Box3))),this.geometry=t}refit(t=null){t&&Array.isArray(t)&&(t=new Set(t));const r=this.geometry,l=r.index.array,c=r.attributes.position;let p,h,m,v,E=0;const x=this._roots;for(let R=0,F=x.length;R<F;R++)p=x[R],h=new Uint32Array(p),m=new Uint16Array(p),v=new Float32Array(p),T(0,E),E+=p.byteLength;function T(R,F,U=!1){const P=R*2;if(m[P+15]===SE){const z=h[R+6],L=m[P+14];let k=1/0,H=1/0,X=1/0,W=-1/0,J=-1/0,Y=-1/0;for(let ce=3*z,ue=3*(z+L);ce<ue;ce++){const ge=l[ce],le=c.getX(ge),Me=c.getY(ge),me=c.getZ(ge);le<k&&(k=le),le>W&&(W=le),Me<H&&(H=Me),Me>J&&(J=Me),me<X&&(X=me),me>Y&&(Y=me)}return v[R+0]!==k||v[R+1]!==H||v[R+2]!==X||v[R+3]!==W||v[R+4]!==J||v[R+5]!==Y?(v[R+0]=k,v[R+1]=H,v[R+2]=X,v[R+3]=W,v[R+4]=J,v[R+5]=Y,!0):!1}else{const z=R+8,L=h[R+6],k=z+F,H=L+F;let X=U,W=!1,J=!1;t?X||(W=t.has(k),J=t.has(H),X=!W&&!J):(W=!0,J=!0);const Y=X||W,ce=X||J;let ue=!1;Y&&(ue=T(z,F,X));let ge=!1;ce&&(ge=T(L,F,X));const le=ue||ge;if(le)for(let Me=0;Me<3;Me++){const me=z+Me,Te=L+Me,Ue=v[me],Re=v[me+3],Ge=v[Te],De=v[Te+3];v[R+Me]=Ue<Ge?Ue:Ge,v[R+Me+3]=Re>De?Re:De}return le}}}traverse(t,r=0){const l=this._roots[r],c=new Uint32Array(l),p=new Uint16Array(l);h(0);function h(m,v=0){const E=m*2,x=p[E+15]===SE;if(x){const T=c[m+6],R=p[E+14];t(v,x,new Float32Array(l,m*4,6),T,R)}else{const T=m+Cm/4,R=c[m+6],F=c[m+7];t(v,x,new Float32Array(l,m*4,6),F)||(h(T,v+1),h(R,v+1))}}}raycast(t,r=i.FrontSide){const l=this._roots,c=this.geometry,p=[],h=r.isMaterial,m=Array.isArray(r),v=c.groups,E=h?r.side:r;for(let x=0,T=l.length;x<T;x++){const R=m?r[v[x].materialIndex].side:E,F=p.length;if(BA(l[x]),RE(0,c,R,t,p),S2(),m){const U=v[x].materialIndex;for(let P=F,O=p.length;P<O;P++)p[P].face.materialIndex=U}}return p}raycastFirst(t,r=i.FrontSide){const l=this._roots,c=this.geometry,p=r.isMaterial,h=Array.isArray(r);let m=null;const v=c.groups,E=p?r.side:r;for(let x=0,T=l.length;x<T;x++){const R=h?r[v[x].materialIndex].side:E;BA(l[x]);const F=IE(0,c,R,t);S2(),F!=null&&(m==null||F.distance<m.distance)&&(m=F,h&&(F.face.materialIndex=v[x].materialIndex))}return m}intersectsGeometry(t,r){const l=this.geometry;let c=!1;for(const p of this._roots)if(BA(p),c=a4(0,l,t,r),S2(),c)break;return c}shapecast(t,r,l){const c=this.geometry;if(t instanceof Function){if(r){const R=r;r=(F,U,P,O)=>{const z=U*3;return R(F,z,z+1,z+2,P,O)}}t={boundsTraverseOrder:l,intersectsBounds:t,intersectsTriangle:r,intersectsRange:null},OE.warn("MeshBVH: Shapecast function signature has changed and now takes an object of callbacks as a second argument. See docs for new signature.")}const p=zd.getPrimitive();let{boundsTraverseOrder:h,intersectsBounds:m,intersectsRange:v,intersectsTriangle:E}=t;if(v&&E){const R=v;v=(F,U,P,O,z)=>R(F,U,P,O,z)?!0:OM(F,U,c,E,P,O,p)}else v||(E?v=(R,F,U,P)=>OM(R,F,c,E,U,P,p):v=(R,F,U)=>U);let x=!1,T=0;for(const R of this._roots){if(BA(R),x=s4(0,c,m,v,h,T),S2(),x)break;T+=R.byteLength}return zd.releasePrimitive(p),x}bvhcast(t,r,l){let{intersectsRanges:c,intersectsTriangles:p}=l;const h=this.geometry.index,m=this.geometry.attributes.position,v=t.geometry.index,E=t.geometry.attributes.position;J0.copy(r).invert();const x=zd.getPrimitive(),T=zd.getPrimitive();if(p){let F=function(U,P,O,z,L,k,H,X){for(let W=O,J=O+z;W<J;W++){kd(T,W*3,v,E),T.a.applyMatrix4(r),T.b.applyMatrix4(r),T.c.applyMatrix4(r),T.needsUpdate=!0;for(let Y=U,ce=U+P;Y<ce;Y++)if(kd(x,Y*3,h,m),x.needsUpdate=!0,p(x,T,Y,W,L,k,H,X))return!0}return!1};if(c){const U=c;c=function(P,O,z,L,k,H,X,W){return U(P,O,z,L,k,H,X,W)?!0:F(P,O,z,L,k,H,X,W)}}else c=F}t.getBoundingBox(PE),PE.applyMatrix4(r);const R=this.shapecast({intersectsBounds:F=>PE.intersectsBox(F),intersectsRange:(F,U,P,O,z,L)=>(LE.copy(L),LE.applyMatrix4(J0),t.shapecast({intersectsBounds:k=>LE.intersectsBox(k),intersectsRange:(k,H,X,W,J)=>c(F,U,k,H,O,z,W,J)}))});return zd.releasePrimitive(x),zd.releasePrimitive(T),R}intersectsBox(t,r){return wm.set(t.min,t.max,r),wm.needsUpdate=!0,this.shapecast({intersectsBounds:l=>wm.intersectsBox(l),intersectsTriangle:l=>wm.intersectsTriangle(l)})}intersectsSphere(t){return this.shapecast({intersectsBounds:r=>t.intersectsBox(r),intersectsTriangle:r=>r.intersectsSphere(t)})}closestPointToGeometry(t,r,l={},c={},p=0,h=1/0){t.boundingBox||t.computeBoundingBox(),wm.set(t.boundingBox.min,t.boundingBox.max,r),wm.needsUpdate=!0;const m=this.geometry,v=m.attributes.position,E=m.index,x=t.attributes.position,T=t.index,R=zd.getPrimitive(),F=zd.getPrimitive();let U=w2,P=l4,O=null,z=null;c&&(O=c4,z=p4);let L=1/0,k=null,H=null;return J0.copy(r).invert(),RA.matrix.copy(J0),this.shapecast({boundsTraverseOrder:X=>wm.distanceToBox(X),intersectsBounds:(X,W,J)=>J<L&&J<h?(W&&(RA.min.copy(X.min),RA.max.copy(X.max),RA.needsUpdate=!0),!0):!1,intersectsRange:(X,W)=>{if(t.boundsTree)return t.boundsTree.shapecast({boundsTraverseOrder:J=>RA.distanceToBox(J),intersectsBounds:(J,Y,ce)=>ce<L&&ce<h,intersectsRange:(J,Y)=>{for(let ce=J*3,ue=(J+Y)*3;ce<ue;ce+=3){kd(F,ce,T,x),F.a.applyMatrix4(r),F.b.applyMatrix4(r),F.c.applyMatrix4(r),F.needsUpdate=!0;for(let ge=X*3,le=(X+W)*3;ge<le;ge+=3){kd(R,ge,E,v),R.needsUpdate=!0;const Me=R.distanceToTriangle(F,U,O);if(Me<L&&(P.copy(U),z&&z.copy(O),L=Me,k=ge/3,H=ce/3),Me<p)return!0}}}});{const J=T?T.count:x.count;for(let Y=0,ce=J;Y<ce;Y+=3){kd(F,Y,T,x),F.a.applyMatrix4(r),F.b.applyMatrix4(r),F.c.applyMatrix4(r),F.needsUpdate=!0;for(let ue=X*3,ge=(X+W)*3;ue<ge;ue+=3){kd(R,ue,E,v),R.needsUpdate=!0;const le=R.distanceToTriangle(F,U,O);if(le<L&&(P.copy(U),z&&z.copy(O),L=le,k=ue/3,H=Y/3),le<p)return!0}}}}}),zd.releasePrimitive(R),zd.releasePrimitive(F),L===1/0?null:(l.point?l.point.copy(P):l.point=P.clone(),l.distance=L,l.faceIndex=k,c&&(c.point?c.point.copy(z):c.point=z.clone(),c.point.applyMatrix4(J0),P.applyMatrix4(J0),c.distance=P.sub(c.point).length(),c.faceIndex=H),l)}closestPointToPoint(t,r={},l=0,c=1/0){const p=l*l,h=c*c;let m=1/0,v=null;if(this.shapecast({boundsTraverseOrder:x=>(IA.copy(t).clamp(x.min,x.max),IA.distanceToSquared(t)),intersectsBounds:(x,T,R)=>R<m&&R<h,intersectsTriangle:(x,T)=>{x.closestPointToPoint(t,IA);const R=t.distanceToSquared(IA);return R<m&&(w2.copy(IA),m=R,v=T),R<p}}),m===1/0)return null;const E=Math.sqrt(m);return r.point?r.point.copy(w2):r.point=w2.clone(),r.distance=E,r.faceIndex=v,r}getBoundingBox(t){return t.makeEmpty(),this._roots.forEach(l=>{Dd(0,new Float32Array(l),GM),t.union(GM)}),t}}const kE=new i.Ray,UM=new i.Matrix4,u4=i.Mesh.prototype.raycast;function NM(s,t){if(this.geometry.boundsTree){if(this.material===void 0)return;UM.copy(this.matrixWorld).invert(),kE.copy(s.ray).applyMatrix4(UM);const r=this.geometry.boundsTree;if(s.firstHitOnly===!0){const l=BM(r.raycastFirst(kE,this.material),this,s);l&&t.push(l)}else{const l=r.raycast(kE,this.material);for(let c=0,p=l.length;c<p;c++){const h=BM(l[c],this,s);h&&t.push(h)}}}else u4.call(this,s,t)}function jM(s){return this.boundsTree=new Z0(this,s),this.boundsTree}function HM(){this.boundsTree=null}const WM=s=>s.isMesh;function d4(s,t){t=Zn({strategy:d2,verbose:!1,setBoundingBox:!0,maxDepth:40,maxLeafTris:10},t),d.useEffect(()=>{if(s.current){s.current.raycast=NM;const r=s.current.geometry;return r.computeBoundsTree=jM,r.disposeBoundsTree=HM,r.computeBoundsTree(t),()=>{r.boundsTree&&r.disposeBoundsTree()}}},[s,JSON.stringify(t)])}const h4=d.forwardRef((x,E)=>{var T=x,{enabled:s=!0,firstHitOnly:t=!1,children:r,strategy:l=d2,verbose:c=!1,setBoundingBox:p=!0,maxDepth:h=40,maxLeafTris:m=10}=T,v=Cn(T,["enabled","firstHitOnly","children","strategy","verbose","setBoundingBox","maxDepth","maxLeafTris"]);const R=d.useRef(null),F=(0,_.z)(U=>U.raycaster);return d.useImperativeHandle(E,()=>R.current,[]),d.useEffect(()=>{if(s){const U={strategy:l,verbose:c,setBoundingBox:p,maxDepth:h,maxLeafTris:m},P=R.current;return F.firstHitOnly=t,P.traverse(O=>{WM(O)&&!O.geometry.boundsTree&&O.raycast===i.Mesh.prototype.raycast&&(O.raycast=NM,O.geometry.computeBoundsTree=jM,O.geometry.disposeBoundsTree=HM,O.geometry.computeBoundsTree(U))}),()=>{delete F.firstHitOnly,P.traverse(O=>{WM(O)&&O.geometry.boundsTree&&(O.geometry.disposeBoundsTree(),O.raycast=i.Mesh.prototype.raycast)})}}}),d.createElement("group",(0,C.Z)({ref:R},v),r)});function f4(...s){const t=d.useRef([]);return t.current=s.map(r=>d.useContext(r)),d.useMemo(()=>({children:r})=>s.reduceRight((l,c,p)=>d.createElement(c.Provider,{value:t.current[p],children:l}),r),[])}function g4(s,t){const r=d.useRef(),[l]=d.useState(()=>t?t instanceof i.Object3D?{current:t}:t:r),[c]=d.useState(()=>new i.AnimationMixer(void 0));d.useLayoutEffect(()=>void(c._root=l.current),[c,t]);const p=d.useRef({}),[h]=d.useState(()=>{const m={};return s.forEach(v=>Object.defineProperty(m,v.name,{enumerable:!0,get(){if(l.current)return p.current[v.name]||(p.current[v.name]=c.clipAction(v,l.current))},configurable:!0})),{ref:l,clips:s,actions:m,names:s.map(v=>v.name),mixer:c}});return(0,_.A)((m,v)=>c.update(v)),d.useEffect(()=>{const m=l.current;return()=>{p.current={},Object.values(h.actions).forEach(v=>{m&&c.uncacheAction(v,m)})}},[s]),d.useEffect(()=>()=>{c.stopAllAction()},[c]),h}function VM(s){const t=d.useRef(null),r=d.useRef(!1),l=d.useRef(!1),c=d.useRef(s);return d.useLayoutEffect(()=>void(c.current=s),[s]),d.useEffect(()=>{const p=t.current;if(p){const h=(0,_.n)(()=>(r.current=!1,!0)),m=p.onBeforeRender;p.onBeforeRender=()=>r.current=!0;const v=(0,_.o)(()=>(r.current!==l.current&&(c.current==null||c.current(l.current=r.current)),!0));return()=>{p.onBeforeRender=m,h(),v()}}},[]),t}const m4=`
#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )
  vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );
  #ifdef BOX_PROJECTED_ENV_MAP
    vWorldPosition = worldPosition.xyz;
  #endif
#endif
`,A4=`
#ifdef BOX_PROJECTED_ENV_MAP
  uniform vec3 envMapSize;
  uniform vec3 envMapPosition;
  varying vec3 vWorldPosition;
    
  vec3 parallaxCorrectNormal( vec3 v, vec3 cubeSize, vec3 cubePos ) {
    vec3 nDir = normalize( v );
    vec3 rbmax = ( .5 * cubeSize + cubePos - vWorldPosition ) / nDir;
    vec3 rbmin = ( -.5 * cubeSize + cubePos - vWorldPosition ) / nDir;
    vec3 rbminmax;
    rbminmax.x = ( nDir.x > 0. ) ? rbmax.x : rbmin.x;
    rbminmax.y = ( nDir.y > 0. ) ? rbmax.y : rbmin.y;
    rbminmax.z = ( nDir.z > 0. ) ? rbmax.z : rbmin.z;
    float correction = min( min( rbminmax.x, rbminmax.y ), rbminmax.z );
    vec3 boxIntersection = vWorldPosition + nDir * correction;    
    return boxIntersection - cubePos;
  }
#endif
`,y4=`
#ifdef BOX_PROJECTED_ENV_MAP
  worldNormal = parallaxCorrectNormal( worldNormal, envMapSize, envMapPosition );
#endif
`,v4=`
#ifdef BOX_PROJECTED_ENV_MAP
  reflectVec = parallaxCorrectNormal( reflectVec, envMapSize, envMapPosition );
#endif
`;function _4(s,t,r){s.defines.BOX_PROJECTED_ENV_MAP=!0,s.uniforms.envMapPosition={value:t},s.uniforms.envMapSize={value:r},s.vertexShader=`
  varying vec3 vWorldPosition;
  ${s.vertexShader.replace("#include <worldpos_vertex>",m4)}`,s.fragmentShader=`
    ${A4}
    ${s.fragmentShader.replace("#include <envmap_physical_pars_fragment>",i.ShaderChunk.envmap_physical_pars_fragment).replace("vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );",`vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
         ${y4}
         `).replace("reflectVec = inverseTransformDirection( reflectVec, viewMatrix );",`reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
         ${v4}
        `)}`}function E4(s=new i.Vector3,t=new i.Vector3){const[r]=d.useState(()=>({position:new i.Vector3,size:new i.Vector3}));(0,_.j)(r,{position:s,size:t});const l=d.useRef(null),c=d.useMemo(()=>({ref:l,onBeforeCompile:p=>_4(p,r.position,r.size),customProgramCacheKey:()=>JSON.stringify(r.position.toArray())+JSON.stringify(r.size.toArray())}),[...r.position.toArray(),...r.size.toArray()]);return d.useLayoutEffect(()=>void(l.current.needsUpdate=!0),[r]),c}const QM=new i.Box3,T2=new i.Vector3,b4=r=>{var l=r,{anchor:s}=l,t=Cn(l,["anchor"]);const c=d.useRef(null),p=d.useRef(null);return d.useEffect(()=>{var h,m;(h=c.current)!=null&&(m=h.parent)!=null&&m.parent&&(p.current=c.current.parent,c.current.parent.parent.add(c.current))},[]),(0,_.A)(()=>{p.current&&(QM.setFromObject(p.current),QM.getSize(T2),c.current.position.set(p.current.position.x+T2.x*s[0]/2,p.current.position.y+T2.y*s[1]/2,p.current.position.z+T2.z*s[2]/2))}),d.createElement("group",(0,C.Z)({ref:c},t))};function M4(s,t,r=.9){return t*r+s*(1-r)}const x4=s=>Math.sqrt(1-Math.pow(s-1,2));class C4{constructor({size:t=256,maxAge:r=750,radius:l=.3,intensity:c=.2,interpolate:p=0,smoothing:h=0,minForce:m=.3,blend:v="screen",ease:E=x4}={}){this.size=t,this.maxAge=r,this.radius=l,this.intensity=c,this.ease=E,this.interpolate=p,this.smoothing=h,this.minForce=m,this.blend=v,this.trail=[],this.force=0,this.initTexture()}initTexture(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=this.size,this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.texture=new i.Texture(this.canvas),this.canvas.id="touchTexture",this.canvas.style.width=this.canvas.style.height=`${this.canvas.width}px`}update(t){this.clear(),this.trail.forEach((r,l)=>{r.age+=t*1e3,r.age>this.maxAge&&this.trail.splice(l,1)}),this.trail.length||(this.force=0),this.trail.forEach(r=>{this.drawTouch(r)}),this.texture.needsUpdate=!0}clear(){this.ctx.globalCompositeOperation="source-over",this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}addTouch(t){const r=this.trail[this.trail.length-1];if(r){const l=r.x-t.x,c=r.y-t.y,p=l*l+c*c,h=Math.max(this.minForce,Math.min(p*1e4,1));if(this.force=M4(h,this.force,this.smoothing),this.interpolate){const m=Math.ceil(p/Math.pow(this.radius*.5/this.interpolate,2));if(m>1)for(let v=1;v<m;v++)this.trail.push({x:r.x-l/m*v,y:r.y-c/m*v,age:0,force:h})}}this.trail.push({x:t.x,y:t.y,age:0,force:this.force})}drawTouch(t){const r={x:t.x*this.size,y:(1-t.y)*this.size};let l=1;t.age<this.maxAge*.3?l=this.ease(t.age/(this.maxAge*.3)):l=this.ease(1-(t.age-this.maxAge*.3)/(this.maxAge*.7)),l*=t.force,this.ctx.globalCompositeOperation=this.blend;const c=this.size*this.radius*l,p=this.ctx.createRadialGradient(r.x,r.y,Math.max(0,c*.25),r.x,r.y,Math.max(0,c));p.addColorStop(0,`rgba(255, 255, 255, ${this.intensity})`),p.addColorStop(1,"rgba(0, 0, 0, 0.0)"),this.ctx.beginPath(),this.ctx.fillStyle=p,this.ctx.arc(r.x,r.y,Math.max(0,c),0,Math.PI*2),this.ctx.fill()}}function S4(s={}){const{size:t,maxAge:r,radius:l,intensity:c,interpolate:p,smoothing:h,minForce:m,blend:v,ease:E}=s,x=(0,d.useMemo)(()=>new C4(s),[t,r,l,c,p,h,m,v,E]);(0,_.A)((R,F)=>void x.update(F));const T=(0,d.useCallback)(R=>x.addTouch(R.uv),[x]);return[x.texture,T]}const zE=d.forwardRef(function(z,O){var L=z,{children:t,disable:r,disableX:l,disableY:c,disableZ:p,left:h,right:m,top:v,bottom:E,front:x,back:T,onCentered:R,precise:F=!0,cacheKey:U=0}=L,P=Cn(L,["children","disable","disableX","disableY","disableZ","left","right","top","bottom","front","back","onCentered","precise","cacheKey"]);const k=d.useRef(null),H=d.useRef(null),X=d.useRef(null);return d.useLayoutEffect(()=>{H.current.matrixWorld.identity();const W=new i.Box3().setFromObject(X.current,F),J=new i.Vector3,Y=new i.Sphere,ce=W.max.x-W.min.x,ue=W.max.y-W.min.y,ge=W.max.z-W.min.z;W.getCenter(J),W.getBoundingSphere(Y);const le=v?ue/2:E?-ue/2:0,Me=h?-ce/2:m?ce/2:0,me=x?ge/2:T?-ge/2:0;H.current.position.set(r||l?0:-J.x+Me,r||c?0:-J.y+le,r||p?0:-J.z+me),typeof R!="undefined"&&R({parent:k.current.parent,container:k.current,width:ce,height:ue,depth:ge,boundingBox:W,boundingSphere:Y,center:J,verticalAlignment:le,horizontalAlignment:Me,depthAlignment:me})},[U,R,v,h,x,r,l,c,p,F,m,E,T]),d.useImperativeHandle(O,()=>k.current,[]),d.createElement("group",(0,C.Z)({ref:k},P),d.createElement("group",{ref:H},d.createElement("group",{ref:X},t)))}),w4=d.forwardRef((m,h)=>{var v=m,{font:s,color:t="#cbcbcb",bevelSize:r=.04,debug:l=!1,children:c}=v,p=Cn(v,["font","color","bevelSize","debug","children"]);const[E,x]=d.useState(0),T=d.useCallback((U=1)=>x(E+U),[E]),R=d.useCallback((U=1)=>x(E-U),[E]),F=d.useMemo(()=>({incr:T,decr:R}),[T,R]);return d.useImperativeHandle(h,()=>F,[F]),d.createElement("group",p,d.createElement(d.Suspense,{fallback:null},d.createElement(zE,{top:!0,cacheKey:JSON.stringify({counter:E,font:s})},d.createElement(A0,{bevelEnabled:!0,bevelSize:r,font:s},l?d.createElement("meshNormalMaterial",{wireframe:!0}):d.createElement("meshStandardMaterial",{color:t}),E))),c)}),T4=(X,H)=>{var W=X,{startFrame:s,endFrame:t,fps:r,frameName:l,textureDataURL:c,textureImageURL:p,loop:h,numberOfFrames:m,autoPlay:v,animationNames:E,onStart:x,onEnd:T,onLoopEnd:R,onFrame:F,play:U,pause:P,flipX:O,alphaTest:z,children:L}=W,k=Cn(W,["startFrame","endFrame","fps","frameName","textureDataURL","textureImageURL","loop","numberOfFrames","autoPlay","animationNames","onStart","onEnd","onLoopEnd","onFrame","play","pause","flipX","alphaTest","children"]);(0,_.z)(ht=>ht.viewport);const J=d.useRef(null),[Y,ce]=d.useState(!1),ue=d.useRef(),ge=d.useRef(),le=d.useRef(window.performance.now()),Me=d.useRef(),me=d.useRef(s||0),Te=d.useRef(l||""),Ue=1e3/(r||30),[Re,Ge]=d.useState(new i.Texture),De=d.useRef(0),[Xe,Ce]=d.useState([1,1,1]),Ee=O?-1:1;function _e(ht,dt,$e){const Kt=new i.TextureLoader,zt=fetch(ht).then(Qe=>Qe.json()),Bt=new Promise(Qe=>{Kt.load(dt,Qe)});Promise.all([zt,Bt]).then(Qe=>{$e(Qe[0],Qe[1])})}const oe=(ht,dt)=>{const $e=dt/ht;return ge.current.scale.set(1,$e,1),[1,$e,1]};d.useEffect(()=>{if(c&&p)_e(c,p,Ae);else if(p){const ht=new i.TextureLoader;new Promise(dt=>{ht.load(p,dt)}).then(dt=>{Ae(null,dt)})}},[]),d.useLayoutEffect(()=>{ve()},[Re,O]),d.useEffect(()=>{},[P]),d.useEffect(()=>{Te.current!==l&&l&&(me.current=0,Te.current=l)},[l]);const Ae=(ht,dt)=>{if(ht===null){if(dt&&m){const $e=dt.image.width,Kt=dt.image.height,zt=$e/m,Bt=Kt;if(Me.current=dt,De.current=m,J.current={frames:[],meta:{version:"1.0",size:{w:$e,h:Kt},scale:"1"}},parseInt(zt.toString(),10)===zt)for(let Qe=0;Qe<m;Qe++)J.current.frames.push({frame:{x:Qe*zt,y:0,w:zt,h:Bt},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:zt,h:Bt},sourceSize:{w:zt,h:Kt}})}}else if(dt){J.current=ht,J.current.frames=Array.isArray(ht.frames)?ht.frames:Be(),De.current=Array.isArray(ht.frames)?ht.frames.length:Object.keys(ht.frames).length,Me.current=dt;const{w:$e,h:Kt}=vt(ht.frames).sourceSize,zt=oe($e,Kt);Ce(zt),ue.current&&(ue.current.map=dt)}dt.premultiplyAlpha=!1,Ge(dt)},Be=()=>{const ht={},dt=J.current,$e=E;if($e)for(let Kt=0;Kt<$e.length;Kt++){ht[$e[Kt]]=[];for(let zt in dt.frames){const Bt=dt.frames[zt],Qe=Bt.frame,ze=Qe.x,Ft=Qe.y,bn=Qe.w,Fn=Qe.h,Gt=Bt.sourceSize.w,Yn=Bt.sourceSize.h;typeof zt=="string"&&zt.toLowerCase().indexOf($e[Kt].toLowerCase())!==-1&&ht[$e[Kt]].push({x:ze,y:Ft,w:bn,h:Fn,frame:Qe,sourceSize:{w:Gt,h:Yn}})}}return ht},ve=()=>{if(!J.current)return;const{meta:{size:ht},frames:dt}=J.current,{w:$e,h:Kt}=Array.isArray(dt)?dt[0].sourceSize:l?dt[l]?dt[l][0].sourceSize:{w:0,h:0}:{w:0,h:0};ue.current.map.wrapS=ue.current.map.wrapT=i.RepeatWrapping,ue.current.map.center.set(0,0),ue.current.map.repeat.set(1*Ee/(ht.w/$e),1/(ht.h/Kt));const Bt=1/((ht.h-1)/Kt);ue.current.map.offset.x=0,ue.current.map.offset.y=1-Bt,ce(!0),x&&x({currentFrameName:l,currentFrame:me.current})},ke=()=>{const ht=window.performance.now(),dt=ht-le.current,{meta:{size:$e},frames:Kt}=J.current,{w:zt,h:Bt}=vt(Kt).sourceSize,Qe=Array.isArray(Kt)?Kt:l?Kt[l]:[];let ze=0,Ft=0;const bn=t||Qe.length-1;if(me.current>bn&&(me.current=h&&s!=null?s:0,h?R==null||R({currentFrameName:l,currentFrame:me.current}):T==null||T({currentFrameName:l,currentFrame:me.current}),!h)||dt<=Ue)return;le.current=ht-dt%Ue,oe(zt,Bt);const Fn=($e.w-1)/zt,Gt=($e.h-1)/Bt,{frame:{x:Yn,y:hr},sourceSize:{w:Fr,h:Er}}=Qe[me.current],Ii=1/Fn,xi=1/Gt;ze=Ee>0?Ii*(Yn/Fr):Ii*(Yn/Fr)-ue.current.map.repeat.x,Ft=Math.abs(1-xi)-xi*(hr/Er),ue.current.map.offset.x=ze,ue.current.map.offset.y=Ft,me.current+=1};(0,_.A)((ht,dt)=>{var $e,Kt;!(($e=J.current)!=null&&$e.frames)||!((Kt=ue.current)!=null&&Kt.map)||P||(v||U)&&(ke(),F&&F({currentFrameName:Te.current,currentFrame:me.current}))});const vt=ht=>{if(Array.isArray(ht))return ht[0];if(typeof ht=="object"&&ht!==null){const dt=Object.keys(ht);return ht[dt[0]][0]}else return{w:0,h:0}};return d.createElement("group",k,d.createElement(d.Suspense,{fallback:null},d.createElement("sprite",{ref:ge,scale:Xe},d.createElement("spriteMaterial",{toneMapped:!1,ref:ue,map:Re,transparent:!0,alphaTest:z!=null?z:0}))),L)};var B4=Object.defineProperty,R4=(s,t,r)=>t in s?B4(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,Tm=(s,t,r)=>(R4(s,typeof t!="symbol"?t+"":t,r),r);const q0=4,$0=1024,Gd=4,I4=(s=1)=>{const t=new Float32Array($0*Gd*s*q0),r=new i.DataTexture(t,$0,Gd*s,i.RGBAFormat,i.FloatType);return r.wrapS=i.RepeatWrapping,r.wrapT=i.RepeatWrapping,r.magFilter=i.NearestFilter,r.needsUpdate=!0,r},F4=(s,t,r=0)=>{const l=Math.floor($0*(Gd/4));t.arcLengthDivisions=l/2,t.updateArcLengths();const c=t.getSpacedPoints(l),p=t.computeFrenetFrames(l,!0);for(let h=0;h<l;h++){const m=Math.floor(h/$0),v=h%$0;let E=c[h];B2(s,v,E.x,E.y,E.z,0+m+Gd*r),E=p.tangents[h],B2(s,v,E.x,E.y,E.z,1+m+Gd*r),E=p.normals[h],B2(s,v,E.x,E.y,E.z,2+m+Gd*r),E=p.binormals[h],B2(s,v,E.x,E.y,E.z,3+m+Gd*r)}s.needsUpdate=!0},B2=(s,t,r,l,c,p)=>{const h=s.image,{data:m}=h,v=q0*$0*p;m[t*q0+v+0]=r,m[t*q0+v+1]=l,m[t*q0+v+2]=c,m[t*q0+v+3]=1},O4=s=>({spineTexture:{value:s},pathOffset:{type:"f",value:0},pathSegment:{type:"f",value:1},spineOffset:{type:"f",value:161},spineLength:{type:"f",value:400},flow:{type:"i",value:1}});function D4(s,t,r=1){s.__ok||(s.__ok=!0,s.onBeforeCompile=l=>{if(l.__modified)return;l.__modified=!0,Object.assign(l.uniforms,t);const c=`
		uniform sampler2D spineTexture;
		uniform float pathOffset;
		uniform float pathSegment;
		uniform float spineOffset;
		uniform float spineLength;
		uniform int flow;

		float textureLayers = ${Gd*r}.;
		float textureStacks = ${Gd/4}.;

		${l.vertexShader}
		`.replace("#include <beginnormal_vertex>","").replace("#include <defaultnormal_vertex>","").replace("#include <begin_vertex>","").replace(/void\s*main\s*\(\)\s*\{/,`
        void main() {
        #include <beginnormal_vertex>

        vec4 worldPos = modelMatrix * vec4(position, 1.);

        bool bend = flow > 0;
        float xWeight = bend ? 0. : 1.;

        #ifdef USE_INSTANCING
        float pathOffsetFromInstanceMatrix = instanceMatrix[3][2];
        float spineLengthFromInstanceMatrix = instanceMatrix[3][0];
        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLengthFromInstanceMatrix : 0.;
        float mt = (spinePortion * pathSegment + pathOffset + pathOffsetFromInstanceMatrix)*textureStacks;
        #else
        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLength : 0.;
        float mt = (spinePortion * pathSegment + pathOffset)*textureStacks;
        #endif

        mt = mod(mt, textureStacks);
        float rowOffset = floor(mt);

        #ifdef USE_INSTANCING
        rowOffset += instanceMatrix[3][1] * ${Gd}.;
        #endif

        vec3 spinePos = texture2D(spineTexture, vec2(mt, (0. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 a =        texture2D(spineTexture, vec2(mt, (1. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 b =        texture2D(spineTexture, vec2(mt, (2. + rowOffset + 0.5) / textureLayers)).xyz;
        vec3 c =        texture2D(spineTexture, vec2(mt, (3. + rowOffset + 0.5) / textureLayers)).xyz;
        mat3 basis = mat3(a, b, c);

        vec3 transformed = basis
          * vec3(worldPos.x * xWeight, worldPos.y * 1., worldPos.z * 1.)
          + spinePos;

        vec3 transformedNormal = normalMatrix * (basis * objectNormal);
			`).replace("#include <project_vertex>",`vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );
				gl_Position = projectionMatrix * mvPosition;`);l.vertexShader=c})}class L4{constructor(t,r=1){Tm(this,"curveArray"),Tm(this,"curveLengthArray"),Tm(this,"object3D"),Tm(this,"splineTexure"),Tm(this,"uniforms");const l=t.clone(),c=I4(r),p=O4(c);l.traverse(h=>{(h instanceof i.Mesh||h instanceof i.InstancedMesh)&&(h.material=h.material.clone(),D4(h.material,p,r))}),this.curveArray=new Array(r),this.curveLengthArray=new Array(r),this.object3D=l,this.splineTexure=c,this.uniforms=p}updateCurve(t,r){if(t>=this.curveArray.length)throw Error("Index out of range for Flow");const l=r.getLength();this.uniforms.spineLength.value=l,this.curveLengthArray[t]=l,this.curveArray[t]=r,F4(this.splineTexure,r,t)}moveAlongCurve(t){this.uniforms.pathOffset.value+=t}}const KM=new i.Matrix4;class _O extends null{constructor(t,r,l,c){const p=new InstancedMesh(l,c,t);p.instanceMatrix.setUsage(DynamicDrawUsage),p.frustumCulled=!1,super(p,r),Tm(this,"offsets"),Tm(this,"whichCurve"),this.offsets=new Array(t).fill(0),this.whichCurve=new Array(t).fill(0)}writeChanges(t){KM.makeTranslation(this.curveLengthArray[this.whichCurve[t]],this.whichCurve[t],this.offsets[t]),this.object3D.setMatrixAt(t,KM),this.object3D.instanceMatrix.needsUpdate=!0}moveIndividualAlongCurve(t,r){this.offsets[t]+=r,this.writeChanges(t)}setCurve(t,r){if(isNaN(r))throw Error("curve index being set is Not a Number (NaN)");this.whichCurve[t]=r,this.writeChanges(t)}}const P4=d.forwardRef(({children:s,curve:t},r)=>{const[l]=d.useState(()=>new i.Scene),[c,p]=d.useState(),h=d.useRef();return d.useEffect(()=>{h.current=new L4(l.children[0]),p(h.current.object3D)},[s]),d.useEffect(()=>{var m;t&&((m=h.current)==null||m.updateCurve(0,t))},[t]),d.useImperativeHandle(r,()=>({moveAlongCurve:m=>{var v;(v=h.current)==null||v.moveAlongCurve(m)}})),d.createElement(d.Fragment,null,(0,_.g)(s,l),c&&d.createElement("primitive",{object:c}))});var k4=`#define GLSLIFY 1
vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}`;class z4 extends i.MeshPhysicalMaterial{constructor(t={}){super(t),this.setValues(t),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(t){t.uniforms.time=this._time,t.uniforms.radius=this._radius,t.uniforms.distort=this._distort,t.vertexShader=`
      uniform float time;
      uniform float radius;
      uniform float distort;
      ${k4}
      ${t.vertexShader}
    `,t.vertexShader=t.vertexShader.replace("#include <begin_vertex>",`
        float updateTime = time / 50.0;
        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));
        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));
        `)}get time(){return this._time.value}set time(t){this._time.value=t}get distort(){return this._distort.value}set distort(t){this._distort.value=t}get radius(){return this._radius.value}set radius(t){this._radius.value=t}}const G4=d.forwardRef((l,r)=>{var c=l,{speed:s=1}=c,t=Cn(c,["speed"]);const[p]=d.useState(()=>new z4);return(0,_.A)(h=>p&&(p.time=h.clock.getElapsedTime()*s)),d.createElement("primitive",(0,C.Z)({object:p,ref:r,attach:"material"},t))});class U4 extends i.MeshStandardMaterial{constructor(t={}){super(t),this.setValues(t),this._time={value:0},this._factor={value:1}}onBeforeCompile(t){t.uniforms.time=this._time,t.uniforms.factor=this._factor,t.vertexShader=`
      uniform float time;
      uniform float factor;
      ${t.vertexShader}
    `,t.vertexShader=t.vertexShader.replace("#include <begin_vertex>",`float theta = sin( time + position.y ) / 2.0 * factor;
        float c = cos( theta );
        float s = sin( theta );
        mat3 m = mat3( c, 0, s, 0, 1, 0, -s, 0, c );
        vec3 transformed = vec3( position ) * m;
        vNormal = vNormal * m;`)}get time(){return this._time.value}set time(t){this._time.value=t}get factor(){return this._factor.value}set factor(t){this._factor.value=t}}const N4=d.forwardRef((l,r)=>{var c=l,{speed:s=1}=c,t=Cn(c,["speed"]);const[p]=d.useState(()=>new U4);return(0,_.A)(h=>p&&(p.time=h.clock.getElapsedTime()*s)),d.createElement("primitive",(0,C.Z)({object:p,ref:r,attach:"material"},t))});class j4 extends i.ShaderMaterial{constructor(t=new i.Vector2){super({uniforms:{inputBuffer:new i.Uniform(null),depthBuffer:new i.Uniform(null),resolution:new i.Uniform(new i.Vector2),texelSize:new i.Uniform(new i.Vector2),halfTexelSize:new i.Uniform(new i.Vector2),kernel:new i.Uniform(0),scale:new i.Uniform(1),cameraNear:new i.Uniform(0),cameraFar:new i.Uniform(1),minDepthThreshold:new i.Uniform(0),maxDepthThreshold:new i.Uniform(1),depthScale:new i.Uniform(0),depthToBlurRatioBias:new i.Uniform(.25)},fragmentShader:`#include <common>
        #include <dithering_pars_fragment>      
        uniform sampler2D inputBuffer;
        uniform sampler2D depthBuffer;
        uniform float cameraNear;
        uniform float cameraFar;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          float depthFactor = 0.0;
          
          #ifdef USE_DEPTH
            vec4 depth = texture2D(depthBuffer, vUv);
            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
            depthFactor *= depthScale;
            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));
          #endif
          
          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));
          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));
          gl_FragColor = sum * 0.25 ;

          #include <dithering_fragment>
          #include <tonemapping_fragment>
          #include <encodings_fragment>
        }`,vertexShader:`uniform vec2 texelSize;
        uniform vec2 halfTexelSize;
        uniform float kernel;
        uniform float scale;
        varying vec2 vUv;
        varying vec2 vUv0;
        varying vec2 vUv1;
        varying vec2 vUv2;
        varying vec2 vUv3;

        void main() {
          vec2 uv = position.xy * 0.5 + 0.5;
          vUv = uv;

          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;
          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);
          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);
          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);
          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);

          gl_Position = vec4(position.xy, 1.0, 1.0);
        }`,blending:i.NoBlending,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(t.x,t.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(t,r){this.uniforms.texelSize.value.set(t,r),this.uniforms.halfTexelSize.value.set(t,r).multiplyScalar(.5)}setResolution(t){this.uniforms.resolution.value.copy(t)}}class XM{constructor({gl:t,resolution:r,width:l=500,height:c=500,minDepthThreshold:p=0,maxDepthThreshold:h=1,depthScale:m=0,depthToBlurRatioBias:v=.25}){this.renderToScreen=!1,this.renderTargetA=new i.WebGLRenderTarget(r,r,{minFilter:i.LinearFilter,magFilter:i.LinearFilter,stencilBuffer:!1,depthBuffer:!1,type:i.HalfFloatType}),this.renderTargetB=this.renderTargetA.clone(),this.convolutionMaterial=new j4,this.convolutionMaterial.setTexelSize(1/l,1/c),this.convolutionMaterial.setResolution(new i.Vector2(l,c)),this.scene=new i.Scene,this.camera=new i.Camera,this.convolutionMaterial.uniforms.minDepthThreshold.value=p,this.convolutionMaterial.uniforms.maxDepthThreshold.value=h,this.convolutionMaterial.uniforms.depthScale.value=m,this.convolutionMaterial.uniforms.depthToBlurRatioBias.value=v,this.convolutionMaterial.defines.USE_DEPTH=m>0;const E=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),x=new Float32Array([0,0,2,0,0,2]),T=new i.BufferGeometry;T.setAttribute("position",new i.BufferAttribute(E,3)),T.setAttribute("uv",new i.BufferAttribute(x,2)),this.screen=new i.Mesh(T,this.convolutionMaterial),this.screen.frustumCulled=!1,this.scene.add(this.screen)}render(t,r,l){const c=this.scene,p=this.camera,h=this.renderTargetA,m=this.renderTargetB;let v=this.convolutionMaterial,E=v.uniforms;E.depthBuffer.value=r.depthTexture;const x=v.kernel;let T=r,R,F,U;for(F=0,U=x.length-1;F<U;++F)R=F&1?m:h,E.kernel.value=x[F],E.inputBuffer.value=T.texture,t.setRenderTarget(R),t.render(c,p),T=R;E.kernel.value=x[F],E.inputBuffer.value=T.texture,t.setRenderTarget(this.renderToScreen?null:l),t.render(c,p)}}class YM extends i.MeshStandardMaterial{constructor(t={}){super(t),this._tDepth={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this._hasBlur={value:!1},this._mirror={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this._minDepthThreshold={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this._mixContrast={value:1},this.setValues(t)}onBeforeCompile(t){var r;(r=t.defines)!=null&&r.USE_UV||(t.defines.USE_UV=""),t.uniforms.hasBlur=this._hasBlur,t.uniforms.tDiffuse=this._tDiffuse,t.uniforms.tDepth=this._tDepth,t.uniforms.distortionMap=this._distortionMap,t.uniforms.tDiffuseBlur=this._tDiffuseBlur,t.uniforms.textureMatrix=this._textureMatrix,t.uniforms.mirror=this._mirror,t.uniforms.mixBlur=this._mixBlur,t.uniforms.mixStrength=this._blurStrength,t.uniforms.minDepthThreshold=this._minDepthThreshold,t.uniforms.maxDepthThreshold=this._maxDepthThreshold,t.uniforms.depthScale=this._depthScale,t.uniforms.depthToBlurRatioBias=this._depthToBlurRatioBias,t.uniforms.distortion=this._distortion,t.uniforms.mixContrast=this._mixContrast,t.vertexShader=`
        uniform mat4 textureMatrix;
        varying vec4 my_vUv;
      ${t.vertexShader}`,t.vertexShader=t.vertexShader.replace("#include <project_vertex>",`#include <project_vertex>
        my_vUv = textureMatrix * vec4( position, 1.0 );
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );`),t.fragmentShader=`
        uniform sampler2D tDiffuse;
        uniform sampler2D tDiffuseBlur;
        uniform sampler2D tDepth;
        uniform sampler2D distortionMap;
        uniform float distortion;
        uniform float cameraNear;
			  uniform float cameraFar;
        uniform bool hasBlur;
        uniform float mixBlur;
        uniform float mirror;
        uniform float mixStrength;
        uniform float minDepthThreshold;
        uniform float maxDepthThreshold;
        uniform float mixContrast;
        uniform float depthScale;
        uniform float depthToBlurRatioBias;
        varying vec4 my_vUv;
        ${t.fragmentShader}`,t.fragmentShader=t.fragmentShader.replace("#include <emissivemap_fragment>",`#include <emissivemap_fragment>

      float distortionFactor = 0.0;
      #ifdef USE_DISTORTION
        distortionFactor = texture2D(distortionMap, vUv).r * distortion;
      #endif

      vec4 new_vUv = my_vUv;
      new_vUv.x += distortionFactor;
      new_vUv.y += distortionFactor;

      vec4 base = texture2DProj(tDiffuse, new_vUv);
      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);

      vec4 merge = base;

      #ifdef USE_NORMALMAP
        vec2 normal_uv = vec2(0.0);
        vec4 normalColor = texture2D(normalMap, vUv * normalScale);
        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );
        vec3 coord = new_vUv.xyz / new_vUv.w;
        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;
        vec4 base_normal = texture2D(tDiffuse, normal_uv);
        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);
        merge = base_normal;
        blur = blur_normal;
      #endif

      float depthFactor = 0.0001;
      float blurFactor = 0.0;

      #ifdef USE_DEPTH
        vec4 depth = texture2DProj(tDepth, new_vUv);
        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));
        depthFactor *= depthScale;
        depthFactor = max(0.0001, min(1.0, depthFactor));

        #ifdef USE_BLUR
          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);
          merge = merge * min(1.0, depthFactor + 0.5);
        #else
          merge = merge * depthFactor;
        #endif

      #endif

      float reflectorRoughnessFactor = roughness;
      #ifdef USE_ROUGHNESSMAP
        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );
        reflectorRoughnessFactor *= reflectorTexelRoughness.g;
      #endif

      #ifdef USE_BLUR
        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);
        merge = mix(merge, blur, blurFactor);
      #endif

      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);
      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;
      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;
      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;

      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);
      `)}get tDiffuse(){return this._tDiffuse.value}set tDiffuse(t){this._tDiffuse.value=t}get tDepth(){return this._tDepth.value}set tDepth(t){this._tDepth.value=t}get distortionMap(){return this._distortionMap.value}set distortionMap(t){this._distortionMap.value=t}get tDiffuseBlur(){return this._tDiffuseBlur.value}set tDiffuseBlur(t){this._tDiffuseBlur.value=t}get textureMatrix(){return this._textureMatrix.value}set textureMatrix(t){this._textureMatrix.value=t}get hasBlur(){return this._hasBlur.value}set hasBlur(t){this._hasBlur.value=t}get mirror(){return this._mirror.value}set mirror(t){this._mirror.value=t}get mixBlur(){return this._mixBlur.value}set mixBlur(t){this._mixBlur.value=t}get mixStrength(){return this._blurStrength.value}set mixStrength(t){this._blurStrength.value=t}get minDepthThreshold(){return this._minDepthThreshold.value}set minDepthThreshold(t){this._minDepthThreshold.value=t}get maxDepthThreshold(){return this._maxDepthThreshold.value}set maxDepthThreshold(t){this._maxDepthThreshold.value=t}get depthScale(){return this._depthScale.value}set depthScale(t){this._depthScale.value=t}get depthToBlurRatioBias(){return this._depthToBlurRatioBias.value}set depthToBlurRatioBias(t){this._depthToBlurRatioBias.value=t}get distortion(){return this._distortion.value}set distortion(t){this._distortion.value=t}get mixContrast(){return this._mixContrast.value}set mixContrast(t){this._mixContrast.value=t}}(0,_.e)({MeshReflectorMaterialImpl:YM});const H4=d.forwardRef((P,U)=>{var O=P,{mixBlur:s=0,mixStrength:t=1,resolution:r=256,blur:l=[0,0],minDepthThreshold:c=.9,maxDepthThreshold:p=1,depthScale:h=0,depthToBlurRatioBias:m=.25,mirror:v=0,distortion:E=1,mixContrast:x=1,distortionMap:T,reflectorOffset:R=0}=O,F=Cn(O,["mixBlur","mixStrength","resolution","blur","minDepthThreshold","maxDepthThreshold","depthScale","depthToBlurRatioBias","mirror","distortion","mixContrast","distortionMap","reflectorOffset"]);const z=(0,_.z)(({gl:_e})=>_e),L=(0,_.z)(({camera:_e})=>_e),k=(0,_.z)(({scene:_e})=>_e);l=Array.isArray(l)?l:[l,l];const H=l[0]+l[1]>0,X=d.useRef(null),[W]=d.useState(()=>new i.Plane),[J]=d.useState(()=>new i.Vector3),[Y]=d.useState(()=>new i.Vector3),[ce]=d.useState(()=>new i.Vector3),[ue]=d.useState(()=>new i.Matrix4),[ge]=d.useState(()=>new i.Vector3(0,0,-1)),[le]=d.useState(()=>new i.Vector4),[Me]=d.useState(()=>new i.Vector3),[me]=d.useState(()=>new i.Vector3),[Te]=d.useState(()=>new i.Vector4),[Ue]=d.useState(()=>new i.Matrix4),[Re]=d.useState(()=>new i.PerspectiveCamera),Ge=d.useCallback(()=>{var _e;const oe=X.current.parent||((_e=X.current)==null?void 0:_e.__r3f.parent);if(!oe||(Y.setFromMatrixPosition(oe.matrixWorld),ce.setFromMatrixPosition(L.matrixWorld),ue.extractRotation(oe.matrixWorld),J.set(0,0,1),J.applyMatrix4(ue),Y.addScaledVector(J,R),Me.subVectors(Y,ce),Me.dot(J)>0))return;Me.reflect(J).negate(),Me.add(Y),ue.extractRotation(L.matrixWorld),ge.set(0,0,-1),ge.applyMatrix4(ue),ge.add(ce),me.subVectors(Y,ge),me.reflect(J).negate(),me.add(Y),Re.position.copy(Me),Re.up.set(0,1,0),Re.up.applyMatrix4(ue),Re.up.reflect(J),Re.lookAt(me),Re.far=L.far,Re.updateMatrixWorld(),Re.projectionMatrix.copy(L.projectionMatrix),Ue.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),Ue.multiply(Re.projectionMatrix),Ue.multiply(Re.matrixWorldInverse),Ue.multiply(oe.matrixWorld),W.setFromNormalAndCoplanarPoint(J,Y),W.applyMatrix4(Re.matrixWorldInverse),le.set(W.normal.x,W.normal.y,W.normal.z,W.constant);const Ae=Re.projectionMatrix;Te.x=(Math.sign(le.x)+Ae.elements[8])/Ae.elements[0],Te.y=(Math.sign(le.y)+Ae.elements[9])/Ae.elements[5],Te.z=-1,Te.w=(1+Ae.elements[10])/Ae.elements[14],le.multiplyScalar(2/le.dot(Te)),Ae.elements[2]=le.x,Ae.elements[6]=le.y,Ae.elements[10]=le.z+1,Ae.elements[14]=le.w},[L,R]),[De,Xe,Ce,Ee]=d.useMemo(()=>{const _e={minFilter:i.LinearFilter,magFilter:i.LinearFilter,type:i.HalfFloatType},oe=new i.WebGLRenderTarget(r,r,_e);oe.depthBuffer=!0,oe.depthTexture=new i.DepthTexture(r,r),oe.depthTexture.format=i.DepthFormat,oe.depthTexture.type=i.UnsignedShortType;const Ae=new i.WebGLRenderTarget(r,r,_e),Be=new XM({gl:z,resolution:r,width:l[0],height:l[1],minDepthThreshold:c,maxDepthThreshold:p,depthScale:h,depthToBlurRatioBias:m}),ve={mirror:v,textureMatrix:Ue,mixBlur:s,tDiffuse:oe.texture,tDepth:oe.depthTexture,tDiffuseBlur:Ae.texture,hasBlur:H,mixStrength:t,minDepthThreshold:c,maxDepthThreshold:p,depthScale:h,depthToBlurRatioBias:m,distortion:E,distortionMap:T,mixContrast:x,"defines-USE_BLUR":H?"":void 0,"defines-USE_DEPTH":h>0?"":void 0,"defines-USE_DISTORTION":T?"":void 0};return[oe,Ae,Be,ve]},[z,l,Ue,r,v,H,s,t,c,p,h,m,E,T,x]);return(0,_.A)(()=>{var _e;const oe=X.current.parent||((_e=X.current)==null?void 0:_e.__r3f.parent);if(!oe)return;oe.visible=!1;const Ae=z.xr.enabled,Be=z.shadowMap.autoUpdate;Ge(),z.xr.enabled=!1,z.shadowMap.autoUpdate=!1,z.setRenderTarget(De),z.state.buffers.depth.setMask(!0),z.autoClear||z.clear(),z.render(k,Re),H&&Ce.render(z,De,Xe),z.xr.enabled=Ae,z.shadowMap.autoUpdate=Be,oe.visible=!0,z.setRenderTarget(null)}),d.createElement("meshReflectorMaterialImpl",(0,C.Z)({attach:"material",key:"key"+Ee["defines-USE_BLUR"]+Ee["defines-USE_DEPTH"]+Ee["defines-USE_DISTORTION"],ref:mt([X,U])},Ee,F))});function W4(s){switch(s){case 1:return"R";case 2:return"RG";case 3:return"RGBA";case 4:return"RGBA"}throw new Error}function V4(s){switch(s){case 1:return i.RedFormat;case 2:return i.RGFormat;case 3:return i.RGBAFormat;case 4:return i.RGBAFormat}}function JM(s){switch(s){case 1:return i.RedIntegerFormat;case 2:return i.RGIntegerFormat;case 3:return i.RGBAIntegerFormat;case 4:return i.RGBAIntegerFormat}}class ZM extends i.DataTexture{constructor(){super(),this.minFilter=i.NearestFilter,this.magFilter=i.NearestFilter,this.generateMipmaps=!1,this.overrideItemSize=null,this._forcedType=null}updateFrom(t){const r=this.overrideItemSize,l=t.itemSize,c=t.count;if(r!==null){if(l*c%r!==0)throw new Error("VertexAttributeTexture: overrideItemSize must divide evenly into buffer length.");t.itemSize=r,t.count=c*l/r}const p=t.itemSize,h=t.count,m=t.normalized,v=t.array.constructor,E=v.BYTES_PER_ELEMENT;let x=this._forcedType,T=p;if(x===null)switch(v){case Float32Array:x=i.FloatType;break;case Uint8Array:case Uint16Array:case Uint32Array:x=i.UnsignedIntType;break;case Int8Array:case Int16Array:case Int32Array:x=i.IntType;break}let R,F,U,P,O=W4(p);switch(x){case i.FloatType:U=1,F=V4(p),m&&E===1?(P=v,O+="8",v===Uint8Array?R=i.UnsignedByteType:(R=i.ByteType,O+="_SNORM")):(P=Float32Array,O+="32F",R=i.FloatType);break;case i.IntType:O+=E*8+"I",U=m?Math.pow(2,v.BYTES_PER_ELEMENT*8-1):1,F=JM(p),E===1?(P=Int8Array,R=i.ByteType):E===2?(P=Int16Array,R=i.ShortType):(P=Int32Array,R=i.IntType);break;case i.UnsignedIntType:O+=E*8+"UI",U=m?Math.pow(2,v.BYTES_PER_ELEMENT*8-1):1,F=JM(p),E===1?(P=Uint8Array,R=i.UnsignedByteType):E===2?(P=Uint16Array,R=i.UnsignedShortType):(P=Uint32Array,R=i.UnsignedIntType);break}T===3&&(F===i.RGBAFormat||F===i.RGBAIntegerFormat)&&(T=4);const z=Math.ceil(Math.sqrt(h)),L=T*z*z,k=new P(L),H=t.normalized;t.normalized=!1;for(let X=0;X<h;X++){const W=T*X;k[W]=t.getX(X)/U,p>=2&&(k[W+1]=t.getY(X)/U),p>=3&&(k[W+2]=t.getZ(X)/U,T===4&&(k[W+3]=1)),p>=4&&(k[W+3]=t.getW(X)/U)}t.normalized=H,this.internalFormat=O,this.format=F,this.type=R,this.image.width=z,this.image.height=z,this.image.data=k,this.needsUpdate=!0,this.dispose(),t.itemSize=l,t.count=c}}class Q4 extends ZM{constructor(){super(),this._forcedType=i.UnsignedIntType}}class EO extends null{constructor(){super(),this._forcedType=IntType}}class K4 extends ZM{constructor(){super(),this._forcedType=i.FloatType}}function X4(s,t,r){const l=s._roots;if(l.length!==1)throw new Error("MeshBVHUniformStruct: Multi-root BVHs not supported.");const c=l[0],p=new Uint16Array(c),h=new Uint32Array(c),m=new Float32Array(c),v=c.byteLength/Cm,E=2*Math.ceil(Math.sqrt(v/2)),x=new Float32Array(4*E*E),T=Math.ceil(Math.sqrt(v)),R=new Uint32Array(2*T*T);for(let F=0;F<v;F++){const U=F*Cm/4,P=U*2,O=U;for(let z=0;z<3;z++)x[8*F+0+z]=m[O+0+z],x[8*F+4+z]=m[O+3+z];if(kh(P,p)){const z=Q0(P,p),L=Sm(U,h),k=4294901760|z;R[F*2+0]=k,R[F*2+1]=L}else{const z=4*K0(U,h)/Cm,L=zM(U,h);R[F*2+0]=L,R[F*2+1]=z}}t.image.data=x,t.image.width=E,t.image.height=E,t.format=i.RGBAFormat,t.type=i.FloatType,t.internalFormat="RGBA32F",t.minFilter=i.NearestFilter,t.magFilter=i.NearestFilter,t.generateMipmaps=!1,t.needsUpdate=!0,t.dispose(),r.image.data=R,r.image.width=T,r.image.height=T,r.format=i.RGIntegerFormat,r.type=i.UnsignedIntType,r.internalFormat="RG32UI",r.minFilter=i.NearestFilter,r.magFilter=i.NearestFilter,r.generateMipmaps=!1,r.needsUpdate=!0,r.dispose()}class qM{constructor(){this.autoDispose=!0,this.index=new Q4,this.position=new K4,this.bvhBounds=new i.DataTexture,this.bvhContents=new i.DataTexture,this.index.overrideItemSize=3}updateFrom(t){const{geometry:r}=t;X4(t,this.bvhBounds,this.bvhContents),this.index.updateFrom(r.index),this.position.updateFrom(r.attributes.position)}dispose(){const{index:t,position:r,bvhBounds:l,bvhContents:c}=this;t&&t.dispose(),r&&r.dispose(),l&&l.dispose(),c&&c.dispose()}}const Y4=`
#ifndef TRI_INTERSECT_EPSILON
#define TRI_INTERSECT_EPSILON 1e-5
#endif

#ifndef INFINITY
#define INFINITY 1e20
#endif

struct BVH {

	usampler2D index;
	sampler2D position;

	sampler2D bvhBounds;
	usampler2D bvhContents;

};
`,J4=`

// Utilities
uvec4 uTexelFetch1D( usampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

ivec4 iTexelFetch1D( isampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

vec4 texelFetch1D( sampler2D tex, uint index ) {

	uint width = uint( textureSize( tex, 0 ).x );
	uvec2 uv;
	uv.x = index % width;
	uv.y = index / width;

	return texelFetch( tex, ivec2( uv ), 0 );

}

vec4 textureSampleBarycoord( sampler2D tex, vec3 barycoord, uvec3 faceIndices ) {

	return
		barycoord.x * texelFetch1D( tex, faceIndices.x ) +
		barycoord.y * texelFetch1D( tex, faceIndices.y ) +
		barycoord.z * texelFetch1D( tex, faceIndices.z );

}

void ndcToCameraRay(
	vec2 coord, mat4 cameraWorld, mat4 invProjectionMatrix,
	out vec3 rayOrigin, out vec3 rayDirection
) {

	// get camera look direction and near plane for camera clipping
	vec4 lookDirection = cameraWorld * vec4( 0.0, 0.0, - 1.0, 0.0 );
	vec4 nearVector = invProjectionMatrix * vec4( 0.0, 0.0, - 1.0, 1.0 );
	float near = abs( nearVector.z / nearVector.w );

	// get the camera direction and position from camera matrices
	vec4 origin = cameraWorld * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec4 direction = invProjectionMatrix * vec4( coord, 0.5, 1.0 );
	direction /= direction.w;
	direction = cameraWorld * direction - origin;

	// slide the origin along the ray until it sits at the near clip plane position
	origin.xyz += direction.xyz * near / dot( direction, lookDirection );

	rayOrigin = origin.xyz;
	rayDirection = direction.xyz;

}

// Raycasting
float intersectsBounds( vec3 rayOrigin, vec3 rayDirection, vec3 boundsMin, vec3 boundsMax ) {

	// https://www.reddit.com/r/opengl/comments/8ntzz5/fast_glsl_ray_box_intersection/
	// https://tavianator.com/2011/ray_box.html
	vec3 invDir = 1.0 / rayDirection;

	// find intersection distances for each plane
	vec3 tMinPlane = invDir * ( boundsMin - rayOrigin );
	vec3 tMaxPlane = invDir * ( boundsMax - rayOrigin );

	// get the min and max distances from each intersection
	vec3 tMinHit = min( tMaxPlane, tMinPlane );
	vec3 tMaxHit = max( tMaxPlane, tMinPlane );

	// get the furthest hit distance
	vec2 t = max( tMinHit.xx, tMinHit.yz );
	float t0 = max( t.x, t.y );

	// get the minimum hit distance
	t = min( tMaxHit.xx, tMaxHit.yz );
	float t1 = min( t.x, t.y );

	// set distance to 0.0 if the ray starts inside the box
	float dist = max( t0, 0.0 );

	return t1 >= dist ? dist : INFINITY;

}

bool intersectsTriangle(
	vec3 rayOrigin, vec3 rayDirection, vec3 a, vec3 b, vec3 c,
	out vec3 barycoord, out vec3 norm, out float dist, out float side
) {

	// https://stackoverflow.com/questions/42740765/intersection-between-line-and-triangle-in-3d
	vec3 edge1 = b - a;
	vec3 edge2 = c - a;
	norm = cross( edge1, edge2 );

	float det = - dot( rayDirection, norm );
	float invdet = 1.0 / det;

	vec3 AO = rayOrigin - a;
	vec3 DAO = cross( AO, rayDirection );

	vec4 uvt;
	uvt.x = dot( edge2, DAO ) * invdet;
	uvt.y = - dot( edge1, DAO ) * invdet;
	uvt.z = dot( AO, norm ) * invdet;
	uvt.w = 1.0 - uvt.x - uvt.y;

	// set the hit information
	barycoord = uvt.wxy; // arranged in A, B, C order
	dist = uvt.z;
	side = sign( det );
	norm = side * normalize( norm );

	// add an epsilon to avoid misses between triangles
	uvt += vec4( TRI_INTERSECT_EPSILON );

	return all( greaterThanEqual( uvt, vec4( 0.0 ) ) );

}

bool intersectTriangles(
	BVH bvh, vec3 rayOrigin, vec3 rayDirection, uint offset, uint count,
	inout float minDistance,

	// output variables
	out uvec4 faceIndices, out vec3 faceNormal, out vec3 barycoord,
	out float side, out float dist
) {

	bool found = false;
	vec3 localBarycoord, localNormal;
	float localDist, localSide;
	for ( uint i = offset, l = offset + count; i < l; i ++ ) {

		uvec3 indices = uTexelFetch1D( bvh.index, i ).xyz;
		vec3 a = texelFetch1D( bvh.position, indices.x ).rgb;
		vec3 b = texelFetch1D( bvh.position, indices.y ).rgb;
		vec3 c = texelFetch1D( bvh.position, indices.z ).rgb;

		if (
			intersectsTriangle( rayOrigin, rayDirection, a, b, c, localBarycoord, localNormal, localDist, localSide )
			&& localDist < minDistance
		) {

			found = true;
			minDistance = localDist;

			faceIndices = uvec4( indices.xyz, i );
			faceNormal = localNormal;

			side = localSide;
			barycoord = localBarycoord;
			dist = localDist;

		}

	}

	return found;

}

float intersectsBVHNodeBounds( vec3 rayOrigin, vec3 rayDirection, BVH bvh, uint currNodeIndex ) {

	vec3 boundsMin = texelFetch1D( bvh.bvhBounds, currNodeIndex * 2u + 0u ).xyz;
	vec3 boundsMax = texelFetch1D( bvh.bvhBounds, currNodeIndex * 2u + 1u ).xyz;
	return intersectsBounds( rayOrigin, rayDirection, boundsMin, boundsMax );

}

bool bvhIntersectFirstHit(
	BVH bvh, vec3 rayOrigin, vec3 rayDirection,

	// output variables
	out uvec4 faceIndices, out vec3 faceNormal, out vec3 barycoord,
	out float side, out float dist
) {

	// stack needs to be twice as long as the deepest tree we expect because
	// we push both the left and right child onto the stack every traversal
	int ptr = 0;
	uint stack[ 60 ];
	stack[ 0 ] = 0u;

	float triangleDistance = 1e20;
	bool found = false;
	while ( ptr > - 1 && ptr < 60 ) {

		uint currNodeIndex = stack[ ptr ];
		ptr --;

		// check if we intersect the current bounds
		float boundsHitDistance = intersectsBVHNodeBounds( rayOrigin, rayDirection, bvh, currNodeIndex );
		if ( boundsHitDistance == INFINITY || boundsHitDistance > triangleDistance ) {

			continue;

		}

		uvec2 boundsInfo = uTexelFetch1D( bvh.bvhContents, currNodeIndex ).xy;
		bool isLeaf = bool( boundsInfo.x & 0xffff0000u );

		if ( isLeaf ) {

			uint count = boundsInfo.x & 0x0000ffffu;
			uint offset = boundsInfo.y;

			found = intersectTriangles(
				bvh, rayOrigin, rayDirection, offset, count, triangleDistance,
				faceIndices, faceNormal, barycoord, side, dist
			) || found;

		} else {

			uint leftIndex = currNodeIndex + 1u;
			uint splitAxis = boundsInfo.x & 0x0000ffffu;
			uint rightIndex = boundsInfo.y;

			bool leftToRight = rayDirection[ splitAxis ] >= 0.0;
			uint c1 = leftToRight ? leftIndex : rightIndex;
			uint c2 = leftToRight ? rightIndex : leftIndex;

			// set c2 in the stack so we traverse it later. We need to keep track of a pointer in
			// the stack while we traverse. The second pointer added is the one that will be
			// traversed first
			ptr ++;
			stack[ ptr ] = c2;

			ptr ++;
			stack[ ptr ] = c1;

		}

	}

	return found;

}
`,bO=null,Z4=hp({envMap:null,bounces:3,ior:2.4,correctMips:!0,aberrationStrength:.01,fresnel:0,bvh:new qM,color:new i.Color("white"),resolution:new i.Vector2,viewMatrixInverse:new i.Matrix4,projectionMatrixInverse:new i.Matrix4},`
  uniform mat4 viewMatrixInverse;

  varying vec3 vWorldPosition;  
  varying vec3 vNormal;
  varying mat4 vModelMatrixInverse;

  #ifdef USE_INSTANCING_COLOR
    varying vec3 vInstanceColor;
  #endif

  void main() {        
    vec4 transformedNormal = vec4(normal, 0.0);
    vec4 transformedPosition = vec4(position, 1.0);
    #ifdef USE_INSTANCING
      transformedNormal = instanceMatrix * transformedNormal;
      transformedPosition = instanceMatrix * transformedPosition;
    #endif

    #ifdef USE_INSTANCING
      vModelMatrixInverse = inverse(modelMatrix * instanceMatrix);
    #else
      vModelMatrixInverse = inverse(modelMatrix);
    #endif

    #ifdef USE_INSTANCING_COLOR
      vInstanceColor = instanceColor.rgb;
    #endif

    vWorldPosition = (modelMatrix * transformedPosition).xyz;
    vNormal = normalize((viewMatrixInverse * vec4(normalMatrix * transformedNormal.xyz, 0.0)).xyz);
    gl_Position = projectionMatrix * viewMatrix * modelMatrix * transformedPosition;
  }`,`
  #define ENVMAP_TYPE_CUBE_UV
  precision highp isampler2D;
  precision highp usampler2D;
  varying vec3 vWorldPosition;
  varying vec3 vNormal;
  varying mat4 vModelMatrixInverse;

  #ifdef USE_INSTANCING_COLOR
    varying vec3 vInstanceColor;
  #endif
    
  #ifdef ENVMAP_TYPE_CUBEM
    uniform samplerCube envMap;
  #else
    uniform sampler2D envMap;
  #endif
    
  uniform float bounces;
  ${Y4}
  ${J4}
  uniform BVH bvh;
  uniform float ior;
  uniform bool correctMips;
  uniform vec2 resolution;
  uniform float fresnel;
  uniform mat4 modelMatrix;
  uniform mat4 projectionMatrixInverse;
  uniform mat4 viewMatrixInverse;
  uniform float aberrationStrength;
  uniform vec3 color;
  
  float fresnelFunc(vec3 viewDirection, vec3 worldNormal) {
    return pow( 1.0 + dot( viewDirection, worldNormal), 10.0 );
  }
    
  vec3 totalInternalReflection(vec3 ro, vec3 rd, vec3 normal, float ior, mat4 modelMatrixInverse) {
    vec3 rayOrigin = ro;
    vec3 rayDirection = rd;
    rayDirection = refract(rayDirection, normal, 1.0 / ior);
    rayOrigin = vWorldPosition + rayDirection * 0.001;
    rayOrigin = (modelMatrixInverse * vec4(rayOrigin, 1.0)).xyz;
    rayDirection = normalize((modelMatrixInverse * vec4(rayDirection, 0.0)).xyz);
    for(float i = 0.0; i < bounces; i++) {
      uvec4 faceIndices = uvec4( 0u );
      vec3 faceNormal = vec3( 0.0, 0.0, 1.0 );
      vec3 barycoord = vec3( 0.0 );
      float side = 1.0;
      float dist = 0.0;
      bvhIntersectFirstHit( bvh, rayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist );
      vec3 hitPos = rayOrigin + rayDirection * max(dist - 0.001, 0.0);      
      vec3 tempDir = refract(rayDirection, faceNormal, ior);
      if (length(tempDir) != 0.0) {
        rayDirection = tempDir;
        break;
      }
      rayDirection = reflect(rayDirection, faceNormal);
      rayOrigin = hitPos + rayDirection * 0.01;
    }
    rayDirection = normalize((modelMatrix * vec4(rayDirection, 0.0)).xyz);
    return rayDirection;
  }
    
  #include <common>
  #include <cube_uv_reflection_fragment>
    
  #ifdef ENVMAP_TYPE_CUBEM
    vec4 textureGradient(samplerCube envMap, vec3 rayDirection, vec3 directionCamPerfect) {
      return textureGrad(envMap, rayDirection, dFdx(correctMips ? directionCamPerfect: rayDirection), dFdy(correctMips ? directionCamPerfect: rayDirection));
    }
  #else
    vec4 textureGradient(sampler2D envMap, vec3 rayDirection, vec3 directionCamPerfect) {
      vec2 uvv = equirectUv( rayDirection );
      vec2 smoothUv = equirectUv( directionCamPerfect );
      return textureGrad(envMap, uvv, dFdx(correctMips ? smoothUv : uvv), dFdy(correctMips ? smoothUv : uvv));
    }
  #endif
  
  void main() {
    vec2 uv = gl_FragCoord.xy / resolution;
    vec3 directionCamPerfect = (projectionMatrixInverse * vec4(uv * 2.0 - 1.0, 0.0, 1.0)).xyz;
    directionCamPerfect = (viewMatrixInverse * vec4(directionCamPerfect, 0.0)).xyz;
    directionCamPerfect = normalize(directionCamPerfect);
    vec3 normal = vNormal;
    vec3 rayOrigin = cameraPosition;
    vec3 rayDirection = normalize(vWorldPosition - cameraPosition);
    vec3 finalColor;
    #ifdef CHROMATIC_ABERRATIONS
      vec3 rayDirectionG = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior, 1.0), vModelMatrixInverse);
      #ifdef FAST_CHROMA 
        vec3 rayDirectionR = normalize(rayDirectionG + 1.0 * vec3(aberrationStrength / 2.0));
        vec3 rayDirectionB = normalize(rayDirectionG - 1.0 * vec3(aberrationStrength / 2.0));
      #else
        vec3 rayDirectionR = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior * (1.0 - aberrationStrength), 1.0), vModelMatrixInverse);
        vec3 rayDirectionB = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior * (1.0 + aberrationStrength), 1.0), vModelMatrixInverse);
      #endif
      float finalColorR = textureGradient(envMap, rayDirectionR, directionCamPerfect).r;
      float finalColorG = textureGradient(envMap, rayDirectionG, directionCamPerfect).g;
      float finalColorB = textureGradient(envMap, rayDirectionB, directionCamPerfect).b;
      finalColor = vec3(finalColorR, finalColorG, finalColorB);
    #else
      rayDirection = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior, 1.0), vModelMatrixInverse);
      finalColor = textureGradient(envMap, rayDirection, directionCamPerfect).rgb;    
    #endif

    finalColor *= color;
    #ifdef USE_INSTANCING_COLOR
      finalColor *= vInstanceColor;
    #endif

    vec3 viewDirection = normalize(vWorldPosition - cameraPosition);
    float nFresnel = fresnelFunc(viewDirection, normal) * fresnel;
    gl_FragColor = vec4(mix(finalColor, vec3(1.0), nFresnel), 1.0);      
    #include <tonemapping_fragment>
    #include <encodings_fragment>
  }`),q4=s=>s&&s.isCubeTexture;function $4(c){var p=c,{aberrationStrength:s=0,fastChroma:t=!0,envMap:r}=p,l=Cn(p,["aberrationStrength","fastChroma","envMap"]);(0,_.e)({MeshRefractionMaterial:Z4});const h=(0,d.useRef)(),{size:m}=(0,_.z)(),v=(0,d.useMemo)(()=>{var E,x;const T={},R=q4(r),U=((E=R?(x=r.image[0])==null?void 0:x.width:r.image.width)!==null&&E!==void 0?E:1024)/4,P=Math.floor(Math.log2(U)),O=Math.pow(2,P),z=3*Math.max(O,16*7),L=4*O;return R&&(T.ENVMAP_TYPE_CUBEM=""),T.CUBEUV_TEXEL_WIDTH=`${1/z}`,T.CUBEUV_TEXEL_HEIGHT=`${1/L}`,T.CUBEUV_MAX_MIP=`${P}.0`,s>0&&(T.CHROMATIC_ABERRATIONS=""),t&&(T.FAST_CHROMA=""),T},[s,t]);return(0,d.useLayoutEffect)(()=>{var E,x,T;const R=(E=h.current)==null||(x=E.__r3f)==null||(T=x.parent)==null?void 0:T.geometry;R&&(h.current.bvh=new qM,h.current.bvh.updateFrom(new Z0(R.clone().toNonIndexed(),{lazyGeneration:!1,strategy:d2})))},[]),(0,_.A)(({camera:E})=>{h.current.viewMatrixInverse=E.matrixWorld,h.current.projectionMatrixInverse=E.projectionMatrixInverse}),d.createElement("meshRefractionMaterial",(0,C.Z)({key:JSON.stringify(v),defines:v,ref:h,resolution:[m.width,m.height],aberrationStrength:s,envMap:r},l))}const GE=hp({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }");class ew extends i.MeshPhysicalMaterial{constructor(t=6,r=!1){super(),this.uniforms={chromaticAberration:{value:.05},transmission:{value:0},_transmission:{value:1},transmissionMap:{value:null},roughness:{value:0},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:1/0},attenuationColor:{value:new i.Color("white")},anisotropicBlur:{value:.1},time:{value:0},distortion:{value:0},distortionScale:{value:.5},temporalDistortion:{value:0},buffer:{value:null}},this.onBeforeCompile=l=>{l.uniforms=Zn(Zn({},l.uniforms),this.uniforms),r?l.defines.USE_SAMPLER="":l.defines.USE_TRANSMISSION="",l.fragmentShader=`
      uniform float chromaticAberration;         
      uniform float anisotropicBlur;      
      uniform float time;
      uniform float distortion;
      uniform float distortionScale;
      uniform float temporalDistortion;
      uniform sampler2D buffer;

      vec3 random3(vec3 c) {
        float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));
        vec3 r;
        r.z = fract(512.0*j);
        j *= .125;
        r.x = fract(512.0*j);
        j *= .125;
        r.y = fract(512.0*j);
        return r-0.5;
      }

      float seed = 0.0;
      uint hash( uint x ) {
        x += ( x << 10u );
        x ^= ( x >>  6u );
        x += ( x <<  3u );
        x ^= ( x >> 11u );
        x += ( x << 15u );
        return x;
      }

      // Compound versions of the hashing algorithm I whipped together.
      uint hash( uvec2 v ) { return hash( v.x ^ hash(v.y)                         ); }
      uint hash( uvec3 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z)             ); }
      uint hash( uvec4 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z) ^ hash(v.w) ); }

      // Construct a float with half-open range [0:1] using low 23 bits.
      // All zeroes yields 0.0, all ones yields the next smallest representable value below 1.0.
      float floatConstruct( uint m ) {
        const uint ieeeMantissa = 0x007FFFFFu; // binary32 mantissa bitmask
        const uint ieeeOne      = 0x3F800000u; // 1.0 in IEEE binary32
        m &= ieeeMantissa;                     // Keep only mantissa bits (fractional part)
        m |= ieeeOne;                          // Add fractional part to 1.0
        float  f = uintBitsToFloat( m );       // Range [1:2]
        return f - 1.0;                        // Range [0:1]
      }

      // Pseudo-random value in half-open range [0:1].
      float random( float x ) { return floatConstruct(hash(floatBitsToUint(x))); }
      float random( vec2  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float random( vec3  v ) { return floatConstruct(hash(floatBitsToUint(v))); }
      float random( vec4  v ) { return floatConstruct(hash(floatBitsToUint(v))); }

      float rand() {
        float result = random(vec3(gl_FragCoord.xy, seed));
        seed += 1.0;
        return result;
      }

      const float F3 =  0.3333333;
      const float G3 =  0.1666667;

      float snoise(vec3 p) {
        vec3 s = floor(p + dot(p, vec3(F3)));
        vec3 x = p - s + dot(s, vec3(G3));
        vec3 e = step(vec3(0.0), x - x.yzx);
        vec3 i1 = e*(1.0 - e.zxy);
        vec3 i2 = 1.0 - e.zxy*(1.0 - e);
        vec3 x1 = x - i1 + G3;
        vec3 x2 = x - i2 + 2.0*G3;
        vec3 x3 = x - 1.0 + 3.0*G3;
        vec4 w, d;
        w.x = dot(x, x);
        w.y = dot(x1, x1);
        w.z = dot(x2, x2);
        w.w = dot(x3, x3);
        w = max(0.6 - w, 0.0);
        d.x = dot(random3(s), x);
        d.y = dot(random3(s + i1), x1);
        d.z = dot(random3(s + i2), x2);
        d.w = dot(random3(s + 1.0), x3);
        w *= w;
        w *= w;
        d *= w;
        return dot(d, vec4(52.0));
      }

      float snoiseFractal(vec3 m) {
        return 0.5333333* snoise(m)
              +0.2666667* snoise(2.0*m)
              +0.1333333* snoise(4.0*m)
              +0.0666667* snoise(8.0*m);
      }
`+l.fragmentShader,l.fragmentShader=l.fragmentShader.replace("#include <transmission_pars_fragment>",`
        #ifdef USE_TRANSMISSION
          // Transmission code is based on glTF-Sampler-Viewer
          // https://github.com/KhronosGroup/glTF-Sample-Viewer
          uniform float _transmission;
          uniform float thickness;
          uniform float attenuationDistance;
          uniform vec3 attenuationColor;
          #ifdef USE_TRANSMISSIONMAP
            uniform sampler2D transmissionMap;
          #endif
          #ifdef USE_THICKNESSMAP
            uniform sampler2D thicknessMap;
          #endif
          uniform vec2 transmissionSamplerSize;
          uniform sampler2D transmissionSamplerMap;
          uniform mat4 modelMatrix;
          uniform mat4 projectionMatrix;
          varying vec3 vWorldPosition;
          vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
            // Direction of refracted light.
            vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
            // Compute rotation-independant scaling of the model matrix.
            vec3 modelScale;
            modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
            modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
            modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
            // The thickness is specified in local space.
            return normalize( refractionVector ) * thickness * modelScale;
          }
          float applyIorToRoughness( const in float roughness, const in float ior ) {
            // Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and
            // an IOR of 1.5 results in the default amount of microfacet refraction.
            return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
          }
          vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
            float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );            
            #ifdef USE_SAMPLER
              #ifdef texture2DLodEXT
                return texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod);
              #else
                return texture2D(transmissionSamplerMap, fragCoord.xy, framebufferLod);
              #endif
            #else
              return texture2D(buffer, fragCoord.xy);
            #endif
          }
          vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
            if ( isinf( attenuationDistance ) ) {
              // Attenuation distance is +\u221E, i.e. the transmitted color is not attenuated at all.
              return radiance;
            } else {
              // Compute light attenuation using Beer's law.
              vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
              vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance ); // Beer's law
              return transmittance * radiance;
            }
          }
          vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
            const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
            const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
            const in vec3 attenuationColor, const in float attenuationDistance ) {
            vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
            vec3 refractedRayExit = position + transmissionRay;
            // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.
            vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
            vec2 refractionCoords = ndcPos.xy / ndcPos.w;
            refractionCoords += 1.0;
            refractionCoords /= 2.0;
            // Sample framebuffer to get pixel the refracted ray hits.
            vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
            vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
            // Get the specular component.
            vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
            return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
          }
        #endif
`),l.fragmentShader=l.fragmentShader.replace("#include <transmission_fragment>",`  
        // Improve the refraction to use the world pos
        material.transmission = _transmission;
        material.transmissionAlpha = 1.0;
        material.thickness = thickness;
        material.attenuationDistance = attenuationDistance;
        material.attenuationColor = attenuationColor;
        #ifdef USE_TRANSMISSIONMAP
          material.transmission *= texture2D( transmissionMap, vUv ).r;
        #endif
        #ifdef USE_THICKNESSMAP
          material.thickness *= texture2D( thicknessMap, vUv ).g;
        #endif
        
        vec3 pos = vWorldPosition;
        vec3 v = normalize( cameraPosition - pos );
        vec3 n = inverseTransformDirection( normal, viewMatrix );
        vec3 transmission = vec3(0.0);
        float transmissionR, transmissionB, transmissionG;
        float randomCoords = rand();
        float thickness_smear = thickness * max(pow(roughnessFactor, 0.33), anisotropicBlur);
        vec3 distortionNormal = vec3(0.0);
        vec3 temporalOffset = vec3(time, -time, -time) * temporalDistortion;
        if (distortion > 0.0) {
          distortionNormal = distortion * vec3(snoiseFractal(vec3((pos * distortionScale + temporalOffset))), snoiseFractal(vec3(pos.zxy * distortionScale - temporalOffset)), snoiseFractal(vec3(pos.yxz * distortionScale + temporalOffset)));
        }
        for (float i = 0.0; i < ${t}.0; i ++) {
          vec3 sampleNorm = normalize(n + roughnessFactor * roughnessFactor * 2.0 * normalize(vec3(rand() - 0.5, rand() - 0.5, rand() - 0.5)) * pow(rand(), 0.33) + distortionNormal);
          transmissionR = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness  + thickness_smear * (i + randomCoords) / float(${t}),
            material.attenuationColor, material.attenuationDistance
          ).r;
          transmissionG = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior  * (1.0 + chromaticAberration * (i + randomCoords) / float(${t})) , material.thickness + thickness_smear * (i + randomCoords) / float(${t}),
            material.attenuationColor, material.attenuationDistance
          ).g;
          transmissionB = getIBLVolumeRefraction(
            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior * (1.0 + 2.0 * chromaticAberration * (i + randomCoords) / float(${t})), material.thickness + thickness_smear * (i + randomCoords) / float(${t}),
            material.attenuationColor, material.attenuationDistance
          ).b;
          transmission.r += transmissionR;
          transmission.g += transmissionG;
          transmission.b += transmissionB;
        }
        transmission /= ${t}.0;
        totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );
`)},Object.keys(this.uniforms).forEach(l=>Object.defineProperty(this,l,{get:()=>this.uniforms[l].value,set:c=>this.uniforms[l].value=c}))}}const tw=d.forwardRef((P,U)=>{var O=P,{buffer:s,transmissionSampler:t=!1,backside:r=!1,side:l=i.FrontSide,transmission:c=1,thickness:p=0,backsideThickness:h=0,samples:m=10,resolution:v,backsideResolution:E,background:x,anisotropy:T,anisotropicBlur:R}=O,F=Cn(O,["buffer","transmissionSampler","backside","side","transmission","thickness","backsideThickness","samples","resolution","backsideResolution","background","anisotropy","anisotropicBlur"]);(0,_.e)({MeshTransmissionMaterial:ew});const z=d.useRef(null),[L]=d.useState(()=>new GE),k=rc(E||v),H=rc(v);let X,W,J;return(0,_.A)(Y=>{z.current.time=Y.clock.getElapsedTime(),z.current.buffer===H.texture&&!t&&(J=z.current.__r3f.parent,J&&(W=Y.gl.toneMapping,X=Y.scene.background,Y.gl.toneMapping=i.NoToneMapping,x&&(Y.scene.background=x),J.material=L,r&&(Y.gl.setRenderTarget(k),Y.gl.render(Y.scene,Y.camera),J.material=z.current,J.material.buffer=k.texture,J.material.thickness=h,J.material.side=i.BackSide),Y.gl.setRenderTarget(H),Y.gl.render(Y.scene,Y.camera),J.material.thickness=p,J.material.side=l,J.material.buffer=H.texture,Y.scene.background=X,Y.gl.setRenderTarget(null),J.material=z.current,Y.gl.toneMapping=W))}),d.useImperativeHandle(U,()=>z.current,[]),d.createElement("meshTransmissionMaterial",(0,C.Z)({args:[m,t],ref:z},F,{buffer:s||H.texture,_transmission:c,anisotropicBlur:R!=null?R:T,transmission:t?c:0,thickness:p,side:l}))}),nw=d.forwardRef((s,t)=>((0,_.e)({DiscardMaterialImpl:GE}),d.createElement("discardMaterialImpl",(0,C.Z)({ref:t},s))));class $M extends i.PointsMaterial{constructor(t){super(t),this.onBeforeCompile=(r,l)=>{const{isWebGL2:c}=l.capabilities;r.fragmentShader=r.fragmentShader.replace("#include <output_fragment>",`
        ${c?"#include <output_fragment>":`#extension GL_OES_standard_derivatives : enable
#include <output_fragment>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <encodings_fragment>
      `)}}}const rw=d.forwardRef((s,t)=>{const[r]=d.useState(()=>new $M(null));return d.createElement("primitive",(0,C.Z)({},s,{object:r,ref:t,attach:"material"}))}),iw=({focus:s=0,size:t=25,samples:r=10}={})=>`
#define PENUMBRA_FILTER_SIZE float(${t})
#define RGB_NOISE_FUNCTION(uv) (randRGB(uv))
vec3 randRGB(vec2 uv) {
  return vec3(
    fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),
    fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),
    fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)
  );
}

vec3 lowPassRandRGB(vec2 uv) {
  // 3x3 convolution (average)
  // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9
  vec3 result = vec3(0);
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));
  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));
  result *= 0.111111111; // 1.0 / 9.0
  return result;
}
vec3 highPassRandRGB(vec2 uv) {
  // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal
  // hp(x) = x - lp(x)
  return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;
}


vec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {
  const float goldenAngle = 2.399963f; // radians
  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));
  float theta = float(sampleIndex) * goldenAngle + angle;
  float sine = sin(theta);
  float cosine = cos(theta);
  return vec2(cosine, sine) * r;
}
float penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation
  return (zReceiver - zBlocker) / zBlocker;
}
float findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float blockerDepthSum = float(${s});
  float blockers = 0.0;

  int j = 0;
  vec2 offset = vec2(0.);
  float depth = 0.;

  #pragma unroll_loop_start
  for(int i = 0; i < ${r}; i ++) {
    offset = (vogelDiskSample(j, ${r}, angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;
    depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));
    if (depth < compare) {
      blockerDepthSum += depth;
      blockers++;
    }
    j++;
  }
  #pragma unroll_loop_end

  if (blockers > 0.0) {
    return blockerDepthSum / blockers;
  }
  return -1.0;
}

        
float vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {
  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);
  float shadow = 0.0f;
  int j = 0;
  vec2 vogelSample = vec2(0.0);
  vec2 offset = vec2(0.0);
  #pragma unroll_loop_start
  for (int i = 0; i < ${r}; i++) {
    vogelSample = vogelDiskSample(j, ${r}, angle) * texelSize;
    offset = vogelSample * (1.0 + filterRadius * float(${t}));
    shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );
    j++;
  }
  #pragma unroll_loop_end
  return shadow * 1.0 / ${r}.0;
}

float PCSS (sampler2D shadowMap, vec4 coords) {
  vec2 uv = coords.xy;
  float zReceiver = coords.z; // Assumed to be eye-space z in this code
  float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;
  float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);
  if (avgBlockerDepth == -1.0) {
    return 1.0;
  }
  float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);
  return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);
}`;function ex(s,t,r){t.traverse(l=>{l.material&&(s.properties.remove(l.material),l.material.dispose==null||l.material.dispose())}),s.info.programs.length=0,s.compile(t,r)}function ow({focus:s=0,samples:t=10,size:r=25}){const l=(0,_.z)(h=>h.gl),c=(0,_.z)(h=>h.scene),p=(0,_.z)(h=>h.camera);return d.useEffect(()=>{const h=i.ShaderChunk.shadowmap_pars_fragment;return i.ShaderChunk.shadowmap_pars_fragment=i.ShaderChunk.shadowmap_pars_fragment.replace("#ifdef USE_SHADOWMAP",`#ifdef USE_SHADOWMAP
`+iw({size:r,samples:t,focus:s})).replace("#if defined( SHADOWMAP_TYPE_PCF )",`
return PCSS(shadowMap, shadowCoord);
#if defined( SHADOWMAP_TYPE_PCF )`),ex(l,c,p),()=>{i.ShaderChunk.shadowmap_pars_fragment=h,ex(l,c,p)}},[s,r,t]),null}function tl(s,t){const r=s+"Geometry";return d.forwardRef((m,h)=>{var v=m,{args:l,children:c}=v,p=Cn(v,["args","children"]);const E=d.useRef(null);return d.useImperativeHandle(h,()=>E.current),d.useLayoutEffect(()=>void(t==null?void 0:t(E.current))),d.createElement("mesh",(0,C.Z)({ref:E},p),d.createElement(r,{attach:"geometry",args:l}),c)})}const sw=tl("box"),aw=tl("circle"),lw=tl("cone"),cw=tl("cylinder"),pw=tl("sphere"),tx=tl("plane"),uw=tl("tube"),dw=tl("torus"),hw=tl("torusKnot"),fw=tl("tetrahedron"),gw=tl("ring"),mw=tl("polyhedron"),Aw=tl("icosahedron"),yw=tl("octahedron"),vw=tl("dodecahedron"),_w=tl("extrude"),Ew=tl("lathe"),bw=tl("capsule"),Mw=tl("shape",({geometry:s})=>{const t=s.attributes.position,r=new i.Box3().setFromBufferAttribute(t),l=new i.Vector3;r.getSize(l);const c=[];let p=0,h=0,m=0,v=0;for(let E=0;E<t.count;E++)p=t.getX(E),h=t.getY(E),m=(p-r.min.x)/l.x,v=(h-r.min.y)/l.y,c.push(m,v);s.setAttribute("uv",new i.Float32BufferAttribute(c,2))}),Ud=1e-5;function xw(s,t,r){const l=new i.Shape,c=r-Ud;return l.absarc(Ud,Ud,Ud,-Math.PI/2,-Math.PI,!0),l.absarc(Ud,t-c*2,Ud,Math.PI,Math.PI/2,!0),l.absarc(s-c*2,t-c*2,Ud,Math.PI/2,0,!0),l.absarc(s-c*2,Ud,Ud,0,-Math.PI/2,!0),l}const Cw=d.forwardRef(function(T,x){var R=T,{args:[t=1,r=1,l=1]=[],radius:c=.05,steps:p=1,smoothness:h=4,creaseAngle:m=.4,children:v}=R,E=Cn(R,["args","radius","steps","smoothness","creaseAngle","children"]);const F=d.useMemo(()=>xw(t,r,c),[t,r,c]),U=d.useMemo(()=>({depth:l-c*2,bevelEnabled:!0,bevelSegments:h*2,steps:p,bevelSize:c-Ud,bevelThickness:c,curveSegments:h}),[l,c,h]),P=d.useRef();return d.useLayoutEffect(()=>{P.current&&(P.current.center(),g0(P.current,m))},[F,U]),d.createElement("mesh",(0,C.Z)({ref:x},E),d.createElement("extrudeGeometry",{ref:P,args:[F,U]}),v)});function Sw(){const s=new i.BufferGeometry,t=new Float32Array([-1,-1,3,-1,-1,3]);return s.setAttribute("position",new i.BufferAttribute(t,2)),s}const ww=d.forwardRef(function(c,l){var p=c,{children:t}=p,r=Cn(p,["children"]);const h=d.useMemo(Sw,[]);return d.createElement("mesh",(0,C.Z)({ref:l,geometry:h,frustumCulled:!1},r),t)}),Tw=d.forwardRef((v,m)=>{var E=v,{children:s,width:t,height:r,depth:l,box3:c,precise:p=!0}=E,h=Cn(E,["children","width","height","depth","box3","precise"]);const x=d.useRef(null),T=d.useRef(null),R=d.useRef(null);return d.useLayoutEffect(()=>{T.current.matrixWorld.identity();let F=c||new i.Box3().setFromObject(R.current,p);const U=F.max.x-F.min.x,P=F.max.y-F.min.y,O=F.max.z-F.min.z;let z=Math.max(U,P,O);t&&(z=U),r&&(z=P),l&&(z=O),T.current.scale.setScalar(1/z)},[t,r,l,c,p]),d.useImperativeHandle(m,()=>x.current,[]),d.createElement("group",(0,C.Z)({ref:x},h),d.createElement("group",{ref:T},d.createElement("group",{ref:R},s)))}),e1=s=>s&&s.isOrthographicCamera,Bw=s=>s&&s.isBox3,nx=d.createContext(null);function rx({children:s,damping:t=6,fit:r,clip:l,observe:c,margin:p=1.2,eps:h=.01,onFit:m}){const v=d.useRef(null),{camera:E,invalidate:x,size:T,controls:R}=(0,_.z)(),F=R,U=d.useRef(m);U.current=m;function P(W,J){return Math.abs(W.x-J.x)<h&&Math.abs(W.y-J.y)<h&&Math.abs(W.z-J.z)<h}function O(W,J,Y,ce){W.x=i.MathUtils.damp(W.x,J.x,Y,ce),W.y=i.MathUtils.damp(W.y,J.y,Y,ce),W.z=i.MathUtils.damp(W.z,J.z,Y,ce)}const[z]=d.useState(()=>({animating:!1,focus:new i.Vector3,camera:new i.Vector3,zoom:1})),[L]=d.useState(()=>({focus:new i.Vector3,camera:new i.Vector3,zoom:1})),[k]=d.useState(()=>new i.Box3),H=d.useMemo(()=>{function W(){const J=k.getSize(new i.Vector3),Y=k.getCenter(new i.Vector3),ce=Math.max(J.x,J.y,J.z),ue=e1(E)?ce*4:ce/(2*Math.atan(Math.PI*E.fov/360)),ge=e1(E)?ce*4:ue/E.aspect,le=p*Math.max(ue,ge);return{box:k,size:J,center:Y,distance:le}}return{getSize:W,refresh(J){if(Bw(J))k.copy(J);else{const Y=J||v.current;Y.updateWorldMatrix(!0,!0),k.setFromObject(Y)}if(k.isEmpty()){const Y=E.position.length()||10;k.setFromCenterAndSize(new i.Vector3,new i.Vector3(Y,Y,Y))}if((F==null?void 0:F.constructor.name)==="OrthographicTrackballControls"){const{distance:Y}=W(),ce=E.position.clone().sub(F.target).normalize().multiplyScalar(Y),ue=F.target.clone().add(ce);E.position.copy(ue)}return this},clip(){const{distance:J}=W();return F&&(F.maxDistance=J*10),E.near=J/100,E.far=J*100,E.updateProjectionMatrix(),F&&F.update(),x(),this},to({position:J,target:Y}){z.camera.copy(E.position);const{center:ce}=W();return L.camera.set(...J),Y?L.focus.set(...Y):L.focus.copy(ce),t?z.animating=!0:E.position.set(...J),this},fit(){z.camera.copy(E.position),F&&z.focus.copy(F.target);const{center:J,distance:Y}=W(),ce=J.clone().sub(E.position).normalize().multiplyScalar(Y);if(L.camera.copy(J).sub(ce),L.focus.copy(J),e1(E)){z.zoom=E.zoom;let ue=0,ge=0;const le=[new i.Vector3(k.min.x,k.min.y,k.min.z),new i.Vector3(k.min.x,k.max.y,k.min.z),new i.Vector3(k.min.x,k.min.y,k.max.z),new i.Vector3(k.min.x,k.max.y,k.max.z),new i.Vector3(k.max.x,k.max.y,k.max.z),new i.Vector3(k.max.x,k.max.y,k.min.z),new i.Vector3(k.max.x,k.min.y,k.max.z),new i.Vector3(k.max.x,k.min.y,k.min.z)];J.applyMatrix4(E.matrixWorldInverse);for(const Te of le)Te.applyMatrix4(E.matrixWorldInverse),ue=Math.max(ue,Math.abs(Te.y-J.y)),ge=Math.max(ge,Math.abs(Te.x-J.x));ue*=2,ge*=2;const Me=(E.top-E.bottom)/ue,me=(E.right-E.left)/ge;L.zoom=Math.min(Me,me)/p,t||(E.zoom=L.zoom,E.updateProjectionMatrix())}return t?z.animating=!0:(E.position.copy(L.camera),E.lookAt(L.focus),F&&(F.target.copy(L.focus),F.update())),U.current&&U.current(this.getSize()),x(),this}}},[k,E,F,p,t,x]);d.useLayoutEffect(()=>{if(F){const W=()=>z.animating=!1;return F.addEventListener("start",W),()=>F.removeEventListener("start",W)}},[F]);const X=d.useRef(0);return d.useLayoutEffect(()=>{(c||X.current++===0)&&(H.refresh(),r&&H.fit(),l&&H.clip())},[T,l,r,c,E,F]),(0,_.A)((W,J)=>{if(z.animating){if(O(z.focus,L.focus,t,J),O(z.camera,L.camera,t,J),z.zoom=i.MathUtils.damp(z.zoom,L.zoom,t,J),E.position.copy(z.camera),e1(E)&&(E.zoom=z.zoom,E.updateProjectionMatrix()),F?(F.target.copy(z.focus),F.update()):E.lookAt(z.focus),x(),e1(E)&&!(Math.abs(z.zoom-L.zoom)<h)||!e1(E)&&!P(z.camera,L.camera)||F&&!P(z.focus,L.focus))return;z.animating=!1}}),d.createElement("group",{ref:v},d.createElement(nx.Provider,{value:H},s))}function ix(){return d.useContext(nx)}var Rw=Object.defineProperty,Iw=(s,t,r)=>t in s?Rw(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,zu=(s,t,r)=>(Iw(s,typeof t!="symbol"?t+"":t,r),r);class UE{constructor(t=Math){zu(this,"grad3",[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]]),zu(this,"grad4",[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]]),zu(this,"p",[]),zu(this,"perm",[]),zu(this,"simplex",[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]),zu(this,"dot",(r,l,c)=>r[0]*l+r[1]*c),zu(this,"dot3",(r,l,c,p)=>r[0]*l+r[1]*c+r[2]*p),zu(this,"dot4",(r,l,c,p,h)=>r[0]*l+r[1]*c+r[2]*p+r[3]*h),zu(this,"noise",(r,l)=>{let c,p,h;const m=.5*(Math.sqrt(3)-1),v=(r+l)*m,E=Math.floor(r+v),x=Math.floor(l+v),T=(3-Math.sqrt(3))/6,R=(E+x)*T,F=E-R,U=x-R,P=r-F,O=l-U;let z=0,L=1;P>O&&(z=1,L=0);const k=P-z+T,H=O-L+T,X=P-1+2*T,W=O-1+2*T,J=E&255,Y=x&255,ce=this.perm[J+this.perm[Y]]%12,ue=this.perm[J+z+this.perm[Y+L]]%12,ge=this.perm[J+1+this.perm[Y+1]]%12;let le=.5-P*P-O*O;le<0?c=0:(le*=le,c=le*le*this.dot(this.grad3[ce],P,O));let Me=.5-k*k-H*H;Me<0?p=0:(Me*=Me,p=Me*Me*this.dot(this.grad3[ue],k,H));let me=.5-X*X-W*W;return me<0?h=0:(me*=me,h=me*me*this.dot(this.grad3[ge],X,W)),70*(c+p+h)}),zu(this,"noise3d",(r,l,c)=>{let p,h,m,v;const E=.3333333333333333,x=(r+l+c)*E,T=Math.floor(r+x),R=Math.floor(l+x),F=Math.floor(c+x),U=1/6,P=(T+R+F)*U,O=T-P,z=R-P,L=F-P,k=r-O,H=l-z,X=c-L;let W,J,Y,ce,ue,ge;k>=H?H>=X?(W=1,J=0,Y=0,ce=1,ue=1,ge=0):k>=X?(W=1,J=0,Y=0,ce=1,ue=0,ge=1):(W=0,J=0,Y=1,ce=1,ue=0,ge=1):H<X?(W=0,J=0,Y=1,ce=0,ue=1,ge=1):k<X?(W=0,J=1,Y=0,ce=0,ue=1,ge=1):(W=0,J=1,Y=0,ce=1,ue=1,ge=0);const le=k-W+U,Me=H-J+U,me=X-Y+U,Te=k-ce+2*U,Ue=H-ue+2*U,Re=X-ge+2*U,Ge=k-1+3*U,De=H-1+3*U,Xe=X-1+3*U,Ce=T&255,Ee=R&255,_e=F&255,oe=this.perm[Ce+this.perm[Ee+this.perm[_e]]]%12,Ae=this.perm[Ce+W+this.perm[Ee+J+this.perm[_e+Y]]]%12,Be=this.perm[Ce+ce+this.perm[Ee+ue+this.perm[_e+ge]]]%12,ve=this.perm[Ce+1+this.perm[Ee+1+this.perm[_e+1]]]%12;let ke=.6-k*k-H*H-X*X;ke<0?p=0:(ke*=ke,p=ke*ke*this.dot3(this.grad3[oe],k,H,X));let vt=.6-le*le-Me*Me-me*me;vt<0?h=0:(vt*=vt,h=vt*vt*this.dot3(this.grad3[Ae],le,Me,me));let ht=.6-Te*Te-Ue*Ue-Re*Re;ht<0?m=0:(ht*=ht,m=ht*ht*this.dot3(this.grad3[Be],Te,Ue,Re));let dt=.6-Ge*Ge-De*De-Xe*Xe;return dt<0?v=0:(dt*=dt,v=dt*dt*this.dot3(this.grad3[ve],Ge,De,Xe)),32*(p+h+m+v)}),zu(this,"noise4d",(r,l,c,p)=>{const h=this.grad4,m=this.simplex,v=this.perm,E=(Math.sqrt(5)-1)/4,x=(5-Math.sqrt(5))/20;let T,R,F,U,P;const O=(r+l+c+p)*E,z=Math.floor(r+O),L=Math.floor(l+O),k=Math.floor(c+O),H=Math.floor(p+O),X=(z+L+k+H)*x,W=z-X,J=L-X,Y=k-X,ce=H-X,ue=r-W,ge=l-J,le=c-Y,Me=p-ce,me=ue>ge?32:0,Te=ue>le?16:0,Ue=ge>le?8:0,Re=ue>Me?4:0,Ge=ge>Me?2:0,De=le>Me?1:0,Xe=me+Te+Ue+Re+Ge+De;let Ce,Ee,_e,oe,Ae,Be,ve,ke,vt,ht,dt,$e;Ce=m[Xe][0]>=3?1:0,Ee=m[Xe][1]>=3?1:0,_e=m[Xe][2]>=3?1:0,oe=m[Xe][3]>=3?1:0,Ae=m[Xe][0]>=2?1:0,Be=m[Xe][1]>=2?1:0,ve=m[Xe][2]>=2?1:0,ke=m[Xe][3]>=2?1:0,vt=m[Xe][0]>=1?1:0,ht=m[Xe][1]>=1?1:0,dt=m[Xe][2]>=1?1:0,$e=m[Xe][3]>=1?1:0;const Kt=ue-Ce+x,zt=ge-Ee+x,Bt=le-_e+x,Qe=Me-oe+x,ze=ue-Ae+2*x,Ft=ge-Be+2*x,bn=le-ve+2*x,Fn=Me-ke+2*x,Gt=ue-vt+3*x,Yn=ge-ht+3*x,hr=le-dt+3*x,Fr=Me-$e+3*x,Er=ue-1+4*x,Ii=ge-1+4*x,xi=le-1+4*x,Lr=Me-1+4*x,Qr=z&255,Hi=L&255,To=k&255,lt=H&255,xn=v[Qr+v[Hi+v[To+v[lt]]]]%32,Gn=v[Qr+Ce+v[Hi+Ee+v[To+_e+v[lt+oe]]]]%32,cr=v[Qr+Ae+v[Hi+Be+v[To+ve+v[lt+ke]]]]%32,ni=v[Qr+vt+v[Hi+ht+v[To+dt+v[lt+$e]]]]%32,pi=v[Qr+1+v[Hi+1+v[To+1+v[lt+1]]]]%32;let yi=.6-ue*ue-ge*ge-le*le-Me*Me;yi<0?T=0:(yi*=yi,T=yi*yi*this.dot4(h[xn],ue,ge,le,Me));let fi=.6-Kt*Kt-zt*zt-Bt*Bt-Qe*Qe;fi<0?R=0:(fi*=fi,R=fi*fi*this.dot4(h[Gn],Kt,zt,Bt,Qe));let Tn=.6-ze*ze-Ft*Ft-bn*bn-Fn*Fn;Tn<0?F=0:(Tn*=Tn,F=Tn*Tn*this.dot4(h[cr],ze,Ft,bn,Fn));let so=.6-Gt*Gt-Yn*Yn-hr*hr-Fr*Fr;so<0?U=0:(so*=so,U=so*so*this.dot4(h[ni],Gt,Yn,hr,Fr));let Gl=.6-Er*Er-Ii*Ii-xi*xi-Lr*Lr;return Gl<0?P=0:(Gl*=Gl,P=Gl*Gl*this.dot4(h[pi],Er,Ii,xi,Lr)),27*(T+R+F+U+P)});for(let r=0;r<256;r++)this.p[r]=Math.floor(t.random()*256);for(let r=0;r<512;r++)this.perm[r]=this.p[r&255]}}const Fw=d.forwardRef(({intensity:s=1,decay:t,decayRate:r=.65,maxYaw:l=.1,maxPitch:c=.1,maxRoll:p=.1,yawFrequency:h=.1,pitchFrequency:m=.1,rollFrequency:v=.1},E)=>{const x=(0,_.z)(L=>L.camera),T=(0,_.z)(L=>L.controls),R=d.useRef(s),F=d.useRef(x.rotation.clone()),[U]=d.useState(()=>new UE),[P]=d.useState(()=>new UE),[O]=d.useState(()=>new UE),z=()=>{(R.current<0||R.current>1)&&(R.current=R.current<0?0:1)};return d.useImperativeHandle(E,()=>({getIntensity:()=>R.current,setIntensity:L=>{R.current=L,z()}}),[]),d.useEffect(()=>{if(T){const L=()=>void(F.current=x.rotation.clone());return T.addEventListener("change",L),L(),()=>void T.removeEventListener("change",L)}},[x,T]),(0,_.A)((L,k)=>{const H=Math.pow(R.current,2),X=l*H*U.noise(L.clock.elapsedTime*h,1),W=c*H*P.noise(L.clock.elapsedTime*m,1),J=p*H*O.noise(L.clock.elapsedTime*v,1);x.rotation.set(F.current.x+W,F.current.y+X,F.current.z+J),t&&R.current>0&&(R.current-=r*k,z())}),null}),Ow=d.forwardRef((v,m)=>{var E=v,{children:s,enabled:t=!0,speed:r=1,rotationIntensity:l=1,floatIntensity:c=1,floatingRange:p=[-.1,.1]}=E,h=Cn(E,["children","enabled","speed","rotationIntensity","floatIntensity","floatingRange"]);const x=d.useRef(null),T=d.useRef(Math.random()*1e4);return(0,_.A)(R=>{var F,U;if(!t||r===0)return;const P=T.current+R.clock.getElapsedTime();x.current.rotation.x=Math.cos(P/4*r)/8*l,x.current.rotation.y=Math.sin(P/4*r)/8*l,x.current.rotation.z=Math.sin(P/4*r)/20*l;let O=Math.sin(P/4*r)/10;O=i.MathUtils.mapLinear(O,-.1,.1,(F=p==null?void 0:p[0])!==null&&F!==void 0?F:-.1,(U=p==null?void 0:p[1])!==null&&U!==void 0?U:.1),x.current.position.y=O*c,x.current.updateMatrix()}),d.createElement("group",h,d.createElement("group",{ref:mt([x,m]),matrixAutoUpdate:!1},s))}),Dw=s=>s&&s.isCubeTexture;class Lw extends i.Mesh{constructor(t,r){var l,c;const p=Dw(t),m=((c=p?(l=t.image[0])==null?void 0:l.width:t.image.width)!=null?c:1024)/4,v=Math.floor(Math.log2(m)),E=Math.pow(2,v),x=3*Math.max(E,16*7),T=4*E,R=[p?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/x}`,`#define CUBEUV_TEXEL_HEIGHT ${1/T}`,`#define CUBEUV_MAX_MIP ${v}.0`],F=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,U=R.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <encodings_fragment>
        }
        `,P={map:{value:t},height:{value:(r==null?void 0:r.height)||15},radius:{value:(r==null?void 0:r.radius)||100}},O=new i.IcosahedronGeometry(1,16),z=new i.ShaderMaterial({uniforms:P,fragmentShader:U,vertexShader:F,side:i.DoubleSide});super(O,z)}set radius(t){this.material.uniforms.radius.value=t}get radius(){return this.material.uniforms.radius.value}set height(t){this.material.uniforms.height.value=t}get height(){return this.material.uniforms.height.value}}var FA=A(5108);class Pw extends i.DataTextureLoader{constructor(t){super(t),this.type=i.HalfFloatType}parse(t){const m=function(k,H){switch(k){case 1:FA.error("THREE.RGBELoader Read Error: "+(H||""));break;case 2:FA.error("THREE.RGBELoader Write Error: "+(H||""));break;case 3:FA.error("THREE.RGBELoader Bad File Format: "+(H||""));break;default:case 4:FA.error("THREE.RGBELoader: Error: "+(H||""))}return-1},T=`
`,R=function(k,H,X){H=H||1024;let J=k.pos,Y=-1,ce=0,ue="",ge=String.fromCharCode.apply(null,new Uint16Array(k.subarray(J,J+128)));for(;0>(Y=ge.indexOf(T))&&ce<H&&J<k.byteLength;)ue+=ge,ce+=ge.length,J+=128,ge+=String.fromCharCode.apply(null,new Uint16Array(k.subarray(J,J+128)));return-1<Y?(X!==!1&&(k.pos+=ce+Y+1),ue+ge.slice(0,Y)):!1},F=function(k){const H=/^#\?(\S+)/,X=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,W=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,J=/^\s*FORMAT=(\S+)\s*$/,Y=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,ce={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let ue,ge;if(k.pos>=k.byteLength||!(ue=R(k)))return m(1,"no header found");if(!(ge=ue.match(H)))return m(3,"bad initial token");for(ce.valid|=1,ce.programtype=ge[1],ce.string+=ue+`
`;ue=R(k),ue!==!1;){if(ce.string+=ue+`
`,ue.charAt(0)==="#"){ce.comments+=ue+`
`;continue}if((ge=ue.match(X))&&(ce.gamma=parseFloat(ge[1])),(ge=ue.match(W))&&(ce.exposure=parseFloat(ge[1])),(ge=ue.match(J))&&(ce.valid|=2,ce.format=ge[1]),(ge=ue.match(Y))&&(ce.valid|=4,ce.height=parseInt(ge[1],10),ce.width=parseInt(ge[2],10)),ce.valid&2&&ce.valid&4)break}return ce.valid&2?ce.valid&4?ce:m(3,"missing image size specifier"):m(3,"missing format specifier")},U=function(k,H,X){const W=H;if(W<8||W>32767||k[0]!==2||k[1]!==2||k[2]&128)return new Uint8Array(k);if(W!==(k[2]<<8|k[3]))return m(3,"wrong scanline width");const J=new Uint8Array(4*H*X);if(!J.length)return m(4,"unable to allocate buffer space");let Y=0,ce=0;const ue=4*W,ge=new Uint8Array(4),le=new Uint8Array(ue);let Me=X;for(;Me>0&&ce<k.byteLength;){if(ce+4>k.byteLength)return m(1);if(ge[0]=k[ce++],ge[1]=k[ce++],ge[2]=k[ce++],ge[3]=k[ce++],ge[0]!=2||ge[1]!=2||(ge[2]<<8|ge[3])!=W)return m(3,"bad rgbe scanline format");let me=0,Te;for(;me<ue&&ce<k.byteLength;){Te=k[ce++];const Re=Te>128;if(Re&&(Te-=128),Te===0||me+Te>ue)return m(3,"bad scanline data");if(Re){const Ge=k[ce++];for(let De=0;De<Te;De++)le[me++]=Ge}else le.set(k.subarray(ce,ce+Te),me),me+=Te,ce+=Te}const Ue=W;for(let Re=0;Re<Ue;Re++){let Ge=0;J[Y]=le[Re+Ge],Ge+=W,J[Y+1]=le[Re+Ge],Ge+=W,J[Y+2]=le[Re+Ge],Ge+=W,J[Y+3]=le[Re+Ge],Y+=4}Me--}return J},P=function(k,H,X,W){const J=k[H+3],Y=Math.pow(2,J-128)/255;X[W+0]=k[H+0]*Y,X[W+1]=k[H+1]*Y,X[W+2]=k[H+2]*Y,X[W+3]=1},O=function(k,H,X,W){const J=k[H+3],Y=Math.pow(2,J-128)/255;X[W+0]=i.DataUtils.toHalfFloat(Math.min(k[H+0]*Y,65504)),X[W+1]=i.DataUtils.toHalfFloat(Math.min(k[H+1]*Y,65504)),X[W+2]=i.DataUtils.toHalfFloat(Math.min(k[H+2]*Y,65504)),X[W+3]=i.DataUtils.toHalfFloat(1)},z=new Uint8Array(t);z.pos=0;const L=F(z);if(L!==-1){const k=L.width,H=L.height,X=U(z.subarray(z.pos),k,H);if(X!==-1){let W,J,Y;switch(this.type){case i.FloatType:Y=X.length/4;const ce=new Float32Array(Y*4);for(let ge=0;ge<Y;ge++)P(X,ge*4,ce,ge*4);W=ce,J=i.FloatType;break;case i.HalfFloatType:Y=X.length/4;const ue=new Uint16Array(Y*4);for(let ge=0;ge<Y;ge++)O(X,ge*4,ue,ge*4);W=ue,J=i.HalfFloatType;break;default:FA.error("THREE.RGBELoader: unsupported type: ",this.type);break}return{width:k,height:H,data:W,header:L.string,gamma:L.gamma,exposure:L.exposure,type:J}}}return null}setDataType(t){return this.type=t,this}load(t,r,l,c){function p(h,m){switch(h.type){case i.FloatType:case i.HalfFloatType:"colorSpace"in h?h.colorSpace="srgb-linear":h.encoding=3e3,h.minFilter=i.LinearFilter,h.magFilter=i.LinearFilter,h.generateMipmaps=!1,h.flipY=!0;break}r&&r(h,m)}return super.load(t,p,l,c)}}var NE=A(5108);const OA="colorSpace"in new i.Texture;class kw extends i.DataTextureLoader{constructor(t){super(t),this.type=i.HalfFloatType}parse(t){const ce=Math.pow(2.7182818,2.2);function ue(ye,Ie){for(var it=0,jt=0;jt<65536;++jt)(jt==0||ye[jt>>3]&1<<(jt&7))&&(Ie[it++]=jt);for(var $t=it-1;it<65536;)Ie[it++]=0;return $t}function ge(ye){for(var Ie=0;Ie<16384;Ie++)ye[Ie]={},ye[Ie].len=0,ye[Ie].lit=0,ye[Ie].p=null}const le={l:0,c:0,lc:0};function Me(ye,Ie,it,jt,$t){for(;it<ye;)Ie=Ie<<8|cr(jt,$t),it+=8;it-=ye,le.l=Ie>>it&(1<<ye)-1,le.c=Ie,le.lc=it}const me=new Array(59);function Te(ye){for(var Ie=0;Ie<=58;++Ie)me[Ie]=0;for(var Ie=0;Ie<65537;++Ie)me[ye[Ie]]+=1;for(var it=0,Ie=58;Ie>0;--Ie){var jt=it+me[Ie]>>1;me[Ie]=it,it=jt}for(var Ie=0;Ie<65537;++Ie){var $t=ye[Ie];$t>0&&(ye[Ie]=$t|me[$t]++<<6)}}function Ue(ye,Ie,it,jt,$t,tn,Jn){for(var Dn=it,er=0,nr=0;$t<=tn;$t++){if(Dn.value-it.value>jt)return!1;Me(6,er,nr,ye,Dn);var ar=le.l;if(er=le.c,nr=le.lc,Jn[$t]=ar,ar==63){if(Dn.value-it.value>jt)throw"Something wrong with hufUnpackEncTable";Me(8,er,nr,ye,Dn);var Yt=le.l+6;if(er=le.c,nr=le.lc,$t+Yt>tn+1)throw"Something wrong with hufUnpackEncTable";for(;Yt--;)Jn[$t++]=0;$t--}else if(ar>=59){var Yt=ar-59+2;if($t+Yt>tn+1)throw"Something wrong with hufUnpackEncTable";for(;Yt--;)Jn[$t++]=0;$t--}}Te(Jn)}function Re(ye){return ye&63}function Ge(ye){return ye>>6}function De(ye,Ie,it,jt){for(;Ie<=it;Ie++){var $t=Ge(ye[Ie]),tn=Re(ye[Ie]);if($t>>tn)throw"Invalid table entry";if(tn>14){var Jn=jt[$t>>tn-14];if(Jn.len)throw"Invalid table entry";if(Jn.lit++,Jn.p){var Dn=Jn.p;Jn.p=new Array(Jn.lit);for(var er=0;er<Jn.lit-1;++er)Jn.p[er]=Dn[er]}else Jn.p=new Array(1);Jn.p[Jn.lit-1]=Ie}else if(tn)for(var nr=0,er=1<<14-tn;er>0;er--){var Jn=jt[($t<<14-tn)+nr];if(Jn.len||Jn.p)throw"Invalid table entry";Jn.len=tn,Jn.lit=Ie,nr++}}return!0}const Xe={c:0,lc:0};function Ce(ye,Ie,it,jt){ye=ye<<8|cr(it,jt),Ie+=8,Xe.c=ye,Xe.lc=Ie}const Ee={c:0,lc:0};function _e(ye,Ie,it,jt,$t,tn,Jn,Dn,er,nr){if(ye==Ie){jt<8&&(Ce(it,jt,$t,Jn),it=Xe.c,jt=Xe.lc),jt-=8;var ar=it>>jt,ar=new Uint8Array([ar])[0];if(er.value+ar>nr)return!1;for(var Yt=Dn[er.value-1];ar-- >0;)Dn[er.value++]=Yt}else if(er.value<nr)Dn[er.value++]=ye;else return!1;Ee.c=it,Ee.lc=jt}function oe(ye){return ye&65535}function Ae(ye){var Ie=oe(ye);return Ie>32767?Ie-65536:Ie}const Be={a:0,b:0};function ve(ye,Ie){var it=Ae(ye),jt=Ae(Ie),$t=jt,tn=it+($t&1)+($t>>1),Jn=tn,Dn=tn-$t;Be.a=Jn,Be.b=Dn}function ke(ye,Ie){var it=oe(ye),jt=oe(Ie),$t=it-(jt>>1)&65535,tn=jt+$t-32768&65535;Be.a=tn,Be.b=$t}function vt(ye,Ie,it,jt,$t,tn,Jn){for(var Dn=Jn<16384,er=it>$t?$t:it,nr=1,ar;nr<=er;)nr<<=1;for(nr>>=1,ar=nr,nr>>=1;nr>=1;){for(var Yt=0,Jo=Yt+tn*($t-ar),Yr=tn*nr,Jr=tn*ar,Fi=jt*nr,Wi=jt*ar,Ro,Po,ma,Pa;Yt<=Jo;Yt+=Jr){for(var Zo=Yt,Yc=Yt+jt*(it-ar);Zo<=Yc;Zo+=Wi){var rs=Zo+Fi,zs=Zo+Yr,yp=zs+Fi;Dn?(ve(ye[Zo+Ie],ye[zs+Ie]),Ro=Be.a,ma=Be.b,ve(ye[rs+Ie],ye[yp+Ie]),Po=Be.a,Pa=Be.b,ve(Ro,Po),ye[Zo+Ie]=Be.a,ye[rs+Ie]=Be.b,ve(ma,Pa),ye[zs+Ie]=Be.a,ye[yp+Ie]=Be.b):(ke(ye[Zo+Ie],ye[zs+Ie]),Ro=Be.a,ma=Be.b,ke(ye[rs+Ie],ye[yp+Ie]),Po=Be.a,Pa=Be.b,ke(Ro,Po),ye[Zo+Ie]=Be.a,ye[rs+Ie]=Be.b,ke(ma,Pa),ye[zs+Ie]=Be.a,ye[yp+Ie]=Be.b)}if(it&nr){var zs=Zo+Yr;Dn?ve(ye[Zo+Ie],ye[zs+Ie]):ke(ye[Zo+Ie],ye[zs+Ie]),Ro=Be.a,ye[zs+Ie]=Be.b,ye[Zo+Ie]=Ro}}if($t&nr)for(var Zo=Yt,Yc=Yt+jt*(it-ar);Zo<=Yc;Zo+=Wi){var rs=Zo+Fi;Dn?ve(ye[Zo+Ie],ye[rs+Ie]):ke(ye[Zo+Ie],ye[rs+Ie]),Ro=Be.a,ye[rs+Ie]=Be.b,ye[Zo+Ie]=Ro}ar=nr,nr>>=1}return Yt}function ht(ye,Ie,it,jt,$t,tn,Jn,Dn,er,nr){for(var ar=0,Yt=0,Jo=Dn,Yr=Math.trunc($t.value+(tn+7)/8);$t.value<Yr;)for(Ce(ar,Yt,it,$t),ar=Xe.c,Yt=Xe.lc;Yt>=14;){var Jr=ar>>Yt-14&16383,Fi=Ie[Jr];if(Fi.len)Yt-=Fi.len,_e(Fi.lit,Jn,ar,Yt,it,jt,$t,er,nr,Jo),ar=Ee.c,Yt=Ee.lc;else{if(!Fi.p)throw"hufDecode issues";var Wi;for(Wi=0;Wi<Fi.lit;Wi++){for(var Ro=Re(ye[Fi.p[Wi]]);Yt<Ro&&$t.value<Yr;)Ce(ar,Yt,it,$t),ar=Xe.c,Yt=Xe.lc;if(Yt>=Ro&&Ge(ye[Fi.p[Wi]])==(ar>>Yt-Ro&(1<<Ro)-1)){Yt-=Ro,_e(Fi.p[Wi],Jn,ar,Yt,it,jt,$t,er,nr,Jo),ar=Ee.c,Yt=Ee.lc;break}}if(Wi==Fi.lit)throw"hufDecode issues"}}var Po=8-tn&7;for(ar>>=Po,Yt-=Po;Yt>0;){var Fi=Ie[ar<<14-Yt&16383];if(Fi.len)Yt-=Fi.len,_e(Fi.lit,Jn,ar,Yt,it,jt,$t,er,nr,Jo),ar=Ee.c,Yt=Ee.lc;else throw"hufDecode issues"}return!0}function dt(ye,Ie,it,jt,$t,tn){var Jn={value:0},Dn=it.value,er=Gn(Ie,it),nr=Gn(Ie,it);it.value+=4;var ar=Gn(Ie,it);if(it.value+=4,er<0||er>=65537||nr<0||nr>=65537)throw"Something wrong with HUF_ENCSIZE";var Yt=new Array(65537),Jo=new Array(16384);ge(Jo);var Yr=jt-(it.value-Dn);if(Ue(ye,Ie,it,Yr,er,nr,Yt),ar>8*(jt-(it.value-Dn)))throw"Something wrong with hufUncompress";De(Yt,er,nr,Jo),ht(Yt,Jo,ye,Ie,it,ar,nr,tn,$t,Jn)}function $e(ye,Ie,it){for(var jt=0;jt<it;++jt)Ie[jt]=ye[Ie[jt]]}function Kt(ye){for(var Ie=1;Ie<ye.length;Ie++){var it=ye[Ie-1]+ye[Ie]-128;ye[Ie]=it}}function zt(ye,Ie){for(var it=0,jt=Math.floor((ye.length+1)/2),$t=0,tn=ye.length-1;!($t>tn||(Ie[$t++]=ye[it++],$t>tn));)Ie[$t++]=ye[jt++]}function Bt(ye){for(var Ie=ye.byteLength,it=new Array,jt=0,$t=new DataView(ye);Ie>0;){var tn=$t.getInt8(jt++);if(tn<0){var Jn=-tn;Ie-=Jn+1;for(var Dn=0;Dn<Jn;Dn++)it.push($t.getUint8(jt++))}else{var Jn=tn;Ie-=2;for(var er=$t.getUint8(jt++),Dn=0;Dn<Jn+1;Dn++)it.push(er)}}return it}function Qe(ye,Ie,it,jt,$t,tn){var rs=new DataView(tn.buffer),Jn=it[ye.idx[0]].width,Dn=it[ye.idx[0]].height,er=3,nr=Math.floor(Jn/8),ar=Math.ceil(Jn/8),Yt=Math.ceil(Dn/8),Jo=Jn-(ar-1)*8,Yr=Dn-(Yt-1)*8,Jr={value:0},Fi=new Array(er),Wi=new Array(er),Ro=new Array(er),Po=new Array(er),ma=new Array(er);for(let ko=0;ko<er;++ko)ma[ko]=Ie[ye.idx[ko]],Fi[ko]=ko<1?0:Fi[ko-1]+ar*Yt,Wi[ko]=new Float32Array(64),Ro[ko]=new Uint16Array(64),Po[ko]=new Uint16Array(ar*64);for(let ko=0;ko<Yt;++ko){var Pa=8;ko==Yt-1&&(Pa=Yr);var Zo=8;for(let Ho=0;Ho<ar;++Ho){Ho==ar-1&&(Zo=Jo);for(let zo=0;zo<er;++zo)Ro[zo].fill(0),Ro[zo][0]=$t[Fi[zo]++],ze(Jr,jt,Ro[zo]),Ft(Ro[zo],Wi[zo]),bn(Wi[zo]);er==3&&Fn(Wi);for(let zo=0;zo<er;++zo)Gt(Wi[zo],Po[zo],Ho*64)}let ka=0;for(let Ho=0;Ho<er;++Ho){const zo=it[ye.idx[Ho]].type;for(let Ul=8*ko;Ul<8*ko+Pa;++Ul){ka=ma[Ho][Ul];for(let qp=0;qp<nr;++qp){const rl=qp*64+(Ul&7)*8;rs.setUint16(ka+0*2*zo,Po[Ho][rl+0],!0),rs.setUint16(ka+1*2*zo,Po[Ho][rl+1],!0),rs.setUint16(ka+2*2*zo,Po[Ho][rl+2],!0),rs.setUint16(ka+3*2*zo,Po[Ho][rl+3],!0),rs.setUint16(ka+4*2*zo,Po[Ho][rl+4],!0),rs.setUint16(ka+5*2*zo,Po[Ho][rl+5],!0),rs.setUint16(ka+6*2*zo,Po[Ho][rl+6],!0),rs.setUint16(ka+7*2*zo,Po[Ho][rl+7],!0),ka+=8*2*zo}}if(nr!=ar)for(let Ul=8*ko;Ul<8*ko+Pa;++Ul){const qp=ma[Ho][Ul]+8*nr*2*zo,rl=nr*64+(Ul&7)*8;for(let Gu=0;Gu<Zo;++Gu)rs.setUint16(qp+Gu*2*zo,Po[Ho][rl+Gu],!0)}}}for(var Yc=new Uint16Array(Jn),rs=new DataView(tn.buffer),zs=0;zs<er;++zs){it[ye.idx[zs]].decoded=!0;var yp=it[ye.idx[zs]].type;if(it[zs].type==2)for(var Zp=0;Zp<Dn;++Zp){const ko=ma[zs][Zp];for(var oc=0;oc<Jn;++oc)Yc[oc]=rs.getUint16(ko+oc*2*yp,!0);for(var oc=0;oc<Jn;++oc)rs.setFloat32(ko+oc*2*yp,Tn(Yc[oc]),!0)}}}function ze(ye,Ie,it){for(var jt,$t=1;$t<64;)jt=Ie[ye.value],jt==65280?$t=64:jt>>8==255?$t+=jt&255:(it[$t]=jt,$t++),ye.value++}function Ft(ye,Ie){Ie[0]=Tn(ye[0]),Ie[1]=Tn(ye[1]),Ie[2]=Tn(ye[5]),Ie[3]=Tn(ye[6]),Ie[4]=Tn(ye[14]),Ie[5]=Tn(ye[15]),Ie[6]=Tn(ye[27]),Ie[7]=Tn(ye[28]),Ie[8]=Tn(ye[2]),Ie[9]=Tn(ye[4]),Ie[10]=Tn(ye[7]),Ie[11]=Tn(ye[13]),Ie[12]=Tn(ye[16]),Ie[13]=Tn(ye[26]),Ie[14]=Tn(ye[29]),Ie[15]=Tn(ye[42]),Ie[16]=Tn(ye[3]),Ie[17]=Tn(ye[8]),Ie[18]=Tn(ye[12]),Ie[19]=Tn(ye[17]),Ie[20]=Tn(ye[25]),Ie[21]=Tn(ye[30]),Ie[22]=Tn(ye[41]),Ie[23]=Tn(ye[43]),Ie[24]=Tn(ye[9]),Ie[25]=Tn(ye[11]),Ie[26]=Tn(ye[18]),Ie[27]=Tn(ye[24]),Ie[28]=Tn(ye[31]),Ie[29]=Tn(ye[40]),Ie[30]=Tn(ye[44]),Ie[31]=Tn(ye[53]),Ie[32]=Tn(ye[10]),Ie[33]=Tn(ye[19]),Ie[34]=Tn(ye[23]),Ie[35]=Tn(ye[32]),Ie[36]=Tn(ye[39]),Ie[37]=Tn(ye[45]),Ie[38]=Tn(ye[52]),Ie[39]=Tn(ye[54]),Ie[40]=Tn(ye[20]),Ie[41]=Tn(ye[22]),Ie[42]=Tn(ye[33]),Ie[43]=Tn(ye[38]),Ie[44]=Tn(ye[46]),Ie[45]=Tn(ye[51]),Ie[46]=Tn(ye[55]),Ie[47]=Tn(ye[60]),Ie[48]=Tn(ye[21]),Ie[49]=Tn(ye[34]),Ie[50]=Tn(ye[37]),Ie[51]=Tn(ye[47]),Ie[52]=Tn(ye[50]),Ie[53]=Tn(ye[56]),Ie[54]=Tn(ye[59]),Ie[55]=Tn(ye[61]),Ie[56]=Tn(ye[35]),Ie[57]=Tn(ye[36]),Ie[58]=Tn(ye[48]),Ie[59]=Tn(ye[49]),Ie[60]=Tn(ye[57]),Ie[61]=Tn(ye[58]),Ie[62]=Tn(ye[62]),Ie[63]=Tn(ye[63])}function bn(ye){const Ie=.5*Math.cos(.7853975),it=.5*Math.cos(3.14159/16),jt=.5*Math.cos(3.14159/8),$t=.5*Math.cos(3*3.14159/16),tn=.5*Math.cos(5*3.14159/16),Jn=.5*Math.cos(3*3.14159/8),Dn=.5*Math.cos(7*3.14159/16);for(var er=new Array(4),nr=new Array(4),ar=new Array(4),Yt=new Array(4),Jo=0;Jo<8;++Jo){var Yr=Jo*8;er[0]=jt*ye[Yr+2],er[1]=Jn*ye[Yr+2],er[2]=jt*ye[Yr+6],er[3]=Jn*ye[Yr+6],nr[0]=it*ye[Yr+1]+$t*ye[Yr+3]+tn*ye[Yr+5]+Dn*ye[Yr+7],nr[1]=$t*ye[Yr+1]-Dn*ye[Yr+3]-it*ye[Yr+5]-tn*ye[Yr+7],nr[2]=tn*ye[Yr+1]-it*ye[Yr+3]+Dn*ye[Yr+5]+$t*ye[Yr+7],nr[3]=Dn*ye[Yr+1]-tn*ye[Yr+3]+$t*ye[Yr+5]-it*ye[Yr+7],ar[0]=Ie*(ye[Yr+0]+ye[Yr+4]),ar[3]=Ie*(ye[Yr+0]-ye[Yr+4]),ar[1]=er[0]+er[3],ar[2]=er[1]-er[2],Yt[0]=ar[0]+ar[1],Yt[1]=ar[3]+ar[2],Yt[2]=ar[3]-ar[2],Yt[3]=ar[0]-ar[1],ye[Yr+0]=Yt[0]+nr[0],ye[Yr+1]=Yt[1]+nr[1],ye[Yr+2]=Yt[2]+nr[2],ye[Yr+3]=Yt[3]+nr[3],ye[Yr+4]=Yt[3]-nr[3],ye[Yr+5]=Yt[2]-nr[2],ye[Yr+6]=Yt[1]-nr[1],ye[Yr+7]=Yt[0]-nr[0]}for(var Jr=0;Jr<8;++Jr)er[0]=jt*ye[16+Jr],er[1]=Jn*ye[16+Jr],er[2]=jt*ye[48+Jr],er[3]=Jn*ye[48+Jr],nr[0]=it*ye[8+Jr]+$t*ye[24+Jr]+tn*ye[40+Jr]+Dn*ye[56+Jr],nr[1]=$t*ye[8+Jr]-Dn*ye[24+Jr]-it*ye[40+Jr]-tn*ye[56+Jr],nr[2]=tn*ye[8+Jr]-it*ye[24+Jr]+Dn*ye[40+Jr]+$t*ye[56+Jr],nr[3]=Dn*ye[8+Jr]-tn*ye[24+Jr]+$t*ye[40+Jr]-it*ye[56+Jr],ar[0]=Ie*(ye[Jr]+ye[32+Jr]),ar[3]=Ie*(ye[Jr]-ye[32+Jr]),ar[1]=er[0]+er[3],ar[2]=er[1]-er[2],Yt[0]=ar[0]+ar[1],Yt[1]=ar[3]+ar[2],Yt[2]=ar[3]-ar[2],Yt[3]=ar[0]-ar[1],ye[0+Jr]=Yt[0]+nr[0],ye[8+Jr]=Yt[1]+nr[1],ye[16+Jr]=Yt[2]+nr[2],ye[24+Jr]=Yt[3]+nr[3],ye[32+Jr]=Yt[3]-nr[3],ye[40+Jr]=Yt[2]-nr[2],ye[48+Jr]=Yt[1]-nr[1],ye[56+Jr]=Yt[0]-nr[0]}function Fn(ye){for(var Ie=0;Ie<64;++Ie){var it=ye[0][Ie],jt=ye[1][Ie],$t=ye[2][Ie];ye[0][Ie]=it+1.5747*$t,ye[1][Ie]=it-.1873*jt-.4682*$t,ye[2][Ie]=it+1.8556*jt}}function Gt(ye,Ie,it){for(var jt=0;jt<64;++jt)Ie[it+jt]=i.DataUtils.toHalfFloat(Yn(ye[jt]))}function Yn(ye){return ye<=1?Math.sign(ye)*Math.pow(Math.abs(ye),2.2):Math.sign(ye)*Math.pow(ce,Math.abs(ye)-1)}function hr(ye){return new DataView(ye.array.buffer,ye.offset.value,ye.size)}function Fr(ye){var Ie=ye.viewer.buffer.slice(ye.offset.value,ye.offset.value+ye.size),it=new Uint8Array(Bt(Ie)),jt=new Uint8Array(it.length);return Kt(it),zt(it,jt),new DataView(jt.buffer)}function Er(ye){var Ie=ye.array.slice(ye.offset.value,ye.offset.value+ye.size),it=Zf(Ie),jt=new Uint8Array(it.length);return Kt(it),zt(it,jt),new DataView(jt.buffer)}function Ii(ye){for(var Ie=ye.viewer,it={value:ye.offset.value},jt=new Uint16Array(ye.width*ye.scanlineBlockSize*(ye.channels*ye.type)),$t=new Uint8Array(8192),tn=0,Jn=new Array(ye.channels),Dn=0;Dn<ye.channels;Dn++)Jn[Dn]={},Jn[Dn].start=tn,Jn[Dn].end=Jn[Dn].start,Jn[Dn].nx=ye.width,Jn[Dn].ny=ye.lines,Jn[Dn].size=ye.type,tn+=Jn[Dn].nx*Jn[Dn].ny*Jn[Dn].size;var er=so(Ie,it),nr=so(Ie,it);if(nr>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(er<=nr)for(var Dn=0;Dn<nr-er+1;Dn++)$t[Dn+er]=ni(Ie,it);var ar=new Uint16Array(65536),Yt=ue($t,ar),Jo=Gn(Ie,it);dt(ye.array,Ie,it,Jo,jt,tn);for(var Dn=0;Dn<ye.channels;++Dn)for(var Yr=Jn[Dn],Jr=0;Jr<Jn[Dn].size;++Jr)vt(jt,Yr.start+Jr,Yr.nx,Yr.size,Yr.ny,Yr.nx*Yr.size,Yt);$e(ar,jt,tn);for(var Fi=0,Wi=new Uint8Array(jt.buffer.byteLength),Ro=0;Ro<ye.lines;Ro++)for(var Po=0;Po<ye.channels;Po++){var Yr=Jn[Po],ma=Yr.nx*Yr.size,Pa=new Uint8Array(jt.buffer,Yr.end*2,ma*2);Wi.set(Pa,Fi),Fi+=ma*2,Yr.end+=ma}return new DataView(Wi.buffer)}function xi(ye){var Ie=ye.array.slice(ye.offset.value,ye.offset.value+ye.size),it=Zf(Ie);const jt=ye.lines*ye.channels*ye.width,$t=ye.type==1?new Uint16Array(jt):new Uint32Array(jt);let tn=0,Jn=0;const Dn=new Array(4);for(let er=0;er<ye.lines;er++)for(let nr=0;nr<ye.channels;nr++){let ar=0;switch(ye.type){case 1:Dn[0]=tn,Dn[1]=Dn[0]+ye.width,tn=Dn[1]+ye.width;for(let Yt=0;Yt<ye.width;++Yt){const Jo=it[Dn[0]++]<<8|it[Dn[1]++];ar+=Jo,$t[Jn]=ar,Jn++}break;case 2:Dn[0]=tn,Dn[1]=Dn[0]+ye.width,Dn[2]=Dn[1]+ye.width,tn=Dn[2]+ye.width;for(let Yt=0;Yt<ye.width;++Yt){const Jo=it[Dn[0]++]<<24|it[Dn[1]++]<<16|it[Dn[2]++]<<8;ar+=Jo,$t[Jn]=ar,Jn++}break}}return new DataView($t.buffer)}function Lr(ye){var Ie=ye.viewer,it={value:ye.offset.value},jt=new Uint8Array(ye.width*ye.lines*(ye.channels*ye.type*2)),$t={version:pi(Ie,it),unknownUncompressedSize:pi(Ie,it),unknownCompressedSize:pi(Ie,it),acCompressedSize:pi(Ie,it),dcCompressedSize:pi(Ie,it),rleCompressedSize:pi(Ie,it),rleUncompressedSize:pi(Ie,it),rleRawSize:pi(Ie,it),totalAcUncompressedCount:pi(Ie,it),totalDcUncompressedCount:pi(Ie,it),acCompression:pi(Ie,it)};if($t.version<2)throw"EXRLoader.parse: "+ga.compression+" version "+$t.version+" is unsupported";for(var tn=new Array,Jn=so(Ie,it)-2;Jn>0;){var Dn=Qr(Ie.buffer,it),er=ni(Ie,it),nr=er>>2&3,ar=(er>>4)-1,Yt=new Int8Array([ar])[0],Jo=ni(Ie,it);tn.push({name:Dn,index:Yt,type:Jo,compression:nr}),Jn-=Dn.length+3}for(var Yr=ga.channels,Jr=new Array(ye.channels),Fi=0;Fi<ye.channels;++Fi){var Wi=Jr[Fi]={},Ro=Yr[Fi];Wi.name=Ro.name,Wi.compression=0,Wi.decoded=!1,Wi.type=Ro.pixelType,Wi.pLinear=Ro.pLinear,Wi.width=ye.width,Wi.height=ye.lines}for(var Po={idx:new Array(3)},ma=0;ma<ye.channels;++ma)for(var Wi=Jr[ma],Fi=0;Fi<tn.length;++Fi){var Pa=tn[Fi];Wi.name==Pa.name&&(Wi.compression=Pa.compression,Pa.index>=0&&(Po.idx[Pa.index]=ma),Wi.offset=ma)}if($t.acCompressedSize>0)switch($t.acCompression){case 0:var rs=new Uint16Array($t.totalAcUncompressedCount);dt(ye.array,Ie,it,$t.acCompressedSize,rs,$t.totalAcUncompressedCount);break;case 1:var Zo=ye.array.slice(it.value,it.value+$t.totalAcUncompressedCount),Yc=Zf(Zo),rs=new Uint16Array(Yc.buffer);it.value+=$t.totalAcUncompressedCount;break}if($t.dcCompressedSize>0){var zs={array:ye.array,offset:it,size:$t.dcCompressedSize},yp=new Uint16Array(Er(zs).buffer);it.value+=$t.dcCompressedSize}if($t.rleRawSize>0){var Zo=ye.array.slice(it.value,it.value+$t.rleCompressedSize),Yc=Zf(Zo),Zp=Bt(Yc.buffer);it.value+=$t.rleCompressedSize}for(var oc=0,ko=new Array(Jr.length),Fi=0;Fi<ko.length;++Fi)ko[Fi]=new Array;for(var ka=0;ka<ye.lines;++ka)for(var Ho=0;Ho<Jr.length;++Ho)ko[Ho].push(oc),oc+=Jr[Ho].width*ye.type*2;Qe(Po,ko,Jr,rs,yp,jt);for(var Fi=0;Fi<Jr.length;++Fi){var Wi=Jr[Fi];if(!Wi.decoded)switch(Wi.compression){case 2:for(var zo=0,Ul=0,ka=0;ka<ye.lines;++ka){for(var qp=ko[Fi][zo],rl=0;rl<Wi.width;++rl){for(var Gu=0;Gu<2*Wi.type;++Gu)jt[qp++]=Zp[Ul+Gu*Wi.width*Wi.height];Ul++}zo++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(jt.buffer)}function Qr(ye,Ie){for(var it=new Uint8Array(ye),jt=0;it[Ie.value+jt]!=0;)jt+=1;var $t=new TextDecoder().decode(it.slice(Ie.value,Ie.value+jt));return Ie.value=Ie.value+jt+1,$t}function Hi(ye,Ie,it){var jt=new TextDecoder().decode(new Uint8Array(ye).slice(Ie.value,Ie.value+it));return Ie.value=Ie.value+it,jt}function To(ye,Ie){var it=xn(ye,Ie),jt=Gn(ye,Ie);return[it,jt]}function lt(ye,Ie){var it=Gn(ye,Ie),jt=Gn(ye,Ie);return[it,jt]}function xn(ye,Ie){var it=ye.getInt32(Ie.value,!0);return Ie.value=Ie.value+4,it}function Gn(ye,Ie){var it=ye.getUint32(Ie.value,!0);return Ie.value=Ie.value+4,it}function cr(ye,Ie){var it=ye[Ie.value];return Ie.value=Ie.value+1,it}function ni(ye,Ie){var it=ye.getUint8(Ie.value);return Ie.value=Ie.value+1,it}const pi=function(ye,Ie){let it;return"getBigInt64"in DataView.prototype?it=Number(ye.getBigInt64(Ie.value,!0)):it=ye.getUint32(Ie.value+4,!0)+Number(ye.getUint32(Ie.value,!0)<<32),Ie.value+=8,it};function yi(ye,Ie){var it=ye.getFloat32(Ie.value,!0);return Ie.value+=4,it}function fi(ye,Ie){return i.DataUtils.toHalfFloat(yi(ye,Ie))}function Tn(ye){var Ie=(ye&31744)>>10,it=ye&1023;return(ye>>15?-1:1)*(Ie?Ie===31?it?NaN:1/0:Math.pow(2,Ie-15)*(1+it/1024):6103515625e-14*(it/1024))}function so(ye,Ie){var it=ye.getUint16(Ie.value,!0);return Ie.value+=2,it}function Gl(ye,Ie){return Tn(so(ye,Ie))}function zh(ye,Ie,it,jt){for(var $t=it.value,tn=[];it.value<$t+jt-1;){var Jn=Qr(Ie,it),Dn=xn(ye,it),er=ni(ye,it);it.value+=3;var nr=xn(ye,it),ar=xn(ye,it);tn.push({name:Jn,pixelType:Dn,pLinear:er,xSampling:nr,ySampling:ar})}return it.value+=1,tn}function Nd(ye,Ie){var it=yi(ye,Ie),jt=yi(ye,Ie),$t=yi(ye,Ie),tn=yi(ye,Ie),Jn=yi(ye,Ie),Dn=yi(ye,Ie),er=yi(ye,Ie),nr=yi(ye,Ie);return{redX:it,redY:jt,greenX:$t,greenY:tn,blueX:Jn,blueY:Dn,whiteX:er,whiteY:nr}}function Xc(ye,Ie){var it=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],jt=ni(ye,Ie);return it[jt]}function Fc(ye,Ie){var it=Gn(ye,Ie),jt=Gn(ye,Ie),$t=Gn(ye,Ie),tn=Gn(ye,Ie);return{xMin:it,yMin:jt,xMax:$t,yMax:tn}}function Ps(ye,Ie){var it=["INCREASING_Y"],jt=ni(ye,Ie);return it[jt]}function Rm(ye,Ie){var it=yi(ye,Ie),jt=yi(ye,Ie);return[it,jt]}function ea(ye,Ie){var it=yi(ye,Ie),jt=yi(ye,Ie),$t=yi(ye,Ie);return[it,jt,$t]}function ks(ye,Ie,it,jt,$t){if(jt==="string"||jt==="stringvector"||jt==="iccProfile")return Hi(Ie,it,$t);if(jt==="chlist")return zh(ye,Ie,it,$t);if(jt==="chromaticities")return Nd(ye,it);if(jt==="compression")return Xc(ye,it);if(jt==="box2i")return Fc(ye,it);if(jt==="lineOrder")return Ps(ye,it);if(jt==="float")return yi(ye,it);if(jt==="v2f")return Rm(ye,it);if(jt==="v3f")return ea(ye,it);if(jt==="int")return xn(ye,it);if(jt==="rational")return To(ye,it);if(jt==="timecode")return lt(ye,it);if(jt==="preview")return it.value+=$t,"skipped";it.value+=$t}function Ap(ye,Ie,it){const jt={};if(ye.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";jt.version=ye.getUint8(4);const $t=ye.getUint8(5);jt.spec={singleTile:!!($t&2),longName:!!($t&4),deepFormat:!!($t&8),multiPart:!!($t&16)},it.value=8;for(var tn=!0;tn;){var Jn=Qr(Ie,it);if(Jn==0)tn=!1;else{var Dn=Qr(Ie,it),er=Gn(ye,it),nr=ks(ye,Ie,it,Dn,er);nr===void 0?NE.warn(`EXRLoader.parse: skipped unknown header attribute type '${Dn}'.`):jt[Jn]=nr}}if($t!=0)throw NE.error("EXRHeader:",jt),"THREE.EXRLoader: provided file is currently unsupported.";return jt}function Oc(ye,Ie,it,jt,$t){const tn={size:0,viewer:Ie,array:it,offset:jt,width:ye.dataWindow.xMax-ye.dataWindow.xMin+1,height:ye.dataWindow.yMax-ye.dataWindow.yMin+1,channels:ye.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:ye.channels[0].pixelType,uncompress:null,getter:null,format:null,[OA?"colorSpace":"encoding"]:null};switch(ye.compression){case"NO_COMPRESSION":tn.lines=1,tn.uncompress=hr;break;case"RLE_COMPRESSION":tn.lines=1,tn.uncompress=Fr;break;case"ZIPS_COMPRESSION":tn.lines=1,tn.uncompress=Er;break;case"ZIP_COMPRESSION":tn.lines=16,tn.uncompress=Er;break;case"PIZ_COMPRESSION":tn.lines=32,tn.uncompress=Ii;break;case"PXR24_COMPRESSION":tn.lines=16,tn.uncompress=xi;break;case"DWAA_COMPRESSION":tn.lines=32,tn.uncompress=Lr;break;case"DWAB_COMPRESSION":tn.lines=256,tn.uncompress=Lr;break;default:throw"EXRLoader.parse: "+ye.compression+" is unsupported"}if(tn.scanlineBlockSize=tn.lines,tn.type==1)switch($t){case i.FloatType:tn.getter=Gl,tn.inputSize=2;break;case i.HalfFloatType:tn.getter=so,tn.inputSize=2;break}else if(tn.type==2)switch($t){case i.FloatType:tn.getter=yi,tn.inputSize=4;break;case i.HalfFloatType:tn.getter=fi,tn.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+tn.type+" for "+ye.compression+".";tn.blockCount=(ye.dataWindow.yMax+1)/tn.scanlineBlockSize;for(var Jn=0;Jn<tn.blockCount;Jn++)pi(Ie,jt);tn.outputChannels=tn.channels==3?4:tn.channels;const Dn=tn.width*tn.height*tn.outputChannels;switch($t){case i.FloatType:tn.byteArray=new Float32Array(Dn),tn.channels<tn.outputChannels&&tn.byteArray.fill(1,0,Dn);break;case i.HalfFloatType:tn.byteArray=new Uint16Array(Dn),tn.channels<tn.outputChannels&&tn.byteArray.fill(15360,0,Dn);break;default:NE.error("THREE.EXRLoader: unsupported type: ",$t);break}return tn.bytesPerLine=tn.width*tn.inputSize*tn.channels,tn.outputChannels==4?tn.format=i.RGBAFormat:tn.format=i.RedFormat,OA?tn.colorSpace="srgb-linear":tn.encoding=3e3,tn}const Bo=new DataView(t),nl=new Uint8Array(t),vl={value:0},ga=Ap(Bo,t,vl),ii=Oc(ga,Bo,nl,vl,this.type),_l={value:0},jd={R:0,G:1,B:2,A:3,Y:0};for(let ye=0;ye<ii.height/ii.scanlineBlockSize;ye++){const Ie=Gn(Bo,vl);ii.size=Gn(Bo,vl),ii.lines=Ie+ii.scanlineBlockSize>ii.height?ii.height-Ie:ii.scanlineBlockSize;const jt=ii.size<ii.lines*ii.bytesPerLine?ii.uncompress(ii):hr(ii);vl.value+=ii.size;for(let $t=0;$t<ii.scanlineBlockSize;$t++){const tn=$t+ye*ii.scanlineBlockSize;if(tn>=ii.height)break;for(let Jn=0;Jn<ii.channels;Jn++){const Dn=jd[ga.channels[Jn].name];for(let er=0;er<ii.width;er++){_l.value=($t*(ii.channels*ii.width)+Jn*ii.width+er)*ii.inputSize;const nr=(ii.height-1-tn)*(ii.width*ii.outputChannels)+er*ii.outputChannels+Dn;ii.byteArray[nr]=ii.getter(jt,_l)}}}}return{header:ga,width:ii.width,height:ii.height,data:ii.byteArray,format:ii.format,[OA?"colorSpace":"encoding"]:ii[OA?"colorSpace":"encoding"],type:this.type}}setDataType(t){return this.type=t,this}load(t,r,l,c){function p(h,m){OA?h.colorSpace=m.colorSpace:h.encoding=m.encoding,h.minFilter=i.LinearFilter,h.magFilter=i.LinearFilter,h.generateMipmaps=!1,h.flipY=!1,r&&r(h,m)}return super.load(t,p,l,c)}}const jE={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},zw="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",ox=s=>Array.isArray(s);function HE({files:s=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"],path:t="",preset:r=void 0,encoding:l=void 0,extensions:c}={}){var p;let h=null,m=!1,v;if(r){if(!(r in jE))throw new Error("Preset must be one of: "+Object.keys(jE).join(", "));s=jE[r],t=zw}if(m=ox(s),v=ox(s)?"cube":s.startsWith("data:application/exr")?"exr":s.startsWith("data:application/hdr")?"hdr":(p=s.split(".").pop())==null?void 0:p.toLowerCase(),h=m?i.CubeTextureLoader:v==="hdr"?Pw:v==="exr"?kw:null,!h)throw new Error("useEnvironment: Unrecognized file extension: "+s);const E=(0,_.D)(h,m?[s]:s,F=>{F.setPath==null||F.setPath(t),c&&c(F)}),x=m?E[0]:E;x.mapping=m?i.CubeReflectionMapping:i.EquirectangularReflectionMapping;const T=3001,R=3e3;return"colorSpace"in x?x.colorSpace=(l!=null?l:m)?"srgb":"srgb-linear":x.encoding=(l!=null?l:m)?T:R,x}const Gw=s=>s.current&&s.current.isScene,Uw=s=>Gw(s)?s.current:s;function WE(s,t,r,l,c=0){const p=Uw(t||r),h=p.background,m=p.environment,v=p.backgroundBlurriness||0;return s!=="only"&&(p.environment=l),s&&(p.background=l),s&&p.backgroundBlurriness!==void 0&&(p.backgroundBlurriness=c),()=>{s!=="only"&&(p.environment=m),s&&(p.background=h),s&&p.backgroundBlurriness!==void 0&&(p.backgroundBlurriness=v)}}function R2({scene:s,background:t=!1,blur:r,map:l}){const c=(0,_.z)(p=>p.scene);return d.useLayoutEffect(()=>{if(l)return WE(t,s,c,l,r)},[c,s,l,t,r]),null}function VE(c){var p=c,{background:s=!1,scene:t,blur:r}=p,l=Cn(p,["background","scene","blur"]);const h=HE(l),m=(0,_.z)(v=>v.scene);return d.useLayoutEffect(()=>WE(s,t,m,h,r),[h,s,t,m,r]),null}function sx({children:s,near:t=1,far:r=1e3,resolution:l=256,frames:c=1,map:p,background:h=!1,blur:m,scene:v,files:E,path:x,preset:T=void 0,extensions:R}){const F=(0,_.z)(k=>k.gl),U=(0,_.z)(k=>k.scene),P=d.useRef(null),[O]=d.useState(()=>new i.Scene),z=d.useMemo(()=>{const k=new i.WebGLCubeRenderTarget(l);return k.texture.type=i.HalfFloatType,k},[l]);d.useLayoutEffect(()=>(c===1&&P.current.update(F,O),WE(h,v,U,z.texture,m)),[s,O,z.texture,v,U,h,c,F]);let L=1;return(0,_.A)(()=>{(c===1/0||L<c)&&(P.current.update(F,O),L++)}),d.createElement(d.Fragment,null,(0,_.g)(d.createElement(d.Fragment,null,s,d.createElement("cubeCamera",{ref:P,args:[t,r,z]}),E||T?d.createElement(VE,{background:!0,files:E,preset:T,path:x,extensions:R}):p?d.createElement(R2,{background:!0,map:p,extensions:R}):null),O))}function Nw(s){var t,r,l,c;const p=HE(s),h=s.map||p;d.useMemo(()=>(0,_.e)({GroundProjectedEnvImpl:Lw}),[]);const m=d.useMemo(()=>[h],[h]),v=(t=s.ground)==null?void 0:t.height,E=(r=s.ground)==null?void 0:r.radius,x=(l=(c=s.ground)==null?void 0:c.scale)!==null&&l!==void 0?l:1e3;return d.createElement(d.Fragment,null,d.createElement(R2,(0,C.Z)({},s,{map:h})),d.createElement("groundProjectedEnvImpl",{args:m,scale:x,height:v,radius:E}))}function ax(s){return s.ground?d.createElement(Nw,s):s.map?d.createElement(R2,s):s.children?d.createElement(sx,s):d.createElement(VE,s)}const jw={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:`
      varying vec2 vUv;

      void main() {

        vUv = uv;
        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

      }
  `,fragmentShader:`
    uniform sampler2D tDiffuse;
    uniform float h;

    varying vec2 vUv;

    void main() {

    	vec4 sum = vec4( 0.0 );

    	sum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;
    	sum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;

    	gl_FragColor = sum;

    }
  `},Hw={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:`
    varying vec2 vUv;

    void main() {

      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );

    }
  `,fragmentShader:`

  uniform sampler2D tDiffuse;
  uniform float v;

  varying vec2 vUv;

  void main() {

    vec4 sum = vec4( 0.0 );

    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;
    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;

    gl_FragColor = sum;

  }
  `},lx=d.forwardRef((U,F)=>{var P=U,{scale:s=10,frames:t=1/0,opacity:r=1,width:l=1,height:c=1,blur:p=1,far:h=10,resolution:m=512,smooth:v=!0,color:E="#000000",depthWrite:x=!1,renderOrder:T}=P,R=Cn(P,["scale","frames","opacity","width","height","blur","far","resolution","smooth","color","depthWrite","renderOrder"]);const O=d.useRef(null),z=(0,_.z)(Te=>Te.scene),L=(0,_.z)(Te=>Te.gl),k=d.useRef(null);l=l*(Array.isArray(s)?s[0]:s||1),c=c*(Array.isArray(s)?s[1]:s||1);const[H,X,W,J,Y,ce,ue]=d.useMemo(()=>{const Te=new i.WebGLRenderTarget(m,m),Ue=new i.WebGLRenderTarget(m,m);Ue.texture.generateMipmaps=Te.texture.generateMipmaps=!1;const Re=new i.PlaneGeometry(l,c).rotateX(Math.PI/2),Ge=new i.Mesh(Re),De=new i.MeshDepthMaterial;De.depthTest=De.depthWrite=!1,De.onBeforeCompile=Ee=>{Ee.uniforms=os(Zn({},Ee.uniforms),{ucolor:{value:new i.Color(E)}}),Ee.fragmentShader=Ee.fragmentShader.replace("void main() {",`uniform vec3 ucolor;
           void main() {
          `),Ee.fragmentShader=Ee.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const Xe=new i.ShaderMaterial(jw),Ce=new i.ShaderMaterial(Hw);return Ce.depthTest=Xe.depthTest=!1,[Te,Re,De,Ge,Xe,Ce,Ue]},[m,l,c,s,E]),ge=Te=>{J.visible=!0,J.material=Y,Y.uniforms.tDiffuse.value=H.texture,Y.uniforms.h.value=Te*1/256,L.setRenderTarget(ue),L.render(J,k.current),J.material=ce,ce.uniforms.tDiffuse.value=ue.texture,ce.uniforms.v.value=Te*1/256,L.setRenderTarget(H),L.render(J,k.current),J.visible=!1};let le=0,Me,me;return(0,_.A)(()=>{k.current&&(t===1/0||le<t)&&(le++,Me=z.background,me=z.overrideMaterial,O.current.visible=!1,z.background=null,z.overrideMaterial=W,L.setRenderTarget(H),L.render(z,k.current),ge(p),v&&ge(p*.4),L.setRenderTarget(null),O.current.visible=!0,z.overrideMaterial=me,z.background=Me)}),d.useImperativeHandle(F,()=>O.current,[]),d.createElement("group",(0,C.Z)({"rotation-x":Math.PI/2},R,{ref:O}),d.createElement("mesh",{renderOrder:T,geometry:X,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},d.createElement("meshBasicMaterial",{transparent:!0,map:H.texture,opacity:r,depthWrite:x})),d.createElement("orthographicCamera",{ref:k,args:[-l/2,l/2,c/2,-c/2,0,h]}))});function Ww(s){return s.isLight}function Vw(s){return!!s.geometry}const QE=d.createContext(null),Qw=hp({color:new i.Color,blend:2,alphaTest:.75,opacity:0,map:null},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vUv = uv;
   }`,`varying vec2 vUv;
   uniform sampler2D map;
   uniform vec3 color;
   uniform float opacity;
   uniform float alphaTest;
   uniform float blend;
   void main() {
     vec4 sampledDiffuseColor = texture2D(map, vUv);
     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);
     #include <tonemapping_fragment>
     #include <encodings_fragment>
   }`),cx=d.forwardRef((U,F)=>{var P=U,{children:s,temporal:t,frames:r=40,limit:l=1/0,blend:c=20,scale:p=10,opacity:h=1,alphaTest:m=.75,color:v="black",colorBlend:E=2,resolution:x=1024,toneMapped:T=!0}=P,R=Cn(P,["children","temporal","frames","limit","blend","scale","opacity","alphaTest","color","colorBlend","resolution","toneMapped"]);(0,_.e)({SoftShadowMaterial:Qw});const O=(0,_.z)(Y=>Y.gl),z=(0,_.z)(Y=>Y.scene),L=(0,_.z)(Y=>Y.camera),k=(0,_.z)(Y=>Y.invalidate),H=d.useRef(null),X=d.useRef(null),[W]=d.useState(()=>new Kw(O,z,x));d.useLayoutEffect(()=>{W.configure(H.current)},[]);const J=d.useMemo(()=>({lights:new Map,temporal:!!t,frames:Math.max(2,r),blend:Math.max(2,r===1/0?c:r),count:0,getMesh:()=>H.current,reset:()=>{W.clear();const Y=H.current.material;Y.opacity=0,Y.alphaTest=0,J.count=0},update:(Y=1)=>{const ce=H.current.material;J.temporal?(ce.opacity=Math.min(h,ce.opacity+h/J.blend),ce.alphaTest=Math.min(m,ce.alphaTest+m/J.blend)):(ce.opacity=h,ce.alphaTest=m),X.current.visible=!0,W.prepare();for(let ue=0;ue<Y;ue++)J.lights.forEach(ge=>ge.update()),W.update(L,J.blend);X.current.visible=!1,W.finish()}}),[W,L,z,t,r,c,h,m]);return d.useLayoutEffect(()=>{J.reset(),!J.temporal&&J.frames!==1/0&&J.update(J.blend)}),d.useImperativeHandle(F,()=>J,[J]),(0,_.A)(()=>{(J.temporal||J.frames===1/0)&&J.count<J.frames&&J.count<l&&(k(),J.update(),J.count++)}),d.createElement("group",R,d.createElement("group",{traverse:()=>null,ref:X},d.createElement(QE.Provider,{value:J},s)),d.createElement("mesh",{receiveShadow:!0,ref:H,scale:p,rotation:[-Math.PI/2,0,0]},d.createElement("planeGeometry",null),d.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:T,color:v,blend:E,map:W.progressiveLightMap2.texture})))}),px=d.forwardRef((U,F)=>{var P=U,{castShadow:s=!0,bias:t=.001,mapSize:r=512,size:l=5,near:c=.5,far:p=500,frames:h=1,position:m=[0,0,0],radius:v=1,amount:E=8,intensity:x=1,ambient:T=.5}=P,R=Cn(P,["castShadow","bias","mapSize","size","near","far","frames","position","radius","amount","intensity","ambient"]);const O=d.useRef(null),z=new i.Vector3(...m).length(),L=d.useContext(QE),k=d.useCallback(()=>{let X;if(O.current)for(let W=0;W<O.current.children.length;W++)if(X=O.current.children[W],Math.random()>T)X.position.set(m[0]+i.MathUtils.randFloatSpread(v),m[1]+i.MathUtils.randFloatSpread(v),m[2]+i.MathUtils.randFloatSpread(v));else{let J=Math.acos(2*Math.random()-1)-Math.PI/2,Y=2*Math.PI*Math.random();X.position.set(Math.cos(J)*Math.cos(Y)*z,Math.abs(Math.cos(J)*Math.sin(Y)*z),Math.sin(J)*z)}},[v,T,z,...m]),H=d.useMemo(()=>({update:k}),[k]);return d.useImperativeHandle(F,()=>H,[H]),d.useLayoutEffect(()=>{const X=O.current;return L&&L.lights.set(X.uuid,H),()=>void L.lights.delete(X.uuid)},[L,H]),d.createElement("group",(0,C.Z)({ref:O},R),Array.from({length:E},(X,W)=>d.createElement("directionalLight",{key:W,castShadow:s,"shadow-bias":t,"shadow-mapSize":[r,r],intensity:x/E},d.createElement("orthographicCamera",{attach:"shadow-camera",args:[-l,l,l,-l,c,p]}))))});class Kw{constructor(t,r,l=1024){this.renderer=t,this.res=l,this.scene=r,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new i.Color,this.clearAlpha=0;const c=/(Android|iPad|iPhone|iPod)/g.test(navigator.userAgent)?i.HalfFloatType:i.FloatType;this.progressiveLightMap1=new i.WebGLRenderTarget(this.res,this.res,{type:c}),this.progressiveLightMap2=new i.WebGLRenderTarget(this.res,this.res,{type:c}),this.discardMat=new GE,this.targetMat=new i.MeshLambertMaterial({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=p=>{p.vertexShader=`varying vec2 vUv;
`+p.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const h=p.fragmentShader.indexOf("void main() {");p.fragmentShader=`varying vec2 vUv;
`+p.fragmentShader.slice(0,h)+`uniform sampler2D previousShadowMap;
	uniform float averagingWindow;
`+p.fragmentShader.slice(h-1,-1)+`
vec3 texelOld = texture2D(previousShadowMap, vUv).rgb;
        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);
      }`,p.uniforms.previousShadowMap=this.previousShadowMap,p.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse(t=>{Vw(t)?this.meshes.push({object:t,material:t.material}):Ww(t)&&this.lights.push({object:t,intensity:t.intensity})})}prepare(){this.lights.forEach(t=>t.object.intensity=0),this.meshes.forEach(t=>t.object.material=this.discardMat)}finish(){this.lights.forEach(t=>t.object.intensity=t.intensity),this.meshes.forEach(t=>t.object.material=t.material)}configure(t){this.object=t}update(t,r=100){if(!this.object)return;this.averagingWindow.value=r,this.object.material=this.targetMat;const l=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,c=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,p=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(l),this.previousShadowMap.value=c.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,t),this.renderer.setRenderTarget(null),this.scene.background=p}}const Xw={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function Yw({radius:s,adjustCamera:t}){const r=ix();return d.useEffect(()=>{t&&r.refresh().clip().fit()},[s,t]),null}function Jw(v){var E=v,{children:s,center:t,adjustCamera:r=!0,intensity:l=.5,shadows:c="contact",environment:p="city",preset:h="rembrandt"}=E,m=Cn(E,["children","center","adjustCamera","intensity","shadows","environment","preset"]);var x,T,R,F,U,P,O,z;const L=typeof h=="string"?Xw[h]:h,[{radius:k,height:H},X]=d.useState({radius:0,width:0,height:0,depth:0}),W=(x=c==null?void 0:c.bias)!==null&&x!==void 0?x:-1e-4,J=(T=c==null?void 0:c.normalBias)!==null&&T!==void 0?T:0,Y=(R=c==null?void 0:c.size)!==null&&R!==void 0?R:1024,ce=(F=c==null?void 0:c.offset)!==null&&F!==void 0?F:0,ue=c==="contact"||(c==null?void 0:c.type)==="contact",ge=c==="accumulative"||(c==null?void 0:c.type)==="accumulative",le=Zn({},typeof c=="object"?c:{}),Me=p?typeof p=="string"?{preset:p}:p:null,me=d.useCallback(Te=>{const{width:Ue,height:Re,depth:Ge,boundingSphere:De}=Te;X({radius:De.radius,width:Ue,height:Re,depth:Ge}),t!=null&&t.onCentered&&t.onCentered(Te)},[]);return d.createElement(d.Fragment,null,d.createElement("ambientLight",{intensity:l/3}),d.createElement("spotLight",{penumbra:1,position:[L.main[0]*k,L.main[1]*k,L.main[2]*k],intensity:l*2,castShadow:!!c,"shadow-bias":W,"shadow-normalBias":J,"shadow-mapSize":Y}),d.createElement("pointLight",{position:[L.fill[0]*k,L.fill[1]*k,L.fill[2]*k],intensity:l}),d.createElement(rx,(0,C.Z)({fit:!!r,clip:!!r,margin:Number(r),observe:!0},m),d.createElement(Yw,{radius:k,adjustCamera:r}),d.createElement(zE,(0,C.Z)({},t,{position:[0,ce/2,0],onCentered:me}),s)),d.createElement("group",{position:[0,-H/2-ce/2,0]},ue&&d.createElement(lx,(0,C.Z)({scale:k*4,far:k,blur:2},le)),ge&&d.createElement(cx,(0,C.Z)({temporal:!0,frames:100,alphaTest:.9,toneMapped:!0,scale:k*4},le),d.createElement(px,{amount:(U=le.amount)!==null&&U!==void 0?U:8,radius:(P=le.radius)!==null&&P!==void 0?P:k,ambient:(O=le.ambient)!==null&&O!==void 0?O:.5,intensity:(z=le.intensity)!==null&&z!==void 0?z:1,position:[L.main[0]*k,L.main[1]*k,L.main[2]*k],size:k*4,bias:-W,mapSize:Y}))),p&&d.createElement(ax,Me))}const Zw=s=>s===0?0:Math.pow(2,10*s-10);function qw(p){var h=p,{children:s,floor:t=.25,segments:r=20,receiveShadow:l}=h,c=Cn(h,["children","floor","segments","receiveShadow"]);const m=d.useRef(null);return d.useLayoutEffect(()=>{let v=0;const E=r/r/2,x=m.current.attributes.position;for(let T=0;T<r+1;T++)for(let R=0;R<r+1;R++)x.setXYZ(v++,T/r-E+(T===0?-t:0),R/r-E,Zw(T/r));x.needsUpdate=!0,m.current.computeVertexNormals()},[r,t]),d.createElement("group",c,d.createElement("mesh",{receiveShadow:l,rotation:[-Math.PI/2,0,Math.PI/2]},d.createElement("planeGeometry",{ref:m,args:[1,1,r,r]}),s))}const $w=d.forwardRef((v,m)=>{var E=v,{fog:s=!1,renderOrder:t,depthWrite:r=!1,colorStop:l=0,color:c="black",opacity:p=.5}=E,h=Cn(E,["fog","renderOrder","depthWrite","colorStop","color","opacity"]);const x=d.useMemo(()=>{const T=document.createElement("canvas");T.width=128,T.height=128;const R=T.getContext("2d"),F=R.createRadialGradient(T.width/2,T.height/2,0,T.width/2,T.height/2,T.width/2);return F.addColorStop(l,new i.Color(c).getStyle()),F.addColorStop(1,"rgba(0,0,0,0)"),R.fillStyle=F,R.fillRect(0,0,T.width,T.height),T},[c,l]);return d.createElement("mesh",(0,C.Z)({renderOrder:t,ref:m,"rotation-x":-Math.PI/2},h),d.createElement("planeGeometry",null),d.createElement("meshBasicMaterial",{transparent:!0,opacity:p,fog:s,depthWrite:r,side:i.DoubleSide},d.createElement("canvasTexture",{attach:"map",args:[x]})))});function ux(s=i.FrontSide){const t={value:new i.Matrix4};return Object.assign(new i.MeshNormalMaterial({side:s}),{viewMatrix:t,onBeforeCompile:r=>{r.uniforms.viewMatrix=t,r.fragmentShader=`vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
           return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
         }
`+r.fragmentShader.replace("#include <normal_fragment_maps>",`#include <normal_fragment_maps>
           normal = inverseTransformDirection( normal, viewMatrix );
`)}})}const eT=hp({causticsTexture:null,causticsTextureB:null,color:new i.Color,lightProjMatrix:new i.Matrix4,lightViewMatrix:new i.Matrix4},`varying vec3 vWorldPosition;   
   void main() {
     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);
     vec4 worldPosition = modelMatrix * vec4(position, 1.);
     vWorldPosition = worldPosition.xyz;
   }`,`varying vec3 vWorldPosition;
  uniform vec3 color;
  uniform sampler2D causticsTexture; 
  uniform sampler2D causticsTextureB; 
  uniform mat4 lightProjMatrix;
  uniform mat4 lightViewMatrix;
   void main() {
    // Apply caustics  
    vec4 lightSpacePos = lightProjMatrix * lightViewMatrix * vec4(vWorldPosition, 1.0);
    lightSpacePos.xyz /= lightSpacePos.w;
    lightSpacePos.xyz = lightSpacePos.xyz * 0.5 + 0.5; 
    vec3 front = texture2D(causticsTexture, lightSpacePos.xy).rgb;
    vec3 back = texture2D(causticsTextureB, lightSpacePos.xy).rgb;
    gl_FragColor = vec4((front + back) * color, 1.0);
    #include <tonemapping_fragment>
    #include <encodings_fragment>
   }`),tT=hp({cameraMatrixWorld:new i.Matrix4,cameraProjectionMatrixInv:new i.Matrix4,normalTexture:null,depthTexture:null,lightDir:new i.Vector3(0,1,0),lightPlaneNormal:new i.Vector3(0,1,0),lightPlaneConstant:0,near:.1,far:100,modelMatrix:new i.Matrix4,worldRadius:1/40,ior:1.1,bounces:0,resolution:1024,size:10,intensity:.5},`
  varying vec2 vUv;
  void main() {
      vUv = uv;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  }`,`  
  uniform mat4 cameraMatrixWorld;
  uniform mat4 cameraProjectionMatrixInv;
  uniform vec3 lightDir;
  uniform vec3 lightPlaneNormal;
  uniform float lightPlaneConstant;
  uniform float near;
  uniform float far;
  uniform float time;
  uniform float worldRadius;
  uniform float resolution;
  uniform float size;
  uniform float intensity;
  uniform float ior;
  precision highp isampler2D;
  precision highp usampler2D;
  uniform sampler2D normalTexture;
  uniform sampler2D depthTexture;
  uniform float bounces;
  varying vec2 vUv;
  vec3 WorldPosFromDepth(float depth, vec2 coord) {
    float z = depth * 2.0 - 1.0;
    vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
    vec4 viewSpacePosition = cameraProjectionMatrixInv * clipSpacePosition;
    // Perspective division
    viewSpacePosition /= viewSpacePosition.w;
    vec4 worldSpacePosition = cameraMatrixWorld * viewSpacePosition;
    return worldSpacePosition.xyz;
  }                  
  float sdPlane( vec3 p, vec3 n, float h ) {
    // n must be normalized
    return dot(p,n) + h;
  }
  float planeIntersect( vec3 ro, vec3 rd, vec4 p ) {
    return -(dot(ro,p.xyz)+p.w)/dot(rd,p.xyz);
  }
  vec3 totalInternalReflection(vec3 ro, vec3 rd, vec3 pos, vec3 normal, float ior, out vec3 rayOrigin, out vec3 rayDirection) {
    rayOrigin = ro;
    rayDirection = rd;
    rayDirection = refract(rayDirection, normal, 1.0 / ior);
    rayOrigin = pos + rayDirection * 0.1;
    return rayDirection;
  }
  void main() {
    // Each sample consists of random offset in the x and y direction
    float caustic = 0.0;
    float causticTexelSize = (1.0 / resolution) * size * 2.0;
    float texelsNeeded = worldRadius / causticTexelSize;
    float sampleRadius = texelsNeeded / resolution;
    float sum = 0.0;
    if (texture2D(depthTexture, vUv).x == 1.0) {
      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
      return;
    }
    vec2 offset1 = vec2(-0.5, -0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset2 = vec2(-0.5, 0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset3 = vec2(0.5, 0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 offset4 = vec2(0.5, -0.5);//vec2(rand() - 0.5, rand() - 0.5);
    vec2 uv1 = vUv + offset1 * sampleRadius;
    vec2 uv2 = vUv + offset2 * sampleRadius;
    vec2 uv3 = vUv + offset3 * sampleRadius;
    vec2 uv4 = vUv + offset4 * sampleRadius;
    vec3 normal1 = texture2D(normalTexture, uv1, -10.0).rgb * 2.0 - 1.0;
    vec3 normal2 = texture2D(normalTexture, uv2, -10.0).rgb * 2.0 - 1.0;
    vec3 normal3 = texture2D(normalTexture, uv3, -10.0).rgb * 2.0 - 1.0;
    vec3 normal4 = texture2D(normalTexture, uv4, -10.0).rgb * 2.0 - 1.0;
    float depth1 = texture2D(depthTexture, uv1, -10.0).x;
    float depth2 = texture2D(depthTexture, uv2, -10.0).x;
    float depth3 = texture2D(depthTexture, uv3, -10.0).x;
    float depth4 = texture2D(depthTexture, uv4, -10.0).x;
    // Sanity check the depths
    if (depth1 == 1.0 || depth2 == 1.0 || depth3 == 1.0 || depth4 == 1.0) {
      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
      return;
    }
    vec3 pos1 = WorldPosFromDepth(depth1, uv1);
    vec3 pos2 = WorldPosFromDepth(depth2, uv2);
    vec3 pos3 = WorldPosFromDepth(depth3, uv3);
    vec3 pos4 = WorldPosFromDepth(depth4, uv4);
    vec3 originPos1 = WorldPosFromDepth(0.0, uv1);
    vec3 originPos2 = WorldPosFromDepth(0.0, uv2);
    vec3 originPos3 = WorldPosFromDepth(0.0, uv3);
    vec3 originPos4 = WorldPosFromDepth(0.0, uv4);
    vec3 endPos1, endPos2, endPos3, endPos4;
    vec3 endDir1, endDir2, endDir3, endDir4;
    totalInternalReflection(originPos1, lightDir, pos1, normal1, ior, endPos1, endDir1);
    totalInternalReflection(originPos2, lightDir, pos2, normal2, ior, endPos2, endDir2);
    totalInternalReflection(originPos3, lightDir, pos3, normal3, ior, endPos3, endDir3);
    totalInternalReflection(originPos4, lightDir, pos4, normal4, ior, endPos4, endDir4);
    float lightPosArea = length(cross(originPos2 - originPos1, originPos3 - originPos1)) + length(cross(originPos3 - originPos1, originPos4 - originPos1));
    float t1 = planeIntersect(endPos1, endDir1, vec4(lightPlaneNormal, lightPlaneConstant));
    float t2 = planeIntersect(endPos2, endDir2, vec4(lightPlaneNormal, lightPlaneConstant));
    float t3 = planeIntersect(endPos3, endDir3, vec4(lightPlaneNormal, lightPlaneConstant));
    float t4 = planeIntersect(endPos4, endDir4, vec4(lightPlaneNormal, lightPlaneConstant));
    vec3 finalPos1 = endPos1 + endDir1 * t1;
    vec3 finalPos2 = endPos2 + endDir2 * t2;
    vec3 finalPos3 = endPos3 + endDir3 * t3;
    vec3 finalPos4 = endPos4 + endDir4 * t4;
    float finalArea = length(cross(finalPos2 - finalPos1, finalPos3 - finalPos1)) + length(cross(finalPos3 - finalPos1, finalPos4 - finalPos1));
    caustic += intensity * (lightPosArea / finalArea);
    // Calculate the area of the triangle in light spaces
    gl_FragColor = vec4(vec3(max(caustic, 0.0)), 1.0);
  }`),dx={depth:!0,minFilter:i.LinearFilter,magFilter:i.LinearFilter,encoding:i.LinearEncoding,type:i.UnsignedByteType},hx={minFilter:i.LinearMipmapLinearFilter,magFilter:i.LinearFilter,encoding:i.LinearEncoding,format:i.RGBAFormat,type:i.FloatType,generateMipmaps:!0},nT=d.forwardRef((U,F)=>{var P=U,{debug:s,children:t,frames:r=1,ior:l=1.1,color:c="white",causticsOnly:p=!1,backside:h=!1,backsideIOR:m=1.1,worldRadius:v=.3125,intensity:E=.05,resolution:x=2024,lightSource:T=[5,5,5]}=P,R=Cn(P,["debug","children","frames","ior","color","causticsOnly","backside","backsideIOR","worldRadius","intensity","resolution","lightSource"]);(0,_.e)({CausticsProjectionMaterial:eT});const O=d.useRef(null),z=d.useRef(null),L=d.useRef(null),k=d.useRef(null),H=(0,_.z)(ke=>ke.gl),X=EM(s&&z,i.CameraHelper),W=rc(x,x,dx),J=rc(x,x,dx),Y=rc(x,x,hx),ce=rc(x,x,hx),[ue]=d.useState(()=>ux()),[ge]=d.useState(()=>ux(i.BackSide)),[le]=d.useState(()=>new tT),[Me]=d.useState(()=>new up(le));d.useLayoutEffect(()=>{O.current.updateWorldMatrix(!1,!0)});let me=0;const Te=new i.Vector3,Ue=new i.Frustum,Re=new i.Matrix4,Ge=new i.Plane,De=new i.Vector3,Xe=new i.Vector3,Ce=new i.Box3,Ee=new i.Vector3,_e=[],oe=[],Ae=[],Be=[],ve=new i.Vector3;for(let ke=0;ke<8;ke++)_e.push(new i.Vector3),oe.push(new i.Vector3),Ae.push(new i.Vector3),Be.push(new i.Vector3);return(0,_.A)(()=>{if(r===1/0||me++<r){var ke,vt;Array.isArray(T)?De.fromArray(T).normalize():De.copy(O.current.worldToLocal(T.current.getWorldPosition(Te)).normalize()),Xe.copy(De).multiplyScalar(-1),(ke=L.current.parent)==null||ke.matrixWorld.identity(),Ce.setFromObject(L.current,!0),_e[0].set(Ce.min.x,Ce.min.y,Ce.min.z),_e[1].set(Ce.min.x,Ce.min.y,Ce.max.z),_e[2].set(Ce.min.x,Ce.max.y,Ce.min.z),_e[3].set(Ce.min.x,Ce.max.y,Ce.max.z),_e[4].set(Ce.max.x,Ce.min.y,Ce.min.z),_e[5].set(Ce.max.x,Ce.min.y,Ce.max.z),_e[6].set(Ce.max.x,Ce.max.y,Ce.min.z),_e[7].set(Ce.max.x,Ce.max.y,Ce.max.z);for(let Gt=0;Gt<8;Gt++)oe[Gt].copy(_e[Gt]);Ce.getCenter(Ee),_e.map(Gt=>Gt.sub(Ee));const ht=Ge.set(Xe,0);_e.map((Gt,Yn)=>ht.projectPoint(Gt,Ae[Yn]));const dt=Ae.reduce((Gt,Yn)=>Gt.add(Yn),Te.set(0,0,0)).divideScalar(Ae.length),$e=Ae.map(Gt=>Gt.distanceTo(dt)).reduce((Gt,Yn)=>Math.max(Gt,Yn)),Kt=_e.map(Gt=>Gt.dot(De)).reduce((Gt,Yn)=>Math.max(Gt,Yn));z.current.position.copy(ve.copy(De).multiplyScalar(Kt).add(Ee)),z.current.lookAt(L.current.localToWorld(Ee));const zt=Re.lookAt(z.current.position,Ee,Te.set(0,1,0));z.current.left=-$e,z.current.right=$e,z.current.top=$e,z.current.bottom=-$e;const Bt=Te.set(0,$e,0).applyMatrix4(zt),Qe=(z.current.position.y+Bt.y)/De.y;z.current.near=.1,z.current.far=Qe,z.current.updateProjectionMatrix(),z.current.updateMatrixWorld();const ze=oe.map((Gt,Yn)=>Gt.add(Be[Yn].copy(De).multiplyScalar(-Gt.y/De.y))),Ft=ze.reduce((Gt,Yn)=>Gt.add(Yn),Te.set(0,0,0)).divideScalar(ze.length),bn=2*ze.map(Gt=>Math.hypot(Gt.x-Ft.x,Gt.z-Ft.z)).reduce((Gt,Yn)=>Math.max(Gt,Yn));k.current.scale.setScalar(bn),k.current.position.copy(Ft),s&&((vt=X.current)==null||vt.update()),ge.viewMatrix.value=ue.viewMatrix.value=z.current.matrixWorldInverse;const Fn=Ue.setFromProjectionMatrix(Re.multiplyMatrices(z.current.projectionMatrix,z.current.matrixWorldInverse)).planes[4];le.cameraMatrixWorld=z.current.matrixWorld,le.cameraProjectionMatrixInv=z.current.projectionMatrixInverse,le.lightDir=Xe,le.lightPlaneNormal=Fn.normal,le.lightPlaneConstant=Fn.constant,le.near=z.current.near,le.far=z.current.far,le.resolution=x,le.size=$e,le.intensity=E,le.worldRadius=v,L.current.visible=!0,H.setRenderTarget(W),H.clear(),L.current.overrideMaterial=ue,H.render(L.current,z.current),H.setRenderTarget(J),H.clear(),h&&(L.current.overrideMaterial=ge,H.render(L.current,z.current)),L.current.overrideMaterial=null,le.ior=l,k.current.material.lightProjMatrix=z.current.projectionMatrix,k.current.material.lightViewMatrix=z.current.matrixWorldInverse,le.normalTexture=W.texture,le.depthTexture=W.depthTexture,H.setRenderTarget(Y),H.clear(),Me.render(H),le.ior=m,le.normalTexture=J.texture,le.depthTexture=J.depthTexture,H.setRenderTarget(ce),H.clear(),h&&Me.render(H),H.setRenderTarget(null),p&&(L.current.visible=!1)}}),d.useImperativeHandle(F,()=>O.current,[]),d.createElement("group",(0,C.Z)({ref:O},R),d.createElement("scene",{ref:L},d.createElement("orthographicCamera",{ref:z,up:[0,1,0]}),t),d.createElement("mesh",{renderOrder:2,ref:k,"rotation-x":-Math.PI/2},d.createElement("planeGeometry",null),d.createElement("causticsProjectionMaterial",{transparent:!0,color:c,causticsTexture:Y.texture,causticsTextureB:ce.texture,blending:i.CustomBlending,blendSrc:i.OneFactor,blendDst:i.SrcAlphaFactor,depthWrite:!1}),s&&d.createElement(v0,null,d.createElement("lineBasicMaterial",{color:"#ffff00",toneMapped:!1}))))});var rT=A(5108);(0,_.e)({MeshReflectorMaterial:YM});const iT=d.forwardRef((z,O)=>{var L=z,{mixBlur:s=0,mixStrength:t=.5,resolution:r=256,blur:l=[0,0],args:c=[1,1],minDepthThreshold:p=.9,maxDepthThreshold:h=1,depthScale:m=0,depthToBlurRatioBias:v=.25,mirror:E=0,children:x,debug:T=0,distortion:R=1,mixContrast:F=1,distortionMap:U}=L,P=Cn(L,["mixBlur","mixStrength","resolution","blur","args","minDepthThreshold","maxDepthThreshold","depthScale","depthToBlurRatioBias","mirror","children","debug","distortion","mixContrast","distortionMap"]);d.useEffect(()=>{rT.warn("Reflector has been deprecated and will be removed next major. Replace it with <MeshReflectorMaterial />!")},[]);const k=(0,_.z)(({gl:Ae})=>Ae),H=(0,_.z)(({camera:Ae})=>Ae),X=(0,_.z)(({scene:Ae})=>Ae);l=Array.isArray(l)?l:[l,l];const W=l[0]+l[1]>0,J=d.useRef(null),[Y]=d.useState(()=>new i.Plane),[ce]=d.useState(()=>new i.Vector3),[ue]=d.useState(()=>new i.Vector3),[ge]=d.useState(()=>new i.Vector3),[le]=d.useState(()=>new i.Matrix4),[Me]=d.useState(()=>new i.Vector3(0,0,-1)),[me]=d.useState(()=>new i.Vector4),[Te]=d.useState(()=>new i.Vector3),[Ue]=d.useState(()=>new i.Vector3),[Re]=d.useState(()=>new i.Vector4),[Ge]=d.useState(()=>new i.Matrix4),[De]=d.useState(()=>new i.PerspectiveCamera),Xe=d.useCallback(()=>{if(ue.setFromMatrixPosition(J.current.matrixWorld),ge.setFromMatrixPosition(H.matrixWorld),le.extractRotation(J.current.matrixWorld),ce.set(0,0,1),ce.applyMatrix4(le),Te.subVectors(ue,ge),Te.dot(ce)>0)return;Te.reflect(ce).negate(),Te.add(ue),le.extractRotation(H.matrixWorld),Me.set(0,0,-1),Me.applyMatrix4(le),Me.add(ge),Ue.subVectors(ue,Me),Ue.reflect(ce).negate(),Ue.add(ue),De.position.copy(Te),De.up.set(0,1,0),De.up.applyMatrix4(le),De.up.reflect(ce),De.lookAt(Ue),De.far=H.far,De.updateMatrixWorld(),De.projectionMatrix.copy(H.projectionMatrix),Ge.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),Ge.multiply(De.projectionMatrix),Ge.multiply(De.matrixWorldInverse),Ge.multiply(J.current.matrixWorld),Y.setFromNormalAndCoplanarPoint(ce,ue),Y.applyMatrix4(De.matrixWorldInverse),me.set(Y.normal.x,Y.normal.y,Y.normal.z,Y.constant);const Ae=De.projectionMatrix;Re.x=(Math.sign(me.x)+Ae.elements[8])/Ae.elements[0],Re.y=(Math.sign(me.y)+Ae.elements[9])/Ae.elements[5],Re.z=-1,Re.w=(1+Ae.elements[10])/Ae.elements[14],me.multiplyScalar(2/me.dot(Re)),Ae.elements[2]=me.x,Ae.elements[6]=me.y,Ae.elements[10]=me.z+1,Ae.elements[14]=me.w},[]),[Ce,Ee,_e,oe]=d.useMemo(()=>{const Ae={type:i.HalfFloatType,minFilter:i.LinearFilter,magFilter:i.LinearFilter},Be=new i.WebGLRenderTarget(r,r,Ae);Be.depthBuffer=!0,Be.depthTexture=new i.DepthTexture(r,r),Be.depthTexture.format=i.DepthFormat,Be.depthTexture.type=i.UnsignedShortType;const ve=new i.WebGLRenderTarget(r,r,Ae),ke=new XM({gl:k,resolution:r,width:l[0],height:l[1],minDepthThreshold:p,maxDepthThreshold:h,depthScale:m,depthToBlurRatioBias:v}),vt={mirror:E,textureMatrix:Ge,mixBlur:s,tDiffuse:Be.texture,tDepth:Be.depthTexture,tDiffuseBlur:ve.texture,hasBlur:W,mixStrength:t,minDepthThreshold:p,maxDepthThreshold:h,depthScale:m,depthToBlurRatioBias:v,transparent:!0,debug:T,distortion:R,distortionMap:U,mixContrast:F,"defines-USE_BLUR":W?"":void 0,"defines-USE_DEPTH":m>0?"":void 0,"defines-USE_DISTORTION":U?"":void 0};return[Be,ve,ke,vt]},[k,l,Ge,r,E,W,s,t,p,h,m,v,T,R,U,F]);return(0,_.A)(()=>{if(!(J!=null&&J.current))return;J.current.visible=!1;const Ae=k.xr.enabled,Be=k.shadowMap.autoUpdate;Xe(),k.xr.enabled=!1,k.shadowMap.autoUpdate=!1,k.setRenderTarget(Ce),k.state.buffers.depth.setMask(!0),k.autoClear||k.clear(),k.render(X,De),W&&_e.render(k,Ce,Ee),k.xr.enabled=Ae,k.shadowMap.autoUpdate=Be,J.current.visible=!0,k.setRenderTarget(null)}),d.createElement("mesh",(0,C.Z)({ref:mt([J,O])},P),d.createElement("planeGeometry",{args:c}),x?x("meshReflectorMaterial",oe):d.createElement("meshReflectorMaterial",oe))});class oT extends i.ShaderMaterial{constructor(){super({uniforms:{depth:{value:null},opacity:{value:1},attenuation:{value:2.5},anglePower:{value:12},spotPosition:{value:new i.Vector3(0,0,0)},lightColor:{value:new i.Color("white")},cameraNear:{value:0},cameraFar:{value:1},resolution:{value:new i.Vector2(0,0)}},transparent:!0,depthWrite:!1,vertexShader:`
      varying vec3 vNormal;
      varying vec3 vWorldPosition;
      varying float vViewZ;
      varying float vIntensity;
      uniform vec3 spotPosition;
      uniform float attenuation;      

      void main() {
        // compute intensity
        vNormal = normalize( normalMatrix * normal );
        vec4 worldPosition	= modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;
        vec4 viewPosition = viewMatrix * worldPosition;
        vViewZ = viewPosition.z;
        float intensity	= distance(worldPosition.xyz, spotPosition) / attenuation;
        intensity	= 1.0 - clamp(intensity, 0.0, 1.0);
        vIntensity = intensity;        
        // set gl_Position
        gl_Position	= projectionMatrix * viewPosition;

      }`,fragmentShader:`
      #include <packing>

      varying vec3 vNormal;
      varying vec3 vWorldPosition;
      uniform vec3 lightColor;
      uniform vec3 spotPosition;
      uniform float attenuation;
      uniform float anglePower;
      uniform sampler2D depth;
      uniform vec2 resolution;
      uniform float cameraNear;
      uniform float cameraFar;
      varying float vViewZ;
      varying float vIntensity;
      uniform float opacity;

      float readDepth( sampler2D depthSampler, vec2 coord ) {
        float fragCoordZ = texture2D( depthSampler, coord ).x;
        float viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);
        return viewZ;
      }

      void main() {
        float d = 1.0;
        bool isSoft = resolution[0] > 0.0 && resolution[1] > 0.0;
        if (isSoft) {
          vec2 sUv = gl_FragCoord.xy / resolution;
          d = readDepth(depth, sUv);
        }
        float intensity = vIntensity;
        vec3 normal	= vec3(vNormal.x, vNormal.y, abs(vNormal.z));
        float angleIntensity	= pow( dot(normal, vec3(0.0, 0.0, 1.0)), anglePower );
        intensity	*= angleIntensity;
        // fades when z is close to sampled depth, meaning the cone is intersecting existing geometry
        if (isSoft) {
          intensity	*= smoothstep(0., 1., vViewZ - d);
        }
        gl_FragColor = vec4(lightColor, intensity * opacity);

        #include <tonemapping_fragment>
	      #include <encodings_fragment>
      }`})}}var sT=`#define GLSLIFY 1
varying vec2 vUv;uniform sampler2D uShadowMap;uniform float uTime;void main(){vec3 color=texture2D(uShadowMap,vUv).xyz;gl_FragColor=vec4(color,1.);}`;const aT=s=>s==null?void 0:s.isSpotLight;function lT({opacity:s=1,radiusTop:t,radiusBottom:r,depthBuffer:l,color:c="white",distance:p=5,angle:h=.15,attenuation:m=5,anglePower:v=5}){const E=d.useRef(null),x=(0,_.z)(O=>O.size),T=(0,_.z)(O=>O.camera),R=(0,_.z)(O=>O.viewport.dpr),[F]=d.useState(()=>new oT),[U]=d.useState(()=>new i.Vector3);t=t===void 0?.1:t,r=r===void 0?h*7:r,(0,_.A)(()=>{F.uniforms.spotPosition.value.copy(E.current.getWorldPosition(U)),E.current.lookAt(E.current.parent.target.getWorldPosition(U))});const P=d.useMemo(()=>{const O=new i.CylinderGeometry(t,r,p,128,64,!0);return O.applyMatrix4(new i.Matrix4().makeTranslation(0,-p/2,0)),O.applyMatrix4(new i.Matrix4().makeRotationX(-Math.PI/2)),O},[p,t,r]);return d.createElement(d.Fragment,null,d.createElement("mesh",{ref:E,geometry:P,raycast:()=>null},d.createElement("primitive",{object:F,attach:"material","uniforms-opacity-value":s,"uniforms-lightColor-value":c,"uniforms-attenuation-value":m,"uniforms-anglePower-value":v,"uniforms-depth-value":l,"uniforms-cameraNear-value":T.near,"uniforms-cameraFar-value":T.far,"uniforms-resolution-value":l?[x.width*R,x.height*R]:[0,0]})))}function fx(s,t,r,l,c){const[[p,h]]=d.useState(()=>[new i.Vector3,new i.Vector3]);d.useLayoutEffect(()=>{if(aT(s.current))s.current.shadow.mapSize.set(r,l),s.current.shadow.needsUpdate=!0;else throw new Error("SpotlightShadow must be a child of a SpotLight")},[s,r,l]),(0,_.A)(()=>{if(!s.current)return;const m=s.current.position,v=s.current.target.position;h.copy(v).sub(m);var E=h.length();h.normalize().multiplyScalar(E*c),p.copy(m).add(h),t.current.position.copy(p),t.current.lookAt(s.current.target.position)})}function cT(E){var x=E,{distance:s=.4,alphaTest:t=.5,map:r,shader:l=sT,width:c=512,height:p=512,scale:h=1,children:m}=x,v=Cn(x,["distance","alphaTest","map","shader","width","height","scale","children"]);const T=d.useRef(null),R=v.spotlightRef,F=v.debug;fx(R,T,c,p,s);const U=d.useMemo(()=>new i.WebGLRenderTarget(c,p,{format:i.RGBAFormat,encoding:i.LinearEncoding,stencilBuffer:!1}),[c,p]),P=d.useRef({uShadowMap:{value:r},uTime:{value:0}});d.useEffect(()=>void(P.current.uShadowMap.value=r),[r]);const O=d.useMemo(()=>new up(new i.ShaderMaterial({uniforms:P.current,vertexShader:`
          varying vec2 vUv;

          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
          }
          `,fragmentShader:l})),[l]);return d.useEffect(()=>()=>{O.material.dispose(),O.dispose()},[O]),d.useEffect(()=>()=>U.dispose(),[U]),(0,_.A)(({gl:z},L)=>{P.current.uTime.value+=L,z.setRenderTarget(U),O.render(z),z.setRenderTarget(null)}),d.createElement(d.Fragment,null,d.createElement("mesh",{ref:T,scale:h,castShadow:!0},d.createElement("planeGeometry",null),d.createElement("meshBasicMaterial",{transparent:!0,side:i.DoubleSide,alphaTest:t,alphaMap:U.texture,"alphaMap-wrapS":i.RepeatWrapping,"alphaMap-wrapT":i.RepeatWrapping,opacity:F?1:0},m)))}function pT(v){var E=v,{distance:s=.4,alphaTest:t=.5,map:r,width:l=512,height:c=512,scale:p,children:h}=E,m=Cn(E,["distance","alphaTest","map","width","height","scale","children"]);const x=d.useRef(null),T=m.spotlightRef,R=m.debug;return fx(T,x,l,c,s),d.createElement(d.Fragment,null,d.createElement("mesh",{ref:x,scale:p,castShadow:!0},d.createElement("planeGeometry",null),d.createElement("meshBasicMaterial",{transparent:!0,side:i.DoubleSide,alphaTest:t,alphaMap:r,"alphaMap-wrapS":i.RepeatWrapping,"alphaMap-wrapT":i.RepeatWrapping,opacity:R?1:0},h)))}function uT(s){return s.shader?d.createElement(cT,s):d.createElement(pT,s)}const dT=d.forwardRef((U,F)=>{var P=U,{opacity:s=1,radiusTop:t,radiusBottom:r,depthBuffer:l,color:c="white",distance:p=5,angle:h=.15,attenuation:m=5,anglePower:v=5,volumetric:E=!0,debug:x=!1,children:T}=P,R=Cn(P,["opacity","radiusTop","radiusBottom","depthBuffer","color","distance","angle","attenuation","anglePower","volumetric","debug","children"]);const O=d.useRef(null);return d.createElement("group",null,x&&O.current&&d.createElement("spotLightHelper",{args:[O.current]}),d.createElement("spotLight",(0,C.Z)({ref:mt([F,O]),angle:h,color:c,distance:p,castShadow:!0},R),E&&d.createElement(lT,{debug:x,opacity:s,radiusTop:t,radiusBottom:r,depthBuffer:l,color:c,distance:p,angle:h,attenuation:m,anglePower:v})),T&&d.cloneElement(T,{spotlightRef:O,debug:x}))}),hT=d.forwardRef((T,x)=>{var R=T,{args:s,map:t,toneMapped:r=!1,color:l="white",form:c="rect",intensity:p=1,scale:h=1,target:m,children:v}=R,E=Cn(R,["args","map","toneMapped","color","form","intensity","scale","target","children"]);const F=d.useRef(null);return d.useLayoutEffect(()=>{!v&&!E.material&&((0,_.j)(F.current.material,{color:l}),F.current.material.color.multiplyScalar(p))},[l,p,v,E.material]),d.useLayoutEffect(()=>{m&&F.current.lookAt(Array.isArray(m)?new i.Vector3(...m):m)},[m]),h=Array.isArray(h)&&h.length===2?[h[0],h[1],1]:h,d.createElement("mesh",(0,C.Z)({ref:mt([F,x]),scale:h},E),c==="circle"?d.createElement("ringGeometry",{args:[0,1,64]}):c==="ring"?d.createElement("ringGeometry",{args:[.5,1,64]}):c==="rect"?d.createElement("planeGeometry",null):d.createElement(c,{args:s}),v||(E.material?null:d.createElement("meshBasicMaterial",{toneMapped:r,map:t,side:i.DoubleSide})))});var fT=Object.defineProperty,gT=(s,t,r)=>t in s?fT(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,gx=(s,t,r)=>(gT(s,typeof t!="symbol"?t+"":t,r),r);const I2={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new i.Vector3},up:{value:new i.Vector3(0,1,0)}},vertexShader:`
      uniform vec3 sunPosition;
      uniform float rayleigh;
      uniform float turbidity;
      uniform float mieCoefficient;
      uniform vec3 up;

      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      // constants for atmospheric scattering
      const float e = 2.71828182845904523536028747135266249775724709369995957;
      const float pi = 3.141592653589793238462643383279502884197169;

      // wavelength of used primaries, according to preetham
      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );
      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:
      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))
      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );

      // mie stuff
      // K coefficient for the primaries
      const float v = 4.0;
      const vec3 K = vec3( 0.686, 0.678, 0.666 );
      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K
      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );

      // earth shadow hack
      // cutoffAngle = pi / 1.95;
      const float cutoffAngle = 1.6110731556870734;
      const float steepness = 1.5;
      const float EE = 1000.0;

      float sunIntensity( float zenithAngleCos ) {
        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );
        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );
      }

      vec3 totalMie( float T ) {
        float c = ( 0.2 * T ) * 10E-18;
        return 0.434 * c * MieConst;
      }

      void main() {

        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );
        vWorldPosition = worldPosition.xyz;

        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        gl_Position.z = gl_Position.w; // set z to camera.far

        vSunDirection = normalize( sunPosition );

        vSunE = sunIntensity( dot( vSunDirection, up ) );

        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );

        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );

      // extinction (absorbtion + out scattering)
      // rayleigh coefficients
        vBetaR = totalRayleigh * rayleighCoefficient;

      // mie coefficients
        vBetaM = totalMie( turbidity ) * mieCoefficient;

      }
    `,fragmentShader:`
      varying vec3 vWorldPosition;
      varying vec3 vSunDirection;
      varying float vSunfade;
      varying vec3 vBetaR;
      varying vec3 vBetaM;
      varying float vSunE;

      uniform float mieDirectionalG;
      uniform vec3 up;

      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );

      // constants for atmospheric scattering
      const float pi = 3.141592653589793238462643383279502884197169;

      const float n = 1.0003; // refractive index of air
      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)

      // optical length at zenith for molecules
      const float rayleighZenithLength = 8.4E3;
      const float mieZenithLength = 1.25E3;
      // 66 arc seconds -> degrees, and the cosine of that
      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;

      // 3.0 / ( 16.0 * pi )
      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;
      // 1.0 / ( 4.0 * pi )
      const float ONE_OVER_FOURPI = 0.07957747154594767;

      float rayleighPhase( float cosTheta ) {
        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );
      }

      float hgPhase( float cosTheta, float g ) {
        float g2 = pow( g, 2.0 );
        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );
        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );
      }

      void main() {

        vec3 direction = normalize( vWorldPosition - cameraPos );

      // optical length
      // cutoff angle at 90 to avoid singularity in next formula.
        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );
        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );
        float sR = rayleighZenithLength * inverse;
        float sM = mieZenithLength * inverse;

      // combined extinction factor
        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );

      // in scattering
        float cosTheta = dot( direction, vSunDirection );

        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );
        vec3 betaRTheta = vBetaR * rPhase;

        float mPhase = hgPhase( cosTheta, mieDirectionalG );
        vec3 betaMTheta = vBetaM * mPhase;

        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );
        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );

      // nightsky
        float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]
        float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]
        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );
        vec3 L0 = vec3( 0.1 ) * Fex;

      // composition + solar disc
        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );
        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;

        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );

        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );

        gl_FragColor = vec4( retColor, 1.0 );

      #include <tonemapping_fragment>
      #include <encodings_fragment>

      }
    `},mx=new i.ShaderMaterial({name:"SkyShader",fragmentShader:I2.fragmentShader,vertexShader:I2.vertexShader,uniforms:i.UniformsUtils.clone(I2.uniforms),side:i.BackSide,depthWrite:!1});class KE extends i.Mesh{constructor(){super(new i.BoxGeometry(1,1,1),mx)}}gx(KE,"SkyShader",I2),gx(KE,"material",mx);function Ax(s,t,r=new i.Vector3){const l=Math.PI*(s-.5),c=2*Math.PI*(t-.5);return r.x=Math.cos(c),r.y=Math.sin(l),r.z=Math.sin(c),r}const mT=d.forwardRef((x,E)=>{var T=x,{inclination:s=.6,azimuth:t=.1,distance:r=1e3,mieCoefficient:l=.005,mieDirectionalG:c=.8,rayleigh:p=.5,turbidity:h=10,sunPosition:m=Ax(s,t)}=T,v=Cn(T,["inclination","azimuth","distance","mieCoefficient","mieDirectionalG","rayleigh","turbidity","sunPosition"]);const R=d.useMemo(()=>new i.Vector3().setScalar(r),[r]),[F]=d.useState(()=>new KE);return d.createElement("primitive",(0,C.Z)({object:F,ref:E,"material-uniforms-mieCoefficient-value":l,"material-uniforms-mieDirectionalG-value":c,"material-uniforms-rayleigh-value":p,"material-uniforms-sunPosition-value":m,"material-uniforms-turbidity-value":h,scale:R},v))});class AT extends i.ShaderMaterial{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <encodings_fragment>
      }`})}}const yT=s=>new i.Vector3().setFromSpherical(new i.Spherical(s,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),vT=d.forwardRef(({radius:s=100,depth:t=50,count:r=5e3,saturation:l=0,factor:c=4,fade:p=!1,speed:h=1},m)=>{const v=d.useRef(),[E,x,T]=d.useMemo(()=>{const F=[],U=[],P=Array.from({length:r},()=>(.5+.5*Math.random())*c),O=new i.Color;let z=s+t;const L=t/r;for(let k=0;k<r;k++)z-=L*Math.random(),F.push(...yT(z).toArray()),O.setHSL(k/r,l,.9),U.push(O.r,O.g,O.b);return[new Float32Array(F),new Float32Array(U),new Float32Array(P)]},[r,t,c,s,l]);(0,_.A)(F=>v.current&&(v.current.uniforms.time.value=F.clock.getElapsedTime()*h));const[R]=d.useState(()=>new AT);return d.createElement("points",{ref:m},d.createElement("bufferGeometry",null,d.createElement("bufferAttribute",{attach:"attributes-position",args:[E,3]}),d.createElement("bufferAttribute",{attach:"attributes-color",args:[x,3]}),d.createElement("bufferAttribute",{attach:"attributes-size",args:[T,1]})),d.createElement("primitive",{ref:v,object:R,attach:"material",blending:i.AdditiveBlending,"uniforms-fade-value":p,depthWrite:!1,transparent:!0,vertexColors:!0}))}),_T="https://rawcdn.githack.com/pmndrs/drei-assets/9225a9f1fbd449d9411125c2f419b843d0308c9f/cloud.png";function ET(E){var x=E,{opacity:s=.5,speed:t=.4,width:r=10,depth:l=1.5,segments:c=20,texture:p=_T,color:h="#ffffff",depthTest:m=!0}=x,v=Cn(x,["opacity","speed","width","depth","segments","texture","color","depthTest"]);const T=d.useRef(),R=fp(p),F=d.useMemo(()=>[...new Array(c)].map((U,P)=>({x:r/2-Math.random()*r,y:r/2-Math.random()*r,scale:.4+Math.sin((P+1)/c*Math.PI)*((.2+Math.random())*10),density:Math.max(.2,Math.random()),rotation:Math.max(.002,.005*Math.random())*t})),[r,c,t]);return(0,_.A)(U=>{var P;return(P=T.current)==null?void 0:P.children.forEach((O,z)=>{O.children[0].rotation.z+=F[z].rotation,O.children[0].scale.setScalar(F[z].scale+(1+Math.sin(U.clock.getElapsedTime()/10))/2*z/10)})}),d.createElement("group",v,d.createElement("group",{position:[0,0,c/2*l],ref:T},F.map(({x:U,y:P,scale:O,density:z},L)=>d.createElement(ey,{key:L,position:[U,P,-L*l]},d.createElement(tx,{scale:O,rotation:[0,0,0]},d.createElement("meshStandardMaterial",{map:R,transparent:!0,opacity:O/6*z*s,depthTest:m,color:h}))))))}const bT=hp({time:0,pixelRatio:1},` uniform float pixelRatio;
    uniform float time;
    attribute float size;  
    attribute float speed;  
    attribute float opacity;
    attribute vec3 noise;
    attribute vec3 color;
    varying vec3 vColor;
    varying float vOpacity;
    void main() {
      vec4 modelPosition = modelMatrix * vec4(position, 1.0);
      modelPosition.y += sin(time * speed + modelPosition.x * noise.x * 100.0) * 0.2;
      modelPosition.z += cos(time * speed + modelPosition.x * noise.y * 100.0) * 0.2;
      modelPosition.x += cos(time * speed + modelPosition.x * noise.z * 100.0) * 0.2;
      vec4 viewPosition = viewMatrix * modelPosition;
      vec4 projectionPostion = projectionMatrix * viewPosition;
      gl_Position = projectionPostion;
      gl_PointSize = size * 25. * pixelRatio;
      gl_PointSize *= (1.0 / - viewPosition.z);
      vColor = color;
      vOpacity = opacity;
    }`,` varying vec3 vColor;
    varying float vOpacity;
    void main() {
      float distanceToCenter = distance(gl_PointCoord, vec2(0.5));
      float strength = 0.05 / distanceToCenter - 0.1;
      gl_FragColor = vec4(vColor, strength * vOpacity);
      #include <tonemapping_fragment>
      #include <encodings_fragment>
    }`),yx=s=>s&&s.constructor===Float32Array,MT=s=>[s.r,s.g,s.b],vx=s=>s instanceof i.Vector2||s instanceof i.Vector3||s instanceof i.Vector4,_x=s=>Array.isArray(s)?s:vx(s)?s.toArray():[s,s,s];function DA(s,t,r){return d.useMemo(()=>{if(t!==void 0){if(yx(t))return t;if(t instanceof i.Color){const l=Array.from({length:s*3},()=>MT(t)).flat();return Float32Array.from(l)}else if(vx(t)||Array.isArray(t)){const l=Array.from({length:s*3},()=>_x(t)).flat();return Float32Array.from(l)}return Float32Array.from({length:s},()=>t)}return Float32Array.from({length:s},r)},[t])}const xT=d.forwardRef((x,E)=>{var T=x,{noise:s=1,count:t=100,speed:r=1,opacity:l=1,scale:c=1,size:p,color:h,children:m}=T,v=Cn(T,["noise","count","speed","opacity","scale","size","color","children"]);d.useMemo(()=>(0,_.e)({SparklesImplMaterial:bT}),[]);const R=d.useRef(null),F=(0,_.z)(H=>H.viewport.dpr),U=d.useMemo(()=>Float32Array.from(Array.from({length:t},()=>_x(c).map(i.MathUtils.randFloatSpread)).flat()),[t,c]),P=DA(t,p,Math.random),O=DA(t,l),z=DA(t,r),L=DA(t*3,s),k=DA(h===void 0?t*3:t,yx(h)?h:new i.Color(h),()=>1);return(0,_.A)(H=>{R.current&&R.current.material&&(R.current.material.time=H.clock.elapsedTime)}),d.useImperativeHandle(E,()=>R.current,[]),d.createElement("points",(0,C.Z)({key:`particle-${t}-${JSON.stringify(c)}`},v,{ref:R}),d.createElement("bufferGeometry",null,d.createElement("bufferAttribute",{attach:"attributes-position",args:[U,3]}),d.createElement("bufferAttribute",{attach:"attributes-size",args:[P,1]}),d.createElement("bufferAttribute",{attach:"attributes-opacity",args:[O,1]}),d.createElement("bufferAttribute",{attach:"attributes-speed",args:[z,1]}),d.createElement("bufferAttribute",{attach:"attributes-color",args:[k,3]}),d.createElement("bufferAttribute",{attach:"attributes-noise",args:[L,3]})),m||d.createElement("sparklesImplMaterial",{transparent:!0,pixelRatio:F,depthWrite:!1}))});function CT(s){switch(s){case 64:return"-64px";case 128:return"-128px";case 256:return"-256px";case 512:return"-512px";default:return""}}const ST="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master/matcaps.json",wT="https://rawcdn.githack.com/emmelleppi/matcaps/9b36ccaaf0a24881a39062d05566c9e92be4aa0d";function TT(s=0,t=1024,r){const l=(0,Hc.Rq)(()=>fetch(ST).then(x=>x.json()),["matcapList"]),c=l[0],p=d.useMemo(()=>Object.keys(l).length,[]),m=`${d.useMemo(()=>typeof s=="string"?s:typeof s=="number"?l[s]:null,[s])||c}${CT(t)}.png`,v=`${wT}/${t}/${m}`;return[fp(v,r),v,p]}const BT="https://rawcdn.githack.com/pmndrs/drei-assets/7a3104997e1576f83472829815b00880d88b32fb",RT="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master/normals/normals.json";function IT(s=0,t={},r){const{repeat:l=[1,1],anisotropy:c=1,offset:p=[0,0]}=t,h=(0,Hc.Rq)(()=>fetch(RT).then(R=>R.json()),["normalsList"]),m=d.useMemo(()=>Object.keys(h).length,[]),v=h[0],E=h[s]||v,x=`${BT}/normals/${E}`,T=fp(x,r);return d.useLayoutEffect(()=>{T&&(T.wrapS=T.wrapT=i.RepeatWrapping,T.repeat=new i.Vector2(l[0],l[1]),T.offset=new i.Vector2(p[0],p[1]),T.anisotropy=c)},[T,c,l,p]),[T,x,m]}const ng={uniforms:{strokeOpacity:1,fillOpacity:.25,fillMix:0,thickness:.05,colorBackfaces:!1,dashInvert:!0,dash:!1,dashRepeats:4,dashLength:.5,squeeze:!1,squeezeMin:.2,squeezeMax:1,stroke:new i.Color("#ff0000"),backfaceStroke:new i.Color("#0000ff"),fill:new i.Color("#00ff00")},vertex:`
	  attribute vec3 barycentric;
	
		varying vec3 v_edges_Barycentric;
		varying vec3 v_edges_Position;

		void initWireframe() {
			v_edges_Barycentric = barycentric;
			v_edges_Position = position.xyz;
		}
	  `,fragment:`
		#ifndef PI
	  	#define PI 3.1415926535897932384626433832795
		#endif
  
	  varying vec3 v_edges_Barycentric;
	  varying vec3 v_edges_Position;
  
	  uniform float strokeOpacity;
	  uniform float fillOpacity;
	  uniform float fillMix;
	  uniform float thickness;
	  uniform bool colorBackfaces;
  
	  // Dash
	  uniform bool dashInvert;
	  uniform bool dash;
	  uniform bool dashOnly;
	  uniform float dashRepeats;
	  uniform float dashLength;
  
	  // Squeeze
	  uniform bool squeeze;
	  uniform float squeezeMin;
	  uniform float squeezeMax;
  
	  // Colors
	  uniform vec3 stroke;
	  uniform vec3 backfaceStroke;
	  uniform vec3 fill;
  
	  // This is like
	  float wireframe_aastep(float threshold, float dist) {
		  float afwidth = fwidth(dist) * 0.5;
		  return smoothstep(threshold - afwidth, threshold + afwidth, dist);
	  }
  
	  float wireframe_map(float value, float min1, float max1, float min2, float max2) {
		  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);
	  }
  
	  float getWireframe() {
			vec3 barycentric = v_edges_Barycentric;
		
			// Distance from center of each triangle to its edges.
			float d = min(min(barycentric.x, barycentric.y), barycentric.z);

			// for dashed rendering, we can use this to get the 0 .. 1 value of the line length
			float positionAlong = max(barycentric.x, barycentric.y);
			if (barycentric.y < barycentric.x && barycentric.y < barycentric.z) {
				positionAlong = 1.0 - positionAlong;
			}

			// the thickness of the stroke
			float computedThickness = wireframe_map(thickness, 0.0, 1.0, 0.0, 0.34);

			// if we want to shrink the thickness toward the center of the line segment
			if (squeeze) {
				computedThickness *= mix(squeezeMin, squeezeMax, (1.0 - sin(positionAlong * PI)));
			}

			// Create dash pattern
			if (dash) {
				// here we offset the stroke position depending on whether it
				// should overlap or not
				float offset = 1.0 / dashRepeats * dashLength / 2.0;
				if (!dashInvert) {
					offset += 1.0 / dashRepeats / 2.0;
				}

				// if we should animate the dash or not
				// if (dashAnimate) {
				// 	offset += time * 0.22;
				// }

				// create the repeating dash pattern
				float pattern = fract((positionAlong + offset) * dashRepeats);
				computedThickness *= 1.0 - wireframe_aastep(dashLength, pattern);
			}

			// compute the anti-aliased stroke edge  
			float edge = 1.0 - wireframe_aastep(computedThickness, d);

			return edge;
	  }
	  `},FT=hp(ng.uniforms,ng.vertex+`
  	void main() {
		initWireframe();
		gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
	}
  `,ng.fragment+`
  void main () {
		// Compute color

		float edge = getWireframe();
		vec4 colorStroke = vec4(stroke, edge);

		#ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		#endif
    
		vec4 colorFill = vec4(fill, fillOpacity);
		vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		gl_FragColor = outColor;
	}
  `);function OT(s,t){s.onBeforeCompile=r=>{r.uniforms=Zn(Zn({},r.uniforms),t),r.vertexShader=r.vertexShader.replace("void main() {",`
		  ${ng.vertex}
		  void main() {
			initWireframe();
		`),r.fragmentShader=r.fragmentShader.replace("void main() {",`
		  ${ng.fragment}
		  void main() {
		`),r.fragmentShader=r.fragmentShader.replace("#include <color_fragment>",`
		  #include <color_fragment>
			  float edge = getWireframe();
		  vec4 colorStroke = vec4(stroke, edge);
		  #ifdef FLIP_SIDED
			colorStroke.rgb = backfaceStroke;
		  #endif
		  vec4 colorFill = vec4(mix(diffuseColor.rgb, fill, fillMix), mix(diffuseColor.a, fillOpacity, fillMix));
		  vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);

		  diffuseColor.rgb = outColor.rgb;
		  diffuseColor.a *= outColor.a;
		`)},s.side=i.DoubleSide,s.transparent=!0}function DT(s,t){d.useEffect(()=>{var r;return void(s.fillOpacity.value=(r=t.fillOpacity)!==null&&r!==void 0?r:s.fillOpacity.value)},[t.fillOpacity]),d.useEffect(()=>{var r;return void(s.fillMix.value=(r=t.fillMix)!==null&&r!==void 0?r:s.fillMix.value)},[t.fillMix]),d.useEffect(()=>{var r;return void(s.strokeOpacity.value=(r=t.strokeOpacity)!==null&&r!==void 0?r:s.strokeOpacity.value)},[t.strokeOpacity]),d.useEffect(()=>{var r;return void(s.thickness.value=(r=t.thickness)!==null&&r!==void 0?r:s.thickness.value)},[t.thickness]),d.useEffect(()=>void(s.colorBackfaces.value=!!t.colorBackfaces),[t.colorBackfaces]),d.useEffect(()=>void(s.dash.value=!!t.dash),[t.dash]),d.useEffect(()=>void(s.dashInvert.value=!!t.dashInvert),[t.dashInvert]),d.useEffect(()=>{var r;return void(s.dashRepeats.value=(r=t.dashRepeats)!==null&&r!==void 0?r:s.dashRepeats.value)},[t.dashRepeats]),d.useEffect(()=>{var r;return void(s.dashLength.value=(r=t.dashLength)!==null&&r!==void 0?r:s.dashLength.value)},[t.dashLength]),d.useEffect(()=>void(s.squeeze.value=!!t.squeeze),[t.squeeze]),d.useEffect(()=>{var r;return void(s.squeezeMin.value=(r=t.squeezeMin)!==null&&r!==void 0?r:s.squeezeMin.value)},[t.squeezeMin]),d.useEffect(()=>{var r;return void(s.squeezeMax.value=(r=t.squeezeMax)!==null&&r!==void 0?r:s.squeezeMax.value)},[t.squeezeMax]),d.useEffect(()=>void(s.stroke.value=t.stroke?new i.Color(t.stroke):s.stroke.value),[t.stroke]),d.useEffect(()=>void(s.fill.value=t.fill?new i.Color(t.fill):s.fill.value),[t.fill]),d.useEffect(()=>void(s.backfaceStroke.value=t.backfaceStroke?new i.Color(t.backfaceStroke):s.backfaceStroke.value),[t.backfaceStroke])}var LT=A(5108);_.e({MeshWireframeMaterial:FT});function PT(s){return!!(s!=null&&s.geometry)}function kT(s){return!!(s!=null&&s.isBufferGeometry)}function zT(s){return!!(s!=null&&s.current)}function Ex(s){return(s==null?void 0:s.current)!==void 0}function bx(s){return s.type==="WireframeGeometry"}function GT(){const s={};for(const t in ng.uniforms)s[t]={value:ng.uniforms[t]};return s}function UT(s,t){const l=s.getAttribute("position").count,c=[];for(let p=0;p<l;p++){const h=p%2===0,m=t?1:0;h?c.push(0,0,1,0,1,0,1,0,m):c.push(0,1,0,0,0,1,1,0,m)}return new i.BufferAttribute(Float32Array.from(c),3)}function Mx(s){const t=zT(s)?s.current:s;if(kT(t))return t;{if(bx(t))throw new Error("Wireframe: WireframeGeometry is not supported.");const r=t.parent;if(PT(r)){if(bx(r.geometry))throw new Error("Wireframe: WireframeGeometry is not supported.");return r.geometry}}}function xx(s,t){if(s.index){LT.warn("Wireframe: Requires non-indexed geometry, converting to non-indexed geometry.");const l=s.toNonIndexed();s.copy(l),s.setIndex(null)}const r=UT(s,t);s.setAttribute("barycentric",r)}function NT(l){var c=l,{geometry:s,simplify:t=!1}=c,r=Cn(c,["geometry","simplify"]);const[p,h]=d.useState(null);d.useLayoutEffect(()=>{const v=Mx(s);if(!v)throw new Error("Wireframe: geometry prop must be a BufferGeometry or a ref to a BufferGeometry.");xx(v,t),Ex(s)&&h(v)},[t,s]);const m=Ex(s)?p:s;return d.createElement(d.Fragment,null,m&&d.createElement("mesh",{geometry:m},d.createElement("meshWireframeMaterial",(0,C.Z)({attach:"material",transparent:!0,side:i.DoubleSide,polygonOffset:!0,polygonOffsetFactor:-4},r,{extensions:{derivatives:!0,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1}}))))}function jT(r){var l=r,{simplify:s=!1}=l,t=Cn(l,["simplify"]);const c=d.useRef(null),p=d.useMemo(()=>GT(),[ng.uniforms]);return DT(p,t),d.useLayoutEffect(()=>{const h=Mx(c);if(!h)throw new Error("Wireframe: Must be a child of a Mesh, Line or Points object or specify a geometry prop.");const m=h.clone();return xx(h,s),()=>{h.copy(m),m.dispose()}},[s]),d.useLayoutEffect(()=>{const h=c.current.parent,m=h.material.clone();return OT(h.material,p),()=>{h.material.dispose(),h.material=m}},[]),d.createElement("object3D",{ref:c})}function HT(r){var l=r,{geometry:s}=l,t=Cn(l,["geometry"]);return s?d.createElement(NT,(0,C.Z)({geometry:s},t)):d.createElement(jT,t)}const Cx=new i.Matrix4,XE=new i.Ray,Sx=new i.Sphere,WT=new i.Vector3;class wx extends i.Group{constructor(){super(),this.size=0,this.color=new i.Color("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var t;return(t=this.instance.current)==null?void 0:t.geometry}raycast(t,r){var l,c;const p=this.instance.current;if(!p||!p.geometry)return;const h=p.userData.instances.indexOf(this.instanceKey);if(h===-1||h>p.geometry.drawRange.count)return;const m=(l=(c=t.params.Points)==null?void 0:c.threshold)!==null&&l!==void 0?l:1;if(Sx.set(this.getWorldPosition(WT),m),t.ray.intersectsSphere(Sx)===!1)return;Cx.copy(p.matrixWorld).invert(),XE.copy(t.ray).applyMatrix4(Cx);const v=m/((this.scale.x+this.scale.y+this.scale.z)/3),E=v*v,x=XE.distanceSqToPoint(this.position);if(x<E){const T=new i.Vector3;XE.closestPointToPoint(this.position,T),T.applyMatrix4(this.matrixWorld);const R=t.ray.origin.distanceTo(T);if(R<t.near||R>t.far)return;r.push({distance:R,distanceToRay:Math.sqrt(x),point:T,index:h,face:null,object:this})}}}let Bm,LA;const Tx=d.createContext(null),Bx=new i.Matrix4,Rx=new i.Vector3,VT=d.forwardRef((p,c)=>{var h=p,{children:s,range:t,limit:r=1e3}=h,l=Cn(h,["children","range","limit"]);const m=d.useRef(null),[v,E]=d.useState([]),[[x,T,R]]=d.useState(()=>[new Float32Array(r*3),Float32Array.from({length:r*3},()=>1),Float32Array.from({length:r},()=>1)]);d.useEffect(()=>{m.current.geometry.attributes.position.needsUpdate=!0}),(0,_.A)(()=>{for(m.current.updateMatrix(),m.current.updateMatrixWorld(),Bx.copy(m.current.matrixWorld).invert(),m.current.geometry.drawRange.count=Math.min(r,t!==void 0?t:r,v.length),Bm=0;Bm<v.length;Bm++)LA=v[Bm].current,LA.getWorldPosition(Rx).applyMatrix4(Bx),Rx.toArray(x,Bm*3),m.current.geometry.attributes.position.needsUpdate=!0,LA.matrixWorldNeedsUpdate=!0,LA.color.toArray(T,Bm*3),m.current.geometry.attributes.color.needsUpdate=!0,R.set([LA.size],Bm),m.current.geometry.attributes.size.needsUpdate=!0});const F=d.useMemo(()=>({getParent:()=>m,subscribe:U=>(E(P=>[...P,U]),()=>E(P=>P.filter(O=>O.current!==U.current)))}),[]);return d.createElement("points",(0,C.Z)({userData:{instances:v},matrixAutoUpdate:!1,ref:mt([c,m]),raycast:()=>null},l),d.createElement("bufferGeometry",null,d.createElement("bufferAttribute",{attach:"attributes-position",count:x.length/3,array:x,itemSize:3,usage:i.DynamicDrawUsage}),d.createElement("bufferAttribute",{attach:"attributes-color",count:T.length/3,array:T,itemSize:3,usage:i.DynamicDrawUsage}),d.createElement("bufferAttribute",{attach:"attributes-size",count:R.length,array:R,itemSize:1,usage:i.DynamicDrawUsage})),d.createElement(Tx.Provider,{value:F},s))}),QT=d.forwardRef((l,r)=>{var c=l,{children:s}=c,t=Cn(c,["children"]);d.useMemo(()=>(0,_.e)({PositionPoint:wx}),[]);const p=d.useRef(),{subscribe:h,getParent:m}=d.useContext(Tx);return d.useLayoutEffect(()=>h(p),[]),d.createElement("positionPoint",(0,C.Z)({instance:m(),instanceKey:p,ref:mt([r,p])},t),s)}),Ix=d.forwardRef((m,h)=>{var v=m,{children:s,positions:t,colors:r,sizes:l,stride:c=3}=v,p=Cn(v,["children","positions","colors","sizes","stride"]);const E=d.useRef(null);return(0,_.A)(()=>{const x=E.current.geometry.attributes;x.position.needsUpdate=!0,r&&(x.color.needsUpdate=!0),l&&(x.size.needsUpdate=!0)}),d.createElement("points",(0,C.Z)({ref:mt([h,E])},p),d.createElement("bufferGeometry",null,d.createElement("bufferAttribute",{attach:"attributes-position",count:t.length/c,array:t,itemSize:c,usage:i.DynamicDrawUsage}),r&&d.createElement("bufferAttribute",{attach:"attributes-color",count:r.length/c,array:r,itemSize:3,usage:i.DynamicDrawUsage}),l&&d.createElement("bufferAttribute",{attach:"attributes-size",count:l.length/c,array:l,itemSize:1,usage:i.DynamicDrawUsage})),s)}),KT=d.forwardRef((s,t)=>s.positions instanceof Float32Array?d.createElement(Ix,(0,C.Z)({},s,{ref:t})):d.createElement(VT,(0,C.Z)({},s,{ref:t})));var XT=A(5697),PA=A.n(XT);function Fx(s){return Ox(s.children,s.components)}Fx.propTypes={children:PA().func.isRequired,components:PA().arrayOf(PA().oneOfType([PA().element,PA().func])).isRequired};function Ox(s,t,r){if(r=r||[],!t[0])return s(r);function l(c){return Ox(s,t.slice(1),r.concat([c]))}return typeof t[0]=="function"?t[0]({results:r,render:l}):(0,d.cloneElement)(t[0],{children:l})}const Dx=new i.Matrix4,Lx=new i.Matrix4,F2=[],kA=new i.Mesh;class YT extends i.Group{constructor(){super(),this.color=new i.Color("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var t;return(t=this.instance.current)==null?void 0:t.geometry}raycast(t,r){const l=this.instance.current;if(!l||!l.geometry||!l.material)return;kA.geometry=l.geometry;const c=l.matrixWorld,p=l.userData.instances.indexOf(this.instanceKey);if(!(p===-1||p>l.count)){l.getMatrixAt(p,Dx),Lx.multiplyMatrices(c,Dx),kA.matrixWorld=Lx,l.material instanceof i.Material?kA.material.side=l.material.side:kA.material.side=l.material[0].side,kA.raycast(t,F2);for(let h=0,m=F2.length;h<m;h++){const v=F2[h];v.instanceId=p,v.object=this,r.push(v)}F2.length=0}}}const Px=d.createContext(null),kx=new i.Matrix4,zx=new i.Matrix4,JT=new i.Matrix4,Gx=new i.Vector3,Ux=new i.Quaternion,Nx=new i.Vector3,jx=d.forwardRef((c,l)=>{var p=c,{context:s,children:t}=p,r=Cn(p,["context","children"]);d.useMemo(()=>(0,_.e)({PositionMesh:YT}),[]);const h=d.useRef(),{subscribe:m,getParent:v}=d.useContext(s||Px);return d.useLayoutEffect(()=>m(h),[]),d.createElement("positionMesh",(0,C.Z)({instance:v(),instanceKey:h,ref:mt([l,h])},r),t)}),Hx=d.forwardRef((h,p)=>{var m=h,{children:s,range:t,limit:r=1e3,frames:l=1/0}=m,c=Cn(m,["children","range","limit","frames"]);const[{context:v,instance:E}]=d.useState(()=>{const L=d.createContext(null);return{context:L,instance:d.forwardRef((k,H)=>d.createElement(jx,(0,C.Z)({context:L},k,{ref:H})))}}),x=d.useRef(null),[T,R]=d.useState([]),[[F,U]]=d.useState(()=>{const L=new Float32Array(r*16);for(let k=0;k<r;k++)JT.identity().toArray(L,k*16);return[L,new Float32Array([...new Array(r*3)].map(()=>1))]});d.useEffect(()=>{x.current.instanceMatrix.needsUpdate=!0});let P=0,O=0;(0,_.A)(()=>{if(l===1/0||P<l){x.current.updateMatrix(),x.current.updateMatrixWorld(),kx.copy(x.current.matrixWorld).invert(),O=Math.min(r,t!==void 0?t:r,T.length),x.current.count=O,x.current.instanceMatrix.updateRange.count=O*16,x.current.instanceColor.updateRange.count=O*3;for(let L=0;L<T.length;L++){const k=T[L].current;k.matrixWorld.decompose(Gx,Ux,Nx),zx.compose(Gx,Ux,Nx).premultiply(kx),zx.toArray(F,L*16),x.current.instanceMatrix.needsUpdate=!0,k.color.toArray(U,L*3),x.current.instanceColor.needsUpdate=!0}P++}});const z=d.useMemo(()=>({getParent:()=>x,subscribe:L=>(R(k=>[...k,L]),()=>R(k=>k.filter(H=>H.current!==L.current)))}),[]);return d.createElement("instancedMesh",(0,C.Z)({userData:{instances:T},matrixAutoUpdate:!1,ref:mt([p,x]),args:[null,null,0],raycast:()=>null},c),d.createElement("instancedBufferAttribute",{attach:"instanceMatrix",count:F.length/16,array:F,itemSize:16,usage:i.DynamicDrawUsage}),d.createElement("instancedBufferAttribute",{attach:"instanceColor",count:U.length/3,array:U,itemSize:3,usage:i.DynamicDrawUsage}),typeof s=="function"?d.createElement(v.Provider,{value:z},s(E)):d.createElement(Px.Provider,{value:z},s))}),ZT=d.forwardRef(function(p,c){var h=p,{meshes:t,children:r}=h,l=Cn(h,["meshes","children"]);const m=Array.isArray(t);if(!m)for(const v of Object.keys(t))t[v].isMesh||delete t[v];return d.createElement("group",{ref:c},d.createElement(Fx,{components:(m?t:Object.values(t)).map(({geometry:v,material:E})=>d.createElement(Hx,(0,C.Z)({key:v.uuid,geometry:v,material:E},l)))},v=>m?r(...v):r(Object.keys(t).filter(E=>t[E].isMesh).reduce((E,x,T)=>os(Zn({},E),{[x]:v[T]}),{}))))}),Wx=d.createContext(null),qT=d.forwardRef((s,t)=>{d.useMemo(()=>(0,_.e)({SegmentObject:Vx}),[]);const P=s,{limit:r=1e3,lineWidth:l=1,children:c}=P,p=Cn(P,["limit","lineWidth","children"]),[h,m]=d.useState([]),[v]=d.useState(()=>new ly),[E]=d.useState(()=>new $m),[x]=d.useState(()=>new qm),[T]=d.useState(()=>new i.Vector2(512,512)),[R]=d.useState(()=>Array(r*6).fill(0)),[F]=d.useState(()=>Array(r*6).fill(0)),U=d.useMemo(()=>({subscribe:O=>(m(z=>[...z,O]),()=>m(z=>z.filter(L=>L.current!==O.current)))}),[]);return(0,_.A)(()=>{for(let z=0;z<r;z++){var O;const L=(O=h[z])==null?void 0:O.current;L&&(R[z*6+0]=L.start.x,R[z*6+1]=L.start.y,R[z*6+2]=L.start.z,R[z*6+3]=L.end.x,R[z*6+4]=L.end.y,R[z*6+5]=L.end.z,F[z*6+0]=L.color.r,F[z*6+1]=L.color.g,F[z*6+2]=L.color.b,F[z*6+3]=L.color.r,F[z*6+4]=L.color.g,F[z*6+5]=L.color.b)}x.setColors(F),x.setPositions(R),v.computeLineDistances()}),d.createElement("primitive",{object:v,ref:t},d.createElement("primitive",{object:x,attach:"geometry"}),d.createElement("primitive",(0,C.Z)({object:E,attach:"material",vertexColors:!0,resolution:T,linewidth:l},p)),d.createElement(Wx.Provider,{value:U},c))});class Vx{constructor(){this.color=new i.Color("white"),this.start=new i.Vector3(0,0,0),this.end=new i.Vector3(0,0,0)}}const Qx=s=>s instanceof i.Vector3?s:new i.Vector3(...typeof s=="number"?[s,s,s]:s),$T=d.forwardRef(({color:s,start:t,end:r},l)=>{const c=d.useContext(Wx);if(!c)throw"Segment must used inside Segments component.";const p=d.useRef(null);return d.useLayoutEffect(()=>c.subscribe(p),[]),d.createElement("segmentObject",{ref:mt([p,l]),color:s,start:Qx(t),end:Qx(r)})}),eB=d.forwardRef((p,c)=>{var h=p,{children:s,hysteresis:t=0,distances:r}=h,l=Cn(h,["children","hysteresis","distances"]);const m=d.useRef(null);return d.useLayoutEffect(()=>{const{current:v}=m;v.levels.length=0,v.children.forEach((E,x)=>v.levels.push({object:E,hysteresis:t,distance:r[x]}))}),(0,_.A)(v=>{var E;return(E=m.current)==null?void 0:E.update(v.camera)}),d.createElement("lOD",(0,C.Z)({ref:mt([m,c])},l),s)});function tB({all:s,scene:t,camera:r}){const l=(0,_.z)(({gl:h})=>h),c=(0,_.z)(({camera:h})=>h),p=(0,_.z)(({scene:h})=>h);return d.useLayoutEffect(()=>{const h=[];s&&(t||p).traverse(E=>{E.visible===!1&&(h.push(E),E.visible=!0)}),l.compile(t||p,r||c);const m=new i.WebGLCubeRenderTarget(128);new i.CubeCamera(.01,1e5,m).update(l,t||p),m.dispose(),h.forEach(E=>E.visible=!1)},[]),null}function nB(){const s=(0,_.z)(t=>t.gl);return(0,d.useEffect)(()=>(s.shadowMap.autoUpdate=!1,s.shadowMap.needsUpdate=!0,()=>{s.shadowMap.autoUpdate=s.shadowMap.needsUpdate=!0}),[s.shadowMap]),null}const Kx=new i.Matrix4,Xx=new i.Ray,YE=new i.Sphere,JE=new i.Vector3;function rB(s,t){const r=this.geometry,l=this.material,c=this.matrixWorld;l!==void 0&&(r.boundingSphere===null&&r.computeBoundingSphere(),YE.copy(r.boundingSphere),YE.applyMatrix4(c),s.ray.intersectsSphere(YE)!==!1&&(Kx.copy(c).invert(),Xx.copy(s.ray).applyMatrix4(Kx),!(r.boundingBox!==null&&Xx.intersectBox(r.boundingBox,JE)===null)&&t.push({distance:JE.distanceTo(s.ray.origin),point:JE.clone(),object:this})))}function iB({pixelated:s}){const t=(0,_.z)(h=>h.gl),r=(0,_.z)(h=>h.internal.active),l=(0,_.z)(h=>h.performance.current),c=(0,_.z)(h=>h.viewport.initialDpr),p=(0,_.z)(h=>h.setDpr);return d.useEffect(()=>{const h=t.domElement;return()=>{r&&p(c),s&&h&&(h.style.imageRendering="auto")}},[]),d.useEffect(()=>{p(l*c),s&&t.domElement&&(t.domElement.style.imageRendering=l===1?"auto":"pixelated")},[l]),null}function oB(){const s=(0,_.z)(l=>l.get),t=(0,_.z)(l=>l.setEvents),r=(0,_.z)(l=>l.performance.current);return d.useEffect(()=>{const l=s().events.enabled;return()=>t({enabled:l})},[]),d.useEffect(()=>t({enabled:r===1}),[r]),null}const Yx=(0,d.createContext)(null);function sB({iterations:s=10,ms:t=250,threshold:r=.75,step:l=.1,factor:c=.5,flipflops:p=1/0,bounds:h=R=>R>100?[60,100]:[40,60],onIncline:m,onDecline:v,onChange:E,onFallback:x,children:T}){const R=Math.pow(10,0),[F,U]=(0,d.useState)(()=>({fps:0,index:0,factor:c,flipped:0,refreshrate:0,fallback:!1,frames:[],averages:[],subscriptions:new Map,subscribe:O=>{const z=Symbol();return F.subscriptions.set(z,O.current),()=>void F.subscriptions.delete(z)}}));let P=0;return(0,_.A)(()=>{const{frames:O,averages:z}=F;if(!F.fallback&&z.length<s){O.push(performance.now());const L=O[O.length-1]-O[0];if(L>=t){if(F.fps=Math.round(O.length/L*1e3*R)/R,F.refreshrate=Math.max(F.refreshrate,F.fps),z[F.index++%s]=F.fps,z.length===s){const[k,H]=h(F.refreshrate),X=z.filter(J=>J>=H),W=z.filter(J=>J<k);X.length>s*r&&(F.factor=Math.min(1,F.factor+l),F.flipped++,m&&m(F),F.subscriptions.forEach(J=>J.onIncline&&J.onIncline(F))),W.length>s*r&&(F.factor=Math.max(0,F.factor-l),F.flipped++,v&&v(F),F.subscriptions.forEach(J=>J.onDecline&&J.onDecline(F))),P!==F.factor&&(P=F.factor,E&&E(F),F.subscriptions.forEach(J=>J.onChange&&J.onChange(F))),F.flipped>p&&!F.fallback&&(F.fallback=!0,x&&x(F),F.subscriptions.forEach(J=>J.onFallback&&J.onFallback(F))),F.averages=[]}F.frames=[]}}}),d.createElement(Yx.Provider,{value:F},T)}function aB({onIncline:s,onDecline:t,onChange:r,onFallback:l}){const c=(0,d.useContext)(Yx),p=(0,d.useRef)({onIncline:s,onDecline:t,onChange:r,onFallback:l});(0,d.useLayoutEffect)(()=>{p.current.onIncline=s,p.current.onDecline=t,p.current.onChange=r,p.current.onFallback=l},[s,t,r,l]),(0,d.useLayoutEffect)(()=>c.subscribe(p),[c])}const Jx=d.forwardRef((F,R)=>{var U=F,{children:s,compute:t,width:r,height:l,samples:c=8,renderPriority:p=0,eventPriority:h=0,frames:m=1/0,stencilBuffer:v=!1,depthBuffer:E=!0,generateMipmaps:x=!1}=U,T=Cn(U,["children","compute","width","height","samples","renderPriority","eventPriority","frames","stencilBuffer","depthBuffer","generateMipmaps"]);const{size:P,viewport:O}=(0,_.z)(),z=rc((r||P.width)*O.dpr,(l||P.height)*O.dpr,{samples:c,stencilBuffer:v,depthBuffer:E,generateMipmaps:x}),[L]=d.useState(()=>new i.Scene),k=d.useCallback((H,X,W)=>{var J,Y;let ce=(J=z.texture)==null?void 0:J.__r3f.parent;for(;ce&&!(ce instanceof i.Object3D);)ce=ce.__r3f.parent;if(!ce)return!1;W.raycaster.camera||W.events.compute(H,W,(Y=W.previousRoot)==null?void 0:Y.getState());const[ue]=W.raycaster.intersectObject(ce);if(!ue)return!1;const ge=ue.uv;if(!ge)return!1;X.raycaster.setFromCamera(X.pointer.set(ge.x*2-1,ge.y*2-1),X.camera)},[]);return d.useImperativeHandle(R,()=>z.texture,[z]),d.createElement(d.Fragment,null,(0,_.g)(d.createElement(lB,{renderPriority:p,frames:m,fbo:z},s,d.createElement("group",{onPointerOver:()=>null})),L,{events:{compute:t||k,priority:h}}),d.createElement("primitive",(0,C.Z)({object:z.texture},T)))});function lB({frames:s,renderPriority:t,children:r,fbo:l}){let c=0,p;return(0,_.A)(h=>{(s===1/0||c<s)&&(p=h.gl.autoClear,h.gl.autoClear=!0,h.gl.setRenderTarget(l),h.gl.render(h.scene,h.camera),h.gl.setRenderTarget(null),h.gl.autoClear=p,c++)},t),d.createElement(d.Fragment,null,r)}const cB=d.forwardRef((p,c)=>{var h=p,{id:s=1,colorWrite:t=!1,depthWrite:r=!1}=h,l=Cn(h,["id","colorWrite","depthWrite"]);const m=d.useRef(null),v=d.useMemo(()=>({colorWrite:t,depthWrite:r,stencilWrite:!0,stencilRef:s,stencilFunc:i.AlwaysStencilFunc,stencilFail:i.ReplaceStencilOp,stencilZFail:i.ReplaceStencilOp,stencilZPass:i.ReplaceStencilOp}),[s,t,r]);return d.useLayoutEffect(()=>{Object.assign(m.current.material,v)}),d.useImperativeHandle(c,()=>m.current,[]),d.createElement("mesh",(0,C.Z)({ref:m,renderOrder:-s},l))});function pB(s,t=!1){return{stencilWrite:!0,stencilRef:s,stencilFunc:t?i.NotEqualStencilFunc:i.EqualStencilFunc,stencilFail:i.KeepStencilOp,stencilZFail:i.KeepStencilOp,stencilZPass:i.KeepStencilOp}}const uB=hp({blur:0,map:null,sdf:null,blend:0,size:0,resolution:new i.Vector2},`varying vec2 vUv;
   void main() {
     gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
     vUv = uv;
   }`,`uniform sampler2D sdf;
   uniform sampler2D map;
   uniform float blur;
   uniform float size;
   uniform float time;
   uniform vec2 resolution;
   varying vec2 vUv;
   #include <packing>
   void main() {
     vec2 uv = gl_FragCoord.xy / resolution.xy;
     vec4 t = texture2D(map, uv);
     float k = blur;
     float d = texture2D(sdf, vUv).r/size;
     float alpha = 1.0 - smoothstep(0.0, 1.0, clamp(d/k + 1.0, 0.0, 1.0));
     gl_FragColor = vec4(t.rgb, blur == 0.0 ? t.a : t.a * alpha);
     #include <tonemapping_fragment>
     #include <encodings_fragment>
   }`),dB=d.forwardRef((E,v)=>{var x=E,{children:s,events:t=void 0,blur:r=0,eventPriority:l=0,renderPriority:c=0,worldUnits:p=!1,resolution:h=512}=x,m=Cn(x,["children","events","blur","eventPriority","renderPriority","worldUnits","resolution"]);(0,_.e)({PortalMaterialImpl:uB});const T=d.useRef(null),{scene:R,gl:F,size:U,viewport:P,setEvents:O}=(0,_.z)(),z=rc(h,h),[L,k]=d.useState(0);(0,_.A)(()=>{const Y=T.current.blend>0?Math.max(1,c):0;L!==Y&&k(Y)}),d.useEffect(()=>{t!==void 0&&O({enabled:!t})},[t]);const[H,X]=d.useState(!0),W=VM(X);d.useLayoutEffect(()=>{var Y;W.current=(Y=T.current)==null?void 0:Y.__r3f.parent},[]),d.useLayoutEffect(()=>{if(W.current&&r&&T.current.sdf===null){const Y=new i.Mesh(W.current.geometry,new i.MeshBasicMaterial),ce=new i.Box3().setFromBufferAttribute(Y.geometry.attributes.position),ue=new i.OrthographicCamera(ce.min.x*(1+2/h),ce.max.x*(1+2/h),ce.max.y*(1+2/h),ce.min.y*(1+2/h),.1,1e3);ue.position.set(0,0,1),ue.lookAt(0,0,0),F.setRenderTarget(z),F.render(Y,ue);const le=fB(h,h,F)(z.texture),Me=new Float32Array(h*h);F.readRenderTargetPixels(le,0,0,h,h,Me);let me=1/0;for(let Te=0;Te<Me.length;Te++)Me[Te]<me&&(me=Me[Te]);me=-me,T.current.size=me,T.current.sdf=le.texture,F.setRenderTarget(null)}},[h,r]),d.useImperativeHandle(v,()=>T.current);const J=d.useCallback((Y,ce,ue)=>{var ge;if(!W.current)return!1;if(ce.pointer.set(Y.offsetX/ce.size.width*2-1,-(Y.offsetY/ce.size.height)*2+1),ce.raycaster.setFromCamera(ce.pointer,ce.camera),((ge=T.current)==null?void 0:ge.blend)===0){const[le]=ce.raycaster.intersectObject(W.current);if(!le)return ce.raycaster.camera=void 0,!1}},[]);return d.createElement("portalMaterialImpl",(0,C.Z)({ref:T,blur:r,blend:0,resolution:[U.width*P.dpr,U.height*P.dpr],toneMapped:!1,attach:"material"},m),d.createElement(Jx,{attach:"map",frames:H?1/0:0,eventPriority:l,renderPriority:c,compute:J},s,d.createElement(hB,{events:t,rootScene:R,priority:L,material:T,worldUnits:p})))});function hB({events:s=void 0,rootScene:t,material:r,priority:l,worldUnits:c}){const p=(0,_.z)(T=>T.scene),h=(0,_.z)(T=>T.setEvents),m=rc(),v=rc();d.useLayoutEffect(()=>{p.matrixAutoUpdate=!1},[]),d.useEffect(()=>{s!==void 0&&h({enabled:s})},[s]);const[E,x]=d.useMemo(()=>{const T={value:0};return[new up(new i.ShaderMaterial({uniforms:{a:{value:m.texture},b:{value:v.texture},blend:T},vertexShader:`
          varying vec2 vUv;
          void main() {
            vUv = uv;
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
          }`,fragmentShader:`
          uniform sampler2D a;
          uniform sampler2D b;
          uniform float blend;
          varying vec2 vUv;
          #include <packing>
          void main() {
            vec4 ta = texture2D(a, vUv);
            vec4 tb = texture2D(b, vUv);
            gl_FragColor = mix(tb, ta, blend);
            #include <encodings_fragment>
          }`})),T]},[]);return(0,_.A)(T=>{var R;let F=r==null||(R=r.current)==null?void 0:R.__r3f.parent;if(F&&(c?p.matrixWorld.identity():p.matrixWorld.copy(F.matrixWorld),l)){var U,P,O;((U=r.current)==null?void 0:U.blend)>0&&((P=r.current)==null?void 0:P.blend)<1?(x.value=r.current.blend,T.gl.setRenderTarget(m),T.gl.render(p,T.camera),T.gl.setRenderTarget(v),T.gl.render(t,T.camera),T.gl.setRenderTarget(null),E.render(T.gl)):((O=r.current)==null?void 0:O.blend)===1&&T.gl.render(p,T.camera)}},l),d.createElement(d.Fragment,null)}const fB=(s,t,r)=>{let l=new i.WebGLRenderTarget(s,t,{minFilter:i.LinearMipmapLinearFilter,magFilter:i.LinearFilter,type:i.FloatType,format:i.RedFormat,generateMipmaps:!0}),c=new i.WebGLRenderTarget(s,t,{minFilter:i.NearestFilter,magFilter:i.NearestFilter}),p=new i.WebGLRenderTarget(s,t,{minFilter:i.NearestFilter,magFilter:i.NearestFilter}),h=new i.WebGLRenderTarget(s,t,{minFilter:i.NearestFilter,magFilter:i.NearestFilter}),m=new i.WebGLRenderTarget(s,t,{minFilter:i.NearestFilter,magFilter:i.NearestFilter}),v=new i.WebGLRenderTarget(s,t,{minFilter:i.NearestFilter,magFilter:i.NearestFilter,type:i.FloatType,format:i.RedFormat}),E=new i.WebGLRenderTarget(s,t,{minFilter:i.NearestFilter,magFilter:i.NearestFilter,type:i.FloatType,format:i.RedFormat});const x=new up(new i.ShaderMaterial({uniforms:{tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        uniform sampler2D tex;
        varying vec2 vUv;
        #include <packing>
        void main() {
          gl_FragColor = pack2HalfToRGBA(vUv * (round(texture2D(tex, vUv).x)));
        }`})),T=new up(new i.ShaderMaterial({uniforms:{tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        uniform sampler2D tex;
        varying vec2 vUv;
        #include <packing>
        void main() {
          gl_FragColor = pack2HalfToRGBA(vUv * (1.0 - round(texture2D(tex, vUv).x)));
        }`})),R=new up(new i.ShaderMaterial({uniforms:{tex:{value:null},offset:{value:0},level:{value:0},maxSteps:{value:0}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D tex;
        uniform float offset;
        uniform float level;
        uniform float maxSteps;
        #include <packing>
        void main() {
          float closestDist = 9999999.9;
          vec2 closestPos = vec2(0.0);
          for (float x = -1.0; x <= 1.0; x += 1.0) {
            for (float y = -1.0; y <= 1.0; y += 1.0) {
              vec2 voffset = vUv;
              voffset += vec2(x, y) * vec2(${1/s}, ${1/t}) * offset;
              vec2 pos = unpackRGBATo2Half(texture2D(tex, voffset));
              float dist = distance(pos.xy, vUv);
              if(pos.x != 0.0 && pos.y != 0.0 && dist < closestDist) {
                closestDist = dist;
                closestPos = pos;
              }
            }
          }
          gl_FragColor = pack2HalfToRGBA(closestPos);
        }`})),F=new up(new i.ShaderMaterial({uniforms:{tex:{value:null},size:{value:new i.Vector2(s,t)}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D tex;
        uniform vec2 size;
        #include <packing>
        void main() {
          gl_FragColor = vec4(distance(size * unpackRGBATo2Half(texture2D(tex, vUv)), size * vUv), 0.0, 0.0, 0.0);
        }`})),U=new up(new i.ShaderMaterial({uniforms:{inside:{value:E.texture},outside:{value:v.texture},tex:{value:null}},vertexShader:`
        varying vec2 vUv;
        void main() {
          vUv = uv;
          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }`,fragmentShader:`
        varying vec2 vUv;
        uniform sampler2D inside;
        uniform sampler2D outside;
        uniform sampler2D tex;
        #include <packing>
        void main() {
          float i = texture2D(inside, vUv).x;
          float o =texture2D(outside, vUv).x;
          if (texture2D(tex, vUv).x == 0.0) {
            gl_FragColor = vec4(o, 0.0, 0.0, 0.0);
          } else {
            gl_FragColor = vec4(-i, 0.0, 0.0, 0.0);
          }
        }`}));return P=>{let O=l;P.minFilter=i.NearestFilter,P.magFilter=i.NearestFilter,x.material.uniforms.tex.value=P,r.setRenderTarget(c),x.render(r);const z=Math.ceil(Math.log(Math.max(s,t))/Math.log(2));let L=c,k=null;for(let H=0;H<z;H++){const X=Math.pow(2,z-H-1);k=L===c?h:c,R.material.uniforms.level.value=H,R.material.uniforms.maxSteps.value=z,R.material.uniforms.offset.value=X,R.material.uniforms.tex.value=L.texture,r.setRenderTarget(k),R.render(r),L=k}r.setRenderTarget(v),F.material.uniforms.tex.value=k.texture,F.render(r),T.material.uniforms.tex.value=P,r.setRenderTarget(p),T.render(r),L=p;for(let H=0;H<z;H++){const X=Math.pow(2,z-H-1);k=L===p?m:p,R.material.uniforms.level.value=H,R.material.uniforms.maxSteps.value=z,R.material.uniforms.offset.value=X,R.material.uniforms.tex.value=L.texture,r.setRenderTarget(k),R.render(r),L=k}return r.setRenderTarget(E),F.material.uniforms.tex.value=k.texture,F.render(r),r.setRenderTarget(O),U.material.uniforms.tex.value=P,U.render(r),r.setRenderTarget(null),O}};var gB=A(5108);const mB=s=>s&&s.isOrthographicCamera,Zx=new i.Color;function qx(s){return"top"in s}function AB(s,t){const{right:r,top:l,left:c,bottom:p,width:h,height:m}=t,v=t.bottom<0||l>s.height||r<0||t.left>s.width;if(qx(s)){const T=s.top+s.height-p,R=c-s.left;return{position:{width:h,height:m,left:R,top:l,bottom:T,right:r},isOffscreen:v}}const E=s.height-p;return{position:{width:h,height:m,top:l,left:c,bottom:E,right:r},isOffscreen:v}}function yB({canvasSize:s,scene:t,index:r,children:l,frames:c,rect:p,track:h}){const m=(0,_.z)(R=>R.get),v=(0,_.z)(R=>R.camera),E=(0,_.z)(R=>R.scene),x=(0,_.z)(R=>R.setEvents);let T=0;return(0,_.A)(R=>{if(c===1/0||T<=c){var F;p.current=(F=h.current)==null?void 0:F.getBoundingClientRect(),T++}if(p.current){const{position:{left:U,bottom:P,width:O,height:z},isOffscreen:L}=AB(s,p.current),k=O/z;mB(v)?(v.left!==O/-2||v.right!==O/2||v.top!==z/2||v.bottom!==z/-2)&&(Object.assign(v,{left:O/-2,right:O/2,top:z/2,bottom:z/-2}),v.updateProjectionMatrix()):v.aspect!==k&&(v.aspect=k,v.updateProjectionMatrix()),R.gl.setViewport(U,P,O,z),R.gl.setScissor(U,P,O,z),R.gl.setScissorTest(!0),L?(R.gl.getClearColor(Zx),R.gl.setClearColor(Zx,R.gl.getClearAlpha()),R.gl.clear(!0,!0)):R.gl.render(l?E:t,v),R.gl.setScissorTest(!0)}},r),d.useEffect(()=>{const R=m().events.connected;return x({connected:h.current}),()=>x({connected:R})},[]),d.useEffect(()=>{qx(s)||gB.warn(`Detected @react-three/fiber canvas size does not include position information. <View /> may not work as expected. Upgrade to @react-three/fiber ^8.1.0 for support.
 See https://github.com/pmndrs/drei/issues/944`)},[]),d.createElement(d.Fragment,null,l)}const vB=({track:s,index:t=1,frames:r=1/0,children:l})=>{var c,p;const h=d.useRef(null),{size:m,scene:v}=(0,_.z)(),[E]=d.useState(()=>new i.Scene),x=d.useCallback((F,U)=>{if(h.current&&s.current&&F.target===s.current){const{width:P,height:O,left:z,top:L}=h.current,k=F.clientX-z,H=F.clientY-L;U.pointer.set(k/P*2-1,-(H/O)*2+1),U.raycaster.setFromCamera(U.pointer,U.camera)}},[h,s]),[T,R]=d.useReducer(()=>!0,!1);return d.useEffect(()=>{var F;h.current=(F=s.current)==null?void 0:F.getBoundingClientRect(),R()},[s]),d.createElement(d.Fragment,null,T&&(0,_.g)(d.createElement(yB,{canvasSize:m,frames:r,scene:v,track:s,rect:h,index:t},l,d.createElement("group",{onPointerOver:()=>null})),E,{events:{compute:x,priority:t},size:{width:(c=h.current)==null?void 0:c.width,height:(p=h.current)==null?void 0:p.height}}))},O2=d.createContext(null),D2=new i.Vector3,$x=new i.Vector3,_B=(s,t,r,l)=>{const c=t.dot(t),p=t.dot(s)-t.dot(r),h=t.dot(l);return h===0?-p/c:(D2.copy(l).multiplyScalar(c/h).sub(t),$x.copy(l).multiplyScalar(p/h).add(r).sub(s),-D2.dot($x)/D2.dot(D2))},EB=new i.Vector3(0,1,0),eC=new i.Matrix4,ZE=({direction:s,axis:t})=>{const{translation:r,translationLimits:l,annotations:c,annotationsClass:p,depthTest:h,scale:m,lineWidth:v,fixed:E,axisColors:x,hoveredColor:T,opacity:R,onDragStart:F,onDrag:U,onDragEnd:P,userData:O}=d.useContext(O2),z=(0,_.z)(Re=>Re.controls),L=d.useRef(null),k=d.useRef(null),H=d.useRef(null),X=d.useRef(0),[W,J]=d.useState(!1),Y=d.useCallback(Re=>{c&&(L.current.innerText=`${r.current[t].toFixed(2)}`,L.current.style.display="block"),Re.stopPropagation();const Ge=new i.Matrix4().extractRotation(k.current.matrixWorld),De=Re.point.clone(),Xe=new i.Vector3().setFromMatrixPosition(k.current.matrixWorld),Ce=s.clone().applyMatrix4(Ge).normalize();H.current={clickPoint:De,dir:Ce},X.current=r.current[t],F({component:"Arrow",axis:t,origin:Xe,directions:[Ce]}),z&&(z.enabled=!1),Re.target.setPointerCapture(Re.pointerId)},[c,s,z,F,r,t]),ce=d.useCallback(Re=>{if(Re.stopPropagation(),W||J(!0),H.current){const{clickPoint:Ge,dir:De}=H.current,[Xe,Ce]=(l==null?void 0:l[t])||[void 0,void 0];let Ee=_B(Ge,De,Re.ray.origin,Re.ray.direction);Xe!==void 0&&(Ee=Math.max(Ee,Xe-X.current)),Ce!==void 0&&(Ee=Math.min(Ee,Ce-X.current)),r.current[t]=X.current+Ee,c&&(L.current.innerText=`${r.current[t].toFixed(2)}`),eC.makeTranslation(De.x*Ee,De.y*Ee,De.z*Ee),U(eC)}},[c,U,W,r,l,t]),ue=d.useCallback(Re=>{c&&(L.current.style.display="none"),Re.stopPropagation(),H.current=null,P(),z&&(z.enabled=!0),Re.target.releasePointerCapture(Re.pointerId)},[c,z,P]),ge=d.useCallback(Re=>{Re.stopPropagation(),J(!1)},[]),{cylinderLength:le,coneWidth:Me,coneLength:me,matrixL:Te}=d.useMemo(()=>{const Re=E?v/m*1.6:m/20,Ge=E?.2:m/5,De=E?1-Ge:m-Ge,Xe=new i.Quaternion().setFromUnitVectors(EB,s.clone().normalize()),Ce=new i.Matrix4().makeRotationFromQuaternion(Xe);return{cylinderLength:De,coneWidth:Re,coneLength:Ge,matrixL:Ce}},[s,m,v,E]),Ue=W?T:x[t];return d.createElement("group",{ref:k},d.createElement("group",{matrix:Te,matrixAutoUpdate:!1,onPointerDown:Y,onPointerMove:ce,onPointerUp:ue,onPointerOut:ge},c&&d.createElement(ut,{position:[0,-me,0]},d.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:p,ref:L})),d.createElement("mesh",{visible:!1,position:[0,(le+me)/2,0],userData:O},d.createElement("cylinderGeometry",{args:[Me*1.4,Me*1.4,le+me,8,1]})),d.createElement(Qp,{transparent:!0,raycast:()=>null,depthTest:h,points:[0,0,0,0,le,0],lineWidth:v,color:Ue,opacity:R,polygonOffset:!0,renderOrder:1,polygonOffsetFactor:-10,fog:!1}),d.createElement("mesh",{raycast:()=>null,position:[0,le+me/2,0],renderOrder:500},d.createElement("coneGeometry",{args:[Me,me,24,1]}),d.createElement("meshBasicMaterial",{transparent:!0,depthTest:h,color:Ue,opacity:R,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))))},bB=(s,t,r)=>{const l=Math.abs(s.x)>=Math.abs(s.y)&&Math.abs(s.x)>=Math.abs(s.z)?0:Math.abs(s.y)>=Math.abs(s.x)&&Math.abs(s.y)>=Math.abs(s.z)?1:2,c=[0,1,2].sort((U,P)=>Math.abs(t.getComponent(P))-Math.abs(t.getComponent(U))),p=l===c[0]?c[1]:c[0],h=s.getComponent(l),m=s.getComponent(p),v=t.getComponent(l),E=t.getComponent(p),x=r.getComponent(l),R=(r.getComponent(p)-x*(m/h))/(E-v*(m/h));return[(x-R*v)/h,R]},L2=new i.Ray,P2=new i.Vector3,tC=new i.Matrix4,qE=({dir1:s,dir2:t,axis:r})=>{const{translation:l,translationLimits:c,annotations:p,annotationsClass:h,depthTest:m,scale:v,lineWidth:E,fixed:x,axisColors:T,hoveredColor:R,opacity:F,onDragStart:U,onDrag:P,onDragEnd:O,userData:z}=d.useContext(O2),L=(0,_.z)(De=>De.controls),k=d.useRef(null),H=d.useRef(null),X=d.useRef(null),W=d.useRef(0),J=d.useRef(0),[Y,ce]=d.useState(!1),ue=d.useCallback(De=>{p&&(k.current.innerText=`${l.current[(r+1)%3].toFixed(2)}, ${l.current[(r+2)%3].toFixed(2)}`,k.current.style.display="block"),De.stopPropagation();const Xe=De.point.clone(),Ce=new i.Vector3().setFromMatrixPosition(H.current.matrixWorld),Ee=new i.Vector3().setFromMatrixColumn(H.current.matrixWorld,0).normalize(),_e=new i.Vector3().setFromMatrixColumn(H.current.matrixWorld,1).normalize(),oe=new i.Vector3().setFromMatrixColumn(H.current.matrixWorld,2).normalize(),Ae=new i.Plane().setFromNormalAndCoplanarPoint(oe,Ce);X.current={clickPoint:Xe,e1:Ee,e2:_e,plane:Ae},W.current=l.current[(r+1)%3],J.current=l.current[(r+2)%3],U({component:"Slider",axis:r,origin:Ce,directions:[Ee,_e,oe]}),L&&(L.enabled=!1),De.target.setPointerCapture(De.pointerId)},[p,L,U,r]),ge=d.useCallback(De=>{if(De.stopPropagation(),Y||ce(!0),X.current){const{clickPoint:Xe,e1:Ce,e2:Ee,plane:_e}=X.current,[oe,Ae]=(c==null?void 0:c[(r+1)%3])||[void 0,void 0],[Be,ve]=(c==null?void 0:c[(r+2)%3])||[void 0,void 0];L2.copy(De.ray),L2.intersectPlane(_e,P2),L2.direction.negate(),L2.intersectPlane(_e,P2),P2.sub(Xe);let[ke,vt]=bB(Ce,Ee,P2);oe!==void 0&&(ke=Math.max(ke,oe-W.current)),Ae!==void 0&&(ke=Math.min(ke,Ae-W.current)),Be!==void 0&&(vt=Math.max(vt,Be-J.current)),ve!==void 0&&(vt=Math.min(vt,ve-J.current)),l.current[(r+1)%3]=W.current+ke,l.current[(r+2)%3]=J.current+vt,p&&(k.current.innerText=`${l.current[(r+1)%3].toFixed(2)}, ${l.current[(r+2)%3].toFixed(2)}`),tC.makeTranslation(ke*Ce.x+vt*Ee.x,ke*Ce.y+vt*Ee.y,ke*Ce.z+vt*Ee.z),P(tC)}},[p,P,Y,l,c,r]),le=d.useCallback(De=>{p&&(k.current.style.display="none"),De.stopPropagation(),X.current=null,O(),L&&(L.enabled=!0),De.target.releasePointerCapture(De.pointerId)},[p,L,O]),Me=d.useCallback(De=>{De.stopPropagation(),ce(!1)},[]),me=d.useMemo(()=>{const De=s.clone().normalize(),Xe=t.clone().normalize();return new i.Matrix4().makeBasis(De,Xe,De.clone().cross(Xe))},[s,t]),Te=x?1/7:v/7,Ue=x?.225:v*.225,Re=Y?R:T[r],Ge=d.useMemo(()=>[new i.Vector3(0,0,0),new i.Vector3(0,Ue,0),new i.Vector3(Ue,Ue,0),new i.Vector3(Ue,0,0),new i.Vector3(0,0,0)],[Ue]);return d.createElement("group",{ref:H,matrix:me,matrixAutoUpdate:!1},p&&d.createElement(ut,{position:[0,0,0]},d.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:h,ref:k})),d.createElement("group",{position:[Te*1.7,Te*1.7,0]},d.createElement("mesh",{visible:!0,onPointerDown:ue,onPointerMove:ge,onPointerUp:le,onPointerOut:Me,scale:Ue,userData:z},d.createElement("planeGeometry",null),d.createElement("meshBasicMaterial",{transparent:!0,depthTest:m,color:Re,polygonOffset:!0,polygonOffsetFactor:-10,side:i.DoubleSide,fog:!1})),d.createElement(Qp,{position:[-Ue/2,-Ue/2,0],transparent:!0,depthTest:m,points:Ge,lineWidth:E,color:Re,opacity:F,polygonOffset:!0,polygonOffsetFactor:-10,userData:z,fog:!1})))};var MB=A(7378),xB=A.n(MB);const $E=new i.Vector3,eb=new i.Vector3,tb=s=>s*180/Math.PI,CB=s=>s*Math.PI/180,SB=(s,t,r,l,c)=>{$E.copy(s).sub(r),eb.copy(t).sub(r);const p=l.dot(l),h=c.dot(c),m=$E.dot(l)/p,v=$E.dot(c)/h,E=eb.dot(l)/p,x=eb.dot(c)/h,T=Math.atan2(v,m);return Math.atan2(x,E)-T},wB=(s,t)=>{let r=Math.floor(s/t);return r=r<0?r+1:r,s-r*t},nC=s=>{let t=wB(s,2*Math.PI);return Math.abs(t)<1e-6?0:(t<0&&(t+=2*Math.PI),t)},k2=new i.Matrix4,rC=new i.Vector3,z2=new i.Ray,nb=new i.Vector3,rb=({dir1:s,dir2:t,axis:r})=>{const{rotationLimits:l,annotations:c,annotationsClass:p,depthTest:h,scale:m,lineWidth:v,fixed:E,axisColors:x,hoveredColor:T,opacity:R,onDragStart:F,onDrag:U,onDragEnd:P,userData:O}=d.useContext(O2),z=(0,_.z)(Ue=>Ue.controls),L=d.useRef(null),k=d.useRef(null),H=d.useRef(0),X=d.useRef(0),W=d.useRef(null),[J,Y]=d.useState(!1),ce=d.useCallback(Ue=>{c&&(L.current.innerText=`${tb(X.current).toFixed(0)}\xBA`,L.current.style.display="block"),Ue.stopPropagation();const Re=Ue.point.clone(),Ge=new i.Vector3().setFromMatrixPosition(k.current.matrixWorld),De=new i.Vector3().setFromMatrixColumn(k.current.matrixWorld,0).normalize(),Xe=new i.Vector3().setFromMatrixColumn(k.current.matrixWorld,1).normalize(),Ce=new i.Vector3().setFromMatrixColumn(k.current.matrixWorld,2).normalize(),Ee=new i.Plane().setFromNormalAndCoplanarPoint(Ce,Ge);W.current={clickPoint:Re,origin:Ge,e1:De,e2:Xe,normal:Ce,plane:Ee},F({component:"Rotator",axis:r,origin:Ge,directions:[De,Xe,Ce]}),z&&(z.enabled=!1),Ue.target.setPointerCapture(Ue.pointerId)},[c,z,F,r]),ue=d.useCallback(Ue=>{if(Ue.stopPropagation(),J||Y(!0),W.current){const{clickPoint:Re,origin:Ge,e1:De,e2:Xe,normal:Ce,plane:Ee}=W.current,[_e,oe]=(l==null?void 0:l[r])||[void 0,void 0];z2.copy(Ue.ray),z2.intersectPlane(Ee,nb),z2.direction.negate(),z2.intersectPlane(Ee,nb);let Ae=SB(Re,nb,Ge,De,Xe),Be=tb(Ae);Ue.shiftKey&&(Be=Math.round(Be/10)*10,Ae=CB(Be)),_e!==void 0&&oe!==void 0&&oe-_e<2*Math.PI?(Ae=nC(Ae),Ae=Ae>Math.PI?Ae-2*Math.PI:Ae,Ae=xB()(Ae,_e-H.current,oe-H.current),X.current=H.current+Ae):(X.current=nC(H.current+Ae),X.current=X.current>Math.PI?X.current-2*Math.PI:X.current),c&&(Be=tb(X.current),L.current.innerText=`${Be.toFixed(0)}\xBA`),k2.makeRotationAxis(Ce,Ae),rC.copy(Ge).applyMatrix4(k2).sub(Ge).negate(),k2.setPosition(rC),U(k2)}},[c,U,J,l,r]),ge=d.useCallback(Ue=>{c&&(L.current.style.display="none"),Ue.stopPropagation(),H.current=X.current,W.current=null,P(),z&&(z.enabled=!0),Ue.target.releasePointerCapture(Ue.pointerId)},[c,z,P]),le=d.useCallback(Ue=>{Ue.stopPropagation(),Y(!1)},[]),Me=d.useMemo(()=>{const Ue=s.clone().normalize(),Re=t.clone().normalize();return new i.Matrix4().makeBasis(Ue,Re,Ue.clone().cross(Re))},[s,t]),me=E?.65:m*.65,Te=d.useMemo(()=>{const Re=[];for(let Ge=0;Ge<=32;Ge++){const De=Ge*(Math.PI/2)/32;Re.push(new i.Vector3(Math.cos(De)*me,Math.sin(De)*me,0))}return Re},[me]);return d.createElement("group",{ref:k,onPointerDown:ce,onPointerMove:ue,onPointerUp:ge,onPointerOut:le,matrix:Me,matrixAutoUpdate:!1},c&&d.createElement(ut,{position:[me,me,0]},d.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:p,ref:L})),d.createElement(Qp,{points:Te,lineWidth:v*4,visible:!1,userData:O}),d.createElement(Qp,{transparent:!0,raycast:()=>null,depthTest:h,points:Te,lineWidth:v,color:J?T:x[r],opacity:R,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))},TB=new i.Vector3,BB=new i.Vector3,RB=new i.Vector3,IB=(s,t,r)=>{const l=r.width/2,c=r.height/2;t.updateMatrixWorld(!1);const p=s.project(t);return p.x=p.x*l+l,p.y=-(p.y*c)+c,p},FB=(s,t,r,l=1)=>{const c=TB.set(s.x/r.width*2-1,-(s.y/r.height)*2+1,l);return c.unproject(t),c},iC=(s,t,r,l)=>{const c=IB(RB.copy(s),r,l);let p=0;for(let h=0;h<2;++h){const m=BB.copy(c).setComponent(h,c.getComponent(h)+t),v=FB(m,r,l,m.z);p=Math.max(p,s.distanceTo(v))}return p},oC=new i.Matrix4,sC=new i.Matrix4,aC=new i.Matrix4,G2=new i.Matrix4,ib=new i.Matrix4,t1=new i.Matrix4,lC=new i.Matrix4,cC=new i.Matrix4,n1=new i.Box3,ob=new i.Box3,pC=new i.Vector3,uC=new i.Vector3,dC=new i.Vector3,hC=new i.Vector3,zA=new i.Vector3(1,0,0),GA=new i.Vector3(0,1,0),UA=new i.Vector3(0,0,1),OB=d.forwardRef((le,ge)=>{var Me=le,{matrix:s,onDragStart:t,onDrag:r,onDragEnd:l,autoTransform:c=!0,anchor:p,disableAxes:h=!1,disableSliders:m=!1,disableRotations:v=!1,activeAxes:E=[!0,!0,!0],offset:x=[0,0,0],rotation:T=[0,0,0],scale:R=1,lineWidth:F=4,fixed:U=!1,translationLimits:P,rotationLimits:O,depthTest:z=!0,axisColors:L=["#ff2060","#20df80","#2080ff"],hoveredColor:k="#ffff40",annotations:H=!1,annotationsClass:X,opacity:W=1,visible:J=!0,userData:Y,children:ce}=Me,ue=Cn(Me,["matrix","onDragStart","onDrag","onDragEnd","autoTransform","anchor","disableAxes","disableSliders","disableRotations","activeAxes","offset","rotation","scale","lineWidth","fixed","translationLimits","rotationLimits","depthTest","axisColors","hoveredColor","annotations","annotationsClass","opacity","visible","userData","children"]);const me=(0,_.z)(Ee=>Ee.invalidate),Te=d.useRef(null),Ue=d.useRef(null),Re=d.useRef(null),Ge=d.useRef(null),De=d.useRef([0,0,0]);d.useLayoutEffect(()=>{p&&(Ge.current.updateWorldMatrix(!0,!0),G2.copy(Ge.current.matrixWorld).invert(),n1.makeEmpty(),Ge.current.traverse(Ee=>{Ee.geometry&&(Ee.geometry.boundingBox||Ee.geometry.computeBoundingBox(),t1.copy(Ee.matrixWorld).premultiply(G2),ob.copy(Ee.geometry.boundingBox),ob.applyMatrix4(t1),n1.union(ob))}),pC.copy(n1.max).add(n1.min).multiplyScalar(.5),uC.copy(n1.max).sub(n1.min).multiplyScalar(.5),dC.copy(uC).multiply(new i.Vector3(...p)).add(pC),hC.set(...x).add(dC),Re.current.position.copy(hC),me())});const Xe=d.useMemo(()=>({onDragStart:Ee=>{oC.copy(Ue.current.matrix),sC.copy(Ue.current.matrixWorld),t&&t(Ee),me()},onDrag:Ee=>{aC.copy(Te.current.matrixWorld),G2.copy(aC).invert(),ib.copy(sC).premultiply(Ee),t1.copy(ib).premultiply(G2),lC.copy(oC).invert(),cC.copy(t1).multiply(lC),c&&Ue.current.matrix.copy(t1),r&&r(t1,cC,ib,Ee),me()},onDragEnd:()=>{l&&l(),me()},translation:De,translationLimits:P,rotationLimits:O,axisColors:L,hoveredColor:k,opacity:W,scale:R,lineWidth:F,fixed:U,depthTest:z,userData:Y,annotations:H,annotationsClass:X}),[t,r,l,De,P,O,z,R,F,U,...L,k,W,Y,c,H,X]),Ce=new i.Vector3;return(0,_.A)(Ee=>{if(U){const Be=iC(Re.current.getWorldPosition(Ce),R,Ee.camera,Ee.size);if(Re.current){var _e,oe,Ae;(((_e=Re.current)==null?void 0:_e.scale.x)!==Be||((oe=Re.current)==null?void 0:oe.scale.y)!==Be||((Ae=Re.current)==null?void 0:Ae.scale.z)!==Be)&&(Re.current.scale.setScalar(Be),Ee.invalidate())}}}),d.useImperativeHandle(ge,()=>Ue.current,[]),d.useLayoutEffect(()=>{s&&s instanceof i.Matrix4&&(Ue.current.matrix=s)},[s]),d.createElement(O2.Provider,{value:Xe},d.createElement("group",{ref:Te},d.createElement("group",(0,C.Z)({ref:Ue,matrix:s,matrixAutoUpdate:!1},ue),d.createElement("group",{visible:J,ref:Re,position:x,rotation:T},!h&&E[0]&&d.createElement(ZE,{axis:0,direction:zA}),!h&&E[1]&&d.createElement(ZE,{axis:1,direction:GA}),!h&&E[2]&&d.createElement(ZE,{axis:2,direction:UA}),!m&&E[0]&&E[1]&&d.createElement(qE,{axis:2,dir1:zA,dir2:GA}),!m&&E[0]&&E[2]&&d.createElement(qE,{axis:1,dir1:UA,dir2:zA}),!m&&E[2]&&E[1]&&d.createElement(qE,{axis:0,dir1:GA,dir2:UA}),!v&&E[0]&&E[1]&&d.createElement(rb,{axis:2,dir1:zA,dir2:GA}),!v&&E[0]&&E[2]&&d.createElement(rb,{axis:1,dir1:UA,dir2:zA}),!v&&E[2]&&E[1]&&d.createElement(rb,{axis:0,dir1:GA,dir2:UA})),d.createElement("group",{ref:Ge},ce))))})},5465:function(u,n,A){"use strict";A.d(n,{A:function(){return Ss},B:function(){return Mt},C:function(){return il},D:function(){return Ca},E:function(){return Pt},a:function(){return ot},b:function(){return Ns},c:function(){return pr},d:function(){return ya},e:function(){return st},f:function(){return Ur},g:function(){return _p},h:function(){return Mo},i:function(){return ut},j:function(){return ta},k:function(){return un},l:function(){return Fo},m:function(){return ws},n:function(){return Wo},o:function(){return Io},p:function(){return $i},q:function(){return bo},r:function(){return gs},s:function(){return Xn},t:function(){return ae},u:function(){return Rt},v:function(){return Ep},w:function(){return Gi},x:function(){return Vi},y:function(){return Gs},z:function(){return El}});var C=A(9477),d=A(7294),g=A(2576),i=A(4671),_=A(6525),j=A.n(_),$=A(5431),re=A(8139),Q=A(5108),ae=Object.freeze({__proto__:null});const pe={},st=Je=>void Object.assign(pe,Je);function Pe(Je,bt){function dn(wt,Kr,Pn){var yr=Kr,{args:Vt=[],attach:gn}=yr,vn=Cn(yr,["args","attach"]);let Se=`${wt[0].toUpperCase()}${wt.slice(1)}`,Ke;if(wt==="primitive"){if(vn.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const yt=vn.object;Ke=On(yt,{type:wt,root:Pn,attach:gn,primitive:!0})}else{const yt=pe[Se];if(!yt)throw new Error(`R3F: ${Se} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(Vt))throw new Error("R3F: The args prop must be an array!");Ke=On(new yt(...Vt),{type:wt,root:Pn,attach:gn,memoizedProps:{args:Vt}})}return Ke.__r3f.attach===void 0&&(Ke instanceof C.BufferGeometry?Ke.__r3f.attach="geometry":Ke instanceof C.Material&&(Ke.__r3f.attach="material")),Se!=="inject"&&St(Ke,vn),Ke}function Wn(wt,Vt){let gn=!1;if(Vt){var vn,Pn;(vn=Vt.__r3f)!=null&&vn.attach?_t(wt,Vt,Vt.__r3f.attach):Vt.isObject3D&&wt.isObject3D&&(wt.add(Vt),gn=!0),gn||(Pn=wt.__r3f)==null||Pn.objects.push(Vt),Vt.__r3f||On(Vt,{}),Vt.__r3f.parent=wt,fn(Vt),Tt(Vt)}}function Vn(wt,Vt,gn){let vn=!1;if(Vt){var Pn,Kr;if((Pn=Vt.__r3f)!=null&&Pn.attach)_t(wt,Vt,Vt.__r3f.attach);else if(Vt.isObject3D&&wt.isObject3D){Vt.parent=wt,Vt.dispatchEvent({type:"added"});const yr=wt.children.filter(Ke=>Ke!==Vt),Se=yr.indexOf(gn);wt.children=[...yr.slice(0,Se),Vt,...yr.slice(Se)],vn=!0}vn||(Kr=wt.__r3f)==null||Kr.objects.push(Vt),Vt.__r3f||On(Vt,{}),Vt.__r3f.parent=wt,fn(Vt),Tt(Vt)}}function gr(wt,Vt,gn=!1){wt&&[...wt].forEach(vn=>Xr(Vt,vn,gn))}function Xr(wt,Vt,gn){if(Vt){var vn,Pn,Kr;if(Vt.__r3f&&(Vt.__r3f.parent=null),(vn=wt.__r3f)!=null&&vn.objects&&(wt.__r3f.objects=wt.__r3f.objects.filter(mn=>mn!==Vt)),(Pn=Vt.__r3f)!=null&&Pn.attach)ct(wt,Vt,Vt.__r3f.attach);else if(Vt.isObject3D&&wt.isObject3D){var yr;wt.remove(Vt),(yr=Vt.__r3f)!=null&&yr.root&&or(Vt.__r3f.root,Vt)}const Ke=(Kr=Vt.__r3f)==null?void 0:Kr.primitive,yt=gn===void 0?Vt.dispose!==null&&!Ke:gn;if(!Ke){var Se;gr((Se=Vt.__r3f)==null?void 0:Se.objects,Vt,yt),gr(Vt.children,Vt,yt)}delete Vt.__r3f,yt&&Vt.dispose&&Vt.type!=="Scene"&&(0,$.unstable_scheduleCallback)($.unstable_IdlePriority,()=>{try{Vt.dispose()}catch(mn){}}),Tt(wt)}}function Ar(wt,Vt,gn,vn){var Pn;const Kr=(Pn=wt.__r3f)==null?void 0:Pn.parent;if(!Kr)return;const yr=dn(Vt,gn,wt.__r3f.root);if(wt.children){for(const Se of wt.children)Se.__r3f&&Wn(yr,Se);wt.children=wt.children.filter(Se=>!Se.__r3f)}wt.__r3f.objects.forEach(Se=>Wn(yr,Se)),wt.__r3f.objects=[],wt.__r3f.autoRemovedBeforeAppend||Xr(Kr,wt),yr.parent&&(yr.__r3f.autoRemovedBeforeAppend=!0),Wn(Kr,yr),yr.raycast&&yr.__r3f.eventCount&&yr.__r3f.root.getState().internal.interaction.push(yr),[vn,vn.alternate].forEach(Se=>{Se!==null&&(Se.stateNode=yr,Se.ref&&(typeof Se.ref=="function"?Se.ref(yr):Se.ref.current=yr))})}const Bn=()=>Q.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:j()({createInstance:dn,removeChild:Xr,appendChild:Wn,appendInitialChild:Wn,insertBefore:Vn,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(wt,Vt)=>{if(!Vt)return;const gn=wt.getState().scene;gn.__r3f&&(gn.__r3f.root=wt,Wn(gn,Vt))},removeChildFromContainer:(wt,Vt)=>{Vt&&Xr(wt.getState().scene,Vt)},insertInContainerBefore:(wt,Vt,gn)=>{if(!Vt||!gn)return;const vn=wt.getState().scene;vn.__r3f&&Vn(vn,Vt,gn)},getRootHostContext:()=>null,getChildHostContext:wt=>wt,finalizeInitialChildren(wt){var Vt;return!!((Vt=wt==null?void 0:wt.__r3f)!=null?Vt:{}).handlers},prepareUpdate(wt,Vt,gn,vn){if(wt.__r3f.primitive&&vn.object&&vn.object!==wt)return[!0];{const Pn=vn,{args:yr=[],children:Se}=Pn,Ke=Cn(Pn,["args","children"]),Kr=gn,{args:yt=[],children:mn}=Kr,vr=Cn(Kr,["args","children"]);if(!Array.isArray(yr))throw new Error("R3F: the args prop must be an array!");if(yr.some((si,Ui)=>si!==yt[Ui]))return[!0];const Br=nt(wt,Ke,vr,!0);return Br.changes.length?[!1,Br]:null}},commitUpdate(wt,[Vt,gn],vn,Pn,Kr,yr){Vt?Ar(wt,vn,Kr,yr):St(wt,gn)},commitMount(wt,Vt,gn,vn){var Pn;const Kr=(Pn=wt.__r3f)!=null?Pn:{};wt.raycast&&Kr.handlers&&Kr.eventCount&&wt.__r3f.root.getState().internal.interaction.push(wt)},getPublicInstance:wt=>wt,prepareForCommit:()=>null,preparePortalMount:wt=>On(wt.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(wt){var Vt;const{attach:gn,parent:vn}=(Vt=wt.__r3f)!=null?Vt:{};gn&&vn&&ct(vn,wt,gn),wt.isObject3D&&(wt.visible=!1),Tt(wt)},unhideInstance(wt,Vt){var gn;const{attach:vn,parent:Pn}=(gn=wt.__r3f)!=null?gn:{};vn&&Pn&&_t(Pn,wt,vn),(wt.isObject3D&&Vt.visible==null||Vt.visible)&&(wt.visible=!0),Tt(wt)},createTextInstance:Bn,hideTextInstance:Bn,unhideTextInstance:Bn,getCurrentEventPriority:()=>bt?bt():g.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance!="undefined"&&mt.fun(performance.now)?performance.now:mt.fun(Date.now)?Date.now:()=>0,scheduleTimeout:mt.fun(setTimeout)?setTimeout:void 0,cancelTimeout:mt.fun(clearTimeout)?clearTimeout:void 0}),applyProps:St}}var Oe,Ze;const rt=Je=>"colorSpace"in Je||"outputColorSpace"in Je,gt=()=>{var Je;return(Je=pe.ColorManagement)!=null?Je:null},at=Je=>Je&&Je.isOrthographicCamera,ut=Je=>Je&&Je.hasOwnProperty("current"),ot=typeof window!="undefined"&&((Oe=window.document)!=null&&Oe.createElement||((Ze=window.navigator)==null?void 0:Ze.product)==="ReactNative")?d.useLayoutEffect:d.useEffect;function Rt(Je){const bt=d.useRef(Je);return ot(()=>void(bt.current=Je),[Je]),bt}function Mt({set:Je}){return ot(()=>(Je(new Promise(()=>null)),()=>Je(!1)),[Je]),null}class Pt extends d.Component{constructor(...bt){super(...bt),this.state={error:!1}}componentDidCatch(bt){this.props.set(bt)}render(){return this.state.error?null:this.props.children}}Pt.getDerivedStateFromError=()=>({error:!0});const It="__default",xt=new Map,ln=Je=>Je&&!!Je.memoized&&!!Je.changes;function Mn(Je){var bt;const dn=typeof window!="undefined"?(bt=window.devicePixelRatio)!=null?bt:2:1;return Array.isArray(Je)?Math.min(Math.max(Je[0],dn),Je[1]):Je}const Xn=Je=>{var bt;return(bt=Je.__r3f)==null?void 0:bt.root.getState()},mt={obj:Je=>Je===Object(Je)&&!mt.arr(Je)&&typeof Je!="function",fun:Je=>typeof Je=="function",str:Je=>typeof Je=="string",num:Je=>typeof Je=="number",boo:Je=>typeof Je=="boolean",und:Je=>Je===void 0,arr:Je=>Array.isArray(Je),equ(Je,bt,{arrays:dn="shallow",objects:Wn="reference",strict:Vn=!0}={}){if(typeof Je!=typeof bt||!!Je!=!!bt)return!1;if(mt.str(Je)||mt.num(Je))return Je===bt;const gr=mt.obj(Je);if(gr&&Wn==="reference")return Je===bt;const Xr=mt.arr(Je);if(Xr&&dn==="reference")return Je===bt;if((Xr||gr)&&Je===bt)return!0;let Ar;for(Ar in Je)if(!(Ar in bt))return!1;if(gr&&dn==="shallow"&&Wn==="shallow"){for(Ar in Vn?bt:Je)if(!mt.equ(Je[Ar],bt[Ar],{strict:Vn,objects:"reference"}))return!1}else for(Ar in Vn?bt:Je)if(Je[Ar]!==bt[Ar])return!1;if(mt.und(Ar)){if(Xr&&Je.length===0&&bt.length===0||gr&&Object.keys(Je).length===0&&Object.keys(bt).length===0)return!0;if(Je!==bt)return!1}return!0}};function rn(Je){const bt={nodes:{},materials:{}};return Je&&Je.traverse(dn=>{dn.name&&(bt.nodes[dn.name]=dn),dn.material&&!bt.materials[dn.material.name]&&(bt.materials[dn.material.name]=dn.material)}),bt}function un(Je){Je.dispose&&Je.type!=="Scene"&&Je.dispose();for(const bt in Je)bt.dispose==null||bt.dispose(),delete Je[bt]}function On(Je,bt){const dn=Je;return(bt!=null&&bt.primitive||!dn.__r3f)&&(dn.__r3f=Zn({type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null},bt)),Je}function Ln(Je,bt){let dn=Je;if(bt.includes("-")){const Wn=bt.split("-"),Vn=Wn.pop();return dn=Wn.reduce((gr,Xr)=>gr[Xr],Je),{target:dn,key:Vn}}else return{target:dn,key:bt}}const fr=/-\d+$/;function _t(Je,bt,dn){if(mt.str(dn)){if(fr.test(dn)){const gr=dn.replace(fr,""),{target:Xr,key:Ar}=Ln(Je,gr);Array.isArray(Xr[Ar])||(Xr[Ar]=[])}const{target:Wn,key:Vn}=Ln(Je,dn);bt.__r3f.previousAttach=Wn[Vn],Wn[Vn]=bt}else bt.__r3f.previousAttach=dn(Je,bt)}function ct(Je,bt,dn){var Wn,Vn;if(mt.str(dn)){const{target:gr,key:Xr}=Ln(Je,dn),Ar=bt.__r3f.previousAttach;Ar===void 0?delete gr[Xr]:gr[Xr]=Ar}else(Wn=bt.__r3f)==null||Wn.previousAttach==null||Wn.previousAttach(Je,bt);(Vn=bt.__r3f)==null||delete Vn.previousAttach}function nt(Je,wt,gn={},Sr=!1){var Vt=wt,{children:bt,key:dn,ref:Wn}=Vt,Vn=Cn(Vt,["children","key","ref"]);var vn=gn,{children:gr,key:Xr,ref:Ar}=vn,Bn=Cn(vn,["children","key","ref"]);var Pn;const Kr=(Pn=Je==null?void 0:Je.__r3f)!=null?Pn:{},yr=Object.entries(Vn),Se=[];if(Sr){const yt=Object.keys(Bn);for(let mn=0;mn<yt.length;mn++)Vn.hasOwnProperty(yt[mn])||yr.unshift([yt[mn],It+"remove"])}yr.forEach(([yt,mn])=>{var vr;if((vr=Je.__r3f)!=null&&vr.primitive&&yt==="object"||mt.equ(mn,Bn[yt]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(yt))return Se.push([yt,mn,!0,[]]);let Br=[];yt.includes("-")&&(Br=yt.split("-")),Se.push([yt,mn,!1,Br]);for(const si in Vn){const Ui=Vn[si];si.startsWith(`${yt}-`)&&Se.push([si,Ui,!1,si.split("-")])}});const Ke=Zn({},Vn);return Kr.memoizedProps&&Kr.memoizedProps.args&&(Ke.args=Kr.memoizedProps.args),Kr.memoizedProps&&Kr.memoizedProps.attach&&(Ke.attach=Kr.memoizedProps.attach),{memoized:Ke,changes:Se}}function St(Je,bt){var dn,Wn,Vn;const gr=(dn=Je.__r3f)!=null?dn:{},Xr=gr.root,Ar=(Wn=Xr==null||Xr.getState==null?void 0:Xr.getState())!=null?Wn:{},{memoized:Bn,changes:Sr}=ln(bt)?bt:nt(Je,bt),wt=gr.eventCount;Je.__r3f&&(Je.__r3f.memoizedProps=Bn);for(let gn=0;gn<Sr.length;gn++){let[vn,Pn,Kr,yr]=Sr[gn];if(rt(Je)){const mn="srgb",vr="srgb-linear";vn==="encoding"?(vn="colorSpace",Pn=Pn===3001?mn:vr):vn==="outputEncoding"&&(vn="outputColorSpace",Pn=Pn===3001?mn:vr)}let Se=Je,Ke=Se[vn];if(yr.length&&(Ke=yr.reduce((yt,mn)=>yt[mn],Je),!(Ke&&Ke.set))){const[yt,...mn]=yr.reverse();Se=mn.reverse().reduce((vr,Br)=>vr[Br],Je),vn=yt}if(Pn===It+"remove")if(Se.constructor){let yt=xt.get(Se.constructor);yt||(yt=new Se.constructor,xt.set(Se.constructor,yt)),Pn=yt[vn]}else Pn=0;if(Kr)Pn?gr.handlers[vn]=Pn:delete gr.handlers[vn],gr.eventCount=Object.keys(gr.handlers).length;else if(Ke&&Ke.set&&(Ke.copy||Ke instanceof C.Layers)){if(Array.isArray(Pn))Ke.fromArray?Ke.fromArray(Pn):Ke.set(...Pn);else if(Ke.copy&&Pn&&Pn.constructor&&Ke.constructor===Pn.constructor)Ke.copy(Pn);else if(Pn!==void 0){const yt=Ke instanceof C.Color;!yt&&Ke.setScalar?Ke.setScalar(Pn):Ke instanceof C.Layers&&Pn instanceof C.Layers?Ke.mask=Pn.mask:Ke.set(Pn),!gt()&&!Ar.linear&&yt&&Ke.convertSRGBToLinear()}}else if(Se[vn]=Pn,Se[vn]instanceof C.Texture&&Se[vn].format===C.RGBAFormat&&Se[vn].type===C.UnsignedByteType){const yt=Se[vn];rt(yt)&&rt(Ar.gl)?yt.colorSpace=Ar.gl.outputColorSpace:yt.encoding=Ar.gl.outputEncoding}Tt(Je)}if(gr.parent&&Ar.internal&&Je.raycast&&wt!==gr.eventCount){const gn=Ar.internal.interaction.indexOf(Je);gn>-1&&Ar.internal.interaction.splice(gn,1),gr.eventCount&&Ar.internal.interaction.push(Je)}return!(Sr.length===1&&Sr[0][0]==="onUpdate")&&Sr.length&&(Vn=Je.__r3f)!=null&&Vn.parent&&fn(Je),Je}function Tt(Je){var bt,dn;const Wn=(bt=Je.__r3f)==null||(dn=bt.root)==null||dn.getState==null?void 0:dn.getState();Wn&&Wn.internal.frames===0&&Wn.invalidate()}function fn(Je){Je.onUpdate==null||Je.onUpdate(Je)}function At(Je,bt){Je.manual||(at(Je)?(Je.left=bt.width/-2,Je.right=bt.width/2,Je.top=bt.height/2,Je.bottom=bt.height/-2):Je.aspect=bt.width/bt.height,Je.updateProjectionMatrix(),Je.updateMatrixWorld())}function Ot(Je){return(Je.eventObject||Je.object).uuid+"/"+Je.index+Je.instanceId}function kt(){var Je;const bt=typeof self!="undefined"&&self||typeof window!="undefined"&&window;if(!bt)return g.DefaultEventPriority;switch((Je=bt.event)==null?void 0:Je.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return g.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return g.ContinuousEventPriority;default:return g.DefaultEventPriority}}function yn(Je,bt,dn,Wn){const Vn=dn.get(bt);Vn&&(dn.delete(bt),dn.size===0&&(Je.delete(Wn),Vn.target.releasePointerCapture(Wn)))}function or(Je,bt){const{internal:dn}=Je.getState();dn.interaction=dn.interaction.filter(Wn=>Wn!==bt),dn.initialHits=dn.initialHits.filter(Wn=>Wn!==bt),dn.hovered.forEach((Wn,Vn)=>{(Wn.eventObject===bt||Wn.object===bt)&&dn.hovered.delete(Vn)}),dn.capturedMap.forEach((Wn,Vn)=>{yn(dn.capturedMap,bt,Wn,Vn)})}function pr(Je){function bt(Bn){const{internal:Sr}=Je.getState(),wt=Bn.offsetX-Sr.initialClick[0],Vt=Bn.offsetY-Sr.initialClick[1];return Math.round(Math.sqrt(wt*wt+Vt*Vt))}function dn(Bn){return Bn.filter(Sr=>["Move","Over","Enter","Out","Leave"].some(wt=>{var Vt;return(Vt=Sr.__r3f)==null?void 0:Vt.handlers["onPointer"+wt]}))}function Wn(Bn,Sr){const wt=Je.getState(),Vt=new Set,gn=[],vn=Sr?Sr(wt.internal.interaction):wt.internal.interaction;for(let Se=0;Se<vn.length;Se++){const Ke=Xn(vn[Se]);Ke&&(Ke.raycaster.camera=void 0)}wt.previousRoot||wt.events.compute==null||wt.events.compute(Bn,wt);function Pn(Se){const Ke=Xn(Se);if(!Ke||!Ke.events.enabled||Ke.raycaster.camera===null)return[];if(Ke.raycaster.camera===void 0){var yt;Ke.events.compute==null||Ke.events.compute(Bn,Ke,(yt=Ke.previousRoot)==null?void 0:yt.getState()),Ke.raycaster.camera===void 0&&(Ke.raycaster.camera=null)}return Ke.raycaster.camera?Ke.raycaster.intersectObject(Se,!0):[]}let Kr=vn.flatMap(Pn).sort((Se,Ke)=>{const yt=Xn(Se.object),mn=Xn(Ke.object);return!yt||!mn?Se.distance-Ke.distance:mn.events.priority-yt.events.priority||Se.distance-Ke.distance}).filter(Se=>{const Ke=Ot(Se);return Vt.has(Ke)?!1:(Vt.add(Ke),!0)});wt.events.filter&&(Kr=wt.events.filter(Kr,wt));for(const Se of Kr){let Ke=Se.object;for(;Ke;){var yr;(yr=Ke.__r3f)!=null&&yr.eventCount&&gn.push(os(Zn({},Se),{eventObject:Ke})),Ke=Ke.parent}}if("pointerId"in Bn&&wt.internal.capturedMap.has(Bn.pointerId))for(let Se of wt.internal.capturedMap.get(Bn.pointerId).values())Vt.has(Ot(Se.intersection))||gn.push(Se.intersection);return gn}function Vn(Bn,Sr,wt,Vt){const gn=Je.getState();if(Bn.length){const vn={stopped:!1};for(const Pn of Bn){const Kr=Xn(Pn.object)||gn,{raycaster:yr,pointer:Se,camera:Ke,internal:yt}=Kr,mn=new C.Vector3(Se.x,Se.y,0).unproject(Ke),vr=xo=>{var Rr,Xi;return(Rr=(Xi=yt.capturedMap.get(xo))==null?void 0:Xi.has(Pn.eventObject))!=null?Rr:!1},Br=xo=>{const Rr={intersection:Pn,target:Sr.target};yt.capturedMap.has(xo)?yt.capturedMap.get(xo).set(Pn.eventObject,Rr):yt.capturedMap.set(xo,new Map([[Pn.eventObject,Rr]])),Sr.target.setPointerCapture(xo)},si=xo=>{const Rr=yt.capturedMap.get(xo);Rr&&yn(yt.capturedMap,Pn.eventObject,Rr,xo)};let Ui={};for(let xo in Sr){let Rr=Sr[xo];typeof Rr!="function"&&(Ui[xo]=Rr)}let Uo=os(Zn(Zn({},Pn),Ui),{pointer:Se,intersections:Bn,stopped:vn.stopped,delta:wt,unprojectedPoint:mn,ray:yr.ray,camera:Ke,stopPropagation(){const xo="pointerId"in Sr&&yt.capturedMap.get(Sr.pointerId);if((!xo||xo.has(Pn.eventObject))&&(Uo.stopped=vn.stopped=!0,yt.hovered.size&&Array.from(yt.hovered.values()).find(Rr=>Rr.eventObject===Pn.eventObject))){const Rr=Bn.slice(0,Bn.indexOf(Pn));gr([...Rr,Pn])}},target:{hasPointerCapture:vr,setPointerCapture:Br,releasePointerCapture:si},currentTarget:{hasPointerCapture:vr,setPointerCapture:Br,releasePointerCapture:si},nativeEvent:Sr});if(Vt(Uo),vn.stopped===!0)break}}return Bn}function gr(Bn){const{internal:Sr}=Je.getState();for(const wt of Sr.hovered.values())if(!Bn.length||!Bn.find(Vt=>Vt.object===wt.object&&Vt.index===wt.index&&Vt.instanceId===wt.instanceId)){const gn=wt.eventObject.__r3f,vn=gn==null?void 0:gn.handlers;if(Sr.hovered.delete(Ot(wt)),gn!=null&&gn.eventCount){const Pn=os(Zn({},wt),{intersections:Bn});vn.onPointerOut==null||vn.onPointerOut(Pn),vn.onPointerLeave==null||vn.onPointerLeave(Pn)}}}function Xr(Bn,Sr){for(let wt=0;wt<Sr.length;wt++){const Vt=Sr[wt].__r3f;Vt==null||Vt.handlers.onPointerMissed==null||Vt.handlers.onPointerMissed(Bn)}}function Ar(Bn){switch(Bn){case"onPointerLeave":case"onPointerCancel":return()=>gr([]);case"onLostPointerCapture":return Sr=>{const{internal:wt}=Je.getState();"pointerId"in Sr&&wt.capturedMap.has(Sr.pointerId)&&requestAnimationFrame(()=>{wt.capturedMap.has(Sr.pointerId)&&(wt.capturedMap.delete(Sr.pointerId),gr([]))})}}return function(wt){const{onPointerMissed:Vt,internal:gn}=Je.getState();gn.lastEvent.current=wt;const vn=Bn==="onPointerMove",Pn=Bn==="onClick"||Bn==="onContextMenu"||Bn==="onDoubleClick",yr=Wn(wt,vn?dn:void 0),Se=Pn?bt(wt):0;Bn==="onPointerDown"&&(gn.initialClick=[wt.offsetX,wt.offsetY],gn.initialHits=yr.map(yt=>yt.eventObject)),Pn&&!yr.length&&Se<=2&&(Xr(wt,gn.interaction),Vt&&Vt(wt)),vn&&gr(yr);function Ke(yt){const mn=yt.eventObject,vr=mn.__r3f,Br=vr==null?void 0:vr.handlers;if(vr!=null&&vr.eventCount)if(vn){if(Br.onPointerOver||Br.onPointerEnter||Br.onPointerOut||Br.onPointerLeave){const si=Ot(yt),Ui=gn.hovered.get(si);Ui?Ui.stopped&&yt.stopPropagation():(gn.hovered.set(si,yt),Br.onPointerOver==null||Br.onPointerOver(yt),Br.onPointerEnter==null||Br.onPointerEnter(yt))}Br.onPointerMove==null||Br.onPointerMove(yt)}else{const si=Br[Bn];si?(!Pn||gn.initialHits.includes(mn))&&(Xr(wt,gn.interaction.filter(Ui=>!gn.initialHits.includes(Ui))),si(yt)):Pn&&gn.initialHits.includes(mn)&&Xr(wt,gn.interaction.filter(Ui=>!gn.initialHits.includes(Ui)))}}Vn(yr,wt,Se,Ke)}}return{handlePointer:Ar}}const Or=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],oi=Je=>!!(Je!=null&&Je.render),Ur=d.createContext(null),Ci=(Je,bt)=>{const dn=(0,i.Z)((Ar,Bn)=>{const Sr=new C.Vector3,wt=new C.Vector3,Vt=new C.Vector3;function gn(Se=Bn().camera,Ke=wt,yt=Bn().size){const{width:mn,height:vr,top:Br,left:si}=yt,Ui=mn/vr;Ke instanceof C.Vector3?Vt.copy(Ke):Vt.set(...Ke);const Uo=Se.getWorldPosition(Sr).distanceTo(Vt);if(at(Se))return{width:mn/Se.zoom,height:vr/Se.zoom,top:Br,left:si,factor:1,distance:Uo,aspect:Ui};{const xo=Se.fov*Math.PI/180,Rr=2*Math.tan(xo/2)*Uo,Xi=Rr*(mn/vr);return{width:Xi,height:Rr,top:Br,left:si,factor:mn/Xi,distance:Uo,aspect:Ui}}}let vn;const Pn=Se=>Ar(Ke=>({performance:os(Zn({},Ke.performance),{current:Se})})),Kr=new C.Vector2;return{set:Ar,get:Bn,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(Se=1)=>Je(Bn(),Se),advance:(Se,Ke)=>bt(Se,Ke,Bn()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new C.Clock,pointer:Kr,mouse:Kr,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const Se=Bn();vn&&clearTimeout(vn),Se.performance.current!==Se.performance.min&&Pn(Se.performance.min),vn=setTimeout(()=>Pn(Bn().performance.max),Se.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:gn},setEvents:Se=>Ar(Ke=>os(Zn({},Ke),{events:Zn(Zn({},Ke.events),Se)})),setSize:(Se,Ke,yt,mn,vr)=>{const Br=Bn().camera,si={width:Se,height:Ke,top:mn||0,left:vr||0,updateStyle:yt};Ar(Ui=>({size:si,viewport:Zn(Zn({},Ui.viewport),gn(Br,wt,si))}))},setDpr:Se=>Ar(Ke=>{const yt=Mn(Se);return{viewport:os(Zn({},Ke.viewport),{dpr:yt,initialDpr:Ke.viewport.initialDpr||yt})}}),setFrameloop:(Se="always")=>{const Ke=Bn().clock;Ke.stop(),Ke.elapsedTime=0,Se!=="never"&&(Ke.start(),Ke.elapsedTime=0),Ar(()=>({frameloop:Se}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:d.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(Se,Ke,yt)=>{const mn=Bn().internal;return mn.priority=mn.priority+(Ke>0?1:0),mn.subscribers.push({ref:Se,priority:Ke,store:yt}),mn.subscribers=mn.subscribers.sort((vr,Br)=>vr.priority-Br.priority),()=>{const vr=Bn().internal;vr!=null&&vr.subscribers&&(vr.priority=vr.priority-(Ke>0?1:0),vr.subscribers=vr.subscribers.filter(Br=>Br.ref!==Se))}}}}}),Wn=dn.getState();let Vn=Wn.size,gr=Wn.viewport.dpr,Xr=Wn.camera;return dn.subscribe(()=>{const{camera:Ar,size:Bn,viewport:Sr,gl:wt,set:Vt}=dn.getState();if(Bn!==Vn||Sr.dpr!==gr){var gn;Vn=Bn,gr=Sr.dpr,At(Ar,Bn),wt.setPixelRatio(Sr.dpr);const vn=(gn=Bn.updateStyle)!=null?gn:typeof HTMLCanvasElement!="undefined"&&wt.domElement instanceof HTMLCanvasElement;wt.setSize(Bn.width,Bn.height,vn)}Ar!==Xr&&(Xr=Ar,Vt(vn=>({viewport:Zn(Zn({},vn.viewport),vn.viewport.getCurrentViewport(Ar))})))}),dn.subscribe(Ar=>Je(Ar)),dn};function Si(Je,bt){const dn={callback:Je};return bt.add(dn),()=>void bt.delete(dn)}let qi,uo=new Set,Eo=new Set,Go=new Set;const Wo=Je=>Si(Je,uo),Io=Je=>Si(Je,Eo),$i=Je=>Si(Je,Go);function gi(Je,bt){if(Je.size)for(const{callback:dn}of Je.values())dn(bt)}function bo(Je,bt){switch(Je){case"before":return gi(uo,bt);case"after":return gi(Eo,bt);case"tail":return gi(Go,bt)}}let bs,ss;function yo(Je,bt,dn){let Wn=bt.clock.getDelta();for(bt.frameloop==="never"&&typeof Je=="number"&&(Wn=Je-bt.clock.elapsedTime,bt.clock.oldTime=bt.clock.elapsedTime,bt.clock.elapsedTime=Je),bs=bt.internal.subscribers,qi=0;qi<bs.length;qi++)ss=bs[qi],ss.ref.current(ss.store.getState(),Wn,dn);return!bt.internal.priority&&bt.gl.render&&bt.gl.render(bt.scene,bt.camera),bt.internal.frames=Math.max(0,bt.internal.frames-1),bt.frameloop==="always"?1:bt.internal.frames}function Aa(Je){let bt=!1,dn,Wn,Vn;function gr(Bn){Wn=requestAnimationFrame(gr),bt=!0,dn=0,bo("before",Bn);for(const wt of Je.values()){var Sr;Vn=wt.store.getState(),Vn.internal.active&&(Vn.frameloop==="always"||Vn.internal.frames>0)&&!((Sr=Vn.gl.xr)!=null&&Sr.isPresenting)&&(dn+=yo(Bn,Vn))}if(bo("after",Bn),dn===0)return bo("tail",Bn),bt=!1,cancelAnimationFrame(Wn)}function Xr(Bn,Sr=1){var wt;if(!Bn)return Je.forEach(Vt=>Xr(Vt.store.getState()),Sr);(wt=Bn.gl.xr)!=null&&wt.isPresenting||!Bn.internal.active||Bn.frameloop==="never"||(Bn.internal.frames=Math.min(60,Bn.internal.frames+Sr),bt||(bt=!0,requestAnimationFrame(gr)))}function Ar(Bn,Sr=!0,wt,Vt){if(Sr&&bo("before",Bn),wt)yo(Bn,wt,Vt);else for(const gn of Je.values())yo(Bn,gn.store.getState());Sr&&bo("after",Bn)}return{loop:gr,invalidate:Xr,advance:Ar}}function Vi(Je){const bt=d.useRef(null);return ot(()=>void(bt.current=Je.current.__r3f),[Je]),bt}function Gs(){const Je=d.useContext(Ur);if(!Je)throw new Error("R3F: Hooks can only be used within the Canvas component!");return Je}function El(Je=dn=>dn,bt){return Gs()(Je,bt)}function Ss(Je,bt=0){const dn=Gs(),Wn=dn.getState().internal.subscribe,Vn=Rt(Je);return ot(()=>Wn(Vn,bt,dn),[bt,Wn,dn]),null}function il(Je){return d.useMemo(()=>rn(Je),[Je])}function ho(Je,bt){return function(dn,...Wn){const Vn=new dn;return Je&&Je(Vn),Promise.all(Wn.map(gr=>new Promise((Xr,Ar)=>Vn.load(gr,Bn=>{Bn.scene&&Object.assign(Bn,rn(Bn.scene)),Xr(Bn)},bt,Bn=>Ar(new Error(`Could not load ${gr}: ${Bn.message})`))))))}}function Ca(Je,bt,dn,Wn){const Vn=Array.isArray(bt)?bt:[bt],gr=(0,re.Rq)(ho(dn,Wn),[Je,...Vn],{equal:mt.equ});return Array.isArray(bt)?gr:gr[0]}Ca.preload=function(Je,bt,dn){const Wn=Array.isArray(bt)?bt:[bt];return(0,re.MA)(ho(dn),[Je,...Wn])},Ca.clear=function(Je,bt){const dn=Array.isArray(bt)?bt:[bt];return(0,re.ZH)([Je,...dn])};const Gi=new Map,{invalidate:Fo,advance:ws}=Aa(Gi),{reconciler:Mo,applyProps:ta}=Pe(Gi,kt),bl={objects:"shallow",strict:!1},Us=(Je,bt)=>{const dn=typeof Je=="function"?Je(bt):Je;return oi(dn)?dn:new C.WebGLRenderer(Zn({powerPreference:"high-performance",canvas:bt,antialias:!0,alpha:!0},Je))};function na(Je,bt){if(bt)return bt;if(typeof HTMLCanvasElement!="undefined"&&Je instanceof HTMLCanvasElement&&Je.parentElement){const{width:dn,height:Wn,top:Vn,left:gr}=Je.parentElement.getBoundingClientRect();return{width:dn,height:Wn,top:Vn,left:gr}}else if(typeof OffscreenCanvas!="undefined"&&Je instanceof OffscreenCanvas)return{width:Je.width,height:Je.height,top:0,left:0};return{width:0,height:0,top:0,left:0}}function Ns(Je){const bt=Gi.get(Je),dn=bt==null?void 0:bt.fiber,Wn=bt==null?void 0:bt.store;bt&&Q.warn("R3F.createRoot should only be called once!");const Vn=typeof reportError=="function"?reportError:Q.error,gr=Wn||Ci(Fo,ws),Xr=dn||Mo.createContainer(gr,g.ConcurrentRoot,null,!1,null,"",Vn,null);bt||Gi.set(Je,{fiber:Xr,store:gr});let Ar,Bn=!1,Sr;return{configure(wt={}){let{gl:Vt,size:gn,scene:vn,events:Pn,onCreated:Kr,shadows:yr=!1,linear:Se=!1,flat:Ke=!1,legacy:yt=!1,orthographic:mn=!1,frameloop:vr="always",dpr:Br=[1,2],performance:si,raycaster:Ui,camera:Uo,onPointerMissed:xo}=wt,Rr=gr.getState(),Xi=Rr.gl;Rr.gl||Rr.set({gl:Xi=Us(Vt,Je)});let ms=Rr.raycaster;ms||Rr.set({raycaster:ms=new C.Raycaster});const js=Ui||{},{params:fo}=js,ao=Cn(js,["params"]);if(mt.equ(ao,ms,bl)||ta(ms,Zn({},ao)),mt.equ(fo,ms.params,bl)||ta(ms,{params:Zn(Zn({},ms.params),fo)}),!Rr.camera||Rr.camera===Sr&&!mt.equ(Sr,Uo,bl)){Sr=Uo;const as=Uo instanceof C.Camera,Sa=as?Uo:mn?new C.OrthographicCamera(0,0,0,0,.1,1e3):new C.PerspectiveCamera(75,0,.1,1e3);as||(Sa.position.z=5,Uo&&ta(Sa,Uo),!Rr.camera&&!(Uo!=null&&Uo.rotation)&&Sa.lookAt(0,0,0)),Rr.set({camera:Sa})}if(!Rr.scene){let as;vn instanceof C.Scene?as=vn:(as=new C.Scene,vn&&ta(as,vn)),Rr.set({scene:On(as)})}if(!Rr.xr){const as=(Bs,Hd)=>{const ra=gr.getState();ra.frameloop!=="never"&&ws(Bs,!0,ra,Hd)},Sa=()=>{const Bs=gr.getState();Bs.gl.xr.enabled=Bs.gl.xr.isPresenting,Bs.gl.xr.setAnimationLoop(Bs.gl.xr.isPresenting?as:null),Bs.gl.xr.isPresenting||Fo(Bs)},bp={connect(){const Bs=gr.getState().gl;Bs.xr.addEventListener("sessionstart",Sa),Bs.xr.addEventListener("sessionend",Sa)},disconnect(){const Bs=gr.getState().gl;Bs.xr.removeEventListener("sessionstart",Sa),Bs.xr.removeEventListener("sessionend",Sa)}};Xi.xr&&bp.connect(),Rr.set({xr:bp})}if(Xi.shadowMap){const as=Xi.shadowMap.enabled,Sa=Xi.shadowMap.type;if(Xi.shadowMap.enabled=!!yr,mt.boo(yr))Xi.shadowMap.type=C.PCFSoftShadowMap;else if(mt.str(yr)){var sl;const bp={basic:C.BasicShadowMap,percentage:C.PCFShadowMap,soft:C.PCFSoftShadowMap,variance:C.VSMShadowMap};Xi.shadowMap.type=(sl=bp[yr])!=null?sl:C.PCFSoftShadowMap}else mt.obj(yr)&&Object.assign(Xi.shadowMap,yr);(as!==Xi.shadowMap.enabled||Sa!==Xi.shadowMap.type)&&(Xi.shadowMap.needsUpdate=!0)}const qo=gt();qo&&("enabled"in qo?qo.enabled=!yt:"legacyMode"in qo&&(qo.legacyMode=yt)),ta(Xi,{outputEncoding:Se?3e3:3001,toneMapping:Ke?C.NoToneMapping:C.ACESFilmicToneMapping}),Rr.legacy!==yt&&Rr.set(()=>({legacy:yt})),Rr.linear!==Se&&Rr.set(()=>({linear:Se})),Rr.flat!==Ke&&Rr.set(()=>({flat:Ke})),Vt&&!mt.fun(Vt)&&!oi(Vt)&&!mt.equ(Vt,Xi,bl)&&ta(Xi,Vt),Pn&&!Rr.events.handlers&&Rr.set({events:Pn(gr)});const Ga=na(Je,gn);return mt.equ(Ga,Rr.size,bl)||Rr.setSize(Ga.width,Ga.height,Ga.updateStyle,Ga.top,Ga.left),Br&&Rr.viewport.dpr!==Mn(Br)&&Rr.setDpr(Br),Rr.frameloop!==vr&&Rr.setFrameloop(vr),Rr.onPointerMissed||Rr.set({onPointerMissed:xo}),si&&!mt.equ(si,Rr.performance,bl)&&Rr.set(as=>({performance:Zn(Zn({},as.performance),si)})),Ar=Kr,Bn=!0,this},render(wt){return Bn||this.configure(),Mo.updateContainer(d.createElement(za,{store:gr,children:wt,onCreated:Ar,rootElement:Je}),Xr,null,()=>{}),gr},unmount(){ya(Je)}}}function gs(Je,bt,dn){Q.warn("R3F.render is no longer supported in React 18. Use createRoot instead!");const Wn=Ns(bt);return Wn.configure(dn),Wn.render(Je)}function za({store:Je,children:bt,onCreated:dn,rootElement:Wn}){return ot(()=>{const Vn=Je.getState();Vn.set(gr=>({internal:os(Zn({},gr.internal),{active:!0})})),dn&&dn(Vn),Je.getState().events.connected||Vn.events.connect==null||Vn.events.connect(Wn)},[]),d.createElement(Ur.Provider,{value:Je},bt)}function ya(Je,bt){const dn=Gi.get(Je),Wn=dn==null?void 0:dn.fiber;if(Wn){const Vn=dn==null?void 0:dn.store.getState();Vn&&(Vn.internal.active=!1),Mo.updateContainer(null,Wn,null,()=>{Vn&&setTimeout(()=>{try{var gr,Xr,Ar,Bn;Vn.events.disconnect==null||Vn.events.disconnect(),(gr=Vn.gl)==null||(Xr=gr.renderLists)==null||Xr.dispose==null||Xr.dispose(),(Ar=Vn.gl)==null||Ar.forceContextLoss==null||Ar.forceContextLoss(),(Bn=Vn.gl)!=null&&Bn.xr&&Vn.xr.disconnect(),un(Vn),Gi.delete(Je),bt&&bt(Je)}catch(Sr){}},500)})}}function _p(Je,bt,dn){return d.createElement(ol,{key:bt.uuid,children:Je,container:bt,state:dn})}function ol({state:Je={},children:bt,container:dn}){const Vt=Je,{events:Wn,size:Vn}=Vt,gr=Cn(Vt,["events","size"]),Xr=Gs(),[Ar]=d.useState(()=>new C.Raycaster),[Bn]=d.useState(()=>new C.Vector2),Sr=d.useCallback((gn,vn)=>{const Pn=Zn({},gn);Object.keys(gn).forEach(yr=>{(Or.includes(yr)||gn[yr]!==vn[yr]&&vn[yr])&&delete Pn[yr]});let Kr;if(vn&&Vn){const yr=vn.camera;Kr=gn.viewport.getCurrentViewport(yr,new C.Vector3,Vn),yr!==gn.camera&&At(yr,Vn)}return Zn(os(Zn({},Pn),{scene:dn,raycaster:Ar,pointer:Bn,mouse:Bn,previousRoot:Xr,events:Zn(Zn(Zn({},gn.events),vn==null?void 0:vn.events),Wn),size:Zn(Zn({},gn.size),Vn),viewport:Zn(Zn({},gn.viewport),Kr)}),gr)},[Je]),[wt]=d.useState(()=>{const gn=Xr.getState();return(0,i.Z)((Pn,Kr)=>os(Zn(os(Zn({},gn),{scene:dn,raycaster:Ar,pointer:Bn,mouse:Bn,previousRoot:Xr,events:Zn(Zn({},gn.events),Wn),size:Zn(Zn({},gn.size),Vn)}),gr),{set:Pn,get:Kr,setEvents:yr=>Pn(Se=>os(Zn({},Se),{events:Zn(Zn({},Se.events),yr)}))}))});return d.useEffect(()=>{const gn=Xr.subscribe(vn=>wt.setState(Pn=>Sr(vn,Pn)));return()=>{gn(),wt.destroy()}},[]),d.useEffect(()=>{wt.setState(gn=>Sr(Xr.getState(),gn))},[Sr]),d.createElement(d.Fragment,null,Mo.createPortal(d.createElement(Ur.Provider,{value:wt},bt),wt,null))}Mo.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:d.version});const Ep=d.unstable_act},5953:function(u,n,A){"use strict";A.r(n),A.d(n,{Canvas:function(){return fn},ReactThreeFiber:function(){return C.t},_roots:function(){return C.w},act:function(){return C.v},addAfterEffect:function(){return C.o},addEffect:function(){return C.n},addTail:function(){return C.p},advance:function(){return C.m},applyProps:function(){return C.j},context:function(){return C.f},createEvents:function(){return C.c},createPortal:function(){return C.g},createRoot:function(){return C.b},dispose:function(){return C.k},events:function(){return St},extend:function(){return C.e},flushGlobalEffects:function(){return C.q},getRootState:function(){return C.s},invalidate:function(){return C.l},reconciler:function(){return C.h},render:function(){return C.r},unmountComponentAtNode:function(){return C.d},useFrame:function(){return C.A},useGraph:function(){return C.C},useInstanceHandle:function(){return C.x},useLoader:function(){return C.D},useStore:function(){return C.y},useThree:function(){return C.z}});var C=A(5465),d=A(7462),g=A(7294),i=A(9477),_=A(296),j=A.n(_);function $(At){let{debounce:Ot,scroll:kt,polyfill:yn,offsetSize:or}=At===void 0?{debounce:0,scroll:!1,offsetSize:!1}:At;const pr=yn||(typeof window=="undefined"?class{}:window.ResizeObserver);if(!pr)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[Or,oi]=(0,g.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),Ur=(0,g.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:Or}),Ci=Ot?typeof Ot=="number"?Ot:Ot.scroll:null,Si=Ot?typeof Ot=="number"?Ot:Ot.resize:null,qi=(0,g.useRef)(!1);(0,g.useEffect)(()=>(qi.current=!0,()=>void(qi.current=!1)));const[uo,Eo,Go]=(0,g.useMemo)(()=>{const gi=()=>{if(!Ur.current.element)return;const{left:bo,top:bs,width:ss,height:yo,bottom:Aa,right:Vi,x:Gs,y:El}=Ur.current.element.getBoundingClientRect(),Ss={left:bo,top:bs,width:ss,height:yo,bottom:Aa,right:Vi,x:Gs,y:El};Ur.current.element instanceof HTMLElement&&or&&(Ss.height=Ur.current.element.offsetHeight,Ss.width=Ur.current.element.offsetWidth),Object.freeze(Ss),qi.current&&!st(Ur.current.lastBounds,Ss)&&oi(Ur.current.lastBounds=Ss)};return[gi,Si?j()(gi,Si):gi,Ci?j()(gi,Ci):gi]},[oi,or,Ci,Si]);function Wo(){Ur.current.scrollContainers&&(Ur.current.scrollContainers.forEach(gi=>gi.removeEventListener("scroll",Go,!0)),Ur.current.scrollContainers=null),Ur.current.resizeObserver&&(Ur.current.resizeObserver.disconnect(),Ur.current.resizeObserver=null)}function Io(){Ur.current.element&&(Ur.current.resizeObserver=new pr(Go),Ur.current.resizeObserver.observe(Ur.current.element),kt&&Ur.current.scrollContainers&&Ur.current.scrollContainers.forEach(gi=>gi.addEventListener("scroll",Go,{capture:!0,passive:!0})))}const $i=gi=>{!gi||gi===Ur.current.element||(Wo(),Ur.current.element=gi,Ur.current.scrollContainers=ae(gi),Io())};return Q(Go,!!kt),re(Eo),(0,g.useEffect)(()=>{Wo(),Io()},[kt,Go,Eo]),(0,g.useEffect)(()=>Wo,[]),[$i,Or,uo]}function re(At){(0,g.useEffect)(()=>{const Ot=At;return window.addEventListener("resize",Ot),()=>void window.removeEventListener("resize",Ot)},[At])}function Q(At,Ot){(0,g.useEffect)(()=>{if(Ot){const kt=At;return window.addEventListener("scroll",kt,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",kt,!0)}},[At,Ot])}function ae(At){const Ot=[];if(!At||At===document.body)return Ot;const{overflow:kt,overflowX:yn,overflowY:or}=window.getComputedStyle(At);return[kt,yn,or].some(pr=>pr==="auto"||pr==="scroll")&&Ot.push(At),[...Ot,...ae(At.parentElement)]}const pe=["x","y","top","bottom","left","right","width","height"],st=(At,Ot)=>pe.every(kt=>At[kt]===Ot[kt]);var Pe=Object.defineProperty,Oe=Object.defineProperties,Ze=Object.getOwnPropertyDescriptors,rt=Object.getOwnPropertySymbols,gt=Object.prototype.hasOwnProperty,at=Object.prototype.propertyIsEnumerable,ut=(At,Ot,kt)=>Ot in At?Pe(At,Ot,{enumerable:!0,configurable:!0,writable:!0,value:kt}):At[Ot]=kt,ot=(At,Ot)=>{for(var kt in Ot||(Ot={}))gt.call(Ot,kt)&&ut(At,kt,Ot[kt]);if(rt)for(var kt of rt(Ot))at.call(Ot,kt)&&ut(At,kt,Ot[kt]);return At},Rt=(At,Ot)=>Oe(At,Ze(Ot));function Mt(At,Ot,kt){if(!At)return;if(kt(At)===!0)return At;let yn=Ot?At.return:At.child;for(;yn;){const or=Mt(yn,Ot,kt);if(or)return or;yn=Ot?null:yn.sibling}}function Pt(At){try{return Object.defineProperties(At,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch(Ot){return At}}const It=Pt(g.createContext(null));class xt extends g.Component{render(){return g.createElement(It.Provider,{value:this._reactInternals},this.props.children)}}const{ReactCurrentOwner:ln,ReactCurrentDispatcher:Mn}=g.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;function Xn(){const At=g.useContext(It);if(At===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const Ot=g.useId();return g.useMemo(()=>{for(const yn of[ln==null?void 0:ln.current,At,At==null?void 0:At.alternate]){if(!yn)continue;const or=Mt(yn,!1,pr=>{let Or=pr.memoizedState;for(;Or;){if(Or.memoizedState===Ot)return!0;Or=Or.next}});if(or)return or}},[At,Ot])}function mt(){const At=Xn(),Ot=React.useMemo(()=>Mt(At,!0,kt=>{var yn;return((yn=kt.stateNode)==null?void 0:yn.containerInfo)!=null}),[At]);return Ot==null?void 0:Ot.stateNode.containerInfo}function rn(At){const Ot=Xn(),kt=React.useRef();return React.useLayoutEffect(()=>{var yn;kt.current=(yn=Mt(Ot,!1,or=>typeof or.type=="string"&&(At===void 0||or.type===At)))==null?void 0:yn.stateNode},[Ot]),kt}function un(At){const Ot=Xn(),kt=React.useRef();return React.useLayoutEffect(()=>{var yn;kt.current=(yn=Mt(Ot,!0,or=>typeof or.type=="string"&&(At===void 0||or.type===At)))==null?void 0:yn.stateNode},[Ot]),kt}function On(){var At,Ot;const kt=Xn(),[yn]=g.useState(()=>new Map);yn.clear();let or=kt;for(;or;){const pr=(At=or.type)==null?void 0:At._context;pr&&pr!==It&&!yn.has(pr)&&yn.set(pr,(Ot=Mn==null?void 0:Mn.current)==null?void 0:Ot.readContext(Pt(pr))),or=or.return}return yn}function Ln(){const At=On();return g.useMemo(()=>Array.from(At.keys()).reduce((Ot,kt)=>yn=>g.createElement(Ot,null,g.createElement(kt.Provider,Rt(ot({},yn),{value:At.get(kt)}))),Ot=>g.createElement(xt,ot({},Ot))),[At])}var fr=A(2576),_t=A(6525),ct=A(5431);const nt={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function St(At){const{handlePointer:Ot}=(0,C.c)(At);return{priority:1,enabled:!0,compute(kt,yn,or){yn.pointer.set(kt.offsetX/yn.size.width*2-1,-(kt.offsetY/yn.size.height)*2+1),yn.raycaster.setFromCamera(yn.pointer,yn.camera)},connected:void 0,handlers:Object.keys(nt).reduce((kt,yn)=>os(Zn({},kt),{[yn]:Ot(yn)}),{}),update:()=>{var kt;const{events:yn,internal:or}=At.getState();(kt=or.lastEvent)!=null&&kt.current&&yn.handlers&&yn.handlers.onPointerMove(or.lastEvent.current)},connect:kt=>{var yn;const{set:or,events:pr}=At.getState();pr.disconnect==null||pr.disconnect(),or(Or=>({events:os(Zn({},Or.events),{connected:kt})})),Object.entries((yn=pr.handlers)!=null?yn:[]).forEach(([Or,oi])=>{const[Ur,Ci]=nt[Or];kt.addEventListener(Ur,oi,{passive:Ci})})},disconnect:()=>{const{set:kt,events:yn}=At.getState();if(yn.connected){var or;Object.entries((or=yn.handlers)!=null?or:[]).forEach(([pr,Or])=>{if(yn&&yn.connected instanceof HTMLElement){const[oi]=nt[pr];yn.connected.removeEventListener(oi,Or)}}),kt(pr=>({events:os(Zn({},pr.events),{connected:void 0})}))}}}}const Tt=g.forwardRef(function(Aa,yo){var Vi=Aa,{children:Ot,fallback:kt,resize:yn,style:or,gl:pr,events:Or=St,eventSource:oi,eventPrefix:Ur,shadows:Ci,linear:Si,flat:qi,legacy:uo,orthographic:Eo,frameloop:Go,dpr:Wo,performance:Io,raycaster:$i,camera:gi,onPointerMissed:bo,onCreated:bs}=Vi,ss=Cn(Vi,["children","fallback","resize","style","gl","events","eventSource","eventPrefix","shadows","linear","flat","legacy","orthographic","frameloop","dpr","performance","raycaster","camera","onPointerMissed","onCreated"]);g.useMemo(()=>(0,C.e)(i),[]);const Gs=Ln(),[El,Ss]=$(Zn({scroll:!0,debounce:{scroll:50,resize:0}},yn)),il=g.useRef(null),ho=g.useRef(null);g.useImperativeHandle(yo,()=>il.current);const Ca=(0,C.u)(bo),[Gi,Fo]=g.useState(!1),[ws,Mo]=g.useState(!1);if(Gi)throw Gi;if(ws)throw ws;const ta=g.useRef(null);(0,C.a)(()=>{const Us=il.current;Ss.width>0&&Ss.height>0&&Us&&(ta.current||(ta.current=(0,C.b)(Us)),ta.current.configure({gl:pr,events:Or,shadows:Ci,linear:Si,flat:qi,legacy:uo,orthographic:Eo,frameloop:Go,dpr:Wo,performance:Io,raycaster:$i,camera:gi,size:Ss,onPointerMissed:(...na)=>Ca.current==null?void 0:Ca.current(...na),onCreated:na=>{na.events.connect==null||na.events.connect(oi?(0,C.i)(oi)?oi.current:oi:ho.current),Ur&&na.setEvents({compute:(Ns,gs)=>{const za=Ns[Ur+"X"],ya=Ns[Ur+"Y"];gs.pointer.set(za/gs.size.width*2-1,-(ya/gs.size.height)*2+1),gs.raycaster.setFromCamera(gs.pointer,gs.camera)}}),bs==null||bs(na)}}),ta.current.render(g.createElement(Gs,null,g.createElement(C.E,{set:Mo},g.createElement(g.Suspense,{fallback:g.createElement(C.B,{set:Fo})},Ot)))))}),g.useEffect(()=>{const Us=il.current;if(Us)return()=>(0,C.d)(Us)},[]);const bl=oi?"none":"auto";return g.createElement("div",(0,d.Z)({ref:ho,style:Zn({position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:bl},or)},ss),g.createElement("div",{ref:El,style:{width:"100%",height:"100%"}},g.createElement("canvas",{ref:il,style:{display:"block"}},kt)))}),fn=g.forwardRef(function(Ot,kt){return g.createElement(xt,null,g.createElement(Tt,(0,d.Z)({},Ot,{ref:kt})))})},1906:function(u,n,A){"use strict";var C=A(5108);/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function d(_t,ct){var nt=_t.length;_t.push(ct);e:for(;0<nt;){var St=nt-1>>>1,Tt=_t[St];if(0<_(Tt,ct))_t[St]=ct,_t[nt]=Tt,nt=St;else break e}}function g(_t){return _t.length===0?null:_t[0]}function i(_t){if(_t.length===0)return null;var ct=_t[0],nt=_t.pop();if(nt!==ct){_t[0]=nt;e:for(var St=0,Tt=_t.length,fn=Tt>>>1;St<fn;){var At=2*(St+1)-1,Ot=_t[At],kt=At+1,yn=_t[kt];if(0>_(Ot,nt))kt<Tt&&0>_(yn,Ot)?(_t[St]=yn,_t[kt]=nt,St=kt):(_t[St]=Ot,_t[At]=nt,St=At);else if(kt<Tt&&0>_(yn,nt))_t[St]=yn,_t[kt]=nt,St=kt;else break e}}return ct}function _(_t,ct){var nt=_t.sortIndex-ct.sortIndex;return nt!==0?nt:_t.id-ct.id}if(typeof performance=="object"&&typeof performance.now=="function"){var j=performance;n.unstable_now=function(){return j.now()}}else{var $=Date,re=$.now();n.unstable_now=function(){return $.now()-re}}var Q=[],ae=[],pe=1,st=null,Pe=3,Oe=!1,Ze=!1,rt=!1,gt=typeof setTimeout=="function"?setTimeout:null,at=typeof clearTimeout=="function"?clearTimeout:null,ut=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ot(_t){for(var ct=g(ae);ct!==null;){if(ct.callback===null)i(ae);else if(ct.startTime<=_t)i(ae),ct.sortIndex=ct.expirationTime,d(Q,ct);else break;ct=g(ae)}}function Rt(_t){if(rt=!1,ot(_t),!Ze)if(g(Q)!==null)Ze=!0,Ln(Mt);else{var ct=g(ae);ct!==null&&fr(Rt,ct.startTime-_t)}}function Mt(_t,ct){Ze=!1,rt&&(rt=!1,at(xt),xt=-1),Oe=!0;var nt=Pe;try{for(ot(ct),st=g(Q);st!==null&&(!(st.expirationTime>ct)||_t&&!Xn());){var St=st.callback;if(typeof St=="function"){st.callback=null,Pe=st.priorityLevel;var Tt=St(st.expirationTime<=ct);ct=n.unstable_now(),typeof Tt=="function"?st.callback=Tt:st===g(Q)&&i(Q),ot(ct)}else i(Q);st=g(Q)}if(st!==null)var fn=!0;else{var At=g(ae);At!==null&&fr(Rt,At.startTime-ct),fn=!1}return fn}finally{st=null,Pe=nt,Oe=!1}}var Pt=!1,It=null,xt=-1,ln=5,Mn=-1;function Xn(){return!(n.unstable_now()-Mn<ln)}function mt(){if(It!==null){var _t=n.unstable_now();Mn=_t;var ct=!0;try{ct=It(!0,_t)}finally{ct?rn():(Pt=!1,It=null)}}else Pt=!1}var rn;if(typeof ut=="function")rn=function(){ut(mt)};else if(typeof MessageChannel!="undefined"){var un=new MessageChannel,On=un.port2;un.port1.onmessage=mt,rn=function(){On.postMessage(null)}}else rn=function(){gt(mt,0)};function Ln(_t){It=_t,Pt||(Pt=!0,rn())}function fr(_t,ct){xt=gt(function(){_t(n.unstable_now())},ct)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(_t){_t.callback=null},n.unstable_continueExecution=function(){Ze||Oe||(Ze=!0,Ln(Mt))},n.unstable_forceFrameRate=function(_t){0>_t||125<_t?C.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ln=0<_t?Math.floor(1e3/_t):5},n.unstable_getCurrentPriorityLevel=function(){return Pe},n.unstable_getFirstCallbackNode=function(){return g(Q)},n.unstable_next=function(_t){switch(Pe){case 1:case 2:case 3:var ct=3;break;default:ct=Pe}var nt=Pe;Pe=ct;try{return _t()}finally{Pe=nt}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(_t,ct){switch(_t){case 1:case 2:case 3:case 4:case 5:break;default:_t=3}var nt=Pe;Pe=_t;try{return ct()}finally{Pe=nt}},n.unstable_scheduleCallback=function(_t,ct,nt){var St=n.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?St+nt:St):nt=St,_t){case 1:var Tt=-1;break;case 2:Tt=250;break;case 5:Tt=1073741823;break;case 4:Tt=1e4;break;default:Tt=5e3}return Tt=nt+Tt,_t={id:pe++,callback:ct,priorityLevel:_t,startTime:nt,expirationTime:Tt,sortIndex:-1},nt>St?(_t.sortIndex=nt,d(ae,_t),g(Q)===null&&_t===g(ae)&&(rt?(at(xt),xt=-1):rt=!0,fr(Rt,nt-St))):(_t.sortIndex=Tt,d(Q,_t),Ze||Oe||(Ze=!0,Ln(Mt))),_t},n.unstable_shouldYield=Xn,n.unstable_wrapCallback=function(_t){var ct=Pe;return function(){var nt=Pe;Pe=ct;try{return _t.apply(this,arguments)}finally{Pe=nt}}}},5431:function(u,n,A){"use strict";u.exports=A(1906)},8208:function(u,n,A){"use strict";var C=A(7537),d=A.n(C),g=A(3645),i=A.n(g),_=i()(d());_.push([u.id,`/* stylelint-disable property-no-vendor-prefix */
.liner--GyAEo {
  background: linear-gradient(30deg, #c850c0, #ffcc70);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-size: 60px;
  position: absolute;
  top: 50%;
  left: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
}
`,"",{version:3,sources:["webpack://./src/pages/three/index.module.less"],names:[],mappings:"AAAA,gDAAgD;AAChD;EACE,oDAAoD;EACpD,6BAA6B;EAC7B,oCAAoC;EACpC,eAAe;EACf,kBAAkB;EAClB,QAAQ;EACR,SAAS;EACT,wCAAgC;UAAhC,gCAAgC;AAClC",sourcesContent:[`/* stylelint-disable property-no-vendor-prefix */
.liner {
  background: linear-gradient(30deg, #c850c0, #ffcc70);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  font-size: 60px;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}
`],sourceRoot:""}]),_.locals={liner:"liner--GyAEo"},n.Z=_},296:function(u){function n(A,C,d){var g,i,_,j,$;C==null&&(C=100);function re(){var ae=Date.now()-j;ae<C&&ae>=0?g=setTimeout(re,C-ae):(g=null,d||($=A.apply(_,i),_=i=null))}var Q=function(){_=this,i=arguments,j=Date.now();var ae=d&&!g;return g||(g=setTimeout(re,C)),ae&&($=A.apply(_,i),_=i=null),$};return Q.clear=function(){g&&(clearTimeout(g),g=null)},Q.flush=function(){g&&($=A.apply(_,i),_=i=null,clearTimeout(g),g=null)},Q}n.debounce=n,u.exports=n},5889:function(u,n,A){"use strict";var C=A(4836),d=A(8698);Object.defineProperty(n,"__esModule",{value:!0}),n.default=st;var g=C(A(434)),i=C(A(7424)),_=pe(A(7294)),j=A(5953),$=A(8060),re=pe(A(7482)),Q=C(A(209));function ae(Oe){if(typeof WeakMap!="function")return null;var Ze=new WeakMap,rt=new WeakMap;return(ae=function(at){return at?rt:Ze})(Oe)}function pe(Oe,Ze){if(!Ze&&Oe&&Oe.__esModule)return Oe;if(Oe===null||d(Oe)!=="object"&&typeof Oe!="function")return{default:Oe};var rt=ae(Ze);if(rt&&rt.has(Oe))return rt.get(Oe);var gt={},at=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ut in Oe)if(ut!=="default"&&Object.prototype.hasOwnProperty.call(Oe,ut)){var ot=at?Object.getOwnPropertyDescriptor(Oe,ut):null;ot&&(ot.get||ot.set)?Object.defineProperty(gt,ut,ot):gt[ut]=Oe[ut]}return gt.default=Oe,rt&&rt.set(Oe,gt),gt}function st(){return _.default.createElement("div",{style:{width:"100%",height:"calc(100vh - 232px)",background:"#12071f"}},_.default.createElement("h2",{className:Q.default.liner},"React Three Fiber"),_.default.createElement(j.Canvas,{camera:{position:[0,0,1]}},_.default.createElement(Pe,null)))}function Pe(Oe){var Ze=(0,_.useRef)(),rt=(0,_.useState)(function(){return re.inSphere(new Float32Array(5e3),{radius:1.5})}),gt=(0,i.default)(rt,1),at=gt[0];return(0,j.useFrame)(function(ut,ot){Ze.current.rotation.x-=ot/10,Ze.current.rotation.y-=ot/15}),_.default.createElement("group",{rotation:[0,0,Math.PI/4]},_.default.createElement($.Points,(0,g.default)({ref:Ze,positions:at,stride:3,frustumCulled:!1},Oe),_.default.createElement($.PointMaterial,{transparent:!0,color:"#ffa0e0",size:.005,sizeAttenuation:!0,depthWrite:!1})))}},7378:function(u){var n=NaN,A="[object Symbol]",C=/^\s+|\s+$/g,d=/^[-+]0x[0-9a-f]+$/i,g=/^0b[01]+$/i,i=/^0o[0-7]+$/i,_=parseInt,j=Object.prototype,$=j.toString;function re(Oe,Ze,rt){return Oe===Oe&&(rt!==void 0&&(Oe=Oe<=rt?Oe:rt),Ze!==void 0&&(Oe=Oe>=Ze?Oe:Ze)),Oe}function Q(Oe){var Ze=typeof Oe;return!!Oe&&(Ze=="object"||Ze=="function")}function ae(Oe){return!!Oe&&typeof Oe=="object"}function pe(Oe){return typeof Oe=="symbol"||ae(Oe)&&$.call(Oe)==A}function st(Oe){if(typeof Oe=="number")return Oe;if(pe(Oe))return n;if(Q(Oe)){var Ze=typeof Oe.valueOf=="function"?Oe.valueOf():Oe;Oe=Q(Ze)?Ze+"":Ze}if(typeof Oe!="string")return Oe===0?Oe:+Oe;Oe=Oe.replace(C,"");var rt=g.test(Oe);return rt||i.test(Oe)?_(Oe.slice(2),rt?2:8):d.test(Oe)?n:+Oe}function Pe(Oe,Ze,rt){return rt===void 0&&(rt=Ze,Ze=void 0),rt!==void 0&&(rt=st(rt),rt=rt===rt?rt:0),Ze!==void 0&&(Ze=st(Ze),Ze=Ze===Ze?Ze:0),re(st(Oe),Ze,rt)}u.exports=Pe},6427:function(u,n,A){var C=200,d="__lodash_hash_undefined__",g=1/0,i=9007199254740991,_="[object Arguments]",j="[object Function]",$="[object GeneratorFunction]",re="[object Symbol]",Q=/[\\^$.*+?()[\]{}|]/g,ae=/^\[object .+?Constructor\]$/,pe=/^(?:0|[1-9]\d*)$/,st=typeof A.g=="object"&&A.g&&A.g.Object===Object&&A.g,Pe=typeof self=="object"&&self&&self.Object===Object&&self,Oe=st||Pe||Function("return this")();function Ze(Se,Ke,yt){switch(yt.length){case 0:return Se.call(Ke);case 1:return Se.call(Ke,yt[0]);case 2:return Se.call(Ke,yt[0],yt[1]);case 3:return Se.call(Ke,yt[0],yt[1],yt[2])}return Se.apply(Ke,yt)}function rt(Se,Ke){var yt=Se?Se.length:0;return!!yt&&Rt(Se,Ke,0)>-1}function gt(Se,Ke,yt){for(var mn=-1,vr=Se?Se.length:0;++mn<vr;)if(yt(Ke,Se[mn]))return!0;return!1}function at(Se,Ke){for(var yt=-1,mn=Se?Se.length:0,vr=Array(mn);++yt<mn;)vr[yt]=Ke(Se[yt],yt,Se);return vr}function ut(Se,Ke){for(var yt=-1,mn=Ke.length,vr=Se.length;++yt<mn;)Se[vr+yt]=Ke[yt];return Se}function ot(Se,Ke,yt,mn){for(var vr=Se.length,Br=yt+(mn?1:-1);mn?Br--:++Br<vr;)if(Ke(Se[Br],Br,Se))return Br;return-1}function Rt(Se,Ke,yt){if(Ke!==Ke)return ot(Se,Mt,yt);for(var mn=yt-1,vr=Se.length;++mn<vr;)if(Se[mn]===Ke)return mn;return-1}function Mt(Se){return Se!==Se}function Pt(Se,Ke){for(var yt=-1,mn=Array(Se);++yt<Se;)mn[yt]=Ke(yt);return mn}function It(Se){return function(Ke){return Se(Ke)}}function xt(Se,Ke){return Se.has(Ke)}function ln(Se,Ke){return Se==null?void 0:Se[Ke]}function Mn(Se){var Ke=!1;if(Se!=null&&typeof Se.toString!="function")try{Ke=!!(Se+"")}catch(yt){}return Ke}function Xn(Se,Ke){return function(yt){return Se(Ke(yt))}}var mt=Array.prototype,rn=Function.prototype,un=Object.prototype,On=Oe["__core-js_shared__"],Ln=function(){var Se=/[^.]+$/.exec(On&&On.keys&&On.keys.IE_PROTO||"");return Se?"Symbol(src)_1."+Se:""}(),fr=rn.toString,_t=un.hasOwnProperty,ct=un.toString,nt=RegExp("^"+fr.call(_t).replace(Q,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),St=Oe.Symbol,Tt=Xn(Object.getPrototypeOf,Object),fn=un.propertyIsEnumerable,At=mt.splice,Ot=St?St.isConcatSpreadable:void 0,kt=Object.getOwnPropertySymbols,yn=Math.max,or=Ns(Oe,"Map"),pr=Ns(Object,"create");function Or(Se){var Ke=-1,yt=Se?Se.length:0;for(this.clear();++Ke<yt;){var mn=Se[Ke];this.set(mn[0],mn[1])}}function oi(){this.__data__=pr?pr(null):{}}function Ur(Se){return this.has(Se)&&delete this.__data__[Se]}function Ci(Se){var Ke=this.__data__;if(pr){var yt=Ke[Se];return yt===d?void 0:yt}return _t.call(Ke,Se)?Ke[Se]:void 0}function Si(Se){var Ke=this.__data__;return pr?Ke[Se]!==void 0:_t.call(Ke,Se)}function qi(Se,Ke){var yt=this.__data__;return yt[Se]=pr&&Ke===void 0?d:Ke,this}Or.prototype.clear=oi,Or.prototype.delete=Ur,Or.prototype.get=Ci,Or.prototype.has=Si,Or.prototype.set=qi;function uo(Se){var Ke=-1,yt=Se?Se.length:0;for(this.clear();++Ke<yt;){var mn=Se[Ke];this.set(mn[0],mn[1])}}function Eo(){this.__data__=[]}function Go(Se){var Ke=this.__data__,yt=il(Ke,Se);if(yt<0)return!1;var mn=Ke.length-1;return yt==mn?Ke.pop():At.call(Ke,yt,1),!0}function Wo(Se){var Ke=this.__data__,yt=il(Ke,Se);return yt<0?void 0:Ke[yt][1]}function Io(Se){return il(this.__data__,Se)>-1}function $i(Se,Ke){var yt=this.__data__,mn=il(yt,Se);return mn<0?yt.push([Se,Ke]):yt[mn][1]=Ke,this}uo.prototype.clear=Eo,uo.prototype.delete=Go,uo.prototype.get=Wo,uo.prototype.has=Io,uo.prototype.set=$i;function gi(Se){var Ke=-1,yt=Se?Se.length:0;for(this.clear();++Ke<yt;){var mn=Se[Ke];this.set(mn[0],mn[1])}}function bo(){this.__data__={hash:new Or,map:new(or||uo),string:new Or}}function bs(Se){return na(this,Se).delete(Se)}function ss(Se){return na(this,Se).get(Se)}function yo(Se){return na(this,Se).has(Se)}function Aa(Se,Ke){return na(this,Se).set(Se,Ke),this}gi.prototype.clear=bo,gi.prototype.delete=bs,gi.prototype.get=ss,gi.prototype.has=yo,gi.prototype.set=Aa;function Vi(Se){var Ke=-1,yt=Se?Se.length:0;for(this.__data__=new gi;++Ke<yt;)this.add(Se[Ke])}function Gs(Se){return this.__data__.set(Se,d),this}function El(Se){return this.__data__.has(Se)}Vi.prototype.add=Vi.prototype.push=Gs,Vi.prototype.has=El;function Ss(Se,Ke){var yt=Xr(Se)||gr(Se)?Pt(Se.length,String):[],mn=yt.length,vr=!!mn;for(var Br in Se)(Ke||_t.call(Se,Br))&&!(vr&&(Br=="length"||_p(Br,mn)))&&yt.push(Br);return yt}function il(Se,Ke){for(var yt=Se.length;yt--;)if(Vn(Se[yt][0],Ke))return yt;return-1}function ho(Se,Ke,yt,mn){var vr=-1,Br=rt,si=!0,Ui=Se.length,Uo=[],xo=Ke.length;if(!Ui)return Uo;yt&&(Ke=at(Ke,It(yt))),mn?(Br=gt,si=!1):Ke.length>=C&&(Br=xt,si=!1,Ke=new Vi(Ke));e:for(;++vr<Ui;){var Rr=Se[vr],Xi=yt?yt(Rr):Rr;if(Rr=mn||Rr!==0?Rr:0,si&&Xi===Xi){for(var ms=xo;ms--;)if(Ke[ms]===Xi)continue e;Uo.push(Rr)}else Br(Ke,Xi,mn)||Uo.push(Rr)}return Uo}function Ca(Se,Ke,yt,mn,vr){var Br=-1,si=Se.length;for(yt||(yt=ya),vr||(vr=[]);++Br<si;){var Ui=Se[Br];Ke>0&&yt(Ui)?Ke>1?Ca(Ui,Ke-1,yt,mn,vr):ut(vr,Ui):mn||(vr[vr.length]=Ui)}return vr}function Gi(Se,Ke,yt){var mn=Ke(Se);return Xr(Se)?mn:ut(mn,yt(Se))}function Fo(Se){if(!Vt(Se)||Ep(Se))return!1;var Ke=Sr(Se)||Mn(Se)?nt:ae;return Ke.test(Wn(Se))}function ws(Se){if(!Vt(Se))return bt(Se);var Ke=Je(Se),yt=[];for(var mn in Se)mn=="constructor"&&(Ke||!_t.call(Se,mn))||yt.push(mn);return yt}function Mo(Se,Ke){return Se=Object(Se),ta(Se,Ke,function(yt,mn){return mn in Se})}function ta(Se,Ke,yt){for(var mn=-1,vr=Ke.length,Br={};++mn<vr;){var si=Ke[mn],Ui=Se[si];yt(Ui,si)&&(Br[si]=Ui)}return Br}function bl(Se,Ke){return Ke=yn(Ke===void 0?Se.length-1:Ke,0),function(){for(var yt=arguments,mn=-1,vr=yn(yt.length-Ke,0),Br=Array(vr);++mn<vr;)Br[mn]=yt[Ke+mn];mn=-1;for(var si=Array(Ke+1);++mn<Ke;)si[mn]=yt[mn];return si[Ke]=Br,Ze(Se,this,si)}}function Us(Se){return Gi(Se,Pn,za)}function na(Se,Ke){var yt=Se.__data__;return ol(Ke)?yt[typeof Ke=="string"?"string":"hash"]:yt.map}function Ns(Se,Ke){var yt=ln(Se,Ke);return Fo(yt)?yt:void 0}var gs=kt?Xn(kt,Object):yr,za=kt?function(Se){for(var Ke=[];Se;)ut(Ke,gs(Se)),Se=Tt(Se);return Ke}:yr;function ya(Se){return Xr(Se)||gr(Se)||!!(Ot&&Se&&Se[Ot])}function _p(Se,Ke){return Ke=Ke==null?i:Ke,!!Ke&&(typeof Se=="number"||pe.test(Se))&&Se>-1&&Se%1==0&&Se<Ke}function ol(Se){var Ke=typeof Se;return Ke=="string"||Ke=="number"||Ke=="symbol"||Ke=="boolean"?Se!=="__proto__":Se===null}function Ep(Se){return!!Ln&&Ln in Se}function Je(Se){var Ke=Se&&Se.constructor,yt=typeof Ke=="function"&&Ke.prototype||un;return Se===yt}function bt(Se){var Ke=[];if(Se!=null)for(var yt in Object(Se))Ke.push(yt);return Ke}function dn(Se){if(typeof Se=="string"||vn(Se))return Se;var Ke=Se+"";return Ke=="0"&&1/Se==-g?"-0":Ke}function Wn(Se){if(Se!=null){try{return fr.call(Se)}catch(Ke){}try{return Se+""}catch(Ke){}}return""}function Vn(Se,Ke){return Se===Ke||Se!==Se&&Ke!==Ke}function gr(Se){return Bn(Se)&&_t.call(Se,"callee")&&(!fn.call(Se,"callee")||ct.call(Se)==_)}var Xr=Array.isArray;function Ar(Se){return Se!=null&&wt(Se.length)&&!Sr(Se)}function Bn(Se){return gn(Se)&&Ar(Se)}function Sr(Se){var Ke=Vt(Se)?ct.call(Se):"";return Ke==j||Ke==$}function wt(Se){return typeof Se=="number"&&Se>-1&&Se%1==0&&Se<=i}function Vt(Se){var Ke=typeof Se;return!!Se&&(Ke=="object"||Ke=="function")}function gn(Se){return!!Se&&typeof Se=="object"}function vn(Se){return typeof Se=="symbol"||gn(Se)&&ct.call(Se)==re}function Pn(Se){return Ar(Se)?Ss(Se,!0):ws(Se)}var Kr=bl(function(Se,Ke){return Se==null?{}:(Ke=at(Ca(Ke,1),dn),Mo(Se,ho(Us(Se),Ke)))});function yr(){return[]}u.exports=Kr},5030:function(u,n,A){var C=1/0,d=9007199254740991,g="[object Arguments]",i="[object Function]",_="[object GeneratorFunction]",j="[object Symbol]",$=typeof A.g=="object"&&A.g&&A.g.Object===Object&&A.g,re=typeof self=="object"&&self&&self.Object===Object&&self,Q=$||re||Function("return this")();function ae(ct,nt,St){switch(St.length){case 0:return ct.call(nt);case 1:return ct.call(nt,St[0]);case 2:return ct.call(nt,St[0],St[1]);case 3:return ct.call(nt,St[0],St[1],St[2])}return ct.apply(nt,St)}function pe(ct,nt){for(var St=-1,Tt=ct?ct.length:0,fn=Array(Tt);++St<Tt;)fn[St]=nt(ct[St],St,ct);return fn}function st(ct,nt){for(var St=-1,Tt=nt.length,fn=ct.length;++St<Tt;)ct[fn+St]=nt[St];return ct}var Pe=Object.prototype,Oe=Pe.hasOwnProperty,Ze=Pe.toString,rt=Q.Symbol,gt=Pe.propertyIsEnumerable,at=rt?rt.isConcatSpreadable:void 0,ut=Math.max;function ot(ct,nt,St,Tt,fn){var At=-1,Ot=ct.length;for(St||(St=It),fn||(fn=[]);++At<Ot;){var kt=ct[At];nt>0&&St(kt)?nt>1?ot(kt,nt-1,St,Tt,fn):st(fn,kt):Tt||(fn[fn.length]=kt)}return fn}function Rt(ct,nt){return ct=Object(ct),Mt(ct,nt,function(St,Tt){return Tt in ct})}function Mt(ct,nt,St){for(var Tt=-1,fn=nt.length,At={};++Tt<fn;){var Ot=nt[Tt],kt=ct[Ot];St(kt,Ot)&&(At[Ot]=kt)}return At}function Pt(ct,nt){return nt=ut(nt===void 0?ct.length-1:nt,0),function(){for(var St=arguments,Tt=-1,fn=ut(St.length-nt,0),At=Array(fn);++Tt<fn;)At[Tt]=St[nt+Tt];Tt=-1;for(var Ot=Array(nt+1);++Tt<nt;)Ot[Tt]=St[Tt];return Ot[nt]=At,ae(ct,this,Ot)}}function It(ct){return Mn(ct)||ln(ct)||!!(at&&ct&&ct[at])}function xt(ct){if(typeof ct=="string"||fr(ct))return ct;var nt=ct+"";return nt=="0"&&1/ct==-C?"-0":nt}function ln(ct){return mt(ct)&&Oe.call(ct,"callee")&&(!gt.call(ct,"callee")||Ze.call(ct)==g)}var Mn=Array.isArray;function Xn(ct){return ct!=null&&un(ct.length)&&!rn(ct)}function mt(ct){return Ln(ct)&&Xn(ct)}function rn(ct){var nt=On(ct)?Ze.call(ct):"";return nt==i||nt==_}function un(ct){return typeof ct=="number"&&ct>-1&&ct%1==0&&ct<=d}function On(ct){var nt=typeof ct;return!!ct&&(nt=="object"||nt=="function")}function Ln(ct){return!!ct&&typeof ct=="object"}function fr(ct){return typeof ct=="symbol"||Ln(ct)&&Ze.call(ct)==j}var _t=Pt(function(ct,nt){return ct==null?{}:Rt(ct,pe(ot(nt,1),xt))});u.exports=_t},2541:function(u,n,A){"use strict";A.d(n,{_:function(){return C}});function C(d,g){if(!(d instanceof g))throw new TypeError("Cannot call a class as a function")}},26:function(u,n,A){"use strict";A.d(n,{G:function(){return Mt},a:function(){return ln},b:function(){return Xn},c:function(){return mt},d:function(){return un},e:function(){return On},f:function(){return Ln},g:function(){return _t},n:function(){return at},o:function(){return xt}});var C=A(9593),d=A(2541),g=A(4325),i=function nt(St,Tt,fn){var At=this;(0,d._)(this,nt),(0,C.a)(this,"dot2",function(Ot,kt){return At.x*Ot+At.y*kt}),(0,C.a)(this,"dot3",function(Ot,kt,yn){return At.x*Ot+At.y*kt+At.z*yn}),this.x=St,this.y=Tt,this.z=fn},_=[new i(1,1,0),new i(-1,1,0),new i(1,-1,0),new i(-1,-1,0),new i(1,0,1),new i(-1,0,1),new i(1,0,-1),new i(-1,0,-1),new i(0,1,1),new i(0,-1,1),new i(0,1,-1),new i(0,-1,-1)],j=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],$=new Array(512),re=new Array(512),Q=function(St){St>0&&St<1&&(St*=65536),St=Math.floor(St),St<256&&(St|=St<<8);for(var Tt=0;Tt<256;Tt++){var fn;Tt&1?fn=j[Tt]^St&255:fn=j[Tt]^St>>8&255,$[Tt]=$[Tt+256]=fn,re[Tt]=re[Tt+256]=_[fn%12]}};Q(0);var ae=.5*(Math.sqrt(3)-1),pe=(3-Math.sqrt(3))/6,st=1/3,Pe=1/6,Oe=function(St,Tt){var fn,At,Ot,kt=(St+Tt)*ae,yn=Math.floor(St+kt),or=Math.floor(Tt+kt),pr=(yn+or)*pe,Or=St-yn+pr,oi=Tt-or+pr,Ur,Ci;Or>oi?(Ur=1,Ci=0):(Ur=0,Ci=1);var Si=Or-Ur+pe,qi=oi-Ci+pe,uo=Or-1+2*pe,Eo=oi-1+2*pe;yn&=255,or&=255;var Go=re[yn+$[or]],Wo=re[yn+Ur+$[or+Ci]],Io=re[yn+1+$[or+1]],$i=.5-Or*Or-oi*oi;$i<0?fn=0:($i*=$i,fn=$i*$i*Go.dot2(Or,oi));var gi=.5-Si*Si-qi*qi;gi<0?At=0:(gi*=gi,At=gi*gi*Wo.dot2(Si,qi));var bo=.5-uo*uo-Eo*Eo;return bo<0?Ot=0:(bo*=bo,Ot=bo*bo*Io.dot2(uo,Eo)),70*(fn+At+Ot)},Ze=function(St,Tt,fn){var At,Ot,kt,yn,or=(St+Tt+fn)*st,pr=Math.floor(St+or),Or=Math.floor(Tt+or),oi=Math.floor(fn+or),Ur=(pr+Or+oi)*Pe,Ci=St-pr+Ur,Si=Tt-Or+Ur,qi=fn-oi+Ur,uo,Eo,Go,Wo,Io,$i;Ci>=Si?Si>=qi?(uo=1,Eo=0,Go=0,Wo=1,Io=1,$i=0):Ci>=qi?(uo=1,Eo=0,Go=0,Wo=1,Io=0,$i=1):(uo=0,Eo=0,Go=1,Wo=1,Io=0,$i=1):Si<qi?(uo=0,Eo=0,Go=1,Wo=0,Io=1,$i=1):Ci<qi?(uo=0,Eo=1,Go=0,Wo=0,Io=1,$i=1):(uo=0,Eo=1,Go=0,Wo=1,Io=1,$i=0);var gi=Ci-uo+Pe,bo=Si-Eo+Pe,bs=qi-Go+Pe,ss=Ci-Wo+2*Pe,yo=Si-Io+2*Pe,Aa=qi-$i+2*Pe,Vi=Ci-1+3*Pe,Gs=Si-1+3*Pe,El=qi-1+3*Pe;pr&=255,Or&=255,oi&=255;var Ss=re[pr+$[Or+$[oi]]],il=re[pr+uo+$[Or+Eo+$[oi+Go]]],ho=re[pr+Wo+$[Or+Io+$[oi+$i]]],Ca=re[pr+1+$[Or+1+$[oi+1]]],Gi=.6-Ci*Ci-Si*Si-qi*qi;Gi<0?At=0:(Gi*=Gi,At=Gi*Gi*Ss.dot3(Ci,Si,qi));var Fo=.6-gi*gi-bo*bo-bs*bs;Fo<0?Ot=0:(Fo*=Fo,Ot=Fo*Fo*il.dot3(gi,bo,bs));var ws=.6-ss*ss-yo*yo-Aa*Aa;ws<0?kt=0:(ws*=ws,kt=ws*ws*ho.dot3(ss,yo,Aa));var Mo=.6-Vi*Vi-Gs*Gs-El*El;return Mo<0?yn=0:(Mo*=Mo,yn=Mo*Mo*Ca.dot3(Vi,Gs,El)),32*(At+Ot+kt+yn)},rt=function(St,Tt){var fn=Math.floor(St),At=Math.floor(Tt);St=St-fn,Tt=Tt-At,fn=fn&255,At=At&255;var Ot=re[fn+$[At]].dot2(St,Tt),kt=re[fn+$[At+1]].dot2(St,Tt-1),yn=re[fn+1+$[At]].dot2(St-1,Tt),or=re[fn+1+$[At+1]].dot2(St-1,Tt-1),pr=(0,g.f)(St);return(0,g.l)((0,g.l)(Ot,yn,pr),(0,g.l)(kt,or,pr),(0,g.f)(Tt))},gt=function(St,Tt,fn){var At=Math.floor(St),Ot=Math.floor(Tt),kt=Math.floor(fn);St=St-At,Tt=Tt-Ot,fn=fn-kt,At=At&255,Ot=Ot&255,kt=kt&255;var yn=re[At+$[Ot+$[kt]]].dot3(St,Tt,fn),or=re[At+$[Ot+$[kt+1]]].dot3(St,Tt,fn-1),pr=re[At+$[Ot+1+$[kt]]].dot3(St,Tt-1,fn),Or=re[At+$[Ot+1+$[kt+1]]].dot3(St,Tt-1,fn-1),oi=re[At+1+$[Ot+$[kt]]].dot3(St-1,Tt,fn),Ur=re[At+1+$[Ot+$[kt+1]]].dot3(St-1,Tt,fn-1),Ci=re[At+1+$[Ot+1+$[kt]]].dot3(St-1,Tt-1,fn),Si=re[At+1+$[Ot+1+$[kt+1]]].dot3(St-1,Tt-1,fn-1),qi=(0,g.f)(St),uo=(0,g.f)(Tt),Eo=(0,g.f)(fn);return(0,g.l)((0,g.l)((0,g.l)(yn,oi,qi),(0,g.l)(or,Ur,qi),Eo),(0,g.l)((0,g.l)(pr,Ci,qi),(0,g.l)(Or,Si,qi),Eo),uo)},at=Object.freeze({__proto__:null,seed:Q,simplex2:Oe,simplex3:Ze,perlin2:rt,perlin3:gt}),ut=Math.PI*2;function ot(nt){if(typeof nt=="number")nt=Math.abs(nt);else if(typeof nt=="string"){var St=nt;nt=0;for(var Tt=0;Tt<St.length;Tt++)nt=(nt+(Tt+1)*(St.charCodeAt(Tt)%96))%2147483647}return nt===0&&(nt=311),nt}function Rt(nt){var St=ot(nt);return function(){var Tt=St*48271%2147483647;return St=Tt,Tt/2147483647}}var Mt=function nt(St){var Tt=this;(0,d._)(this,nt),(0,C.a)(this,"seed",0),(0,C.a)(this,"init",function(fn){Tt.seed=fn,Tt.value=Rt(fn)}),(0,C.a)(this,"value",Rt(this.seed)),this.init(St)},Pt=new Mt(Math.random()),It={radius:1,center:[0,0,0]};function xt(nt,St){for(var Tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pt,fn=(0,C._)((0,C._)({},It),St),At=fn.radius,Ot=fn.center,kt=0;kt<nt.length;kt+=3){var yn=Tt.value(),or=Tt.value(),pr=Math.acos(2*or-1),Or=ut*yn;nt[kt]=Math.sin(pr)*Math.cos(Or)*At+Ot[0],nt[kt+1]=Math.sin(pr)*Math.sin(Or)*At+Ot[1],nt[kt+2]=Math.cos(pr)*At+Ot[2]}return nt}function ln(nt,St){for(var Tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pt,fn=(0,C._)((0,C._)({},It),St),At=fn.radius,Ot=fn.center,kt=0;kt<nt.length;kt+=3){var yn=Math.pow(Tt.value(),.3333333333333333),or=Tt.value()*2-1,pr=Tt.value()*2-1,Or=Tt.value()*2-1,oi=Math.sqrt(or*or+pr*pr+Or*Or);or=yn*or/oi,pr=yn*pr/oi,Or=yn*Or/oi,nt[kt]=or*At+Ot[0],nt[kt+1]=pr*At+Ot[1],nt[kt+2]=Or*At+Ot[2]}return nt}var Mn={radius:1,center:[0,0]};function Xn(nt,St){for(var Tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pt,fn=(0,C._)((0,C._)({},Mn),St),At=fn.radius,Ot=fn.center,kt=0;kt<nt.length;kt+=2){var yn=At*Math.sqrt(Tt.value()),or=Tt.value()*ut;nt[kt]=Math.sin(or)*yn+Ot[0],nt[kt+1]=Math.cos(or)*yn+Ot[1]}return nt}function mt(nt,St){for(var Tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pt,fn=(0,C._)((0,C._)({},Mn),St),At=fn.radius,Ot=fn.center,kt=0;kt<nt.length;kt+=2){var yn=Tt.value()*ut;nt[kt]=Math.sin(yn)*At+Ot[0],nt[kt+1]=Math.cos(yn)*At+Ot[1]}return nt}var rn={sides:1,center:[0,0]};function un(nt,St){for(var Tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pt,fn=(0,C._)((0,C._)({},rn),St),At=fn.sides,Ot=fn.center,kt=typeof At=="number"?At:At[0],yn=typeof At=="number"?At:At[1],or=0;or<nt.length;or+=2)nt[or]=(Tt.value()-.5)*kt+Ot[0],nt[or+1]=(Tt.value()-.5)*yn+Ot[1];return nt}function On(nt,St){return nt}function Ln(nt,St){for(var Tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pt,fn=(0,C._)((0,C._)({},fr),St),At=fn.sides,Ot=fn.center,kt=typeof At=="number"?At:At[0],yn=typeof At=="number"?At:At[1],or=typeof At=="number"?At:At[2],pr=0;pr<nt.length;pr+=3)nt[pr]=(Tt.value()-.5)*kt+Ot[0],nt[pr+1]=(Tt.value()-.5)*yn+Ot[1],nt[pr+2]=(Tt.value()-.5)*or+Ot[2];return nt}var fr={sides:1,center:[0,0,0]};function _t(nt,St){for(var Tt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Pt,fn=(0,C._)((0,C._)({},fr),St),At=fn.sides,Ot=fn.center,kt=typeof At=="number"?At:At[0],yn=typeof At=="number"?At:At[1],or=typeof At=="number"?At:At[2],pr=0;pr<nt.length;pr+=3)nt[pr]=(Tt.value()-.5)*kt+Ot[0],nt[pr+1]=(Tt.value()-.5)*yn+Ot[1],nt[pr+2]=(Tt.value()-.5)*or+Ot[2];return nt}var ct=Object.freeze({__proto__:null,Generator:Mt,onSphere:xt,inSphere:ln,inCircle:Xn,onCircle:mt,inRect:un,onRect:On,inBox:Ln,onBox:_t,noise:at})},1885:function(u,n,A){"use strict";A.d(n,{_:function(){return C},a:function(){return d}});function C(g,i){return C=Object.setPrototypeOf||function(j,$){return j.__proto__=$,j},C(g,i)}function d(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(g){return!1}}},4599:function(u,n,A){"use strict";A.d(n,{a:function(){return j},d:function(){return g},g:function(){return _}});var C=A(9477);function d(){for(var re=arguments.length,Q=new Array(re),ae=0;ae<re;ae++)Q[ae]=arguments[ae];var pe=Q[0],st=Q[1],Pe=Q[2],Oe=Q[3];return pe*Oe-st*Pe}function g(){for(var re=arguments.length,Q=new Array(re),ae=0;ae<re;ae++)Q[ae]=arguments[ae];var pe=Q[0],st=Q[1],Pe=Q[2],Oe=Q[3],Ze=Q[4],rt=Q[5],gt=Q[6],at=Q[7],ut=Q[8];return pe*Ze*ut+st*rt*gt+Pe*Oe*at-Pe*Ze*gt-st*Oe*ut-pe*rt*at}function i(){for(var re=arguments.length,Q=new Array(re),ae=0;ae<re;ae++)Q[ae]=arguments[ae];Q[0],Q[1],Q[2],Q[3],Q[4],Q[5],Q[6],Q[7],Q[8],Q[9],Q[10],Q[11],Q[12],Q[13],Q[14]}function _(re,Q,ae){for(var pe=re.clone().transpose(),st=[],Pe=pe.elements.length,Oe=Math.sqrt(Pe),Ze=0;Ze<Pe;Ze++){var rt=pe.elements[Ze],gt=Math.floor(Ze/Oe),at=Ze%Oe;gt!==Q-1&&at!==ae-1&&st.push(rt)}return g.apply(void 0,st)}function j(re,Q){for(var ae=[],pe=re.toArray(),st=Q.toArray(),Pe=0;Pe<pe.length;Pe++)ae[Pe]=pe[Pe]+st[Pe];return new C.Matrix3().fromArray(ae)}var $=Object.freeze({__proto__:null,determinant2:d,determinant3:g,determinant4:i,getMinor:_,matrixSum3:j})},4325:function(u,n,A){"use strict";A.d(n,{d:function(){return j},f:function(){return Oe},l:function(){return Ze}});var C=A(1842),d=A(9477),g=A(4599);function i(mt,rn,un){return Math.max(rn,Math.min(un,mt))}function _(mt,rn){return i(mt-Math.floor(mt/rn)*rn,0,rn)}function j(mt,rn){var un=_(rn-mt,Math.PI*2);return un>Math.PI&&(un-=Math.PI*2),un}function $(mt){return mt/180*Math.PI}function re(mt){return mt*180/Math.PI}function Q(mt,rn){for(var un=rn.radius,On=un===void 0?1:un,Ln=mt.length/3,fr=2/Ln,_t=Math.PI*(3-2.2360679775),ct=0;ct<mt.length;ct+=3){var nt=ct*fr-1+fr/2,St=Math.sqrt(1-Math.pow(nt,2)),Tt=ct%Ln*_t,fn=Math.cos(Tt)*St,At=Math.sin(Tt)*St;mt[ct]=fn*On,mt[ct+1]=nt*On,mt[ct+2]=At*On}}function ae(mt,rn){var un=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Number.EPSILON;return Math.abs(mt.x-rn.x)<un&&Math.abs(mt.y-rn.y)<un&&Math.abs(mt.z-rn.z)<un}function pe(mt,rn){return mt.x===rn.x?typeof mt.z!="undefined"&&mt.y===rn.y?mt.z-rn.z:mt.y-rn.y:mt.x-rn.x}function st(mt){for(var rn=mt.sort(pe),un=[rn[0],rn[1]],On=2;On<rn.length;On++)for(un.push(rn[On]);un.length>2&&(0,C.d)((0,C.a)(un.slice(-3)));)un.splice(un.length-2,1);for(var Ln=[rn[rn.length-1],rn[rn.length-2]],fr=rn.length-3;fr>=0;fr--)for(Ln.push(rn[fr]);Ln.length>2&&(0,C.d)((0,C.a)(Ln.slice(-3)));)Ln.splice(Ln.length-2,1);Ln.splice(0,1),Ln.splice(Ln.length-1,1);var _t=[].concat(un,Ln);return _t}function Pe(mt,rn,un){var On=(0,C._)(rn,2),Ln=On[0],fr=On[1],_t=(0,C._)(un,2),ct=_t[0],nt=_t[1];return ct+(mt-Ln)*(nt-ct)/(fr-Ln)}function Oe(mt){return mt*mt*mt*(mt*(mt*6-15)+10)}function Ze(mt,rn,un){return mt*(1-un)+rn*un}function rt(mt,rn,un){return(un-mt)/(rn-mt)}function gt(mt,rn,un){var On=Math.sqrt(mt*mt+rn*rn+un*un);return[mt/On,rn/On,un/On]}function at(mt,rn,un){var On=mt*mt,Ln=rn*rn,fr=un*un,_t=mt*Math.sqrt(1-(Ln+fr)/2+Ln*fr/3),ct=rn*Math.sqrt(1-(fr+On)/2+fr*On/3),nt=un*Math.sqrt(1-(On+Ln)/2+On*Ln/3);return[_t,ct,nt]}function ut(mt,rn){var un=new d.Vector3().crossVectors(mt,rn),On=mt.dot(rn),Ln=new d.Matrix3().identity(),fr=new d.Matrix3().set(0,-un.z,un.y,un.z,0,-un.x,-un.y,un.x,0),_t=new d.Matrix3().multiplyMatrices(fr,fr).multiplyScalar(1/(1+On)),ct=(0,g.a)((0,g.a)(Ln,fr),_t);return ct}function ot(mt,rn,un){var On=Math.asin(rn),Ln=Math.atan2(mt,-un);return[On,Ln]}function Rt(mt,rn){var un=Math.sin(mt),On=Math.cos(mt),Ln=Math.sin(rn)*On,fr=-Math.cos(rn)*On;return[Ln,un,fr]}function Mt(mt,rn){var un=(0,C._)(rn,2),On=un[0],Ln=un[1],fr=ut(mt.normal,new d.Vector3(0,1,0)),_t=rt(On.clone().applyMatrix3(fr).y,Ln.clone().applyMatrix3(fr).y,0);return new d.Vector3().lerpVectors(On,Ln,_t)}function Pt(mt,rn){var un=rn.normal.dot(mt);return un}function It(mt,rn){var un=(0,C._)(mt,3),On=un[0],Ln=un[1],fr=un[2],_t=(0,C._)(rn,2),ct=_t[0],nt=_t[1];return fr*ct*nt+Ln*ct+On}function xt(mt,rn){var un=(0,C._)(rn,2),On=un[0],Ln=un[1],fr=On*Ln,_t=mt/fr,ct=mt-fr*_t,nt=ct/On,St=ct%On;return[St,nt,_t]}function ln(mt,rn){return mt[0]+rn[0]*mt[1]}function Mn(mt,rn){var un=mt%rn,On=Math.floor(mt/rn);return[un,On]}var Xn=Object.freeze({__proto__:null,clamp:i,deltaAngle:j,degToRad:$,radToDeg:re,fibonacciOnSphere:Q,vectorEquals:ae,lexicographic:pe,convexHull:st,remap:Pe,fade:Oe,lerp:Ze,inverseLerp:rt,normalize:gt,pointOnCubeToPointOnSphere:at,rotateVectorOnVector:ut,pointToCoordinate:ot,coordinateToPoint:Rt,planeSegmentIntersection:Mt,pointToPlaneDistance:Pt,getIndexFrom3D:It,get3DFromIndex:xt,getIndexFrom2D:ln,get2DFromIndex:Mn})},9593:function(u,n,A){"use strict";A.d(n,{_:function(){return g},a:function(){return C}});function C(i,_,j){return _ in i?Object.defineProperty(i,_,{value:j,enumerable:!0,configurable:!0,writable:!0}):i[_]=j,i}function d(i,_){var j=Object.keys(i);if(Object.getOwnPropertySymbols){var $=Object.getOwnPropertySymbols(i);_&&($=$.filter(function(re){return Object.getOwnPropertyDescriptor(i,re).enumerable})),j.push.apply(j,$)}return j}function g(i){for(var _=1;_<arguments.length;_++){var j=arguments[_]!=null?arguments[_]:{};_%2?d(Object(j),!0).forEach(function($){C(i,$,j[$])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(j)):d(Object(j)).forEach(function($){Object.defineProperty(i,$,Object.getOwnPropertyDescriptor(j,$))})}return i}},1842:function(u,n,A){"use strict";A.d(n,{_:function(){return Q},a:function(){return Pe},d:function(){return Pt}});var C=A(1885),d=A(9477),g=A(4599);function i(xt){if(Array.isArray(xt))return xt}function _(xt,ln){var Mn=xt==null?null:typeof Symbol!="undefined"&&xt[Symbol.iterator]||xt["@@iterator"];if(Mn!=null){var Xn=[],mt=!0,rn=!1,un,On;try{for(Mn=Mn.call(xt);!(mt=(un=Mn.next()).done)&&(Xn.push(un.value),!(ln&&Xn.length===ln));mt=!0);}catch(Ln){rn=!0,On=Ln}finally{try{!mt&&Mn.return!=null&&Mn.return()}finally{if(rn)throw On}}return Xn}}function j(xt,ln){(ln==null||ln>xt.length)&&(ln=xt.length);for(var Mn=0,Xn=new Array(ln);Mn<ln;Mn++)Xn[Mn]=xt[Mn];return Xn}function $(xt,ln){if(xt){if(typeof xt=="string")return j(xt,ln);var Mn=Object.prototype.toString.call(xt).slice(8,-1);if(Mn==="Object"&&xt.constructor&&(Mn=xt.constructor.name),Mn==="Map"||Mn==="Set")return Array.from(xt);if(Mn==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Mn))return j(xt,ln)}}function re(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Q(xt,ln){return i(xt)||_(xt,ln)||$(xt,ln)||re()}function ae(xt){if(Array.isArray(xt))return j(xt)}function pe(xt){if(typeof Symbol!="undefined"&&xt[Symbol.iterator]!=null||xt["@@iterator"]!=null)return Array.from(xt)}function st(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Pe(xt){return ae(xt)||pe(xt)||$(xt)||st()}function Oe(xt,ln,Mn){return(0,C.a)()?Oe=Reflect.construct:Oe=function(mt,rn,un){var On=[null];On.push.apply(On,rn);var Ln=Function.bind.apply(mt,On),fr=new Ln;return un&&(0,C._)(fr,un.prototype),fr},Oe.apply(null,arguments)}function Ze(xt,ln){var Mn=Q(ln[0],2),Xn=Mn[0],mt=Mn[1],rn=Q(ln[1],2),un=rn[0],On=rn[1],Ln=Q(ln[2],2),fr=Ln[0],_t=Ln[1],ct=Q(xt,2),nt=ct[0],St=ct[1],Tt=new d.Matrix4;return Tt.set(Xn,mt,Xn*Xn+mt*mt,1,un,On,un*un+On*On,1,fr,_t,fr*fr+_t*_t,1,nt,St,nt*nt+St*St,1),Tt.determinant()<=0}function rt(xt){var ln=Q(xt[0],2),Mn=ln[0],Xn=ln[1],mt=Q(xt[1],2),rn=mt[0],un=mt[1],On=Q(xt[2],2),Ln=On[0],fr=On[1];return(0,g.d)(Mn,Xn,1,rn,un,1,Ln,fr,1)}function gt(xt){return rt(xt)===0}function at(xt){return rt(xt)<0}function ut(xt){var ln=Q(xt[0],2),Mn=ln[0],Xn=ln[1],mt=Q(xt[1],2),rn=mt[0],un=mt[1],On=Q(xt[2],2),Ln=On[0],fr=On[1];if(gt(xt))return null;var _t=new d.Matrix4;_t.set(1,1,1,1,Mn*Mn+Xn*Xn,Mn,Xn,1,rn*rn+un*un,rn,un,1,Ln*Ln+fr*fr,Ln,fr,1);var ct=(0,g.g)(_t,1,1),nt=(0,g.g)(_t,1,3),St=(0,g.g)(_t,1,2),Tt=(0,g.g)(_t,1,4),fn=.5*(St/ct),At=.5*(nt/ct),Ot=fn*fn+At*At+Tt/ct;return{x:Math.abs(fn)===0?0:fn,y:Math.abs(At)===0?0:-At,r:Math.sqrt(Ot)}}function ot(xt,ln){var Mn=Array.isArray(ln[0])?ln[0]:ln[0].toArray(),Xn=Q(Mn,2),mt=Xn[0],rn=Xn[1],un=Array.isArray(ln[1])?ln[1]:ln[1].toArray(),On=Q(un,2),Ln=On[0],fr=On[1],_t=Array.isArray(ln[2])?ln[2]:ln[2].toArray(),ct=Q(_t,2),nt=ct[0],St=ct[1],Tt=Q(xt,2),fn=Tt[0],At=Tt[1];if(gt(ln))throw new Error("Collinear points don't form a triangle");var Ot=mt-fn,kt=rn-At,yn=Ln-fn,or=fr-At,pr=nt-fn,Or=St-At,oi=(0,g.d)(Ot,kt,Ot*Ot+kt*kt,yn,or,yn*yn+or*or,pr,Or,pr*pr+Or*Or);return oi===0?!0:at(ln)?oi<0:oi>0}var Rt=new d.Vector2,Mt=new d.Vector2;function Pt(xt){var ln=xt.map(function(fr){return Array.isArray(fr)?Oe(d.Vector2,Pe(fr)):fr}),Mn=Q(ln,3),Xn=Mn[0],mt=Mn[1],rn=Mn[2];if(gt(xt))return!1;var un=Rt.subVectors(mt,Xn),On=Mt.subVectors(rn,Xn),Ln=On.cross(un);return Ln>0}var It=Object.freeze({__proto__:null,isPointInTriangle:Ze,triangleDeterminant:rt,arePointsCollinear:gt,isTriangleClockwise:at,getCircumcircle:ut,isPointInCircumcircle:ot,doThreePointsMakeARight:Pt})},7482:function(u,n,A){"use strict";A.r(n),A.d(n,{Generator:function(){return C.G},inBox:function(){return C.f},inCircle:function(){return C.b},inRect:function(){return C.d},inSphere:function(){return C.a},noise:function(){return C.n},onBox:function(){return C.g},onCircle:function(){return C.c},onRect:function(){return C.e},onSphere:function(){return C.o}});var C=A(26),d=A(4325),g=A(1842),i=A(4599)},2703:function(u,n,A){"use strict";var C=A(414);function d(){}function g(){}g.resetWarningCache=d,u.exports=function(){function i($,re,Q,ae,pe,st){if(st!==C){var Pe=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw Pe.name="Invariant Violation",Pe}}i.isRequired=i;function _(){return i}var j={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:_,element:i,elementType:i,instanceOf:_,node:i,objectOf:_,oneOf:_,oneOfType:_,shape:_,exact:_,checkPropTypes:g,resetWarningCache:d};return j.PropTypes=j,j}},5697:function(u,n,A){if(!1)var C,d;else u.exports=A(2703)()},414:function(u){"use strict";var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";u.exports=n},6511:function(u,n){"use strict";var A;/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */n.ConcurrentRoot=1,n.ContinuousEventPriority=4,n.DefaultEventPriority=16,n.DiscreteEventPriority=1,A=536870912,A=0},7287:function(u,n,A){var C=A(5108);/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */u.exports=function(g){var i={},_=A(7294),j=A(373),$=Object.assign;function re(M){for(var w="https://reactjs.org/docs/error-decoder.html?invariant="+M,G=1;G<arguments.length;G++)w+="&args[]="+encodeURIComponent(arguments[G]);return"Minified React error #"+M+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Q=_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ae=Symbol.for("react.element"),pe=Symbol.for("react.portal"),st=Symbol.for("react.fragment"),Pe=Symbol.for("react.strict_mode"),Oe=Symbol.for("react.profiler"),Ze=Symbol.for("react.provider"),rt=Symbol.for("react.context"),gt=Symbol.for("react.forward_ref"),at=Symbol.for("react.suspense"),ut=Symbol.for("react.suspense_list"),ot=Symbol.for("react.memo"),Rt=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var Mt=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var Pt=Symbol.iterator;function It(M){return M===null||typeof M!="object"?null:(M=Pt&&M[Pt]||M["@@iterator"],typeof M=="function"?M:null)}function xt(M){if(M==null)return null;if(typeof M=="function")return M.displayName||M.name||null;if(typeof M=="string")return M;switch(M){case st:return"Fragment";case pe:return"Portal";case Oe:return"Profiler";case Pe:return"StrictMode";case at:return"Suspense";case ut:return"SuspenseList"}if(typeof M=="object")switch(M.$$typeof){case rt:return(M.displayName||"Context")+".Consumer";case Ze:return(M._context.displayName||"Context")+".Provider";case gt:var w=M.render;return M=M.displayName,M||(M=w.displayName||w.name||"",M=M!==""?"ForwardRef("+M+")":"ForwardRef"),M;case ot:return w=M.displayName||null,w!==null?w:xt(M.type)||"Memo";case Rt:w=M._payload,M=M._init;try{return xt(M(w))}catch(G){}}return null}function ln(M){var w=M.type;switch(M.tag){case 24:return"Cache";case 9:return(w.displayName||"Context")+".Consumer";case 10:return(w._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return M=w.render,M=M.displayName||M.name||"",w.displayName||(M!==""?"ForwardRef("+M+")":"ForwardRef");case 7:return"Fragment";case 5:return w;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return xt(w);case 8:return w===Pe?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof w=="function")return w.displayName||w.name||null;if(typeof w=="string")return w}return null}function Mn(M){var w=M,G=M;if(M.alternate)for(;w.return;)w=w.return;else{M=w;do w=M,w.flags&4098&&(G=w.return),M=w.return;while(M)}return w.tag===3?G:null}function Xn(M){if(Mn(M)!==M)throw Error(re(188))}function mt(M){var w=M.alternate;if(!w){if(w=Mn(M),w===null)throw Error(re(188));return w!==M?null:M}for(var G=M,V=w;;){var te=G.return;if(te===null)break;var de=te.alternate;if(de===null){if(V=te.return,V!==null){G=V;continue}break}if(te.child===de.child){for(de=te.child;de;){if(de===G)return Xn(te),M;if(de===V)return Xn(te),w;de=de.sibling}throw Error(re(188))}if(G.return!==V.return)G=te,V=de;else{for(var Ve=!1,pt=te.child;pt;){if(pt===G){Ve=!0,G=te,V=de;break}if(pt===V){Ve=!0,V=te,G=de;break}pt=pt.sibling}if(!Ve){for(pt=de.child;pt;){if(pt===G){Ve=!0,G=de,V=te;break}if(pt===V){Ve=!0,V=de,G=te;break}pt=pt.sibling}if(!Ve)throw Error(re(189))}}if(G.alternate!==V)throw Error(re(190))}if(G.tag!==3)throw Error(re(188));return G.stateNode.current===G?M:w}function rn(M){return M=mt(M),M!==null?un(M):null}function un(M){if(M.tag===5||M.tag===6)return M;for(M=M.child;M!==null;){var w=un(M);if(w!==null)return w;M=M.sibling}return null}function On(M){if(M.tag===5||M.tag===6)return M;for(M=M.child;M!==null;){if(M.tag!==4){var w=On(M);if(w!==null)return w}M=M.sibling}return null}var Ln=Array.isArray,fr=g.getPublicInstance,_t=g.getRootHostContext,ct=g.getChildHostContext,nt=g.prepareForCommit,St=g.resetAfterCommit,Tt=g.createInstance,fn=g.appendInitialChild,At=g.finalizeInitialChildren,Ot=g.prepareUpdate,kt=g.shouldSetTextContent,yn=g.createTextInstance,or=g.scheduleTimeout,pr=g.cancelTimeout,Or=g.noTimeout,oi=g.isPrimaryRenderer,Ur=g.supportsMutation,Ci=g.supportsPersistence,Si=g.supportsHydration,qi=g.getInstanceFromNode,uo=g.preparePortalMount,Eo=g.getCurrentEventPriority,Go=g.detachDeletedInstance,Wo=g.supportsMicrotasks,Io=g.scheduleMicrotask,$i=g.supportsTestSelectors,gi=g.findFiberRoot,bo=g.getBoundingRect,bs=g.getTextContent,ss=g.isHiddenSubtree,yo=g.matchAccessibilityRole,Aa=g.setFocusIfFocusable,Vi=g.setupIntersectionObserver,Gs=g.appendChild,El=g.appendChildToContainer,Ss=g.commitTextUpdate,il=g.commitMount,ho=g.commitUpdate,Ca=g.insertBefore,Gi=g.insertInContainerBefore,Fo=g.removeChild,ws=g.removeChildFromContainer,Mo=g.resetTextContent,ta=g.hideInstance,bl=g.hideTextInstance,Us=g.unhideInstance,na=g.unhideTextInstance,Ns=g.clearContainer,gs=g.cloneInstance,za=g.createContainerChildSet,ya=g.appendChildToContainerChildSet,_p=g.finalizeContainerChildren,ol=g.replaceContainerChildren,Ep=g.cloneHiddenInstance,Je=g.cloneHiddenTextInstance,bt=g.canHydrateInstance,dn=g.canHydrateTextInstance,Wn=g.canHydrateSuspenseInstance,Vn=g.isSuspenseInstancePending,gr=g.isSuspenseInstanceFallback,Xr=g.registerSuspenseInstanceRetry,Ar=g.getNextHydratableSibling,Bn=g.getFirstHydratableChild,Sr=g.getFirstHydratableChildWithinContainer,wt=g.getFirstHydratableChildWithinSuspenseInstance,Vt=g.hydrateInstance,gn=g.hydrateTextInstance,vn=g.hydrateSuspenseInstance,Pn=g.getNextHydratableInstanceAfterSuspenseInstance,Kr=g.commitHydratedContainer,yr=g.commitHydratedSuspenseInstance,Se=g.clearSuspenseBoundary,Ke=g.clearSuspenseBoundaryFromContainer,yt=g.shouldDeleteUnhydratedTailInstances,mn=g.didNotMatchHydratedContainerTextInstance,vr=g.didNotMatchHydratedTextInstance,Br;function si(M){if(Br===void 0)try{throw Error()}catch(G){var w=G.stack.trim().match(/\n( *(at )?)/);Br=w&&w[1]||""}return`
`+Br+M}var Ui=!1;function Uo(M,w){if(!M||Ui)return"";Ui=!0;var G=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(w)if(w=function(){throw Error()},Object.defineProperty(w.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(w,[])}catch(Nn){var V=Nn}Reflect.construct(M,[],w)}else{try{w.call()}catch(Nn){V=Nn}M.call(w.prototype)}else{try{throw Error()}catch(Nn){V=Nn}M()}}catch(Nn){if(Nn&&V&&typeof Nn.stack=="string"){for(var te=Nn.stack.split(`
`),de=V.stack.split(`
`),Ve=te.length-1,pt=de.length-1;1<=Ve&&0<=pt&&te[Ve]!==de[pt];)pt--;for(;1<=Ve&&0<=pt;Ve--,pt--)if(te[Ve]!==de[pt]){if(Ve!==1||pt!==1)do if(Ve--,pt--,0>pt||te[Ve]!==de[pt]){var en=`
`+te[Ve].replace(" at new "," at ");return M.displayName&&en.includes("<anonymous>")&&(en=en.replace("<anonymous>",M.displayName)),en}while(1<=Ve&&0<=pt);break}}}finally{Ui=!1,Error.prepareStackTrace=G}return(M=M?M.displayName||M.name:"")?si(M):""}var xo=Object.prototype.hasOwnProperty,Rr=[],Xi=-1;function ms(M){return{current:M}}function fo(M){0>Xi||(M.current=Rr[Xi],Rr[Xi]=null,Xi--)}function ao(M,w){Xi++,Rr[Xi]=M.current,M.current=w}var sl={},qo=ms(sl),Ts=ms(!1),ac=sl;function Ga(M,w){var G=M.type.contextTypes;if(!G)return sl;var V=M.stateNode;if(V&&V.__reactInternalMemoizedUnmaskedChildContext===w)return V.__reactInternalMemoizedMaskedChildContext;var te={},de;for(de in G)te[de]=w[de];return V&&(M=M.stateNode,M.__reactInternalMemoizedUnmaskedChildContext=w,M.__reactInternalMemoizedMaskedChildContext=te),te}function js(M){return M=M.childContextTypes,M!=null}function as(){fo(Ts),fo(qo)}function Sa(M,w,G){if(qo.current!==sl)throw Error(re(168));ao(qo,w),ao(Ts,G)}function bp(M,w,G){var V=M.stateNode;if(w=w.childContextTypes,typeof V.getChildContext!="function")return G;V=V.getChildContext();for(var te in V)if(!(te in w))throw Error(re(108,ln(M)||"Unknown",te));return $({},G,V)}function Bs(M){return M=(M=M.stateNode)&&M.__reactInternalMemoizedMergedChildContext||sl,ac=qo.current,ao(qo,M),ao(Ts,Ts.current),!0}function Hd(M,w,G){var V=M.stateNode;if(!V)throw Error(re(169));G?(M=bp(M,w,ac),V.__reactInternalMemoizedMergedChildContext=M,fo(Ts),fo(qo),ao(qo,M)):fo(Ts),ao(Ts,G)}var ra=Math.clz32?Math.clz32:$p,ju=Math.log,Gh=Math.LN2;function $p(M){return M>>>=0,M===0?32:31-(ju(M)/Gh|0)|0}var Dc=64,eu=4194304;function tu(M){switch(M&-M){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return M&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return M&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return M}}function Hu(M,w){var G=M.pendingLanes;if(G===0)return 0;var V=0,te=M.suspendedLanes,de=M.pingedLanes,Ve=G&268435455;if(Ve!==0){var pt=Ve&~te;pt!==0?V=tu(pt):(de&=Ve,de!==0&&(V=tu(de)))}else Ve=G&~te,Ve!==0?V=tu(Ve):de!==0&&(V=tu(de));if(V===0)return 0;if(w!==0&&w!==V&&!(w&te)&&(te=V&-V,de=w&-w,te>=de||te===16&&(de&4194240)!==0))return w;if(V&4&&(V|=G&16),w=M.entangledLanes,w!==0)for(M=M.entanglements,w&=V;0<w;)G=31-ra(w),te=1<<G,V|=M[G],w&=~te;return V}function s1(M,w){switch(M){case 1:case 2:case 4:return w+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return w+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YA(M,w){for(var G=M.suspendedLanes,V=M.pingedLanes,te=M.expirationTimes,de=M.pendingLanes;0<de;){var Ve=31-ra(de),pt=1<<Ve,en=te[Ve];en===-1?(!(pt&G)||pt&V)&&(te[Ve]=s1(pt,w)):en<=w&&(M.expiredLanes|=pt),de&=~pt}}function Wd(M){return M=M.pendingLanes&-1073741825,M!==0?M:M&1073741824?1073741824:0}function nu(M){for(var w=[],G=0;31>G;G++)w.push(M);return w}function Nl(M,w,G){M.pendingLanes|=w,w!==536870912&&(M.suspendedLanes=0,M.pingedLanes=0),M=M.eventTimes,w=31-ra(w),M[w]=G}function Im(M,w){var G=M.pendingLanes&~w;M.pendingLanes=w,M.suspendedLanes=0,M.pingedLanes=0,M.expiredLanes&=w,M.mutableReadLanes&=w,M.entangledLanes&=w,w=M.entanglements;var V=M.eventTimes;for(M=M.expirationTimes;0<G;){var te=31-ra(G),de=1<<te;w[te]=0,V[te]=-1,M[te]=-1,G&=~de}}function Uh(M,w){var G=M.entangledLanes|=w;for(M=M.entanglements;G;){var V=31-ra(G),te=1<<V;te&w|M[V]&w&&(M[V]|=w),G&=~te}}var Li=0;function Nh(M){return M&=-M,1<M?4<M?M&268435455?16:536870912:4:1}var Ml=j.unstable_scheduleCallback,Qn=j.unstable_cancelCallback,al=j.unstable_shouldYield,ru=j.unstable_requestPaint,Ms=j.unstable_now,Zc=j.unstable_ImmediatePriority,iu=j.unstable_UserBlockingPriority,jh=j.unstable_NormalPriority,og=j.unstable_IdlePriority,xl=null,Hs=null;function sg(M){if(Hs&&typeof Hs.onCommitFiberRoot=="function")try{Hs.onCommitFiberRoot(xl,M,void 0,(M.current.flags&128)===128)}catch(w){}}function Vd(M,w){return M===w&&(M!==0||1/M===1/w)||M!==M&&w!==w}var lc=typeof Object.is=="function"?Object.is:Vd,qc=null,Qd=!1,Hh=!1;function cc(M){qc===null?qc=[M]:qc.push(M)}function Fm(M){Qd=!0,cc(M)}function Lc(){if(!Hh&&qc!==null){Hh=!0;var M=0,w=Li;try{var G=qc;for(Li=1;M<G.length;M++){var V=G[M];do V=V(!0);while(V!==null)}qc=null,Qd=!1}catch(te){throw qc!==null&&(qc=qc.slice(M+1)),Ml(Zc,Lc),te}finally{Li=w,Hh=!1}}return null}var ag=Q.ReactCurrentBatchConfig;function ou(M,w){if(lc(M,w))return!0;if(typeof M!="object"||M===null||typeof w!="object"||w===null)return!1;var G=Object.keys(M),V=Object.keys(w);if(G.length!==V.length)return!1;for(V=0;V<G.length;V++){var te=G[V];if(!xo.call(w,te)||!lc(M[te],w[te]))return!1}return!0}function Om(M){switch(M.tag){case 5:return si(M.type);case 16:return si("Lazy");case 13:return si("Suspense");case 19:return si("SuspenseList");case 0:case 2:case 15:return M=Uo(M.type,!1),M;case 11:return M=Uo(M.type.render,!1),M;case 1:return M=Uo(M.type,!0),M;default:return""}}function Un(M,w){if(M&&M.defaultProps){w=$({},w),M=M.defaultProps;for(var G in M)w[G]===void 0&&(w[G]=M[G]);return w}return w}var Cl=ms(null),to=null,Ua=null,Na=null;function pc(){Na=Ua=to=null}function Wu(M,w,G){oi?(ao(Cl,w._currentValue),w._currentValue=G):(ao(Cl,w._currentValue2),w._currentValue2=G)}function Kd(M){var w=Cl.current;fo(Cl),oi?M._currentValue=w:M._currentValue2=w}function Xd(M,w,G){for(;M!==null;){var V=M.alternate;if((M.childLanes&w)!==w?(M.childLanes|=w,V!==null&&(V.childLanes|=w)):V!==null&&(V.childLanes&w)!==w&&(V.childLanes|=w),M===G)break;M=M.return}}function su(M,w){to=M,Na=Ua=null,M=M.dependencies,M!==null&&M.firstContext!==null&&(M.lanes&w&&(Wa=!0),M.firstContext=null)}function Ws(M){var w=oi?M._currentValue:M._currentValue2;if(Na!==M)if(M={context:M,memoizedValue:w,next:null},Ua===null){if(to===null)throw Error(re(308));Ua=M,to.dependencies={lanes:0,firstContext:M}}else Ua=Ua.next=M;return w}var uc=null,Pc=!1;function Wh(M){M.updateQueue={baseState:M.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dc(M,w){M=M.updateQueue,w.updateQueue===M&&(w.updateQueue={baseState:M.baseState,firstBaseUpdate:M.firstBaseUpdate,lastBaseUpdate:M.lastBaseUpdate,shared:M.shared,effects:M.effects})}function ja(M,w){return{eventTime:M,lane:w,tag:0,payload:null,callback:null,next:null}}function As(M,w){var G=M.updateQueue;G!==null&&(G=G.shared,Qi!==null&&M.mode&1&&!(ai&2)?(M=G.interleaved,M===null?(w.next=w,uc===null?uc=[G]:uc.push(G)):(w.next=M.next,M.next=w),G.interleaved=w):(M=G.pending,M===null?w.next=w:(w.next=M.next,M.next=w),G.pending=w))}function Ha(M,w,G){if(w=w.updateQueue,w!==null&&(w=w.shared,(G&4194240)!==0)){var V=w.lanes;V&=M.pendingLanes,G|=V,w.lanes=G,Uh(M,G)}}function $c(M,w){var G=M.updateQueue,V=M.alternate;if(V!==null&&(V=V.updateQueue,G===V)){var te=null,de=null;if(G=G.firstBaseUpdate,G!==null){do{var Ve={eventTime:G.eventTime,lane:G.lane,tag:G.tag,payload:G.payload,callback:G.callback,next:null};de===null?te=de=Ve:de=de.next=Ve,G=G.next}while(G!==null);de===null?te=de=w:de=de.next=w}else te=de=w;G={baseState:V.baseState,firstBaseUpdate:te,lastBaseUpdate:de,shared:V.shared,effects:V.effects},M.updateQueue=G;return}M=G.lastBaseUpdate,M===null?G.firstBaseUpdate=w:M.next=w,G.lastBaseUpdate=w}function wa(M,w,G,V){var te=M.updateQueue;Pc=!1;var de=te.firstBaseUpdate,Ve=te.lastBaseUpdate,pt=te.shared.pending;if(pt!==null){te.shared.pending=null;var en=pt,Nn=en.next;en.next=null,Ve===null?de=Nn:Ve.next=Nn,Ve=en;var Ir=M.alternate;Ir!==null&&(Ir=Ir.updateQueue,pt=Ir.lastBaseUpdate,pt!==Ve&&(pt===null?Ir.firstBaseUpdate=Nn:pt.next=Nn,Ir.lastBaseUpdate=en))}if(de!==null){var vi=te.baseState;Ve=0,Ir=Nn=en=null,pt=de;do{var qr=pt.lane,Do=pt.eventTime;if((V&qr)===qr){Ir!==null&&(Ir=Ir.next={eventTime:Do,lane:0,tag:pt.tag,payload:pt.payload,callback:pt.callback,next:null});e:{var Nr=M,Fa=pt;switch(qr=w,Do=G,Fa.tag){case 1:if(Nr=Fa.payload,typeof Nr=="function"){vi=Nr.call(Do,vi,qr);break e}vi=Nr;break e;case 3:Nr.flags=Nr.flags&-65537|128;case 0:if(Nr=Fa.payload,qr=typeof Nr=="function"?Nr.call(Do,vi,qr):Nr,qr==null)break e;vi=$({},vi,qr);break e;case 2:Pc=!0}}pt.callback!==null&&pt.lane!==0&&(M.flags|=64,qr=te.effects,qr===null?te.effects=[pt]:qr.push(pt))}else Do={eventTime:Do,lane:qr,tag:pt.tag,payload:pt.payload,callback:pt.callback,next:null},Ir===null?(Nn=Ir=Do,en=vi):Ir=Ir.next=Do,Ve|=qr;if(pt=pt.next,pt===null){if(pt=te.shared.pending,pt===null)break;qr=pt,pt=qr.next,qr.next=null,te.lastBaseUpdate=qr,te.shared.pending=null}}while(1);if(Ir===null&&(en=vi),te.baseState=en,te.firstBaseUpdate=Nn,te.lastBaseUpdate=Ir,w=te.shared.interleaved,w!==null){te=w;do Ve|=te.lane,te=te.next;while(te!==w)}else de===null&&(te.shared.lanes=0);bu|=Ve,M.lanes=Ve,M.memoizedState=vi}}function va(M,w,G){if(M=w.effects,w.effects=null,M!==null)for(w=0;w<M.length;w++){var V=M[w],te=V.callback;if(te!==null){if(V.callback=null,V=G,typeof te!="function")throw Error(re(191,te));te.call(V)}}}var Vh=new _.Component().refs;function kc(M,w,G,V){w=M.memoizedState,G=G(V,w),G=G==null?w:$({},w,G),M.memoizedState=G,M.lanes===0&&(M.updateQueue.baseState=G)}var hc={isMounted:function(M){return(M=M._reactInternals)?Mn(M)===M:!1},enqueueSetState:function(M,w,G){M=M._reactInternals;var V=Ka(),te=Su(M),de=ja(V,te);de.payload=w,G!=null&&(de.callback=G),As(M,de),w=ec(M,te,V),w!==null&&Ha(w,M,te)},enqueueReplaceState:function(M,w,G){M=M._reactInternals;var V=Ka(),te=Su(M),de=ja(V,te);de.tag=1,de.payload=w,G!=null&&(de.callback=G),As(M,de),w=ec(M,te,V),w!==null&&Ha(w,M,te)},enqueueForceUpdate:function(M,w){M=M._reactInternals;var G=Ka(),V=Su(M),te=ja(G,V);te.tag=2,w!=null&&(te.callback=w),As(M,te),w=ec(M,V,G),w!==null&&Ha(w,M,V)}};function ll(M,w,G,V,te,de,Ve){return M=M.stateNode,typeof M.shouldComponentUpdate=="function"?M.shouldComponentUpdate(V,de,Ve):w.prototype&&w.prototype.isPureReactComponent?!ou(G,V)||!ou(te,de):!0}function ls(M,w,G){var V=!1,te=sl,de=w.contextType;return typeof de=="object"&&de!==null?de=Ws(de):(te=js(w)?ac:qo.current,V=w.contextTypes,de=(V=V!=null)?Ga(M,te):sl),w=new w(G,de),M.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=hc,M.stateNode=w,w._reactInternals=M,V&&(M=M.stateNode,M.__reactInternalMemoizedUnmaskedChildContext=te,M.__reactInternalMemoizedMaskedChildContext=de),w}function Qh(M,w,G,V){M=w.state,typeof w.componentWillReceiveProps=="function"&&w.componentWillReceiveProps(G,V),typeof w.UNSAFE_componentWillReceiveProps=="function"&&w.UNSAFE_componentWillReceiveProps(G,V),w.state!==M&&hc.enqueueReplaceState(w,w.state,null)}function Sl(M,w,G,V){var te=M.stateNode;te.props=G,te.state=M.memoizedState,te.refs=Vh,Wh(M);var de=w.contextType;typeof de=="object"&&de!==null?te.context=Ws(de):(de=js(w)?ac:qo.current,te.context=Ga(M,de)),te.state=M.memoizedState,de=w.getDerivedStateFromProps,typeof de=="function"&&(kc(M,w,de,G),te.state=M.memoizedState),typeof w.getDerivedStateFromProps=="function"||typeof te.getSnapshotBeforeUpdate=="function"||typeof te.UNSAFE_componentWillMount!="function"&&typeof te.componentWillMount!="function"||(w=te.state,typeof te.componentWillMount=="function"&&te.componentWillMount(),typeof te.UNSAFE_componentWillMount=="function"&&te.UNSAFE_componentWillMount(),w!==te.state&&hc.enqueueReplaceState(te,te.state,null),wa(M,G,te,V),te.state=M.memoizedState),typeof te.componentDidMount=="function"&&(M.flags|=4194308)}var ep=[],wl=0,Kh=null,Xh=0,jl=[],Hl=0,au=null,tp=1,np="";function lu(M,w){ep[wl++]=Xh,ep[wl++]=Kh,Kh=M,Xh=w}function Dm(M,w,G){jl[Hl++]=tp,jl[Hl++]=np,jl[Hl++]=au,au=M;var V=tp;M=np;var te=32-ra(V)-1;V&=~(1<<te),G+=1;var de=32-ra(w)+te;if(30<de){var Ve=te-te%5;de=(V&(1<<Ve)-1).toString(32),V>>=Ve,te-=Ve,tp=1<<32-ra(w)+te|G<<te|V,np=de+M}else tp=1<<de|G<<te|V,np=M}function Yd(M){M.return!==null&&(lu(M,1),Dm(M,1,0))}function Vu(M){for(;M===Kh;)Kh=ep[--wl],ep[wl]=null,Xh=ep[--wl],ep[wl]=null;for(;M===au;)au=jl[--Hl],jl[Hl]=null,np=jl[--Hl],jl[Hl]=null,tp=jl[--Hl],jl[Hl]=null}var Vs=null,_a=null,Vo=!1,Rs=!1,ei=null;function Qu(M,w){var G=tc(5,null,null,0);G.elementType="DELETED",G.stateNode=w,G.return=M,w=M.deletions,w===null?(M.deletions=[G],M.flags|=16):w.push(G)}function _n(M,w){switch(M.tag){case 5:return w=bt(w,M.type,M.pendingProps),w!==null?(M.stateNode=w,Vs=M,_a=Bn(w),!0):!1;case 6:return w=dn(w,M.pendingProps),w!==null?(M.stateNode=w,Vs=M,_a=null,!0):!1;case 13:if(w=Wn(w),w!==null){var G=au!==null?{id:tp,overflow:np}:null;return M.memoizedState={dehydrated:w,treeContext:G,retryLane:1073741824},G=tc(18,null,null,0),G.stateNode=w,G.return=M,M.child=G,Vs=M,_a=null,!0}return!1;default:return!1}}function wi(M){return(M.mode&1)!==0&&(M.flags&128)===0}function Jd(M){if(Vo){var w=_a;if(w){var G=w;if(!_n(M,w)){if(wi(M))throw Error(re(418));w=Ar(G);var V=Vs;w&&_n(M,w)?Qu(V,G):(M.flags=M.flags&-4097|2,Vo=!1,Vs=M)}}else{if(wi(M))throw Error(re(418));M.flags=M.flags&-4097|2,Vo=!1,Vs=M}}}function Ku(M){for(M=M.return;M!==null&&M.tag!==5&&M.tag!==3&&M.tag!==13;)M=M.return;Vs=M}function Mp(M){if(!Si||M!==Vs)return!1;if(!Vo)return Ku(M),Vo=!0,!1;if(M.tag!==3&&(M.tag!==5||yt(M.type)&&!kt(M.type,M.memoizedProps))){var w=_a;if(w){if(wi(M)){for(M=_a;M;)M=Ar(M);throw Error(re(418))}for(;w;)Qu(M,w),w=Ar(w)}}if(Ku(M),M.tag===13){if(!Si)throw Error(re(316));if(M=M.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(re(317));_a=Pn(M)}else _a=Vs?Ar(M.stateNode):null;return!0}function Wl(){Si&&(_a=Vs=null,Rs=Vo=!1)}function xp(M){ei===null?ei=[M]:ei.push(M)}function cu(M,w,G){if(M=G.ref,M!==null&&typeof M!="function"&&typeof M!="object"){if(G._owner){if(G=G._owner,G){if(G.tag!==1)throw Error(re(309));var V=G.stateNode}if(!V)throw Error(re(147,M));var te=V,de=""+M;return w!==null&&w.ref!==null&&typeof w.ref=="function"&&w.ref._stringRef===de?w.ref:(w=function(Ve){var pt=te.refs;pt===Vh&&(pt=te.refs={}),Ve===null?delete pt[de]:pt[de]=Ve},w._stringRef=de,w)}if(typeof M!="string")throw Error(re(284));if(!G._owner)throw Error(re(290,M))}return M}function fc(M,w){throw M=Object.prototype.toString.call(w),Error(re(31,M==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":M))}function pu(M){var w=M._init;return w(M._payload)}function Xu(M){function w(Dt,Et){if(M){var Qt=Dt.deletions;Qt===null?(Dt.deletions=[Et],Dt.flags|=16):Qt.push(Et)}}function G(Dt,Et){if(!M)return null;for(;Et!==null;)w(Dt,Et),Et=Et.sibling;return null}function V(Dt,Et){for(Dt=new Map;Et!==null;)Et.key!==null?Dt.set(Et.key,Et):Dt.set(Et.index,Et),Et=Et.sibling;return Dt}function te(Dt,Et){return Dt=Np(Dt,Et),Dt.index=0,Dt.sibling=null,Dt}function de(Dt,Et,Qt){return Dt.index=Qt,M?(Qt=Dt.alternate,Qt!==null?(Qt=Qt.index,Qt<Et?(Dt.flags|=2,Et):Qt):(Dt.flags|=2,Et)):(Dt.flags|=1048576,Et)}function Ve(Dt){return M&&Dt.alternate===null&&(Dt.flags|=2),Dt}function pt(Dt,Et,Qt,_r){return Et===null||Et.tag!==6?(Et=mf(Qt,Dt.mode,_r),Et.return=Dt,Et):(Et=te(Et,Qt),Et.return=Dt,Et)}function en(Dt,Et,Qt,_r){var jr=Qt.type;return jr===st?Ir(Dt,Et,Qt.props.children,_r,Qt.key):Et!==null&&(Et.elementType===jr||typeof jr=="object"&&jr!==null&&jr.$$typeof===Rt&&pu(jr)===Et.type)?(_r=te(Et,Qt.props),_r.ref=cu(Dt,Et,Qt),_r.return=Dt,_r):(_r=ff(Qt.type,Qt.key,Qt.props,null,Dt.mode,_r),_r.ref=cu(Dt,Et,Qt),_r.return=Dt,_r)}function Nn(Dt,Et,Qt,_r){return Et===null||Et.tag!==4||Et.stateNode.containerInfo!==Qt.containerInfo||Et.stateNode.implementation!==Qt.implementation?(Et=Ig(Qt,Dt.mode,_r),Et.return=Dt,Et):(Et=te(Et,Qt.children||[]),Et.return=Dt,Et)}function Ir(Dt,Et,Qt,_r,jr){return Et===null||Et.tag!==7?(Et=jp(Qt,Dt.mode,_r,jr),Et.return=Dt,Et):(Et=te(Et,Qt),Et.return=Dt,Et)}function vi(Dt,Et,Qt){if(typeof Et=="string"&&Et!==""||typeof Et=="number")return Et=mf(""+Et,Dt.mode,Qt),Et.return=Dt,Et;if(typeof Et=="object"&&Et!==null){switch(Et.$$typeof){case ae:return Qt=ff(Et.type,Et.key,Et.props,null,Dt.mode,Qt),Qt.ref=cu(Dt,null,Et),Qt.return=Dt,Qt;case pe:return Et=Ig(Et,Dt.mode,Qt),Et.return=Dt,Et;case Rt:var _r=Et._init;return vi(Dt,_r(Et._payload),Qt)}if(Ln(Et)||It(Et))return Et=jp(Et,Dt.mode,Qt,null),Et.return=Dt,Et;fc(Dt,Et)}return null}function qr(Dt,Et,Qt,_r){var jr=Et!==null?Et.key:null;if(typeof Qt=="string"&&Qt!==""||typeof Qt=="number")return jr!==null?null:pt(Dt,Et,""+Qt,_r);if(typeof Qt=="object"&&Qt!==null){switch(Qt.$$typeof){case ae:return Qt.key===jr?en(Dt,Et,Qt,_r):null;case pe:return Qt.key===jr?Nn(Dt,Et,Qt,_r):null;case Rt:return jr=Qt._init,qr(Dt,Et,jr(Qt._payload),_r)}if(Ln(Qt)||It(Qt))return jr!==null?null:Ir(Dt,Et,Qt,_r,null);fc(Dt,Qt)}return null}function Do(Dt,Et,Qt,_r,jr){if(typeof _r=="string"&&_r!==""||typeof _r=="number")return Dt=Dt.get(Qt)||null,pt(Et,Dt,""+_r,jr);if(typeof _r=="object"&&_r!==null){switch(_r.$$typeof){case ae:return Dt=Dt.get(_r.key===null?Qt:_r.key)||null,en(Et,Dt,_r,jr);case pe:return Dt=Dt.get(_r.key===null?Qt:_r.key)||null,Nn(Et,Dt,_r,jr);case Rt:var Oi=_r._init;return Do(Dt,Et,Qt,Oi(_r._payload),jr)}if(Ln(_r)||It(_r))return Dt=Dt.get(Qt)||null,Ir(Et,Dt,_r,jr,null);fc(Et,_r)}return null}function Nr(Dt,Et,Qt,_r){for(var jr=null,Oi=null,_i=Et,co=Et=0,ua=null;_i!==null&&co<Qt.length;co++){_i.index>co?(ua=_i,_i=null):ua=_i.sibling;var po=qr(Dt,_i,Qt[co],_r);if(po===null){_i===null&&(_i=ua);break}M&&_i&&po.alternate===null&&w(Dt,_i),Et=de(po,Et,co),Oi===null?jr=po:Oi.sibling=po,Oi=po,_i=ua}if(co===Qt.length)return G(Dt,_i),Vo&&lu(Dt,co),jr;if(_i===null){for(;co<Qt.length;co++)_i=vi(Dt,Qt[co],_r),_i!==null&&(Et=de(_i,Et,co),Oi===null?jr=_i:Oi.sibling=_i,Oi=_i);return Vo&&lu(Dt,co),jr}for(_i=V(Dt,_i);co<Qt.length;co++)ua=Do(_i,Dt,co,Qt[co],_r),ua!==null&&(M&&ua.alternate!==null&&_i.delete(ua.key===null?co:ua.key),Et=de(ua,Et,co),Oi===null?jr=ua:Oi.sibling=ua,Oi=ua);return M&&_i.forEach(function(Hp){return w(Dt,Hp)}),Vo&&lu(Dt,co),jr}function Fa(Dt,Et,Qt,_r){var jr=It(Qt);if(typeof jr!="function")throw Error(re(150));if(Qt=jr.call(Qt),Qt==null)throw Error(re(151));for(var Oi=jr=null,_i=Et,co=Et=0,ua=null,po=Qt.next();_i!==null&&!po.done;co++,po=Qt.next()){_i.index>co?(ua=_i,_i=null):ua=_i.sibling;var Hp=qr(Dt,_i,po.value,_r);if(Hp===null){_i===null&&(_i=ua);break}M&&_i&&Hp.alternate===null&&w(Dt,_i),Et=de(Hp,Et,co),Oi===null?jr=Hp:Oi.sibling=Hp,Oi=Hp,_i=ua}if(po.done)return G(Dt,_i),Vo&&lu(Dt,co),jr;if(_i===null){for(;!po.done;co++,po=Qt.next())po=vi(Dt,po.value,_r),po!==null&&(Et=de(po,Et,co),Oi===null?jr=po:Oi.sibling=po,Oi=po);return Vo&&lu(Dt,co),jr}for(_i=V(Dt,_i);!po.done;co++,po=Qt.next())po=Do(_i,Dt,co,po.value,_r),po!==null&&(M&&po.alternate!==null&&_i.delete(po.key===null?co:po.key),Et=de(po,Et,co),Oi===null?jr=po:Oi.sibling=po,Oi=po);return M&&_i.forEach(function(g1){return w(Dt,g1)}),Vo&&lu(Dt,co),jr}function Ol(Dt,Et,Qt,_r){if(typeof Qt=="object"&&Qt!==null&&Qt.type===st&&Qt.key===null&&(Qt=Qt.props.children),typeof Qt=="object"&&Qt!==null){switch(Qt.$$typeof){case ae:e:{for(var jr=Qt.key,Oi=Et;Oi!==null;){if(Oi.key===jr){if(jr=Qt.type,jr===st){if(Oi.tag===7){G(Dt,Oi.sibling),Et=te(Oi,Qt.props.children),Et.return=Dt,Dt=Et;break e}}else if(Oi.elementType===jr||typeof jr=="object"&&jr!==null&&jr.$$typeof===Rt&&pu(jr)===Oi.type){G(Dt,Oi.sibling),Et=te(Oi,Qt.props),Et.ref=cu(Dt,Oi,Qt),Et.return=Dt,Dt=Et;break e}G(Dt,Oi);break}else w(Dt,Oi);Oi=Oi.sibling}Qt.type===st?(Et=jp(Qt.props.children,Dt.mode,_r,Qt.key),Et.return=Dt,Dt=Et):(_r=ff(Qt.type,Qt.key,Qt.props,null,Dt.mode,_r),_r.ref=cu(Dt,Et,Qt),_r.return=Dt,Dt=_r)}return Ve(Dt);case pe:e:{for(Oi=Qt.key;Et!==null;){if(Et.key===Oi)if(Et.tag===4&&Et.stateNode.containerInfo===Qt.containerInfo&&Et.stateNode.implementation===Qt.implementation){G(Dt,Et.sibling),Et=te(Et,Qt.children||[]),Et.return=Dt,Dt=Et;break e}else{G(Dt,Et);break}else w(Dt,Et);Et=Et.sibling}Et=Ig(Qt,Dt.mode,_r),Et.return=Dt,Dt=Et}return Ve(Dt);case Rt:return Oi=Qt._init,Ol(Dt,Et,Oi(Qt._payload),_r)}if(Ln(Qt))return Nr(Dt,Et,Qt,_r);if(It(Qt))return Fa(Dt,Et,Qt,_r);fc(Dt,Qt)}return typeof Qt=="string"&&Qt!==""||typeof Qt=="number"?(Qt=""+Qt,Et!==null&&Et.tag===6?(G(Dt,Et.sibling),Et=te(Et,Qt),Et.return=Dt,Dt=Et):(G(Dt,Et),Et=mf(Qt,Dt.mode,_r),Et.return=Dt,Dt=Et),Ve(Dt)):G(Dt,Et)}return Ol}var gc=Xu(!0),Cp=Xu(!1),cl={},cs=ms(cl),Yu=ms(cl),Ju=ms(cl);function $o(M){if(M===cl)throw Error(re(174));return M}function Sp(M,w){ao(Ju,w),ao(Yu,M),ao(cs,cl),M=_t(w),fo(cs),ao(cs,M)}function wp(){fo(cs),fo(Yu),fo(Ju)}function Zu(M){var w=$o(Ju.current),G=$o(cs.current);w=ct(G,M.type,w),G!==w&&(ao(Yu,M),ao(cs,w))}function Vl(M){Yu.current===M&&(fo(cs),fo(Yu))}var No=ms(0);function uu(M){for(var w=M;w!==null;){if(w.tag===13){var G=w.memoizedState;if(G!==null&&(G=G.dehydrated,G===null||Vn(G)||gr(G)))return w}else if(w.tag===19&&w.memoizedProps.revealOrder!==void 0){if(w.flags&128)return w}else if(w.child!==null){w.child.return=w,w=w.child;continue}if(w===M)break;for(;w.sibling===null;){if(w.return===null||w.return===M)return null;w=w.return}w.sibling.return=w.return,w=w.sibling}return null}var ps=[];function lo(){for(var M=0;M<ps.length;M++){var w=ps[M];oi?w._workInProgressVersionPrimary=null:w._workInProgressVersionSecondary=null}ps.length=0}var pl=Q.ReactCurrentDispatcher,ia=Q.ReactCurrentBatchConfig,du=0,es=null,oa=null,sa=null,aa=!1,je=!1,Tp=0,Lm=0;function Qo(){throw Error(re(321))}function mc(M,w){if(w===null)return!1;for(var G=0;G<w.length&&G<M.length;G++)if(!lc(M[G],w[G]))return!1;return!0}function Ac(M,w,G,V,te,de){if(du=de,es=w,w.memoizedState=null,w.updateQueue=null,w.lanes=0,pl.current=M===null||M.memoizedState===null?rp:ef,M=G(V,te),je){de=0;do{if(je=!1,Tp=0,25<=de)throw Error(re(301));de+=1,sa=oa=null,w.updateQueue=null,pl.current=tf,M=G(V,te)}while(je)}if(pl.current=Rl,w=oa!==null&&oa.next!==null,du=0,sa=oa=es=null,aa=!1,w)throw Error(re(300));return M}function yc(){var M=Tp!==0;return Tp=0,M}function Qs(){var M={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return sa===null?es.memoizedState=sa=M:sa=sa.next=M,sa}function la(){if(oa===null){var M=es.alternate;M=M!==null?M.memoizedState:null}else M=oa.next;var w=sa===null?es.memoizedState:sa.next;if(w!==null)sa=w,oa=M;else{if(M===null)throw Error(re(310));oa=M,M={memoizedState:oa.memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},sa===null?es.memoizedState=sa=M:sa=sa.next=M}return sa}function Ql(M,w){return typeof w=="function"?w(M):w}function vc(M){var w=la(),G=w.queue;if(G===null)throw Error(re(311));G.lastRenderedReducer=M;var V=oa,te=V.baseQueue,de=G.pending;if(de!==null){if(te!==null){var Ve=te.next;te.next=de.next,de.next=Ve}V.baseQueue=te=de,G.pending=null}if(te!==null){de=te.next,V=V.baseState;var pt=Ve=null,en=null,Nn=de;do{var Ir=Nn.lane;if((du&Ir)===Ir)en!==null&&(en=en.next={lane:0,action:Nn.action,hasEagerState:Nn.hasEagerState,eagerState:Nn.eagerState,next:null}),V=Nn.hasEagerState?Nn.eagerState:M(V,Nn.action);else{var vi={lane:Ir,action:Nn.action,hasEagerState:Nn.hasEagerState,eagerState:Nn.eagerState,next:null};en===null?(pt=en=vi,Ve=V):en=en.next=vi,es.lanes|=Ir,bu|=Ir}Nn=Nn.next}while(Nn!==null&&Nn!==de);en===null?Ve=V:en.next=pt,lc(V,w.memoizedState)||(Wa=!0),w.memoizedState=V,w.baseState=Ve,w.baseQueue=en,G.lastRenderedState=V}if(M=G.interleaved,M!==null){te=M;do de=te.lane,es.lanes|=de,bu|=de,te=te.next;while(te!==M)}else te===null&&(G.lanes=0);return[w.memoizedState,G.dispatch]}function ul(M){var w=la(),G=w.queue;if(G===null)throw Error(re(311));G.lastRenderedReducer=M;var V=G.dispatch,te=G.pending,de=w.memoizedState;if(te!==null){G.pending=null;var Ve=te=te.next;do de=M(de,Ve.action),Ve=Ve.next;while(Ve!==te);lc(de,w.memoizedState)||(Wa=!0),w.memoizedState=de,w.baseQueue===null&&(w.baseState=de),G.lastRenderedState=de}return[de,V]}function Kl(){}function qu(M,w){var G=es,V=la(),te=w(),de=!lc(V.memoizedState,te);if(de&&(V.memoizedState=te,Wa=!0),V=V.queue,hu(Bp.bind(null,G,V,M),[M]),V.getSnapshot!==w||de||sa!==null&&sa.memoizedState.tag&1){if(G.flags|=2048,Tl(9,qd.bind(null,G,V,te,w),void 0,null),Qi===null)throw Error(re(349));du&30||Zd(G,w,te)}return te}function Zd(M,w,G){M.flags|=16384,M={getSnapshot:w,value:G},w=es.updateQueue,w===null?(w={lastEffect:null,stores:null},es.updateQueue=w,w.stores=[M]):(G=w.stores,G===null?w.stores=[M]:G.push(M))}function qd(M,w,G,V){w.value=G,w.getSnapshot=V,Yh(w)&&ec(M,1,-1)}function Bp(M,w,G){return G(function(){Yh(w)&&ec(M,1,-1)})}function Yh(M){var w=M.getSnapshot;M=M.value;try{var G=w();return!lc(M,G)}catch(V){return!0}}function lg(M){var w=Qs();return typeof M=="function"&&(M=M()),w.memoizedState=w.baseState=M,M={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ql,lastRenderedState:M},w.queue=M,M=M.dispatch=Ip.bind(null,es,M),[w.memoizedState,M]}function Tl(M,w,G,V){return M={tag:M,create:w,destroy:G,deps:V,next:null},w=es.updateQueue,w===null?(w={lastEffect:null,stores:null},es.updateQueue=w,w.lastEffect=M.next=M):(G=w.lastEffect,G===null?w.lastEffect=M.next=M:(V=G.next,G.next=M,M.next=V,w.lastEffect=M)),M}function $d(){return la().memoizedState}function Ta(M,w,G,V){var te=Qs();es.flags|=M,te.memoizedState=Tl(1|w,G,void 0,V===void 0?null:V)}function Bl(M,w,G,V){var te=la();V=V===void 0?null:V;var de=void 0;if(oa!==null){var Ve=oa.memoizedState;if(de=Ve.destroy,V!==null&&mc(V,Ve.deps)){te.memoizedState=Tl(w,G,de,V);return}}es.flags|=M,te.memoizedState=Tl(1|w,G,de,V)}function Jh(M,w){return Ta(8390656,8,M,w)}function hu(M,w){return Bl(2048,8,M,w)}function Xl(M,w){return Bl(4,2,M,w)}function Zh(M,w){return Bl(4,4,M,w)}function $u(M,w){if(typeof w=="function")return M=M(),w(M),function(){w(null)};if(w!=null)return M=M(),w.current=M,function(){w.current=null}}function qh(M,w,G){return G=G!=null?G.concat([M]):null,Bl(4,4,$u.bind(null,w,M),G)}function Rp(){}function ui(M,w){var G=la();w=w===void 0?null:w;var V=G.memoizedState;return V!==null&&w!==null&&mc(w,V[1])?V[0]:(G.memoizedState=[M,w],M)}function fu(M,w){var G=la();w=w===void 0?null:w;var V=G.memoizedState;return V!==null&&w!==null&&mc(w,V[1])?V[0]:(M=M(),G.memoizedState=[M,w],M)}function Yl(M,w){var G=Li;Li=G!==0&&4>G?G:4,M(!0);var V=ia.transition;ia.transition={};try{M(!1),w()}finally{Li=G,ia.transition=V}}function a1(){return la().memoizedState}function eh(M,w,G){var V=Su(M);G={lane:V,action:G,hasEagerState:!1,eagerState:null,next:null},dl(M)?Ba(w,G):(ed(M,w,G),G=Ka(),M=ec(M,V,G),M!==null&&$h(M,w,V))}function Ip(M,w,G){var V=Su(M),te={lane:V,action:G,hasEagerState:!1,eagerState:null,next:null};if(dl(M))Ba(w,te);else{ed(M,w,te);var de=M.alternate;if(M.lanes===0&&(de===null||de.lanes===0)&&(de=w.lastRenderedReducer,de!==null))try{var Ve=w.lastRenderedState,pt=de(Ve,G);if(te.hasEagerState=!0,te.eagerState=pt,lc(pt,Ve))return}catch(en){}finally{}G=Ka(),M=ec(M,V,G),M!==null&&$h(M,w,V)}}function dl(M){var w=M.alternate;return M===es||w!==null&&w===es}function Ba(M,w){je=aa=!0;var G=M.pending;G===null?w.next=w:(w.next=G.next,G.next=w),M.pending=w}function ed(M,w,G){Qi!==null&&M.mode&1&&!(ai&2)?(M=w.interleaved,M===null?(G.next=G,uc===null?uc=[w]:uc.push(w)):(G.next=M.next,M.next=G),w.interleaved=G):(M=w.pending,M===null?G.next=G:(G.next=M.next,M.next=G),w.pending=G)}function $h(M,w,G){if(G&4194240){var V=w.lanes;V&=M.pendingLanes,G|=V,w.lanes=G,Uh(M,G)}}var Rl={readContext:Ws,useCallback:Qo,useContext:Qo,useEffect:Qo,useImperativeHandle:Qo,useInsertionEffect:Qo,useLayoutEffect:Qo,useMemo:Qo,useReducer:Qo,useRef:Qo,useState:Qo,useDebugValue:Qo,useDeferredValue:Qo,useTransition:Qo,useMutableSource:Qo,useSyncExternalStore:Qo,useId:Qo,unstable_isNewReconciler:!1},rp={readContext:Ws,useCallback:function(M,w){return Qs().memoizedState=[M,w===void 0?null:w],M},useContext:Ws,useEffect:Jh,useImperativeHandle:function(M,w,G){return G=G!=null?G.concat([M]):null,Ta(4194308,4,$u.bind(null,w,M),G)},useLayoutEffect:function(M,w){return Ta(4194308,4,M,w)},useInsertionEffect:function(M,w){return Ta(4,2,M,w)},useMemo:function(M,w){var G=Qs();return w=w===void 0?null:w,M=M(),G.memoizedState=[M,w],M},useReducer:function(M,w,G){var V=Qs();return w=G!==void 0?G(w):w,V.memoizedState=V.baseState=w,M={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:M,lastRenderedState:w},V.queue=M,M=M.dispatch=eh.bind(null,es,M),[V.memoizedState,M]},useRef:function(M){var w=Qs();return M={current:M},w.memoizedState=M},useState:lg,useDebugValue:Rp,useDeferredValue:function(M){var w=lg(M),G=w[0],V=w[1];return Jh(function(){var te=ia.transition;ia.transition={};try{V(M)}finally{ia.transition=te}},[M]),G},useTransition:function(){var M=lg(!1),w=M[0];return M=Yl.bind(null,M[1]),Qs().memoizedState=M,[w,M]},useMutableSource:function(){},useSyncExternalStore:function(M,w,G){var V=es,te=Qs();if(Vo){if(G===void 0)throw Error(re(407));G=G()}else{if(G=w(),Qi===null)throw Error(re(349));du&30||Zd(V,w,G)}te.memoizedState=G;var de={value:G,getSnapshot:w};return te.queue=de,Jh(Bp.bind(null,V,de,M),[M]),V.flags|=2048,Tl(9,qd.bind(null,V,de,G,w),void 0,null),G},useId:function(){var M=Qs(),w=Qi.identifierPrefix;if(Vo){var G=np,V=tp;G=(V&~(1<<32-ra(V)-1)).toString(32)+G,w=":"+w+"R"+G,G=Tp++,0<G&&(w+="H"+G.toString(32)),w+=":"}else G=Lm++,w=":"+w+"r"+G.toString(32)+":";return M.memoizedState=w},unstable_isNewReconciler:!1},ef={readContext:Ws,useCallback:ui,useContext:Ws,useEffect:hu,useImperativeHandle:qh,useInsertionEffect:Xl,useLayoutEffect:Zh,useMemo:fu,useReducer:vc,useRef:$d,useState:function(){return vc(Ql)},useDebugValue:Rp,useDeferredValue:function(M){var w=vc(Ql),G=w[0],V=w[1];return hu(function(){var te=ia.transition;ia.transition={};try{V(M)}finally{ia.transition=te}},[M]),G},useTransition:function(){var M=vc(Ql)[0],w=la().memoizedState;return[M,w]},useMutableSource:Kl,useSyncExternalStore:qu,useId:a1,unstable_isNewReconciler:!1},tf={readContext:Ws,useCallback:ui,useContext:Ws,useEffect:hu,useImperativeHandle:qh,useInsertionEffect:Xl,useLayoutEffect:Zh,useMemo:fu,useReducer:ul,useRef:$d,useState:function(){return ul(Ql)},useDebugValue:Rp,useDeferredValue:function(M){var w=ul(Ql),G=w[0],V=w[1];return hu(function(){var te=ia.transition;ia.transition={};try{V(M)}finally{ia.transition=te}},[M]),G},useTransition:function(){var M=ul(Ql)[0],w=la().memoizedState;return[M,w]},useMutableSource:Kl,useSyncExternalStore:qu,useId:a1,unstable_isNewReconciler:!1};function zc(M,w){try{var G="",V=w;do G+=Om(V),V=V.return;while(V);var te=G}catch(de){te=`
Error generating stack: `+de.message+`
`+de.stack}return{value:M,source:w,stack:te}}function _c(M,w){try{C.error(w.value)}catch(G){setTimeout(function(){throw G})}}var td=typeof WeakMap=="function"?WeakMap:Map;function ip(M,w,G){G=ja(-1,G),G.tag=3,G.payload={element:null};var V=w.value;return G.callback=function(){Ag||(Ag=!0,Pp=V),_c(M,w)},G}function cg(M,w,G){G=ja(-1,G),G.tag=3;var V=M.type.getDerivedStateFromError;if(typeof V=="function"){var te=w.value;G.payload=function(){return V(te)},G.callback=function(){_c(M,w)}}var de=M.stateNode;return de!==null&&typeof de.componentDidCatch=="function"&&(G.callback=function(){_c(M,w),typeof V!="function"&&(xu===null?xu=new Set([this]):xu.add(this));var Ve=w.stack;this.componentDidCatch(w.value,{componentStack:Ve!==null?Ve:""})}),G}function Pm(M,w,G){var V=M.pingCache;if(V===null){V=M.pingCache=new td;var te=new Set;V.set(w,te)}else te=V.get(w),te===void 0&&(te=new Set,V.set(w,te));te.has(G)||(te.add(G),M=h1.bind(null,M,w,G),w.then(M,M))}function pg(M){do{var w;if((w=M.tag===13)&&(w=M.memoizedState,w=w!==null?w.dehydrated!==null:!0),w)return M;M=M.return}while(M!==null);return null}function ug(M,w,G,V,te){return M.mode&1?(M.flags|=65536,M.lanes=te,M):(M===w?M.flags|=65536:(M.flags|=128,G.flags|=131072,G.flags&=-52805,G.tag===1&&(G.alternate===null?G.tag=17:(w=ja(-1,1),w.tag=2,As(G,w))),G.lanes|=1),M)}function Jl(M){M.flags|=4}function km(M,w){if(M!==null&&M.child===w.child)return!0;if(w.flags&16)return!1;for(M=w.child;M!==null;){if(M.flags&12854||M.subtreeFlags&12854)return!1;M=M.sibling}return!0}var gu,Yi,Pi,jo;if(Ur)gu=function(M,w){for(var G=w.child;G!==null;){if(G.tag===5||G.tag===6)fn(M,G.stateNode);else if(G.tag!==4&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===w)break;for(;G.sibling===null;){if(G.return===null||G.return===w)return;G=G.return}G.sibling.return=G.return,G=G.sibling}},Yi=function(){},Pi=function(M,w,G,V,te){if(M=M.memoizedProps,M!==V){var de=w.stateNode,Ve=$o(cs.current);G=Ot(de,G,M,V,te,Ve),(w.updateQueue=G)&&Jl(w)}},jo=function(M,w,G,V){G!==V&&Jl(w)};else if(Ci){gu=function(M,w,G,V){for(var te=w.child;te!==null;){if(te.tag===5){var de=te.stateNode;G&&V&&(de=Ep(de,te.type,te.memoizedProps,te)),fn(M,de)}else if(te.tag===6)de=te.stateNode,G&&V&&(de=Je(de,te.memoizedProps,te)),fn(M,de);else if(te.tag!==4){if(te.tag===22&&te.memoizedState!==null)de=te.child,de!==null&&(de.return=te),gu(M,te,!0,!0);else if(te.child!==null){te.child.return=te,te=te.child;continue}}if(te===w)break;for(;te.sibling===null;){if(te.return===null||te.return===w)return;te=te.return}te.sibling.return=te.return,te=te.sibling}};var Fp=function(M,w,G,V){for(var te=w.child;te!==null;){if(te.tag===5){var de=te.stateNode;G&&V&&(de=Ep(de,te.type,te.memoizedProps,te)),ya(M,de)}else if(te.tag===6)de=te.stateNode,G&&V&&(de=Je(de,te.memoizedProps,te)),ya(M,de);else if(te.tag!==4){if(te.tag===22&&te.memoizedState!==null)de=te.child,de!==null&&(de.return=te),Fp(M,te,!0,!0);else if(te.child!==null){te.child.return=te,te=te.child;continue}}if(te===w)break;for(;te.sibling===null;){if(te.return===null||te.return===w)return;te=te.return}te.sibling.return=te.return,te=te.sibling}};Yi=function(M,w){var G=w.stateNode;if(!km(M,w)){M=G.containerInfo;var V=za(M);Fp(V,w,!1,!1),G.pendingChildren=V,Jl(w),_p(M,V)}},Pi=function(M,w,G,V,te){var de=M.stateNode,Ve=M.memoizedProps;if((M=km(M,w))&&Ve===V)w.stateNode=de;else{var pt=w.stateNode,en=$o(cs.current),Nn=null;Ve!==V&&(Nn=Ot(pt,G,Ve,V,te,en)),M&&Nn===null?w.stateNode=de:(de=gs(de,Nn,G,Ve,V,w,M,pt),At(de,G,V,te,en)&&Jl(w),w.stateNode=de,M?Jl(w):gu(de,w,!1,!1))}},jo=function(M,w,G,V){G!==V?(M=$o(Ju.current),G=$o(cs.current),w.stateNode=yn(V,M,G,w),Jl(w)):w.stateNode=M.stateNode}}else Yi=function(){},Pi=function(){},jo=function(){};function hl(M,w){if(!Vo)switch(M.tailMode){case"hidden":w=M.tail;for(var G=null;w!==null;)w.alternate!==null&&(G=w),w=w.sibling;G===null?M.tail=null:G.sibling=null;break;case"collapsed":G=M.tail;for(var V=null;G!==null;)G.alternate!==null&&(V=G),G=G.sibling;V===null?w||M.tail===null?M.tail=null:M.tail.sibling=null:V.sibling=null}}function ys(M){var w=M.alternate!==null&&M.alternate.child===M.child,G=0,V=0;if(w)for(var te=M.child;te!==null;)G|=te.lanes|te.childLanes,V|=te.subtreeFlags&14680064,V|=te.flags&14680064,te.return=M,te=te.sibling;else for(te=M.child;te!==null;)G|=te.lanes|te.childLanes,V|=te.subtreeFlags,V|=te.flags,te.return=M,te=te.sibling;return M.subtreeFlags|=V,M.childLanes=G,w}function nd(M,w,G){var V=w.pendingProps;switch(Vu(w),w.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ys(w),null;case 1:return js(w.type)&&as(),ys(w),null;case 3:return V=w.stateNode,wp(),fo(Ts),fo(qo),lo(),V.pendingContext&&(V.context=V.pendingContext,V.pendingContext=null),(M===null||M.child===null)&&(Mp(w)?Jl(w):M===null||M.memoizedState.isDehydrated&&!(w.flags&256)||(w.flags|=1024,ei!==null&&(Eg(ei),ei=null))),Yi(M,w),ys(w),null;case 5:Vl(w),G=$o(Ju.current);var te=w.type;if(M!==null&&w.stateNode!=null)Pi(M,w,te,V,G),M.ref!==w.ref&&(w.flags|=512,w.flags|=2097152);else{if(!V){if(w.stateNode===null)throw Error(re(166));return ys(w),null}if(M=$o(cs.current),Mp(w)){if(!Si)throw Error(re(175));M=Vt(w.stateNode,w.type,w.memoizedProps,G,M,w,!Rs),w.updateQueue=M,M!==null&&Jl(w)}else{var de=Tt(te,V,G,M,w);gu(de,w,!1,!1),w.stateNode=de,At(de,te,V,G,M)&&Jl(w)}w.ref!==null&&(w.flags|=512,w.flags|=2097152)}return ys(w),null;case 6:if(M&&w.stateNode!=null)jo(M,w,M.memoizedProps,V);else{if(typeof V!="string"&&w.stateNode===null)throw Error(re(166));if(M=$o(Ju.current),G=$o(cs.current),Mp(w)){if(!Si)throw Error(re(176));if(M=w.stateNode,V=w.memoizedProps,(G=gn(M,V,w,!Rs))&&(te=Vs,te!==null))switch(de=(te.mode&1)!==0,te.tag){case 3:mn(te.stateNode.containerInfo,M,V,de);break;case 5:vr(te.type,te.memoizedProps,te.stateNode,M,V,de)}G&&Jl(w)}else w.stateNode=yn(V,M,G,w)}return ys(w),null;case 13:if(fo(No),V=w.memoizedState,Vo&&_a!==null&&w.mode&1&&!(w.flags&128)){for(M=_a;M;)M=Ar(M);return Wl(),w.flags|=98560,w}if(V!==null&&V.dehydrated!==null){if(V=Mp(w),M===null){if(!V)throw Error(re(318));if(!Si)throw Error(re(344));if(M=w.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(re(317));vn(M,w)}else Wl(),!(w.flags&128)&&(w.memoizedState=null),w.flags|=4;return ys(w),null}return ei!==null&&(Eg(ei),ei=null),w.flags&128?(w.lanes=G,w):(V=V!==null,G=!1,M===null?Mp(w):G=M.memoizedState!==null,V&&!G&&(w.child.flags|=8192,w.mode&1&&(M===null||No.current&1?Es===0&&(Es=3):xg())),w.updateQueue!==null&&(w.flags|=4),ys(w),null);case 4:return wp(),Yi(M,w),M===null&&uo(w.stateNode.containerInfo),ys(w),null;case 10:return Kd(w.type._context),ys(w),null;case 17:return js(w.type)&&as(),ys(w),null;case 19:if(fo(No),te=w.memoizedState,te===null)return ys(w),null;if(V=(w.flags&128)!==0,de=te.rendering,de===null)if(V)hl(te,!1);else{if(Es!==0||M!==null&&M.flags&128)for(M=w.child;M!==null;){if(de=uu(M),de!==null){for(w.flags|=128,hl(te,!1),M=de.updateQueue,M!==null&&(w.updateQueue=M,w.flags|=4),w.subtreeFlags=0,M=G,V=w.child;V!==null;)G=V,te=M,G.flags&=14680066,de=G.alternate,de===null?(G.childLanes=0,G.lanes=te,G.child=null,G.subtreeFlags=0,G.memoizedProps=null,G.memoizedState=null,G.updateQueue=null,G.dependencies=null,G.stateNode=null):(G.childLanes=de.childLanes,G.lanes=de.lanes,G.child=de.child,G.subtreeFlags=0,G.deletions=null,G.memoizedProps=de.memoizedProps,G.memoizedState=de.memoizedState,G.updateQueue=de.updateQueue,G.type=de.type,te=de.dependencies,G.dependencies=te===null?null:{lanes:te.lanes,firstContext:te.firstContext}),V=V.sibling;return ao(No,No.current&1|2),w.child}M=M.sibling}te.tail!==null&&Ms()>ch&&(w.flags|=128,V=!0,hl(te,!1),w.lanes=4194304)}else{if(!V)if(M=uu(de),M!==null){if(w.flags|=128,V=!0,M=M.updateQueue,M!==null&&(w.updateQueue=M,w.flags|=4),hl(te,!0),te.tail===null&&te.tailMode==="hidden"&&!de.alternate&&!Vo)return ys(w),null}else 2*Ms()-te.renderingStartTime>ch&&G!==1073741824&&(w.flags|=128,V=!0,hl(te,!1),w.lanes=4194304);te.isBackwards?(de.sibling=w.child,w.child=de):(M=te.last,M!==null?M.sibling=de:w.child=de,te.last=de)}return te.tail!==null?(w=te.tail,te.rendering=w,te.tail=w.sibling,te.renderingStartTime=Ms(),w.sibling=null,M=No.current,ao(No,V?M&1|2:M&1),w):(ys(w),null);case 22:case 23:return Ko(),V=w.memoizedState!==null,M!==null&&M.memoizedState!==null!==V&&(w.flags|=8192),V&&w.mode&1?pa&1073741824&&(ys(w),Ur&&w.subtreeFlags&6&&(w.flags|=8192)):ys(w),null;case 24:return null;case 25:return null}throw Error(re(156,w.tag))}var th=Q.ReactCurrentOwner,Wa=!1;function Ea(M,w,G,V){w.child=M===null?Cp(w,null,G,V):gc(w,M.child,G,V)}function nf(M,w,G,V,te){G=G.render;var de=w.ref;return su(w,te),V=Ac(M,w,G,V,de,te),G=yc(),M!==null&&!Wa?(w.updateQueue=M.updateQueue,w.flags&=-2053,M.lanes&=~te,Gc(M,w,te)):(Vo&&G&&Yd(w),w.flags|=1,Ea(M,w,V,te),w.child)}function mu(M,w,G,V,te){if(M===null){var de=G.type;return typeof de=="function"&&!Rg(de)&&de.defaultProps===void 0&&G.compare===null&&G.defaultProps===void 0?(w.tag=15,w.type=de,Ks(M,w,de,V,te)):(M=ff(G.type,null,V,w,w.mode,te),M.ref=w.ref,M.return=w,w.child=M)}if(de=M.child,!(M.lanes&te)){var Ve=de.memoizedProps;if(G=G.compare,G=G!==null?G:ou,G(Ve,V)&&M.ref===w.ref)return Gc(M,w,te)}return w.flags|=1,M=Np(de,V),M.ref=w.ref,M.return=w,w.child=M}function Ks(M,w,G,V,te){if(M!==null&&ou(M.memoizedProps,V)&&M.ref===w.ref)if(Wa=!1,(M.lanes&te)!==0)M.flags&131072&&(Wa=!0);else return w.lanes=M.lanes,Gc(M,w,te);return rd(M,w,G,V,te)}function dg(M,w,G){var V=w.pendingProps,te=V.children,de=M!==null?M.memoizedState:null;if(V.mode==="hidden")if(!(w.mode&1))w.memoizedState={baseLanes:0,cachePool:null},ao(Eu,pa),pa|=G;else if(G&1073741824)w.memoizedState={baseLanes:0,cachePool:null},V=de!==null?de.baseLanes:G,ao(Eu,pa),pa|=V;else return M=de!==null?de.baseLanes|G:G,w.lanes=w.childLanes=1073741824,w.memoizedState={baseLanes:M,cachePool:null},w.updateQueue=null,ao(Eu,pa),pa|=M,null;else de!==null?(V=de.baseLanes|G,w.memoizedState=null):V=G,ao(Eu,pa),pa|=V;return Ea(M,w,te,G),w.child}function Xs(M,w){var G=w.ref;(M===null&&G!==null||M!==null&&M.ref!==G)&&(w.flags|=512,w.flags|=2097152)}function rd(M,w,G,V,te){var de=js(G)?ac:qo.current;return de=Ga(w,de),su(w,te),G=Ac(M,w,G,V,de,te),V=yc(),M!==null&&!Wa?(w.updateQueue=M.updateQueue,w.flags&=-2053,M.lanes&=~te,Gc(M,w,te)):(Vo&&V&&Yd(w),w.flags|=1,Ea(M,w,G,te),w.child)}function fl(M,w,G,V,te){if(js(G)){var de=!0;Bs(w)}else de=!1;if(su(w,te),w.stateNode===null)M!==null&&(M.alternate=null,w.alternate=null,w.flags|=2),ls(w,G,V),Sl(w,G,V,te),V=!0;else if(M===null){var Ve=w.stateNode,pt=w.memoizedProps;Ve.props=pt;var en=Ve.context,Nn=G.contextType;typeof Nn=="object"&&Nn!==null?Nn=Ws(Nn):(Nn=js(G)?ac:qo.current,Nn=Ga(w,Nn));var Ir=G.getDerivedStateFromProps,vi=typeof Ir=="function"||typeof Ve.getSnapshotBeforeUpdate=="function";vi||typeof Ve.UNSAFE_componentWillReceiveProps!="function"&&typeof Ve.componentWillReceiveProps!="function"||(pt!==V||en!==Nn)&&Qh(w,Ve,V,Nn),Pc=!1;var qr=w.memoizedState;Ve.state=qr,wa(w,V,Ve,te),en=w.memoizedState,pt!==V||qr!==en||Ts.current||Pc?(typeof Ir=="function"&&(kc(w,G,Ir,V),en=w.memoizedState),(pt=Pc||ll(w,G,pt,V,qr,en,Nn))?(vi||typeof Ve.UNSAFE_componentWillMount!="function"&&typeof Ve.componentWillMount!="function"||(typeof Ve.componentWillMount=="function"&&Ve.componentWillMount(),typeof Ve.UNSAFE_componentWillMount=="function"&&Ve.UNSAFE_componentWillMount()),typeof Ve.componentDidMount=="function"&&(w.flags|=4194308)):(typeof Ve.componentDidMount=="function"&&(w.flags|=4194308),w.memoizedProps=V,w.memoizedState=en),Ve.props=V,Ve.state=en,Ve.context=Nn,V=pt):(typeof Ve.componentDidMount=="function"&&(w.flags|=4194308),V=!1)}else{Ve=w.stateNode,dc(M,w),pt=w.memoizedProps,Nn=w.type===w.elementType?pt:Un(w.type,pt),Ve.props=Nn,vi=w.pendingProps,qr=Ve.context,en=G.contextType,typeof en=="object"&&en!==null?en=Ws(en):(en=js(G)?ac:qo.current,en=Ga(w,en));var Do=G.getDerivedStateFromProps;(Ir=typeof Do=="function"||typeof Ve.getSnapshotBeforeUpdate=="function")||typeof Ve.UNSAFE_componentWillReceiveProps!="function"&&typeof Ve.componentWillReceiveProps!="function"||(pt!==vi||qr!==en)&&Qh(w,Ve,V,en),Pc=!1,qr=w.memoizedState,Ve.state=qr,wa(w,V,Ve,te);var Nr=w.memoizedState;pt!==vi||qr!==Nr||Ts.current||Pc?(typeof Do=="function"&&(kc(w,G,Do,V),Nr=w.memoizedState),(Nn=Pc||ll(w,G,Nn,V,qr,Nr,en)||!1)?(Ir||typeof Ve.UNSAFE_componentWillUpdate!="function"&&typeof Ve.componentWillUpdate!="function"||(typeof Ve.componentWillUpdate=="function"&&Ve.componentWillUpdate(V,Nr,en),typeof Ve.UNSAFE_componentWillUpdate=="function"&&Ve.UNSAFE_componentWillUpdate(V,Nr,en)),typeof Ve.componentDidUpdate=="function"&&(w.flags|=4),typeof Ve.getSnapshotBeforeUpdate=="function"&&(w.flags|=1024)):(typeof Ve.componentDidUpdate!="function"||pt===M.memoizedProps&&qr===M.memoizedState||(w.flags|=4),typeof Ve.getSnapshotBeforeUpdate!="function"||pt===M.memoizedProps&&qr===M.memoizedState||(w.flags|=1024),w.memoizedProps=V,w.memoizedState=Nr),Ve.props=V,Ve.state=Nr,Ve.context=en,V=Nn):(typeof Ve.componentDidUpdate!="function"||pt===M.memoizedProps&&qr===M.memoizedState||(w.flags|=4),typeof Ve.getSnapshotBeforeUpdate!="function"||pt===M.memoizedProps&&qr===M.memoizedState||(w.flags|=1024),V=!1)}return nh(M,w,G,V,de,te)}function nh(M,w,G,V,te,de){Xs(M,w);var Ve=(w.flags&128)!==0;if(!V&&!Ve)return te&&Hd(w,G,!1),Gc(M,w,de);V=w.stateNode,th.current=w;var pt=Ve&&typeof G.getDerivedStateFromError!="function"?null:V.render();return w.flags|=1,M!==null&&Ve?(w.child=gc(w,M.child,null,de),w.child=gc(w,null,pt,de)):Ea(M,w,pt,de),w.memoizedState=V.state,te&&Hd(w,G,!0),w.child}function hg(M){var w=M.stateNode;w.pendingContext?Sa(M,w.pendingContext,w.pendingContext!==w.context):w.context&&Sa(M,w.context,!1),Sp(M,w.containerInfo)}function br(M,w,G,V,te){return Wl(),xp(te),w.flags|=256,Ea(M,w,G,V),w.child}var Ys={dehydrated:null,treeContext:null,retryLane:0};function Ec(M){return{baseLanes:M,cachePool:null}}function bc(M,w,G){var V=w.pendingProps,te=No.current,de=!1,Ve=(w.flags&128)!==0,pt;if((pt=Ve)||(pt=M!==null&&M.memoizedState===null?!1:(te&2)!==0),pt?(de=!0,w.flags&=-129):(M===null||M.memoizedState!==null)&&(te|=1),ao(No,te&1),M===null)return Jd(w),M=w.memoizedState,M!==null&&(M=M.dehydrated,M!==null)?(w.mode&1?gr(M)?w.lanes=8:w.lanes=1073741824:w.lanes=1,null):(te=V.children,M=V.fallback,de?(V=w.mode,de=w.child,te={mode:"hidden",children:te},!(V&1)&&de!==null?(de.childLanes=0,de.pendingProps=te):de=gf(te,V,0,null),M=jp(M,V,G,null),de.return=w,M.return=w,de.sibling=M,w.child=de,w.child.memoizedState=Ec(G),w.memoizedState=Ys,M):rf(w,te));if(te=M.memoizedState,te!==null){if(pt=te.dehydrated,pt!==null){if(Ve)return w.flags&256?(w.flags&=-257,id(M,w,G,Error(re(422)))):w.memoizedState!==null?(w.child=M.child,w.flags|=128,null):(de=V.fallback,te=w.mode,V=gf({mode:"visible",children:V.children},te,0,null),de=jp(de,te,G,null),de.flags|=2,V.return=w,de.return=w,V.sibling=de,w.child=V,w.mode&1&&gc(w,M.child,null,G),w.child.memoizedState=Ec(G),w.memoizedState=Ys,de);if(!(w.mode&1))w=id(M,w,G,null);else if(gr(pt))w=id(M,w,G,Error(re(419)));else if(V=(G&M.childLanes)!==0,Wa||V){if(V=Qi,V!==null){switch(G&-G){case 4:de=2;break;case 16:de=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:de=32;break;case 536870912:de=268435456;break;default:de=0}V=de&(V.suspendedLanes|G)?0:de,V!==0&&V!==te.retryLane&&(te.retryLane=V,ec(M,V,-1))}xg(),w=id(M,w,G,Error(re(421)))}else Vn(pt)?(w.flags|=128,w.child=M.child,w=wg.bind(null,M),Xr(pt,w),w=null):(G=te.treeContext,Si&&(_a=wt(pt),Vs=w,Vo=!0,ei=null,Rs=!1,G!==null&&(jl[Hl++]=tp,jl[Hl++]=np,jl[Hl++]=au,tp=G.id,np=G.overflow,au=w)),w=rf(w,w.pendingProps.children),w.flags|=4096);return w}return de?(V=Au(M,w,V.children,V.fallback,G),de=w.child,te=M.child.memoizedState,de.memoizedState=te===null?Ec(G):{baseLanes:te.baseLanes|G,cachePool:null},de.childLanes=M.childLanes&~G,w.memoizedState=Ys,V):(G=Va(M,w,V.children,G),w.memoizedState=null,G)}return de?(V=Au(M,w,V.children,V.fallback,G),de=w.child,te=M.child.memoizedState,de.memoizedState=te===null?Ec(G):{baseLanes:te.baseLanes|G,cachePool:null},de.childLanes=M.childLanes&~G,w.memoizedState=Ys,V):(G=Va(M,w,V.children,G),w.memoizedState=null,G)}function rf(M,w){return w=gf({mode:"visible",children:w},M.mode,0,null),w.return=M,M.child=w}function Va(M,w,G,V){var te=M.child;return M=te.sibling,G=Np(te,{mode:"visible",children:G}),!(w.mode&1)&&(G.lanes=V),G.return=w,G.sibling=null,M!==null&&(V=w.deletions,V===null?(w.deletions=[M],w.flags|=16):V.push(M)),w.child=G}function Au(M,w,G,V,te){var de=w.mode;M=M.child;var Ve=M.sibling,pt={mode:"hidden",children:G};return!(de&1)&&w.child!==M?(G=w.child,G.childLanes=0,G.pendingProps=pt,w.deletions=null):(G=Np(M,pt),G.subtreeFlags=M.subtreeFlags&14680064),Ve!==null?V=Np(Ve,V):(V=jp(V,de,te,null),V.flags|=2),V.return=w,G.return=w,G.sibling=V,w.child=G,V}function id(M,w,G,V){return V!==null&&xp(V),gc(w,M.child,null,G),M=rf(w,w.pendingProps.children),M.flags|=2,w.memoizedState=null,M}function vs(M,w,G){M.lanes|=w;var V=M.alternate;V!==null&&(V.lanes|=w),Xd(M.return,w,G)}function Ra(M,w,G,V,te){var de=M.memoizedState;de===null?M.memoizedState={isBackwards:w,rendering:null,renderingStartTime:0,last:V,tail:G,tailMode:te}:(de.isBackwards=w,de.rendering=null,de.renderingStartTime=0,de.last=V,de.tail=G,de.tailMode=te)}function no(M,w,G){var V=w.pendingProps,te=V.revealOrder,de=V.tail;if(Ea(M,w,V.children,G),V=No.current,V&2)V=V&1|2,w.flags|=128;else{if(M!==null&&M.flags&128)e:for(M=w.child;M!==null;){if(M.tag===13)M.memoizedState!==null&&vs(M,G,w);else if(M.tag===19)vs(M,G,w);else if(M.child!==null){M.child.return=M,M=M.child;continue}if(M===w)break e;for(;M.sibling===null;){if(M.return===null||M.return===w)break e;M=M.return}M.sibling.return=M.return,M=M.sibling}V&=1}if(ao(No,V),!(w.mode&1))w.memoizedState=null;else switch(te){case"forwards":for(G=w.child,te=null;G!==null;)M=G.alternate,M!==null&&uu(M)===null&&(te=G),G=G.sibling;G=te,G===null?(te=w.child,w.child=null):(te=G.sibling,G.sibling=null),Ra(w,!1,te,G,de);break;case"backwards":for(G=null,te=w.child,w.child=null;te!==null;){if(M=te.alternate,M!==null&&uu(M)===null){w.child=te;break}M=te.sibling,te.sibling=G,G=te,te=M}Ra(w,!0,G,null,de);break;case"together":Ra(w,!1,null,null,void 0);break;default:w.memoizedState=null}return w.child}function Gc(M,w,G){if(M!==null&&(w.dependencies=M.dependencies),bu|=w.lanes,!(G&w.childLanes))return null;if(M!==null&&w.child!==M.child)throw Error(re(153));if(w.child!==null){for(M=w.child,G=Np(M,M.pendingProps),w.child=G,G.return=w;M.sibling!==null;)M=M.sibling,G=G.sibling=Np(M,M.pendingProps),G.return=w;G.sibling=null}return w.child}function rh(M,w,G){switch(w.tag){case 3:hg(w),Wl();break;case 5:Zu(w);break;case 1:js(w.type)&&Bs(w);break;case 4:Sp(w,w.stateNode.containerInfo);break;case 10:Wu(w,w.type._context,w.memoizedProps.value);break;case 13:var V=w.memoizedState;if(V!==null)return V.dehydrated!==null?(ao(No,No.current&1),w.flags|=128,null):G&w.child.childLanes?bc(M,w,G):(ao(No,No.current&1),M=Gc(M,w,G),M!==null?M.sibling:null);ao(No,No.current&1);break;case 19:if(V=(G&w.childLanes)!==0,M.flags&128){if(V)return no(M,w,G);w.flags|=128}var te=w.memoizedState;if(te!==null&&(te.rendering=null,te.tail=null,te.lastEffect=null),ao(No,No.current),V)break;return null;case 22:case 23:return w.lanes=0,dg(M,w,G)}return Gc(M,w,G)}function zm(M,w){switch(Vu(w),w.tag){case 1:return js(w.type)&&as(),M=w.flags,M&65536?(w.flags=M&-65537|128,w):null;case 3:return wp(),fo(Ts),fo(qo),lo(),M=w.flags,M&65536&&!(M&128)?(w.flags=M&-65537|128,w):null;case 5:return Vl(w),null;case 13:if(fo(No),M=w.memoizedState,M!==null&&M.dehydrated!==null){if(w.alternate===null)throw Error(re(340));Wl()}return M=w.flags,M&65536?(w.flags=M&-65537|128,w):null;case 19:return fo(No),null;case 4:return wp(),null;case 10:return Kd(w.type._context),null;case 22:case 23:return Ko(),null;case 24:return null;default:return null}}var ih=!1,Mc=!1,l1=typeof WeakSet=="function"?WeakSet:Set,lr=null;function Uc(M,w){var G=M.ref;if(G!==null)if(typeof G=="function")try{G(null)}catch(V){Ia(M,w,V)}else G.current=null}function Dr(M,w,G){try{G()}catch(V){Ia(M,w,V)}}var of=!1;function fg(M,w){for(nt(M.containerInfo),lr=w;lr!==null;)if(M=lr,w=M.child,(M.subtreeFlags&1028)!==0&&w!==null)w.return=M,lr=w;else for(;lr!==null;){M=lr;try{var G=M.alternate;if(M.flags&1024)switch(M.tag){case 0:case 11:case 15:break;case 1:if(G!==null){var V=G.memoizedProps,te=G.memoizedState,de=M.stateNode,Ve=de.getSnapshotBeforeUpdate(M.elementType===M.type?V:Un(M.type,V),te);de.__reactInternalSnapshotBeforeUpdate=Ve}break;case 3:Ur&&Ns(M.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(re(163))}}catch(pt){Ia(M,M.return,pt)}if(w=M.sibling,w!==null){w.return=M.return,lr=w;break}lr=M.return}return G=of,of=!1,G}function Is(M,w,G){var V=w.updateQueue;if(V=V!==null?V.lastEffect:null,V!==null){var te=V=V.next;do{if((te.tag&M)===M){var de=te.destroy;te.destroy=void 0,de!==void 0&&Dr(w,G,de)}te=te.next}while(te!==V)}}function gl(M,w){if(w=w.updateQueue,w=w!==null?w.lastEffect:null,w!==null){var G=w=w.next;do{if((G.tag&M)===M){var V=G.create;G.destroy=V()}G=G.next}while(G!==w)}}function Zl(M){var w=M.ref;if(w!==null){var G=M.stateNode;switch(M.tag){case 5:M=fr(G);break;default:M=G}typeof w=="function"?w(M):w.current=M}}function Qa(M,w,G){if(Hs&&typeof Hs.onCommitFiberUnmount=="function")try{Hs.onCommitFiberUnmount(xl,w)}catch(Ve){}switch(w.tag){case 0:case 11:case 14:case 15:if(M=w.updateQueue,M!==null&&(M=M.lastEffect,M!==null)){var V=M=M.next;do{var te=V,de=te.destroy;te=te.tag,de!==void 0&&(te&2||te&4)&&Dr(w,G,de),V=V.next}while(V!==M)}break;case 1:if(Uc(w,G),M=w.stateNode,typeof M.componentWillUnmount=="function")try{M.props=w.memoizedProps,M.state=w.memoizedState,M.componentWillUnmount()}catch(Ve){Ia(w,G,Ve)}break;case 5:Uc(w,G);break;case 4:Ur?vu(M,w,G):Ci&&Ci&&(w=w.stateNode.containerInfo,G=za(w),ol(w,G))}}function yu(M,w,G){for(var V=w;;)if(Qa(M,V,G),V.child===null||Ur&&V.tag===4){if(V===w)break;for(;V.sibling===null;){if(V.return===null||V.return===w)return;V=V.return}V.sibling.return=V.return,V=V.sibling}else V.child.return=V,V=V.child}function Fs(M){var w=M.alternate;w!==null&&(M.alternate=null,Fs(w)),M.child=null,M.deletions=null,M.sibling=null,M.tag===5&&(w=M.stateNode,w!==null&&Go(w)),M.stateNode=null,M.return=null,M.dependencies=null,M.memoizedProps=null,M.memoizedState=null,M.pendingProps=null,M.stateNode=null,M.updateQueue=null}function mi(M){return M.tag===5||M.tag===3||M.tag===4}function sf(M){e:for(;;){for(;M.sibling===null;){if(M.return===null||mi(M.return))return null;M=M.return}for(M.sibling.return=M.return,M=M.sibling;M.tag!==5&&M.tag!==6&&M.tag!==18;){if(M.flags&2||M.child===null||M.tag===4)continue e;M.child.return=M,M=M.child}if(!(M.flags&2))return M.stateNode}}function ql(M){if(Ur){e:{for(var w=M.return;w!==null;){if(mi(w))break e;w=w.return}throw Error(re(160))}var G=w;switch(G.tag){case 5:w=G.stateNode,G.flags&32&&(Mo(w),G.flags&=-33),G=sf(M),oh(M,G,w);break;case 3:case 4:w=G.stateNode.containerInfo,G=sf(M),od(M,G,w);break;default:throw Error(re(161))}}}function od(M,w,G){var V=M.tag;if(V===5||V===6)M=M.stateNode,w?Gi(G,M,w):El(G,M);else if(V!==4&&(M=M.child,M!==null))for(od(M,w,G),M=M.sibling;M!==null;)od(M,w,G),M=M.sibling}function oh(M,w,G){var V=M.tag;if(V===5||V===6)M=M.stateNode,w?Ca(G,M,w):Gs(G,M);else if(V!==4&&(M=M.child,M!==null))for(oh(M,w,G),M=M.sibling;M!==null;)oh(M,w,G),M=M.sibling}function vu(M,w,G){for(var V=w,te=!1,de,Ve;;){if(!te){te=V.return;e:for(;;){if(te===null)throw Error(re(160));switch(de=te.stateNode,te.tag){case 5:Ve=!1;break e;case 3:de=de.containerInfo,Ve=!0;break e;case 4:de=de.containerInfo,Ve=!0;break e}te=te.return}te=!0}if(V.tag===5||V.tag===6)yu(M,V,G),Ve?ws(de,V.stateNode):Fo(de,V.stateNode);else if(V.tag===18)Ve?Ke(de,V.stateNode):Se(de,V.stateNode);else if(V.tag===4){if(V.child!==null){de=V.stateNode.containerInfo,Ve=!0,V.child.return=V,V=V.child;continue}}else if(Qa(M,V,G),V.child!==null){V.child.return=V,V=V.child;continue}if(V===w)break;for(;V.sibling===null;){if(V.return===null||V.return===w)return;V=V.return,V.tag===4&&(te=!1)}V.sibling.return=V.return,V=V.sibling}}function op(M,w){if(Ur){switch(w.tag){case 0:case 11:case 14:case 15:Is(3,w,w.return),gl(3,w),Is(5,w,w.return);return;case 1:return;case 5:var G=w.stateNode;if(G!=null){var V=w.memoizedProps;M=M!==null?M.memoizedProps:V;var te=w.type,de=w.updateQueue;w.updateQueue=null,de!==null&&ho(G,de,te,M,V,w)}return;case 6:if(w.stateNode===null)throw Error(re(162));G=w.memoizedProps,Ss(w.stateNode,M!==null?M.memoizedProps:G,G);return;case 3:Si&&M!==null&&M.memoizedState.isDehydrated&&Kr(w.stateNode.containerInfo);return;case 12:return;case 13:Il(w);return;case 19:Il(w);return;case 17:return}throw Error(re(163))}switch(w.tag){case 0:case 11:case 14:case 15:Is(3,w,w.return),gl(3,w),Is(5,w,w.return);return;case 12:return;case 13:Il(w);return;case 19:Il(w);return;case 3:Si&&M!==null&&M.memoizedState.isDehydrated&&Kr(w.stateNode.containerInfo);break;case 22:case 23:return}e:if(Ci){switch(w.tag){case 1:case 5:case 6:break e;case 3:case 4:w=w.stateNode,ol(w.containerInfo,w.pendingChildren);break e}throw Error(re(163))}}function Il(M){var w=M.updateQueue;if(w!==null){M.updateQueue=null;var G=M.stateNode;G===null&&(G=M.stateNode=new l1),w.forEach(function(V){var te=fd.bind(null,M,V);G.has(V)||(G.add(V),V.then(te,te))})}}function gg(M,w){for(lr=w;lr!==null;){w=lr;var G=w.deletions;if(G!==null)for(var V=0;V<G.length;V++){var te=G[V];try{var de=M;Ur?vu(de,te,w):yu(de,te,w);var Ve=te.alternate;Ve!==null&&(Ve.return=null),te.return=null}catch(jr){Ia(te,w,jr)}}if(G=w.child,w.subtreeFlags&12854&&G!==null)G.return=w,lr=G;else for(;lr!==null;){w=lr;try{var pt=w.flags;if(pt&32&&Ur&&Mo(w.stateNode),pt&512){var en=w.alternate;if(en!==null){var Nn=en.ref;Nn!==null&&(typeof Nn=="function"?Nn(null):Nn.current=null)}}if(pt&8192)switch(w.tag){case 13:if(w.memoizedState!==null){var Ir=w.alternate;(Ir===null||Ir.memoizedState===null)&&(dd=Ms())}break;case 22:var vi=w.memoizedState!==null,qr=w.alternate,Do=qr!==null&&qr.memoizedState!==null;if(G=w,Ur){e:if(V=G,te=vi,de=null,Ur)for(var Nr=V;;){if(Nr.tag===5){if(de===null){de=Nr;var Fa=Nr.stateNode;te?ta(Fa):Us(Nr.stateNode,Nr.memoizedProps)}}else if(Nr.tag===6){if(de===null){var Ol=Nr.stateNode;te?bl(Ol):na(Ol,Nr.memoizedProps)}}else if((Nr.tag!==22&&Nr.tag!==23||Nr.memoizedState===null||Nr===V)&&Nr.child!==null){Nr.child.return=Nr,Nr=Nr.child;continue}if(Nr===V)break;for(;Nr.sibling===null;){if(Nr.return===null||Nr.return===V)break e;de===Nr&&(de=null),Nr=Nr.return}de===Nr&&(de=null),Nr.sibling.return=Nr.return,Nr=Nr.sibling}}if(vi&&!Do&&G.mode&1){lr=G;for(var Dt=G.child;Dt!==null;){for(G=lr=Dt;lr!==null;){V=lr;var Et=V.child;switch(V.tag){case 0:case 11:case 14:case 15:Is(4,V,V.return);break;case 1:Uc(V,V.return);var Qt=V.stateNode;if(typeof Qt.componentWillUnmount=="function"){var _r=V.return;try{Qt.props=V.memoizedProps,Qt.state=V.memoizedState,Qt.componentWillUnmount()}catch(jr){Ia(V,_r,jr)}}break;case 5:Uc(V,V.return);break;case 22:if(V.memoizedState!==null){ad(G);continue}}Et!==null?(Et.return=V,lr=Et):ad(G)}Dt=Dt.sibling}}}switch(pt&4102){case 2:ql(w),w.flags&=-3;break;case 6:ql(w),w.flags&=-3,op(w.alternate,w);break;case 4096:w.flags&=-4097;break;case 4100:w.flags&=-4097,op(w.alternate,w);break;case 4:op(w.alternate,w)}}catch(jr){Ia(w,w.return,jr)}if(G=w.sibling,G!==null){G.return=w.return,lr=G;break}lr=w.return}}}function af(M,w,G){lr=M,sd(M,w,G)}function sd(M,w,G){for(var V=(M.mode&1)!==0;lr!==null;){var te=lr,de=te.child;if(te.tag===22&&V){var Ve=te.memoizedState!==null||ih;if(!Ve){var pt=te.alternate,en=pt!==null&&pt.memoizedState!==null||Mc;pt=ih;var Nn=Mc;if(ih=Ve,(Mc=en)&&!Nn)for(lr=te;lr!==null;)Ve=lr,en=Ve.child,Ve.tag===22&&Ve.memoizedState!==null?sh(te):en!==null?(en.return=Ve,lr=en):sh(te);for(;de!==null;)lr=de,sd(de,w,G),de=de.sibling;lr=te,ih=pt,Mc=Nn}_u(M,w,G)}else te.subtreeFlags&8772&&de!==null?(de.return=te,lr=de):_u(M,w,G)}}function _u(M){for(;lr!==null;){var w=lr;if(w.flags&8772){var G=w.alternate;try{if(w.flags&8772)switch(w.tag){case 0:case 11:case 15:Mc||gl(5,w);break;case 1:var V=w.stateNode;if(w.flags&4&&!Mc)if(G===null)V.componentDidMount();else{var te=w.elementType===w.type?G.memoizedProps:Un(w.type,G.memoizedProps);V.componentDidUpdate(te,G.memoizedState,V.__reactInternalSnapshotBeforeUpdate)}var de=w.updateQueue;de!==null&&va(w,de,V);break;case 3:var Ve=w.updateQueue;if(Ve!==null){if(G=null,w.child!==null)switch(w.child.tag){case 5:G=fr(w.child.stateNode);break;case 1:G=w.child.stateNode}va(w,Ve,G)}break;case 5:var pt=w.stateNode;G===null&&w.flags&4&&il(pt,w.type,w.memoizedProps,w);break;case 6:break;case 4:break;case 12:break;case 13:if(Si&&w.memoizedState===null){var en=w.alternate;if(en!==null){var Nn=en.memoizedState;if(Nn!==null){var Ir=Nn.dehydrated;Ir!==null&&yr(Ir)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(re(163))}Mc||w.flags&512&&Zl(w)}catch(vi){Ia(w,w.return,vi)}}if(w===M){lr=null;break}if(G=w.sibling,G!==null){G.return=w.return,lr=G;break}lr=w.return}}function ad(M){for(;lr!==null;){var w=lr;if(w===M){lr=null;break}var G=w.sibling;if(G!==null){G.return=w.return,lr=G;break}lr=w.return}}function sh(M){for(;lr!==null;){var w=lr;try{switch(w.tag){case 0:case 11:case 15:var G=w.return;try{gl(4,w)}catch(en){Ia(w,G,en)}break;case 1:var V=w.stateNode;if(typeof V.componentDidMount=="function"){var te=w.return;try{V.componentDidMount()}catch(en){Ia(w,te,en)}}var de=w.return;try{Zl(w)}catch(en){Ia(w,de,en)}break;case 5:var Ve=w.return;try{Zl(w)}catch(en){Ia(w,Ve,en)}}}catch(en){Ia(w,w.return,en)}if(w===M){lr=null;break}var pt=w.sibling;if(pt!==null){pt.return=w.return,lr=pt;break}lr=w.return}}var ld=0,cd=1,Op=2,Dp=3,Oo=4;if(typeof Symbol=="function"&&Symbol.for){var ah=Symbol.for;ld=ah("selector.component"),cd=ah("selector.has_pseudo_class"),Op=ah("selector.role"),Dp=ah("selector.test_id"),Oo=ah("selector.text")}function Nc(M){var w=qi(M);if(w!=null){if(typeof w.memoizedProps["data-testname"]!="string")throw Error(re(364));return w}if(M=gi(M),M===null)throw Error(re(362));return M.stateNode.current}function Fl(M,w){switch(w.$$typeof){case ld:if(M.type===w.value)return!0;break;case cd:e:{w=w.value,M=[M,0];for(var G=0;G<M.length;){var V=M[G++],te=M[G++],de=w[te];if(V.tag!==5||!ss(V)){for(;de!=null&&Fl(V,de);)te++,de=w[te];if(te===w.length){w=!0;break e}else for(V=V.child;V!==null;)M.push(V,te),V=V.sibling}}w=!1}return w;case Op:if(M.tag===5&&yo(M.stateNode,w.value))return!0;break;case Oo:if((M.tag===5||M.tag===6)&&(M=bs(M),M!==null&&0<=M.indexOf(w.value)))return!0;break;case Dp:if(M.tag===5&&(M=M.memoizedProps["data-testname"],typeof M=="string"&&M.toLowerCase()===w.value.toLowerCase()))return!0;break;default:throw Error(re(365))}return!1}function Lp(M){switch(M.$$typeof){case ld:return"<"+(xt(M.value)||"Unknown")+">";case cd:return":has("+(Lp(M)||"")+")";case Op:return'[role="'+M.value+'"]';case Oo:return'"'+M.value+'"';case Dp:return'[data-testname="'+M.value+'"]';default:throw Error(re(365))}}function ca(M,w){var G=[];M=[M,0];for(var V=0;V<M.length;){var te=M[V++],de=M[V++],Ve=w[de];if(te.tag!==5||!ss(te)){for(;Ve!=null&&Fl(te,Ve);)de++,Ve=w[de];if(de===w.length)G.push(te);else for(te=te.child;te!==null;)M.push(te,de),te=te.sibling}}return G}function lf(M,w){if(!$i)throw Error(re(363));M=Nc(M),M=ca(M,w),w=[],M=Array.from(M);for(var G=0;G<M.length;){var V=M[G++];if(V.tag===5)ss(V)||w.push(V.stateNode);else for(V=V.child;V!==null;)M.push(V),V=V.sibling}return w}var pd=Math.ceil,lh=Q.ReactCurrentDispatcher,Gm=Q.ReactCurrentOwner,Os=Q.ReactCurrentBatchConfig,ai=0,Qi=null,Ji=null,_s=0,pa=0,Eu=ms(0),Es=0,ud=null,bu=0,cf=0,mg=0,$l=null,Js=null,dd=0,ch=1/0;function Mu(){ch=Ms()+500}var Ag=!1,Pp=null,xu=null,hd=!1,kp=null,ph=0,Cu=0,Um=null,yg=-1,vg=0;function Ka(){return ai&6?Ms():yg!==-1?yg:yg=Ms()}function Su(M){return M.mode&1?ai&2&&_s!==0?_s&-_s:ag.transition!==null?(vg===0&&(M=Dc,Dc<<=1,!(Dc&4194240)&&(Dc=64),vg=M),vg):(M=Li,M!==0?M:Eo()):1}function ec(M,w,G){if(50<Cu)throw Cu=0,Um=null,Error(re(185));var V=pf(M,w);return V===null?null:(Nl(V,w,G),(!(ai&2)||V!==Qi)&&(V===Qi&&(!(ai&2)&&(cf|=w),Es===4&&zp(V,_s)),Ni(V,G),w===1&&ai===0&&!(M.mode&1)&&(Mu(),Qd&&Lc())),V)}function pf(M,w){M.lanes|=w;var G=M.alternate;for(G!==null&&(G.lanes|=w),G=M,M=M.return;M!==null;)M.childLanes|=w,G=M.alternate,G!==null&&(G.childLanes|=w),G=M,M=M.return;return G.tag===3?G.stateNode:null}function Ni(M,w){var G=M.callbackNode;YA(M,w);var V=Hu(M,M===Qi?_s:0);if(V===0)G!==null&&Qn(G),M.callbackNode=null,M.callbackPriority=0;else if(w=V&-V,M.callbackPriority!==w){if(G!=null&&Qn(G),w===1)M.tag===0?Fm(xs.bind(null,M)):cc(xs.bind(null,M)),Wo?Io(function(){ai===0&&Lc()}):Ml(Zc,Lc),G=null;else{switch(Nh(V)){case 1:G=Zc;break;case 4:G=iu;break;case 16:G=jh;break;case 536870912:G=og;break;default:G=jh}G=Bg(G,_g.bind(null,M))}M.callbackPriority=w,M.callbackNode=G}}function _g(M,w){if(yg=-1,vg=0,ai&6)throw Error(re(327));var G=M.callbackNode;if(wu()&&M.callbackNode!==G)return null;var V=Hu(M,M===Qi?_s:0);if(V===0)return null;if(V&30||V&M.expiredLanes||w)w=df(M,V);else{w=V;var te=ai;ai|=2;var de=Nm();(Qi!==M||_s!==w)&&(Mu(),Gp(M,w));do try{u1();break}catch(pt){Mg(M,pt)}while(1);pc(),lh.current=de,ai=te,Ji!==null?w=0:(Qi=null,_s=0,w=Es)}if(w!==0){if(w===2&&(te=Wd(M),te!==0&&(V=te,w=uf(M,te))),w===1)throw G=ud,Gp(M,0),zp(M,V),Ni(M,Ms()),G;if(w===6)zp(M,V);else{if(te=M.current.alternate,!(V&30)&&!c1(te)&&(w=df(M,V),w===2&&(de=Wd(M),de!==0&&(V=de,w=uf(M,de))),w===1))throw G=ud,Gp(M,0),zp(M,V),Ni(M,Ms()),G;switch(M.finishedWork=te,M.finishedLanes=V,w){case 0:case 1:throw Error(re(345));case 2:Up(M,Js);break;case 3:if(zp(M,V),(V&130023424)===V&&(w=dd+500-Ms(),10<w)){if(Hu(M,0)!==0)break;if(te=M.suspendedLanes,(te&V)!==V){Ka(),M.pingedLanes|=M.suspendedLanes&te;break}M.timeoutHandle=or(Up.bind(null,M,Js),w);break}Up(M,Js);break;case 4:if(zp(M,V),(V&4194240)===V)break;for(w=M.eventTimes,te=-1;0<V;){var Ve=31-ra(V);de=1<<Ve,Ve=w[Ve],Ve>te&&(te=Ve),V&=~de}if(V=te,V=Ms()-V,V=(120>V?120:480>V?480:1080>V?1080:1920>V?1920:3e3>V?3e3:4320>V?4320:1960*pd(V/1960))-V,10<V){M.timeoutHandle=or(Up.bind(null,M,Js),V);break}Up(M,Js);break;case 5:Up(M,Js);break;default:throw Error(re(329))}}}return Ni(M,Ms()),M.callbackNode===G?_g.bind(null,M):null}function uf(M,w){var G=$l;return M.current.memoizedState.isDehydrated&&(Gp(M,w).flags|=256),M=df(M,w),M!==2&&(w=Js,Js=G,w!==null&&Eg(w)),M}function Eg(M){Js===null?Js=M:Js.push.apply(Js,M)}function c1(M){for(var w=M;;){if(w.flags&16384){var G=w.updateQueue;if(G!==null&&(G=G.stores,G!==null))for(var V=0;V<G.length;V++){var te=G[V],de=te.getSnapshot;te=te.value;try{if(!lc(de(),te))return!1}catch(Ve){return!1}}}if(G=w.child,w.subtreeFlags&16384&&G!==null)G.return=w,w=G;else{if(w===M)break;for(;w.sibling===null;){if(w.return===null||w.return===M)return!0;w=w.return}w.sibling.return=w.return,w=w.sibling}}return!0}function zp(M,w){for(w&=~mg,w&=~cf,M.suspendedLanes|=w,M.pingedLanes&=~w,M=M.expirationTimes;0<w;){var G=31-ra(w),V=1<<G;M[G]=-1,w&=~V}}function xs(M){if(ai&6)throw Error(re(327));wu();var w=Hu(M,0);if(!(w&1))return Ni(M,Ms()),null;var G=df(M,w);if(M.tag!==0&&G===2){var V=Wd(M);V!==0&&(w=V,G=uf(M,V))}if(G===1)throw G=ud,Gp(M,0),zp(M,w),Ni(M,Ms()),G;if(G===6)throw Error(re(345));return M.finishedWork=M.current.alternate,M.finishedLanes=w,Up(M,Js),Ni(M,Ms()),null}function bg(M){kp!==null&&kp.tag===0&&!(ai&6)&&wu();var w=ai;ai|=1;var G=Os.transition,V=Li;try{if(Os.transition=null,Li=1,M)return M()}finally{Li=V,Os.transition=G,ai=w,!(ai&6)&&Lc()}}function Ko(){pa=Eu.current,fo(Eu)}function Gp(M,w){M.finishedWork=null,M.finishedLanes=0;var G=M.timeoutHandle;if(G!==Or&&(M.timeoutHandle=Or,pr(G)),Ji!==null)for(G=Ji.return;G!==null;){var V=G;switch(Vu(V),V.tag){case 1:V=V.type.childContextTypes,V!=null&&as();break;case 3:wp(),fo(Ts),fo(qo),lo();break;case 5:Vl(V);break;case 4:wp();break;case 13:fo(No);break;case 19:fo(No);break;case 10:Kd(V.type._context);break;case 22:case 23:Ko()}G=G.return}if(Qi=M,Ji=M=Np(M.current,null),_s=pa=w,Es=0,ud=null,mg=cf=bu=0,Js=$l=null,uc!==null){for(w=0;w<uc.length;w++)if(G=uc[w],V=G.interleaved,V!==null){G.interleaved=null;var te=V.next,de=G.pending;if(de!==null){var Ve=de.next;de.next=te,V.next=Ve}G.pending=V}uc=null}return M}function Mg(M,w){do{var G=Ji;try{if(pc(),pl.current=Rl,aa){for(var V=es.memoizedState;V!==null;){var te=V.queue;te!==null&&(te.pending=null),V=V.next}aa=!1}if(du=0,sa=oa=es=null,je=!1,Tp=0,Gm.current=null,G===null||G.return===null){Es=1,ud=w,Ji=null;break}e:{var de=M,Ve=G.return,pt=G,en=w;if(w=_s,pt.flags|=32768,en!==null&&typeof en=="object"&&typeof en.then=="function"){var Nn=en,Ir=pt,vi=Ir.tag;if(!(Ir.mode&1)&&(vi===0||vi===11||vi===15)){var qr=Ir.alternate;qr?(Ir.updateQueue=qr.updateQueue,Ir.memoizedState=qr.memoizedState,Ir.lanes=qr.lanes):(Ir.updateQueue=null,Ir.memoizedState=null)}var Do=pg(Ve);if(Do!==null){Do.flags&=-257,ug(Do,Ve,pt,de,w),Do.mode&1&&Pm(de,Nn,w),w=Do,en=Nn;var Nr=w.updateQueue;if(Nr===null){var Fa=new Set;Fa.add(en),w.updateQueue=Fa}else Nr.add(en);break e}else{if(!(w&1)){Pm(de,Nn,w),xg();break e}en=Error(re(426))}}else if(Vo&&pt.mode&1){var Ol=pg(Ve);if(Ol!==null){!(Ol.flags&65536)&&(Ol.flags|=256),ug(Ol,Ve,pt,de,w),xp(en);break e}}de=en,Es!==4&&(Es=2),$l===null?$l=[de]:$l.push(de),en=zc(en,pt),pt=Ve;do{switch(pt.tag){case 3:pt.flags|=65536,w&=-w,pt.lanes|=w;var Dt=ip(pt,en,w);$c(pt,Dt);break e;case 1:de=en;var Et=pt.type,Qt=pt.stateNode;if(!(pt.flags&128)&&(typeof Et.getDerivedStateFromError=="function"||Qt!==null&&typeof Qt.componentDidCatch=="function"&&(xu===null||!xu.has(Qt)))){pt.flags|=65536,w&=-w,pt.lanes|=w;var _r=cg(pt,de,w);$c(pt,_r);break e}}pt=pt.return}while(pt!==null)}uh(G)}catch(jr){w=jr,Ji===G&&G!==null&&(Ji=G=G.return);continue}break}while(1)}function Nm(){var M=lh.current;return lh.current=Rl,M===null?Rl:M}function xg(){(Es===0||Es===3||Es===2)&&(Es=4),Qi===null||!(bu&268435455)&&!(cf&268435455)||zp(Qi,_s)}function df(M,w){var G=ai;ai|=2;var V=Nm();Qi===M&&_s===w||Gp(M,w);do try{p1();break}catch(te){Mg(M,te)}while(1);if(pc(),ai=G,lh.current=V,Ji!==null)throw Error(re(261));return Qi=null,_s=0,Es}function p1(){for(;Ji!==null;)jm(Ji)}function u1(){for(;Ji!==null&&!al();)jm(Ji)}function jm(M){var w=Tg(M.alternate,M,pa);M.memoizedProps=M.pendingProps,w===null?uh(M):Ji=w,Gm.current=null}function uh(M){var w=M;do{var G=w.alternate;if(M=w.return,w.flags&32768){if(G=zm(G,w),G!==null){G.flags&=32767,Ji=G;return}if(M!==null)M.flags|=32768,M.subtreeFlags=0,M.deletions=null;else{Es=6,Ji=null;return}}else if(G=nd(G,w,pa),G!==null){Ji=G;return}if(w=w.sibling,w!==null){Ji=w;return}Ji=w=M}while(w!==null);Es===0&&(Es=5)}function Up(M,w){var G=Li,V=Os.transition;try{Os.transition=null,Li=1,d1(M,w,G)}finally{Os.transition=V,Li=G}return null}function d1(M,w,G){do wu();while(kp!==null);if(ai&6)throw Error(re(327));var V=M.finishedWork,te=M.finishedLanes;if(V===null)return null;if(M.finishedWork=null,M.finishedLanes=0,V===M.current)throw Error(re(177));M.callbackNode=null,M.callbackPriority=0;var de=V.lanes|V.childLanes;if(Im(M,de),M===Qi&&(Ji=Qi=null,_s=0),!(V.subtreeFlags&2064)&&!(V.flags&2064)||hd||(hd=!0,Bg(jh,function(){return wu(),null})),de=(V.flags&15990)!==0,V.subtreeFlags&15990||de){de=Os.transition,Os.transition=null;var Ve=Li;Li=1;var pt=ai;ai|=4,Gm.current=null,fg(M,V),gg(M,V,te),St(M.containerInfo),M.current=V,af(V,M,te),ru(),ai=pt,Li=Ve,Os.transition=de}else M.current=V;if(hd&&(hd=!1,kp=M,ph=te),de=M.pendingLanes,de===0&&(xu=null),sg(V.stateNode,G),Ni(M,Ms()),w!==null)for(G=M.onRecoverableError,V=0;V<w.length;V++)G(w[V]);if(Ag)throw Ag=!1,M=Pp,Pp=null,M;return ph&1&&M.tag!==0&&wu(),de=M.pendingLanes,de&1?M===Um?Cu++:(Cu=0,Um=M):Cu=0,Lc(),null}function wu(){if(kp!==null){var M=Nh(ph),w=Os.transition,G=Li;try{if(Os.transition=null,Li=16>M?16:M,kp===null)var V=!1;else{if(M=kp,kp=null,ph=0,ai&6)throw Error(re(331));var te=ai;for(ai|=4,lr=M.current;lr!==null;){var de=lr,Ve=de.child;if(lr.flags&16){var pt=de.deletions;if(pt!==null){for(var en=0;en<pt.length;en++){var Nn=pt[en];for(lr=Nn;lr!==null;){var Ir=lr;switch(Ir.tag){case 0:case 11:case 15:Is(8,Ir,de)}var vi=Ir.child;if(vi!==null)vi.return=Ir,lr=vi;else for(;lr!==null;){Ir=lr;var qr=Ir.sibling,Do=Ir.return;if(Fs(Ir),Ir===Nn){lr=null;break}if(qr!==null){qr.return=Do,lr=qr;break}lr=Do}}}var Nr=de.alternate;if(Nr!==null){var Fa=Nr.child;if(Fa!==null){Nr.child=null;do{var Ol=Fa.sibling;Fa.sibling=null,Fa=Ol}while(Fa!==null)}}lr=de}}if(de.subtreeFlags&2064&&Ve!==null)Ve.return=de,lr=Ve;else e:for(;lr!==null;){if(de=lr,de.flags&2048)switch(de.tag){case 0:case 11:case 15:Is(9,de,de.return)}var Dt=de.sibling;if(Dt!==null){Dt.return=de.return,lr=Dt;break e}lr=de.return}}var Et=M.current;for(lr=Et;lr!==null;){Ve=lr;var Qt=Ve.child;if(Ve.subtreeFlags&2064&&Qt!==null)Qt.return=Ve,lr=Qt;else e:for(Ve=Et;lr!==null;){if(pt=lr,pt.flags&2048)try{switch(pt.tag){case 0:case 11:case 15:gl(9,pt)}}catch(jr){Ia(pt,pt.return,jr)}if(pt===Ve){lr=null;break e}var _r=pt.sibling;if(_r!==null){_r.return=pt.return,lr=_r;break e}lr=pt.return}}if(ai=te,Lc(),Hs&&typeof Hs.onPostCommitFiberRoot=="function")try{Hs.onPostCommitFiberRoot(xl,M)}catch(jr){}V=!0}return V}finally{Li=G,Os.transition=w}}return!1}function Cg(M,w,G){w=zc(G,w),w=ip(M,w,1),As(M,w),w=Ka(),M=pf(M,1),M!==null&&(Nl(M,1,w),Ni(M,w))}function Ia(M,w,G){if(M.tag===3)Cg(M,M,G);else for(;w!==null;){if(w.tag===3){Cg(w,M,G);break}else if(w.tag===1){var V=w.stateNode;if(typeof w.type.getDerivedStateFromError=="function"||typeof V.componentDidCatch=="function"&&(xu===null||!xu.has(V))){M=zc(G,M),M=cg(w,M,1),As(w,M),M=Ka(),w=pf(w,1),w!==null&&(Nl(w,1,M),Ni(w,M));break}}w=w.return}}function h1(M,w,G){var V=M.pingCache;V!==null&&V.delete(w),w=Ka(),M.pingedLanes|=M.suspendedLanes&G,Qi===M&&(_s&G)===G&&(Es===4||Es===3&&(_s&130023424)===_s&&500>Ms()-dd?Gp(M,0):mg|=G),Ni(M,w)}function Sg(M,w){w===0&&(M.mode&1?(w=eu,eu<<=1,!(eu&130023424)&&(eu=4194304)):w=1);var G=Ka();M=pf(M,w),M!==null&&(Nl(M,w,G),Ni(M,G))}function wg(M){var w=M.memoizedState,G=0;w!==null&&(G=w.retryLane),Sg(M,G)}function fd(M,w){var G=0;switch(M.tag){case 13:var V=M.stateNode,te=M.memoizedState;te!==null&&(G=te.retryLane);break;case 19:V=M.stateNode;break;default:throw Error(re(314))}V!==null&&V.delete(w),Sg(M,G)}var Tg;Tg=function(M,w,G){if(M!==null)if(M.memoizedProps!==w.pendingProps||Ts.current)Wa=!0;else{if(!(M.lanes&G)&&!(w.flags&128))return Wa=!1,rh(M,w,G);Wa=!!(M.flags&131072)}else Wa=!1,Vo&&w.flags&1048576&&Dm(w,Xh,w.index);switch(w.lanes=0,w.tag){case 2:var V=w.type;M!==null&&(M.alternate=null,w.alternate=null,w.flags|=2),M=w.pendingProps;var te=Ga(w,qo.current);su(w,G),te=Ac(null,w,V,M,te,G);var de=yc();return w.flags|=1,typeof te=="object"&&te!==null&&typeof te.render=="function"&&te.$$typeof===void 0?(w.tag=1,w.memoizedState=null,w.updateQueue=null,js(V)?(de=!0,Bs(w)):de=!1,w.memoizedState=te.state!==null&&te.state!==void 0?te.state:null,Wh(w),te.updater=hc,w.stateNode=te,te._reactInternals=w,Sl(w,V,M,G),w=nh(null,w,V,!0,de,G)):(w.tag=0,Vo&&de&&Yd(w),Ea(null,w,te,G),w=w.child),w;case 16:V=w.elementType;e:{switch(M!==null&&(M.alternate=null,w.alternate=null,w.flags|=2),M=w.pendingProps,te=V._init,V=te(V._payload),w.type=V,te=w.tag=hf(V),M=Un(V,M),te){case 0:w=rd(null,w,V,M,G);break e;case 1:w=fl(null,w,V,M,G);break e;case 11:w=nf(null,w,V,M,G);break e;case 14:w=mu(null,w,V,Un(V.type,M),G);break e}throw Error(re(306,V,""))}return w;case 0:return V=w.type,te=w.pendingProps,te=w.elementType===V?te:Un(V,te),rd(M,w,V,te,G);case 1:return V=w.type,te=w.pendingProps,te=w.elementType===V?te:Un(V,te),fl(M,w,V,te,G);case 3:e:{if(hg(w),M===null)throw Error(re(387));V=w.pendingProps,de=w.memoizedState,te=de.element,dc(M,w),wa(w,V,null,G);var Ve=w.memoizedState;if(V=Ve.element,Si&&de.isDehydrated)if(de={element:V,isDehydrated:!1,cache:Ve.cache,transitions:Ve.transitions},w.updateQueue.baseState=de,w.memoizedState=de,w.flags&256){te=Error(re(423)),w=br(M,w,V,G,te);break e}else if(V!==te){te=Error(re(424)),w=br(M,w,V,G,te);break e}else for(Si&&(_a=Sr(w.stateNode.containerInfo),Vs=w,Vo=!0,ei=null,Rs=!1),G=Cp(w,null,V,G),w.child=G;G;)G.flags=G.flags&-3|4096,G=G.sibling;else{if(Wl(),V===te){w=Gc(M,w,G);break e}Ea(M,w,V,G)}w=w.child}return w;case 5:return Zu(w),M===null&&Jd(w),V=w.type,te=w.pendingProps,de=M!==null?M.memoizedProps:null,Ve=te.children,kt(V,te)?Ve=null:de!==null&&kt(V,de)&&(w.flags|=32),Xs(M,w),Ea(M,w,Ve,G),w.child;case 6:return M===null&&Jd(w),null;case 13:return bc(M,w,G);case 4:return Sp(w,w.stateNode.containerInfo),V=w.pendingProps,M===null?w.child=gc(w,null,V,G):Ea(M,w,V,G),w.child;case 11:return V=w.type,te=w.pendingProps,te=w.elementType===V?te:Un(V,te),nf(M,w,V,te,G);case 7:return Ea(M,w,w.pendingProps,G),w.child;case 8:return Ea(M,w,w.pendingProps.children,G),w.child;case 12:return Ea(M,w,w.pendingProps.children,G),w.child;case 10:e:{if(V=w.type._context,te=w.pendingProps,de=w.memoizedProps,Ve=te.value,Wu(w,V,Ve),de!==null)if(lc(de.value,Ve)){if(de.children===te.children&&!Ts.current){w=Gc(M,w,G);break e}}else for(de=w.child,de!==null&&(de.return=w);de!==null;){var pt=de.dependencies;if(pt!==null){Ve=de.child;for(var en=pt.firstContext;en!==null;){if(en.context===V){if(de.tag===1){en=ja(-1,G&-G),en.tag=2;var Nn=de.updateQueue;if(Nn!==null){Nn=Nn.shared;var Ir=Nn.pending;Ir===null?en.next=en:(en.next=Ir.next,Ir.next=en),Nn.pending=en}}de.lanes|=G,en=de.alternate,en!==null&&(en.lanes|=G),Xd(de.return,G,w),pt.lanes|=G;break}en=en.next}}else if(de.tag===10)Ve=de.type===w.type?null:de.child;else if(de.tag===18){if(Ve=de.return,Ve===null)throw Error(re(341));Ve.lanes|=G,pt=Ve.alternate,pt!==null&&(pt.lanes|=G),Xd(Ve,G,w),Ve=de.sibling}else Ve=de.child;if(Ve!==null)Ve.return=de;else for(Ve=de;Ve!==null;){if(Ve===w){Ve=null;break}if(de=Ve.sibling,de!==null){de.return=Ve.return,Ve=de;break}Ve=Ve.return}de=Ve}Ea(M,w,te.children,G),w=w.child}return w;case 9:return te=w.type,V=w.pendingProps.children,su(w,G),te=Ws(te),V=V(te),w.flags|=1,Ea(M,w,V,G),w.child;case 14:return V=w.type,te=Un(V,w.pendingProps),te=Un(V.type,te),mu(M,w,V,te,G);case 15:return Ks(M,w,w.type,w.pendingProps,G);case 17:return V=w.type,te=w.pendingProps,te=w.elementType===V?te:Un(V,te),M!==null&&(M.alternate=null,w.alternate=null,w.flags|=2),w.tag=1,js(V)?(M=!0,Bs(w)):M=!1,su(w,G),ls(w,V,te),Sl(w,V,te,G),nh(null,w,V,!0,M,G);case 19:return no(M,w,G);case 22:return dg(M,w,G)}throw Error(re(156,w.tag))};function Bg(M,w){return Ml(M,w)}function Hm(M,w,G,V){this.tag=M,this.key=G,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=w,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=V,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function tc(M,w,G,V){return new Hm(M,w,G,V)}function Rg(M){return M=M.prototype,!(!M||!M.isReactComponent)}function hf(M){if(typeof M=="function")return Rg(M)?1:0;if(M!=null){if(M=M.$$typeof,M===gt)return 11;if(M===ot)return 14}return 2}function Np(M,w){var G=M.alternate;return G===null?(G=tc(M.tag,w,M.key,M.mode),G.elementType=M.elementType,G.type=M.type,G.stateNode=M.stateNode,G.alternate=M,M.alternate=G):(G.pendingProps=w,G.type=M.type,G.flags=0,G.subtreeFlags=0,G.deletions=null),G.flags=M.flags&14680064,G.childLanes=M.childLanes,G.lanes=M.lanes,G.child=M.child,G.memoizedProps=M.memoizedProps,G.memoizedState=M.memoizedState,G.updateQueue=M.updateQueue,w=M.dependencies,G.dependencies=w===null?null:{lanes:w.lanes,firstContext:w.firstContext},G.sibling=M.sibling,G.index=M.index,G.ref=M.ref,G}function ff(M,w,G,V,te,de){var Ve=2;if(V=M,typeof M=="function")Rg(M)&&(Ve=1);else if(typeof M=="string")Ve=5;else e:switch(M){case st:return jp(G.children,te,de,w);case Pe:Ve=8,te|=8;break;case Oe:return M=tc(12,G,w,te|2),M.elementType=Oe,M.lanes=de,M;case at:return M=tc(13,G,w,te),M.elementType=at,M.lanes=de,M;case ut:return M=tc(19,G,w,te),M.elementType=ut,M.lanes=de,M;case Mt:return gf(G,te,de,w);default:if(typeof M=="object"&&M!==null)switch(M.$$typeof){case Ze:Ve=10;break e;case rt:Ve=9;break e;case gt:Ve=11;break e;case ot:Ve=14;break e;case Rt:Ve=16,V=null;break e}throw Error(re(130,M==null?M:typeof M,""))}return w=tc(Ve,G,w,te),w.elementType=M,w.type=V,w.lanes=de,w}function jp(M,w,G,V){return M=tc(7,M,V,w),M.lanes=G,M}function gf(M,w,G,V){return M=tc(22,M,V,w),M.elementType=Mt,M.lanes=G,M.stateNode={},M}function mf(M,w,G){return M=tc(6,M,null,w),M.lanes=G,M}function Ig(M,w,G){return w=tc(4,M.children!==null?M.children:[],M.key,w),w.lanes=G,w.stateNode={containerInfo:M.containerInfo,pendingChildren:null,implementation:M.implementation},w}function dh(M,w,G,V,te){this.tag=w,this.containerInfo=M,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Or,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nu(0),this.expirationTimes=nu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nu(0),this.identifierPrefix=V,this.onRecoverableError=te,Si&&(this.mutableSourceEagerHydrationData=null)}function Wm(M,w,G,V,te,de,Ve,pt,en){return M=new dh(M,w,G,pt,en),w===1?(w=1,de===!0&&(w|=8)):w=0,de=tc(3,null,null,w),M.current=de,de.stateNode=M,de.memoizedState={element:V,isDehydrated:G,cache:null,transitions:null},Wh(de),M}function Fg(M){if(!M)return sl;M=M._reactInternals;e:{if(Mn(M)!==M||M.tag!==1)throw Error(re(170));var w=M;do{switch(w.tag){case 3:w=w.stateNode.context;break e;case 1:if(js(w.type)){w=w.stateNode.__reactInternalMemoizedMergedChildContext;break e}}w=w.return}while(w!==null);throw Error(re(171))}if(M.tag===1){var G=M.type;if(js(G))return bp(M,G,w)}return w}function Og(M){var w=M._reactInternals;if(w===void 0)throw typeof M.render=="function"?Error(re(188)):(M=Object.keys(M).join(","),Error(re(268,M)));return M=rn(w),M===null?null:M.stateNode}function Vm(M,w){if(M=M.memoizedState,M!==null&&M.dehydrated!==null){var G=M.retryLane;M.retryLane=G!==0&&G<w?G:w}}function sp(M,w){Vm(M,w),(M=M.alternate)&&Vm(M,w)}function Qm(M){return M=rn(M),M===null?null:M.stateNode}function f1(){return null}return i.attemptContinuousHydration=function(M){if(M.tag===13){var w=Ka();ec(M,134217728,w),sp(M,134217728)}},i.attemptHydrationAtCurrentPriority=function(M){if(M.tag===13){var w=Ka(),G=Su(M);ec(M,G,w),sp(M,G)}},i.attemptSynchronousHydration=function(M){switch(M.tag){case 3:var w=M.stateNode;if(w.current.memoizedState.isDehydrated){var G=tu(w.pendingLanes);G!==0&&(Uh(w,G|1),Ni(w,Ms()),!(ai&6)&&(Mu(),Lc()))}break;case 13:var V=Ka();bg(function(){return ec(M,1,V)}),sp(M,1)}},i.batchedUpdates=function(M,w){var G=ai;ai|=1;try{return M(w)}finally{ai=G,ai===0&&(Mu(),Qd&&Lc())}},i.createComponentSelector=function(M){return{$$typeof:ld,value:M}},i.createContainer=function(M,w,G,V,te,de,Ve){return Wm(M,w,!1,null,G,V,te,de,Ve)},i.createHasPseudoClassSelector=function(M){return{$$typeof:cd,value:M}},i.createHydrationContainer=function(M,w,G,V,te,de,Ve,pt,en){return M=Wm(G,V,!0,M,te,de,Ve,pt,en),M.context=Fg(null),G=M.current,V=Ka(),te=Su(G),de=ja(V,te),de.callback=w!=null?w:null,As(G,de),M.current.lanes=te,Nl(M,te,V),Ni(M,V),M},i.createPortal=function(M,w,G){var V=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pe,key:V==null?null:""+V,children:M,containerInfo:w,implementation:G}},i.createRoleSelector=function(M){return{$$typeof:Op,value:M}},i.createTestNameSelector=function(M){return{$$typeof:Dp,value:M}},i.createTextSelector=function(M){return{$$typeof:Oo,value:M}},i.deferredUpdates=function(M){var w=Li,G=Os.transition;try{return Os.transition=null,Li=16,M()}finally{Li=w,Os.transition=G}},i.discreteUpdates=function(M,w,G,V,te){var de=Li,Ve=Os.transition;try{return Os.transition=null,Li=1,M(w,G,V,te)}finally{Li=de,Os.transition=Ve,ai===0&&Mu()}},i.findAllNodes=lf,i.findBoundingRects=function(M,w){if(!$i)throw Error(re(363));w=lf(M,w),M=[];for(var G=0;G<w.length;G++)M.push(bo(w[G]));for(w=M.length-1;0<w;w--){G=M[w];for(var V=G.x,te=V+G.width,de=G.y,Ve=de+G.height,pt=w-1;0<=pt;pt--)if(w!==pt){var en=M[pt],Nn=en.x,Ir=Nn+en.width,vi=en.y,qr=vi+en.height;if(V>=Nn&&de>=vi&&te<=Ir&&Ve<=qr){M.splice(w,1);break}else if(V!==Nn||G.width!==en.width||qr<de||vi>Ve){if(!(de!==vi||G.height!==en.height||Ir<V||Nn>te)){Nn>V&&(en.width+=Nn-V,en.x=V),Ir<te&&(en.width=te-Nn),M.splice(w,1);break}}else{vi>de&&(en.height+=vi-de,en.y=de),qr<Ve&&(en.height=Ve-vi),M.splice(w,1);break}}}return M},i.findHostInstance=Og,i.findHostInstanceWithNoPortals=function(M){return M=mt(M),M=M!==null?On(M):null,M===null?null:M.stateNode},i.findHostInstanceWithWarning=function(M){return Og(M)},i.flushControlled=function(M){var w=ai;ai|=1;var G=Os.transition,V=Li;try{Os.transition=null,Li=1,M()}finally{Li=V,Os.transition=G,ai=w,ai===0&&(Mu(),Lc())}},i.flushPassiveEffects=wu,i.flushSync=bg,i.focusWithin=function(M,w){if(!$i)throw Error(re(363));for(M=Nc(M),w=ca(M,w),w=Array.from(w),M=0;M<w.length;){var G=w[M++];if(!ss(G)){if(G.tag===5&&Aa(G.stateNode))return!0;for(G=G.child;G!==null;)w.push(G),G=G.sibling}}return!1},i.getCurrentUpdatePriority=function(){return Li},i.getFindAllNodesFailureDescription=function(M,w){if(!$i)throw Error(re(363));var G=0,V=[];M=[Nc(M),0];for(var te=0;te<M.length;){var de=M[te++],Ve=M[te++],pt=w[Ve];if((de.tag!==5||!ss(de))&&(Fl(de,pt)&&(V.push(Lp(pt)),Ve++,Ve>G&&(G=Ve)),Ve<w.length))for(de=de.child;de!==null;)M.push(de,Ve),de=de.sibling}if(G<w.length){for(M=[];G<w.length;G++)M.push(Lp(w[G]));return`findAllNodes was able to match part of the selector:
  `+(V.join(" > ")+`

No matching component was found for:
  `)+M.join(" > ")}return null},i.getPublicRootInstance=function(M){if(M=M.current,!M.child)return null;switch(M.child.tag){case 5:return fr(M.child.stateNode);default:return M.child.stateNode}},i.injectIntoDevTools=function(M){if(M={bundleType:M.bundleType,version:M.version,rendererPackageName:M.rendererPackageName,rendererConfig:M.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Q.ReactCurrentDispatcher,findHostInstanceByFiber:Qm,findFiberByHostInstance:M.findFiberByHostInstance||f1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")M=!1;else{var w=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(w.isDisabled||!w.supportsFiber)M=!0;else{try{xl=w.inject(M),Hs=w}catch(G){}M=!!w.checkDCE}}return M},i.isAlreadyRendering=function(){return!1},i.observeVisibleRects=function(M,w,G,V){if(!$i)throw Error(re(363));M=lf(M,w);var te=Vi(M,G,V).disconnect;return{disconnect:function(){te()}}},i.registerMutableSourceForHydration=function(M,w){var G=w._getVersion;G=G(w._source),M.mutableSourceEagerHydrationData==null?M.mutableSourceEagerHydrationData=[w,G]:M.mutableSourceEagerHydrationData.push(w,G)},i.runWithPriority=function(M,w){var G=Li;try{return Li=M,w()}finally{Li=G}},i.shouldError=function(){return null},i.shouldSuspend=function(){return!1},i.updateContainer=function(M,w,G,V){var te=w.current,de=Ka(),Ve=Su(te);return G=Fg(G),w.context===null?w.context=G:w.pendingContext=G,w=ja(de,Ve),w.payload={element:M},V=V===void 0?null:V,V!==null&&(w.callback=V),As(te,w),M=ec(te,Ve,de),M!==null&&Ha(M,te,Ve),Ve},i}},2576:function(u,n,A){"use strict";u.exports=A(6511)},6525:function(u,n,A){"use strict";u.exports=A(7287)},2546:function(u,n,A){"use strict";var C=A(5108);/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function d(_t,ct){var nt=_t.length;_t.push(ct);e:for(;0<nt;){var St=nt-1>>>1,Tt=_t[St];if(0<_(Tt,ct))_t[St]=ct,_t[nt]=Tt,nt=St;else break e}}function g(_t){return _t.length===0?null:_t[0]}function i(_t){if(_t.length===0)return null;var ct=_t[0],nt=_t.pop();if(nt!==ct){_t[0]=nt;e:for(var St=0,Tt=_t.length,fn=Tt>>>1;St<fn;){var At=2*(St+1)-1,Ot=_t[At],kt=At+1,yn=_t[kt];if(0>_(Ot,nt))kt<Tt&&0>_(yn,Ot)?(_t[St]=yn,_t[kt]=nt,St=kt):(_t[St]=Ot,_t[At]=nt,St=At);else if(kt<Tt&&0>_(yn,nt))_t[St]=yn,_t[kt]=nt,St=kt;else break e}}return ct}function _(_t,ct){var nt=_t.sortIndex-ct.sortIndex;return nt!==0?nt:_t.id-ct.id}if(typeof performance=="object"&&typeof performance.now=="function"){var j=performance;n.unstable_now=function(){return j.now()}}else{var $=Date,re=$.now();n.unstable_now=function(){return $.now()-re}}var Q=[],ae=[],pe=1,st=null,Pe=3,Oe=!1,Ze=!1,rt=!1,gt=typeof setTimeout=="function"?setTimeout:null,at=typeof clearTimeout=="function"?clearTimeout:null,ut=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ot(_t){for(var ct=g(ae);ct!==null;){if(ct.callback===null)i(ae);else if(ct.startTime<=_t)i(ae),ct.sortIndex=ct.expirationTime,d(Q,ct);else break;ct=g(ae)}}function Rt(_t){if(rt=!1,ot(_t),!Ze)if(g(Q)!==null)Ze=!0,Ln(Mt);else{var ct=g(ae);ct!==null&&fr(Rt,ct.startTime-_t)}}function Mt(_t,ct){Ze=!1,rt&&(rt=!1,at(xt),xt=-1),Oe=!0;var nt=Pe;try{for(ot(ct),st=g(Q);st!==null&&(!(st.expirationTime>ct)||_t&&!Xn());){var St=st.callback;if(typeof St=="function"){st.callback=null,Pe=st.priorityLevel;var Tt=St(st.expirationTime<=ct);ct=n.unstable_now(),typeof Tt=="function"?st.callback=Tt:st===g(Q)&&i(Q),ot(ct)}else i(Q);st=g(Q)}if(st!==null)var fn=!0;else{var At=g(ae);At!==null&&fr(Rt,At.startTime-ct),fn=!1}return fn}finally{st=null,Pe=nt,Oe=!1}}var Pt=!1,It=null,xt=-1,ln=5,Mn=-1;function Xn(){return!(n.unstable_now()-Mn<ln)}function mt(){if(It!==null){var _t=n.unstable_now();Mn=_t;var ct=!0;try{ct=It(!0,_t)}finally{ct?rn():(Pt=!1,It=null)}}else Pt=!1}var rn;if(typeof ut=="function")rn=function(){ut(mt)};else if(typeof MessageChannel!="undefined"){var un=new MessageChannel,On=un.port2;un.port1.onmessage=mt,rn=function(){On.postMessage(null)}}else rn=function(){gt(mt,0)};function Ln(_t){It=_t,Pt||(Pt=!0,rn())}function fr(_t,ct){xt=gt(function(){_t(n.unstable_now())},ct)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(_t){_t.callback=null},n.unstable_continueExecution=function(){Ze||Oe||(Ze=!0,Ln(Mt))},n.unstable_forceFrameRate=function(_t){0>_t||125<_t?C.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ln=0<_t?Math.floor(1e3/_t):5},n.unstable_getCurrentPriorityLevel=function(){return Pe},n.unstable_getFirstCallbackNode=function(){return g(Q)},n.unstable_next=function(_t){switch(Pe){case 1:case 2:case 3:var ct=3;break;default:ct=Pe}var nt=Pe;Pe=ct;try{return _t()}finally{Pe=nt}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(_t,ct){switch(_t){case 1:case 2:case 3:case 4:case 5:break;default:_t=3}var nt=Pe;Pe=_t;try{return ct()}finally{Pe=nt}},n.unstable_scheduleCallback=function(_t,ct,nt){var St=n.unstable_now();switch(typeof nt=="object"&&nt!==null?(nt=nt.delay,nt=typeof nt=="number"&&0<nt?St+nt:St):nt=St,_t){case 1:var Tt=-1;break;case 2:Tt=250;break;case 5:Tt=1073741823;break;case 4:Tt=1e4;break;default:Tt=5e3}return Tt=nt+Tt,_t={id:pe++,callback:ct,priorityLevel:_t,startTime:nt,expirationTime:Tt,sortIndex:-1},nt>St?(_t.sortIndex=nt,d(ae,_t),g(Q)===null&&_t===g(ae)&&(rt?(at(xt),xt=-1):rt=!0,fr(Rt,nt-St))):(_t.sortIndex=Tt,d(Q,_t),Ze||Oe||(Ze=!0,Ln(Mt))),_t},n.unstable_shouldYield=Xn,n.unstable_wrapCallback=function(_t){var ct=Pe;return function(){var nt=Pe;Pe=ct;try{return _t.apply(this,arguments)}finally{Pe=nt}}}},373:function(u,n,A){"use strict";u.exports=A(2546)},3466:function(u){(function(n,A){u.exports=A()})(this,function(){var n=function(){function A(ae){return g.appendChild(ae.dom),ae}function C(ae){for(var pe=0;pe<g.children.length;pe++)g.children[pe].style.display=pe===ae?"block":"none";d=ae}var d=0,g=document.createElement("div");g.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",g.addEventListener("click",function(ae){ae.preventDefault(),C(++d%g.children.length)},!1);var i=(performance||Date).now(),_=i,j=0,$=A(new n.Panel("FPS","#0ff","#002")),re=A(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var Q=A(new n.Panel("MB","#f08","#201"));return C(0),{REVISION:16,dom:g,addPanel:A,showPanel:C,begin:function(){i=(performance||Date).now()},end:function(){j++;var ae=(performance||Date).now();if(re.update(ae-i,200),ae>_+1e3&&($.update(1e3*j/(ae-_),100),_=ae,j=0,Q)){var pe=performance.memory;Q.update(pe.usedJSHeapSize/1048576,pe.jsHeapSizeLimit/1048576)}return ae},update:function(){i=this.end()},domElement:g,setMode:C}};return n.Panel=function(A,C,d){var g=1/0,i=0,_=Math.round,j=_(window.devicePixelRatio||1),$=80*j,re=48*j,Q=3*j,ae=2*j,pe=3*j,st=15*j,Pe=74*j,Oe=30*j,Ze=document.createElement("canvas");Ze.width=$,Ze.height=re,Ze.style.cssText="width:80px;height:48px";var rt=Ze.getContext("2d");return rt.font="bold "+9*j+"px Helvetica,Arial,sans-serif",rt.textBaseline="top",rt.fillStyle=d,rt.fillRect(0,0,$,re),rt.fillStyle=C,rt.fillText(A,Q,ae),rt.fillRect(pe,st,Pe,Oe),rt.fillStyle=d,rt.globalAlpha=.9,rt.fillRect(pe,st,Pe,Oe),{dom:Ze,update:function(gt,at){g=Math.min(g,gt),i=Math.max(i,gt),rt.fillStyle=d,rt.globalAlpha=1,rt.fillRect(0,0,$,st),rt.fillStyle=C,rt.fillText(_(gt)+" "+A+" ("+_(g)+"-"+_(i)+")",Q,ae),rt.drawImage(Ze,pe+j,st,Pe-j,Oe,pe,st,Pe-j,Oe),rt.fillRect(pe+Pe-j,st,j,Oe),rt.fillStyle=d,rt.globalAlpha=.9,rt.fillRect(pe+Pe-j,st,j,_((1-gt/at)*Oe))}}},n})},209:function(u,n,A){"use strict";A.r(n);var C=A(3379),d=A.n(C),g=A(7795),i=A.n(g),_=A(569),j=A.n(_),$=A(3565),re=A.n($),Q=A(9216),ae=A.n(Q),pe=A(4589),st=A.n(pe),Pe=A(8208),Oe={};Oe.styleTagTransform=st(),Oe.setAttributes=re(),Oe.insert=j().bind(null,"head"),Oe.domAPI=i(),Oe.insertStyleElement=ae();var Ze=d()(Pe.Z,Oe);n.default=Pe.Z&&Pe.Z.locals?Pe.Z.locals:void 0},8139:function(u,n,A){"use strict";A.d(n,{MA:function(){return j},Rq:function(){return _},ZH:function(){return re}});const C=Q=>typeof Q=="object"&&typeof Q.then=="function",d=[];function g(Q,ae,pe=(st,Pe)=>st===Pe){if(Q===ae)return!0;if(!Q||!ae)return!1;const st=Q.length;if(ae.length!==st)return!1;for(let Pe=0;Pe<st;Pe++)if(!pe(Q[Pe],ae[Pe]))return!1;return!0}function i(Q,ae=null,pe=!1,st={}){ae===null&&(ae=[Q]);for(const Oe of d)if(g(ae,Oe.keys,Oe.equal)){if(pe)return;if(Object.prototype.hasOwnProperty.call(Oe,"error"))throw Oe.error;if(Object.prototype.hasOwnProperty.call(Oe,"response"))return st.lifespan&&st.lifespan>0&&(Oe.timeout&&clearTimeout(Oe.timeout),Oe.timeout=setTimeout(Oe.remove,st.lifespan)),Oe.response;if(!pe)throw Oe.promise}const Pe={keys:ae,equal:st.equal,remove:()=>{const Oe=d.indexOf(Pe);Oe!==-1&&d.splice(Oe,1)},promise:(C(Q)?Q:Q(...ae)).then(Oe=>{Pe.response=Oe,st.lifespan&&st.lifespan>0&&(Pe.timeout=setTimeout(Pe.remove,st.lifespan))}).catch(Oe=>Pe.error=Oe)};if(d.push(Pe),!pe)throw Pe.promise}const _=(Q,ae,pe)=>i(Q,ae,!1,pe),j=(Q,ae,pe)=>void i(Q,ae,!0,pe),$=Q=>{var ae;return(ae=d.find(pe=>g(Q,pe.keys,pe.equal)))==null?void 0:ae.response},re=Q=>{if(Q===void 0||Q.length===0)d.splice(0,d.length);else{const ae=d.find(pe=>g(Q,pe.keys,pe.equal));ae&&ae.remove()}}},4671:function(u,n,A){"use strict";A.d(n,{Z:function(){return j}});var C=A(7294),d=A(5108);function g($){let re;const Q=new Set,ae=(rt,gt)=>{const at=typeof rt=="function"?rt(re):rt;if(at!==re){const ut=re;re=gt?at:Object.assign({},re,at),Q.forEach(ot=>ot(re,ut))}},pe=()=>re,st=(rt,gt=pe,at=Object.is)=>{d.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let ut=gt(re);function ot(){const Rt=gt(re);if(!at(ut,Rt)){const Mt=ut;rt(ut=Rt,Mt)}}return Q.add(ot),()=>Q.delete(ot)},Ze={setState:ae,getState:pe,subscribe:(rt,gt,at)=>gt||at?st(rt,gt,at):(Q.add(rt),()=>Q.delete(rt)),destroy:()=>Q.clear()};return re=$(ae,pe,Ze),Ze}const _=typeof window=="undefined"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?C.useEffect:C.useLayoutEffect;function j($){const re=typeof $=="function"?g($):$,Q=(ae=re.getState,pe=Object.is)=>{const[,st]=(0,C.useReducer)(Pt=>Pt+1,0),Pe=re.getState(),Oe=(0,C.useRef)(Pe),Ze=(0,C.useRef)(ae),rt=(0,C.useRef)(pe),gt=(0,C.useRef)(!1),at=(0,C.useRef)();at.current===void 0&&(at.current=ae(Pe));let ut,ot=!1;(Oe.current!==Pe||Ze.current!==ae||rt.current!==pe||gt.current)&&(ut=ae(Pe),ot=!pe(at.current,ut)),_(()=>{ot&&(at.current=ut),Oe.current=Pe,Ze.current=ae,rt.current=pe,gt.current=!1});const Rt=(0,C.useRef)(Pe);_(()=>{const Pt=()=>{try{const xt=re.getState(),ln=Ze.current(xt);rt.current(at.current,ln)||(Oe.current=xt,at.current=ln,st())}catch(xt){gt.current=!0,st()}},It=re.subscribe(Pt);return re.getState()!==Rt.current&&Pt(),It},[]);const Mt=ot?ut:at.current;return(0,C.useDebugValue)(Mt),Mt};return Object.assign(Q,re),Q[Symbol.iterator]=function(){d.warn("[useStore, api] = create() is deprecated and will be removed in v4");const ae=[Q,re];return{next(){const pe=ae.length<=0;return{value:ae.shift(),done:pe}}}},Q}},434:function(u){function n(){return u.exports=n=Object.assign?Object.assign.bind():function(A){for(var C=1;C<arguments.length;C++){var d=arguments[C];for(var g in d)Object.prototype.hasOwnProperty.call(d,g)&&(A[g]=d[g])}return A},u.exports.__esModule=!0,u.exports.default=u.exports,n.apply(this,arguments)}u.exports=n,u.exports.__esModule=!0,u.exports.default=u.exports},203:function(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,{jr:function(){return FaceLandmarker_1},n:function(){return FilesetResolver_1}});var console=__webpack_require__(5108),commonjsGlobal=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{},vision={},fileset_resolver={};let supportsSimd;Object.defineProperty(fileset_resolver,"__esModule",{value:!0}),fileset_resolver.FilesetResolver=void 0;const WASM_SIMD_CHECK=new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11]);function isSimdSupported(){return fs(this,null,function*(){if(supportsSimd===void 0)try{yield WebAssembly.instantiate(WASM_SIMD_CHECK),supportsSimd=!0}catch(u){supportsSimd=!1}return supportsSimd})}function createFileset(u,n=""){return fs(this,null,function*(){const A=(yield isSimdSupported())?"wasm_internal":"wasm_nosimd_internal";return{wasmLoaderPath:`${n}/${u}_${A}.js`,wasmBinaryPath:`${n}/${u}_${A}.wasm`}})}class FilesetResolver$1{static isSimdSupported(){return isSimdSupported()}static forAudioTasks(n){return createFileset("audio",n)}static forTextTasks(n){return createFileset("text",n)}static forVisionTasks(n){return createFileset("vision",n)}}fileset_resolver.FilesetResolver=FilesetResolver$1;var drawing_utils={};Object.defineProperty(drawing_utils,"__esModule",{value:!0}),drawing_utils.DrawingUtils=void 0;const DEFAULT_OPTIONS={color:"white",lineWidth:4,radius:6};function addDefaultOptions(u){return u=u||{},Object.assign(Object.assign(Object.assign({},DEFAULT_OPTIONS),{fillColor:u.color}),u)}function resolve(u,n){return u instanceof Function?u(n):u}class DrawingUtils$1{constructor(n){this.ctx=n}static clamp(n,A,C){const d=Math.min(A,C),g=Math.max(A,C);return Math.max(d,Math.min(g,n))}static lerp(n,A,C,d,g){const i=d*(1-(n-A)/(C-A))+g*(1-(C-n)/(C-A));return DrawingUtils$1.clamp(i,d,g)}drawLandmarks(n,A){if(!n)return;const C=this.ctx,d=addDefaultOptions(A);C.save();const g=C.canvas;let i=0;for(const _ of n){C.fillStyle=resolve(d.fillColor,{index:i,from:_}),C.strokeStyle=resolve(d.color,{index:i,from:_}),C.lineWidth=resolve(d.lineWidth,{index:i,from:_});const j=new Path2D;j.arc(_.x*g.width,_.y*g.height,resolve(d.radius,{index:i,from:_}),0,2*Math.PI),C.fill(j),C.stroke(j),++i}C.restore()}drawConnectors(n,A,C){if(!n||!A)return;const d=this.ctx,g=addDefaultOptions(C);d.save();const i=d.canvas;let _=0;for(const j of A){d.beginPath();const $=n[j.start],re=n[j.end];$&&re&&(d.strokeStyle=resolve(g.color,{index:_,from:$,to:re}),d.lineWidth=resolve(g.lineWidth,{index:_,from:$,to:re}),d.moveTo($.x*i.width,$.y*i.height),d.lineTo(re.x*i.width,re.y*i.height)),++_,d.stroke()}d.restore()}drawBoundingBox(n,A){const C=this.ctx,d=addDefaultOptions(A);C.save(),C.beginPath(),C.lineWidth=resolve(d.lineWidth,{}),C.strokeStyle=resolve(d.color,{}),C.fillStyle=resolve(d.fillColor,{}),C.moveTo(n.originX,n.originY),C.lineTo(n.originX+n.width,n.originY),C.lineTo(n.originX+n.width,n.originY+n.height),C.lineTo(n.originX,n.originY+n.height),C.lineTo(n.originX,n.originY),C.stroke(),C.fill(),C.restore()}}drawing_utils.DrawingUtils=DrawingUtils$1;var image={},image_shader_context={};Object.defineProperty(image_shader_context,"__esModule",{value:!0}),image_shader_context.MPImageShaderContext=image_shader_context.assertNotNull=void 0;const VERTEX_SHADER=`
  attribute vec2 aVertex;
  attribute vec2 aTex;
  varying vec2 vTex;
  void main(void) {
    gl_Position = vec4(aVertex, 0.0, 1.0);
    vTex = aTex;
  }`,FRAGMENT_SHADER=`
  precision mediump float;
  varying vec2 vTex;
  uniform sampler2D inputTexture;
   void main() {
     gl_FragColor = texture2D(inputTexture, vTex);
   }
 `;function assertNotNull(u,n){if(u===null)throw new Error(`Unable to obtain required WebGL resource: ${n}`);return u}image_shader_context.assertNotNull=assertNotNull;class MPImageShaderBuffers{constructor(n,A,C,d){this.gl=n,this.vertexArrayObject=A,this.vertexBuffer=C,this.textureBuffer=d}bind(){this.gl.bindVertexArray(this.vertexArrayObject)}unbind(){this.gl.bindVertexArray(null)}close(){this.gl.deleteVertexArray(this.vertexArrayObject),this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.textureBuffer)}}class MPImageShaderContext{compileShader(n,A){const C=this.gl,d=assertNotNull(C.createShader(A),"Failed to create WebGL shader");if(C.shaderSource(d,n),C.compileShader(d),!C.getShaderParameter(d,C.COMPILE_STATUS)){const g=C.getShaderInfoLog(d);throw new Error(`Could not compile WebGL shader: ${g}`)}return C.attachShader(this.program,d),d}setupShaders(){const n=this.gl;if(this.program=assertNotNull(n.createProgram(),"Failed to create WebGL program"),this.vertexShader=this.compileShader(VERTEX_SHADER,n.VERTEX_SHADER),this.fragmentShader=this.compileShader(FRAGMENT_SHADER,n.FRAGMENT_SHADER),n.linkProgram(this.program),!n.getProgramParameter(this.program,n.LINK_STATUS)){const A=n.getProgramInfoLog(this.program);throw new Error(`Error during program linking: ${A}`)}this.aVertex=n.getAttribLocation(this.program,"aVertex"),this.aTex=n.getAttribLocation(this.program,"aTex")}createBuffers(n){const A=this.gl,C=assertNotNull(A.createVertexArray(),"Failed to create vertex array");A.bindVertexArray(C);const d=assertNotNull(A.createBuffer(),"Failed to create buffer");A.bindBuffer(A.ARRAY_BUFFER,d),A.enableVertexAttribArray(this.aVertex),A.vertexAttribPointer(this.aVertex,2,A.FLOAT,!1,0,0),A.bufferData(A.ARRAY_BUFFER,new Float32Array([-1,-1,-1,1,1,1,1,-1]),A.STATIC_DRAW);const g=assertNotNull(A.createBuffer(),"Failed to create buffer");A.bindBuffer(A.ARRAY_BUFFER,g),A.enableVertexAttribArray(this.aTex),A.vertexAttribPointer(this.aTex,2,A.FLOAT,!1,0,0);const i=n?[0,1,0,0,1,0,1,1]:[0,0,0,1,1,1,1,0];return A.bufferData(A.ARRAY_BUFFER,new Float32Array(i),A.STATIC_DRAW),A.bindBuffer(A.ARRAY_BUFFER,null),A.bindVertexArray(null),new MPImageShaderBuffers(A,C,d,g)}getShaderBuffers(n){return n?(this.shaderBuffersFlipVertically||(this.shaderBuffersFlipVertically=this.createBuffers(!0)),this.shaderBuffersFlipVertically):(this.shaderBuffersPassthrough||(this.shaderBuffersPassthrough=this.createBuffers(!1)),this.shaderBuffersPassthrough)}maybeInitGL(n){if(this.gl){if(n!==this.gl)throw new Error("Cannot change GL context once initialized")}else this.gl=n}run(n,A,C){this.maybeInitGL(n),this.program||this.setupShaders();const d=this.getShaderBuffers(A);n.useProgram(this.program),d.bind();const g=C();return d.unbind(),g}bindFramebuffer(n,A){this.maybeInitGL(n),this.framebuffer||(this.framebuffer=assertNotNull(n.createFramebuffer(),"Failed to create framebuffe.")),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,A,0)}unbindFramebuffer(){var n;(n=this.gl)===null||n===void 0||n.bindFramebuffer(this.gl.FRAMEBUFFER,null)}close(){if(this.program){const n=this.gl;n.deleteProgram(this.program),n.deleteShader(this.vertexShader),n.deleteShader(this.fragmentShader)}this.framebuffer&&this.gl.deleteFramebuffer(this.framebuffer),this.shaderBuffersPassthrough&&this.shaderBuffersPassthrough.close(),this.shaderBuffersFlipVertically&&this.shaderBuffersFlipVertically.close()}}image_shader_context.MPImageShaderContext=MPImageShaderContext,Object.defineProperty(image,"__esModule",{value:!0}),image.MPImage=void 0;const image_shader_context_1$2=image_shader_context,INSTANCE_COUNT_WARNING_THRESHOLD$1=250;var MPImageType;(function(u){u[u.IMAGE_DATA=0]="IMAGE_DATA",u[u.IMAGE_BITMAP=1]="IMAGE_BITMAP",u[u.WEBGL_TEXTURE=2]="WEBGL_TEXTURE"})(MPImageType||(MPImageType={}));class MPImage$1{constructor(n,A,C,d,g,i,_){this.containers=n,this.ownsImageBitmap=A,this.ownsWebGLTexture=C,this.canvas=d,this.shaderContext=g,this.width=i,this.height=_,(this.ownsImageBitmap||this.ownsWebGLTexture)&&(--MPImage$1.instancesBeforeWarning,MPImage$1.instancesBeforeWarning===0&&console.error("You seem to be creating MPImage instances without invoking .close(). This leaks resources."))}hasImageData(){return!!this.getContainer(MPImageType.IMAGE_DATA)}hasImageBitmap(){return!!this.getContainer(MPImageType.IMAGE_BITMAP)}hasWebGLTexture(){return!!this.getContainer(MPImageType.WEBGL_TEXTURE)}getAsImageData(){return this.convertToImageData()}getAsImageBitmap(){return this.convertToImageBitmap()}getAsWebGLTexture(){return this.convertToWebGLTexture()}getContainer(n){switch(n){case MPImageType.IMAGE_DATA:return this.containers.find(A=>A instanceof ImageData);case MPImageType.IMAGE_BITMAP:return this.containers.find(A=>typeof ImageBitmap!="undefined"&&A instanceof ImageBitmap);case MPImageType.WEBGL_TEXTURE:return this.containers.find(A=>typeof WebGLTexture!="undefined"&&A instanceof WebGLTexture);default:throw new Error(`Type is not supported: ${n}`)}}clone(){const n=[];for(const A of this.containers){let C;if(A instanceof ImageData)C=new ImageData(A.data,this.width,this.height);else if(A instanceof WebGLTexture){const d=this.getGL(),g=this.getShaderContext();d.activeTexture(d.TEXTURE1),C=(0,image_shader_context_1$2.assertNotNull)(d.createTexture(),"Failed to create texture"),d.bindTexture(d.TEXTURE_2D,C),this.configureTextureParams(),d.texImage2D(d.TEXTURE_2D,0,d.RGBA,this.width,this.height,0,d.RGBA,d.UNSIGNED_BYTE,null),d.bindTexture(d.TEXTURE_2D,null),g.bindFramebuffer(d,C),g.run(d,!1,()=>{this.bindTexture(),d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT),d.drawArrays(d.TRIANGLE_FAN,0,4),this.unbindTexture()}),g.unbindFramebuffer(),this.unbindTexture()}else{if(!(A instanceof ImageBitmap))throw new Error(`Type is not supported: ${A}`);this.convertToWebGLTexture(),this.bindTexture(),C=this.copyTextureToBitmap(),this.unbindTexture()}n.push(C)}return new MPImage$1(n,this.hasImageBitmap(),this.hasWebGLTexture(),this.canvas,this.shaderContext,this.width,this.height)}getOffscreenCanvas(){if(!(this.canvas instanceof OffscreenCanvas))throw new Error("Conversion to ImageBitmap requires that the MediaPipe Tasks is initialized with an OffscreenCanvas");return this.canvas}getGL(){if(!this.canvas)throw new Error("Conversion to different image formats require that a canvas is passed when iniitializing the image.");return this.gl||(this.gl=(0,image_shader_context_1$2.assertNotNull)(this.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),this.gl}getShaderContext(){return this.shaderContext||(this.shaderContext=new image_shader_context_1$2.MPImageShaderContext),this.shaderContext}convertToImageBitmap(){let n=this.getContainer(MPImageType.IMAGE_BITMAP);return n||(this.convertToWebGLTexture(),n=this.convertWebGLTextureToImageBitmap(),this.containers.push(n),this.ownsImageBitmap=!0),n}convertToImageData(){let n=this.getContainer(MPImageType.IMAGE_DATA);if(!n){const A=this.getGL(),C=this.getShaderContext(),d=new Uint8Array(this.width*this.height*4),g=this.convertToWebGLTexture();C.bindFramebuffer(A,g),A.readPixels(0,0,this.width,this.height,A.RGBA,A.UNSIGNED_BYTE,d),C.unbindFramebuffer(),n=new ImageData(new Uint8ClampedArray(d.buffer),this.width,this.height),this.containers.push(n)}return n}convertToWebGLTexture(){let n=this.getContainer(MPImageType.WEBGL_TEXTURE);if(!n){const A=this.getGL();n=this.bindTexture();const C=this.getContainer(MPImageType.IMAGE_BITMAP)||this.convertToImageData();A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,C),this.unbindTexture()}return n}configureTextureParams(){const n=this.getGL();n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.LINEAR),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.LINEAR)}bindTexture(){const n=this.getGL();n.viewport(0,0,this.width,this.height),n.activeTexture(n.TEXTURE0);let A=this.getContainer(MPImageType.WEBGL_TEXTURE);return A?n.bindTexture(n.TEXTURE_2D,A):(A=(0,image_shader_context_1$2.assertNotNull)(n.createTexture(),"Failed to create texture"),this.containers.push(A),this.ownsWebGLTexture=!0,n.bindTexture(n.TEXTURE_2D,A),this.configureTextureParams()),A}unbindTexture(){this.gl.bindTexture(this.gl.TEXTURE_2D,null)}copyTextureToBitmap(){const n=this.getGL();return this.getShaderContext().run(n,!0,()=>this.runWithResizedCanvas(()=>(n.bindFramebuffer(n.FRAMEBUFFER,null),n.clearColor(0,0,0,0),n.clear(n.COLOR_BUFFER_BIT),n.drawArrays(n.TRIANGLE_FAN,0,4),this.getOffscreenCanvas().transferToImageBitmap())))}convertWebGLTextureToImageBitmap(){this.bindTexture();const n=this.copyTextureToBitmap();return this.unbindTexture(),n}runWithResizedCanvas(n){const A=this.canvas;if(A.width===this.width&&A.height===this.height)return n();const C=A.width,d=A.height;A.width=this.width,A.height=this.height;const g=n();return A.width=C,A.height=d,g}close(){this.ownsImageBitmap&&this.getContainer(MPImageType.IMAGE_BITMAP).close(),this.ownsWebGLTexture&&this.getGL().deleteTexture(this.getContainer(MPImageType.WEBGL_TEXTURE)),MPImage$1.instancesBeforeWarning=-1}}image.MPImage=MPImage$1,MPImage$1.instancesBeforeWarning=INSTANCE_COUNT_WARNING_THRESHOLD$1;var mask={},platform_utils={};function isWebKit(u=navigator){const n=u.userAgent;return n.includes("Safari")&&!n.includes("Chrome")}function isIOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}Object.defineProperty(platform_utils,"__esModule",{value:!0}),platform_utils.isIOS=platform_utils.isWebKit=void 0,platform_utils.isWebKit=isWebKit,platform_utils.isIOS=isIOS,Object.defineProperty(mask,"__esModule",{value:!0}),mask.MPMask=void 0;const image_shader_context_1$1=image_shader_context,platform_utils_1$1=platform_utils,INSTANCE_COUNT_WARNING_THRESHOLD=250;var MPMaskType;(function(u){u[u.UINT8_ARRAY=0]="UINT8_ARRAY",u[u.FLOAT32_ARRAY=1]="FLOAT32_ARRAY",u[u.WEBGL_TEXTURE=2]="WEBGL_TEXTURE"})(MPMaskType||(MPMaskType={}));class MPMask$1{constructor(n,A,C,d,g,i){this.containers=n,this.ownsWebGLTexture=A,this.canvas=C,this.shaderContext=d,this.width=g,this.height=i,this.ownsWebGLTexture&&(--MPMask$1.instancesBeforeWarning,MPMask$1.instancesBeforeWarning===0&&console.error("You seem to be creating MPMask instances without invoking .close(). This leaks resources."))}hasUint8Array(){return!!this.getContainer(MPMaskType.UINT8_ARRAY)}hasFloat32Array(){return!!this.getContainer(MPMaskType.FLOAT32_ARRAY)}hasWebGLTexture(){return!!this.getContainer(MPMaskType.WEBGL_TEXTURE)}getAsUint8Array(){return this.convertToUint8Array()}getAsFloat32Array(){return this.convertToFloat32Array()}getAsWebGLTexture(){return this.convertToWebGLTexture()}getTexImage2DFormat(){const n=this.getGL();if(!MPMask$1.texImage2DFormat)if(n.getExtension("EXT_color_buffer_float")&&n.getExtension("OES_texture_float_linear")&&n.getExtension("EXT_float_blend"))MPMask$1.texImage2DFormat=n.R32F;else{if(!n.getExtension("EXT_color_buffer_half_float"))throw new Error("GPU does not fully support 4-channel float32 or float16 formats");MPMask$1.texImage2DFormat=n.R16F}return MPMask$1.texImage2DFormat}getContainer(n){switch(n){case MPMaskType.UINT8_ARRAY:return this.containers.find(A=>A instanceof Uint8Array);case MPMaskType.FLOAT32_ARRAY:return this.containers.find(A=>A instanceof Float32Array);case MPMaskType.WEBGL_TEXTURE:return this.containers.find(A=>typeof WebGLTexture!="undefined"&&A instanceof WebGLTexture);default:throw new Error(`Type is not supported: ${n}`)}}clone(){const n=[];for(const A of this.containers){let C;if(A instanceof Uint8Array)C=new Uint8Array(A);else if(A instanceof Float32Array)C=new Float32Array(A);else{if(!(A instanceof WebGLTexture))throw new Error(`Type is not supported: ${A}`);{const d=this.getGL(),g=this.getShaderContext();d.activeTexture(d.TEXTURE1),C=(0,image_shader_context_1$1.assertNotNull)(d.createTexture(),"Failed to create texture"),d.bindTexture(d.TEXTURE_2D,C),this.configureTextureParams();const i=this.getTexImage2DFormat();d.texImage2D(d.TEXTURE_2D,0,i,this.width,this.height,0,d.RED,d.FLOAT,null),d.bindTexture(d.TEXTURE_2D,null),g.bindFramebuffer(d,C),g.run(d,!1,()=>{this.bindTexture(),d.clearColor(0,0,0,0),d.clear(d.COLOR_BUFFER_BIT),d.drawArrays(d.TRIANGLE_FAN,0,4),this.unbindTexture()}),g.unbindFramebuffer(),this.unbindTexture()}}n.push(C)}return new MPMask$1(n,this.hasWebGLTexture(),this.canvas,this.shaderContext,this.width,this.height)}getGL(){if(!this.canvas)throw new Error("Conversion to different image formats require that a canvas is passed when initializing the image.");return this.gl||(this.gl=(0,image_shader_context_1$1.assertNotNull)(this.canvas.getContext("webgl2"),"You cannot use a canvas that is already bound to a different type of rendering context.")),this.gl}getShaderContext(){return this.shaderContext||(this.shaderContext=new image_shader_context_1$1.MPImageShaderContext),this.shaderContext}convertToFloat32Array(){let n=this.getContainer(MPMaskType.FLOAT32_ARRAY);if(!n){const A=this.getContainer(MPMaskType.UINT8_ARRAY);if(A)n=new Float32Array(A).map(C=>C/255);else{n=new Float32Array(this.width*this.height);const C=this.getGL(),d=this.getShaderContext(),g=this.convertToWebGLTexture();if(d.bindFramebuffer(C,g),(0,platform_utils_1$1.isIOS)()){const i=new Float32Array(this.width*this.height*4);C.readPixels(0,0,this.width,this.height,C.RGBA,C.FLOAT,i);for(let _=0,j=0;_<n.length;++_,j+=4)n[_]=i[j]}else C.readPixels(0,0,this.width,this.height,C.RED,C.FLOAT,n)}this.containers.push(n)}return n}convertToUint8Array(){let n=this.getContainer(MPMaskType.UINT8_ARRAY);if(!n){const A=this.convertToFloat32Array();n=new Uint8Array(A.map(C=>255*C)),this.containers.push(n)}return n}convertToWebGLTexture(){let n=this.getContainer(MPMaskType.WEBGL_TEXTURE);if(!n){const A=this.getGL();n=this.bindTexture();const C=this.convertToFloat32Array(),d=this.getTexImage2DFormat();A.texImage2D(A.TEXTURE_2D,0,d,this.width,this.height,0,A.RED,A.FLOAT,C),this.unbindTexture()}return n}configureTextureParams(){const n=this.getGL();n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)}bindTexture(){const n=this.getGL();n.viewport(0,0,this.width,this.height),n.activeTexture(n.TEXTURE0);let A=this.getContainer(MPMaskType.WEBGL_TEXTURE);return A?n.bindTexture(n.TEXTURE_2D,A):(A=(0,image_shader_context_1$1.assertNotNull)(n.createTexture(),"Failed to create texture"),this.containers.push(A),this.ownsWebGLTexture=!0,n.bindTexture(n.TEXTURE_2D,A),this.configureTextureParams()),A}unbindTexture(){this.gl.bindTexture(this.gl.TEXTURE_2D,null)}close(){this.ownsWebGLTexture&&this.getGL().deleteTexture(this.getContainer(MPMaskType.WEBGL_TEXTURE)),MPMask$1.instancesBeforeWarning=-1}}mask.MPMask=MPMask$1,MPMask$1.instancesBeforeWarning=INSTANCE_COUNT_WARNING_THRESHOLD;var face_detector={},calculator_pb={},googleProtobuf={};(function(exports){var $jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(u,n,A){u instanceof String&&(u=String(u));for(var C=u.length,d=0;d<C;d++){var g=u[d];if(n.call(A,g,d,u))return{i:d,v:g}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(u,n,A){u!=Array.prototype&&u!=Object.prototype&&(u[n]=A.value)},$jscomp.getGlobal=function(u){return typeof window!="undefined"&&window===u?u:commonjsGlobal!==void 0&&commonjsGlobal!=null?commonjsGlobal:u},$jscomp.global=$jscomp.getGlobal(commonjsGlobal),$jscomp.polyfill=function(u,n,A,C){if(n){for(A=$jscomp.global,u=u.split("."),C=0;C<u.length-1;C++){var d=u[C];d in A||(A[d]={}),A=A[d]}(n=n(C=A[u=u[u.length-1]]))!=C&&n!=null&&$jscomp.defineProperty(A,u,{configurable:!0,writable:!0,value:n})}},$jscomp.polyfill("Array.prototype.findIndex",function(u){return u||function(n,A){return $jscomp.findInternal(this,n,A).i}},"es6","es3"),$jscomp.checkStringArgs=function(u,n,A){if(u==null)throw new TypeError("The 'this' value for String.prototype."+A+" must not be null or undefined");if(n instanceof RegExp)throw new TypeError("First argument to String.prototype."+A+" must not be a regular expression");return u+""},$jscomp.polyfill("String.prototype.endsWith",function(u){return u||function(n,A){var C=$jscomp.checkStringArgs(this,n,"endsWith");n+="",A===void 0&&(A=C.length),A=Math.max(0,Math.min(0|A,C.length));for(var d=n.length;0<d&&0<A;)if(C[--A]!=n[--d])return!1;return 0>=d}},"es6","es3"),$jscomp.polyfill("Array.prototype.find",function(u){return u||function(n,A){return $jscomp.findInternal(this,n,A).v}},"es6","es3"),$jscomp.polyfill("String.prototype.startsWith",function(u){return u||function(n,A){var C=$jscomp.checkStringArgs(this,n,"startsWith");n+="";var d=C.length,g=n.length;A=Math.max(0,Math.min(0|A,C.length));for(var i=0;i<g&&A<d;)if(C[A++]!=n[i++])return!1;return i>=g}},"es6","es3"),$jscomp.polyfill("String.prototype.repeat",function(u){return u||function(n){var A=$jscomp.checkStringArgs(this,null,"repeat");if(0>n||1342177279<n)throw new RangeError("Invalid count value");n|=0;for(var C="";n;)1&n&&(C+=A),(n>>>=1)&&(A+=A);return C}},"es6","es3");var COMPILED=!0,goog=goog||{};goog.global=commonjsGlobal||self,goog.exportPath_=function(u,n,A){u=u.split("."),A=A||goog.global,u[0]in A||A.execScript===void 0||A.execScript("var "+u[0]);for(var C;u.length&&(C=u.shift());)u.length||n===void 0?A=A[C]&&A[C]!==Object.prototype[C]?A[C]:A[C]={}:A[C]=n},goog.define=function(u,n){return n},goog.FEATURESET_YEAR=2012,goog.DEBUG=!0,goog.LOCALE="en",goog.TRUSTED_SITE=!0,goog.STRICT_MODE_COMPATIBLE=!1,goog.DISALLOW_TEST_ONLY_CODE=!goog.DEBUG,goog.ENABLE_CHROME_APP_SAFE_SCRIPT_LOADING=!1,goog.provide=function(u){if(goog.isInModuleLoader_())throw Error("goog.provide cannot be used within a module.");goog.constructNamespace_(u)},goog.constructNamespace_=function(u,n){goog.exportPath_(u,n)},goog.getScriptNonce=function(u){return u&&u!=goog.global?goog.getScriptNonce_(u.document):(goog.cspNonce_===null&&(goog.cspNonce_=goog.getScriptNonce_(goog.global.document)),goog.cspNonce_)},goog.NONCE_PATTERN_=/^[\w+/_-]+[=]{0,2}$/,goog.cspNonce_=null,goog.getScriptNonce_=function(u){return(u=u.querySelector&&u.querySelector("script[nonce]"))&&(u=u.nonce||u.getAttribute("nonce"))&&goog.NONCE_PATTERN_.test(u)?u:""},goog.VALID_MODULE_RE_=/^[a-zA-Z_$][a-zA-Z0-9._$]*$/,goog.module=function(u){if(typeof u!="string"||!u||u.search(goog.VALID_MODULE_RE_)==-1)throw Error("Invalid module identifier");if(!goog.isInGoogModuleLoader_())throw Error("Module "+u+" has been loaded incorrectly. Note, modules cannot be loaded as normal scripts. They require some kind of pre-processing step. You're likely trying to load a module via a script tag or as a part of a concatenated bundle without rewriting the module. For more info see: https://github.com/google/closure-library/wiki/goog.module:-an-ES6-module-like-alternative-to-goog.provide.");if(goog.moduleLoaderState_.moduleName)throw Error("goog.module may only be called once per module.");goog.moduleLoaderState_.moduleName=u},goog.module.get=function(u){return goog.module.getInternal_(u)},goog.module.getInternal_=function(u){return null},goog.ModuleType={ES6:"es6",GOOG:"goog"},goog.moduleLoaderState_=null,goog.isInModuleLoader_=function(){return goog.isInGoogModuleLoader_()||goog.isInEs6ModuleLoader_()},goog.isInGoogModuleLoader_=function(){return!!goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.GOOG},goog.isInEs6ModuleLoader_=function(){if(goog.moduleLoaderState_&&goog.moduleLoaderState_.type==goog.ModuleType.ES6)return!0;var u=goog.global.$jscomp;return!!u&&typeof u.getCurrentModulePath=="function"&&!!u.getCurrentModulePath()},goog.module.declareLegacyNamespace=function(){goog.moduleLoaderState_.declareLegacyNamespace=!0},goog.declareModuleId=function(u){if(goog.moduleLoaderState_)goog.moduleLoaderState_.moduleName=u;else{var n=goog.global.$jscomp;if(!n||typeof n.getCurrentModulePath!="function")throw Error('Module with namespace "'+u+'" has been loaded incorrectly.');n=n.require(n.getCurrentModulePath()),goog.loadedModules_[u]={exports:n,type:goog.ModuleType.ES6,moduleId:u}}},goog.setTestOnly=function(u){if(goog.DISALLOW_TEST_ONLY_CODE)throw u=u||"",Error("Importing test-only code into non-debug environment"+(u?": "+u:"."))},goog.forwardDeclare=function(u){},goog.getObjectByName=function(u,n){u=u.split("."),n=n||goog.global;for(var A=0;A<u.length;A++)if((n=n[u[A]])==null)return null;return n},goog.globalize=function(u,n){for(var A in n=n||goog.global,u)n[A]=u[A]},goog.addDependency=function(u,n,A,C){},goog.ENABLE_DEBUG_LOADER=!0,goog.logToConsole_=function(u){goog.global.console&&goog.global.console.error(u)},goog.require=function(u){},goog.requireType=function(u){return{}},goog.basePath="",goog.nullFunction=function(){},goog.abstractMethod=function(){throw Error("unimplemented abstract method")},goog.addSingletonGetter=function(u){u.instance_=void 0,u.getInstance=function(){return u.instance_?u.instance_:(goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=u),u.instance_=new u)}},goog.instantiatedSingletons_=[],goog.LOAD_MODULE_USING_EVAL=!0,goog.SEAL_MODULE_EXPORTS=goog.DEBUG,goog.loadedModules_={},goog.DEPENDENCIES_ENABLED=!COMPILED,goog.TRANSPILE="detect",goog.ASSUME_ES_MODULES_TRANSPILED=!1,goog.TRANSPILE_TO_LANGUAGE="",goog.TRANSPILER="transpile.js",goog.hasBadLetScoping=null,goog.useSafari10Workaround=function(){if(goog.hasBadLetScoping==null){try{var a=!eval('"use strict";let x = 1; function f() { return typeof x; };f() == "number";')}catch(u){a=!1}goog.hasBadLetScoping=a}return goog.hasBadLetScoping},goog.workaroundSafari10EvalBug=function(u){return"(function(){"+u+`
;})();
`},goog.loadModule=function(u){var n=goog.moduleLoaderState_;try{if(goog.moduleLoaderState_={moduleName:"",declareLegacyNamespace:!1,type:goog.ModuleType.GOOG},goog.isFunction(u))var A=u.call(void 0,{});else{if(typeof u!="string")throw Error("Invalid module definition");goog.useSafari10Workaround()&&(u=goog.workaroundSafari10EvalBug(u)),A=goog.loadModuleFromSource_.call(void 0,u)}var C=goog.moduleLoaderState_.moduleName;if(typeof C!="string"||!C)throw Error('Invalid module name "'+C+'"');goog.moduleLoaderState_.declareLegacyNamespace?goog.constructNamespace_(C,A):goog.SEAL_MODULE_EXPORTS&&Object.seal&&typeof A=="object"&&A!=null&&Object.seal(A),goog.loadedModules_[C]={exports:A,type:goog.ModuleType.GOOG,moduleId:goog.moduleLoaderState_.moduleName}}finally{goog.moduleLoaderState_=n}},goog.loadModuleFromSource_=function(a){return eval(a),{}},goog.normalizePath_=function(u){u=u.split("/");for(var n=0;n<u.length;)u[n]=="."?u.splice(n,1):n&&u[n]==".."&&u[n-1]&&u[n-1]!=".."?u.splice(--n,2):n++;return u.join("/")},goog.loadFileSync_=function(u){if(goog.global.CLOSURE_LOAD_FILE_SYNC)return goog.global.CLOSURE_LOAD_FILE_SYNC(u);try{var n=new goog.global.XMLHttpRequest;return n.open("get",u,!1),n.send(),n.status==0||n.status==200?n.responseText:null}catch(A){return null}},goog.transpile_=function(u,n,A){var C=goog.global.$jscomp;C||(goog.global.$jscomp=C={});var d=C.transpile;if(!d){var g=goog.basePath+goog.TRANSPILER,i=goog.loadFileSync_(g);if(i){if(function(){(0,eval)(i+`
//# sourceURL=`+g)}.call(goog.global),goog.global.$gwtExport&&goog.global.$gwtExport.$jscomp&&!goog.global.$gwtExport.$jscomp.transpile)throw Error('The transpiler did not properly export the "transpile" method. $gwtExport: '+JSON.stringify(goog.global.$gwtExport));goog.global.$jscomp.transpile=goog.global.$gwtExport.$jscomp.transpile,d=(C=goog.global.$jscomp).transpile}}return d||(d=C.transpile=function(_,j){return goog.logToConsole_(j+" requires transpilation but no transpiler was found."),_}),d(u,n,A)},goog.typeOf=function(u){var n=typeof u;if(n=="object"){if(!u)return"null";if(u instanceof Array)return"array";if(u instanceof Object)return n;var A=Object.prototype.toString.call(u);if(A=="[object Window]")return"object";if(A=="[object Array]"||typeof u.length=="number"&&u.splice!==void 0&&u.propertyIsEnumerable!==void 0&&!u.propertyIsEnumerable("splice"))return"array";if(A=="[object Function]"||u.call!==void 0&&u.propertyIsEnumerable!==void 0&&!u.propertyIsEnumerable("call"))return"function"}else if(n=="function"&&u.call===void 0)return"object";return n},goog.isArray=function(u){return goog.typeOf(u)=="array"},goog.isArrayLike=function(u){var n=goog.typeOf(u);return n=="array"||n=="object"&&typeof u.length=="number"},goog.isDateLike=function(u){return goog.isObject(u)&&typeof u.getFullYear=="function"},goog.isFunction=function(u){return goog.typeOf(u)=="function"},goog.isObject=function(u){var n=typeof u;return n=="object"&&u!=null||n=="function"},goog.getUid=function(u){return Object.prototype.hasOwnProperty.call(u,goog.UID_PROPERTY_)&&u[goog.UID_PROPERTY_]||(u[goog.UID_PROPERTY_]=++goog.uidCounter_)},goog.hasUid=function(u){return!!u[goog.UID_PROPERTY_]},goog.removeUid=function(u){u!==null&&"removeAttribute"in u&&u.removeAttribute(goog.UID_PROPERTY_);try{delete u[goog.UID_PROPERTY_]}catch(n){}},goog.UID_PROPERTY_="closure_uid_"+(1e9*Math.random()>>>0),goog.uidCounter_=0,goog.getHashCode=goog.getUid,goog.removeHashCode=goog.removeUid,goog.cloneObject=function(u){var n=goog.typeOf(u);if(n=="object"||n=="array"){if(typeof u.clone=="function")return u.clone();for(var A in n=n=="array"?[]:{},u)n[A]=goog.cloneObject(u[A]);return n}return u},goog.bindNative_=function(u,n,A){return u.call.apply(u.bind,arguments)},goog.bindJs_=function(u,n,A){if(!u)throw Error();if(2<arguments.length){var C=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,C),u.apply(n,d)}}return function(){return u.apply(n,arguments)}},goog.bind=function(u,n,A){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_,goog.bind.apply(null,arguments)},goog.partial=function(u,n){var A=Array.prototype.slice.call(arguments,1);return function(){var C=A.slice();return C.push.apply(C,arguments),u.apply(this,C)}},goog.mixin=function(u,n){for(var A in n)u[A]=n[A]},goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date},goog.globalEval=function(u){if(goog.global.execScript)goog.global.execScript(u,"JavaScript");else{if(!goog.global.eval)throw Error("goog.globalEval not available");if(goog.evalWorksForGlobals_==null){try{goog.global.eval("var _evalTest_ = 1;")}catch(C){}if(goog.global._evalTest_!==void 0){try{delete goog.global._evalTest_}catch(C){}goog.evalWorksForGlobals_=!0}else goog.evalWorksForGlobals_=!1}if(goog.evalWorksForGlobals_)goog.global.eval(u);else{var n=goog.global.document,A=n.createElement("script");A.type="text/javascript",A.defer=!1,A.appendChild(n.createTextNode(u)),n.head.appendChild(A),n.head.removeChild(A)}}},goog.evalWorksForGlobals_=null,goog.getCssName=function(u,n){if(String(u).charAt(0)==".")throw Error('className passed in goog.getCssName must not start with ".". You passed: '+u);var A=function(d){return goog.cssNameMapping_[d]||d},C=function(d){d=d.split("-");for(var g=[],i=0;i<d.length;i++)g.push(A(d[i]));return g.join("-")};return C=goog.cssNameMapping_?goog.cssNameMappingStyle_=="BY_WHOLE"?A:C:function(d){return d},u=n?u+"-"+C(n):C(u),goog.global.CLOSURE_CSS_NAME_MAP_FN?goog.global.CLOSURE_CSS_NAME_MAP_FN(u):u},goog.setCssNameMapping=function(u,n){goog.cssNameMapping_=u,goog.cssNameMappingStyle_=n},goog.getMsg=function(u,n,A){return A&&A.html&&(u=u.replace(/</g,"&lt;")),n&&(u=u.replace(/\{\$([^}]+)}/g,function(C,d){return n!=null&&d in n?n[d]:C})),u},goog.getMsgWithFallback=function(u,n){return u},goog.exportSymbol=function(u,n,A){goog.exportPath_(u,n,A)},goog.exportProperty=function(u,n,A){u[n]=A},goog.inherits=function(u,n){function A(){}A.prototype=n.prototype,u.superClass_=n.prototype,u.prototype=new A,u.prototype.constructor=u,u.base=function(C,d,g){for(var i=Array(arguments.length-2),_=2;_<arguments.length;_++)i[_-2]=arguments[_];return n.prototype[d].apply(C,i)}},goog.scope=function(u){if(goog.isInModuleLoader_())throw Error("goog.scope is not supported within a module.");u.call(goog.global)},goog.defineClass=function(u,n){var A=n.constructor,C=n.statics;return A&&A!=Object.prototype.constructor||(A=function(){throw Error("cannot instantiate an interface (no constructor defined).")}),A=goog.defineClass.createSealingConstructor_(A,u),u&&goog.inherits(A,u),delete n.constructor,delete n.statics,goog.defineClass.applyProperties_(A.prototype,n),C!=null&&(C instanceof Function?C(A):goog.defineClass.applyProperties_(A,C)),A},goog.defineClass.SEAL_CLASS_INSTANCES=goog.DEBUG,goog.defineClass.createSealingConstructor_=function(u,n){if(!goog.defineClass.SEAL_CLASS_INSTANCES)return u;var A=!goog.defineClass.isUnsealable_(n),C=function(){var d=u.apply(this,arguments)||this;return d[goog.UID_PROPERTY_]=d[goog.UID_PROPERTY_],this.constructor===C&&A&&Object.seal instanceof Function&&Object.seal(d),d};return C},goog.defineClass.isUnsealable_=function(u){return u&&u.prototype&&u.prototype[goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_]},goog.defineClass.OBJECT_PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.defineClass.applyProperties_=function(u,n){for(var A in n)Object.prototype.hasOwnProperty.call(n,A)&&(u[A]=n[A]);for(var C=0;C<goog.defineClass.OBJECT_PROTOTYPE_FIELDS_.length;C++)A=goog.defineClass.OBJECT_PROTOTYPE_FIELDS_[C],Object.prototype.hasOwnProperty.call(n,A)&&(u[A]=n[A])},goog.tagUnsealableClass=function(u){},goog.UNSEALABLE_CONSTRUCTOR_PROPERTY_="goog_defineClass_legacy_unsealable",goog.TRUSTED_TYPES_POLICY_NAME="",goog.identity_=function(u){return u},goog.createTrustedTypesPolicy=function(u){var n=null,A=goog.global.trustedTypes||goog.global.TrustedTypes;if(!A||!A.createPolicy)return n;try{n=A.createPolicy(u,{createHTML:goog.identity_,createScript:goog.identity_,createScriptURL:goog.identity_,createURL:goog.identity_})}catch(C){goog.logToConsole_(C.message)}return n},goog.TRUSTED_TYPES_POLICY_=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#base"):null,goog.object={},goog.object.is=function(u,n){return u===n?u!==0||1/u==1/n:u!=u&&n!=n},goog.object.forEach=function(u,n,A){for(var C in u)n.call(A,u[C],C,u)},goog.object.filter=function(u,n,A){var C,d={};for(C in u)n.call(A,u[C],C,u)&&(d[C]=u[C]);return d},goog.object.map=function(u,n,A){var C,d={};for(C in u)d[C]=n.call(A,u[C],C,u);return d},goog.object.some=function(u,n,A){for(var C in u)if(n.call(A,u[C],C,u))return!0;return!1},goog.object.every=function(u,n,A){for(var C in u)if(!n.call(A,u[C],C,u))return!1;return!0},goog.object.getCount=function(u){var n,A=0;for(n in u)A++;return A},goog.object.getAnyKey=function(u){for(var n in u)return n},goog.object.getAnyValue=function(u){for(var n in u)return u[n]},goog.object.contains=function(u,n){return goog.object.containsValue(u,n)},goog.object.getValues=function(u){var n,A=[],C=0;for(n in u)A[C++]=u[n];return A},goog.object.getKeys=function(u){var n,A=[],C=0;for(n in u)A[C++]=n;return A},goog.object.getValueByKeys=function(u,n){var A=goog.isArrayLike(n),C=A?n:arguments;for(A=A?0:1;A<C.length;A++){if(u==null)return;u=u[C[A]]}return u},goog.object.containsKey=function(u,n){return u!==null&&n in u},goog.object.containsValue=function(u,n){for(var A in u)if(u[A]==n)return!0;return!1},goog.object.findKey=function(u,n,A){for(var C in u)if(n.call(A,u[C],C,u))return C},goog.object.findValue=function(u,n,A){return(n=goog.object.findKey(u,n,A))&&u[n]},goog.object.isEmpty=function(u){for(var n in u)return!1;return!0},goog.object.clear=function(u){for(var n in u)delete u[n]},goog.object.remove=function(u,n){var A;return(A=n in u)&&delete u[n],A},goog.object.add=function(u,n,A){if(u!==null&&n in u)throw Error('The object already contains the key "'+n+'"');goog.object.set(u,n,A)},goog.object.get=function(u,n,A){return u!==null&&n in u?u[n]:A},goog.object.set=function(u,n,A){u[n]=A},goog.object.setIfUndefined=function(u,n,A){return n in u?u[n]:u[n]=A},goog.object.setWithReturnValueIfNotSet=function(u,n,A){return n in u?u[n]:(A=A(),u[n]=A)},goog.object.equals=function(u,n){for(var A in u)if(!(A in n)||u[A]!==n[A])return!1;for(var C in n)if(!(C in u))return!1;return!0},goog.object.clone=function(u){var n,A={};for(n in u)A[n]=u[n];return A},goog.object.unsafeClone=function(u){var n=goog.typeOf(u);if(n=="object"||n=="array"){if(goog.isFunction(u.clone))return u.clone();for(var A in n=n=="array"?[]:{},u)n[A]=goog.object.unsafeClone(u[A]);return n}return u},goog.object.transpose=function(u){var n,A={};for(n in u)A[u[n]]=n;return A},goog.object.PROTOTYPE_FIELDS_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),goog.object.extend=function(u,n){for(var A,C,d=1;d<arguments.length;d++){for(A in C=arguments[d])u[A]=C[A];for(var g=0;g<goog.object.PROTOTYPE_FIELDS_.length;g++)A=goog.object.PROTOTYPE_FIELDS_[g],Object.prototype.hasOwnProperty.call(C,A)&&(u[A]=C[A])}},goog.object.create=function(u){var n=arguments.length;if(n==1&&Array.isArray(arguments[0]))return goog.object.create.apply(null,arguments[0]);if(n%2)throw Error("Uneven number of arguments");for(var A={},C=0;C<n;C+=2)A[arguments[C]]=arguments[C+1];return A},goog.object.createSet=function(u){var n=arguments.length;if(n==1&&Array.isArray(arguments[0]))return goog.object.createSet.apply(null,arguments[0]);for(var A={},C=0;C<n;C++)A[arguments[C]]=!0;return A},goog.object.createImmutableView=function(u){var n=u;return Object.isFrozen&&!Object.isFrozen(u)&&(n=Object.create(u),Object.freeze(n)),n},goog.object.isImmutableView=function(u){return!!Object.isFrozen&&Object.isFrozen(u)},goog.object.getAllPropertyNames=function(u,n,A){if(!u)return[];if(!Object.getOwnPropertyNames||!Object.getPrototypeOf)return goog.object.getKeys(u);for(var C={};u&&(u!==Object.prototype||n)&&(u!==Function.prototype||A);){for(var d=Object.getOwnPropertyNames(u),g=0;g<d.length;g++)C[d[g]]=!0;u=Object.getPrototypeOf(u)}return goog.object.getKeys(C)},goog.object.getSuperClass=function(u){return(u=Object.getPrototypeOf(u.prototype))&&u.constructor};var jspb={asserts:{}};jspb.asserts.doAssertFailure=function(u,n,A,C){var d="Assertion failed";if(A){d+=": "+A;var g=C}else u&&(d+=": "+u,g=n);throw Error(""+d,g||[])},jspb.asserts.assert=function(u,n,A){for(var C=[],d=2;d<arguments.length;++d)C[d-2]=arguments[d];return u||jspb.asserts.doAssertFailure("",null,n,C),u},jspb.asserts.assertString=function(u,n,A){for(var C=[],d=2;d<arguments.length;++d)C[d-2]=arguments[d];return typeof u!="string"&&jspb.asserts.doAssertFailure("Expected string but got %s: %s.",[goog.typeOf(u),u],n,C),u},jspb.asserts.assertArray=function(u,n,A){for(var C=[],d=2;d<arguments.length;++d)C[d-2]=arguments[d];return Array.isArray(u)||jspb.asserts.doAssertFailure("Expected array but got %s: %s.",[goog.typeOf(u),u],n,C),u},jspb.asserts.fail=function(u,n){for(var A=[],C=1;C<arguments.length;++C)A[C-1]=arguments[C];throw Error("Failure"+(u?": "+u:""),A)},jspb.asserts.assertInstanceof=function(u,n,A,C){for(var d=[],g=3;g<arguments.length;++g)d[g-3]=arguments[g];return u instanceof n||jspb.asserts.doAssertFailure("Expected instanceof %s but got %s.",[jspb.asserts.getType(n),jspb.asserts.getType(u)],A,d),u},jspb.asserts.getType=function(u){return u instanceof Function?u.displayName||u.name||"unknown type name":u instanceof Object?u.constructor.displayName||u.constructor.name||Object.prototype.toString.call(u):u===null?"null":typeof u},jspb.BinaryConstants={},jspb.ConstBinaryMessage=function(){},jspb.BinaryMessage=function(){},jspb.BinaryConstants.FieldType={INVALID:-1,DOUBLE:1,FLOAT:2,INT64:3,UINT64:4,INT32:5,FIXED64:6,FIXED32:7,BOOL:8,STRING:9,GROUP:10,MESSAGE:11,BYTES:12,UINT32:13,ENUM:14,SFIXED32:15,SFIXED64:16,SINT32:17,SINT64:18,FHASH64:30,VHASH64:31},jspb.BinaryConstants.WireType={INVALID:-1,VARINT:0,FIXED64:1,DELIMITED:2,START_GROUP:3,END_GROUP:4,FIXED32:5},jspb.BinaryConstants.FieldTypeToWireType=function(u){var n=jspb.BinaryConstants.FieldType,A=jspb.BinaryConstants.WireType;switch(u){case n.INT32:case n.INT64:case n.UINT32:case n.UINT64:case n.SINT32:case n.SINT64:case n.BOOL:case n.ENUM:case n.VHASH64:return A.VARINT;case n.DOUBLE:case n.FIXED64:case n.SFIXED64:case n.FHASH64:return A.FIXED64;case n.STRING:case n.MESSAGE:case n.BYTES:return A.DELIMITED;case n.FLOAT:case n.FIXED32:case n.SFIXED32:return A.FIXED32;default:return A.INVALID}},jspb.BinaryConstants.INVALID_FIELD_NUMBER=-1,jspb.BinaryConstants.FLOAT32_EPS=1401298464324817e-60,jspb.BinaryConstants.FLOAT32_MIN=11754943508222875e-54,jspb.BinaryConstants.FLOAT32_MAX=34028234663852886e22,jspb.BinaryConstants.FLOAT64_EPS=5e-324,jspb.BinaryConstants.FLOAT64_MIN=22250738585072014e-324,jspb.BinaryConstants.FLOAT64_MAX=17976931348623157e292,jspb.BinaryConstants.TWO_TO_20=1048576,jspb.BinaryConstants.TWO_TO_23=8388608,jspb.BinaryConstants.TWO_TO_31=2147483648,jspb.BinaryConstants.TWO_TO_32=4294967296,jspb.BinaryConstants.TWO_TO_52=4503599627370496,jspb.BinaryConstants.TWO_TO_63=9223372036854776e3,jspb.BinaryConstants.TWO_TO_64=18446744073709552e3,jspb.BinaryConstants.ZERO_HASH="\0\0\0\0\0\0\0\0",goog.debug={},goog.debug.Error=function(u){if(Error.captureStackTrace)Error.captureStackTrace(this,goog.debug.Error);else{var n=Error().stack;n&&(this.stack=n)}u&&(this.message=String(u)),this.reportErrorToServer=!0},goog.inherits(goog.debug.Error,Error),goog.debug.Error.prototype.name="CustomError",goog.dom={},goog.dom.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,ENTITY_REFERENCE:5,ENTITY:6,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9,DOCUMENT_TYPE:10,DOCUMENT_FRAGMENT:11,NOTATION:12},goog.asserts={},goog.asserts.ENABLE_ASSERTS=goog.DEBUG,goog.asserts.AssertionError=function(u,n){goog.debug.Error.call(this,goog.asserts.subs_(u,n)),this.messagePattern=u},goog.inherits(goog.asserts.AssertionError,goog.debug.Error),goog.asserts.AssertionError.prototype.name="AssertionError",goog.asserts.DEFAULT_ERROR_HANDLER=function(u){throw u},goog.asserts.errorHandler_=goog.asserts.DEFAULT_ERROR_HANDLER,goog.asserts.subs_=function(u,n){for(var A="",C=(u=u.split("%s")).length-1,d=0;d<C;d++)A+=u[d]+(d<n.length?n[d]:"%s");return A+u[C]},goog.asserts.doAssertFailure_=function(u,n,A,C){var d="Assertion failed";if(A){d+=": "+A;var g=C}else u&&(d+=": "+u,g=n);u=new goog.asserts.AssertionError(""+d,g||[]),goog.asserts.errorHandler_(u)},goog.asserts.setErrorHandler=function(u){goog.asserts.ENABLE_ASSERTS&&(goog.asserts.errorHandler_=u)},goog.asserts.assert=function(u,n,A){return goog.asserts.ENABLE_ASSERTS&&!u&&goog.asserts.doAssertFailure_("",null,n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertExists=function(u,n,A){return goog.asserts.ENABLE_ASSERTS&&u==null&&goog.asserts.doAssertFailure_("Expected to exist: %s.",[u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.fail=function(u,n){goog.asserts.ENABLE_ASSERTS&&goog.asserts.errorHandler_(new goog.asserts.AssertionError("Failure"+(u?": "+u:""),Array.prototype.slice.call(arguments,1)))},goog.asserts.assertNumber=function(u,n,A){return goog.asserts.ENABLE_ASSERTS&&typeof u!="number"&&goog.asserts.doAssertFailure_("Expected number but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertString=function(u,n,A){return goog.asserts.ENABLE_ASSERTS&&typeof u!="string"&&goog.asserts.doAssertFailure_("Expected string but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertFunction=function(u,n,A){return goog.asserts.ENABLE_ASSERTS&&!goog.isFunction(u)&&goog.asserts.doAssertFailure_("Expected function but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertObject=function(u,n,A){return goog.asserts.ENABLE_ASSERTS&&!goog.isObject(u)&&goog.asserts.doAssertFailure_("Expected object but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertArray=function(u,n,A){return goog.asserts.ENABLE_ASSERTS&&!Array.isArray(u)&&goog.asserts.doAssertFailure_("Expected array but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertBoolean=function(u,n,A){return goog.asserts.ENABLE_ASSERTS&&typeof u!="boolean"&&goog.asserts.doAssertFailure_("Expected boolean but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertElement=function(u,n,A){return!goog.asserts.ENABLE_ASSERTS||goog.isObject(u)&&u.nodeType==goog.dom.NodeType.ELEMENT||goog.asserts.doAssertFailure_("Expected Element but got %s: %s.",[goog.typeOf(u),u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertInstanceof=function(u,n,A,C){return!goog.asserts.ENABLE_ASSERTS||u instanceof n||goog.asserts.doAssertFailure_("Expected instanceof %s but got %s.",[goog.asserts.getType_(n),goog.asserts.getType_(u)],A,Array.prototype.slice.call(arguments,3)),u},goog.asserts.assertFinite=function(u,n,A){return!goog.asserts.ENABLE_ASSERTS||typeof u=="number"&&isFinite(u)||goog.asserts.doAssertFailure_("Expected %s to be a finite number but it is not.",[u],n,Array.prototype.slice.call(arguments,2)),u},goog.asserts.assertObjectPrototypeIsIntact=function(){for(var u in Object.prototype)goog.asserts.fail(u+" should not be enumerable in Object.prototype.")},goog.asserts.getType_=function(u){return u instanceof Function?u.displayName||u.name||"unknown type name":u instanceof Object?u.constructor.displayName||u.constructor.name||Object.prototype.toString.call(u):u===null?"null":typeof u},goog.array={},goog.NATIVE_ARRAY_PROTOTYPES=goog.TRUSTED_SITE,goog.array.ASSUME_NATIVE_FUNCTIONS=2012<goog.FEATURESET_YEAR,goog.array.peek=function(u){return u[u.length-1]},goog.array.last=goog.array.peek,goog.array.indexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.indexOf)?function(u,n,A){return goog.asserts.assert(u.length!=null),Array.prototype.indexOf.call(u,n,A)}:function(u,n,A){if(A=A==null?0:0>A?Math.max(0,u.length+A):A,typeof u=="string")return typeof n!="string"||n.length!=1?-1:u.indexOf(n,A);for(;A<u.length;A++)if(A in u&&u[A]===n)return A;return-1},goog.array.lastIndexOf=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.lastIndexOf)?function(u,n,A){return goog.asserts.assert(u.length!=null),Array.prototype.lastIndexOf.call(u,n,A==null?u.length-1:A)}:function(u,n,A){if(0>(A=A==null?u.length-1:A)&&(A=Math.max(0,u.length+A)),typeof u=="string")return typeof n!="string"||n.length!=1?-1:u.lastIndexOf(n,A);for(;0<=A;A--)if(A in u&&u[A]===n)return A;return-1},goog.array.forEach=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.forEach)?function(u,n,A){goog.asserts.assert(u.length!=null),Array.prototype.forEach.call(u,n,A)}:function(u,n,A){for(var C=u.length,d=typeof u=="string"?u.split(""):u,g=0;g<C;g++)g in d&&n.call(A,d[g],g,u)},goog.array.forEachRight=function(u,n,A){var C=u.length,d=typeof u=="string"?u.split(""):u;for(--C;0<=C;--C)C in d&&n.call(A,d[C],C,u)},goog.array.filter=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.filter)?function(u,n,A){return goog.asserts.assert(u.length!=null),Array.prototype.filter.call(u,n,A)}:function(u,n,A){for(var C=u.length,d=[],g=0,i=typeof u=="string"?u.split(""):u,_=0;_<C;_++)if(_ in i){var j=i[_];n.call(A,j,_,u)&&(d[g++]=j)}return d},goog.array.map=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.map)?function(u,n,A){return goog.asserts.assert(u.length!=null),Array.prototype.map.call(u,n,A)}:function(u,n,A){for(var C=u.length,d=Array(C),g=typeof u=="string"?u.split(""):u,i=0;i<C;i++)i in g&&(d[i]=n.call(A,g[i],i,u));return d},goog.array.reduce=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduce)?function(u,n,A,C){return goog.asserts.assert(u.length!=null),C&&(n=goog.bind(n,C)),Array.prototype.reduce.call(u,n,A)}:function(u,n,A,C){var d=A;return goog.array.forEach(u,function(g,i){d=n.call(C,d,g,i,u)}),d},goog.array.reduceRight=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.reduceRight)?function(u,n,A,C){return goog.asserts.assert(u.length!=null),goog.asserts.assert(n!=null),C&&(n=goog.bind(n,C)),Array.prototype.reduceRight.call(u,n,A)}:function(u,n,A,C){var d=A;return goog.array.forEachRight(u,function(g,i){d=n.call(C,d,g,i,u)}),d},goog.array.some=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.some)?function(u,n,A){return goog.asserts.assert(u.length!=null),Array.prototype.some.call(u,n,A)}:function(u,n,A){for(var C=u.length,d=typeof u=="string"?u.split(""):u,g=0;g<C;g++)if(g in d&&n.call(A,d[g],g,u))return!0;return!1},goog.array.every=goog.NATIVE_ARRAY_PROTOTYPES&&(goog.array.ASSUME_NATIVE_FUNCTIONS||Array.prototype.every)?function(u,n,A){return goog.asserts.assert(u.length!=null),Array.prototype.every.call(u,n,A)}:function(u,n,A){for(var C=u.length,d=typeof u=="string"?u.split(""):u,g=0;g<C;g++)if(g in d&&!n.call(A,d[g],g,u))return!1;return!0},goog.array.count=function(u,n,A){var C=0;return goog.array.forEach(u,function(d,g,i){n.call(A,d,g,i)&&++C},A),C},goog.array.find=function(u,n,A){return 0>(n=goog.array.findIndex(u,n,A))?null:typeof u=="string"?u.charAt(n):u[n]},goog.array.findIndex=function(u,n,A){for(var C=u.length,d=typeof u=="string"?u.split(""):u,g=0;g<C;g++)if(g in d&&n.call(A,d[g],g,u))return g;return-1},goog.array.findRight=function(u,n,A){return 0>(n=goog.array.findIndexRight(u,n,A))?null:typeof u=="string"?u.charAt(n):u[n]},goog.array.findIndexRight=function(u,n,A){var C=u.length,d=typeof u=="string"?u.split(""):u;for(--C;0<=C;C--)if(C in d&&n.call(A,d[C],C,u))return C;return-1},goog.array.contains=function(u,n){return 0<=goog.array.indexOf(u,n)},goog.array.isEmpty=function(u){return u.length==0},goog.array.clear=function(u){if(!Array.isArray(u))for(var n=u.length-1;0<=n;n--)delete u[n];u.length=0},goog.array.insert=function(u,n){goog.array.contains(u,n)||u.push(n)},goog.array.insertAt=function(u,n,A){goog.array.splice(u,A,0,n)},goog.array.insertArrayAt=function(u,n,A){goog.partial(goog.array.splice,u,A,0).apply(null,n)},goog.array.insertBefore=function(u,n,A){var C;arguments.length==2||0>(C=goog.array.indexOf(u,A))?u.push(n):goog.array.insertAt(u,n,C)},goog.array.remove=function(u,n){var A;return(A=0<=(n=goog.array.indexOf(u,n)))&&goog.array.removeAt(u,n),A},goog.array.removeLast=function(u,n){return 0<=(n=goog.array.lastIndexOf(u,n))&&(goog.array.removeAt(u,n),!0)},goog.array.removeAt=function(u,n){return goog.asserts.assert(u.length!=null),Array.prototype.splice.call(u,n,1).length==1},goog.array.removeIf=function(u,n,A){return 0<=(n=goog.array.findIndex(u,n,A))&&(goog.array.removeAt(u,n),!0)},goog.array.removeAllIf=function(u,n,A){var C=0;return goog.array.forEachRight(u,function(d,g){n.call(A,d,g,u)&&goog.array.removeAt(u,g)&&C++}),C},goog.array.concat=function(u){return Array.prototype.concat.apply([],arguments)},goog.array.join=function(u){return Array.prototype.concat.apply([],arguments)},goog.array.toArray=function(u){var n=u.length;if(0<n){for(var A=Array(n),C=0;C<n;C++)A[C]=u[C];return A}return[]},goog.array.clone=goog.array.toArray,goog.array.extend=function(u,n){for(var A=1;A<arguments.length;A++){var C=arguments[A];if(goog.isArrayLike(C)){var d=u.length||0,g=C.length||0;u.length=d+g;for(var i=0;i<g;i++)u[d+i]=C[i]}else u.push(C)}},goog.array.splice=function(u,n,A,C){return goog.asserts.assert(u.length!=null),Array.prototype.splice.apply(u,goog.array.slice(arguments,1))},goog.array.slice=function(u,n,A){return goog.asserts.assert(u.length!=null),2>=arguments.length?Array.prototype.slice.call(u,n):Array.prototype.slice.call(u,n,A)},goog.array.removeDuplicates=function(u,n,A){n=n||u;var C=function(j){return goog.isObject(j)?"o"+goog.getUid(j):(typeof j).charAt(0)+j};A=A||C,C={};for(var d=0,g=0;g<u.length;){var i=u[g++],_=A(i);Object.prototype.hasOwnProperty.call(C,_)||(C[_]=!0,n[d++]=i)}n.length=d},goog.array.binarySearch=function(u,n,A){return goog.array.binarySearch_(u,A||goog.array.defaultCompare,!1,n)},goog.array.binarySelect=function(u,n,A){return goog.array.binarySearch_(u,n,!0,void 0,A)},goog.array.binarySearch_=function(u,n,A,C,d){for(var g,i=0,_=u.length;i<_;){var j=i+(_-i>>>1),$=A?n.call(d,u[j],j,u):n(C,u[j]);0<$?i=j+1:(_=j,g=!$)}return g?i:-i-1},goog.array.sort=function(u,n){u.sort(n||goog.array.defaultCompare)},goog.array.stableSort=function(u,n){for(var A=Array(u.length),C=0;C<u.length;C++)A[C]={index:C,value:u[C]};var d=n||goog.array.defaultCompare;for(goog.array.sort(A,function(g,i){return d(g.value,i.value)||g.index-i.index}),C=0;C<u.length;C++)u[C]=A[C].value},goog.array.sortByKey=function(u,n,A){var C=A||goog.array.defaultCompare;goog.array.sort(u,function(d,g){return C(n(d),n(g))})},goog.array.sortObjectsByKey=function(u,n,A){goog.array.sortByKey(u,function(C){return C[n]},A)},goog.array.isSorted=function(u,n,A){n=n||goog.array.defaultCompare;for(var C=1;C<u.length;C++){var d=n(u[C-1],u[C]);if(0<d||d==0&&A)return!1}return!0},goog.array.equals=function(u,n,A){if(!goog.isArrayLike(u)||!goog.isArrayLike(n)||u.length!=n.length)return!1;var C=u.length;A=A||goog.array.defaultCompareEquality;for(var d=0;d<C;d++)if(!A(u[d],n[d]))return!1;return!0},goog.array.compare3=function(u,n,A){A=A||goog.array.defaultCompare;for(var C=Math.min(u.length,n.length),d=0;d<C;d++){var g=A(u[d],n[d]);if(g!=0)return g}return goog.array.defaultCompare(u.length,n.length)},goog.array.defaultCompare=function(u,n){return u>n?1:u<n?-1:0},goog.array.inverseDefaultCompare=function(u,n){return-goog.array.defaultCompare(u,n)},goog.array.defaultCompareEquality=function(u,n){return u===n},goog.array.binaryInsert=function(u,n,A){return 0>(A=goog.array.binarySearch(u,n,A))&&(goog.array.insertAt(u,n,-(A+1)),!0)},goog.array.binaryRemove=function(u,n,A){return 0<=(n=goog.array.binarySearch(u,n,A))&&goog.array.removeAt(u,n)},goog.array.bucket=function(u,n,A){for(var C={},d=0;d<u.length;d++){var g=u[d],i=n.call(A,g,d,u);i!==void 0&&(C[i]||(C[i]=[])).push(g)}return C},goog.array.toObject=function(u,n,A){var C={};return goog.array.forEach(u,function(d,g){C[n.call(A,d,g,u)]=d}),C},goog.array.range=function(u,n,A){var C=[],d=0,g=u;if(n!==void 0&&(d=u,g=n),0>(A=A||1)*(g-d))return[];if(0<A)for(u=d;u<g;u+=A)C.push(u);else for(u=d;u>g;u+=A)C.push(u);return C},goog.array.repeat=function(u,n){for(var A=[],C=0;C<n;C++)A[C]=u;return A},goog.array.flatten=function(u){for(var n=[],A=0;A<arguments.length;A++){var C=arguments[A];if(Array.isArray(C))for(var d=0;d<C.length;d+=8192){var g=goog.array.slice(C,d,d+8192);g=goog.array.flatten.apply(null,g);for(var i=0;i<g.length;i++)n.push(g[i])}else n.push(C)}return n},goog.array.rotate=function(u,n){return goog.asserts.assert(u.length!=null),u.length&&(0<(n%=u.length)?Array.prototype.unshift.apply(u,u.splice(-n,n)):0>n&&Array.prototype.push.apply(u,u.splice(0,-n))),u},goog.array.moveItem=function(u,n,A){goog.asserts.assert(0<=n&&n<u.length),goog.asserts.assert(0<=A&&A<u.length),n=Array.prototype.splice.call(u,n,1),Array.prototype.splice.call(u,A,0,n[0])},goog.array.zip=function(u){if(!arguments.length)return[];for(var n=[],A=arguments[0].length,C=1;C<arguments.length;C++)arguments[C].length<A&&(A=arguments[C].length);for(C=0;C<A;C++){for(var d=[],g=0;g<arguments.length;g++)d.push(arguments[g][C]);n.push(d)}return n},goog.array.shuffle=function(u,n){n=n||Math.random;for(var A=u.length-1;0<A;A--){var C=Math.floor(n()*(A+1)),d=u[A];u[A]=u[C],u[C]=d}},goog.array.copyByIndex=function(u,n){var A=[];return goog.array.forEach(n,function(C){A.push(u[C])}),A},goog.array.concatMap=function(u,n,A){return goog.array.concat.apply([],goog.array.map(u,n,A))},goog.crypt={},goog.crypt.stringToByteArray=function(u){for(var n=[],A=0,C=0;C<u.length;C++){var d=u.charCodeAt(C);255<d&&(n[A++]=255&d,d>>=8),n[A++]=d}return n},goog.crypt.byteArrayToString=function(u){if(8192>=u.length)return String.fromCharCode.apply(null,u);for(var n="",A=0;A<u.length;A+=8192){var C=goog.array.slice(u,A,A+8192);n+=String.fromCharCode.apply(null,C)}return n},goog.crypt.byteArrayToHex=function(u,n){return goog.array.map(u,function(A){return 1<(A=A.toString(16)).length?A:"0"+A}).join(n||"")},goog.crypt.hexToByteArray=function(u){goog.asserts.assert(u.length%2==0,"Key string length must be multiple of 2");for(var n=[],A=0;A<u.length;A+=2)n.push(parseInt(u.substring(A,A+2),16));return n},goog.crypt.stringToUtf8ByteArray=function(u){for(var n=[],A=0,C=0;C<u.length;C++){var d=u.charCodeAt(C);128>d?n[A++]=d:(2048>d?n[A++]=d>>6|192:((64512&d)==55296&&C+1<u.length&&(64512&u.charCodeAt(C+1))==56320?(d=65536+((1023&d)<<10)+(1023&u.charCodeAt(++C)),n[A++]=d>>18|240,n[A++]=d>>12&63|128):n[A++]=d>>12|224,n[A++]=d>>6&63|128),n[A++]=63&d|128)}return n},goog.crypt.utf8ByteArrayToString=function(u){for(var n=[],A=0,C=0;A<u.length;){var d=u[A++];if(128>d)n[C++]=String.fromCharCode(d);else if(191<d&&224>d){var g=u[A++];n[C++]=String.fromCharCode((31&d)<<6|63&g)}else if(239<d&&365>d){g=u[A++];var i=u[A++];d=((7&d)<<18|(63&g)<<12|(63&i)<<6|63&u[A++])-65536,n[C++]=String.fromCharCode(55296+(d>>10)),n[C++]=String.fromCharCode(56320+(1023&d))}else g=u[A++],i=u[A++],n[C++]=String.fromCharCode((15&d)<<12|(63&g)<<6|63&i)}return n.join("")},goog.crypt.xorByteArray=function(u,n){goog.asserts.assert(u.length==n.length,"XOR array lengths must match");for(var A=[],C=0;C<u.length;C++)A.push(u[C]^n[C]);return A},goog.dom.asserts={},goog.dom.asserts.assertIsLocation=function(u){if(goog.asserts.ENABLE_ASSERTS){var n=goog.dom.asserts.getWindow_(u);n&&(!u||!(u instanceof n.Location)&&u instanceof n.Element)&&goog.asserts.fail("Argument is not a Location (or a non-Element mock); got: %s",goog.dom.asserts.debugStringForType_(u))}return u},goog.dom.asserts.assertIsElementType_=function(u,n){if(goog.asserts.ENABLE_ASSERTS){var A=goog.dom.asserts.getWindow_(u);A&&A[n]!==void 0&&(u&&(u instanceof A[n]||!(u instanceof A.Location||u instanceof A.Element))||goog.asserts.fail("Argument is not a %s (or a non-Element, non-Location mock); got: %s",n,goog.dom.asserts.debugStringForType_(u)))}return u},goog.dom.asserts.assertIsHTMLAnchorElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLAnchorElement")},goog.dom.asserts.assertIsHTMLButtonElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLButtonElement")},goog.dom.asserts.assertIsHTMLLinkElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLLinkElement")},goog.dom.asserts.assertIsHTMLImageElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLImageElement")},goog.dom.asserts.assertIsHTMLAudioElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLAudioElement")},goog.dom.asserts.assertIsHTMLVideoElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLVideoElement")},goog.dom.asserts.assertIsHTMLInputElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLInputElement")},goog.dom.asserts.assertIsHTMLTextAreaElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLTextAreaElement")},goog.dom.asserts.assertIsHTMLCanvasElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLCanvasElement")},goog.dom.asserts.assertIsHTMLEmbedElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLEmbedElement")},goog.dom.asserts.assertIsHTMLFormElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLFormElement")},goog.dom.asserts.assertIsHTMLFrameElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLFrameElement")},goog.dom.asserts.assertIsHTMLIFrameElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLIFrameElement")},goog.dom.asserts.assertIsHTMLObjectElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLObjectElement")},goog.dom.asserts.assertIsHTMLScriptElement=function(u){return goog.dom.asserts.assertIsElementType_(u,"HTMLScriptElement")},goog.dom.asserts.debugStringForType_=function(u){if(!goog.isObject(u))return u===void 0?"undefined":u===null?"null":typeof u;try{return u.constructor.displayName||u.constructor.name||Object.prototype.toString.call(u)}catch(n){return"<object could not be stringified>"}},goog.dom.asserts.getWindow_=function(u){try{var n=u&&u.ownerDocument,A=n&&(n.defaultView||n.parentWindow);if((A=A||goog.global).Element&&A.Location)return A}catch(C){}return null},goog.functions={},goog.functions.constant=function(u){return function(){return u}},goog.functions.FALSE=function(){return!1},goog.functions.TRUE=function(){return!0},goog.functions.NULL=function(){return null},goog.functions.identity=function(u,n){return u},goog.functions.error=function(u){return function(){throw Error(u)}},goog.functions.fail=function(u){return function(){throw u}},goog.functions.lock=function(u,n){return n=n||0,function(){return u.apply(this,Array.prototype.slice.call(arguments,0,n))}},goog.functions.nth=function(u){return function(){return arguments[u]}},goog.functions.partialRight=function(u,n){var A=Array.prototype.slice.call(arguments,1);return function(){var C=Array.prototype.slice.call(arguments);return C.push.apply(C,A),u.apply(this,C)}},goog.functions.withReturnValue=function(u,n){return goog.functions.sequence(u,goog.functions.constant(n))},goog.functions.equalTo=function(u,n){return function(A){return n?u==A:u===A}},goog.functions.compose=function(u,n){var A=arguments,C=A.length;return function(){var d;C&&(d=A[C-1].apply(this,arguments));for(var g=C-2;0<=g;g--)d=A[g].call(this,d);return d}},goog.functions.sequence=function(u){var n=arguments,A=n.length;return function(){for(var C,d=0;d<A;d++)C=n[d].apply(this,arguments);return C}},goog.functions.and=function(u){var n=arguments,A=n.length;return function(){for(var C=0;C<A;C++)if(!n[C].apply(this,arguments))return!1;return!0}},goog.functions.or=function(u){var n=arguments,A=n.length;return function(){for(var C=0;C<A;C++)if(n[C].apply(this,arguments))return!0;return!1}},goog.functions.not=function(u){return function(){return!u.apply(this,arguments)}},goog.functions.create=function(u,n){var A=function(){};return A.prototype=u.prototype,A=new A,u.apply(A,Array.prototype.slice.call(arguments,1)),A},goog.functions.CACHE_RETURN_VALUE=!0,goog.functions.cacheReturnValue=function(u){var n,A=!1;return function(){return goog.functions.CACHE_RETURN_VALUE?(A||(n=u(),A=!0),n):u()}},goog.functions.once=function(u){var n=u;return function(){if(n){var A=n;n=null,A()}}},goog.functions.debounce=function(u,n,A){var C=0;return function(d){goog.global.clearTimeout(C);var g=arguments;C=goog.global.setTimeout(function(){u.apply(A,g)},n)}},goog.functions.throttle=function(u,n,A){var C=0,d=!1,g=[],i=function(){C=0,d&&(d=!1,_())},_=function(){C=goog.global.setTimeout(i,n),u.apply(A,g)};return function(j){g=arguments,C?d=!0:_()}},goog.functions.rateLimit=function(u,n,A){var C=0,d=function(){C=0};return function(g){C||(C=goog.global.setTimeout(d,n),u.apply(A,arguments))}},goog.dom.HtmlElement=function(){},goog.dom.TagName=function(u){this.tagName_=u},goog.dom.TagName.prototype.toString=function(){return this.tagName_},goog.dom.TagName.A=new goog.dom.TagName("A"),goog.dom.TagName.ABBR=new goog.dom.TagName("ABBR"),goog.dom.TagName.ACRONYM=new goog.dom.TagName("ACRONYM"),goog.dom.TagName.ADDRESS=new goog.dom.TagName("ADDRESS"),goog.dom.TagName.APPLET=new goog.dom.TagName("APPLET"),goog.dom.TagName.AREA=new goog.dom.TagName("AREA"),goog.dom.TagName.ARTICLE=new goog.dom.TagName("ARTICLE"),goog.dom.TagName.ASIDE=new goog.dom.TagName("ASIDE"),goog.dom.TagName.AUDIO=new goog.dom.TagName("AUDIO"),goog.dom.TagName.B=new goog.dom.TagName("B"),goog.dom.TagName.BASE=new goog.dom.TagName("BASE"),goog.dom.TagName.BASEFONT=new goog.dom.TagName("BASEFONT"),goog.dom.TagName.BDI=new goog.dom.TagName("BDI"),goog.dom.TagName.BDO=new goog.dom.TagName("BDO"),goog.dom.TagName.BIG=new goog.dom.TagName("BIG"),goog.dom.TagName.BLOCKQUOTE=new goog.dom.TagName("BLOCKQUOTE"),goog.dom.TagName.BODY=new goog.dom.TagName("BODY"),goog.dom.TagName.BR=new goog.dom.TagName("BR"),goog.dom.TagName.BUTTON=new goog.dom.TagName("BUTTON"),goog.dom.TagName.CANVAS=new goog.dom.TagName("CANVAS"),goog.dom.TagName.CAPTION=new goog.dom.TagName("CAPTION"),goog.dom.TagName.CENTER=new goog.dom.TagName("CENTER"),goog.dom.TagName.CITE=new goog.dom.TagName("CITE"),goog.dom.TagName.CODE=new goog.dom.TagName("CODE"),goog.dom.TagName.COL=new goog.dom.TagName("COL"),goog.dom.TagName.COLGROUP=new goog.dom.TagName("COLGROUP"),goog.dom.TagName.COMMAND=new goog.dom.TagName("COMMAND"),goog.dom.TagName.DATA=new goog.dom.TagName("DATA"),goog.dom.TagName.DATALIST=new goog.dom.TagName("DATALIST"),goog.dom.TagName.DD=new goog.dom.TagName("DD"),goog.dom.TagName.DEL=new goog.dom.TagName("DEL"),goog.dom.TagName.DETAILS=new goog.dom.TagName("DETAILS"),goog.dom.TagName.DFN=new goog.dom.TagName("DFN"),goog.dom.TagName.DIALOG=new goog.dom.TagName("DIALOG"),goog.dom.TagName.DIR=new goog.dom.TagName("DIR"),goog.dom.TagName.DIV=new goog.dom.TagName("DIV"),goog.dom.TagName.DL=new goog.dom.TagName("DL"),goog.dom.TagName.DT=new goog.dom.TagName("DT"),goog.dom.TagName.EM=new goog.dom.TagName("EM"),goog.dom.TagName.EMBED=new goog.dom.TagName("EMBED"),goog.dom.TagName.FIELDSET=new goog.dom.TagName("FIELDSET"),goog.dom.TagName.FIGCAPTION=new goog.dom.TagName("FIGCAPTION"),goog.dom.TagName.FIGURE=new goog.dom.TagName("FIGURE"),goog.dom.TagName.FONT=new goog.dom.TagName("FONT"),goog.dom.TagName.FOOTER=new goog.dom.TagName("FOOTER"),goog.dom.TagName.FORM=new goog.dom.TagName("FORM"),goog.dom.TagName.FRAME=new goog.dom.TagName("FRAME"),goog.dom.TagName.FRAMESET=new goog.dom.TagName("FRAMESET"),goog.dom.TagName.H1=new goog.dom.TagName("H1"),goog.dom.TagName.H2=new goog.dom.TagName("H2"),goog.dom.TagName.H3=new goog.dom.TagName("H3"),goog.dom.TagName.H4=new goog.dom.TagName("H4"),goog.dom.TagName.H5=new goog.dom.TagName("H5"),goog.dom.TagName.H6=new goog.dom.TagName("H6"),goog.dom.TagName.HEAD=new goog.dom.TagName("HEAD"),goog.dom.TagName.HEADER=new goog.dom.TagName("HEADER"),goog.dom.TagName.HGROUP=new goog.dom.TagName("HGROUP"),goog.dom.TagName.HR=new goog.dom.TagName("HR"),goog.dom.TagName.HTML=new goog.dom.TagName("HTML"),goog.dom.TagName.I=new goog.dom.TagName("I"),goog.dom.TagName.IFRAME=new goog.dom.TagName("IFRAME"),goog.dom.TagName.IMG=new goog.dom.TagName("IMG"),goog.dom.TagName.INPUT=new goog.dom.TagName("INPUT"),goog.dom.TagName.INS=new goog.dom.TagName("INS"),goog.dom.TagName.ISINDEX=new goog.dom.TagName("ISINDEX"),goog.dom.TagName.KBD=new goog.dom.TagName("KBD"),goog.dom.TagName.KEYGEN=new goog.dom.TagName("KEYGEN"),goog.dom.TagName.LABEL=new goog.dom.TagName("LABEL"),goog.dom.TagName.LEGEND=new goog.dom.TagName("LEGEND"),goog.dom.TagName.LI=new goog.dom.TagName("LI"),goog.dom.TagName.LINK=new goog.dom.TagName("LINK"),goog.dom.TagName.MAIN=new goog.dom.TagName("MAIN"),goog.dom.TagName.MAP=new goog.dom.TagName("MAP"),goog.dom.TagName.MARK=new goog.dom.TagName("MARK"),goog.dom.TagName.MATH=new goog.dom.TagName("MATH"),goog.dom.TagName.MENU=new goog.dom.TagName("MENU"),goog.dom.TagName.MENUITEM=new goog.dom.TagName("MENUITEM"),goog.dom.TagName.META=new goog.dom.TagName("META"),goog.dom.TagName.METER=new goog.dom.TagName("METER"),goog.dom.TagName.NAV=new goog.dom.TagName("NAV"),goog.dom.TagName.NOFRAMES=new goog.dom.TagName("NOFRAMES"),goog.dom.TagName.NOSCRIPT=new goog.dom.TagName("NOSCRIPT"),goog.dom.TagName.OBJECT=new goog.dom.TagName("OBJECT"),goog.dom.TagName.OL=new goog.dom.TagName("OL"),goog.dom.TagName.OPTGROUP=new goog.dom.TagName("OPTGROUP"),goog.dom.TagName.OPTION=new goog.dom.TagName("OPTION"),goog.dom.TagName.OUTPUT=new goog.dom.TagName("OUTPUT"),goog.dom.TagName.P=new goog.dom.TagName("P"),goog.dom.TagName.PARAM=new goog.dom.TagName("PARAM"),goog.dom.TagName.PICTURE=new goog.dom.TagName("PICTURE"),goog.dom.TagName.PRE=new goog.dom.TagName("PRE"),goog.dom.TagName.PROGRESS=new goog.dom.TagName("PROGRESS"),goog.dom.TagName.Q=new goog.dom.TagName("Q"),goog.dom.TagName.RP=new goog.dom.TagName("RP"),goog.dom.TagName.RT=new goog.dom.TagName("RT"),goog.dom.TagName.RTC=new goog.dom.TagName("RTC"),goog.dom.TagName.RUBY=new goog.dom.TagName("RUBY"),goog.dom.TagName.S=new goog.dom.TagName("S"),goog.dom.TagName.SAMP=new goog.dom.TagName("SAMP"),goog.dom.TagName.SCRIPT=new goog.dom.TagName("SCRIPT"),goog.dom.TagName.SECTION=new goog.dom.TagName("SECTION"),goog.dom.TagName.SELECT=new goog.dom.TagName("SELECT"),goog.dom.TagName.SMALL=new goog.dom.TagName("SMALL"),goog.dom.TagName.SOURCE=new goog.dom.TagName("SOURCE"),goog.dom.TagName.SPAN=new goog.dom.TagName("SPAN"),goog.dom.TagName.STRIKE=new goog.dom.TagName("STRIKE"),goog.dom.TagName.STRONG=new goog.dom.TagName("STRONG"),goog.dom.TagName.STYLE=new goog.dom.TagName("STYLE"),goog.dom.TagName.SUB=new goog.dom.TagName("SUB"),goog.dom.TagName.SUMMARY=new goog.dom.TagName("SUMMARY"),goog.dom.TagName.SUP=new goog.dom.TagName("SUP"),goog.dom.TagName.SVG=new goog.dom.TagName("SVG"),goog.dom.TagName.TABLE=new goog.dom.TagName("TABLE"),goog.dom.TagName.TBODY=new goog.dom.TagName("TBODY"),goog.dom.TagName.TD=new goog.dom.TagName("TD"),goog.dom.TagName.TEMPLATE=new goog.dom.TagName("TEMPLATE"),goog.dom.TagName.TEXTAREA=new goog.dom.TagName("TEXTAREA"),goog.dom.TagName.TFOOT=new goog.dom.TagName("TFOOT"),goog.dom.TagName.TH=new goog.dom.TagName("TH"),goog.dom.TagName.THEAD=new goog.dom.TagName("THEAD"),goog.dom.TagName.TIME=new goog.dom.TagName("TIME"),goog.dom.TagName.TITLE=new goog.dom.TagName("TITLE"),goog.dom.TagName.TR=new goog.dom.TagName("TR"),goog.dom.TagName.TRACK=new goog.dom.TagName("TRACK"),goog.dom.TagName.TT=new goog.dom.TagName("TT"),goog.dom.TagName.U=new goog.dom.TagName("U"),goog.dom.TagName.UL=new goog.dom.TagName("UL"),goog.dom.TagName.VAR=new goog.dom.TagName("VAR"),goog.dom.TagName.VIDEO=new goog.dom.TagName("VIDEO"),goog.dom.TagName.WBR=new goog.dom.TagName("WBR"),goog.dom.tags={},goog.dom.tags.VOID_TAGS_={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},goog.dom.tags.isVoidTag=function(u){return goog.dom.tags.VOID_TAGS_[u]===!0},goog.html={},goog.html.trustedtypes={},goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY=goog.TRUSTED_TYPES_POLICY_NAME?goog.createTrustedTypesPolicy(goog.TRUSTED_TYPES_POLICY_NAME+"#html"):null,goog.string={},goog.string.TypedString=function(){},goog.string.Const=function(u,n){this.stringConstValueWithSecurityContract__googStringSecurityPrivate_=u===goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_&&n||"",this.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_=goog.string.Const.TYPE_MARKER_},goog.string.Const.prototype.implementsGoogStringTypedString=!0,goog.string.Const.prototype.getTypedStringValue=function(){return this.stringConstValueWithSecurityContract__googStringSecurityPrivate_},goog.DEBUG&&(goog.string.Const.prototype.toString=function(){return"Const{"+this.stringConstValueWithSecurityContract__googStringSecurityPrivate_+"}"}),goog.string.Const.unwrap=function(u){return u instanceof goog.string.Const&&u.constructor===goog.string.Const&&u.STRING_CONST_TYPE_MARKER__GOOG_STRING_SECURITY_PRIVATE_===goog.string.Const.TYPE_MARKER_?u.stringConstValueWithSecurityContract__googStringSecurityPrivate_:(goog.asserts.fail("expected object of type Const, got '"+u+"'"),"type_error:Const")},goog.string.Const.from=function(u){return new goog.string.Const(goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_,u)},goog.string.Const.TYPE_MARKER_={},goog.string.Const.GOOG_STRING_CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.Const.EMPTY=goog.string.Const.from(""),goog.html.SafeScript=function(){this.privateDoNotAccessOrElseSafeScriptWrappedValue_="",this.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeScript.prototype.implementsGoogStringTypedString=!0,goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeScript.fromConstant=function(u){return(u=goog.string.Const.unwrap(u)).length===0?goog.html.SafeScript.EMPTY:goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeScript.fromConstantAndArgs=function(u,n){for(var A=[],C=1;C<arguments.length;C++)A.push(goog.html.SafeScript.stringify_(arguments[C]));return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse("("+goog.string.Const.unwrap(u)+")("+A.join(", ")+");")},goog.html.SafeScript.fromJson=function(u){return goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(goog.html.SafeScript.stringify_(u))},goog.html.SafeScript.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeScript.prototype.toString=function(){return"SafeScript{"+this.privateDoNotAccessOrElseSafeScriptWrappedValue_+"}"}),goog.html.SafeScript.unwrap=function(u){return goog.html.SafeScript.unwrapTrustedScript(u).toString()},goog.html.SafeScript.unwrapTrustedScript=function(u){return u instanceof goog.html.SafeScript&&u.constructor===goog.html.SafeScript&&u.SAFE_SCRIPT_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeScript.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?u.privateDoNotAccessOrElseSafeScriptWrappedValue_:(goog.asserts.fail("expected object of type SafeScript, got '"+u+"' of type "+goog.typeOf(u)),"type_error:SafeScript")},goog.html.SafeScript.stringify_=function(u){return JSON.stringify(u).replace(/</g,"\\x3c")},goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse=function(u){return new goog.html.SafeScript().initSecurityPrivateDoNotAccessOrElse_(u)},goog.html.SafeScript.prototype.initSecurityPrivateDoNotAccessOrElse_=function(u){return this.privateDoNotAccessOrElseSafeScriptWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScript(u):u,this},goog.html.SafeScript.EMPTY=goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(""),goog.fs={},goog.fs.url={},goog.fs.url.createObjectUrl=function(u){return goog.fs.url.getUrlObject_().createObjectURL(u)},goog.fs.url.revokeObjectUrl=function(u){goog.fs.url.getUrlObject_().revokeObjectURL(u)},goog.fs.url.UrlObject_=function(){},goog.fs.url.UrlObject_.prototype.createObjectURL=function(u){},goog.fs.url.UrlObject_.prototype.revokeObjectURL=function(u){},goog.fs.url.getUrlObject_=function(){var u=goog.fs.url.findUrlObject_();if(u!=null)return u;throw Error("This browser doesn't seem to support blob URLs")},goog.fs.url.findUrlObject_=function(){return goog.global.URL!==void 0&&goog.global.URL.createObjectURL!==void 0?goog.global.URL:goog.global.webkitURL!==void 0&&goog.global.webkitURL.createObjectURL!==void 0?goog.global.webkitURL:goog.global.createObjectURL!==void 0?goog.global:null},goog.fs.url.browserSupportsObjectUrls=function(){return goog.fs.url.findUrlObject_()!=null},goog.fs.blob={},goog.fs.blob.getBlob=function(u){var n=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(n!==void 0){n=new n;for(var A=0;A<arguments.length;A++)n.append(arguments[A]);return n.getBlob()}return goog.fs.blob.getBlobWithProperties(goog.array.toArray(arguments))},goog.fs.blob.getBlobWithProperties=function(u,n,A){var C=goog.global.BlobBuilder||goog.global.WebKitBlobBuilder;if(C!==void 0){C=new C;for(var d=0;d<u.length;d++)C.append(u[d],A);return C.getBlob(n)}if(goog.global.Blob!==void 0)return C={},n&&(C.type=n),A&&(C.endings=A),new Blob(u,C);throw Error("This browser doesn't seem to support creating Blobs")},goog.i18n={},goog.i18n.bidi={},goog.i18n.bidi.FORCE_RTL=!1,goog.i18n.bidi.IS_RTL=goog.i18n.bidi.FORCE_RTL||(goog.LOCALE.substring(0,2).toLowerCase()=="ar"||goog.LOCALE.substring(0,2).toLowerCase()=="fa"||goog.LOCALE.substring(0,2).toLowerCase()=="he"||goog.LOCALE.substring(0,2).toLowerCase()=="iw"||goog.LOCALE.substring(0,2).toLowerCase()=="ps"||goog.LOCALE.substring(0,2).toLowerCase()=="sd"||goog.LOCALE.substring(0,2).toLowerCase()=="ug"||goog.LOCALE.substring(0,2).toLowerCase()=="ur"||goog.LOCALE.substring(0,2).toLowerCase()=="yi")&&(goog.LOCALE.length==2||goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")||3<=goog.LOCALE.length&&goog.LOCALE.substring(0,3).toLowerCase()=="ckb"&&(goog.LOCALE.length==3||goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")||7<=goog.LOCALE.length&&(goog.LOCALE.substring(2,3)=="-"||goog.LOCALE.substring(2,3)=="_")&&(goog.LOCALE.substring(3,7).toLowerCase()=="adlm"||goog.LOCALE.substring(3,7).toLowerCase()=="arab"||goog.LOCALE.substring(3,7).toLowerCase()=="hebr"||goog.LOCALE.substring(3,7).toLowerCase()=="nkoo"||goog.LOCALE.substring(3,7).toLowerCase()=="rohg"||goog.LOCALE.substring(3,7).toLowerCase()=="thaa")||8<=goog.LOCALE.length&&(goog.LOCALE.substring(3,4)=="-"||goog.LOCALE.substring(3,4)=="_")&&(goog.LOCALE.substring(4,8).toLowerCase()=="adlm"||goog.LOCALE.substring(4,8).toLowerCase()=="arab"||goog.LOCALE.substring(4,8).toLowerCase()=="hebr"||goog.LOCALE.substring(4,8).toLowerCase()=="nkoo"||goog.LOCALE.substring(4,8).toLowerCase()=="rohg"||goog.LOCALE.substring(4,8).toLowerCase()=="thaa"),goog.i18n.bidi.Format={LRE:"\u202A",RLE:"\u202B",PDF:"\u202C",LRM:"\u200E",RLM:"\u200F"},goog.i18n.bidi.Dir={LTR:1,RTL:-1,NEUTRAL:0},goog.i18n.bidi.RIGHT="right",goog.i18n.bidi.LEFT="left",goog.i18n.bidi.I18N_RIGHT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.LEFT:goog.i18n.bidi.RIGHT,goog.i18n.bidi.I18N_LEFT=goog.i18n.bidi.IS_RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,goog.i18n.bidi.toDir=function(u,n){return typeof u=="number"?0<u?goog.i18n.bidi.Dir.LTR:0>u?goog.i18n.bidi.Dir.RTL:n?null:goog.i18n.bidi.Dir.NEUTRAL:u==null?null:u?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.ltrChars_="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0900-\u1FFF\u200E\u2C00-\uD801\uD804-\uD839\uD83C-\uDBFF\uF900-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",goog.i18n.bidi.rtlChars_="\u0591-\u06EF\u06FA-\u08FF\u200F\uD802-\uD803\uD83A-\uD83B\uFB1D-\uFDFF\uFE70-\uFEFC",goog.i18n.bidi.htmlSkipReg_=/<[^>]*>|&[^;]+;/g,goog.i18n.bidi.stripHtmlIfNeeded_=function(u,n){return n?u.replace(goog.i18n.bidi.htmlSkipReg_,""):u},goog.i18n.bidi.rtlCharReg_=new RegExp("["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.ltrCharReg_=new RegExp("["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.hasAnyRtl=function(u,n){return goog.i18n.bidi.rtlCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(u,n))},goog.i18n.bidi.hasRtlChar=goog.i18n.bidi.hasAnyRtl,goog.i18n.bidi.hasAnyLtr=function(u,n){return goog.i18n.bidi.ltrCharReg_.test(goog.i18n.bidi.stripHtmlIfNeeded_(u,n))},goog.i18n.bidi.ltrRe_=new RegExp("^["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlRe_=new RegExp("^["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.isRtlChar=function(u){return goog.i18n.bidi.rtlRe_.test(u)},goog.i18n.bidi.isLtrChar=function(u){return goog.i18n.bidi.ltrRe_.test(u)},goog.i18n.bidi.isNeutralChar=function(u){return!goog.i18n.bidi.isLtrChar(u)&&!goog.i18n.bidi.isRtlChar(u)},goog.i18n.bidi.ltrDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.rtlChars_+"]*["+goog.i18n.bidi.ltrChars_+"]"),goog.i18n.bidi.rtlDirCheckRe_=new RegExp("^[^"+goog.i18n.bidi.ltrChars_+"]*["+goog.i18n.bidi.rtlChars_+"]"),goog.i18n.bidi.startsWithRtl=function(u,n){return goog.i18n.bidi.rtlDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(u,n))},goog.i18n.bidi.isRtlText=goog.i18n.bidi.startsWithRtl,goog.i18n.bidi.startsWithLtr=function(u,n){return goog.i18n.bidi.ltrDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(u,n))},goog.i18n.bidi.isLtrText=goog.i18n.bidi.startsWithLtr,goog.i18n.bidi.isRequiredLtrRe_=/^http:\/\/.*/,goog.i18n.bidi.isNeutralText=function(u,n){return u=goog.i18n.bidi.stripHtmlIfNeeded_(u,n),goog.i18n.bidi.isRequiredLtrRe_.test(u)||!goog.i18n.bidi.hasAnyLtr(u)&&!goog.i18n.bidi.hasAnyRtl(u)},goog.i18n.bidi.ltrExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.ltrChars_+"][^"+goog.i18n.bidi.rtlChars_+"]*$"),goog.i18n.bidi.rtlExitDirCheckRe_=new RegExp("["+goog.i18n.bidi.rtlChars_+"][^"+goog.i18n.bidi.ltrChars_+"]*$"),goog.i18n.bidi.endsWithLtr=function(u,n){return goog.i18n.bidi.ltrExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(u,n))},goog.i18n.bidi.isLtrExitText=goog.i18n.bidi.endsWithLtr,goog.i18n.bidi.endsWithRtl=function(u,n){return goog.i18n.bidi.rtlExitDirCheckRe_.test(goog.i18n.bidi.stripHtmlIfNeeded_(u,n))},goog.i18n.bidi.isRtlExitText=goog.i18n.bidi.endsWithRtl,goog.i18n.bidi.rtlLocalesRe_=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i,goog.i18n.bidi.isRtlLanguage=function(u){return goog.i18n.bidi.rtlLocalesRe_.test(u)},goog.i18n.bidi.bracketGuardTextRe_=/(\(.*?\)+)|(\[.*?\]+)|(\{.*?\}+)|(<.*?>+)/g,goog.i18n.bidi.guardBracketInText=function(u,n){return n=(n===void 0?goog.i18n.bidi.hasAnyRtl(u):n)?goog.i18n.bidi.Format.RLM:goog.i18n.bidi.Format.LRM,u.replace(goog.i18n.bidi.bracketGuardTextRe_,n+"$&"+n)},goog.i18n.bidi.enforceRtlInHtml=function(u){return u.charAt(0)=="<"?u.replace(/<\w+/,"$& dir=rtl"):`
<span dir=rtl>`+u+"</span>"},goog.i18n.bidi.enforceRtlInText=function(u){return goog.i18n.bidi.Format.RLE+u+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.enforceLtrInHtml=function(u){return u.charAt(0)=="<"?u.replace(/<\w+/,"$& dir=ltr"):`
<span dir=ltr>`+u+"</span>"},goog.i18n.bidi.enforceLtrInText=function(u){return goog.i18n.bidi.Format.LRE+u+goog.i18n.bidi.Format.PDF},goog.i18n.bidi.dimensionsRe_=/:\s*([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)\s+([.\d][.\w]*)/g,goog.i18n.bidi.leftRe_=/left/gi,goog.i18n.bidi.rightRe_=/right/gi,goog.i18n.bidi.tempRe_=/%%%%/g,goog.i18n.bidi.mirrorCSS=function(u){return u.replace(goog.i18n.bidi.dimensionsRe_,":$1 $4 $3 $2").replace(goog.i18n.bidi.leftRe_,"%%%%").replace(goog.i18n.bidi.rightRe_,goog.i18n.bidi.LEFT).replace(goog.i18n.bidi.tempRe_,goog.i18n.bidi.RIGHT)},goog.i18n.bidi.doubleQuoteSubstituteRe_=/([\u0591-\u05f2])"/g,goog.i18n.bidi.singleQuoteSubstituteRe_=/([\u0591-\u05f2])'/g,goog.i18n.bidi.normalizeHebrewQuote=function(u){return u.replace(goog.i18n.bidi.doubleQuoteSubstituteRe_,"$1\u05F4").replace(goog.i18n.bidi.singleQuoteSubstituteRe_,"$1\u05F3")},goog.i18n.bidi.wordSeparatorRe_=/\s+/,goog.i18n.bidi.hasNumeralsRe_=/[\d\u06f0-\u06f9]/,goog.i18n.bidi.rtlDetectionThreshold_=.4,goog.i18n.bidi.estimateDirection=function(u,n){var A=0,C=0,d=!1;for(u=goog.i18n.bidi.stripHtmlIfNeeded_(u,n).split(goog.i18n.bidi.wordSeparatorRe_),n=0;n<u.length;n++){var g=u[n];goog.i18n.bidi.startsWithRtl(g)?(A++,C++):goog.i18n.bidi.isRequiredLtrRe_.test(g)?d=!0:goog.i18n.bidi.hasAnyLtr(g)?C++:goog.i18n.bidi.hasNumeralsRe_.test(g)&&(d=!0)}return C==0?d?goog.i18n.bidi.Dir.LTR:goog.i18n.bidi.Dir.NEUTRAL:A/C>goog.i18n.bidi.rtlDetectionThreshold_?goog.i18n.bidi.Dir.RTL:goog.i18n.bidi.Dir.LTR},goog.i18n.bidi.detectRtlDirectionality=function(u,n){return goog.i18n.bidi.estimateDirection(u,n)==goog.i18n.bidi.Dir.RTL},goog.i18n.bidi.setElementDirAndAlign=function(u,n){u&&(n=goog.i18n.bidi.toDir(n))&&(u.style.textAlign=n==goog.i18n.bidi.Dir.RTL?goog.i18n.bidi.RIGHT:goog.i18n.bidi.LEFT,u.dir=n==goog.i18n.bidi.Dir.RTL?"rtl":"ltr")},goog.i18n.bidi.setElementDirByTextDirectionality=function(u,n){switch(goog.i18n.bidi.estimateDirection(n)){case goog.i18n.bidi.Dir.LTR:u.dir="ltr";break;case goog.i18n.bidi.Dir.RTL:u.dir="rtl";break;default:u.removeAttribute("dir")}},goog.i18n.bidi.DirectionalString=function(){},goog.html.TrustedResourceUrl=function(u,n){this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_=u===goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&n||"",this.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.TrustedResourceUrl.prototype.implementsGoogStringTypedString=!0,goog.html.TrustedResourceUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_.toString()},goog.html.TrustedResourceUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.TrustedResourceUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.html.TrustedResourceUrl.prototype.cloneWithParams=function(u,n){var A=goog.html.TrustedResourceUrl.unwrap(this),C=(A=goog.html.TrustedResourceUrl.URL_PARAM_PARSER_.exec(A))[3]||"";return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(A[1]+goog.html.TrustedResourceUrl.stringifyParams_("?",A[2]||"",u)+goog.html.TrustedResourceUrl.stringifyParams_("#",C,n))},goog.DEBUG&&(goog.html.TrustedResourceUrl.prototype.toString=function(){return"TrustedResourceUrl{"+this.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_+"}"}),goog.html.TrustedResourceUrl.unwrap=function(u){return goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(u).toString()},goog.html.TrustedResourceUrl.unwrapTrustedScriptURL=function(u){return u instanceof goog.html.TrustedResourceUrl&&u.constructor===goog.html.TrustedResourceUrl&&u.TRUSTED_RESOURCE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?u.privateDoNotAccessOrElseTrustedResourceUrlWrappedValue_:(goog.asserts.fail("expected object of type TrustedResourceUrl, got '"+u+"' of type "+goog.typeOf(u)),"type_error:TrustedResourceUrl")},goog.html.TrustedResourceUrl.format=function(u,n){var A=goog.string.Const.unwrap(u);if(!goog.html.TrustedResourceUrl.BASE_URL_.test(A))throw Error("Invalid TrustedResourceUrl format: "+A);return u=A.replace(goog.html.TrustedResourceUrl.FORMAT_MARKER_,function(C,d){if(!Object.prototype.hasOwnProperty.call(n,d))throw Error('Found marker, "'+d+'", in format string, "'+A+'", but no valid label mapping found in args: '+JSON.stringify(n));return(C=n[d])instanceof goog.string.Const?goog.string.Const.unwrap(C):encodeURIComponent(String(C))}),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.TrustedResourceUrl.FORMAT_MARKER_=/%{(\w+)}/g,goog.html.TrustedResourceUrl.BASE_URL_=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,goog.html.TrustedResourceUrl.URL_PARAM_PARSER_=/^([^?#]*)(\?[^#]*)?(#[\s\S]*)?/,goog.html.TrustedResourceUrl.formatWithParams=function(u,n,A,C){return goog.html.TrustedResourceUrl.format(u,n).cloneWithParams(A,C)},goog.html.TrustedResourceUrl.fromConstant=function(u){return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(u))},goog.html.TrustedResourceUrl.fromConstants=function(u){for(var n="",A=0;A<u.length;A++)n+=goog.string.Const.unwrap(u[A]);return goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(n)},goog.html.TrustedResourceUrl.fromSafeScript=function(u){return u=goog.fs.blob.getBlobWithProperties([goog.html.SafeScript.unwrap(u)],"text/javascript"),u=goog.fs.url.createObjectUrl(u),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.TrustedResourceUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse=function(u){return u=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createScriptURL(u):u,new goog.html.TrustedResourceUrl(goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_,u)},goog.html.TrustedResourceUrl.stringifyParams_=function(u,n,A){if(A==null)return n;if(typeof A=="string")return A?u+encodeURIComponent(A):"";for(var C in A){var d=A[C];d=Array.isArray(d)?d:[d];for(var g=0;g<d.length;g++){var i=d[g];i!=null&&(n||(n=u),n+=(n.length>u.length?"&":"")+encodeURIComponent(C)+"="+encodeURIComponent(String(i)))}}return n},goog.html.TrustedResourceUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.string.internal={},goog.string.internal.startsWith=function(u,n){return u.lastIndexOf(n,0)==0},goog.string.internal.endsWith=function(u,n){var A=u.length-n.length;return 0<=A&&u.indexOf(n,A)==A},goog.string.internal.caseInsensitiveStartsWith=function(u,n){return goog.string.internal.caseInsensitiveCompare(n,u.substr(0,n.length))==0},goog.string.internal.caseInsensitiveEndsWith=function(u,n){return goog.string.internal.caseInsensitiveCompare(n,u.substr(u.length-n.length,n.length))==0},goog.string.internal.caseInsensitiveEquals=function(u,n){return u.toLowerCase()==n.toLowerCase()},goog.string.internal.isEmptyOrWhitespace=function(u){return/^[\s\xa0]*$/.test(u)},goog.string.internal.trim=goog.TRUSTED_SITE&&String.prototype.trim?function(u){return u.trim()}:function(u){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(u)[1]},goog.string.internal.caseInsensitiveCompare=function(u,n){return(u=String(u).toLowerCase())<(n=String(n).toLowerCase())?-1:u==n?0:1},goog.string.internal.newLineToBr=function(u,n){return u.replace(/(\r\n|\r|\n)/g,n?"<br />":"<br>")},goog.string.internal.htmlEscape=function(u,n){if(n)u=u.replace(goog.string.internal.AMP_RE_,"&amp;").replace(goog.string.internal.LT_RE_,"&lt;").replace(goog.string.internal.GT_RE_,"&gt;").replace(goog.string.internal.QUOT_RE_,"&quot;").replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;").replace(goog.string.internal.NULL_RE_,"&#0;");else{if(!goog.string.internal.ALL_RE_.test(u))return u;u.indexOf("&")!=-1&&(u=u.replace(goog.string.internal.AMP_RE_,"&amp;")),u.indexOf("<")!=-1&&(u=u.replace(goog.string.internal.LT_RE_,"&lt;")),u.indexOf(">")!=-1&&(u=u.replace(goog.string.internal.GT_RE_,"&gt;")),u.indexOf('"')!=-1&&(u=u.replace(goog.string.internal.QUOT_RE_,"&quot;")),u.indexOf("'")!=-1&&(u=u.replace(goog.string.internal.SINGLE_QUOTE_RE_,"&#39;")),u.indexOf("\0")!=-1&&(u=u.replace(goog.string.internal.NULL_RE_,"&#0;"))}return u},goog.string.internal.AMP_RE_=/&/g,goog.string.internal.LT_RE_=/</g,goog.string.internal.GT_RE_=/>/g,goog.string.internal.QUOT_RE_=/"/g,goog.string.internal.SINGLE_QUOTE_RE_=/'/g,goog.string.internal.NULL_RE_=/\x00/g,goog.string.internal.ALL_RE_=/[\x00&<>"']/,goog.string.internal.whitespaceEscape=function(u,n){return goog.string.internal.newLineToBr(u.replace(/  /g," &#160;"),n)},goog.string.internal.contains=function(u,n){return u.indexOf(n)!=-1},goog.string.internal.caseInsensitiveContains=function(u,n){return goog.string.internal.contains(u.toLowerCase(),n.toLowerCase())},goog.string.internal.compareVersions=function(u,n){var A=0;u=goog.string.internal.trim(String(u)).split("."),n=goog.string.internal.trim(String(n)).split(".");for(var C=Math.max(u.length,n.length),d=0;A==0&&d<C;d++){var g=u[d]||"",i=n[d]||"";do{if(g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""],i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],g[0].length==0&&i[0].length==0)break;A=g[1].length==0?0:parseInt(g[1],10);var _=i[1].length==0?0:parseInt(i[1],10);A=goog.string.internal.compareElements_(A,_)||goog.string.internal.compareElements_(g[2].length==0,i[2].length==0)||goog.string.internal.compareElements_(g[2],i[2]),g=g[3],i=i[3]}while(A==0)}return A},goog.string.internal.compareElements_=function(u,n){return u<n?-1:u>n?1:0},goog.html.SafeUrl=function(u,n){this.privateDoNotAccessOrElseSafeUrlWrappedValue_=u===goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_&&n||"",this.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeUrl.INNOCUOUS_STRING="about:invalid#zClosurez",goog.html.SafeUrl.prototype.implementsGoogStringTypedString=!0,goog.html.SafeUrl.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeUrlWrappedValue_.toString()},goog.html.SafeUrl.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeUrl.prototype.getDirection=function(){return goog.i18n.bidi.Dir.LTR},goog.DEBUG&&(goog.html.SafeUrl.prototype.toString=function(){return"SafeUrl{"+this.privateDoNotAccessOrElseSafeUrlWrappedValue_+"}"}),goog.html.SafeUrl.unwrap=function(u){return u instanceof goog.html.SafeUrl&&u.constructor===goog.html.SafeUrl&&u.SAFE_URL_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?u.privateDoNotAccessOrElseSafeUrlWrappedValue_:(goog.asserts.fail("expected object of type SafeUrl, got '"+u+"' of type "+goog.typeOf(u)),"type_error:SafeUrl")},goog.html.SafeUrl.fromConstant=function(u){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.string.Const.unwrap(u))},goog.html.SAFE_MIME_TYPE_PATTERN_=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,goog.html.SafeUrl.isSafeMimeType=function(u){return goog.html.SAFE_MIME_TYPE_PATTERN_.test(u)},goog.html.SafeUrl.fromBlob=function(u){return u=goog.html.SafeUrl.isSafeMimeType(u.type)?goog.fs.url.createObjectUrl(u):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeUrl.fromMediaSource=function(u){return goog.asserts.assert("MediaSource"in goog.global,"No support for MediaSource"),u=u instanceof MediaSource?goog.fs.url.createObjectUrl(u):goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.DATA_URL_PATTERN_=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,goog.html.SafeUrl.fromDataUrl=function(u){var n=(u=u.replace(/(%0A|%0D)/g,"")).match(goog.html.DATA_URL_PATTERN_);return n=n&&goog.html.SafeUrl.isSafeMimeType(n[1]),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(n?u:goog.html.SafeUrl.INNOCUOUS_STRING)},goog.html.SafeUrl.fromTelUrl=function(u){return goog.string.internal.caseInsensitiveStartsWith(u,"tel:")||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SIP_URL_PATTERN_=/^sip[s]?:[+a-z0-9_.!$%&'*\/=^`{|}~-]+@([a-z0-9-]+\.)+[a-z0-9]{2,63}$/i,goog.html.SafeUrl.fromSipUrl=function(u){return goog.html.SIP_URL_PATTERN_.test(decodeURIComponent(u))||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeUrl.fromFacebookMessengerUrl=function(u){return goog.string.internal.caseInsensitiveStartsWith(u,"fb-messenger://share")||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeUrl.fromWhatsAppUrl=function(u){return goog.string.internal.caseInsensitiveStartsWith(u,"whatsapp://send")||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeUrl.fromSmsUrl=function(u){return goog.string.internal.caseInsensitiveStartsWith(u,"sms:")&&goog.html.SafeUrl.isSmsUrlBodyValid_(u)||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeUrl.isSmsUrlBodyValid_=function(u){var n=u.indexOf("#");if(0<n&&(u=u.substring(0,n)),!(n=u.match(/[?&]body=/gi)))return!0;if(1<n.length)return!1;if(!(u=u.match(/[?&]body=([^&]*)/)[1]))return!0;try{decodeURIComponent(u)}catch(A){return!1}return/^(?:[a-z0-9\-_.~]|%[0-9a-f]{2})+$/i.test(u)},goog.html.SafeUrl.fromSshUrl=function(u){return goog.string.internal.caseInsensitiveStartsWith(u,"ssh://")||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeUrl.sanitizeChromeExtensionUrl=function(u,n){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^chrome-extension:\/\/([^\/]+)\//,u,n)},goog.html.SafeUrl.sanitizeFirefoxExtensionUrl=function(u,n){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^moz-extension:\/\/([^\/]+)\//,u,n)},goog.html.SafeUrl.sanitizeEdgeExtensionUrl=function(u,n){return goog.html.SafeUrl.sanitizeExtensionUrl_(/^ms-browser-extension:\/\/([^\/]+)\//,u,n)},goog.html.SafeUrl.sanitizeExtensionUrl_=function(u,n,A){return(u=u.exec(n))?(u=u[1],(A instanceof goog.string.Const?[goog.string.Const.unwrap(A)]:A.map(function(C){return goog.string.Const.unwrap(C)})).indexOf(u)==-1&&(n=goog.html.SafeUrl.INNOCUOUS_STRING)):n=goog.html.SafeUrl.INNOCUOUS_STRING,goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(n)},goog.html.SafeUrl.fromTrustedResourceUrl=function(u){return goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(goog.html.TrustedResourceUrl.unwrap(u))},goog.html.SAFE_URL_PATTERN_=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i,goog.html.SafeUrl.SAFE_URL_PATTERN=goog.html.SAFE_URL_PATTERN_,goog.html.SafeUrl.sanitize=function(u){return u instanceof goog.html.SafeUrl?u:(u=typeof u=="object"&&u.implementsGoogStringTypedString?u.getTypedStringValue():String(u),goog.html.SAFE_URL_PATTERN_.test(u)||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u))},goog.html.SafeUrl.sanitizeAssertUnchanged=function(u,n){return u instanceof goog.html.SafeUrl?u:(u=typeof u=="object"&&u.implementsGoogStringTypedString?u.getTypedStringValue():String(u),n&&/^data:/i.test(u)&&(n=goog.html.SafeUrl.fromDataUrl(u)).getTypedStringValue()==u?n:(goog.asserts.assert(goog.html.SAFE_URL_PATTERN_.test(u),"%s does not match the safe URL pattern",u)||(u=goog.html.SafeUrl.INNOCUOUS_STRING),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(u)))},goog.html.SafeUrl.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse=function(u){return new goog.html.SafeUrl(goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_,u)},goog.html.SafeUrl.ABOUT_BLANK=goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse("about:blank"),goog.html.SafeUrl.CONSTRUCTOR_TOKEN_PRIVATE_={},goog.html.SafeStyle=function(){this.privateDoNotAccessOrElseSafeStyleWrappedValue_="",this.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyle.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyle.fromConstant=function(u){return(u=goog.string.Const.unwrap(u)).length===0?goog.html.SafeStyle.EMPTY:(goog.asserts.assert(goog.string.internal.endsWith(u,";"),"Last character of style string is not ';': "+u),goog.asserts.assert(goog.string.internal.contains(u,":"),`Style string must contain at least one ':', to specify a "name: value" pair: `+u),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(u))},goog.html.SafeStyle.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_},goog.DEBUG&&(goog.html.SafeStyle.prototype.toString=function(){return"SafeStyle{"+this.privateDoNotAccessOrElseSafeStyleWrappedValue_+"}"}),goog.html.SafeStyle.unwrap=function(u){return u instanceof goog.html.SafeStyle&&u.constructor===goog.html.SafeStyle&&u.SAFE_STYLE_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyle.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?u.privateDoNotAccessOrElseSafeStyleWrappedValue_:(goog.asserts.fail("expected object of type SafeStyle, got '"+u+"' of type "+goog.typeOf(u)),"type_error:SafeStyle")},goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse=function(u){return new goog.html.SafeStyle().initSecurityPrivateDoNotAccessOrElse_(u)},goog.html.SafeStyle.prototype.initSecurityPrivateDoNotAccessOrElse_=function(u){return this.privateDoNotAccessOrElseSafeStyleWrappedValue_=u,this},goog.html.SafeStyle.EMPTY=goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(""),goog.html.SafeStyle.INNOCUOUS_STRING="zClosurez",goog.html.SafeStyle.create=function(u){var n,A="";for(n in u){if(!/^[-_a-zA-Z0-9]+$/.test(n))throw Error("Name allows only [-_a-zA-Z0-9], got: "+n);var C=u[n];C!=null&&(A+=n+":"+(C=Array.isArray(C)?goog.array.map(C,goog.html.SafeStyle.sanitizePropertyValue_).join(" "):goog.html.SafeStyle.sanitizePropertyValue_(C))+";")}return A?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(A):goog.html.SafeStyle.EMPTY},goog.html.SafeStyle.sanitizePropertyValue_=function(u){if(u instanceof goog.html.SafeUrl)return'url("'+goog.html.SafeUrl.unwrap(u).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';if(u=u instanceof goog.string.Const?goog.string.Const.unwrap(u):goog.html.SafeStyle.sanitizePropertyValueString_(String(u)),/[{;}]/.test(u))throw new goog.asserts.AssertionError("Value does not allow [{;}], got: %s.",[u]);return u},goog.html.SafeStyle.sanitizePropertyValueString_=function(u){var n=u.replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.FUNCTIONS_RE_,"$1").replace(goog.html.SafeStyle.URL_RE_,"url");return goog.html.SafeStyle.VALUE_RE_.test(n)?goog.html.SafeStyle.COMMENT_RE_.test(u)?(goog.asserts.fail("String value disallows comments, got: "+u),goog.html.SafeStyle.INNOCUOUS_STRING):goog.html.SafeStyle.hasBalancedQuotes_(u)?goog.html.SafeStyle.hasBalancedSquareBrackets_(u)?goog.html.SafeStyle.sanitizeUrl_(u):(goog.asserts.fail("String value requires balanced square brackets and one identifier per pair of brackets, got: "+u),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value requires balanced quotes, got: "+u),goog.html.SafeStyle.INNOCUOUS_STRING):(goog.asserts.fail("String value allows only "+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+" and simple functions, got: "+u),goog.html.SafeStyle.INNOCUOUS_STRING)},goog.html.SafeStyle.hasBalancedQuotes_=function(u){for(var n=!0,A=!0,C=0;C<u.length;C++){var d=u.charAt(C);d=="'"&&A?n=!n:d=='"'&&n&&(A=!A)}return n&&A},goog.html.SafeStyle.hasBalancedSquareBrackets_=function(u){for(var n=!0,A=/^[-_a-zA-Z0-9]$/,C=0;C<u.length;C++){var d=u.charAt(C);if(d=="]"){if(n)return!1;n=!0}else if(d=="["){if(!n)return!1;n=!1}else if(!n&&!A.test(d))return!1}return n},goog.html.SafeStyle.VALUE_ALLOWED_CHARS_=`[-,."'%_!# a-zA-Z0-9\\[\\]]`,goog.html.SafeStyle.VALUE_RE_=new RegExp("^"+goog.html.SafeStyle.VALUE_ALLOWED_CHARS_+"+$"),goog.html.SafeStyle.URL_RE_=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,goog.html.SafeStyle.ALLOWED_FUNCTIONS_="calc cubic-bezier fit-content hsl hsla linear-gradient matrix minmax repeat rgb rgba (rotate|scale|translate)(X|Y|Z|3d)?".split(" "),goog.html.SafeStyle.FUNCTIONS_RE_=new RegExp("\\b("+goog.html.SafeStyle.ALLOWED_FUNCTIONS_.join("|")+")\\([-+*/0-9a-z.%\\[\\], ]+\\)","g"),goog.html.SafeStyle.COMMENT_RE_=/\/\*/,goog.html.SafeStyle.sanitizeUrl_=function(u){return u.replace(goog.html.SafeStyle.URL_RE_,function(n,A,C,d){var g="";return C=C.replace(/^(['"])(.*)\1$/,function(i,_,j){return g=_,j}),n=goog.html.SafeUrl.sanitize(C).getTypedStringValue(),A+g+n+g+d})},goog.html.SafeStyle.concat=function(u){var n="",A=function(C){Array.isArray(C)?goog.array.forEach(C,A):n+=goog.html.SafeStyle.unwrap(C)};return goog.array.forEach(arguments,A),n?goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(n):goog.html.SafeStyle.EMPTY},goog.html.SafeStyleSheet=function(){this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_="",this.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_},goog.html.SafeStyleSheet.prototype.implementsGoogStringTypedString=!0,goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeStyleSheet.createRule=function(u,n){if(goog.string.internal.contains(u,"<"))throw Error("Selector does not allow '<', got: "+u);var A=u.replace(/('|")((?!\1)[^\r\n\f\\]|\\[\s\S])*\1/g,"");if(!/^[-_a-zA-Z0-9#.:* ,>+~[\]()=^$|]+$/.test(A))throw Error("Selector allows only [-_a-zA-Z0-9#.:* ,>+~[\\]()=^$|] and strings, got: "+u);if(!goog.html.SafeStyleSheet.hasBalancedBrackets_(A))throw Error("() and [] in selector must be balanced, got: "+u);return n instanceof goog.html.SafeStyle||(n=goog.html.SafeStyle.create(n)),u=u+"{"+goog.html.SafeStyle.unwrap(n).replace(/</g,"\\3C ")+"}",goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(u)},goog.html.SafeStyleSheet.hasBalancedBrackets_=function(u){for(var n={"(":")","[":"]"},A=[],C=0;C<u.length;C++){var d=u[C];if(n[d])A.push(n[d]);else if(goog.object.contains(n,d)&&A.pop()!=d)return!1}return A.length==0},goog.html.SafeStyleSheet.concat=function(u){var n="",A=function(C){Array.isArray(C)?goog.array.forEach(C,A):n+=goog.html.SafeStyleSheet.unwrap(C)};return goog.array.forEach(arguments,A),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(n)},goog.html.SafeStyleSheet.fromConstant=function(u){return(u=goog.string.Const.unwrap(u)).length===0?goog.html.SafeStyleSheet.EMPTY:(goog.asserts.assert(!goog.string.internal.contains(u,"<"),"Forbidden '<' character in style sheet string: "+u),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(u))},goog.html.SafeStyleSheet.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_},goog.DEBUG&&(goog.html.SafeStyleSheet.prototype.toString=function(){return"SafeStyleSheet{"+this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_+"}"}),goog.html.SafeStyleSheet.unwrap=function(u){return u instanceof goog.html.SafeStyleSheet&&u.constructor===goog.html.SafeStyleSheet&&u.SAFE_STYLE_SHEET_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeStyleSheet.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?u.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_:(goog.asserts.fail("expected object of type SafeStyleSheet, got '"+u+"' of type "+goog.typeOf(u)),"type_error:SafeStyleSheet")},goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse=function(u){return new goog.html.SafeStyleSheet().initSecurityPrivateDoNotAccessOrElse_(u)},goog.html.SafeStyleSheet.prototype.initSecurityPrivateDoNotAccessOrElse_=function(u){return this.privateDoNotAccessOrElseSafeStyleSheetWrappedValue_=u,this},goog.html.SafeStyleSheet.EMPTY=goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(""),goog.labs={},goog.labs.userAgent={},goog.labs.userAgent.util={},goog.labs.userAgent.util.getNativeUserAgentString_=function(){var u=goog.labs.userAgent.util.getNavigator_();return u&&(u=u.userAgent)?u:""},goog.labs.userAgent.util.getNavigator_=function(){return goog.global.navigator},goog.labs.userAgent.util.userAgent_=goog.labs.userAgent.util.getNativeUserAgentString_(),goog.labs.userAgent.util.setUserAgent=function(u){goog.labs.userAgent.util.userAgent_=u||goog.labs.userAgent.util.getNativeUserAgentString_()},goog.labs.userAgent.util.getUserAgent=function(){return goog.labs.userAgent.util.userAgent_},goog.labs.userAgent.util.matchUserAgent=function(u){var n=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.contains(n,u)},goog.labs.userAgent.util.matchUserAgentIgnoreCase=function(u){var n=goog.labs.userAgent.util.getUserAgent();return goog.string.internal.caseInsensitiveContains(n,u)},goog.labs.userAgent.util.extractVersionTuples=function(u){for(var n,A=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,C=[];n=A.exec(u);)C.push([n[1],n[2],n[3]||void 0]);return C},goog.labs.userAgent.browser={},goog.labs.userAgent.browser.matchOpera_=function(){return goog.labs.userAgent.util.matchUserAgent("Opera")},goog.labs.userAgent.browser.matchIE_=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.browser.matchEdgeHtml_=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.browser.matchEdgeChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("Edg/")},goog.labs.userAgent.browser.matchOperaChromium_=function(){return goog.labs.userAgent.util.matchUserAgent("OPR")},goog.labs.userAgent.browser.matchFirefox_=function(){return goog.labs.userAgent.util.matchUserAgent("Firefox")||goog.labs.userAgent.util.matchUserAgent("FxiOS")},goog.labs.userAgent.browser.matchSafari_=function(){return goog.labs.userAgent.util.matchUserAgent("Safari")&&!(goog.labs.userAgent.browser.matchChrome_()||goog.labs.userAgent.browser.matchCoast_()||goog.labs.userAgent.browser.matchOpera_()||goog.labs.userAgent.browser.matchEdgeHtml_()||goog.labs.userAgent.browser.matchEdgeChromium_()||goog.labs.userAgent.browser.matchOperaChromium_()||goog.labs.userAgent.browser.matchFirefox_()||goog.labs.userAgent.browser.isSilk()||goog.labs.userAgent.util.matchUserAgent("Android"))},goog.labs.userAgent.browser.matchCoast_=function(){return goog.labs.userAgent.util.matchUserAgent("Coast")},goog.labs.userAgent.browser.matchIosWebview_=function(){return(goog.labs.userAgent.util.matchUserAgent("iPad")||goog.labs.userAgent.util.matchUserAgent("iPhone"))&&!goog.labs.userAgent.browser.matchSafari_()&&!goog.labs.userAgent.browser.matchChrome_()&&!goog.labs.userAgent.browser.matchCoast_()&&!goog.labs.userAgent.browser.matchFirefox_()&&goog.labs.userAgent.util.matchUserAgent("AppleWebKit")},goog.labs.userAgent.browser.matchChrome_=function(){return(goog.labs.userAgent.util.matchUserAgent("Chrome")||goog.labs.userAgent.util.matchUserAgent("CriOS"))&&!goog.labs.userAgent.browser.matchEdgeHtml_()},goog.labs.userAgent.browser.matchAndroidBrowser_=function(){return goog.labs.userAgent.util.matchUserAgent("Android")&&!(goog.labs.userAgent.browser.isChrome()||goog.labs.userAgent.browser.isFirefox()||goog.labs.userAgent.browser.isOpera()||goog.labs.userAgent.browser.isSilk())},goog.labs.userAgent.browser.isOpera=goog.labs.userAgent.browser.matchOpera_,goog.labs.userAgent.browser.isIE=goog.labs.userAgent.browser.matchIE_,goog.labs.userAgent.browser.isEdge=goog.labs.userAgent.browser.matchEdgeHtml_,goog.labs.userAgent.browser.isEdgeChromium=goog.labs.userAgent.browser.matchEdgeChromium_,goog.labs.userAgent.browser.isOperaChromium=goog.labs.userAgent.browser.matchOperaChromium_,goog.labs.userAgent.browser.isFirefox=goog.labs.userAgent.browser.matchFirefox_,goog.labs.userAgent.browser.isSafari=goog.labs.userAgent.browser.matchSafari_,goog.labs.userAgent.browser.isCoast=goog.labs.userAgent.browser.matchCoast_,goog.labs.userAgent.browser.isIosWebview=goog.labs.userAgent.browser.matchIosWebview_,goog.labs.userAgent.browser.isChrome=goog.labs.userAgent.browser.matchChrome_,goog.labs.userAgent.browser.isAndroidBrowser=goog.labs.userAgent.browser.matchAndroidBrowser_,goog.labs.userAgent.browser.isSilk=function(){return goog.labs.userAgent.util.matchUserAgent("Silk")},goog.labs.userAgent.browser.getVersion=function(){function u(d){return d=goog.array.find(d,C),A[d]||""}var n=goog.labs.userAgent.util.getUserAgent();if(goog.labs.userAgent.browser.isIE())return goog.labs.userAgent.browser.getIEVersion_(n);n=goog.labs.userAgent.util.extractVersionTuples(n);var A={};goog.array.forEach(n,function(d){A[d[0]]=d[1]});var C=goog.partial(goog.object.containsKey,A);return goog.labs.userAgent.browser.isOpera()?u(["Version","Opera"]):goog.labs.userAgent.browser.isEdge()?u(["Edge"]):goog.labs.userAgent.browser.isEdgeChromium()?u(["Edg"]):goog.labs.userAgent.browser.isChrome()?u(["Chrome","CriOS","HeadlessChrome"]):(n=n[2])&&n[1]||""},goog.labs.userAgent.browser.isVersionOrHigher=function(u){return 0<=goog.string.internal.compareVersions(goog.labs.userAgent.browser.getVersion(),u)},goog.labs.userAgent.browser.getIEVersion_=function(u){var n=/rv: *([\d\.]*)/.exec(u);if(n&&n[1])return n[1];n="";var A=/MSIE +([\d\.]+)/.exec(u);if(A&&A[1])if(u=/Trident\/(\d.\d)/.exec(u),A[1]=="7.0")if(u&&u[1])switch(u[1]){case"4.0":n="8.0";break;case"5.0":n="9.0";break;case"6.0":n="10.0";break;case"7.0":n="11.0"}else n="7.0";else n=A[1];return n},goog.html.SafeHtml=function(){this.privateDoNotAccessOrElseSafeHtmlWrappedValue_="",this.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_=goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_,this.dir_=null},goog.html.SafeHtml.ENABLE_ERROR_MESSAGES=goog.DEBUG,goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE=!0,goog.html.SafeHtml.prototype.implementsGoogI18nBidiDirectionalString=!0,goog.html.SafeHtml.prototype.getDirection=function(){return this.dir_},goog.html.SafeHtml.prototype.implementsGoogStringTypedString=!0,goog.html.SafeHtml.prototype.getTypedStringValue=function(){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_.toString()},goog.DEBUG&&(goog.html.SafeHtml.prototype.toString=function(){return"SafeHtml{"+this.privateDoNotAccessOrElseSafeHtmlWrappedValue_+"}"}),goog.html.SafeHtml.unwrap=function(u){return goog.html.SafeHtml.unwrapTrustedHTML(u).toString()},goog.html.SafeHtml.unwrapTrustedHTML=function(u){return u instanceof goog.html.SafeHtml&&u.constructor===goog.html.SafeHtml&&u.SAFE_HTML_TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_===goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_?u.privateDoNotAccessOrElseSafeHtmlWrappedValue_:(goog.asserts.fail("expected object of type SafeHtml, got '"+u+"' of type "+goog.typeOf(u)),"type_error:SafeHtml")},goog.html.SafeHtml.htmlEscape=function(u){if(u instanceof goog.html.SafeHtml)return u;var n=typeof u=="object",A=null;return n&&u.implementsGoogI18nBidiDirectionalString&&(A=u.getDirection()),u=n&&u.implementsGoogStringTypedString?u.getTypedStringValue():String(u),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.htmlEscape(u),A)},goog.html.SafeHtml.htmlEscapePreservingNewlines=function(u){return u instanceof goog.html.SafeHtml?u:(u=goog.html.SafeHtml.htmlEscape(u),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.newLineToBr(goog.html.SafeHtml.unwrap(u)),u.getDirection()))},goog.html.SafeHtml.htmlEscapePreservingNewlinesAndSpaces=function(u){return u instanceof goog.html.SafeHtml?u:(u=goog.html.SafeHtml.htmlEscape(u),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(goog.string.internal.whitespaceEscape(goog.html.SafeHtml.unwrap(u)),u.getDirection()))},goog.html.SafeHtml.from=goog.html.SafeHtml.htmlEscape,goog.html.SafeHtml.comment=function(u){return goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!--"+goog.string.internal.htmlEscape(u)+"-->",null)},goog.html.SafeHtml.VALID_NAMES_IN_TAG_=/^[a-zA-Z0-9-]+$/,goog.html.SafeHtml.URL_ATTRIBUTES_={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.html.SafeHtml.create=function(u,n,A){return goog.html.SafeHtml.verifyTagName(String(u)),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse(String(u),n,A)},goog.html.SafeHtml.verifyTagName=function(u){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(u))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Invalid tag name <"+u+">.":"");if(u.toUpperCase()in goog.html.SafeHtml.NOT_ALLOWED_TAG_NAMES_)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"Tag name <"+u+"> is not allowed for SafeHtml.":"")},goog.html.SafeHtml.createIframe=function(u,n,A,C){u&&goog.html.TrustedResourceUrl.unwrap(u);var d={};return d.src=u||null,d.srcdoc=n&&goog.html.SafeHtml.unwrap(n),u=goog.html.SafeHtml.combineAttributes(d,{sandbox:""},A),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",u,C)},goog.html.SafeHtml.createSandboxIframe=function(u,n,A,C){if(!goog.html.SafeHtml.canUseSandboxIframe())throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?"The browser does not support sandboxed iframes.":"");var d={};return d.src=u?goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(u)):null,d.srcdoc=n||null,d.sandbox="",u=goog.html.SafeHtml.combineAttributes(d,{},A),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("iframe",u,C)},goog.html.SafeHtml.canUseSandboxIframe=function(){return goog.global.HTMLIFrameElement&&"sandbox"in goog.global.HTMLIFrameElement.prototype},goog.html.SafeHtml.createScriptSrc=function(u,n){return goog.html.TrustedResourceUrl.unwrap(u),u=goog.html.SafeHtml.combineAttributes({src:u},{},n),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",u)},goog.html.SafeHtml.createScript=function(u,n){for(var A in n){var C=A.toLowerCase();if(C=="language"||C=="src"||C=="text"||C=="type")throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot set "'+C+'" attribute':"")}for(A="",u=goog.array.concat(u),C=0;C<u.length;C++)A+=goog.html.SafeScript.unwrap(u[C]);return u=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(A,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("script",n,u)},goog.html.SafeHtml.createStyle=function(u,n){n=goog.html.SafeHtml.combineAttributes({type:"text/css"},{},n);var A="";u=goog.array.concat(u);for(var C=0;C<u.length;C++)A+=goog.html.SafeStyleSheet.unwrap(u[C]);return u=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(A,goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("style",n,u)},goog.html.SafeHtml.createMetaRefresh=function(u,n){return u=goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitize(u)),(goog.labs.userAgent.browser.isIE()||goog.labs.userAgent.browser.isEdge())&&goog.string.internal.contains(u,";")&&(u="'"+u.replace(/'/g,"%27")+"'"),goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse("meta",{"http-equiv":"refresh",content:(n||0)+"; url="+u})},goog.html.SafeHtml.getAttrNameAndValue_=function(u,n,A){if(A instanceof goog.string.Const)A=goog.string.Const.unwrap(A);else if(n.toLowerCase()=="style"){if(!goog.html.SafeHtml.SUPPORT_STYLE_ATTRIBUTE)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "style" not supported.':"");A=goog.html.SafeHtml.getStyleValue_(A)}else{if(/^on/i.test(n))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+n+'" requires goog.string.Const value, "'+A+'" given.':"");if(n.toLowerCase()in goog.html.SafeHtml.URL_ATTRIBUTES_)if(A instanceof goog.html.TrustedResourceUrl)A=goog.html.TrustedResourceUrl.unwrap(A);else if(A instanceof goog.html.SafeUrl)A=goog.html.SafeUrl.unwrap(A);else{if(typeof A!="string")throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Attribute "'+n+'" on tag "'+u+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+A+'" given.':"");A=goog.html.SafeUrl.sanitize(A).getTypedStringValue()}}return A.implementsGoogStringTypedString&&(A=A.getTypedStringValue()),goog.asserts.assert(typeof A=="string"||typeof A=="number","String or number value expected, got "+typeof A+" with value: "+A),n+'="'+goog.string.internal.htmlEscape(String(A))+'"'},goog.html.SafeHtml.getStyleValue_=function(u){if(!goog.isObject(u))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof u+" given: "+u:"");return u instanceof goog.html.SafeStyle||(u=goog.html.SafeStyle.create(u)),goog.html.SafeStyle.unwrap(u)},goog.html.SafeHtml.createWithDir=function(u,n,A,C){return(n=goog.html.SafeHtml.create(n,A,C)).dir_=u,n},goog.html.SafeHtml.join=function(u,n){var A=(u=goog.html.SafeHtml.htmlEscape(u)).getDirection(),C=[],d=function(g){Array.isArray(g)?goog.array.forEach(g,d):(g=goog.html.SafeHtml.htmlEscape(g),C.push(goog.html.SafeHtml.unwrap(g)),g=g.getDirection(),A==goog.i18n.bidi.Dir.NEUTRAL?A=g:g!=goog.i18n.bidi.Dir.NEUTRAL&&A!=g&&(A=null))};return goog.array.forEach(n,d),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(C.join(goog.html.SafeHtml.unwrap(u)),A)},goog.html.SafeHtml.concat=function(u){return goog.html.SafeHtml.join(goog.html.SafeHtml.EMPTY,Array.prototype.slice.call(arguments))},goog.html.SafeHtml.concatWithDir=function(u,n){var A=goog.html.SafeHtml.concat(goog.array.slice(arguments,1));return A.dir_=u,A},goog.html.SafeHtml.TYPE_MARKER_GOOG_HTML_SECURITY_PRIVATE_={},goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse=function(u,n){return new goog.html.SafeHtml().initSecurityPrivateDoNotAccessOrElse_(u,n)},goog.html.SafeHtml.prototype.initSecurityPrivateDoNotAccessOrElse_=function(u,n){return this.privateDoNotAccessOrElseSafeHtmlWrappedValue_=goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY?goog.html.trustedtypes.PRIVATE_DO_NOT_ACCESS_OR_ELSE_POLICY.createHTML(u):u,this.dir_=n,this},goog.html.SafeHtml.createSafeHtmlTagSecurityPrivateDoNotAccessOrElse=function(u,n,A){var C=null,d="<"+u+goog.html.SafeHtml.stringifyAttributes(u,n);return A==null?A=[]:Array.isArray(A)||(A=[A]),goog.dom.tags.isVoidTag(u.toLowerCase())?(goog.asserts.assert(!A.length,"Void tag <"+u+"> does not allow content."),d+=">"):(C=goog.html.SafeHtml.concat(A),d+=">"+goog.html.SafeHtml.unwrap(C)+"</"+u+">",C=C.getDirection()),(u=n&&n.dir)&&(C=/^(ltr|rtl|auto)$/i.test(u)?goog.i18n.bidi.Dir.NEUTRAL:null),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(d,C)},goog.html.SafeHtml.stringifyAttributes=function(u,n){var A="";if(n)for(var C in n){if(!goog.html.SafeHtml.VALID_NAMES_IN_TAG_.test(C))throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Invalid attribute name "'+C+'".':"");var d=n[C];d!=null&&(A+=" "+goog.html.SafeHtml.getAttrNameAndValue_(u,C,d))}return A},goog.html.SafeHtml.combineAttributes=function(u,n,A){var C,d={};for(C in u)goog.asserts.assert(C.toLowerCase()==C,"Must be lower case"),d[C]=u[C];for(C in n)goog.asserts.assert(C.toLowerCase()==C,"Must be lower case"),d[C]=n[C];if(A)for(C in A){var g=C.toLowerCase();if(g in u)throw Error(goog.html.SafeHtml.ENABLE_ERROR_MESSAGES?'Cannot override "'+g+'" attribute, got "'+C+'" with value "'+A[C]+'"':"");g in n&&delete d[g],d[C]=A[C]}return d},goog.html.SafeHtml.DOCTYPE_HTML=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<!DOCTYPE html>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.EMPTY=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("",goog.i18n.bidi.Dir.NEUTRAL),goog.html.SafeHtml.BR=goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse("<br>",goog.i18n.bidi.Dir.NEUTRAL),goog.html.uncheckedconversions={},goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract=function(u,n,A){return goog.asserts.assertString(goog.string.Const.unwrap(u),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(u)),"must provide non-empty justification"),goog.html.SafeHtml.createSafeHtmlSecurityPrivateDoNotAccessOrElse(n,A||null)},goog.html.uncheckedconversions.safeScriptFromStringKnownToSatisfyTypeContract=function(u,n){return goog.asserts.assertString(goog.string.Const.unwrap(u),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(u)),"must provide non-empty justification"),goog.html.SafeScript.createSafeScriptSecurityPrivateDoNotAccessOrElse(n)},goog.html.uncheckedconversions.safeStyleFromStringKnownToSatisfyTypeContract=function(u,n){return goog.asserts.assertString(goog.string.Const.unwrap(u),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(u)),"must provide non-empty justification"),goog.html.SafeStyle.createSafeStyleSecurityPrivateDoNotAccessOrElse(n)},goog.html.uncheckedconversions.safeStyleSheetFromStringKnownToSatisfyTypeContract=function(u,n){return goog.asserts.assertString(goog.string.Const.unwrap(u),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(u)),"must provide non-empty justification"),goog.html.SafeStyleSheet.createSafeStyleSheetSecurityPrivateDoNotAccessOrElse(n)},goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract=function(u,n){return goog.asserts.assertString(goog.string.Const.unwrap(u),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(u)),"must provide non-empty justification"),goog.html.SafeUrl.createSafeUrlSecurityPrivateDoNotAccessOrElse(n)},goog.html.uncheckedconversions.trustedResourceUrlFromStringKnownToSatisfyTypeContract=function(u,n){return goog.asserts.assertString(goog.string.Const.unwrap(u),"must provide justification"),goog.asserts.assert(!goog.string.internal.isEmptyOrWhitespace(goog.string.Const.unwrap(u)),"must provide non-empty justification"),goog.html.TrustedResourceUrl.createTrustedResourceUrlSecurityPrivateDoNotAccessOrElse(n)},goog.dom.safe={},goog.dom.safe.InsertAdjacentHtmlPosition={AFTERBEGIN:"afterbegin",AFTEREND:"afterend",BEFOREBEGIN:"beforebegin",BEFOREEND:"beforeend"},goog.dom.safe.insertAdjacentHtml=function(u,n,A){u.insertAdjacentHTML(n,goog.html.SafeHtml.unwrapTrustedHTML(A))},goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_={MATH:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0},goog.dom.safe.isInnerHtmlCleanupRecursive_=goog.functions.cacheReturnValue(function(){if(goog.DEBUG&&typeof document=="undefined")return!1;var u=document.createElement("div"),n=document.createElement("div");return n.appendChild(document.createElement("div")),u.appendChild(n),!(goog.DEBUG&&!u.firstChild)&&(n=u.firstChild.firstChild,u.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(goog.html.SafeHtml.EMPTY),!n.parentElement)}),goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse=function(u,n){if(goog.dom.safe.isInnerHtmlCleanupRecursive_())for(;u.lastChild;)u.removeChild(u.lastChild);u.innerHTML=goog.html.SafeHtml.unwrapTrustedHTML(n)},goog.dom.safe.setInnerHtml=function(u,n){if(goog.asserts.ENABLE_ASSERTS){var A=u.tagName.toUpperCase();if(goog.dom.safe.SET_INNER_HTML_DISALLOWED_TAGS_[A])throw Error("goog.dom.safe.setInnerHtml cannot be used to set content of "+u.tagName+".")}goog.dom.safe.unsafeSetInnerHtmlDoNotUseOrElse(u,n)},goog.dom.safe.setOuterHtml=function(u,n){u.outerHTML=goog.html.SafeHtml.unwrapTrustedHTML(n)},goog.dom.safe.setFormElementAction=function(u,n){n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),goog.dom.asserts.assertIsHTMLFormElement(u).action=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setButtonFormAction=function(u,n){n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),goog.dom.asserts.assertIsHTMLButtonElement(u).formAction=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setInputFormAction=function(u,n){n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),goog.dom.asserts.assertIsHTMLInputElement(u).formAction=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setStyle=function(u,n){u.style.cssText=goog.html.SafeStyle.unwrap(n)},goog.dom.safe.documentWrite=function(u,n){u.write(goog.html.SafeHtml.unwrapTrustedHTML(n))},goog.dom.safe.setAnchorHref=function(u,n){goog.dom.asserts.assertIsHTMLAnchorElement(u),n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),u.href=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setImageSrc=function(u,n){if(goog.dom.asserts.assertIsHTMLImageElement(u),!(n instanceof goog.html.SafeUrl)){var A=/^data:image\//i.test(n);n=goog.html.SafeUrl.sanitizeAssertUnchanged(n,A)}u.src=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setAudioSrc=function(u,n){if(goog.dom.asserts.assertIsHTMLAudioElement(u),!(n instanceof goog.html.SafeUrl)){var A=/^data:audio\//i.test(n);n=goog.html.SafeUrl.sanitizeAssertUnchanged(n,A)}u.src=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setVideoSrc=function(u,n){if(goog.dom.asserts.assertIsHTMLVideoElement(u),!(n instanceof goog.html.SafeUrl)){var A=/^data:video\//i.test(n);n=goog.html.SafeUrl.sanitizeAssertUnchanged(n,A)}u.src=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.setEmbedSrc=function(u,n){goog.dom.asserts.assertIsHTMLEmbedElement(u),u.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(n)},goog.dom.safe.setFrameSrc=function(u,n){goog.dom.asserts.assertIsHTMLFrameElement(u),u.src=goog.html.TrustedResourceUrl.unwrap(n)},goog.dom.safe.setIframeSrc=function(u,n){goog.dom.asserts.assertIsHTMLIFrameElement(u),u.src=goog.html.TrustedResourceUrl.unwrap(n)},goog.dom.safe.setIframeSrcdoc=function(u,n){goog.dom.asserts.assertIsHTMLIFrameElement(u),u.srcdoc=goog.html.SafeHtml.unwrapTrustedHTML(n)},goog.dom.safe.setLinkHrefAndRel=function(u,n,A){goog.dom.asserts.assertIsHTMLLinkElement(u),u.rel=A,goog.string.internal.caseInsensitiveContains(A,"stylesheet")?(goog.asserts.assert(n instanceof goog.html.TrustedResourceUrl,'URL must be TrustedResourceUrl because "rel" contains "stylesheet"'),u.href=goog.html.TrustedResourceUrl.unwrap(n)):u.href=n instanceof goog.html.TrustedResourceUrl?goog.html.TrustedResourceUrl.unwrap(n):n instanceof goog.html.SafeUrl?goog.html.SafeUrl.unwrap(n):goog.html.SafeUrl.unwrap(goog.html.SafeUrl.sanitizeAssertUnchanged(n))},goog.dom.safe.setObjectData=function(u,n){goog.dom.asserts.assertIsHTMLObjectElement(u),u.data=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(n)},goog.dom.safe.setScriptSrc=function(u,n){goog.dom.asserts.assertIsHTMLScriptElement(u),u.src=goog.html.TrustedResourceUrl.unwrapTrustedScriptURL(n),(n=goog.getScriptNonce())&&u.setAttribute("nonce",n)},goog.dom.safe.setScriptContent=function(u,n){goog.dom.asserts.assertIsHTMLScriptElement(u),u.text=goog.html.SafeScript.unwrapTrustedScript(n),(n=goog.getScriptNonce())&&u.setAttribute("nonce",n)},goog.dom.safe.setLocationHref=function(u,n){goog.dom.asserts.assertIsLocation(u),n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),u.href=goog.html.SafeUrl.unwrap(n)},goog.dom.safe.assignLocation=function(u,n){goog.dom.asserts.assertIsLocation(u),n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),u.assign(goog.html.SafeUrl.unwrap(n))},goog.dom.safe.replaceLocation=function(u,n){n=n instanceof goog.html.SafeUrl?n:goog.html.SafeUrl.sanitizeAssertUnchanged(n),u.replace(goog.html.SafeUrl.unwrap(n))},goog.dom.safe.openInWindow=function(u,n,A,C,d){return u=u instanceof goog.html.SafeUrl?u:goog.html.SafeUrl.sanitizeAssertUnchanged(u),n=n||goog.global,A=A instanceof goog.string.Const?goog.string.Const.unwrap(A):A||"",n.open(goog.html.SafeUrl.unwrap(u),A,C,d)},goog.dom.safe.parseFromStringHtml=function(u,n){return goog.dom.safe.parseFromString(u,n,"text/html")},goog.dom.safe.parseFromString=function(u,n,A){return u.parseFromString(goog.html.SafeHtml.unwrapTrustedHTML(n),A)},goog.dom.safe.createImageFromBlob=function(u){if(!/^image\/.*/g.test(u.type))throw Error("goog.dom.safe.createImageFromBlob only accepts MIME type image/.*.");var n=goog.global.URL.createObjectURL(u);return(u=new goog.global.Image).onload=function(){goog.global.URL.revokeObjectURL(n)},goog.dom.safe.setImageSrc(u,goog.html.uncheckedconversions.safeUrlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Image blob URL."),n)),u},goog.string.DETECT_DOUBLE_ESCAPING=!1,goog.string.FORCE_NON_DOM_HTML_UNESCAPING=!1,goog.string.Unicode={NBSP:"\xA0"},goog.string.startsWith=goog.string.internal.startsWith,goog.string.endsWith=goog.string.internal.endsWith,goog.string.caseInsensitiveStartsWith=goog.string.internal.caseInsensitiveStartsWith,goog.string.caseInsensitiveEndsWith=goog.string.internal.caseInsensitiveEndsWith,goog.string.caseInsensitiveEquals=goog.string.internal.caseInsensitiveEquals,goog.string.subs=function(u,n){for(var A=u.split("%s"),C="",d=Array.prototype.slice.call(arguments,1);d.length&&1<A.length;)C+=A.shift()+d.shift();return C+A.join("%s")},goog.string.collapseWhitespace=function(u){return u.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},goog.string.isEmptyOrWhitespace=goog.string.internal.isEmptyOrWhitespace,goog.string.isEmptyString=function(u){return u.length==0},goog.string.isEmpty=goog.string.isEmptyOrWhitespace,goog.string.isEmptyOrWhitespaceSafe=function(u){return goog.string.isEmptyOrWhitespace(goog.string.makeSafe(u))},goog.string.isEmptySafe=goog.string.isEmptyOrWhitespaceSafe,goog.string.isBreakingWhitespace=function(u){return!/[^\t\n\r ]/.test(u)},goog.string.isAlpha=function(u){return!/[^a-zA-Z]/.test(u)},goog.string.isNumeric=function(u){return!/[^0-9]/.test(u)},goog.string.isAlphaNumeric=function(u){return!/[^a-zA-Z0-9]/.test(u)},goog.string.isSpace=function(u){return u==" "},goog.string.isUnicodeChar=function(u){return u.length==1&&" "<=u&&"~">=u||"\x80"<=u&&"\uFFFD">=u},goog.string.stripNewlines=function(u){return u.replace(/(\r\n|\r|\n)+/g," ")},goog.string.canonicalizeNewlines=function(u){return u.replace(/(\r\n|\r|\n)/g,`
`)},goog.string.normalizeWhitespace=function(u){return u.replace(/\xa0|\s/g," ")},goog.string.normalizeSpaces=function(u){return u.replace(/\xa0|[ \t]+/g," ")},goog.string.collapseBreakingSpaces=function(u){return u.replace(/[\t\r\n ]+/g," ").replace(/^[\t\r\n ]+|[\t\r\n ]+$/g,"")},goog.string.trim=goog.string.internal.trim,goog.string.trimLeft=function(u){return u.replace(/^[\s\xa0]+/,"")},goog.string.trimRight=function(u){return u.replace(/[\s\xa0]+$/,"")},goog.string.caseInsensitiveCompare=goog.string.internal.caseInsensitiveCompare,goog.string.numberAwareCompare_=function(u,n,A){if(u==n)return 0;if(!u)return-1;if(!n)return 1;for(var C=u.toLowerCase().match(A),d=n.toLowerCase().match(A),g=Math.min(C.length,d.length),i=0;i<g;i++){A=C[i];var _=d[i];if(A!=_)return u=parseInt(A,10),!isNaN(u)&&(n=parseInt(_,10),!isNaN(n)&&u-n)?u-n:A<_?-1:1}return C.length!=d.length?C.length-d.length:u<n?-1:1},goog.string.intAwareCompare=function(u,n){return goog.string.numberAwareCompare_(u,n,/\d+|\D+/g)},goog.string.floatAwareCompare=function(u,n){return goog.string.numberAwareCompare_(u,n,/\d+|\.\d+|\D+/g)},goog.string.numerateCompare=goog.string.floatAwareCompare,goog.string.urlEncode=function(u){return encodeURIComponent(String(u))},goog.string.urlDecode=function(u){return decodeURIComponent(u.replace(/\+/g," "))},goog.string.newLineToBr=goog.string.internal.newLineToBr,goog.string.htmlEscape=function(u,n){return u=goog.string.internal.htmlEscape(u,n),goog.string.DETECT_DOUBLE_ESCAPING&&(u=u.replace(goog.string.E_RE_,"&#101;")),u},goog.string.E_RE_=/e/g,goog.string.unescapeEntities=function(u){return goog.string.contains(u,"&")?!goog.string.FORCE_NON_DOM_HTML_UNESCAPING&&"document"in goog.global?goog.string.unescapeEntitiesUsingDom_(u):goog.string.unescapePureXmlEntities_(u):u},goog.string.unescapeEntitiesWithDocument=function(u,n){return goog.string.contains(u,"&")?goog.string.unescapeEntitiesUsingDom_(u,n):u},goog.string.unescapeEntitiesUsingDom_=function(u,n){var A={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'},C=n?n.createElement("div"):goog.global.document.createElement("div");return u.replace(goog.string.HTML_ENTITY_PATTERN_,function(d,g){var i=A[d];return i||(g.charAt(0)=="#"&&(g=+("0"+g.substr(1)),isNaN(g)||(i=String.fromCharCode(g))),i||(goog.dom.safe.setInnerHtml(C,goog.html.uncheckedconversions.safeHtmlFromStringKnownToSatisfyTypeContract(goog.string.Const.from("Single HTML entity."),d+" ")),i=C.firstChild.nodeValue.slice(0,-1)),A[d]=i)})},goog.string.unescapePureXmlEntities_=function(u){return u.replace(/&([^;]+);/g,function(n,A){switch(A){case"amp":return"&";case"lt":return"<";case"gt":return">";case"quot":return'"';default:return A.charAt(0)!="#"||(A=+("0"+A.substr(1)),isNaN(A))?n:String.fromCharCode(A)}})},goog.string.HTML_ENTITY_PATTERN_=/&([^;\s<&]+);?/g,goog.string.whitespaceEscape=function(u,n){return goog.string.newLineToBr(u.replace(/  /g," &#160;"),n)},goog.string.preserveSpaces=function(u){return u.replace(/(^|[\n ]) /g,"$1"+goog.string.Unicode.NBSP)},goog.string.stripQuotes=function(u,n){for(var A=n.length,C=0;C<A;C++){var d=A==1?n:n.charAt(C);if(u.charAt(0)==d&&u.charAt(u.length-1)==d)return u.substring(1,u.length-1)}return u},goog.string.truncate=function(u,n,A){return A&&(u=goog.string.unescapeEntities(u)),u.length>n&&(u=u.substring(0,n-3)+"..."),A&&(u=goog.string.htmlEscape(u)),u},goog.string.truncateMiddle=function(u,n,A,C){if(A&&(u=goog.string.unescapeEntities(u)),C&&u.length>n){C>n&&(C=n);var d=u.length-C;u=u.substring(0,n-C)+"..."+u.substring(d)}else u.length>n&&(C=Math.floor(n/2),d=u.length-C,u=u.substring(0,C+n%2)+"..."+u.substring(d));return A&&(u=goog.string.htmlEscape(u)),u},goog.string.specialEscapeChars_={"\0":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},goog.string.jsEscapeCache_={"'":"\\'"},goog.string.quote=function(u){u=String(u);for(var n=['"'],A=0;A<u.length;A++){var C=u.charAt(A),d=C.charCodeAt(0);n[A+1]=goog.string.specialEscapeChars_[C]||(31<d&&127>d?C:goog.string.escapeChar(C))}return n.push('"'),n.join("")},goog.string.escapeString=function(u){for(var n=[],A=0;A<u.length;A++)n[A]=goog.string.escapeChar(u.charAt(A));return n.join("")},goog.string.escapeChar=function(u){if(u in goog.string.jsEscapeCache_)return goog.string.jsEscapeCache_[u];if(u in goog.string.specialEscapeChars_)return goog.string.jsEscapeCache_[u]=goog.string.specialEscapeChars_[u];var n=u.charCodeAt(0);if(31<n&&127>n)var A=u;else 256>n?(A="\\x",(16>n||256<n)&&(A+="0")):(A="\\u",4096>n&&(A+="0")),A+=n.toString(16).toUpperCase();return goog.string.jsEscapeCache_[u]=A},goog.string.contains=goog.string.internal.contains,goog.string.caseInsensitiveContains=goog.string.internal.caseInsensitiveContains,goog.string.countOf=function(u,n){return u&&n?u.split(n).length-1:0},goog.string.removeAt=function(u,n,A){var C=u;return 0<=n&&n<u.length&&0<A&&(C=u.substr(0,n)+u.substr(n+A,u.length-n-A)),C},goog.string.remove=function(u,n){return u.replace(n,"")},goog.string.removeAll=function(u,n){return n=new RegExp(goog.string.regExpEscape(n),"g"),u.replace(n,"")},goog.string.replaceAll=function(u,n,A){return n=new RegExp(goog.string.regExpEscape(n),"g"),u.replace(n,A.replace(/\$/g,"$$$$"))},goog.string.regExpEscape=function(u){return String(u).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},goog.string.repeat=String.prototype.repeat?function(u,n){return u.repeat(n)}:function(u,n){return Array(n+1).join(u)},goog.string.padNumber=function(u,n,A){return(A=(u=A!==void 0?u.toFixed(A):String(u)).indexOf("."))==-1&&(A=u.length),goog.string.repeat("0",Math.max(0,n-A))+u},goog.string.makeSafe=function(u){return u==null?"":String(u)},goog.string.buildString=function(u){return Array.prototype.join.call(arguments,"")},goog.string.getRandomString=function(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^goog.now()).toString(36)},goog.string.compareVersions=goog.string.internal.compareVersions,goog.string.hashCode=function(u){for(var n=0,A=0;A<u.length;++A)n=31*n+u.charCodeAt(A)>>>0;return n},goog.string.uniqueStringCounter_=2147483648*Math.random()|0,goog.string.createUniqueString=function(){return"goog_"+goog.string.uniqueStringCounter_++},goog.string.toNumber=function(u){var n=Number(u);return n==0&&goog.string.isEmptyOrWhitespace(u)?NaN:n},goog.string.isLowerCamelCase=function(u){return/^[a-z]+([A-Z][a-z]*)*$/.test(u)},goog.string.isUpperCamelCase=function(u){return/^([A-Z][a-z]*)+$/.test(u)},goog.string.toCamelCase=function(u){return String(u).replace(/\-([a-z])/g,function(n,A){return A.toUpperCase()})},goog.string.toSelectorCase=function(u){return String(u).replace(/([A-Z])/g,"-$1").toLowerCase()},goog.string.toTitleCase=function(u,n){return n=typeof n=="string"?goog.string.regExpEscape(n):"\\s",u.replace(new RegExp("(^"+(n?"|["+n+"]+":"")+")([a-z])","g"),function(A,C,d){return C+d.toUpperCase()})},goog.string.capitalize=function(u){return String(u.charAt(0)).toUpperCase()+String(u.substr(1)).toLowerCase()},goog.string.parseInt=function(u){return isFinite(u)&&(u=String(u)),typeof u=="string"?/^\s*-?0x/i.test(u)?parseInt(u,16):parseInt(u,10):NaN},goog.string.splitLimit=function(u,n,A){u=u.split(n);for(var C=[];0<A&&u.length;)C.push(u.shift()),A--;return u.length&&C.push(u.join(n)),C},goog.string.lastComponent=function(u,n){if(!n)return u;typeof n=="string"&&(n=[n]);for(var A=-1,C=0;C<n.length;C++)if(n[C]!=""){var d=u.lastIndexOf(n[C]);d>A&&(A=d)}return A==-1?u:u.slice(A+1)},goog.string.editDistance=function(u,n){var A=[],C=[];if(u==n)return 0;if(!u.length||!n.length)return Math.max(u.length,n.length);for(var d=0;d<n.length+1;d++)A[d]=d;for(d=0;d<u.length;d++){C[0]=d+1;for(var g=0;g<n.length;g++)C[g+1]=Math.min(C[g]+1,A[g+1]+1,A[g]+ +(u[d]!=n[g]));for(g=0;g<A.length;g++)A[g]=C[g]}return C[n.length]},goog.labs.userAgent.engine={},goog.labs.userAgent.engine.isPresto=function(){return goog.labs.userAgent.util.matchUserAgent("Presto")},goog.labs.userAgent.engine.isTrident=function(){return goog.labs.userAgent.util.matchUserAgent("Trident")||goog.labs.userAgent.util.matchUserAgent("MSIE")},goog.labs.userAgent.engine.isEdge=function(){return goog.labs.userAgent.util.matchUserAgent("Edge")},goog.labs.userAgent.engine.isWebKit=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("WebKit")&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.isGecko=function(){return goog.labs.userAgent.util.matchUserAgent("Gecko")&&!goog.labs.userAgent.engine.isWebKit()&&!goog.labs.userAgent.engine.isTrident()&&!goog.labs.userAgent.engine.isEdge()},goog.labs.userAgent.engine.getVersion=function(){var u=goog.labs.userAgent.util.getUserAgent();if(u){u=goog.labs.userAgent.util.extractVersionTuples(u);var n,A=goog.labs.userAgent.engine.getEngineTuple_(u);if(A)return A[0]=="Gecko"?goog.labs.userAgent.engine.getVersionForKey_(u,"Firefox"):A[1];if((u=u[0])&&(n=u[2])&&(n=/Trident\/([^\s;]+)/.exec(n)))return n[1]}return""},goog.labs.userAgent.engine.getEngineTuple_=function(u){if(!goog.labs.userAgent.engine.isEdge())return u[1];for(var n=0;n<u.length;n++){var A=u[n];if(A[0]=="Edge")return A}},goog.labs.userAgent.engine.isVersionOrHigher=function(u){return 0<=goog.string.compareVersions(goog.labs.userAgent.engine.getVersion(),u)},goog.labs.userAgent.engine.getVersionForKey_=function(u,n){return(u=goog.array.find(u,function(A){return n==A[0]}))&&u[1]||""},goog.labs.userAgent.platform={},goog.labs.userAgent.platform.isAndroid=function(){return goog.labs.userAgent.util.matchUserAgent("Android")},goog.labs.userAgent.platform.isIpod=function(){return goog.labs.userAgent.util.matchUserAgent("iPod")},goog.labs.userAgent.platform.isIphone=function(){return goog.labs.userAgent.util.matchUserAgent("iPhone")&&!goog.labs.userAgent.util.matchUserAgent("iPod")&&!goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIpad=function(){return goog.labs.userAgent.util.matchUserAgent("iPad")},goog.labs.userAgent.platform.isIos=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpad()||goog.labs.userAgent.platform.isIpod()},goog.labs.userAgent.platform.isMacintosh=function(){return goog.labs.userAgent.util.matchUserAgent("Macintosh")},goog.labs.userAgent.platform.isLinux=function(){return goog.labs.userAgent.util.matchUserAgent("Linux")},goog.labs.userAgent.platform.isWindows=function(){return goog.labs.userAgent.util.matchUserAgent("Windows")},goog.labs.userAgent.platform.isChromeOS=function(){return goog.labs.userAgent.util.matchUserAgent("CrOS")},goog.labs.userAgent.platform.isChromecast=function(){return goog.labs.userAgent.util.matchUserAgent("CrKey")},goog.labs.userAgent.platform.isKaiOS=function(){return goog.labs.userAgent.util.matchUserAgentIgnoreCase("KaiOS")},goog.labs.userAgent.platform.getVersion=function(){var u=goog.labs.userAgent.util.getUserAgent(),n="";return goog.labs.userAgent.platform.isWindows()?n=(u=(n=/Windows (?:NT|Phone) ([0-9.]+)/).exec(u))?u[1]:"0.0":goog.labs.userAgent.platform.isIos()?n=(u=(n=/(?:iPhone|iPod|iPad|CPU)\s+OS\s+(\S+)/).exec(u))&&u[1].replace(/_/g,"."):goog.labs.userAgent.platform.isMacintosh()?n=(u=(n=/Mac OS X ([0-9_.]+)/).exec(u))?u[1].replace(/_/g,"."):"10":goog.labs.userAgent.platform.isKaiOS()?n=(u=(n=/(?:KaiOS)\/(\S+)/i).exec(u))&&u[1]:goog.labs.userAgent.platform.isAndroid()?n=(u=(n=/Android\s+([^\);]+)(\)|;)/).exec(u))&&u[1]:goog.labs.userAgent.platform.isChromeOS()&&(n=(u=(n=/(?:CrOS\s+(?:i686|x86_64)\s+([0-9.]+))/).exec(u))&&u[1]),n||""},goog.labs.userAgent.platform.isVersionOrHigher=function(u){return 0<=goog.string.compareVersions(goog.labs.userAgent.platform.getVersion(),u)},goog.reflect={},goog.reflect.object=function(u,n){return n},goog.reflect.objectProperty=function(u,n){return u},goog.reflect.sinkValue=function(u){return goog.reflect.sinkValue[" "](u),u},goog.reflect.sinkValue[" "]=goog.nullFunction,goog.reflect.canAccessProperty=function(u,n){try{return goog.reflect.sinkValue(u[n]),!0}catch(A){}return!1},goog.reflect.cache=function(u,n,A,C){return C=C?C(n):n,Object.prototype.hasOwnProperty.call(u,C)?u[C]:u[C]=A(n)},goog.userAgent={},goog.userAgent.ASSUME_IE=!1,goog.userAgent.ASSUME_EDGE=!1,goog.userAgent.ASSUME_GECKO=!1,goog.userAgent.ASSUME_WEBKIT=!1,goog.userAgent.ASSUME_MOBILE_WEBKIT=!1,goog.userAgent.ASSUME_OPERA=!1,goog.userAgent.ASSUME_ANY_VERSION=!1,goog.userAgent.BROWSER_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_GECKO||goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_OPERA,goog.userAgent.getUserAgentString=function(){return goog.labs.userAgent.util.getUserAgent()},goog.userAgent.getNavigatorTyped=function(){return goog.global.navigator||null},goog.userAgent.getNavigator=function(){return goog.userAgent.getNavigatorTyped()},goog.userAgent.OPERA=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_OPERA:goog.labs.userAgent.browser.isOpera(),goog.userAgent.IE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_IE:goog.labs.userAgent.browser.isIE(),goog.userAgent.EDGE=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_EDGE:goog.labs.userAgent.engine.isEdge(),goog.userAgent.EDGE_OR_IE=goog.userAgent.EDGE||goog.userAgent.IE,goog.userAgent.GECKO=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_GECKO:goog.labs.userAgent.engine.isGecko(),goog.userAgent.WEBKIT=goog.userAgent.BROWSER_KNOWN_?goog.userAgent.ASSUME_WEBKIT||goog.userAgent.ASSUME_MOBILE_WEBKIT:goog.labs.userAgent.engine.isWebKit(),goog.userAgent.isMobile_=function(){return goog.userAgent.WEBKIT&&goog.labs.userAgent.util.matchUserAgent("Mobile")},goog.userAgent.MOBILE=goog.userAgent.ASSUME_MOBILE_WEBKIT||goog.userAgent.isMobile_(),goog.userAgent.SAFARI=goog.userAgent.WEBKIT,goog.userAgent.determinePlatform_=function(){var u=goog.userAgent.getNavigatorTyped();return u&&u.platform||""},goog.userAgent.PLATFORM=goog.userAgent.determinePlatform_(),goog.userAgent.ASSUME_MAC=!1,goog.userAgent.ASSUME_WINDOWS=!1,goog.userAgent.ASSUME_LINUX=!1,goog.userAgent.ASSUME_X11=!1,goog.userAgent.ASSUME_ANDROID=!1,goog.userAgent.ASSUME_IPHONE=!1,goog.userAgent.ASSUME_IPAD=!1,goog.userAgent.ASSUME_IPOD=!1,goog.userAgent.ASSUME_KAIOS=!1,goog.userAgent.PLATFORM_KNOWN_=goog.userAgent.ASSUME_MAC||goog.userAgent.ASSUME_WINDOWS||goog.userAgent.ASSUME_LINUX||goog.userAgent.ASSUME_X11||goog.userAgent.ASSUME_ANDROID||goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD,goog.userAgent.MAC=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_MAC:goog.labs.userAgent.platform.isMacintosh(),goog.userAgent.WINDOWS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_WINDOWS:goog.labs.userAgent.platform.isWindows(),goog.userAgent.isLegacyLinux_=function(){return goog.labs.userAgent.platform.isLinux()||goog.labs.userAgent.platform.isChromeOS()},goog.userAgent.LINUX=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_LINUX:goog.userAgent.isLegacyLinux_(),goog.userAgent.isX11_=function(){var u=goog.userAgent.getNavigatorTyped();return!!u&&goog.string.contains(u.appVersion||"","X11")},goog.userAgent.X11=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_X11:goog.userAgent.isX11_(),goog.userAgent.ANDROID=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_ANDROID:goog.labs.userAgent.platform.isAndroid(),goog.userAgent.IPHONE=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE:goog.labs.userAgent.platform.isIphone(),goog.userAgent.IPAD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.IPOD=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIpod(),goog.userAgent.IOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_IPHONE||goog.userAgent.ASSUME_IPAD||goog.userAgent.ASSUME_IPOD:goog.labs.userAgent.platform.isIos(),goog.userAgent.KAIOS=goog.userAgent.PLATFORM_KNOWN_?goog.userAgent.ASSUME_KAIOS:goog.labs.userAgent.platform.isKaiOS(),goog.userAgent.determineVersion_=function(){var u="",n=goog.userAgent.getVersionRegexResult_();return n&&(u=n?n[1]:""),goog.userAgent.IE&&(n=goog.userAgent.getDocumentMode_())!=null&&n>parseFloat(u)?String(n):u},goog.userAgent.getVersionRegexResult_=function(){var u=goog.userAgent.getUserAgentString();return goog.userAgent.GECKO?/rv:([^\);]+)(\)|;)/.exec(u):goog.userAgent.EDGE?/Edge\/([\d\.]+)/.exec(u):goog.userAgent.IE?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(u):goog.userAgent.WEBKIT?/WebKit\/(\S+)/.exec(u):goog.userAgent.OPERA?/(?:Version)[ \/]?(\S+)/.exec(u):void 0},goog.userAgent.getDocumentMode_=function(){var u=goog.global.document;return u?u.documentMode:void 0},goog.userAgent.VERSION=goog.userAgent.determineVersion_(),goog.userAgent.compare=function(u,n){return goog.string.compareVersions(u,n)},goog.userAgent.isVersionOrHigherCache_={},goog.userAgent.isVersionOrHigher=function(u){return goog.userAgent.ASSUME_ANY_VERSION||goog.reflect.cache(goog.userAgent.isVersionOrHigherCache_,u,function(){return 0<=goog.string.compareVersions(goog.userAgent.VERSION,u)})},goog.userAgent.isVersion=goog.userAgent.isVersionOrHigher,goog.userAgent.isDocumentModeOrHigher=function(u){return Number(goog.userAgent.DOCUMENT_MODE)>=u},goog.userAgent.isDocumentMode=goog.userAgent.isDocumentModeOrHigher,goog.userAgent.DOCUMENT_MODE=function(){if(goog.global.document&&goog.userAgent.IE){var u=goog.userAgent.getDocumentMode_();return u||parseInt(goog.userAgent.VERSION,10)||void 0}}(),goog.userAgent.product={},goog.userAgent.product.ASSUME_FIREFOX=!1,goog.userAgent.product.ASSUME_IPHONE=!1,goog.userAgent.product.ASSUME_IPAD=!1,goog.userAgent.product.ASSUME_ANDROID=!1,goog.userAgent.product.ASSUME_CHROME=!1,goog.userAgent.product.ASSUME_SAFARI=!1,goog.userAgent.product.PRODUCT_KNOWN_=goog.userAgent.ASSUME_IE||goog.userAgent.ASSUME_EDGE||goog.userAgent.ASSUME_OPERA||goog.userAgent.product.ASSUME_FIREFOX||goog.userAgent.product.ASSUME_IPHONE||goog.userAgent.product.ASSUME_IPAD||goog.userAgent.product.ASSUME_ANDROID||goog.userAgent.product.ASSUME_CHROME||goog.userAgent.product.ASSUME_SAFARI,goog.userAgent.product.OPERA=goog.userAgent.OPERA,goog.userAgent.product.IE=goog.userAgent.IE,goog.userAgent.product.EDGE=goog.userAgent.EDGE,goog.userAgent.product.FIREFOX=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_FIREFOX:goog.labs.userAgent.browser.isFirefox(),goog.userAgent.product.isIphoneOrIpod_=function(){return goog.labs.userAgent.platform.isIphone()||goog.labs.userAgent.platform.isIpod()},goog.userAgent.product.IPHONE=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPHONE:goog.userAgent.product.isIphoneOrIpod_(),goog.userAgent.product.IPAD=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_IPAD:goog.labs.userAgent.platform.isIpad(),goog.userAgent.product.ANDROID=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_ANDROID:goog.labs.userAgent.browser.isAndroidBrowser(),goog.userAgent.product.CHROME=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_CHROME:goog.labs.userAgent.browser.isChrome(),goog.userAgent.product.isSafariDesktop_=function(){return goog.labs.userAgent.browser.isSafari()&&!goog.labs.userAgent.platform.isIos()},goog.userAgent.product.SAFARI=goog.userAgent.product.PRODUCT_KNOWN_?goog.userAgent.product.ASSUME_SAFARI:goog.userAgent.product.isSafariDesktop_(),goog.crypt.base64={},goog.crypt.base64.DEFAULT_ALPHABET_COMMON_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",goog.crypt.base64.ENCODED_VALS=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"+/=",goog.crypt.base64.ENCODED_VALS_WEBSAFE=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_+"-_.",goog.crypt.base64.Alphabet={DEFAULT:0,NO_PADDING:1,WEBSAFE:2,WEBSAFE_DOT_PADDING:3,WEBSAFE_NO_PADDING:4},goog.crypt.base64.paddingChars_="=.",goog.crypt.base64.isPadding_=function(u){return goog.string.contains(goog.crypt.base64.paddingChars_,u)},goog.crypt.base64.byteToCharMaps_={},goog.crypt.base64.charToByteMap_=null,goog.crypt.base64.ASSUME_NATIVE_SUPPORT_=goog.userAgent.GECKO||goog.userAgent.WEBKIT&&!goog.userAgent.product.SAFARI||goog.userAgent.OPERA,goog.crypt.base64.HAS_NATIVE_ENCODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||typeof goog.global.btoa=="function",goog.crypt.base64.HAS_NATIVE_DECODE_=goog.crypt.base64.ASSUME_NATIVE_SUPPORT_||!goog.userAgent.product.SAFARI&&!goog.userAgent.IE&&typeof goog.global.atob=="function",goog.crypt.base64.encodeByteArray=function(u,n){goog.asserts.assert(goog.isArrayLike(u),"encodeByteArray takes an array as a parameter"),n===void 0&&(n=goog.crypt.base64.Alphabet.DEFAULT),goog.crypt.base64.init_(),n=goog.crypt.base64.byteToCharMaps_[n];for(var A=[],C=0;C<u.length;C+=3){var d=u[C],g=C+1<u.length,i=g?u[C+1]:0,_=C+2<u.length,j=_?u[C+2]:0,$=d>>2;d=(3&d)<<4|i>>4,i=(15&i)<<2|j>>6,j&=63,_||(j=64,g||(i=64)),A.push(n[$],n[d],n[i]||"",n[j]||"")}return A.join("")},goog.crypt.base64.encodeString=function(u,n){return goog.crypt.base64.HAS_NATIVE_ENCODE_&&!n?goog.global.btoa(u):goog.crypt.base64.encodeByteArray(goog.crypt.stringToByteArray(u),n)},goog.crypt.base64.decodeString=function(u,n){if(goog.crypt.base64.HAS_NATIVE_DECODE_&&!n)return goog.global.atob(u);var A="";return goog.crypt.base64.decodeStringInternal_(u,function(C){A+=String.fromCharCode(C)}),A},goog.crypt.base64.decodeStringToByteArray=function(u,n){var A=[];return goog.crypt.base64.decodeStringInternal_(u,function(C){A.push(C)}),A},goog.crypt.base64.decodeStringToUint8Array=function(u){goog.asserts.assert(!goog.userAgent.IE||goog.userAgent.isVersionOrHigher("10"),"Browser does not support typed arrays");var n=u.length,A=3*n/4;A%3?A=Math.floor(A):goog.crypt.base64.isPadding_(u[n-1])&&(A=goog.crypt.base64.isPadding_(u[n-2])?A-2:A-1);var C=new Uint8Array(A),d=0;return goog.crypt.base64.decodeStringInternal_(u,function(g){C[d++]=g}),C.subarray(0,d)},goog.crypt.base64.decodeStringInternal_=function(u,n){function A(j){for(;C<u.length;){var $=u.charAt(C++),re=goog.crypt.base64.charToByteMap_[$];if(re!=null)return re;if(!goog.string.isEmptyOrWhitespace($))throw Error("Unknown base64 encoding at char: "+$)}return j}goog.crypt.base64.init_();for(var C=0;;){var d=A(-1),g=A(0),i=A(64),_=A(64);if(_===64&&d===-1)break;n(d<<2|g>>4),i!=64&&(n(g<<4&240|i>>2),_!=64&&n(i<<6&192|_))}},goog.crypt.base64.init_=function(){if(!goog.crypt.base64.charToByteMap_){goog.crypt.base64.charToByteMap_={};for(var u=goog.crypt.base64.DEFAULT_ALPHABET_COMMON_.split(""),n=["+/=","+/","-_=","-_.","-_"],A=0;5>A;A++){var C=u.concat(n[A].split(""));goog.crypt.base64.byteToCharMaps_[A]=C;for(var d=0;d<C.length;d++){var g=C[d],i=goog.crypt.base64.charToByteMap_[g];i===void 0?goog.crypt.base64.charToByteMap_[g]=d:goog.asserts.assert(i===d)}}}},jspb.utils={},jspb.utils.split64Low=0,jspb.utils.split64High=0,jspb.utils.splitUint64=function(u){var n=u>>>0;u=Math.floor((u-n)/jspb.BinaryConstants.TWO_TO_32)>>>0,jspb.utils.split64Low=n,jspb.utils.split64High=u},jspb.utils.splitInt64=function(u){var n=0>u,A=(u=Math.abs(u))>>>0;u=Math.floor((u-A)/jspb.BinaryConstants.TWO_TO_32),u>>>=0,n&&(u=~u>>>0,4294967295<(A=1+(~A>>>0))&&(A=0,4294967295<++u&&(u=0))),jspb.utils.split64Low=A,jspb.utils.split64High=u},jspb.utils.splitZigzag64=function(u){var n=0>u;u=2*Math.abs(u),jspb.utils.splitUint64(u),u=jspb.utils.split64Low;var A=jspb.utils.split64High;n&&(u==0?A==0?A=u=4294967295:(A--,u=4294967295):u--),jspb.utils.split64Low=u,jspb.utils.split64High=A},jspb.utils.splitFloat32=function(u){var n=0>u?1:0;if((u=n?-u:u)===0)0<1/u?(jspb.utils.split64High=0,jspb.utils.split64Low=0):(jspb.utils.split64High=0,jspb.utils.split64Low=2147483648);else if(isNaN(u))jspb.utils.split64High=0,jspb.utils.split64Low=2147483647;else if(u>jspb.BinaryConstants.FLOAT32_MAX)jspb.utils.split64High=0,jspb.utils.split64Low=(n<<31|2139095040)>>>0;else if(u<jspb.BinaryConstants.FLOAT32_MIN)u=Math.round(u/Math.pow(2,-149)),jspb.utils.split64High=0,jspb.utils.split64Low=(n<<31|u)>>>0;else{var A=Math.floor(Math.log(u)/Math.LN2);u*=Math.pow(2,-A),16777216<=(u=Math.round(u*jspb.BinaryConstants.TWO_TO_23))&&++A,jspb.utils.split64High=0,jspb.utils.split64Low=(n<<31|A+127<<23|8388607&u)>>>0}},jspb.utils.splitFloat64=function(u){var n=0>u?1:0;if((u=n?-u:u)===0)jspb.utils.split64High=0<1/u?0:2147483648,jspb.utils.split64Low=0;else if(isNaN(u))jspb.utils.split64High=2147483647,jspb.utils.split64Low=4294967295;else if(u>jspb.BinaryConstants.FLOAT64_MAX)jspb.utils.split64High=(n<<31|2146435072)>>>0,jspb.utils.split64Low=0;else if(u<jspb.BinaryConstants.FLOAT64_MIN){var A=u/Math.pow(2,-1074);u=A/jspb.BinaryConstants.TWO_TO_32,jspb.utils.split64High=(n<<31|u)>>>0,jspb.utils.split64Low=A>>>0}else{var C=0;if(2<=(A=u))for(;2<=A&&1023>C;)C++,A/=2;else for(;1>A&&-1022<C;)A*=2,C--;u=(A=u*Math.pow(2,-C))*jspb.BinaryConstants.TWO_TO_20&1048575,A=A*jspb.BinaryConstants.TWO_TO_52>>>0,jspb.utils.split64High=(n<<31|C+1023<<20|u)>>>0,jspb.utils.split64Low=A}},jspb.utils.splitHash64=function(u){var n=u.charCodeAt(0),A=u.charCodeAt(1),C=u.charCodeAt(2),d=u.charCodeAt(3),g=u.charCodeAt(4),i=u.charCodeAt(5),_=u.charCodeAt(6);u=u.charCodeAt(7),jspb.utils.split64Low=n+(A<<8)+(C<<16)+(d<<24)>>>0,jspb.utils.split64High=g+(i<<8)+(_<<16)+(u<<24)>>>0},jspb.utils.joinUint64=function(u,n){return n*jspb.BinaryConstants.TWO_TO_32+(u>>>0)},jspb.utils.joinInt64=function(u,n){var A=2147483648&n;return A&&(n=~n>>>0,(u=1+~u>>>0)==0&&(n=n+1>>>0)),u=jspb.utils.joinUint64(u,n),A?-u:u},jspb.utils.toZigzag64=function(u,n,A){var C=n>>31;return A(u<<1^C,(n<<1|u>>>31)^C)},jspb.utils.joinZigzag64=function(u,n){return jspb.utils.fromZigzag64(u,n,jspb.utils.joinInt64)},jspb.utils.fromZigzag64=function(u,n,A){var C=-(1&u);return A((u>>>1|n<<31)^C,n>>>1^C)},jspb.utils.joinFloat32=function(u,n){n=2*(u>>31)+1;var A=u>>>23&255;return u&=8388607,A==255?u?NaN:1/0*n:A==0?n*Math.pow(2,-149)*u:n*Math.pow(2,A-150)*(u+Math.pow(2,23))},jspb.utils.joinFloat64=function(u,n){var A=2*(n>>31)+1,C=n>>>20&2047;return u=jspb.BinaryConstants.TWO_TO_32*(1048575&n)+u,C==2047?u?NaN:1/0*A:C==0?A*Math.pow(2,-1074)*u:A*Math.pow(2,C-1075)*(u+jspb.BinaryConstants.TWO_TO_52)},jspb.utils.joinHash64=function(u,n){return String.fromCharCode(u>>>0&255,u>>>8&255,u>>>16&255,u>>>24&255,n>>>0&255,n>>>8&255,n>>>16&255,n>>>24&255)},jspb.utils.DIGITS="0123456789abcdef".split(""),jspb.utils.ZERO_CHAR_CODE_=48,jspb.utils.A_CHAR_CODE_=97,jspb.utils.joinUnsignedDecimalString=function(u,n){function A(d,g){return d=d?String(d):"",g?"0000000".slice(d.length)+d:d}if(2097151>=n)return""+jspb.utils.joinUint64(u,n);var C=(u>>>24|n<<8)>>>0&16777215;return u=(16777215&u)+6777216*C+6710656*(n=n>>16&65535),C+=8147497*n,n*=2,1e7<=u&&(C+=Math.floor(u/1e7),u%=1e7),1e7<=C&&(n+=Math.floor(C/1e7),C%=1e7),A(n,0)+A(C,n)+A(u,1)},jspb.utils.joinSignedDecimalString=function(u,n){var A=2147483648&n;return A&&(n=~n+((u=1+~u>>>0)==0?1:0)>>>0),u=jspb.utils.joinUnsignedDecimalString(u,n),A?"-"+u:u},jspb.utils.hash64ToDecimalString=function(u,n){jspb.utils.splitHash64(u),u=jspb.utils.split64Low;var A=jspb.utils.split64High;return n?jspb.utils.joinSignedDecimalString(u,A):jspb.utils.joinUnsignedDecimalString(u,A)},jspb.utils.hash64ArrayToDecimalStrings=function(u,n){for(var A=Array(u.length),C=0;C<u.length;C++)A[C]=jspb.utils.hash64ToDecimalString(u[C],n);return A},jspb.utils.decimalStringToHash64=function(u){function n(g,i){for(var _=0;8>_&&(g!==1||0<i);_++)i=g*C[_]+i,C[_]=255&i,i>>>=8}jspb.asserts.assert(0<u.length);var A=!1;u[0]==="-"&&(A=!0,u=u.slice(1));for(var C=[0,0,0,0,0,0,0,0],d=0;d<u.length;d++)n(10,u.charCodeAt(d)-jspb.utils.ZERO_CHAR_CODE_);return A&&(function(){for(var g=0;8>g;g++)C[g]=255&~C[g]}(),n(1,1)),goog.crypt.byteArrayToString(C)},jspb.utils.splitDecimalString=function(u){jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(u))},jspb.utils.toHexDigit_=function(u){return String.fromCharCode(10>u?jspb.utils.ZERO_CHAR_CODE_+u:jspb.utils.A_CHAR_CODE_-10+u)},jspb.utils.fromHexCharCode_=function(u){return u>=jspb.utils.A_CHAR_CODE_?u-jspb.utils.A_CHAR_CODE_+10:u-jspb.utils.ZERO_CHAR_CODE_},jspb.utils.hash64ToHexString=function(u){var n=Array(18);n[0]="0",n[1]="x";for(var A=0;8>A;A++){var C=u.charCodeAt(7-A);n[2*A+2]=jspb.utils.toHexDigit_(C>>4),n[2*A+3]=jspb.utils.toHexDigit_(15&C)}return n.join("")},jspb.utils.hexStringToHash64=function(u){u=u.toLowerCase(),jspb.asserts.assert(u.length==18),jspb.asserts.assert(u[0]=="0"),jspb.asserts.assert(u[1]=="x");for(var n="",A=0;8>A;A++){var C=jspb.utils.fromHexCharCode_(u.charCodeAt(2*A+2)),d=jspb.utils.fromHexCharCode_(u.charCodeAt(2*A+3));n=String.fromCharCode(16*C+d)+n}return n},jspb.utils.hash64ToNumber=function(u,n){jspb.utils.splitHash64(u),u=jspb.utils.split64Low;var A=jspb.utils.split64High;return n?jspb.utils.joinInt64(u,A):jspb.utils.joinUint64(u,A)},jspb.utils.numberToHash64=function(u){return jspb.utils.splitInt64(u),jspb.utils.joinHash64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.utils.countVarints=function(u,n,A){for(var C=0,d=n;d<A;d++)C+=u[d]>>7;return A-n-C},jspb.utils.countVarintFields=function(u,n,A,C){var d=0;if(128>(C=8*C+jspb.BinaryConstants.WireType.VARINT))for(;n<A&&u[n++]==C;)for(d++;;){var g=u[n++];if(!(128&g))break}else for(;n<A;){for(g=C;128<g;){if(u[n]!=(127&g|128))return d;n++,g>>=7}if(u[n++]!=g)break;for(d++;128&(g=u[n++]););}return d},jspb.utils.countFixedFields_=function(u,n,A,C,d){var g=0;if(128>C)for(;n<A&&u[n++]==C;)g++,n+=d;else for(;n<A;){for(var i=C;128<i;){if(u[n++]!=(127&i|128))return g;i>>=7}if(u[n++]!=i)break;g++,n+=d}return g},jspb.utils.countFixed32Fields=function(u,n,A,C){return jspb.utils.countFixedFields_(u,n,A,8*C+jspb.BinaryConstants.WireType.FIXED32,4)},jspb.utils.countFixed64Fields=function(u,n,A,C){return jspb.utils.countFixedFields_(u,n,A,8*C+jspb.BinaryConstants.WireType.FIXED64,8)},jspb.utils.countDelimitedFields=function(u,n,A,C){var d=0;for(C=8*C+jspb.BinaryConstants.WireType.DELIMITED;n<A;){for(var g=C;128<g;){if(u[n++]!=(127&g|128))return d;g>>=7}if(u[n++]!=g)break;d++;for(var i=0,_=1;i+=(127&(g=u[n++]))*_,_*=128,(128&g)!=0;);n+=i}return d},jspb.utils.debugBytesToTextFormat=function(u){var n='"';if(u){u=jspb.utils.byteSourceToUint8Array(u);for(var A=0;A<u.length;A++)n+="\\x",16>u[A]&&(n+="0"),n+=u[A].toString(16)}return n+'"'},jspb.utils.debugScalarToTextFormat=function(u){return typeof u=="string"?goog.string.quote(u):u.toString()},jspb.utils.stringToByteArray=function(u){for(var n=new Uint8Array(u.length),A=0;A<u.length;A++){var C=u.charCodeAt(A);if(255<C)throw Error("Conversion error: string contains codepoint outside of byte range");n[A]=C}return n},jspb.utils.byteSourceToUint8Array=function(u){return u.constructor===Uint8Array?u:u.constructor===ArrayBuffer||u.constructor===Array?new Uint8Array(u):u.constructor===String?goog.crypt.base64.decodeStringToUint8Array(u):u instanceof Uint8Array?new Uint8Array(u.buffer,u.byteOffset,u.byteLength):(jspb.asserts.fail("Type not convertible to Uint8Array."),new Uint8Array(0))},jspb.BinaryDecoder=function(u,n,A){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1,u&&this.setBlock(u,n,A)},jspb.BinaryDecoder.instanceCache_=[],jspb.BinaryDecoder.alloc=function(u,n,A){if(jspb.BinaryDecoder.instanceCache_.length){var C=jspb.BinaryDecoder.instanceCache_.pop();return u&&C.setBlock(u,n,A),C}return new jspb.BinaryDecoder(u,n,A)},jspb.BinaryDecoder.prototype.free=function(){this.clear(),100>jspb.BinaryDecoder.instanceCache_.length&&jspb.BinaryDecoder.instanceCache_.push(this)},jspb.BinaryDecoder.prototype.clone=function(){return jspb.BinaryDecoder.alloc(this.bytes_,this.start_,this.end_-this.start_)},jspb.BinaryDecoder.prototype.clear=function(){this.bytes_=null,this.cursor_=this.end_=this.start_=0,this.error_=!1},jspb.BinaryDecoder.prototype.getBuffer=function(){return this.bytes_},jspb.BinaryDecoder.prototype.setBlock=function(u,n,A){this.bytes_=jspb.utils.byteSourceToUint8Array(u),this.start_=n!==void 0?n:0,this.end_=A!==void 0?this.start_+A:this.bytes_.length,this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getEnd=function(){return this.end_},jspb.BinaryDecoder.prototype.setEnd=function(u){this.end_=u},jspb.BinaryDecoder.prototype.reset=function(){this.cursor_=this.start_},jspb.BinaryDecoder.prototype.getCursor=function(){return this.cursor_},jspb.BinaryDecoder.prototype.setCursor=function(u){this.cursor_=u},jspb.BinaryDecoder.prototype.advance=function(u){this.cursor_+=u,jspb.asserts.assert(this.cursor_<=this.end_)},jspb.BinaryDecoder.prototype.atEnd=function(){return this.cursor_==this.end_},jspb.BinaryDecoder.prototype.pastEnd=function(){return this.cursor_>this.end_},jspb.BinaryDecoder.prototype.getError=function(){return this.error_||0>this.cursor_||this.cursor_>this.end_},jspb.BinaryDecoder.prototype.readSplitVarint64=function(u){for(var n=128,A=0,C=0,d=0;4>d&&128<=n;d++)A|=(127&(n=this.bytes_[this.cursor_++]))<<7*d;if(128<=n&&(A|=(127&(n=this.bytes_[this.cursor_++]))<<28,C|=(127&n)>>4),128<=n)for(d=0;5>d&&128<=n;d++)C|=(127&(n=this.bytes_[this.cursor_++]))<<7*d+3;if(128>n)return u(A>>>0,C>>>0);jspb.asserts.fail("Failed to read varint, encoding is invalid."),this.error_=!0},jspb.BinaryDecoder.prototype.readSplitZigzagVarint64=function(u){return this.readSplitVarint64(function(n,A){return jspb.utils.fromZigzag64(n,A,u)})},jspb.BinaryDecoder.prototype.readSplitFixed64=function(u){var n=this.bytes_,A=this.cursor_;this.cursor_+=8;for(var C=0,d=0,g=A+7;g>=A;g--)C=C<<8|n[g],d=d<<8|n[g+4];return u(C,d)},jspb.BinaryDecoder.prototype.skipVarint=function(){for(;128&this.bytes_[this.cursor_];)this.cursor_++;this.cursor_++},jspb.BinaryDecoder.prototype.unskipVarint=function(u){for(;128<u;)this.cursor_--,u>>>=7;this.cursor_--},jspb.BinaryDecoder.prototype.readUnsignedVarint32=function(){var u=this.bytes_,n=u[this.cursor_+0],A=127&n;return 128>n?(this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),A):(A|=(127&(n=u[this.cursor_+1]))<<7,128>n?(this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),A):(A|=(127&(n=u[this.cursor_+2]))<<14,128>n?(this.cursor_+=3,jspb.asserts.assert(this.cursor_<=this.end_),A):(A|=(127&(n=u[this.cursor_+3]))<<21,128>n?(this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),A):(A|=(15&(n=u[this.cursor_+4]))<<28,128>n?(this.cursor_+=5,jspb.asserts.assert(this.cursor_<=this.end_),A>>>0):(this.cursor_+=5,128<=u[this.cursor_++]&&128<=u[this.cursor_++]&&128<=u[this.cursor_++]&&128<=u[this.cursor_++]&&128<=u[this.cursor_++]&&jspb.asserts.assert(!1),jspb.asserts.assert(this.cursor_<=this.end_),A)))))},jspb.BinaryDecoder.prototype.readSignedVarint32=function(){return~~this.readUnsignedVarint32()},jspb.BinaryDecoder.prototype.readUnsignedVarint32String=function(){return this.readUnsignedVarint32().toString()},jspb.BinaryDecoder.prototype.readSignedVarint32String=function(){return this.readSignedVarint32().toString()},jspb.BinaryDecoder.prototype.readZigzagVarint32=function(){var u=this.readUnsignedVarint32();return u>>>1^-(1&u)},jspb.BinaryDecoder.prototype.readUnsignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinUint64)},jspb.BinaryDecoder.prototype.readUnsignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinUnsignedDecimalString)},jspb.BinaryDecoder.prototype.readSignedVarint64=function(){return this.readSplitVarint64(jspb.utils.joinInt64)},jspb.BinaryDecoder.prototype.readSignedVarint64String=function(){return this.readSplitVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readZigzagVarint64=function(){return this.readSplitVarint64(jspb.utils.joinZigzag64)},jspb.BinaryDecoder.prototype.readZigzagVarintHash64=function(){return this.readSplitZigzagVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readZigzagVarint64String=function(){return this.readSplitZigzagVarint64(jspb.utils.joinSignedDecimalString)},jspb.BinaryDecoder.prototype.readUint8=function(){var u=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),u},jspb.BinaryDecoder.prototype.readUint16=function(){var u=this.bytes_[this.cursor_+0],n=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),u<<0|n<<8},jspb.BinaryDecoder.prototype.readUint32=function(){var u=this.bytes_[this.cursor_+0],n=this.bytes_[this.cursor_+1],A=this.bytes_[this.cursor_+2],C=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),(u<<0|n<<8|A<<16|C<<24)>>>0},jspb.BinaryDecoder.prototype.readUint64=function(){var u=this.readUint32(),n=this.readUint32();return jspb.utils.joinUint64(u,n)},jspb.BinaryDecoder.prototype.readUint64String=function(){var u=this.readUint32(),n=this.readUint32();return jspb.utils.joinUnsignedDecimalString(u,n)},jspb.BinaryDecoder.prototype.readInt8=function(){var u=this.bytes_[this.cursor_+0];return this.cursor_+=1,jspb.asserts.assert(this.cursor_<=this.end_),u<<24>>24},jspb.BinaryDecoder.prototype.readInt16=function(){var u=this.bytes_[this.cursor_+0],n=this.bytes_[this.cursor_+1];return this.cursor_+=2,jspb.asserts.assert(this.cursor_<=this.end_),(u<<0|n<<8)<<16>>16},jspb.BinaryDecoder.prototype.readInt32=function(){var u=this.bytes_[this.cursor_+0],n=this.bytes_[this.cursor_+1],A=this.bytes_[this.cursor_+2],C=this.bytes_[this.cursor_+3];return this.cursor_+=4,jspb.asserts.assert(this.cursor_<=this.end_),u<<0|n<<8|A<<16|C<<24},jspb.BinaryDecoder.prototype.readInt64=function(){var u=this.readUint32(),n=this.readUint32();return jspb.utils.joinInt64(u,n)},jspb.BinaryDecoder.prototype.readInt64String=function(){var u=this.readUint32(),n=this.readUint32();return jspb.utils.joinSignedDecimalString(u,n)},jspb.BinaryDecoder.prototype.readFloat=function(){var u=this.readUint32();return jspb.utils.joinFloat32(u,0)},jspb.BinaryDecoder.prototype.readDouble=function(){var u=this.readUint32(),n=this.readUint32();return jspb.utils.joinFloat64(u,n)},jspb.BinaryDecoder.prototype.readBool=function(){return!!this.bytes_[this.cursor_++]},jspb.BinaryDecoder.prototype.readEnum=function(){return this.readSignedVarint32()},jspb.BinaryDecoder.prototype.readString=function(u){var n=this.bytes_,A=this.cursor_;u=A+u;for(var C=[],d="";A<u;){var g=n[A++];if(128>g)C.push(g);else{if(192>g)continue;if(224>g){var i=n[A++];C.push((31&g)<<6|63&i)}else if(240>g){i=n[A++];var _=n[A++];C.push((15&g)<<12|(63&i)<<6|63&_)}else 248>g&&(g=(7&g)<<18|(63&(i=n[A++]))<<12|(63&(_=n[A++]))<<6|63&n[A++],g-=65536,C.push(55296+(g>>10&1023),56320+(1023&g)))}8192<=C.length&&(d+=String.fromCharCode.apply(null,C),C.length=0)}return d+=goog.crypt.byteArrayToString(C),this.cursor_=A,d},jspb.BinaryDecoder.prototype.readStringWithLength=function(){var u=this.readUnsignedVarint32();return this.readString(u)},jspb.BinaryDecoder.prototype.readBytes=function(u){if(0>u||this.cursor_+u>this.bytes_.length)return this.error_=!0,jspb.asserts.fail("Invalid byte length!"),new Uint8Array(0);var n=this.bytes_.subarray(this.cursor_,this.cursor_+u);return this.cursor_+=u,jspb.asserts.assert(this.cursor_<=this.end_),n},jspb.BinaryDecoder.prototype.readVarintHash64=function(){return this.readSplitVarint64(jspb.utils.joinHash64)},jspb.BinaryDecoder.prototype.readFixedHash64=function(){var u=this.bytes_,n=this.cursor_,A=u[n+0],C=u[n+1],d=u[n+2],g=u[n+3],i=u[n+4],_=u[n+5],j=u[n+6];return u=u[n+7],this.cursor_+=8,String.fromCharCode(A,C,d,g,i,_,j,u)},jspb.BinaryReader=function(u,n,A){this.decoder_=jspb.BinaryDecoder.alloc(u,n,A),this.fieldCursor_=this.decoder_.getCursor(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null},jspb.BinaryReader.instanceCache_=[],jspb.BinaryReader.alloc=function(u,n,A){if(jspb.BinaryReader.instanceCache_.length){var C=jspb.BinaryReader.instanceCache_.pop();return u&&C.decoder_.setBlock(u,n,A),C}return new jspb.BinaryReader(u,n,A)},jspb.BinaryReader.prototype.alloc=jspb.BinaryReader.alloc,jspb.BinaryReader.prototype.free=function(){this.decoder_.clear(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID,this.error_=!1,this.readCallbacks_=null,100>jspb.BinaryReader.instanceCache_.length&&jspb.BinaryReader.instanceCache_.push(this)},jspb.BinaryReader.prototype.getFieldCursor=function(){return this.fieldCursor_},jspb.BinaryReader.prototype.getCursor=function(){return this.decoder_.getCursor()},jspb.BinaryReader.prototype.getBuffer=function(){return this.decoder_.getBuffer()},jspb.BinaryReader.prototype.getFieldNumber=function(){return this.nextField_},goog.exportProperty(jspb.BinaryReader.prototype,"getFieldNumber",jspb.BinaryReader.prototype.getFieldNumber),jspb.BinaryReader.prototype.getWireType=function(){return this.nextWireType_},jspb.BinaryReader.prototype.isDelimited=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED},goog.exportProperty(jspb.BinaryReader.prototype,"isDelimited",jspb.BinaryReader.prototype.isDelimited),jspb.BinaryReader.prototype.isEndGroup=function(){return this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP},goog.exportProperty(jspb.BinaryReader.prototype,"isEndGroup",jspb.BinaryReader.prototype.isEndGroup),jspb.BinaryReader.prototype.getError=function(){return this.error_||this.decoder_.getError()},jspb.BinaryReader.prototype.setBlock=function(u,n,A){this.decoder_.setBlock(u,n,A),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.reset=function(){this.decoder_.reset(),this.nextField_=jspb.BinaryConstants.INVALID_FIELD_NUMBER,this.nextWireType_=jspb.BinaryConstants.WireType.INVALID},jspb.BinaryReader.prototype.advance=function(u){this.decoder_.advance(u)},jspb.BinaryReader.prototype.nextField=function(){if(this.decoder_.atEnd())return!1;if(this.getError())return jspb.asserts.fail("Decoder hit an error"),!1;this.fieldCursor_=this.decoder_.getCursor();var u=this.decoder_.readUnsignedVarint32(),n=u>>>3;return(u&=7)!=jspb.BinaryConstants.WireType.VARINT&&u!=jspb.BinaryConstants.WireType.FIXED32&&u!=jspb.BinaryConstants.WireType.FIXED64&&u!=jspb.BinaryConstants.WireType.DELIMITED&&u!=jspb.BinaryConstants.WireType.START_GROUP&&u!=jspb.BinaryConstants.WireType.END_GROUP?(jspb.asserts.fail("Invalid wire type: %s (at position %s)",u,this.fieldCursor_),this.error_=!0,!1):(this.nextField_=n,this.nextWireType_=u,!0)},goog.exportProperty(jspb.BinaryReader.prototype,"nextField",jspb.BinaryReader.prototype.nextField),jspb.BinaryReader.prototype.unskipHeader=function(){this.decoder_.unskipVarint(this.nextField_<<3|this.nextWireType_)},jspb.BinaryReader.prototype.skipMatchingFields=function(){var u=this.nextField_;for(this.unskipHeader();this.nextField()&&this.getFieldNumber()==u;)this.skipField();this.decoder_.atEnd()||this.unskipHeader()},jspb.BinaryReader.prototype.skipVarintField=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.VARINT?(jspb.asserts.fail("Invalid wire type for skipVarintField"),this.skipField()):this.decoder_.skipVarint()},jspb.BinaryReader.prototype.skipDelimitedField=function(){if(this.nextWireType_!=jspb.BinaryConstants.WireType.DELIMITED)jspb.asserts.fail("Invalid wire type for skipDelimitedField"),this.skipField();else{var u=this.decoder_.readUnsignedVarint32();this.decoder_.advance(u)}},jspb.BinaryReader.prototype.skipFixed32Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED32?(jspb.asserts.fail("Invalid wire type for skipFixed32Field"),this.skipField()):this.decoder_.advance(4)},jspb.BinaryReader.prototype.skipFixed64Field=function(){this.nextWireType_!=jspb.BinaryConstants.WireType.FIXED64?(jspb.asserts.fail("Invalid wire type for skipFixed64Field"),this.skipField()):this.decoder_.advance(8)},jspb.BinaryReader.prototype.skipGroup=function(){for(var u=this.nextField_;;){if(!this.nextField()){jspb.asserts.fail("Unmatched start-group tag: stream EOF"),this.error_=!0;break}if(this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP){this.nextField_!=u&&(jspb.asserts.fail("Unmatched end-group tag"),this.error_=!0);break}this.skipField()}},jspb.BinaryReader.prototype.skipField=function(){switch(this.nextWireType_){case jspb.BinaryConstants.WireType.VARINT:this.skipVarintField();break;case jspb.BinaryConstants.WireType.FIXED64:this.skipFixed64Field();break;case jspb.BinaryConstants.WireType.DELIMITED:this.skipDelimitedField();break;case jspb.BinaryConstants.WireType.FIXED32:this.skipFixed32Field();break;case jspb.BinaryConstants.WireType.START_GROUP:this.skipGroup();break;default:jspb.asserts.fail("Invalid wire encoding for field.")}},jspb.BinaryReader.prototype.registerReadCallback=function(u,n){this.readCallbacks_===null&&(this.readCallbacks_={}),jspb.asserts.assert(!this.readCallbacks_[u]),this.readCallbacks_[u]=n},jspb.BinaryReader.prototype.runReadCallback=function(u){return jspb.asserts.assert(this.readCallbacks_!==null),u=this.readCallbacks_[u],jspb.asserts.assert(u),u(this)},jspb.BinaryReader.prototype.readAny=function(u){this.nextWireType_=jspb.BinaryConstants.FieldTypeToWireType(u);var n=jspb.BinaryConstants.FieldType;switch(u){case n.DOUBLE:return this.readDouble();case n.FLOAT:return this.readFloat();case n.INT64:return this.readInt64();case n.UINT64:return this.readUint64();case n.INT32:return this.readInt32();case n.FIXED64:return this.readFixed64();case n.FIXED32:return this.readFixed32();case n.BOOL:return this.readBool();case n.STRING:return this.readString();case n.GROUP:jspb.asserts.fail("Group field type not supported in readAny()");case n.MESSAGE:jspb.asserts.fail("Message field type not supported in readAny()");case n.BYTES:return this.readBytes();case n.UINT32:return this.readUint32();case n.ENUM:return this.readEnum();case n.SFIXED32:return this.readSfixed32();case n.SFIXED64:return this.readSfixed64();case n.SINT32:return this.readSint32();case n.SINT64:return this.readSint64();case n.FHASH64:return this.readFixedHash64();case n.VHASH64:return this.readVarintHash64();default:jspb.asserts.fail("Invalid field type in readAny()")}return 0},jspb.BinaryReader.prototype.readMessage=function(u,n){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var A=this.decoder_.getEnd(),C=this.decoder_.readUnsignedVarint32();C=this.decoder_.getCursor()+C,this.decoder_.setEnd(C),n(u,this),this.decoder_.setCursor(C),this.decoder_.setEnd(A)},goog.exportProperty(jspb.BinaryReader.prototype,"readMessage",jspb.BinaryReader.prototype.readMessage),jspb.BinaryReader.prototype.readGroup=function(u,n,A){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.START_GROUP),jspb.asserts.assert(this.nextField_==u),A(n,this),this.error_||this.nextWireType_==jspb.BinaryConstants.WireType.END_GROUP||(jspb.asserts.fail("Group submessage did not end with an END_GROUP tag"),this.error_=!0)},goog.exportProperty(jspb.BinaryReader.prototype,"readGroup",jspb.BinaryReader.prototype.readGroup),jspb.BinaryReader.prototype.getFieldDecoder=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var u=this.decoder_.readUnsignedVarint32(),n=this.decoder_.getCursor(),A=n+u;return u=jspb.BinaryDecoder.alloc(this.decoder_.getBuffer(),n,u),this.decoder_.setCursor(A),u},jspb.BinaryReader.prototype.readInt32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt32",jspb.BinaryReader.prototype.readInt32),jspb.BinaryReader.prototype.readInt32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint32String()},jspb.BinaryReader.prototype.readInt64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readInt64",jspb.BinaryReader.prototype.readInt64),jspb.BinaryReader.prototype.readInt64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64String()},jspb.BinaryReader.prototype.readUint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint32",jspb.BinaryReader.prototype.readUint32),jspb.BinaryReader.prototype.readUint32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint32String()},jspb.BinaryReader.prototype.readUint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readUint64",jspb.BinaryReader.prototype.readUint64),jspb.BinaryReader.prototype.readUint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readUnsignedVarint64String()},jspb.BinaryReader.prototype.readSint32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint32",jspb.BinaryReader.prototype.readSint32),jspb.BinaryReader.prototype.readSint64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSint64",jspb.BinaryReader.prototype.readSint64),jspb.BinaryReader.prototype.readSint64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarint64String()},jspb.BinaryReader.prototype.readFixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readUint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed32",jspb.BinaryReader.prototype.readFixed32),jspb.BinaryReader.prototype.readFixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readFixed64",jspb.BinaryReader.prototype.readFixed64),jspb.BinaryReader.prototype.readFixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readUint64String()},jspb.BinaryReader.prototype.readSfixed32=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed32",jspb.BinaryReader.prototype.readSfixed32),jspb.BinaryReader.prototype.readSfixed32String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readInt32().toString()},jspb.BinaryReader.prototype.readSfixed64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64()},goog.exportProperty(jspb.BinaryReader.prototype,"readSfixed64",jspb.BinaryReader.prototype.readSfixed64),jspb.BinaryReader.prototype.readSfixed64String=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readInt64String()},jspb.BinaryReader.prototype.readFloat=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED32),this.decoder_.readFloat()},goog.exportProperty(jspb.BinaryReader.prototype,"readFloat",jspb.BinaryReader.prototype.readFloat),jspb.BinaryReader.prototype.readDouble=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readDouble()},goog.exportProperty(jspb.BinaryReader.prototype,"readDouble",jspb.BinaryReader.prototype.readDouble),jspb.BinaryReader.prototype.readBool=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),!!this.decoder_.readUnsignedVarint32()},goog.exportProperty(jspb.BinaryReader.prototype,"readBool",jspb.BinaryReader.prototype.readBool),jspb.BinaryReader.prototype.readEnum=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSignedVarint64()},goog.exportProperty(jspb.BinaryReader.prototype,"readEnum",jspb.BinaryReader.prototype.readEnum),jspb.BinaryReader.prototype.readString=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var u=this.decoder_.readUnsignedVarint32();return this.decoder_.readString(u)},goog.exportProperty(jspb.BinaryReader.prototype,"readString",jspb.BinaryReader.prototype.readString),jspb.BinaryReader.prototype.readBytes=function(){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var u=this.decoder_.readUnsignedVarint32();return this.decoder_.readBytes(u)},goog.exportProperty(jspb.BinaryReader.prototype,"readBytes",jspb.BinaryReader.prototype.readBytes),jspb.BinaryReader.prototype.readVarintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readVarintHash64()},jspb.BinaryReader.prototype.readSintHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readZigzagVarintHash64()},jspb.BinaryReader.prototype.readSplitVarint64=function(u){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(u)},jspb.BinaryReader.prototype.readSplitZigzagVarint64=function(u){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.VARINT),this.decoder_.readSplitVarint64(function(n,A){return jspb.utils.fromZigzag64(n,A,u)})},jspb.BinaryReader.prototype.readFixedHash64=function(){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readFixedHash64()},jspb.BinaryReader.prototype.readSplitFixed64=function(u){return jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.FIXED64),this.decoder_.readSplitFixed64(u)},jspb.BinaryReader.prototype.readPackedField_=function(u){jspb.asserts.assert(this.nextWireType_==jspb.BinaryConstants.WireType.DELIMITED);var n=this.decoder_.readUnsignedVarint32();n=this.decoder_.getCursor()+n;for(var A=[];this.decoder_.getCursor()<n;)A.push(u.call(this.decoder_));return A},jspb.BinaryReader.prototype.readPackedInt32=function(){return this.readPackedField_(this.decoder_.readSignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt32",jspb.BinaryReader.prototype.readPackedInt32),jspb.BinaryReader.prototype.readPackedInt32String=function(){return this.readPackedField_(this.decoder_.readSignedVarint32String)},jspb.BinaryReader.prototype.readPackedInt64=function(){return this.readPackedField_(this.decoder_.readSignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedInt64",jspb.BinaryReader.prototype.readPackedInt64),jspb.BinaryReader.prototype.readPackedInt64String=function(){return this.readPackedField_(this.decoder_.readSignedVarint64String)},jspb.BinaryReader.prototype.readPackedUint32=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint32",jspb.BinaryReader.prototype.readPackedUint32),jspb.BinaryReader.prototype.readPackedUint32String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint32String)},jspb.BinaryReader.prototype.readPackedUint64=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedUint64",jspb.BinaryReader.prototype.readPackedUint64),jspb.BinaryReader.prototype.readPackedUint64String=function(){return this.readPackedField_(this.decoder_.readUnsignedVarint64String)},jspb.BinaryReader.prototype.readPackedSint32=function(){return this.readPackedField_(this.decoder_.readZigzagVarint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint32",jspb.BinaryReader.prototype.readPackedSint32),jspb.BinaryReader.prototype.readPackedSint64=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSint64",jspb.BinaryReader.prototype.readPackedSint64),jspb.BinaryReader.prototype.readPackedSint64String=function(){return this.readPackedField_(this.decoder_.readZigzagVarint64String)},jspb.BinaryReader.prototype.readPackedFixed32=function(){return this.readPackedField_(this.decoder_.readUint32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed32",jspb.BinaryReader.prototype.readPackedFixed32),jspb.BinaryReader.prototype.readPackedFixed64=function(){return this.readPackedField_(this.decoder_.readUint64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFixed64",jspb.BinaryReader.prototype.readPackedFixed64),jspb.BinaryReader.prototype.readPackedFixed64String=function(){return this.readPackedField_(this.decoder_.readUint64String)},jspb.BinaryReader.prototype.readPackedSfixed32=function(){return this.readPackedField_(this.decoder_.readInt32)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed32",jspb.BinaryReader.prototype.readPackedSfixed32),jspb.BinaryReader.prototype.readPackedSfixed64=function(){return this.readPackedField_(this.decoder_.readInt64)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedSfixed64",jspb.BinaryReader.prototype.readPackedSfixed64),jspb.BinaryReader.prototype.readPackedSfixed64String=function(){return this.readPackedField_(this.decoder_.readInt64String)},jspb.BinaryReader.prototype.readPackedFloat=function(){return this.readPackedField_(this.decoder_.readFloat)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedFloat",jspb.BinaryReader.prototype.readPackedFloat),jspb.BinaryReader.prototype.readPackedDouble=function(){return this.readPackedField_(this.decoder_.readDouble)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedDouble",jspb.BinaryReader.prototype.readPackedDouble),jspb.BinaryReader.prototype.readPackedBool=function(){return this.readPackedField_(this.decoder_.readBool)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedBool",jspb.BinaryReader.prototype.readPackedBool),jspb.BinaryReader.prototype.readPackedEnum=function(){return this.readPackedField_(this.decoder_.readEnum)},goog.exportProperty(jspb.BinaryReader.prototype,"readPackedEnum",jspb.BinaryReader.prototype.readPackedEnum),jspb.BinaryReader.prototype.readPackedVarintHash64=function(){return this.readPackedField_(this.decoder_.readVarintHash64)},jspb.BinaryReader.prototype.readPackedFixedHash64=function(){return this.readPackedField_(this.decoder_.readFixedHash64)},jspb.BinaryEncoder=function(){this.buffer_=[]},jspb.BinaryEncoder.prototype.length=function(){return this.buffer_.length},jspb.BinaryEncoder.prototype.end=function(){var u=this.buffer_;return this.buffer_=[],u},jspb.BinaryEncoder.prototype.writeSplitVarint64=function(u,n){for(jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(n==Math.floor(n)),jspb.asserts.assert(0<=u&&u<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_32);0<n||127<u;)this.buffer_.push(127&u|128),u=(u>>>7|n<<25)>>>0,n>>>=7;this.buffer_.push(u)},jspb.BinaryEncoder.prototype.writeSplitFixed64=function(u,n){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(n==Math.floor(n)),jspb.asserts.assert(0<=u&&u<jspb.BinaryConstants.TWO_TO_32),jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_32),this.writeUint32(u),this.writeUint32(n)},jspb.BinaryEncoder.prototype.writeUnsignedVarint32=function(u){for(jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(0<=u&&u<jspb.BinaryConstants.TWO_TO_32);127<u;)this.buffer_.push(127&u|128),u>>>=7;this.buffer_.push(u)},jspb.BinaryEncoder.prototype.writeSignedVarint32=function(u){if(jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_31&&u<jspb.BinaryConstants.TWO_TO_31),0<=u)this.writeUnsignedVarint32(u);else{for(var n=0;9>n;n++)this.buffer_.push(127&u|128),u>>=7;this.buffer_.push(1)}},jspb.BinaryEncoder.prototype.writeUnsignedVarint64=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(0<=u&&u<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitInt64(u),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeSignedVarint64=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_63&&u<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(u),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint32=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_31&&u<jspb.BinaryConstants.TWO_TO_31),this.writeUnsignedVarint32((u<<1^u>>31)>>>0)},jspb.BinaryEncoder.prototype.writeZigzagVarint64=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_63&&u<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitZigzag64(u),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeZigzagVarint64String=function(u){this.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(u))},jspb.BinaryEncoder.prototype.writeZigzagVarintHash64=function(u){var n=this;jspb.utils.splitHash64(u),jspb.utils.toZigzag64(jspb.utils.split64Low,jspb.utils.split64High,function(A,C){n.writeSplitVarint64(A>>>0,C>>>0)})},jspb.BinaryEncoder.prototype.writeUint8=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(0<=u&&256>u),this.buffer_.push(u>>>0&255)},jspb.BinaryEncoder.prototype.writeUint16=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(0<=u&&65536>u),this.buffer_.push(u>>>0&255),this.buffer_.push(u>>>8&255)},jspb.BinaryEncoder.prototype.writeUint32=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(0<=u&&u<jspb.BinaryConstants.TWO_TO_32),this.buffer_.push(u>>>0&255),this.buffer_.push(u>>>8&255),this.buffer_.push(u>>>16&255),this.buffer_.push(u>>>24&255)},jspb.BinaryEncoder.prototype.writeUint64=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(0<=u&&u<jspb.BinaryConstants.TWO_TO_64),jspb.utils.splitUint64(u),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt8=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(-128<=u&&128>u),this.buffer_.push(u>>>0&255)},jspb.BinaryEncoder.prototype.writeInt16=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(-32768<=u&&32768>u),this.buffer_.push(u>>>0&255),this.buffer_.push(u>>>8&255)},jspb.BinaryEncoder.prototype.writeInt32=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_31&&u<jspb.BinaryConstants.TWO_TO_31),this.buffer_.push(u>>>0&255),this.buffer_.push(u>>>8&255),this.buffer_.push(u>>>16&255),this.buffer_.push(u>>>24&255)},jspb.BinaryEncoder.prototype.writeInt64=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_63&&u<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitInt64(u),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeInt64String=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(+u>=-jspb.BinaryConstants.TWO_TO_63&&+u<jspb.BinaryConstants.TWO_TO_63),jspb.utils.splitHash64(jspb.utils.decimalStringToHash64(u)),this.writeSplitFixed64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFloat=function(u){jspb.asserts.assert(1/0===u||-1/0===u||isNaN(u)||u>=-jspb.BinaryConstants.FLOAT32_MAX&&u<=jspb.BinaryConstants.FLOAT32_MAX),jspb.utils.splitFloat32(u),this.writeUint32(jspb.utils.split64Low)},jspb.BinaryEncoder.prototype.writeDouble=function(u){jspb.asserts.assert(1/0===u||-1/0===u||isNaN(u)||u>=-jspb.BinaryConstants.FLOAT64_MAX&&u<=jspb.BinaryConstants.FLOAT64_MAX),jspb.utils.splitFloat64(u),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeBool=function(u){jspb.asserts.assert(typeof u=="boolean"||typeof u=="number"),this.buffer_.push(u?1:0)},jspb.BinaryEncoder.prototype.writeEnum=function(u){jspb.asserts.assert(u==Math.floor(u)),jspb.asserts.assert(u>=-jspb.BinaryConstants.TWO_TO_31&&u<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32(u)},jspb.BinaryEncoder.prototype.writeBytes=function(u){this.buffer_.push.apply(this.buffer_,u)},jspb.BinaryEncoder.prototype.writeVarintHash64=function(u){jspb.utils.splitHash64(u),this.writeSplitVarint64(jspb.utils.split64Low,jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeFixedHash64=function(u){jspb.utils.splitHash64(u),this.writeUint32(jspb.utils.split64Low),this.writeUint32(jspb.utils.split64High)},jspb.BinaryEncoder.prototype.writeString=function(u){var n=this.buffer_.length;jspb.asserts.assertString(u);for(var A=0;A<u.length;A++){var C=u.charCodeAt(A);if(128>C)this.buffer_.push(C);else if(2048>C)this.buffer_.push(C>>6|192),this.buffer_.push(63&C|128);else if(65536>C)if(55296<=C&&56319>=C&&A+1<u.length){var d=u.charCodeAt(A+1);56320<=d&&57343>=d&&(C=1024*(C-55296)+d-56320+65536,this.buffer_.push(C>>18|240),this.buffer_.push(C>>12&63|128),this.buffer_.push(C>>6&63|128),this.buffer_.push(63&C|128),A++)}else this.buffer_.push(C>>12|224),this.buffer_.push(C>>6&63|128),this.buffer_.push(63&C|128)}return this.buffer_.length-n},jspb.arith={},jspb.arith.UInt64=function(u,n){this.lo=u,this.hi=n},jspb.arith.UInt64.prototype.cmp=function(u){return this.hi<u.hi||this.hi==u.hi&&this.lo<u.lo?-1:this.hi==u.hi&&this.lo==u.lo?0:1},jspb.arith.UInt64.prototype.rightShift=function(){return new jspb.arith.UInt64((this.lo>>>1|(1&this.hi)<<31)>>>0,this.hi>>>1>>>0)},jspb.arith.UInt64.prototype.leftShift=function(){return new jspb.arith.UInt64(this.lo<<1>>>0,(this.hi<<1|this.lo>>>31)>>>0)},jspb.arith.UInt64.prototype.msb=function(){return!!(2147483648&this.hi)},jspb.arith.UInt64.prototype.lsb=function(){return!!(1&this.lo)},jspb.arith.UInt64.prototype.zero=function(){return this.lo==0&&this.hi==0},jspb.arith.UInt64.prototype.add=function(u){return new jspb.arith.UInt64((this.lo+u.lo&4294967295)>>>0>>>0,((this.hi+u.hi&4294967295)>>>0)+(4294967296<=this.lo+u.lo?1:0)>>>0)},jspb.arith.UInt64.prototype.sub=function(u){return new jspb.arith.UInt64((this.lo-u.lo&4294967295)>>>0>>>0,((this.hi-u.hi&4294967295)>>>0)-(0>this.lo-u.lo?1:0)>>>0)},jspb.arith.UInt64.mul32x32=function(u,n){var A=65535&u,C=65535&n,d=n>>>16;for(n=A*C+65536*(A*d&65535)+65536*((u>>>=16)*C&65535),A=u*d+(A*d>>>16)+(u*C>>>16);4294967296<=n;)n-=4294967296,A+=1;return new jspb.arith.UInt64(n>>>0,A>>>0)},jspb.arith.UInt64.prototype.mul=function(u){var n=jspb.arith.UInt64.mul32x32(this.lo,u);return(u=jspb.arith.UInt64.mul32x32(this.hi,u)).hi=u.lo,u.lo=0,n.add(u)},jspb.arith.UInt64.prototype.div=function(u){if(u==0)return[];var n=new jspb.arith.UInt64(0,0),A=new jspb.arith.UInt64(this.lo,this.hi);u=new jspb.arith.UInt64(u,0);for(var C=new jspb.arith.UInt64(1,0);!u.msb();)u=u.leftShift(),C=C.leftShift();for(;!C.zero();)0>=u.cmp(A)&&(n=n.add(C),A=A.sub(u)),u=u.rightShift(),C=C.rightShift();return[n,A]},jspb.arith.UInt64.prototype.toString=function(){for(var u="",n=this;!n.zero();){var A=(n=n.div(10))[0];u=n[1].lo+u,n=A}return u==""&&(u="0"),u},jspb.arith.UInt64.fromString=function(u){for(var n=new jspb.arith.UInt64(0,0),A=new jspb.arith.UInt64(0,0),C=0;C<u.length;C++){if("0">u[C]||"9"<u[C])return null;var d=parseInt(u[C],10);A.lo=d,n=n.mul(10).add(A)}return n},jspb.arith.UInt64.prototype.clone=function(){return new jspb.arith.UInt64(this.lo,this.hi)},jspb.arith.Int64=function(u,n){this.lo=u,this.hi=n},jspb.arith.Int64.prototype.add=function(u){return new jspb.arith.Int64((this.lo+u.lo&4294967295)>>>0>>>0,((this.hi+u.hi&4294967295)>>>0)+(4294967296<=this.lo+u.lo?1:0)>>>0)},jspb.arith.Int64.prototype.sub=function(u){return new jspb.arith.Int64((this.lo-u.lo&4294967295)>>>0>>>0,((this.hi-u.hi&4294967295)>>>0)-(0>this.lo-u.lo?1:0)>>>0)},jspb.arith.Int64.prototype.clone=function(){return new jspb.arith.Int64(this.lo,this.hi)},jspb.arith.Int64.prototype.toString=function(){var u=(2147483648&this.hi)!=0,n=new jspb.arith.UInt64(this.lo,this.hi);return u&&(n=new jspb.arith.UInt64(0,0).sub(n)),(u?"-":"")+n.toString()},jspb.arith.Int64.fromString=function(u){var n=0<u.length&&u[0]=="-";return n&&(u=u.substring(1)),(u=jspb.arith.UInt64.fromString(u))===null?null:(n&&(u=new jspb.arith.UInt64(0,0).sub(u)),new jspb.arith.Int64(u.lo,u.hi))},jspb.BinaryWriter=function(){this.blocks_=[],this.totalLength_=0,this.encoder_=new jspb.BinaryEncoder,this.bookmarks_=[]},jspb.BinaryWriter.prototype.appendUint8Array_=function(u){var n=this.encoder_.end();this.blocks_.push(n),this.blocks_.push(u),this.totalLength_+=n.length+u.length},jspb.BinaryWriter.prototype.beginDelimited_=function(u){return this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),u=this.encoder_.end(),this.blocks_.push(u),this.totalLength_+=u.length,u.push(this.totalLength_),u},jspb.BinaryWriter.prototype.endDelimited_=function(u){var n=u.pop();for(n=this.totalLength_+this.encoder_.length()-n,jspb.asserts.assert(0<=n);127<n;)u.push(127&n|128),n>>>=7,this.totalLength_++;u.push(n),this.totalLength_++},jspb.BinaryWriter.prototype.writeSerializedMessage=function(u,n,A){this.appendUint8Array_(u.subarray(n,A))},jspb.BinaryWriter.prototype.maybeWriteSerializedMessage=function(u,n,A){u!=null&&n!=null&&A!=null&&this.writeSerializedMessage(u,n,A)},jspb.BinaryWriter.prototype.reset=function(){this.blocks_=[],this.encoder_.end(),this.totalLength_=0,this.bookmarks_=[]},jspb.BinaryWriter.prototype.getResultBuffer=function(){jspb.asserts.assert(this.bookmarks_.length==0);for(var u=new Uint8Array(this.totalLength_+this.encoder_.length()),n=this.blocks_,A=n.length,C=0,d=0;d<A;d++){var g=n[d];u.set(g,C),C+=g.length}return n=this.encoder_.end(),u.set(n,C),C+=n.length,jspb.asserts.assert(C==u.length),this.blocks_=[u],u},goog.exportProperty(jspb.BinaryWriter.prototype,"getResultBuffer",jspb.BinaryWriter.prototype.getResultBuffer),jspb.BinaryWriter.prototype.getResultBase64String=function(u){return goog.crypt.base64.encodeByteArray(this.getResultBuffer(),u)},jspb.BinaryWriter.prototype.beginSubMessage=function(u){this.bookmarks_.push(this.beginDelimited_(u))},jspb.BinaryWriter.prototype.endSubMessage=function(){jspb.asserts.assert(0<=this.bookmarks_.length),this.endDelimited_(this.bookmarks_.pop())},jspb.BinaryWriter.prototype.writeFieldHeader_=function(u,n){jspb.asserts.assert(1<=u&&u==Math.floor(u)),this.encoder_.writeUnsignedVarint32(8*u+n)},jspb.BinaryWriter.prototype.writeAny=function(u,n,A){var C=jspb.BinaryConstants.FieldType;switch(u){case C.DOUBLE:this.writeDouble(n,A);break;case C.FLOAT:this.writeFloat(n,A);break;case C.INT64:this.writeInt64(n,A);break;case C.UINT64:this.writeUint64(n,A);break;case C.INT32:this.writeInt32(n,A);break;case C.FIXED64:this.writeFixed64(n,A);break;case C.FIXED32:this.writeFixed32(n,A);break;case C.BOOL:this.writeBool(n,A);break;case C.STRING:this.writeString(n,A);break;case C.GROUP:jspb.asserts.fail("Group field type not supported in writeAny()");break;case C.MESSAGE:jspb.asserts.fail("Message field type not supported in writeAny()");break;case C.BYTES:this.writeBytes(n,A);break;case C.UINT32:this.writeUint32(n,A);break;case C.ENUM:this.writeEnum(n,A);break;case C.SFIXED32:this.writeSfixed32(n,A);break;case C.SFIXED64:this.writeSfixed64(n,A);break;case C.SINT32:this.writeSint32(n,A);break;case C.SINT64:this.writeSint64(n,A);break;case C.FHASH64:this.writeFixedHash64(n,A);break;case C.VHASH64:this.writeVarintHash64(n,A);break;default:jspb.asserts.fail("Invalid field type in writeAny()")}},jspb.BinaryWriter.prototype.writeUnsignedVarint32_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint32(n))},jspb.BinaryWriter.prototype.writeSignedVarint32_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(n))},jspb.BinaryWriter.prototype.writeUnsignedVarint64_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeUnsignedVarint64(n))},jspb.BinaryWriter.prototype.writeSignedVarint64_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint64(n))},jspb.BinaryWriter.prototype.writeZigzagVarint32_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint32(n))},jspb.BinaryWriter.prototype.writeZigzagVarint64_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64(n))},jspb.BinaryWriter.prototype.writeZigzagVarint64String_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarint64String(n))},jspb.BinaryWriter.prototype.writeZigzagVarintHash64_=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeZigzagVarintHash64(n))},jspb.BinaryWriter.prototype.writeInt32=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_31&&n<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(u,n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt32",jspb.BinaryWriter.prototype.writeInt32),jspb.BinaryWriter.prototype.writeInt32String=function(u,n){n!=null&&(n=parseInt(n,10),jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_31&&n<jspb.BinaryConstants.TWO_TO_31),this.writeSignedVarint32_(u,n))},jspb.BinaryWriter.prototype.writeInt64=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_63&&n<jspb.BinaryConstants.TWO_TO_63),this.writeSignedVarint64_(u,n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeInt64",jspb.BinaryWriter.prototype.writeInt64),jspb.BinaryWriter.prototype.writeInt64String=function(u,n){n!=null&&(n=jspb.arith.Int64.fromString(n),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(n.lo,n.hi))},jspb.BinaryWriter.prototype.writeUint32=function(u,n){n!=null&&(jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(u,n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint32",jspb.BinaryWriter.prototype.writeUint32),jspb.BinaryWriter.prototype.writeUint32String=function(u,n){n!=null&&(n=parseInt(n,10),jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_32),this.writeUnsignedVarint32_(u,n))},jspb.BinaryWriter.prototype.writeUint64=function(u,n){n!=null&&(jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_64),this.writeUnsignedVarint64_(u,n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeUint64",jspb.BinaryWriter.prototype.writeUint64),jspb.BinaryWriter.prototype.writeUint64String=function(u,n){n!=null&&(n=jspb.arith.UInt64.fromString(n),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(n.lo,n.hi))},jspb.BinaryWriter.prototype.writeSint32=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_31&&n<jspb.BinaryConstants.TWO_TO_31),this.writeZigzagVarint32_(u,n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint32",jspb.BinaryWriter.prototype.writeSint32),jspb.BinaryWriter.prototype.writeSint64=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_63&&n<jspb.BinaryConstants.TWO_TO_63),this.writeZigzagVarint64_(u,n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSint64",jspb.BinaryWriter.prototype.writeSint64),jspb.BinaryWriter.prototype.writeSintHash64=function(u,n){n!=null&&this.writeZigzagVarintHash64_(u,n)},jspb.BinaryWriter.prototype.writeSint64String=function(u,n){n!=null&&this.writeZigzagVarint64String_(u,n)},jspb.BinaryWriter.prototype.writeFixed32=function(u,n){n!=null&&(jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_32),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeUint32(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed32",jspb.BinaryWriter.prototype.writeFixed32),jspb.BinaryWriter.prototype.writeFixed64=function(u,n){n!=null&&(jspb.asserts.assert(0<=n&&n<jspb.BinaryConstants.TWO_TO_64),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeUint64(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFixed64",jspb.BinaryWriter.prototype.writeFixed64),jspb.BinaryWriter.prototype.writeFixed64String=function(u,n){n!=null&&(n=jspb.arith.UInt64.fromString(n),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(n.lo,n.hi))},jspb.BinaryWriter.prototype.writeSfixed32=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_31&&n<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeInt32(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed32",jspb.BinaryWriter.prototype.writeSfixed32),jspb.BinaryWriter.prototype.writeSfixed64=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_63&&n<jspb.BinaryConstants.TWO_TO_63),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeInt64(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeSfixed64",jspb.BinaryWriter.prototype.writeSfixed64),jspb.BinaryWriter.prototype.writeSfixed64String=function(u,n){n!=null&&(n=jspb.arith.Int64.fromString(n),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(n.lo,n.hi))},jspb.BinaryWriter.prototype.writeFloat=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED32),this.encoder_.writeFloat(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeFloat",jspb.BinaryWriter.prototype.writeFloat),jspb.BinaryWriter.prototype.writeDouble=function(u,n){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeDouble(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeDouble",jspb.BinaryWriter.prototype.writeDouble),jspb.BinaryWriter.prototype.writeBool=function(u,n){n!=null&&(jspb.asserts.assert(typeof n=="boolean"||typeof n=="number"),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeBool(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBool",jspb.BinaryWriter.prototype.writeBool),jspb.BinaryWriter.prototype.writeEnum=function(u,n){n!=null&&(jspb.asserts.assert(n>=-jspb.BinaryConstants.TWO_TO_31&&n<jspb.BinaryConstants.TWO_TO_31),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeEnum",jspb.BinaryWriter.prototype.writeEnum),jspb.BinaryWriter.prototype.writeString=function(u,n){n!=null&&(u=this.beginDelimited_(u),this.encoder_.writeString(n),this.endDelimited_(u))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeString",jspb.BinaryWriter.prototype.writeString),jspb.BinaryWriter.prototype.writeBytes=function(u,n){n!=null&&(n=jspb.utils.byteSourceToUint8Array(n),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(n.length),this.appendUint8Array_(n))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeBytes",jspb.BinaryWriter.prototype.writeBytes),jspb.BinaryWriter.prototype.writeMessage=function(u,n,A){n!=null&&(u=this.beginDelimited_(u),A(n,this),this.endDelimited_(u))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeMessage",jspb.BinaryWriter.prototype.writeMessage),jspb.BinaryWriter.prototype.writeMessageSet=function(u,n,A){n!=null&&(this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.START_GROUP),this.writeFieldHeader_(2,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSignedVarint32(u),u=this.beginDelimited_(3),A(n,this),this.endDelimited_(u),this.writeFieldHeader_(1,jspb.BinaryConstants.WireType.END_GROUP))},jspb.BinaryWriter.prototype.writeGroup=function(u,n,A){n!=null&&(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.START_GROUP),A(n,this),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.END_GROUP))},goog.exportProperty(jspb.BinaryWriter.prototype,"writeGroup",jspb.BinaryWriter.prototype.writeGroup),jspb.BinaryWriter.prototype.writeFixedHash64=function(u,n){n!=null&&(jspb.asserts.assert(n.length==8),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeFixedHash64(n))},jspb.BinaryWriter.prototype.writeVarintHash64=function(u,n){n!=null&&(jspb.asserts.assert(n.length==8),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeVarintHash64(n))},jspb.BinaryWriter.prototype.writeSplitFixed64=function(u,n,A){this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.FIXED64),this.encoder_.writeSplitFixed64(n,A)},jspb.BinaryWriter.prototype.writeSplitVarint64=function(u,n,A){this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT),this.encoder_.writeSplitVarint64(n,A)},jspb.BinaryWriter.prototype.writeSplitZigzagVarint64=function(u,n,A){this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.VARINT);var C=this.encoder_;jspb.utils.toZigzag64(n,A,function(d,g){C.writeSplitVarint64(d>>>0,g>>>0)})},jspb.BinaryWriter.prototype.writeRepeatedInt32=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeSignedVarint32_(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt32",jspb.BinaryWriter.prototype.writeRepeatedInt32),jspb.BinaryWriter.prototype.writeRepeatedInt32String=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeInt32String(u,n[A])},jspb.BinaryWriter.prototype.writeRepeatedInt64=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeSignedVarint64_(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedInt64",jspb.BinaryWriter.prototype.writeRepeatedInt64),jspb.BinaryWriter.prototype.writeRepeatedSplitFixed64=function(u,n,A,C){if(n!=null)for(var d=0;d<n.length;d++)this.writeSplitFixed64(u,A(n[d]),C(n[d]))},jspb.BinaryWriter.prototype.writeRepeatedSplitVarint64=function(u,n,A,C){if(n!=null)for(var d=0;d<n.length;d++)this.writeSplitVarint64(u,A(n[d]),C(n[d]))},jspb.BinaryWriter.prototype.writeRepeatedSplitZigzagVarint64=function(u,n,A,C){if(n!=null)for(var d=0;d<n.length;d++)this.writeSplitZigzagVarint64(u,A(n[d]),C(n[d]))},jspb.BinaryWriter.prototype.writeRepeatedInt64String=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeInt64String(u,n[A])},jspb.BinaryWriter.prototype.writeRepeatedUint32=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeUnsignedVarint32_(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint32",jspb.BinaryWriter.prototype.writeRepeatedUint32),jspb.BinaryWriter.prototype.writeRepeatedUint32String=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeUint32String(u,n[A])},jspb.BinaryWriter.prototype.writeRepeatedUint64=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeUnsignedVarint64_(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedUint64",jspb.BinaryWriter.prototype.writeRepeatedUint64),jspb.BinaryWriter.prototype.writeRepeatedUint64String=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeUint64String(u,n[A])},jspb.BinaryWriter.prototype.writeRepeatedSint32=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeZigzagVarint32_(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint32",jspb.BinaryWriter.prototype.writeRepeatedSint32),jspb.BinaryWriter.prototype.writeRepeatedSint64=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeZigzagVarint64_(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSint64",jspb.BinaryWriter.prototype.writeRepeatedSint64),jspb.BinaryWriter.prototype.writeRepeatedSint64String=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeZigzagVarint64String_(u,n[A])},jspb.BinaryWriter.prototype.writeRepeatedSintHash64=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeZigzagVarintHash64_(u,n[A])},jspb.BinaryWriter.prototype.writeRepeatedFixed32=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeFixed32(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed32",jspb.BinaryWriter.prototype.writeRepeatedFixed32),jspb.BinaryWriter.prototype.writeRepeatedFixed64=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeFixed64(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64",jspb.BinaryWriter.prototype.writeRepeatedFixed64),jspb.BinaryWriter.prototype.writeRepeatedFixed64String=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeFixed64String(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFixed64String",jspb.BinaryWriter.prototype.writeRepeatedFixed64String),jspb.BinaryWriter.prototype.writeRepeatedSfixed32=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeSfixed32(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed32",jspb.BinaryWriter.prototype.writeRepeatedSfixed32),jspb.BinaryWriter.prototype.writeRepeatedSfixed64=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeSfixed64(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedSfixed64",jspb.BinaryWriter.prototype.writeRepeatedSfixed64),jspb.BinaryWriter.prototype.writeRepeatedSfixed64String=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeSfixed64String(u,n[A])},jspb.BinaryWriter.prototype.writeRepeatedFloat=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeFloat(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedFloat",jspb.BinaryWriter.prototype.writeRepeatedFloat),jspb.BinaryWriter.prototype.writeRepeatedDouble=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeDouble(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedDouble",jspb.BinaryWriter.prototype.writeRepeatedDouble),jspb.BinaryWriter.prototype.writeRepeatedBool=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeBool(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBool",jspb.BinaryWriter.prototype.writeRepeatedBool),jspb.BinaryWriter.prototype.writeRepeatedEnum=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeEnum(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedEnum",jspb.BinaryWriter.prototype.writeRepeatedEnum),jspb.BinaryWriter.prototype.writeRepeatedString=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeString(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedString",jspb.BinaryWriter.prototype.writeRepeatedString),jspb.BinaryWriter.prototype.writeRepeatedBytes=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeBytes(u,n[A])},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedBytes",jspb.BinaryWriter.prototype.writeRepeatedBytes),jspb.BinaryWriter.prototype.writeRepeatedMessage=function(u,n,A){if(n!=null)for(var C=0;C<n.length;C++){var d=this.beginDelimited_(u);A(n[C],this),this.endDelimited_(d)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedMessage",jspb.BinaryWriter.prototype.writeRepeatedMessage),jspb.BinaryWriter.prototype.writeRepeatedGroup=function(u,n,A){if(n!=null)for(var C=0;C<n.length;C++)this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.START_GROUP),A(n[C],this),this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.END_GROUP)},goog.exportProperty(jspb.BinaryWriter.prototype,"writeRepeatedGroup",jspb.BinaryWriter.prototype.writeRepeatedGroup),jspb.BinaryWriter.prototype.writeRepeatedFixedHash64=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeFixedHash64(u,n[A])},jspb.BinaryWriter.prototype.writeRepeatedVarintHash64=function(u,n){if(n!=null)for(var A=0;A<n.length;A++)this.writeVarintHash64(u,n[A])},jspb.BinaryWriter.prototype.writePackedInt32=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeSignedVarint32(n[A]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt32",jspb.BinaryWriter.prototype.writePackedInt32),jspb.BinaryWriter.prototype.writePackedInt32String=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeSignedVarint32(parseInt(n[A],10));this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedInt64=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeSignedVarint64(n[A]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedInt64",jspb.BinaryWriter.prototype.writePackedInt64),jspb.BinaryWriter.prototype.writePackedSplitFixed64=function(u,n,A,C){if(n!=null){u=this.beginDelimited_(u);for(var d=0;d<n.length;d++)this.encoder_.writeSplitFixed64(A(n[d]),C(n[d]));this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedSplitVarint64=function(u,n,A,C){if(n!=null){u=this.beginDelimited_(u);for(var d=0;d<n.length;d++)this.encoder_.writeSplitVarint64(A(n[d]),C(n[d]));this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedSplitZigzagVarint64=function(u,n,A,C){if(n!=null){u=this.beginDelimited_(u);for(var d=this.encoder_,g=0;g<n.length;g++)jspb.utils.toZigzag64(A(n[g]),C(n[g]),function(i,_){d.writeSplitVarint64(i>>>0,_>>>0)});this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedInt64String=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++){var C=jspb.arith.Int64.fromString(n[A]);this.encoder_.writeSplitVarint64(C.lo,C.hi)}this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedUint32=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeUnsignedVarint32(n[A]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint32",jspb.BinaryWriter.prototype.writePackedUint32),jspb.BinaryWriter.prototype.writePackedUint32String=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeUnsignedVarint32(parseInt(n[A],10));this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedUint64=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeUnsignedVarint64(n[A]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedUint64",jspb.BinaryWriter.prototype.writePackedUint64),jspb.BinaryWriter.prototype.writePackedUint64String=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++){var C=jspb.arith.UInt64.fromString(n[A]);this.encoder_.writeSplitVarint64(C.lo,C.hi)}this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedSint32=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeZigzagVarint32(n[A]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint32",jspb.BinaryWriter.prototype.writePackedSint32),jspb.BinaryWriter.prototype.writePackedSint64=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeZigzagVarint64(n[A]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSint64",jspb.BinaryWriter.prototype.writePackedSint64),jspb.BinaryWriter.prototype.writePackedSint64String=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeZigzagVarintHash64(jspb.utils.decimalStringToHash64(n[A]));this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedSintHash64=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeZigzagVarintHash64(n[A]);this.endDelimited_(u)}},jspb.BinaryWriter.prototype.writePackedFixed32=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*n.length),u=0;u<n.length;u++)this.encoder_.writeUint32(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed32",jspb.BinaryWriter.prototype.writePackedFixed32),jspb.BinaryWriter.prototype.writePackedFixed64=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*n.length),u=0;u<n.length;u++)this.encoder_.writeUint64(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFixed64",jspb.BinaryWriter.prototype.writePackedFixed64),jspb.BinaryWriter.prototype.writePackedFixed64String=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*n.length),u=0;u<n.length;u++){var A=jspb.arith.UInt64.fromString(n[u]);this.encoder_.writeSplitFixed64(A.lo,A.hi)}},jspb.BinaryWriter.prototype.writePackedSfixed32=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*n.length),u=0;u<n.length;u++)this.encoder_.writeInt32(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed32",jspb.BinaryWriter.prototype.writePackedSfixed32),jspb.BinaryWriter.prototype.writePackedSfixed64=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*n.length),u=0;u<n.length;u++)this.encoder_.writeInt64(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedSfixed64",jspb.BinaryWriter.prototype.writePackedSfixed64),jspb.BinaryWriter.prototype.writePackedSfixed64String=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*n.length),u=0;u<n.length;u++)this.encoder_.writeInt64String(n[u])},jspb.BinaryWriter.prototype.writePackedFloat=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(4*n.length),u=0;u<n.length;u++)this.encoder_.writeFloat(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedFloat",jspb.BinaryWriter.prototype.writePackedFloat),jspb.BinaryWriter.prototype.writePackedDouble=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*n.length),u=0;u<n.length;u++)this.encoder_.writeDouble(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedDouble",jspb.BinaryWriter.prototype.writePackedDouble),jspb.BinaryWriter.prototype.writePackedBool=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(n.length),u=0;u<n.length;u++)this.encoder_.writeBool(n[u])},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedBool",jspb.BinaryWriter.prototype.writePackedBool),jspb.BinaryWriter.prototype.writePackedEnum=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeEnum(n[A]);this.endDelimited_(u)}},goog.exportProperty(jspb.BinaryWriter.prototype,"writePackedEnum",jspb.BinaryWriter.prototype.writePackedEnum),jspb.BinaryWriter.prototype.writePackedFixedHash64=function(u,n){if(n!=null&&n.length)for(this.writeFieldHeader_(u,jspb.BinaryConstants.WireType.DELIMITED),this.encoder_.writeUnsignedVarint32(8*n.length),u=0;u<n.length;u++)this.encoder_.writeFixedHash64(n[u])},jspb.BinaryWriter.prototype.writePackedVarintHash64=function(u,n){if(n!=null&&n.length){u=this.beginDelimited_(u);for(var A=0;A<n.length;A++)this.encoder_.writeVarintHash64(n[A]);this.endDelimited_(u)}},jspb.Map=function(u,n){this.arr_=u,this.valueCtor_=n,this.map_={},this.arrClean=!0,0<this.arr_.length&&this.loadFromArray_()},goog.exportSymbol("jspb.Map",jspb.Map),jspb.Map.prototype.loadFromArray_=function(){for(var u=0;u<this.arr_.length;u++){var n=this.arr_[u],A=n[0];this.map_[A.toString()]=new jspb.Map.Entry_(A,n[1])}this.arrClean=!0},jspb.Map.prototype.toArray=function(){if(this.arrClean){if(this.valueCtor_){var u,n=this.map_;for(u in n)if(Object.prototype.hasOwnProperty.call(n,u)){var A=n[u].valueWrapper;A&&A.toArray()}}}else{for(this.arr_.length=0,(n=this.stringKeys_()).sort(),u=0;u<n.length;u++){var C=this.map_[n[u]];(A=C.valueWrapper)&&A.toArray(),this.arr_.push([C.key,C.value])}this.arrClean=!0}return this.arr_},goog.exportProperty(jspb.Map.prototype,"toArray",jspb.Map.prototype.toArray),jspb.Map.prototype.toObject=function(u,n){for(var A=this.toArray(),C=[],d=0;d<A.length;d++){var g=this.map_[A[d][0].toString()];this.wrapEntry_(g);var i=g.valueWrapper;i?(jspb.asserts.assert(n),C.push([g.key,n(u,i)])):C.push([g.key,g.value])}return C},goog.exportProperty(jspb.Map.prototype,"toObject",jspb.Map.prototype.toObject),jspb.Map.fromObject=function(u,n,A){n=new jspb.Map([],n);for(var C=0;C<u.length;C++){var d=u[C][0],g=A(u[C][1]);n.set(d,g)}return n},goog.exportProperty(jspb.Map,"fromObject",jspb.Map.fromObject),jspb.Map.ArrayIteratorIterable_=function(u){this.idx_=0,this.arr_=u},jspb.Map.ArrayIteratorIterable_.prototype.next=function(){return this.idx_<this.arr_.length?{done:!1,value:this.arr_[this.idx_++]}:{done:!0,value:void 0}},typeof Symbol!="undefined"&&(jspb.Map.ArrayIteratorIterable_.prototype[Symbol.iterator]=function(){return this}),jspb.Map.prototype.getLength=function(){return this.stringKeys_().length},goog.exportProperty(jspb.Map.prototype,"getLength",jspb.Map.prototype.getLength),jspb.Map.prototype.clear=function(){this.map_={},this.arrClean=!1},goog.exportProperty(jspb.Map.prototype,"clear",jspb.Map.prototype.clear),jspb.Map.prototype.del=function(u){u=u.toString();var n=this.map_.hasOwnProperty(u);return delete this.map_[u],this.arrClean=!1,n},goog.exportProperty(jspb.Map.prototype,"del",jspb.Map.prototype.del),jspb.Map.prototype.getEntryList=function(){var u=[],n=this.stringKeys_();n.sort();for(var A=0;A<n.length;A++){var C=this.map_[n[A]];u.push([C.key,C.value])}return u},goog.exportProperty(jspb.Map.prototype,"getEntryList",jspb.Map.prototype.getEntryList),jspb.Map.prototype.entries=function(){var u=[],n=this.stringKeys_();n.sort();for(var A=0;A<n.length;A++){var C=this.map_[n[A]];u.push([C.key,this.wrapEntry_(C)])}return new jspb.Map.ArrayIteratorIterable_(u)},goog.exportProperty(jspb.Map.prototype,"entries",jspb.Map.prototype.entries),jspb.Map.prototype.keys=function(){var u=[],n=this.stringKeys_();n.sort();for(var A=0;A<n.length;A++)u.push(this.map_[n[A]].key);return new jspb.Map.ArrayIteratorIterable_(u)},goog.exportProperty(jspb.Map.prototype,"keys",jspb.Map.prototype.keys),jspb.Map.prototype.values=function(){var u=[],n=this.stringKeys_();n.sort();for(var A=0;A<n.length;A++)u.push(this.wrapEntry_(this.map_[n[A]]));return new jspb.Map.ArrayIteratorIterable_(u)},goog.exportProperty(jspb.Map.prototype,"values",jspb.Map.prototype.values),jspb.Map.prototype.forEach=function(u,n){var A=this.stringKeys_();A.sort();for(var C=0;C<A.length;C++){var d=this.map_[A[C]];u.call(n,this.wrapEntry_(d),d.key,this)}},goog.exportProperty(jspb.Map.prototype,"forEach",jspb.Map.prototype.forEach),jspb.Map.prototype.set=function(u,n){var A=new jspb.Map.Entry_(u);return this.valueCtor_?(A.valueWrapper=n,A.value=n.toArray()):A.value=n,this.map_[u.toString()]=A,this.arrClean=!1,this},goog.exportProperty(jspb.Map.prototype,"set",jspb.Map.prototype.set),jspb.Map.prototype.wrapEntry_=function(u){return this.valueCtor_?(u.valueWrapper||(u.valueWrapper=new this.valueCtor_(u.value)),u.valueWrapper):u.value},jspb.Map.prototype.get=function(u){if(u=this.map_[u.toString()])return this.wrapEntry_(u)},goog.exportProperty(jspb.Map.prototype,"get",jspb.Map.prototype.get),jspb.Map.prototype.has=function(u){return u.toString()in this.map_},goog.exportProperty(jspb.Map.prototype,"has",jspb.Map.prototype.has),jspb.Map.prototype.serializeBinary=function(u,n,A,C,d){var g=this.stringKeys_();g.sort();for(var i=0;i<g.length;i++){var _=this.map_[g[i]];n.beginSubMessage(u),A.call(n,1,_.key),this.valueCtor_?C.call(n,2,this.wrapEntry_(_),d):C.call(n,2,_.value),n.endSubMessage()}},goog.exportProperty(jspb.Map.prototype,"serializeBinary",jspb.Map.prototype.serializeBinary),jspb.Map.deserializeBinary=function(u,n,A,C,d,g,i){for(;n.nextField()&&!n.isEndGroup();){var _=n.getFieldNumber();_==1?g=A.call(n):_==2&&(u.valueCtor_?(jspb.asserts.assert(d),i||(i=new u.valueCtor_),C.call(n,i,d)):i=C.call(n))}jspb.asserts.assert(g!=null),jspb.asserts.assert(i!=null),u.set(g,i)},goog.exportProperty(jspb.Map,"deserializeBinary",jspb.Map.deserializeBinary),jspb.Map.prototype.stringKeys_=function(){var u,n=this.map_,A=[];for(u in n)Object.prototype.hasOwnProperty.call(n,u)&&A.push(u);return A},jspb.Map.Entry_=function(u,n){this.key=u,this.value=n,this.valueWrapper=void 0},jspb.ExtensionFieldInfo=function(u,n,A,C,d){this.fieldIndex=u,this.fieldName=n,this.ctor=A,this.toObjectFn=C,this.isRepeated=d},goog.exportSymbol("jspb.ExtensionFieldInfo",jspb.ExtensionFieldInfo),jspb.ExtensionFieldBinaryInfo=function(u,n,A,C,d,g){this.fieldInfo=u,this.binaryReaderFn=n,this.binaryWriterFn=A,this.binaryMessageSerializeFn=C,this.binaryMessageDeserializeFn=d,this.isPacked=g},goog.exportSymbol("jspb.ExtensionFieldBinaryInfo",jspb.ExtensionFieldBinaryInfo),jspb.ExtensionFieldInfo.prototype.isMessageType=function(){return!!this.ctor},goog.exportProperty(jspb.ExtensionFieldInfo.prototype,"isMessageType",jspb.ExtensionFieldInfo.prototype.isMessageType),jspb.Message=function(){},goog.exportSymbol("jspb.Message",jspb.Message),jspb.Message.GENERATE_TO_OBJECT=!0,goog.exportProperty(jspb.Message,"GENERATE_TO_OBJECT",jspb.Message.GENERATE_TO_OBJECT),jspb.Message.GENERATE_FROM_OBJECT=!goog.DISALLOW_TEST_ONLY_CODE,goog.exportProperty(jspb.Message,"GENERATE_FROM_OBJECT",jspb.Message.GENERATE_FROM_OBJECT),jspb.Message.GENERATE_TO_STRING=!0,jspb.Message.ASSUME_LOCAL_ARRAYS=!1,jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS=!0,jspb.Message.SUPPORTS_UINT8ARRAY_=typeof Uint8Array=="function",jspb.Message.prototype.getJsPbMessageId=function(){return this.messageId_},goog.exportProperty(jspb.Message.prototype,"getJsPbMessageId",jspb.Message.prototype.getJsPbMessageId),jspb.Message.getIndex_=function(u,n){return n+u.arrayIndexOffset_},jspb.Message.hiddenES6Property_=function(){},jspb.Message.getFieldNumber_=function(u,n){return n-u.arrayIndexOffset_},jspb.Message.initialize=function(u,n,A,C,d,g){if(u.wrappers_=null,n||(n=A?[A]:[]),u.messageId_=A?String(A):void 0,u.arrayIndexOffset_=A===0?-1:0,u.array=n,jspb.Message.initPivotAndExtensionObject_(u,C),u.convertedPrimitiveFields_={},jspb.Message.SERIALIZE_EMPTY_TRAILING_FIELDS||(u.repeatedFields=d),d)for(n=0;n<d.length;n++)(A=d[n])<u.pivot_?(A=jspb.Message.getIndex_(u,A),u.array[A]=u.array[A]||jspb.Message.EMPTY_LIST_SENTINEL_):(jspb.Message.maybeInitEmptyExtensionObject_(u),u.extensionObject_[A]=u.extensionObject_[A]||jspb.Message.EMPTY_LIST_SENTINEL_);if(g&&g.length)for(n=0;n<g.length;n++)jspb.Message.computeOneofCase(u,g[n])},goog.exportProperty(jspb.Message,"initialize",jspb.Message.initialize),jspb.Message.EMPTY_LIST_SENTINEL_=goog.DEBUG&&Object.freeze?Object.freeze([]):[],jspb.Message.isArray_=function(u){return jspb.Message.ASSUME_LOCAL_ARRAYS?u instanceof Array:Array.isArray(u)},jspb.Message.isExtensionObject_=function(u){return!(u===null||typeof u!="object"||jspb.Message.isArray_(u)||jspb.Message.SUPPORTS_UINT8ARRAY_&&u instanceof Uint8Array)},jspb.Message.initPivotAndExtensionObject_=function(u,n){var A=u.array.length,C=-1;if(A&&(C=A-1,A=u.array[C],jspb.Message.isExtensionObject_(A)))return u.pivot_=jspb.Message.getFieldNumber_(u,C),void(u.extensionObject_=A);-1<n?(u.pivot_=Math.max(n,jspb.Message.getFieldNumber_(u,C+1)),u.extensionObject_=null):u.pivot_=Number.MAX_VALUE},jspb.Message.maybeInitEmptyExtensionObject_=function(u){var n=jspb.Message.getIndex_(u,u.pivot_);u.array[n]||(u.extensionObject_=u.array[n]={})},jspb.Message.toObjectList=function(u,n,A){for(var C=[],d=0;d<u.length;d++)C[d]=n.call(u[d],A,u[d]);return C},goog.exportProperty(jspb.Message,"toObjectList",jspb.Message.toObjectList),jspb.Message.toObjectExtension=function(u,n,A,C,d){for(var g in A){var i=A[g],_=C.call(u,i);if(_!=null){for(var j in i.fieldName)if(i.fieldName.hasOwnProperty(j))break;n[j]=i.toObjectFn?i.isRepeated?jspb.Message.toObjectList(_,i.toObjectFn,d):i.toObjectFn(d,_):_}}},goog.exportProperty(jspb.Message,"toObjectExtension",jspb.Message.toObjectExtension),jspb.Message.serializeBinaryExtensions=function(u,n,A,C){for(var d in A){var g=A[d],i=g.fieldInfo;if(!g.binaryWriterFn)throw Error("Message extension present that was generated without binary serialization support");var _=C.call(u,i);if(_!=null)if(i.isMessageType()){if(!g.binaryMessageSerializeFn)throw Error("Message extension present holding submessage without binary support enabled, and message is being serialized to binary format");g.binaryWriterFn.call(n,i.fieldIndex,_,g.binaryMessageSerializeFn)}else g.binaryWriterFn.call(n,i.fieldIndex,_)}},goog.exportProperty(jspb.Message,"serializeBinaryExtensions",jspb.Message.serializeBinaryExtensions),jspb.Message.readBinaryExtension=function(u,n,A,C,d){var g=A[n.getFieldNumber()];if(g){if(A=g.fieldInfo,!g.binaryReaderFn)throw Error("Deserializing extension whose generated code does not support binary format");if(A.isMessageType()){var i=new A.ctor;g.binaryReaderFn.call(n,i,g.binaryMessageDeserializeFn)}else i=g.binaryReaderFn.call(n);A.isRepeated&&!g.isPacked?(n=C.call(u,A))?n.push(i):d.call(u,A,[i]):d.call(u,A,i)}else n.skipField()},goog.exportProperty(jspb.Message,"readBinaryExtension",jspb.Message.readBinaryExtension),jspb.Message.getField=function(u,n){if(n<u.pivot_){n=jspb.Message.getIndex_(u,n);var A=u.array[n];return A===jspb.Message.EMPTY_LIST_SENTINEL_?u.array[n]=[]:A}if(u.extensionObject_)return(A=u.extensionObject_[n])===jspb.Message.EMPTY_LIST_SENTINEL_?u.extensionObject_[n]=[]:A},goog.exportProperty(jspb.Message,"getField",jspb.Message.getField),jspb.Message.getRepeatedField=function(u,n){return jspb.Message.getField(u,n)},goog.exportProperty(jspb.Message,"getRepeatedField",jspb.Message.getRepeatedField),jspb.Message.getOptionalFloatingPointField=function(u,n){return(u=jspb.Message.getField(u,n))==null?u:+u},goog.exportProperty(jspb.Message,"getOptionalFloatingPointField",jspb.Message.getOptionalFloatingPointField),jspb.Message.getBooleanField=function(u,n){return(u=jspb.Message.getField(u,n))==null?u:!!u},goog.exportProperty(jspb.Message,"getBooleanField",jspb.Message.getBooleanField),jspb.Message.getRepeatedFloatingPointField=function(u,n){var A=jspb.Message.getRepeatedField(u,n);if(u.convertedPrimitiveFields_||(u.convertedPrimitiveFields_={}),!u.convertedPrimitiveFields_[n]){for(var C=0;C<A.length;C++)A[C]=+A[C];u.convertedPrimitiveFields_[n]=!0}return A},goog.exportProperty(jspb.Message,"getRepeatedFloatingPointField",jspb.Message.getRepeatedFloatingPointField),jspb.Message.getRepeatedBooleanField=function(u,n){var A=jspb.Message.getRepeatedField(u,n);if(u.convertedPrimitiveFields_||(u.convertedPrimitiveFields_={}),!u.convertedPrimitiveFields_[n]){for(var C=0;C<A.length;C++)A[C]=!!A[C];u.convertedPrimitiveFields_[n]=!0}return A},goog.exportProperty(jspb.Message,"getRepeatedBooleanField",jspb.Message.getRepeatedBooleanField),jspb.Message.bytesAsB64=function(u){return u==null||typeof u=="string"?u:jspb.Message.SUPPORTS_UINT8ARRAY_&&u instanceof Uint8Array?goog.crypt.base64.encodeByteArray(u):(jspb.asserts.fail("Cannot coerce to b64 string: "+goog.typeOf(u)),null)},goog.exportProperty(jspb.Message,"bytesAsB64",jspb.Message.bytesAsB64),jspb.Message.bytesAsU8=function(u){return u==null||u instanceof Uint8Array?u:typeof u=="string"?goog.crypt.base64.decodeStringToUint8Array(u):(jspb.asserts.fail("Cannot coerce to Uint8Array: "+goog.typeOf(u)),null)},goog.exportProperty(jspb.Message,"bytesAsU8",jspb.Message.bytesAsU8),jspb.Message.bytesListAsB64=function(u){return jspb.Message.assertConsistentTypes_(u),u.length&&typeof u[0]!="string"?goog.array.map(u,jspb.Message.bytesAsB64):u},goog.exportProperty(jspb.Message,"bytesListAsB64",jspb.Message.bytesListAsB64),jspb.Message.bytesListAsU8=function(u){return jspb.Message.assertConsistentTypes_(u),!u.length||u[0]instanceof Uint8Array?u:goog.array.map(u,jspb.Message.bytesAsU8)},goog.exportProperty(jspb.Message,"bytesListAsU8",jspb.Message.bytesListAsU8),jspb.Message.assertConsistentTypes_=function(u){if(goog.DEBUG&&u&&1<u.length){var n=goog.typeOf(u[0]);goog.array.forEach(u,function(A){goog.typeOf(A)!=n&&jspb.asserts.fail("Inconsistent type in JSPB repeated field array. Got "+goog.typeOf(A)+" expected "+n)})}},jspb.Message.getFieldWithDefault=function(u,n,A){return(u=jspb.Message.getField(u,n))==null?A:u},goog.exportProperty(jspb.Message,"getFieldWithDefault",jspb.Message.getFieldWithDefault),jspb.Message.getBooleanFieldWithDefault=function(u,n,A){return(u=jspb.Message.getBooleanField(u,n))==null?A:u},goog.exportProperty(jspb.Message,"getBooleanFieldWithDefault",jspb.Message.getBooleanFieldWithDefault),jspb.Message.getFloatingPointFieldWithDefault=function(u,n,A){return(u=jspb.Message.getOptionalFloatingPointField(u,n))==null?A:u},goog.exportProperty(jspb.Message,"getFloatingPointFieldWithDefault",jspb.Message.getFloatingPointFieldWithDefault),jspb.Message.getFieldProto3=jspb.Message.getFieldWithDefault,goog.exportProperty(jspb.Message,"getFieldProto3",jspb.Message.getFieldProto3),jspb.Message.getMapField=function(u,n,A,C){if(u.wrappers_||(u.wrappers_={}),n in u.wrappers_)return u.wrappers_[n];var d=jspb.Message.getField(u,n);if(!d){if(A)return;d=[],jspb.Message.setField(u,n,d)}return u.wrappers_[n]=new jspb.Map(d,C)},goog.exportProperty(jspb.Message,"getMapField",jspb.Message.getMapField),jspb.Message.setField=function(u,n,A){return jspb.asserts.assertInstanceof(u,jspb.Message),n<u.pivot_?u.array[jspb.Message.getIndex_(u,n)]=A:(jspb.Message.maybeInitEmptyExtensionObject_(u),u.extensionObject_[n]=A),u},goog.exportProperty(jspb.Message,"setField",jspb.Message.setField),jspb.Message.setProto3IntField=function(u,n,A){return jspb.Message.setFieldIgnoringDefault_(u,n,A,0)},goog.exportProperty(jspb.Message,"setProto3IntField",jspb.Message.setProto3IntField),jspb.Message.setProto3FloatField=function(u,n,A){return jspb.Message.setFieldIgnoringDefault_(u,n,A,0)},goog.exportProperty(jspb.Message,"setProto3FloatField",jspb.Message.setProto3FloatField),jspb.Message.setProto3BooleanField=function(u,n,A){return jspb.Message.setFieldIgnoringDefault_(u,n,A,!1)},goog.exportProperty(jspb.Message,"setProto3BooleanField",jspb.Message.setProto3BooleanField),jspb.Message.setProto3StringField=function(u,n,A){return jspb.Message.setFieldIgnoringDefault_(u,n,A,"")},goog.exportProperty(jspb.Message,"setProto3StringField",jspb.Message.setProto3StringField),jspb.Message.setProto3BytesField=function(u,n,A){return jspb.Message.setFieldIgnoringDefault_(u,n,A,"")},goog.exportProperty(jspb.Message,"setProto3BytesField",jspb.Message.setProto3BytesField),jspb.Message.setProto3EnumField=function(u,n,A){return jspb.Message.setFieldIgnoringDefault_(u,n,A,0)},goog.exportProperty(jspb.Message,"setProto3EnumField",jspb.Message.setProto3EnumField),jspb.Message.setProto3StringIntField=function(u,n,A){return jspb.Message.setFieldIgnoringDefault_(u,n,A,"0")},goog.exportProperty(jspb.Message,"setProto3StringIntField",jspb.Message.setProto3StringIntField),jspb.Message.setFieldIgnoringDefault_=function(u,n,A,C){return jspb.asserts.assertInstanceof(u,jspb.Message),A!==C?jspb.Message.setField(u,n,A):n<u.pivot_?u.array[jspb.Message.getIndex_(u,n)]=null:(jspb.Message.maybeInitEmptyExtensionObject_(u),delete u.extensionObject_[n]),u},jspb.Message.addToRepeatedField=function(u,n,A,C){return jspb.asserts.assertInstanceof(u,jspb.Message),n=jspb.Message.getRepeatedField(u,n),C!=null?n.splice(C,0,A):n.push(A),u},goog.exportProperty(jspb.Message,"addToRepeatedField",jspb.Message.addToRepeatedField),jspb.Message.setOneofField=function(u,n,A,C){return jspb.asserts.assertInstanceof(u,jspb.Message),(A=jspb.Message.computeOneofCase(u,A))&&A!==n&&C!==void 0&&(u.wrappers_&&A in u.wrappers_&&(u.wrappers_[A]=void 0),jspb.Message.setField(u,A,void 0)),jspb.Message.setField(u,n,C)},goog.exportProperty(jspb.Message,"setOneofField",jspb.Message.setOneofField),jspb.Message.computeOneofCase=function(u,n){for(var A,C,d=0;d<n.length;d++){var g=n[d],i=jspb.Message.getField(u,g);i!=null&&(A=g,C=i,jspb.Message.setField(u,g,void 0))}return A?(jspb.Message.setField(u,A,C),A):0},goog.exportProperty(jspb.Message,"computeOneofCase",jspb.Message.computeOneofCase),jspb.Message.getWrapperField=function(u,n,A,C){if(u.wrappers_||(u.wrappers_={}),!u.wrappers_[A]){var d=jspb.Message.getField(u,A);(C||d)&&(u.wrappers_[A]=new n(d))}return u.wrappers_[A]},goog.exportProperty(jspb.Message,"getWrapperField",jspb.Message.getWrapperField),jspb.Message.getRepeatedWrapperField=function(u,n,A){return jspb.Message.wrapRepeatedField_(u,n,A),(n=u.wrappers_[A])==jspb.Message.EMPTY_LIST_SENTINEL_&&(n=u.wrappers_[A]=[]),n},goog.exportProperty(jspb.Message,"getRepeatedWrapperField",jspb.Message.getRepeatedWrapperField),jspb.Message.wrapRepeatedField_=function(u,n,A){if(u.wrappers_||(u.wrappers_={}),!u.wrappers_[A]){for(var C=jspb.Message.getRepeatedField(u,A),d=[],g=0;g<C.length;g++)d[g]=new n(C[g]);u.wrappers_[A]=d}},jspb.Message.setWrapperField=function(u,n,A){jspb.asserts.assertInstanceof(u,jspb.Message),u.wrappers_||(u.wrappers_={});var C=A&&A.toArray();return u.wrappers_[n]=A,jspb.Message.setField(u,n,C)},goog.exportProperty(jspb.Message,"setWrapperField",jspb.Message.setWrapperField),jspb.Message.setOneofWrapperField=function(u,n,A,C){jspb.asserts.assertInstanceof(u,jspb.Message),u.wrappers_||(u.wrappers_={});var d=C&&C.toArray();return u.wrappers_[n]=C,jspb.Message.setOneofField(u,n,A,d)},goog.exportProperty(jspb.Message,"setOneofWrapperField",jspb.Message.setOneofWrapperField),jspb.Message.setRepeatedWrapperField=function(u,n,A){jspb.asserts.assertInstanceof(u,jspb.Message),u.wrappers_||(u.wrappers_={}),A=A||[];for(var C=[],d=0;d<A.length;d++)C[d]=A[d].toArray();return u.wrappers_[n]=A,jspb.Message.setField(u,n,C)},goog.exportProperty(jspb.Message,"setRepeatedWrapperField",jspb.Message.setRepeatedWrapperField),jspb.Message.addToRepeatedWrapperField=function(u,n,A,C,d){jspb.Message.wrapRepeatedField_(u,C,n);var g=u.wrappers_[n];return g||(g=u.wrappers_[n]=[]),A=A||new C,u=jspb.Message.getRepeatedField(u,n),d!=null?(g.splice(d,0,A),u.splice(d,0,A.toArray())):(g.push(A),u.push(A.toArray())),A},goog.exportProperty(jspb.Message,"addToRepeatedWrapperField",jspb.Message.addToRepeatedWrapperField),jspb.Message.toMap=function(u,n,A,C){for(var d={},g=0;g<u.length;g++)d[n.call(u[g])]=A?A.call(u[g],C,u[g]):u[g];return d},goog.exportProperty(jspb.Message,"toMap",jspb.Message.toMap),jspb.Message.prototype.syncMapFields_=function(){if(this.wrappers_)for(var u in this.wrappers_){var n=this.wrappers_[u];if(Array.isArray(n))for(var A=0;A<n.length;A++)n[A]&&n[A].toArray();else n&&n.toArray()}},jspb.Message.prototype.toArray=function(){return this.syncMapFields_(),this.array},goog.exportProperty(jspb.Message.prototype,"toArray",jspb.Message.prototype.toArray),jspb.Message.GENERATE_TO_STRING&&(jspb.Message.prototype.toString=function(){return this.syncMapFields_(),this.array.toString()}),jspb.Message.prototype.getExtension=function(u){if(this.extensionObject_){this.wrappers_||(this.wrappers_={});var n=u.fieldIndex;if(u.isRepeated){if(u.isMessageType())return this.wrappers_[n]||(this.wrappers_[n]=goog.array.map(this.extensionObject_[n]||[],function(A){return new u.ctor(A)})),this.wrappers_[n]}else if(u.isMessageType())return!this.wrappers_[n]&&this.extensionObject_[n]&&(this.wrappers_[n]=new u.ctor(this.extensionObject_[n])),this.wrappers_[n];return this.extensionObject_[n]}},goog.exportProperty(jspb.Message.prototype,"getExtension",jspb.Message.prototype.getExtension),jspb.Message.prototype.setExtension=function(u,n){this.wrappers_||(this.wrappers_={}),jspb.Message.maybeInitEmptyExtensionObject_(this);var A=u.fieldIndex;return u.isRepeated?(n=n||[],u.isMessageType()?(this.wrappers_[A]=n,this.extensionObject_[A]=goog.array.map(n,function(C){return C.toArray()})):this.extensionObject_[A]=n):u.isMessageType()?(this.wrappers_[A]=n,this.extensionObject_[A]=n&&n.toArray()):this.extensionObject_[A]=n,this},goog.exportProperty(jspb.Message.prototype,"setExtension",jspb.Message.prototype.setExtension),jspb.Message.difference=function(u,n){if(!(u instanceof n.constructor))throw Error("Messages have different types.");var A=u.toArray();n=n.toArray();var C=[],d=0,g=A.length>n.length?A.length:n.length;for(u.getJsPbMessageId()&&(C[0]=u.getJsPbMessageId(),d=1);d<g;d++)jspb.Message.compareFields(A[d],n[d])||(C[d]=n[d]);return new u.constructor(C)},goog.exportProperty(jspb.Message,"difference",jspb.Message.difference),jspb.Message.equals=function(u,n){return u==n||!(!u||!n)&&u instanceof n.constructor&&jspb.Message.compareFields(u.toArray(),n.toArray())},goog.exportProperty(jspb.Message,"equals",jspb.Message.equals),jspb.Message.compareExtensions=function(u,n){u=u||{},n=n||{};var A,C={};for(A in u)C[A]=0;for(A in n)C[A]=0;for(A in C)if(!jspb.Message.compareFields(u[A],n[A]))return!1;return!0},goog.exportProperty(jspb.Message,"compareExtensions",jspb.Message.compareExtensions),jspb.Message.compareFields=function(u,n){if(u==n)return!0;if(!goog.isObject(u)||!goog.isObject(n))return!!(typeof u=="number"&&isNaN(u)||typeof n=="number"&&isNaN(n))&&String(u)==String(n);if(u.constructor!=n.constructor)return!1;if(jspb.Message.SUPPORTS_UINT8ARRAY_&&u.constructor===Uint8Array){if(u.length!=n.length)return!1;for(var A=0;A<u.length;A++)if(u[A]!=n[A])return!1;return!0}if(u.constructor===Array){var C=void 0,d=void 0,g=Math.max(u.length,n.length);for(A=0;A<g;A++){var i=u[A],_=n[A];if(i&&i.constructor==Object&&(jspb.asserts.assert(C===void 0),jspb.asserts.assert(A===u.length-1),C=i,i=void 0),_&&_.constructor==Object&&(jspb.asserts.assert(d===void 0),jspb.asserts.assert(A===n.length-1),d=_,_=void 0),!jspb.Message.compareFields(i,_))return!1}return!C&&!d||(C=C||{},d=d||{},jspb.Message.compareExtensions(C,d))}if(u.constructor===Object)return jspb.Message.compareExtensions(u,n);throw Error("Invalid type in JSPB array")},goog.exportProperty(jspb.Message,"compareFields",jspb.Message.compareFields),jspb.Message.prototype.cloneMessage=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"cloneMessage",jspb.Message.prototype.cloneMessage),jspb.Message.prototype.clone=function(){return jspb.Message.cloneMessage(this)},goog.exportProperty(jspb.Message.prototype,"clone",jspb.Message.prototype.clone),jspb.Message.clone=function(u){return jspb.Message.cloneMessage(u)},goog.exportProperty(jspb.Message,"clone",jspb.Message.clone),jspb.Message.cloneMessage=function(u){return new u.constructor(jspb.Message.clone_(u.toArray()))},jspb.Message.copyInto=function(u,n){jspb.asserts.assertInstanceof(u,jspb.Message),jspb.asserts.assertInstanceof(n,jspb.Message),jspb.asserts.assert(u.constructor==n.constructor,"Copy source and target message should have the same type."),u=jspb.Message.clone(u);for(var A=n.toArray(),C=u.toArray(),d=A.length=0;d<C.length;d++)A[d]=C[d];n.wrappers_=u.wrappers_,n.extensionObject_=u.extensionObject_},goog.exportProperty(jspb.Message,"copyInto",jspb.Message.copyInto),jspb.Message.clone_=function(u){if(Array.isArray(u)){for(var n=Array(u.length),A=0;A<u.length;A++){var C=u[A];C!=null&&(n[A]=typeof C=="object"?jspb.Message.clone_(jspb.asserts.assert(C)):C)}return n}if(jspb.Message.SUPPORTS_UINT8ARRAY_&&u instanceof Uint8Array)return new Uint8Array(u);for(A in n={},u)(C=u[A])!=null&&(n[A]=typeof C=="object"?jspb.Message.clone_(jspb.asserts.assert(C)):C);return n},jspb.Message.registerMessageType=function(u,n){n.messageId=u},goog.exportProperty(jspb.Message,"registerMessageType",jspb.Message.registerMessageType),jspb.Message.messageSetExtensions={},jspb.Message.messageSetExtensionsBinary={},jspb.Export={},exports.Map=jspb.Map,exports.Message=jspb.Message,exports.BinaryReader=jspb.BinaryReader,exports.BinaryWriter=jspb.BinaryWriter,exports.ExtensionFieldInfo=jspb.ExtensionFieldInfo,exports.ExtensionFieldBinaryInfo=jspb.ExtensionFieldBinaryInfo,exports.exportSymbol=goog.exportSymbol,exports.inherits=goog.inherits,exports.object={extend:goog.object.extend},exports.typeOf=goog.typeOf})(googleProtobuf);var calculator_options_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.CalculatorOptions",null,C),proto.mediapipe.CalculatorOptions=function(d){n.Message.initialize(this,d,0,2,null,null)},A.inherits(proto.mediapipe.CalculatorOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.CalculatorOptions.displayName="proto.mediapipe.CalculatorOptions"),proto.mediapipe.CalculatorOptions.extensions={},proto.mediapipe.CalculatorOptions.extensionsBinary={},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.CalculatorOptions.prototype.toObject=function(d){return proto.mediapipe.CalculatorOptions.toObject(d,this)},proto.mediapipe.CalculatorOptions.toObject=function(d,g){var i,_={mergeFields:(i=n.Message.getBooleanField(g,1))==null?void 0:i};return n.Message.toObjectExtension(g,_,proto.mediapipe.CalculatorOptions.extensions,proto.mediapipe.CalculatorOptions.prototype.getExtension,d),d&&(_.$jspbMessageInstance=g),_}),proto.mediapipe.CalculatorOptions.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.CalculatorOptions;return proto.mediapipe.CalculatorOptions.deserializeBinaryFromReader(i,g)},proto.mediapipe.CalculatorOptions.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)if(g.getFieldNumber()===1){var i=g.readBool();d.setMergeFields(i)}else n.Message.readBinaryExtension(d,g,proto.mediapipe.CalculatorOptions.extensionsBinary,proto.mediapipe.CalculatorOptions.prototype.getExtension,proto.mediapipe.CalculatorOptions.prototype.setExtension);return d},proto.mediapipe.CalculatorOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.CalculatorOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.CalculatorOptions.serializeBinaryToWriter=function(d,g){var i;(i=n.Message.getField(d,1))!=null&&g.writeBool(1,i),n.Message.serializeBinaryExtensions(d,g,proto.mediapipe.CalculatorOptions.extensionsBinary,proto.mediapipe.CalculatorOptions.prototype.getExtension)},proto.mediapipe.CalculatorOptions.prototype.getMergeFields=function(){return n.Message.getBooleanFieldWithDefault(this,1,!1)},proto.mediapipe.CalculatorOptions.prototype.setMergeFields=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.CalculatorOptions.prototype.clearMergeFields=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.CalculatorOptions.prototype.hasMergeFields=function(){return n.Message.getField(this,1)!=null},A.object.extend(u,proto.mediapipe)})(calculator_options_pb);var any_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.google.protobuf.Any",null,C),proto.google.protobuf.Any=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.google.protobuf.Any,n.Message),A.DEBUG&&!COMPILED&&(proto.google.protobuf.Any.displayName="proto.google.protobuf.Any"),n.Message.GENERATE_TO_OBJECT&&(proto.google.protobuf.Any.prototype.toObject=function(d){return proto.google.protobuf.Any.toObject(d,this)},proto.google.protobuf.Any.toObject=function(d,g){var i={typeUrl:n.Message.getFieldWithDefault(g,1,""),value:g.getValue_asB64()};return d&&(i.$jspbMessageInstance=g),i}),proto.google.protobuf.Any.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.google.protobuf.Any;return proto.google.protobuf.Any.deserializeBinaryFromReader(i,g)},proto.google.protobuf.Any.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var i=g.readString();d.setTypeUrl(i);break;case 2:i=g.readBytes(),d.setValue(i);break;default:g.skipField()}return d},proto.google.protobuf.Any.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.google.protobuf.Any.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.google.protobuf.Any.serializeBinaryToWriter=function(d,g){var i=void 0;(i=d.getTypeUrl()).length>0&&g.writeString(1,i),(i=d.getValue_asU8()).length>0&&g.writeBytes(2,i)},proto.google.protobuf.Any.prototype.getTypeUrl=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.google.protobuf.Any.prototype.setTypeUrl=function(d){return n.Message.setProto3StringField(this,1,d)},proto.google.protobuf.Any.prototype.getValue=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.google.protobuf.Any.prototype.getValue_asB64=function(){return n.Message.bytesAsB64(this.getValue())},proto.google.protobuf.Any.prototype.getValue_asU8=function(){return n.Message.bytesAsU8(this.getValue())},proto.google.protobuf.Any.prototype.setValue=function(d){return n.Message.setProto3BytesField(this,2,d)},A.object.extend(u,proto.google.protobuf),proto.google.protobuf.Any.prototype.getTypeName=function(){return this.getTypeUrl().split("/").pop()},proto.google.protobuf.Any.prototype.pack=function(d,g,i){i||(i="type.googleapis.com/"),i.substr(-1)!="/"?this.setTypeUrl(i+"/"+g):this.setTypeUrl(i+g),this.setValue(d)},proto.google.protobuf.Any.prototype.unpack=function(d,g){return this.getTypeName()==g?d(this.getValue_asU8()):null}})(any_pb);var mediapipe_options_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.MediaPipeOptions",null,C),proto.mediapipe.MediaPipeOptions=function(d){n.Message.initialize(this,d,0,1,null,null)},A.inherits(proto.mediapipe.MediaPipeOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.MediaPipeOptions.displayName="proto.mediapipe.MediaPipeOptions"),proto.mediapipe.MediaPipeOptions.extensions={},proto.mediapipe.MediaPipeOptions.extensionsBinary={},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.MediaPipeOptions.prototype.toObject=function(d){return proto.mediapipe.MediaPipeOptions.toObject(d,this)},proto.mediapipe.MediaPipeOptions.toObject=function(d,g){var i={};return n.Message.toObjectExtension(g,i,proto.mediapipe.MediaPipeOptions.extensions,proto.mediapipe.MediaPipeOptions.prototype.getExtension,d),d&&(i.$jspbMessageInstance=g),i}),proto.mediapipe.MediaPipeOptions.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.MediaPipeOptions;return proto.mediapipe.MediaPipeOptions.deserializeBinaryFromReader(i,g)},proto.mediapipe.MediaPipeOptions.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)g.getFieldNumber(),n.Message.readBinaryExtension(d,g,proto.mediapipe.MediaPipeOptions.extensionsBinary,proto.mediapipe.MediaPipeOptions.prototype.getExtension,proto.mediapipe.MediaPipeOptions.prototype.setExtension);return d},proto.mediapipe.MediaPipeOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.MediaPipeOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.MediaPipeOptions.serializeBinaryToWriter=function(d,g){n.Message.serializeBinaryExtensions(d,g,proto.mediapipe.MediaPipeOptions.extensionsBinary,proto.mediapipe.MediaPipeOptions.prototype.getExtension)},A.object.extend(u,proto.mediapipe)})(mediapipe_options_pb);var packet_factory_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.PacketFactoryConfig",null,C),A.exportSymbol("proto.mediapipe.PacketFactoryOptions",null,C),A.exportSymbol("proto.mediapipe.PacketManagerConfig",null,C),proto.mediapipe.PacketFactoryOptions=function(d){n.Message.initialize(this,d,0,1,null,null)},A.inherits(proto.mediapipe.PacketFactoryOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.PacketFactoryOptions.displayName="proto.mediapipe.PacketFactoryOptions"),proto.mediapipe.PacketFactoryOptions.extensions={},proto.mediapipe.PacketFactoryOptions.extensionsBinary={},proto.mediapipe.PacketFactoryConfig=function(d){n.Message.initialize(this,d,0,500,null,null)},A.inherits(proto.mediapipe.PacketFactoryConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.PacketFactoryConfig.displayName="proto.mediapipe.PacketFactoryConfig"),proto.mediapipe.PacketManagerConfig=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.PacketManagerConfig.repeatedFields_,null)},A.inherits(proto.mediapipe.PacketManagerConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.PacketManagerConfig.displayName="proto.mediapipe.PacketManagerConfig"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketFactoryOptions.prototype.toObject=function(d){return proto.mediapipe.PacketFactoryOptions.toObject(d,this)},proto.mediapipe.PacketFactoryOptions.toObject=function(d,g){var i={};return n.Message.toObjectExtension(g,i,proto.mediapipe.PacketFactoryOptions.extensions,proto.mediapipe.PacketFactoryOptions.prototype.getExtension,d),d&&(i.$jspbMessageInstance=g),i}),proto.mediapipe.PacketFactoryOptions.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.PacketFactoryOptions;return proto.mediapipe.PacketFactoryOptions.deserializeBinaryFromReader(i,g)},proto.mediapipe.PacketFactoryOptions.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)g.getFieldNumber(),n.Message.readBinaryExtension(d,g,proto.mediapipe.PacketFactoryOptions.extensionsBinary,proto.mediapipe.PacketFactoryOptions.prototype.getExtension,proto.mediapipe.PacketFactoryOptions.prototype.setExtension);return d},proto.mediapipe.PacketFactoryOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.PacketFactoryOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.PacketFactoryOptions.serializeBinaryToWriter=function(d,g){n.Message.serializeBinaryExtensions(d,g,proto.mediapipe.PacketFactoryOptions.extensionsBinary,proto.mediapipe.PacketFactoryOptions.prototype.getExtension)},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketFactoryConfig.prototype.toObject=function(d){return proto.mediapipe.PacketFactoryConfig.toObject(d,this)},proto.mediapipe.PacketFactoryConfig.toObject=function(d,g){var i,_={packetFactory:(i=n.Message.getField(g,1))==null?void 0:i,outputSidePacket:(i=n.Message.getField(g,2))==null?void 0:i,externalOutput:(i=n.Message.getField(g,1002))==null?void 0:i,options:(i=g.getOptions())&&proto.mediapipe.PacketFactoryOptions.toObject(d,i)};return d&&(_.$jspbMessageInstance=g),_}),proto.mediapipe.PacketFactoryConfig.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.PacketFactoryConfig;return proto.mediapipe.PacketFactoryConfig.deserializeBinaryFromReader(i,g)},proto.mediapipe.PacketFactoryConfig.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var i=g.readString();d.setPacketFactory(i);break;case 2:i=g.readString(),d.setOutputSidePacket(i);break;case 1002:i=g.readString(),d.setExternalOutput(i);break;case 3:i=new proto.mediapipe.PacketFactoryOptions,g.readMessage(i,proto.mediapipe.PacketFactoryOptions.deserializeBinaryFromReader),d.setOptions(i);break;default:g.skipField()}return d},proto.mediapipe.PacketFactoryConfig.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.PacketFactoryConfig.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.PacketFactoryConfig.serializeBinaryToWriter=function(d,g){var i=void 0;(i=n.Message.getField(d,1))!=null&&g.writeString(1,i),(i=n.Message.getField(d,2))!=null&&g.writeString(2,i),(i=n.Message.getField(d,1002))!=null&&g.writeString(1002,i),(i=d.getOptions())!=null&&g.writeMessage(3,i,proto.mediapipe.PacketFactoryOptions.serializeBinaryToWriter)},proto.mediapipe.PacketFactoryConfig.prototype.getPacketFactory=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.PacketFactoryConfig.prototype.setPacketFactory=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.PacketFactoryConfig.prototype.clearPacketFactory=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasPacketFactory=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.PacketFactoryConfig.prototype.getOutputSidePacket=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.PacketFactoryConfig.prototype.setOutputSidePacket=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.PacketFactoryConfig.prototype.clearOutputSidePacket=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasOutputSidePacket=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.PacketFactoryConfig.prototype.getExternalOutput=function(){return n.Message.getFieldWithDefault(this,1002,"")},proto.mediapipe.PacketFactoryConfig.prototype.setExternalOutput=function(d){return n.Message.setField(this,1002,d)},proto.mediapipe.PacketFactoryConfig.prototype.clearExternalOutput=function(){return n.Message.setField(this,1002,void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasExternalOutput=function(){return n.Message.getField(this,1002)!=null},proto.mediapipe.PacketFactoryConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,proto.mediapipe.PacketFactoryOptions,3)},proto.mediapipe.PacketFactoryConfig.prototype.setOptions=function(d){return n.Message.setWrapperField(this,3,d)},proto.mediapipe.PacketFactoryConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.PacketFactoryConfig.prototype.hasOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.PacketManagerConfig.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketManagerConfig.prototype.toObject=function(d){return proto.mediapipe.PacketManagerConfig.toObject(d,this)},proto.mediapipe.PacketManagerConfig.toObject=function(d,g){var i={packetList:n.Message.toObjectList(g.getPacketList(),proto.mediapipe.PacketFactoryConfig.toObject,d)};return d&&(i.$jspbMessageInstance=g),i}),proto.mediapipe.PacketManagerConfig.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.PacketManagerConfig;return proto.mediapipe.PacketManagerConfig.deserializeBinaryFromReader(i,g)},proto.mediapipe.PacketManagerConfig.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)if(g.getFieldNumber()===1){var i=new proto.mediapipe.PacketFactoryConfig;g.readMessage(i,proto.mediapipe.PacketFactoryConfig.deserializeBinaryFromReader),d.addPacket(i)}else g.skipField();return d},proto.mediapipe.PacketManagerConfig.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.PacketManagerConfig.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.PacketManagerConfig.serializeBinaryToWriter=function(d,g){var i;(i=d.getPacketList()).length>0&&g.writeRepeatedMessage(1,i,proto.mediapipe.PacketFactoryConfig.serializeBinaryToWriter)},proto.mediapipe.PacketManagerConfig.prototype.getPacketList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.PacketFactoryConfig,1)},proto.mediapipe.PacketManagerConfig.prototype.setPacketList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.PacketManagerConfig.prototype.addPacket=function(d,g){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.PacketFactoryConfig,g)},proto.mediapipe.PacketManagerConfig.prototype.clearPacketList=function(){return this.setPacketList([])},A.object.extend(u,proto.mediapipe)})(packet_factory_pb);var packet_generator_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.PacketGeneratorConfig",null,C),A.exportSymbol("proto.mediapipe.PacketGeneratorOptions",null,C),proto.mediapipe.PacketGeneratorOptions=function(d){n.Message.initialize(this,d,0,2,null,null)},A.inherits(proto.mediapipe.PacketGeneratorOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.PacketGeneratorOptions.displayName="proto.mediapipe.PacketGeneratorOptions"),proto.mediapipe.PacketGeneratorOptions.extensions={},proto.mediapipe.PacketGeneratorOptions.extensionsBinary={},proto.mediapipe.PacketGeneratorConfig=function(d){n.Message.initialize(this,d,0,500,proto.mediapipe.PacketGeneratorConfig.repeatedFields_,null)},A.inherits(proto.mediapipe.PacketGeneratorConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.PacketGeneratorConfig.displayName="proto.mediapipe.PacketGeneratorConfig"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketGeneratorOptions.prototype.toObject=function(d){return proto.mediapipe.PacketGeneratorOptions.toObject(d,this)},proto.mediapipe.PacketGeneratorOptions.toObject=function(d,g){var i={mergeFields:n.Message.getBooleanFieldWithDefault(g,1,!0)};return n.Message.toObjectExtension(g,i,proto.mediapipe.PacketGeneratorOptions.extensions,proto.mediapipe.PacketGeneratorOptions.prototype.getExtension,d),d&&(i.$jspbMessageInstance=g),i}),proto.mediapipe.PacketGeneratorOptions.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.PacketGeneratorOptions;return proto.mediapipe.PacketGeneratorOptions.deserializeBinaryFromReader(i,g)},proto.mediapipe.PacketGeneratorOptions.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)if(g.getFieldNumber()===1){var i=g.readBool();d.setMergeFields(i)}else n.Message.readBinaryExtension(d,g,proto.mediapipe.PacketGeneratorOptions.extensionsBinary,proto.mediapipe.PacketGeneratorOptions.prototype.getExtension,proto.mediapipe.PacketGeneratorOptions.prototype.setExtension);return d},proto.mediapipe.PacketGeneratorOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.PacketGeneratorOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.PacketGeneratorOptions.serializeBinaryToWriter=function(d,g){var i;(i=n.Message.getField(d,1))!=null&&g.writeBool(1,i),n.Message.serializeBinaryExtensions(d,g,proto.mediapipe.PacketGeneratorOptions.extensionsBinary,proto.mediapipe.PacketGeneratorOptions.prototype.getExtension)},proto.mediapipe.PacketGeneratorOptions.prototype.getMergeFields=function(){return n.Message.getBooleanFieldWithDefault(this,1,!0)},proto.mediapipe.PacketGeneratorOptions.prototype.setMergeFields=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.PacketGeneratorOptions.prototype.clearMergeFields=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.PacketGeneratorOptions.prototype.hasMergeFields=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.PacketGeneratorConfig.repeatedFields_=[2,1002,3,1003],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.PacketGeneratorConfig.prototype.toObject=function(d){return proto.mediapipe.PacketGeneratorConfig.toObject(d,this)},proto.mediapipe.PacketGeneratorConfig.toObject=function(d,g){var i,_={packetGenerator:(i=n.Message.getField(g,1))==null?void 0:i,inputSidePacketList:(i=n.Message.getRepeatedField(g,2))==null?void 0:i,externalInputList:(i=n.Message.getRepeatedField(g,1002))==null?void 0:i,outputSidePacketList:(i=n.Message.getRepeatedField(g,3))==null?void 0:i,externalOutputList:(i=n.Message.getRepeatedField(g,1003))==null?void 0:i,options:(i=g.getOptions())&&proto.mediapipe.PacketGeneratorOptions.toObject(d,i)};return d&&(_.$jspbMessageInstance=g),_}),proto.mediapipe.PacketGeneratorConfig.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.PacketGeneratorConfig;return proto.mediapipe.PacketGeneratorConfig.deserializeBinaryFromReader(i,g)},proto.mediapipe.PacketGeneratorConfig.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var i=g.readString();d.setPacketGenerator(i);break;case 2:i=g.readString(),d.addInputSidePacket(i);break;case 1002:i=g.readString(),d.addExternalInput(i);break;case 3:i=g.readString(),d.addOutputSidePacket(i);break;case 1003:i=g.readString(),d.addExternalOutput(i);break;case 4:i=new proto.mediapipe.PacketGeneratorOptions,g.readMessage(i,proto.mediapipe.PacketGeneratorOptions.deserializeBinaryFromReader),d.setOptions(i);break;default:g.skipField()}return d},proto.mediapipe.PacketGeneratorConfig.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.PacketGeneratorConfig.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.PacketGeneratorConfig.serializeBinaryToWriter=function(d,g){var i=void 0;(i=n.Message.getField(d,1))!=null&&g.writeString(1,i),(i=d.getInputSidePacketList()).length>0&&g.writeRepeatedString(2,i),(i=d.getExternalInputList()).length>0&&g.writeRepeatedString(1002,i),(i=d.getOutputSidePacketList()).length>0&&g.writeRepeatedString(3,i),(i=d.getExternalOutputList()).length>0&&g.writeRepeatedString(1003,i),(i=d.getOptions())!=null&&g.writeMessage(4,i,proto.mediapipe.PacketGeneratorOptions.serializeBinaryToWriter)},proto.mediapipe.PacketGeneratorConfig.prototype.getPacketGenerator=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.PacketGeneratorConfig.prototype.setPacketGenerator=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.PacketGeneratorConfig.prototype.clearPacketGenerator=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.PacketGeneratorConfig.prototype.hasPacketGenerator=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.PacketGeneratorConfig.prototype.getInputSidePacketList=function(){return n.Message.getRepeatedField(this,2)},proto.mediapipe.PacketGeneratorConfig.prototype.setInputSidePacketList=function(d){return n.Message.setField(this,2,d||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addInputSidePacket=function(d,g){return n.Message.addToRepeatedField(this,2,d,g)},proto.mediapipe.PacketGeneratorConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getExternalInputList=function(){return n.Message.getRepeatedField(this,1002)},proto.mediapipe.PacketGeneratorConfig.prototype.setExternalInputList=function(d){return n.Message.setField(this,1002,d||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addExternalInput=function(d,g){return n.Message.addToRepeatedField(this,1002,d,g)},proto.mediapipe.PacketGeneratorConfig.prototype.clearExternalInputList=function(){return this.setExternalInputList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getOutputSidePacketList=function(){return n.Message.getRepeatedField(this,3)},proto.mediapipe.PacketGeneratorConfig.prototype.setOutputSidePacketList=function(d){return n.Message.setField(this,3,d||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addOutputSidePacket=function(d,g){return n.Message.addToRepeatedField(this,3,d,g)},proto.mediapipe.PacketGeneratorConfig.prototype.clearOutputSidePacketList=function(){return this.setOutputSidePacketList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getExternalOutputList=function(){return n.Message.getRepeatedField(this,1003)},proto.mediapipe.PacketGeneratorConfig.prototype.setExternalOutputList=function(d){return n.Message.setField(this,1003,d||[])},proto.mediapipe.PacketGeneratorConfig.prototype.addExternalOutput=function(d,g){return n.Message.addToRepeatedField(this,1003,d,g)},proto.mediapipe.PacketGeneratorConfig.prototype.clearExternalOutputList=function(){return this.setExternalOutputList([])},proto.mediapipe.PacketGeneratorConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,proto.mediapipe.PacketGeneratorOptions,4)},proto.mediapipe.PacketGeneratorConfig.prototype.setOptions=function(d){return n.Message.setWrapperField(this,4,d)},proto.mediapipe.PacketGeneratorConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.PacketGeneratorConfig.prototype.hasOptions=function(){return n.Message.getField(this,4)!=null},A.object.extend(u,proto.mediapipe)})(packet_generator_pb);var status_handler_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=mediapipe_options_pb;A.object.extend(proto,d),A.exportSymbol("proto.mediapipe.StatusHandlerConfig",null,C),proto.mediapipe.StatusHandlerConfig=function(g){n.Message.initialize(this,g,0,500,proto.mediapipe.StatusHandlerConfig.repeatedFields_,null)},A.inherits(proto.mediapipe.StatusHandlerConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.StatusHandlerConfig.displayName="proto.mediapipe.StatusHandlerConfig"),proto.mediapipe.StatusHandlerConfig.repeatedFields_=[2,1002],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.StatusHandlerConfig.prototype.toObject=function(g){return proto.mediapipe.StatusHandlerConfig.toObject(g,this)},proto.mediapipe.StatusHandlerConfig.toObject=function(g,i){var _,j={statusHandler:(_=n.Message.getField(i,1))==null?void 0:_,inputSidePacketList:(_=n.Message.getRepeatedField(i,2))==null?void 0:_,externalInputList:(_=n.Message.getRepeatedField(i,1002))==null?void 0:_,options:(_=i.getOptions())&&d.MediaPipeOptions.toObject(g,_)};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.StatusHandlerConfig.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.StatusHandlerConfig;return proto.mediapipe.StatusHandlerConfig.deserializeBinaryFromReader(_,i)},proto.mediapipe.StatusHandlerConfig.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=i.readString();g.setStatusHandler(_);break;case 2:_=i.readString(),g.addInputSidePacket(_);break;case 1002:_=i.readString(),g.addExternalInput(_);break;case 3:_=new d.MediaPipeOptions,i.readMessage(_,d.MediaPipeOptions.deserializeBinaryFromReader),g.setOptions(_);break;default:i.skipField()}return g},proto.mediapipe.StatusHandlerConfig.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.StatusHandlerConfig.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.StatusHandlerConfig.serializeBinaryToWriter=function(g,i){var _=void 0;(_=n.Message.getField(g,1))!=null&&i.writeString(1,_),(_=g.getInputSidePacketList()).length>0&&i.writeRepeatedString(2,_),(_=g.getExternalInputList()).length>0&&i.writeRepeatedString(1002,_),(_=g.getOptions())!=null&&i.writeMessage(3,_,d.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.StatusHandlerConfig.prototype.getStatusHandler=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.StatusHandlerConfig.prototype.setStatusHandler=function(g){return n.Message.setField(this,1,g)},proto.mediapipe.StatusHandlerConfig.prototype.clearStatusHandler=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.StatusHandlerConfig.prototype.hasStatusHandler=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.StatusHandlerConfig.prototype.getInputSidePacketList=function(){return n.Message.getRepeatedField(this,2)},proto.mediapipe.StatusHandlerConfig.prototype.setInputSidePacketList=function(g){return n.Message.setField(this,2,g||[])},proto.mediapipe.StatusHandlerConfig.prototype.addInputSidePacket=function(g,i){return n.Message.addToRepeatedField(this,2,g,i)},proto.mediapipe.StatusHandlerConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.StatusHandlerConfig.prototype.getExternalInputList=function(){return n.Message.getRepeatedField(this,1002)},proto.mediapipe.StatusHandlerConfig.prototype.setExternalInputList=function(g){return n.Message.setField(this,1002,g||[])},proto.mediapipe.StatusHandlerConfig.prototype.addExternalInput=function(g,i){return n.Message.addToRepeatedField(this,1002,g,i)},proto.mediapipe.StatusHandlerConfig.prototype.clearExternalInputList=function(){return this.setExternalInputList([])},proto.mediapipe.StatusHandlerConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,d.MediaPipeOptions,3)},proto.mediapipe.StatusHandlerConfig.prototype.setOptions=function(g){return n.Message.setWrapperField(this,3,g)},proto.mediapipe.StatusHandlerConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.StatusHandlerConfig.prototype.hasOptions=function(){return n.Message.getField(this,3)!=null},A.object.extend(u,proto.mediapipe)})(status_handler_pb);var stream_handler_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=mediapipe_options_pb;A.object.extend(proto,d),A.exportSymbol("proto.mediapipe.InputStreamHandlerConfig",null,C),A.exportSymbol("proto.mediapipe.OutputStreamHandlerConfig",null,C),proto.mediapipe.InputStreamHandlerConfig=function(g){n.Message.initialize(this,g,0,-1,null,null)},A.inherits(proto.mediapipe.InputStreamHandlerConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InputStreamHandlerConfig.displayName="proto.mediapipe.InputStreamHandlerConfig"),proto.mediapipe.OutputStreamHandlerConfig=function(g){n.Message.initialize(this,g,0,-1,proto.mediapipe.OutputStreamHandlerConfig.repeatedFields_,null)},A.inherits(proto.mediapipe.OutputStreamHandlerConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.OutputStreamHandlerConfig.displayName="proto.mediapipe.OutputStreamHandlerConfig"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputStreamHandlerConfig.prototype.toObject=function(g){return proto.mediapipe.InputStreamHandlerConfig.toObject(g,this)},proto.mediapipe.InputStreamHandlerConfig.toObject=function(g,i){var _,j={inputStreamHandler:n.Message.getFieldWithDefault(i,1,"DefaultInputStreamHandler"),options:(_=i.getOptions())&&d.MediaPipeOptions.toObject(g,_)};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.InputStreamHandlerConfig.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.InputStreamHandlerConfig;return proto.mediapipe.InputStreamHandlerConfig.deserializeBinaryFromReader(_,i)},proto.mediapipe.InputStreamHandlerConfig.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=i.readString();g.setInputStreamHandler(_);break;case 3:_=new d.MediaPipeOptions,i.readMessage(_,d.MediaPipeOptions.deserializeBinaryFromReader),g.setOptions(_);break;default:i.skipField()}return g},proto.mediapipe.InputStreamHandlerConfig.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.InputStreamHandlerConfig.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.InputStreamHandlerConfig.serializeBinaryToWriter=function(g,i){var _=void 0;(_=n.Message.getField(g,1))!=null&&i.writeString(1,_),(_=g.getOptions())!=null&&i.writeMessage(3,_,d.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.InputStreamHandlerConfig.prototype.getInputStreamHandler=function(){return n.Message.getFieldWithDefault(this,1,"DefaultInputStreamHandler")},proto.mediapipe.InputStreamHandlerConfig.prototype.setInputStreamHandler=function(g){return n.Message.setField(this,1,g)},proto.mediapipe.InputStreamHandlerConfig.prototype.clearInputStreamHandler=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.InputStreamHandlerConfig.prototype.hasInputStreamHandler=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.InputStreamHandlerConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,d.MediaPipeOptions,3)},proto.mediapipe.InputStreamHandlerConfig.prototype.setOptions=function(g){return n.Message.setWrapperField(this,3,g)},proto.mediapipe.InputStreamHandlerConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.InputStreamHandlerConfig.prototype.hasOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.OutputStreamHandlerConfig.repeatedFields_=[2],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.OutputStreamHandlerConfig.prototype.toObject=function(g){return proto.mediapipe.OutputStreamHandlerConfig.toObject(g,this)},proto.mediapipe.OutputStreamHandlerConfig.toObject=function(g,i){var _,j={outputStreamHandler:n.Message.getFieldWithDefault(i,1,"InOrderOutputStreamHandler"),inputSidePacketList:(_=n.Message.getRepeatedField(i,2))==null?void 0:_,options:(_=i.getOptions())&&d.MediaPipeOptions.toObject(g,_)};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.OutputStreamHandlerConfig.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.OutputStreamHandlerConfig;return proto.mediapipe.OutputStreamHandlerConfig.deserializeBinaryFromReader(_,i)},proto.mediapipe.OutputStreamHandlerConfig.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=i.readString();g.setOutputStreamHandler(_);break;case 2:_=i.readString(),g.addInputSidePacket(_);break;case 3:_=new d.MediaPipeOptions,i.readMessage(_,d.MediaPipeOptions.deserializeBinaryFromReader),g.setOptions(_);break;default:i.skipField()}return g},proto.mediapipe.OutputStreamHandlerConfig.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.OutputStreamHandlerConfig.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.OutputStreamHandlerConfig.serializeBinaryToWriter=function(g,i){var _=void 0;(_=n.Message.getField(g,1))!=null&&i.writeString(1,_),(_=g.getInputSidePacketList()).length>0&&i.writeRepeatedString(2,_),(_=g.getOptions())!=null&&i.writeMessage(3,_,d.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.OutputStreamHandlerConfig.prototype.getOutputStreamHandler=function(){return n.Message.getFieldWithDefault(this,1,"InOrderOutputStreamHandler")},proto.mediapipe.OutputStreamHandlerConfig.prototype.setOutputStreamHandler=function(g){return n.Message.setField(this,1,g)},proto.mediapipe.OutputStreamHandlerConfig.prototype.clearOutputStreamHandler=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.OutputStreamHandlerConfig.prototype.hasOutputStreamHandler=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.OutputStreamHandlerConfig.prototype.getInputSidePacketList=function(){return n.Message.getRepeatedField(this,2)},proto.mediapipe.OutputStreamHandlerConfig.prototype.setInputSidePacketList=function(g){return n.Message.setField(this,2,g||[])},proto.mediapipe.OutputStreamHandlerConfig.prototype.addInputSidePacket=function(g,i){return n.Message.addToRepeatedField(this,2,g,i)},proto.mediapipe.OutputStreamHandlerConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.OutputStreamHandlerConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,d.MediaPipeOptions,3)},proto.mediapipe.OutputStreamHandlerConfig.prototype.setOptions=function(g){return n.Message.setWrapperField(this,3,g)},proto.mediapipe.OutputStreamHandlerConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.OutputStreamHandlerConfig.prototype.hasOptions=function(){return n.Message.getField(this,3)!=null},A.object.extend(u,proto.mediapipe)})(stream_handler_pb),function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_options_pb;A.object.extend(proto,d);var g=any_pb;A.object.extend(proto,g);var i=mediapipe_options_pb;A.object.extend(proto,i);var _=packet_factory_pb;A.object.extend(proto,_);var j=packet_generator_pb;A.object.extend(proto,j);var $=status_handler_pb;A.object.extend(proto,$);var re=stream_handler_pb;A.object.extend(proto,re),A.exportSymbol("proto.mediapipe.CalculatorGraphConfig",null,C),A.exportSymbol("proto.mediapipe.CalculatorGraphConfig.Node",null,C),A.exportSymbol("proto.mediapipe.ExecutorConfig",null,C),A.exportSymbol("proto.mediapipe.InputCollection",null,C),A.exportSymbol("proto.mediapipe.InputCollection.InputType",null,C),A.exportSymbol("proto.mediapipe.InputCollectionSet",null,C),A.exportSymbol("proto.mediapipe.InputStreamInfo",null,C),A.exportSymbol("proto.mediapipe.ProfilerConfig",null,C),proto.mediapipe.ExecutorConfig=function(Q){n.Message.initialize(this,Q,0,-1,null,null)},A.inherits(proto.mediapipe.ExecutorConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.ExecutorConfig.displayName="proto.mediapipe.ExecutorConfig"),proto.mediapipe.InputCollection=function(Q){n.Message.initialize(this,Q,0,500,proto.mediapipe.InputCollection.repeatedFields_,null)},A.inherits(proto.mediapipe.InputCollection,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InputCollection.displayName="proto.mediapipe.InputCollection"),proto.mediapipe.InputCollectionSet=function(Q){n.Message.initialize(this,Q,0,-1,proto.mediapipe.InputCollectionSet.repeatedFields_,null)},A.inherits(proto.mediapipe.InputCollectionSet,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InputCollectionSet.displayName="proto.mediapipe.InputCollectionSet"),proto.mediapipe.InputStreamInfo=function(Q){n.Message.initialize(this,Q,0,-1,null,null)},A.inherits(proto.mediapipe.InputStreamInfo,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InputStreamInfo.displayName="proto.mediapipe.InputStreamInfo"),proto.mediapipe.ProfilerConfig=function(Q){n.Message.initialize(this,Q,0,-1,proto.mediapipe.ProfilerConfig.repeatedFields_,null)},A.inherits(proto.mediapipe.ProfilerConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.ProfilerConfig.displayName="proto.mediapipe.ProfilerConfig"),proto.mediapipe.CalculatorGraphConfig=function(Q){n.Message.initialize(this,Q,0,500,proto.mediapipe.CalculatorGraphConfig.repeatedFields_,null)},A.inherits(proto.mediapipe.CalculatorGraphConfig,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.CalculatorGraphConfig.displayName="proto.mediapipe.CalculatorGraphConfig"),proto.mediapipe.CalculatorGraphConfig.Node=function(Q){n.Message.initialize(this,Q,0,500,proto.mediapipe.CalculatorGraphConfig.Node.repeatedFields_,null)},A.inherits(proto.mediapipe.CalculatorGraphConfig.Node,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.CalculatorGraphConfig.Node.displayName="proto.mediapipe.CalculatorGraphConfig.Node"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ExecutorConfig.prototype.toObject=function(Q){return proto.mediapipe.ExecutorConfig.toObject(Q,this)},proto.mediapipe.ExecutorConfig.toObject=function(Q,ae){var pe,st={name:n.Message.getFieldWithDefault(ae,1,""),type:n.Message.getFieldWithDefault(ae,2,""),options:(pe=ae.getOptions())&&i.MediaPipeOptions.toObject(Q,pe)};return Q&&(st.$jspbMessageInstance=ae),st}),proto.mediapipe.ExecutorConfig.deserializeBinary=function(Q){var ae=new n.BinaryReader(Q),pe=new proto.mediapipe.ExecutorConfig;return proto.mediapipe.ExecutorConfig.deserializeBinaryFromReader(pe,ae)},proto.mediapipe.ExecutorConfig.deserializeBinaryFromReader=function(Q,ae){for(;ae.nextField()&&!ae.isEndGroup();)switch(ae.getFieldNumber()){case 1:var pe=ae.readString();Q.setName(pe);break;case 2:pe=ae.readString(),Q.setType(pe);break;case 3:pe=new i.MediaPipeOptions,ae.readMessage(pe,i.MediaPipeOptions.deserializeBinaryFromReader),Q.setOptions(pe);break;default:ae.skipField()}return Q},proto.mediapipe.ExecutorConfig.prototype.serializeBinary=function(){var Q=new n.BinaryWriter;return proto.mediapipe.ExecutorConfig.serializeBinaryToWriter(this,Q),Q.getResultBuffer()},proto.mediapipe.ExecutorConfig.serializeBinaryToWriter=function(Q,ae){var pe=void 0;(pe=Q.getName()).length>0&&ae.writeString(1,pe),(pe=Q.getType()).length>0&&ae.writeString(2,pe),(pe=Q.getOptions())!=null&&ae.writeMessage(3,pe,i.MediaPipeOptions.serializeBinaryToWriter)},proto.mediapipe.ExecutorConfig.prototype.getName=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.ExecutorConfig.prototype.setName=function(Q){return n.Message.setProto3StringField(this,1,Q)},proto.mediapipe.ExecutorConfig.prototype.getType=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.ExecutorConfig.prototype.setType=function(Q){return n.Message.setProto3StringField(this,2,Q)},proto.mediapipe.ExecutorConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,i.MediaPipeOptions,3)},proto.mediapipe.ExecutorConfig.prototype.setOptions=function(Q){return n.Message.setWrapperField(this,3,Q)},proto.mediapipe.ExecutorConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.ExecutorConfig.prototype.hasOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.InputCollection.repeatedFields_=[2,1002],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputCollection.prototype.toObject=function(Q){return proto.mediapipe.InputCollection.toObject(Q,this)},proto.mediapipe.InputCollection.toObject=function(Q,ae){var pe,st={name:n.Message.getFieldWithDefault(ae,1,""),sidePacketNameList:(pe=n.Message.getRepeatedField(ae,2))==null?void 0:pe,externalInputNameList:(pe=n.Message.getRepeatedField(ae,1002))==null?void 0:pe,inputType:n.Message.getFieldWithDefault(ae,3,0),fileName:n.Message.getFieldWithDefault(ae,4,"")};return Q&&(st.$jspbMessageInstance=ae),st}),proto.mediapipe.InputCollection.deserializeBinary=function(Q){var ae=new n.BinaryReader(Q),pe=new proto.mediapipe.InputCollection;return proto.mediapipe.InputCollection.deserializeBinaryFromReader(pe,ae)},proto.mediapipe.InputCollection.deserializeBinaryFromReader=function(Q,ae){for(;ae.nextField()&&!ae.isEndGroup();)switch(ae.getFieldNumber()){case 1:var pe=ae.readString();Q.setName(pe);break;case 2:pe=ae.readString(),Q.addSidePacketName(pe);break;case 1002:pe=ae.readString(),Q.addExternalInputName(pe);break;case 3:pe=ae.readEnum(),Q.setInputType(pe);break;case 4:pe=ae.readString(),Q.setFileName(pe);break;default:ae.skipField()}return Q},proto.mediapipe.InputCollection.prototype.serializeBinary=function(){var Q=new n.BinaryWriter;return proto.mediapipe.InputCollection.serializeBinaryToWriter(this,Q),Q.getResultBuffer()},proto.mediapipe.InputCollection.serializeBinaryToWriter=function(Q,ae){var pe=void 0;(pe=Q.getName()).length>0&&ae.writeString(1,pe),(pe=Q.getSidePacketNameList()).length>0&&ae.writeRepeatedString(2,pe),(pe=Q.getExternalInputNameList()).length>0&&ae.writeRepeatedString(1002,pe),(pe=Q.getInputType())!==0&&ae.writeEnum(3,pe),(pe=Q.getFileName()).length>0&&ae.writeString(4,pe)},proto.mediapipe.InputCollection.InputType={UNKNOWN:0,RECORDIO:1,FOREIGN_RECORDIO:2,FOREIGN_CSV_TEXT:3,INVALID_UPPER_BOUND:4},proto.mediapipe.InputCollection.prototype.getName=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InputCollection.prototype.setName=function(Q){return n.Message.setProto3StringField(this,1,Q)},proto.mediapipe.InputCollection.prototype.getSidePacketNameList=function(){return n.Message.getRepeatedField(this,2)},proto.mediapipe.InputCollection.prototype.setSidePacketNameList=function(Q){return n.Message.setField(this,2,Q||[])},proto.mediapipe.InputCollection.prototype.addSidePacketName=function(Q,ae){return n.Message.addToRepeatedField(this,2,Q,ae)},proto.mediapipe.InputCollection.prototype.clearSidePacketNameList=function(){return this.setSidePacketNameList([])},proto.mediapipe.InputCollection.prototype.getExternalInputNameList=function(){return n.Message.getRepeatedField(this,1002)},proto.mediapipe.InputCollection.prototype.setExternalInputNameList=function(Q){return n.Message.setField(this,1002,Q||[])},proto.mediapipe.InputCollection.prototype.addExternalInputName=function(Q,ae){return n.Message.addToRepeatedField(this,1002,Q,ae)},proto.mediapipe.InputCollection.prototype.clearExternalInputNameList=function(){return this.setExternalInputNameList([])},proto.mediapipe.InputCollection.prototype.getInputType=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.InputCollection.prototype.setInputType=function(Q){return n.Message.setProto3EnumField(this,3,Q)},proto.mediapipe.InputCollection.prototype.getFileName=function(){return n.Message.getFieldWithDefault(this,4,"")},proto.mediapipe.InputCollection.prototype.setFileName=function(Q){return n.Message.setProto3StringField(this,4,Q)},proto.mediapipe.InputCollectionSet.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputCollectionSet.prototype.toObject=function(Q){return proto.mediapipe.InputCollectionSet.toObject(Q,this)},proto.mediapipe.InputCollectionSet.toObject=function(Q,ae){var pe={inputCollectionList:n.Message.toObjectList(ae.getInputCollectionList(),proto.mediapipe.InputCollection.toObject,Q)};return Q&&(pe.$jspbMessageInstance=ae),pe}),proto.mediapipe.InputCollectionSet.deserializeBinary=function(Q){var ae=new n.BinaryReader(Q),pe=new proto.mediapipe.InputCollectionSet;return proto.mediapipe.InputCollectionSet.deserializeBinaryFromReader(pe,ae)},proto.mediapipe.InputCollectionSet.deserializeBinaryFromReader=function(Q,ae){for(;ae.nextField()&&!ae.isEndGroup();)if(ae.getFieldNumber()===1){var pe=new proto.mediapipe.InputCollection;ae.readMessage(pe,proto.mediapipe.InputCollection.deserializeBinaryFromReader),Q.addInputCollection(pe)}else ae.skipField();return Q},proto.mediapipe.InputCollectionSet.prototype.serializeBinary=function(){var Q=new n.BinaryWriter;return proto.mediapipe.InputCollectionSet.serializeBinaryToWriter(this,Q),Q.getResultBuffer()},proto.mediapipe.InputCollectionSet.serializeBinaryToWriter=function(Q,ae){var pe;(pe=Q.getInputCollectionList()).length>0&&ae.writeRepeatedMessage(1,pe,proto.mediapipe.InputCollection.serializeBinaryToWriter)},proto.mediapipe.InputCollectionSet.prototype.getInputCollectionList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.InputCollection,1)},proto.mediapipe.InputCollectionSet.prototype.setInputCollectionList=function(Q){return n.Message.setRepeatedWrapperField(this,1,Q)},proto.mediapipe.InputCollectionSet.prototype.addInputCollection=function(Q,ae){return n.Message.addToRepeatedWrapperField(this,1,Q,proto.mediapipe.InputCollection,ae)},proto.mediapipe.InputCollectionSet.prototype.clearInputCollectionList=function(){return this.setInputCollectionList([])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InputStreamInfo.prototype.toObject=function(Q){return proto.mediapipe.InputStreamInfo.toObject(Q,this)},proto.mediapipe.InputStreamInfo.toObject=function(Q,ae){var pe={tagIndex:n.Message.getFieldWithDefault(ae,1,""),backEdge:n.Message.getBooleanFieldWithDefault(ae,2,!1)};return Q&&(pe.$jspbMessageInstance=ae),pe}),proto.mediapipe.InputStreamInfo.deserializeBinary=function(Q){var ae=new n.BinaryReader(Q),pe=new proto.mediapipe.InputStreamInfo;return proto.mediapipe.InputStreamInfo.deserializeBinaryFromReader(pe,ae)},proto.mediapipe.InputStreamInfo.deserializeBinaryFromReader=function(Q,ae){for(;ae.nextField()&&!ae.isEndGroup();)switch(ae.getFieldNumber()){case 1:var pe=ae.readString();Q.setTagIndex(pe);break;case 2:pe=ae.readBool(),Q.setBackEdge(pe);break;default:ae.skipField()}return Q},proto.mediapipe.InputStreamInfo.prototype.serializeBinary=function(){var Q=new n.BinaryWriter;return proto.mediapipe.InputStreamInfo.serializeBinaryToWriter(this,Q),Q.getResultBuffer()},proto.mediapipe.InputStreamInfo.serializeBinaryToWriter=function(Q,ae){var pe=void 0;(pe=Q.getTagIndex()).length>0&&ae.writeString(1,pe),(pe=Q.getBackEdge())&&ae.writeBool(2,pe)},proto.mediapipe.InputStreamInfo.prototype.getTagIndex=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InputStreamInfo.prototype.setTagIndex=function(Q){return n.Message.setProto3StringField(this,1,Q)},proto.mediapipe.InputStreamInfo.prototype.getBackEdge=function(){return n.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.InputStreamInfo.prototype.setBackEdge=function(Q){return n.Message.setProto3BooleanField(this,2,Q)},proto.mediapipe.ProfilerConfig.repeatedFields_=[8],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ProfilerConfig.prototype.toObject=function(Q){return proto.mediapipe.ProfilerConfig.toObject(Q,this)},proto.mediapipe.ProfilerConfig.toObject=function(Q,ae){var pe,st={histogramIntervalSizeUsec:n.Message.getFieldWithDefault(ae,1,0),numHistogramIntervals:n.Message.getFieldWithDefault(ae,2,0),enableInputOutputLatency:n.Message.getBooleanFieldWithDefault(ae,3,!1),enableProfiler:n.Message.getBooleanFieldWithDefault(ae,4,!1),enableStreamLatency:n.Message.getBooleanFieldWithDefault(ae,5,!1),usePacketTimestampForAddedPacket:n.Message.getBooleanFieldWithDefault(ae,6,!1),traceLogCapacity:n.Message.getFieldWithDefault(ae,7,0),traceEventTypesDisabledList:(pe=n.Message.getRepeatedField(ae,8))==null?void 0:pe,traceLogPath:n.Message.getFieldWithDefault(ae,9,""),traceLogCount:n.Message.getFieldWithDefault(ae,10,0),traceLogIntervalUsec:n.Message.getFieldWithDefault(ae,11,0),traceLogMarginUsec:n.Message.getFieldWithDefault(ae,12,0),traceLogDurationEvents:n.Message.getBooleanFieldWithDefault(ae,13,!1),traceLogIntervalCount:n.Message.getFieldWithDefault(ae,14,0),traceLogDisabled:n.Message.getBooleanFieldWithDefault(ae,15,!1),traceEnabled:n.Message.getBooleanFieldWithDefault(ae,16,!1),traceLogInstantEvents:n.Message.getBooleanFieldWithDefault(ae,17,!1),calculatorFilter:n.Message.getFieldWithDefault(ae,18,"")};return Q&&(st.$jspbMessageInstance=ae),st}),proto.mediapipe.ProfilerConfig.deserializeBinary=function(Q){var ae=new n.BinaryReader(Q),pe=new proto.mediapipe.ProfilerConfig;return proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader(pe,ae)},proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader=function(Q,ae){for(;ae.nextField()&&!ae.isEndGroup();)switch(ae.getFieldNumber()){case 1:var pe=ae.readInt64();Q.setHistogramIntervalSizeUsec(pe);break;case 2:pe=ae.readInt64(),Q.setNumHistogramIntervals(pe);break;case 3:pe=ae.readBool(),Q.setEnableInputOutputLatency(pe);break;case 4:pe=ae.readBool(),Q.setEnableProfiler(pe);break;case 5:pe=ae.readBool(),Q.setEnableStreamLatency(pe);break;case 6:pe=ae.readBool(),Q.setUsePacketTimestampForAddedPacket(pe);break;case 7:pe=ae.readInt64(),Q.setTraceLogCapacity(pe);break;case 8:for(var st=ae.isDelimited()?ae.readPackedInt32():[ae.readInt32()],Pe=0;Pe<st.length;Pe++)Q.addTraceEventTypesDisabled(st[Pe]);break;case 9:pe=ae.readString(),Q.setTraceLogPath(pe);break;case 10:pe=ae.readInt32(),Q.setTraceLogCount(pe);break;case 11:pe=ae.readInt64(),Q.setTraceLogIntervalUsec(pe);break;case 12:pe=ae.readInt64(),Q.setTraceLogMarginUsec(pe);break;case 13:pe=ae.readBool(),Q.setTraceLogDurationEvents(pe);break;case 14:pe=ae.readInt32(),Q.setTraceLogIntervalCount(pe);break;case 15:pe=ae.readBool(),Q.setTraceLogDisabled(pe);break;case 16:pe=ae.readBool(),Q.setTraceEnabled(pe);break;case 17:pe=ae.readBool(),Q.setTraceLogInstantEvents(pe);break;case 18:pe=ae.readString(),Q.setCalculatorFilter(pe);break;default:ae.skipField()}return Q},proto.mediapipe.ProfilerConfig.prototype.serializeBinary=function(){var Q=new n.BinaryWriter;return proto.mediapipe.ProfilerConfig.serializeBinaryToWriter(this,Q),Q.getResultBuffer()},proto.mediapipe.ProfilerConfig.serializeBinaryToWriter=function(Q,ae){var pe=void 0;(pe=Q.getHistogramIntervalSizeUsec())!==0&&ae.writeInt64(1,pe),(pe=Q.getNumHistogramIntervals())!==0&&ae.writeInt64(2,pe),(pe=Q.getEnableInputOutputLatency())&&ae.writeBool(3,pe),(pe=Q.getEnableProfiler())&&ae.writeBool(4,pe),(pe=Q.getEnableStreamLatency())&&ae.writeBool(5,pe),(pe=Q.getUsePacketTimestampForAddedPacket())&&ae.writeBool(6,pe),(pe=Q.getTraceLogCapacity())!==0&&ae.writeInt64(7,pe),(pe=Q.getTraceEventTypesDisabledList()).length>0&&ae.writePackedInt32(8,pe),(pe=Q.getTraceLogPath()).length>0&&ae.writeString(9,pe),(pe=Q.getTraceLogCount())!==0&&ae.writeInt32(10,pe),(pe=Q.getTraceLogIntervalUsec())!==0&&ae.writeInt64(11,pe),(pe=Q.getTraceLogMarginUsec())!==0&&ae.writeInt64(12,pe),(pe=Q.getTraceLogDurationEvents())&&ae.writeBool(13,pe),(pe=Q.getTraceLogIntervalCount())!==0&&ae.writeInt32(14,pe),(pe=Q.getTraceLogDisabled())&&ae.writeBool(15,pe),(pe=Q.getTraceEnabled())&&ae.writeBool(16,pe),(pe=Q.getTraceLogInstantEvents())&&ae.writeBool(17,pe),(pe=Q.getCalculatorFilter()).length>0&&ae.writeString(18,pe)},proto.mediapipe.ProfilerConfig.prototype.getHistogramIntervalSizeUsec=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.ProfilerConfig.prototype.setHistogramIntervalSizeUsec=function(Q){return n.Message.setProto3IntField(this,1,Q)},proto.mediapipe.ProfilerConfig.prototype.getNumHistogramIntervals=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.ProfilerConfig.prototype.setNumHistogramIntervals=function(Q){return n.Message.setProto3IntField(this,2,Q)},proto.mediapipe.ProfilerConfig.prototype.getEnableInputOutputLatency=function(){return n.Message.getBooleanFieldWithDefault(this,3,!1)},proto.mediapipe.ProfilerConfig.prototype.setEnableInputOutputLatency=function(Q){return n.Message.setProto3BooleanField(this,3,Q)},proto.mediapipe.ProfilerConfig.prototype.getEnableProfiler=function(){return n.Message.getBooleanFieldWithDefault(this,4,!1)},proto.mediapipe.ProfilerConfig.prototype.setEnableProfiler=function(Q){return n.Message.setProto3BooleanField(this,4,Q)},proto.mediapipe.ProfilerConfig.prototype.getEnableStreamLatency=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.ProfilerConfig.prototype.setEnableStreamLatency=function(Q){return n.Message.setProto3BooleanField(this,5,Q)},proto.mediapipe.ProfilerConfig.prototype.getUsePacketTimestampForAddedPacket=function(){return n.Message.getBooleanFieldWithDefault(this,6,!1)},proto.mediapipe.ProfilerConfig.prototype.setUsePacketTimestampForAddedPacket=function(Q){return n.Message.setProto3BooleanField(this,6,Q)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogCapacity=function(){return n.Message.getFieldWithDefault(this,7,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogCapacity=function(Q){return n.Message.setProto3IntField(this,7,Q)},proto.mediapipe.ProfilerConfig.prototype.getTraceEventTypesDisabledList=function(){return n.Message.getRepeatedField(this,8)},proto.mediapipe.ProfilerConfig.prototype.setTraceEventTypesDisabledList=function(Q){return n.Message.setField(this,8,Q||[])},proto.mediapipe.ProfilerConfig.prototype.addTraceEventTypesDisabled=function(Q,ae){return n.Message.addToRepeatedField(this,8,Q,ae)},proto.mediapipe.ProfilerConfig.prototype.clearTraceEventTypesDisabledList=function(){return this.setTraceEventTypesDisabledList([])},proto.mediapipe.ProfilerConfig.prototype.getTraceLogPath=function(){return n.Message.getFieldWithDefault(this,9,"")},proto.mediapipe.ProfilerConfig.prototype.setTraceLogPath=function(Q){return n.Message.setProto3StringField(this,9,Q)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogCount=function(){return n.Message.getFieldWithDefault(this,10,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogCount=function(Q){return n.Message.setProto3IntField(this,10,Q)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogIntervalUsec=function(){return n.Message.getFieldWithDefault(this,11,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogIntervalUsec=function(Q){return n.Message.setProto3IntField(this,11,Q)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogMarginUsec=function(){return n.Message.getFieldWithDefault(this,12,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogMarginUsec=function(Q){return n.Message.setProto3IntField(this,12,Q)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogDurationEvents=function(){return n.Message.getBooleanFieldWithDefault(this,13,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogDurationEvents=function(Q){return n.Message.setProto3BooleanField(this,13,Q)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogIntervalCount=function(){return n.Message.getFieldWithDefault(this,14,0)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogIntervalCount=function(Q){return n.Message.setProto3IntField(this,14,Q)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogDisabled=function(){return n.Message.getBooleanFieldWithDefault(this,15,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogDisabled=function(Q){return n.Message.setProto3BooleanField(this,15,Q)},proto.mediapipe.ProfilerConfig.prototype.getTraceEnabled=function(){return n.Message.getBooleanFieldWithDefault(this,16,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceEnabled=function(Q){return n.Message.setProto3BooleanField(this,16,Q)},proto.mediapipe.ProfilerConfig.prototype.getTraceLogInstantEvents=function(){return n.Message.getBooleanFieldWithDefault(this,17,!1)},proto.mediapipe.ProfilerConfig.prototype.setTraceLogInstantEvents=function(Q){return n.Message.setProto3BooleanField(this,17,Q)},proto.mediapipe.ProfilerConfig.prototype.getCalculatorFilter=function(){return n.Message.getFieldWithDefault(this,18,"")},proto.mediapipe.ProfilerConfig.prototype.setCalculatorFilter=function(Q){return n.Message.setProto3StringField(this,18,Q)},proto.mediapipe.CalculatorGraphConfig.repeatedFields_=[1,6,7,9,10,15,16,17,14,1002],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.CalculatorGraphConfig.prototype.toObject=function(Q){return proto.mediapipe.CalculatorGraphConfig.toObject(Q,this)},proto.mediapipe.CalculatorGraphConfig.toObject=function(Q,ae){var pe,st={nodeList:n.Message.toObjectList(ae.getNodeList(),proto.mediapipe.CalculatorGraphConfig.Node.toObject,Q),packetFactoryList:n.Message.toObjectList(ae.getPacketFactoryList(),_.PacketFactoryConfig.toObject,Q),packetGeneratorList:n.Message.toObjectList(ae.getPacketGeneratorList(),j.PacketGeneratorConfig.toObject,Q),numThreads:n.Message.getFieldWithDefault(ae,8,0),statusHandlerList:n.Message.toObjectList(ae.getStatusHandlerList(),$.StatusHandlerConfig.toObject,Q),inputStreamList:(pe=n.Message.getRepeatedField(ae,10))==null?void 0:pe,outputStreamList:(pe=n.Message.getRepeatedField(ae,15))==null?void 0:pe,inputSidePacketList:(pe=n.Message.getRepeatedField(ae,16))==null?void 0:pe,outputSidePacketList:(pe=n.Message.getRepeatedField(ae,17))==null?void 0:pe,maxQueueSize:n.Message.getFieldWithDefault(ae,11,0),reportDeadlock:n.Message.getBooleanFieldWithDefault(ae,21,!1),inputStreamHandler:(pe=ae.getInputStreamHandler())&&re.InputStreamHandlerConfig.toObject(Q,pe),outputStreamHandler:(pe=ae.getOutputStreamHandler())&&re.OutputStreamHandlerConfig.toObject(Q,pe),executorList:n.Message.toObjectList(ae.getExecutorList(),proto.mediapipe.ExecutorConfig.toObject,Q),profilerConfig:(pe=ae.getProfilerConfig())&&proto.mediapipe.ProfilerConfig.toObject(Q,pe),pb_package:n.Message.getFieldWithDefault(ae,19,""),type:n.Message.getFieldWithDefault(ae,20,""),options:(pe=ae.getOptions())&&i.MediaPipeOptions.toObject(Q,pe),graphOptionsList:n.Message.toObjectList(ae.getGraphOptionsList(),g.Any.toObject,Q)};return Q&&(st.$jspbMessageInstance=ae),st}),proto.mediapipe.CalculatorGraphConfig.deserializeBinary=function(Q){var ae=new n.BinaryReader(Q),pe=new proto.mediapipe.CalculatorGraphConfig;return proto.mediapipe.CalculatorGraphConfig.deserializeBinaryFromReader(pe,ae)},proto.mediapipe.CalculatorGraphConfig.deserializeBinaryFromReader=function(Q,ae){for(;ae.nextField()&&!ae.isEndGroup();)switch(ae.getFieldNumber()){case 1:var pe=new proto.mediapipe.CalculatorGraphConfig.Node;ae.readMessage(pe,proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinaryFromReader),Q.addNode(pe);break;case 6:pe=new _.PacketFactoryConfig,ae.readMessage(pe,_.PacketFactoryConfig.deserializeBinaryFromReader),Q.addPacketFactory(pe);break;case 7:pe=new j.PacketGeneratorConfig,ae.readMessage(pe,j.PacketGeneratorConfig.deserializeBinaryFromReader),Q.addPacketGenerator(pe);break;case 8:pe=ae.readInt32(),Q.setNumThreads(pe);break;case 9:pe=new $.StatusHandlerConfig,ae.readMessage(pe,$.StatusHandlerConfig.deserializeBinaryFromReader),Q.addStatusHandler(pe);break;case 10:pe=ae.readString(),Q.addInputStream(pe);break;case 15:pe=ae.readString(),Q.addOutputStream(pe);break;case 16:pe=ae.readString(),Q.addInputSidePacket(pe);break;case 17:pe=ae.readString(),Q.addOutputSidePacket(pe);break;case 11:pe=ae.readInt32(),Q.setMaxQueueSize(pe);break;case 21:pe=ae.readBool(),Q.setReportDeadlock(pe);break;case 12:pe=new re.InputStreamHandlerConfig,ae.readMessage(pe,re.InputStreamHandlerConfig.deserializeBinaryFromReader),Q.setInputStreamHandler(pe);break;case 13:pe=new re.OutputStreamHandlerConfig,ae.readMessage(pe,re.OutputStreamHandlerConfig.deserializeBinaryFromReader),Q.setOutputStreamHandler(pe);break;case 14:pe=new proto.mediapipe.ExecutorConfig,ae.readMessage(pe,proto.mediapipe.ExecutorConfig.deserializeBinaryFromReader),Q.addExecutor(pe);break;case 18:pe=new proto.mediapipe.ProfilerConfig,ae.readMessage(pe,proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader),Q.setProfilerConfig(pe);break;case 19:pe=ae.readString(),Q.setPackage(pe);break;case 20:pe=ae.readString(),Q.setType(pe);break;case 1001:pe=new i.MediaPipeOptions,ae.readMessage(pe,i.MediaPipeOptions.deserializeBinaryFromReader),Q.setOptions(pe);break;case 1002:pe=new g.Any,ae.readMessage(pe,g.Any.deserializeBinaryFromReader),Q.addGraphOptions(pe);break;default:ae.skipField()}return Q},proto.mediapipe.CalculatorGraphConfig.prototype.serializeBinary=function(){var Q=new n.BinaryWriter;return proto.mediapipe.CalculatorGraphConfig.serializeBinaryToWriter(this,Q),Q.getResultBuffer()},proto.mediapipe.CalculatorGraphConfig.serializeBinaryToWriter=function(Q,ae){var pe=void 0;(pe=Q.getNodeList()).length>0&&ae.writeRepeatedMessage(1,pe,proto.mediapipe.CalculatorGraphConfig.Node.serializeBinaryToWriter),(pe=Q.getPacketFactoryList()).length>0&&ae.writeRepeatedMessage(6,pe,_.PacketFactoryConfig.serializeBinaryToWriter),(pe=Q.getPacketGeneratorList()).length>0&&ae.writeRepeatedMessage(7,pe,j.PacketGeneratorConfig.serializeBinaryToWriter),(pe=Q.getNumThreads())!==0&&ae.writeInt32(8,pe),(pe=Q.getStatusHandlerList()).length>0&&ae.writeRepeatedMessage(9,pe,$.StatusHandlerConfig.serializeBinaryToWriter),(pe=Q.getInputStreamList()).length>0&&ae.writeRepeatedString(10,pe),(pe=Q.getOutputStreamList()).length>0&&ae.writeRepeatedString(15,pe),(pe=Q.getInputSidePacketList()).length>0&&ae.writeRepeatedString(16,pe),(pe=Q.getOutputSidePacketList()).length>0&&ae.writeRepeatedString(17,pe),(pe=Q.getMaxQueueSize())!==0&&ae.writeInt32(11,pe),(pe=Q.getReportDeadlock())&&ae.writeBool(21,pe),(pe=Q.getInputStreamHandler())!=null&&ae.writeMessage(12,pe,re.InputStreamHandlerConfig.serializeBinaryToWriter),(pe=Q.getOutputStreamHandler())!=null&&ae.writeMessage(13,pe,re.OutputStreamHandlerConfig.serializeBinaryToWriter),(pe=Q.getExecutorList()).length>0&&ae.writeRepeatedMessage(14,pe,proto.mediapipe.ExecutorConfig.serializeBinaryToWriter),(pe=Q.getProfilerConfig())!=null&&ae.writeMessage(18,pe,proto.mediapipe.ProfilerConfig.serializeBinaryToWriter),(pe=Q.getPackage()).length>0&&ae.writeString(19,pe),(pe=Q.getType()).length>0&&ae.writeString(20,pe),(pe=Q.getOptions())!=null&&ae.writeMessage(1001,pe,i.MediaPipeOptions.serializeBinaryToWriter),(pe=Q.getGraphOptionsList()).length>0&&ae.writeRepeatedMessage(1002,pe,g.Any.serializeBinaryToWriter)},proto.mediapipe.CalculatorGraphConfig.Node.repeatedFields_=[3,4,5,6,8,13,17,1005],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.CalculatorGraphConfig.Node.prototype.toObject=function(Q){return proto.mediapipe.CalculatorGraphConfig.Node.toObject(Q,this)},proto.mediapipe.CalculatorGraphConfig.Node.toObject=function(Q,ae){var pe,st={name:n.Message.getFieldWithDefault(ae,1,""),calculator:n.Message.getFieldWithDefault(ae,2,""),inputStreamList:(pe=n.Message.getRepeatedField(ae,3))==null?void 0:pe,outputStreamList:(pe=n.Message.getRepeatedField(ae,4))==null?void 0:pe,inputSidePacketList:(pe=n.Message.getRepeatedField(ae,5))==null?void 0:pe,outputSidePacketList:(pe=n.Message.getRepeatedField(ae,6))==null?void 0:pe,options:(pe=ae.getOptions())&&d.CalculatorOptions.toObject(Q,pe),nodeOptionsList:n.Message.toObjectList(ae.getNodeOptionsList(),g.Any.toObject,Q),sourceLayer:n.Message.getFieldWithDefault(ae,9,0),bufferSizeHint:n.Message.getFieldWithDefault(ae,10,0),inputStreamHandler:(pe=ae.getInputStreamHandler())&&re.InputStreamHandlerConfig.toObject(Q,pe),outputStreamHandler:(pe=ae.getOutputStreamHandler())&&re.OutputStreamHandlerConfig.toObject(Q,pe),inputStreamInfoList:n.Message.toObjectList(ae.getInputStreamInfoList(),proto.mediapipe.InputStreamInfo.toObject,Q),executor:n.Message.getFieldWithDefault(ae,14,""),profilerConfig:(pe=ae.getProfilerConfig())&&proto.mediapipe.ProfilerConfig.toObject(Q,pe),maxInFlight:n.Message.getFieldWithDefault(ae,16,0),optionValueList:(pe=n.Message.getRepeatedField(ae,17))==null?void 0:pe,externalInputList:(pe=n.Message.getRepeatedField(ae,1005))==null?void 0:pe};return Q&&(st.$jspbMessageInstance=ae),st}),proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinary=function(Q){var ae=new n.BinaryReader(Q),pe=new proto.mediapipe.CalculatorGraphConfig.Node;return proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinaryFromReader(pe,ae)},proto.mediapipe.CalculatorGraphConfig.Node.deserializeBinaryFromReader=function(Q,ae){for(;ae.nextField()&&!ae.isEndGroup();)switch(ae.getFieldNumber()){case 1:var pe=ae.readString();Q.setName(pe);break;case 2:pe=ae.readString(),Q.setCalculator(pe);break;case 3:pe=ae.readString(),Q.addInputStream(pe);break;case 4:pe=ae.readString(),Q.addOutputStream(pe);break;case 5:pe=ae.readString(),Q.addInputSidePacket(pe);break;case 6:pe=ae.readString(),Q.addOutputSidePacket(pe);break;case 7:pe=new d.CalculatorOptions,ae.readMessage(pe,d.CalculatorOptions.deserializeBinaryFromReader),Q.setOptions(pe);break;case 8:pe=new g.Any,ae.readMessage(pe,g.Any.deserializeBinaryFromReader),Q.addNodeOptions(pe);break;case 9:pe=ae.readInt32(),Q.setSourceLayer(pe);break;case 10:pe=ae.readInt32(),Q.setBufferSizeHint(pe);break;case 11:pe=new re.InputStreamHandlerConfig,ae.readMessage(pe,re.InputStreamHandlerConfig.deserializeBinaryFromReader),Q.setInputStreamHandler(pe);break;case 12:pe=new re.OutputStreamHandlerConfig,ae.readMessage(pe,re.OutputStreamHandlerConfig.deserializeBinaryFromReader),Q.setOutputStreamHandler(pe);break;case 13:pe=new proto.mediapipe.InputStreamInfo,ae.readMessage(pe,proto.mediapipe.InputStreamInfo.deserializeBinaryFromReader),Q.addInputStreamInfo(pe);break;case 14:pe=ae.readString(),Q.setExecutor(pe);break;case 15:pe=new proto.mediapipe.ProfilerConfig,ae.readMessage(pe,proto.mediapipe.ProfilerConfig.deserializeBinaryFromReader),Q.setProfilerConfig(pe);break;case 16:pe=ae.readInt32(),Q.setMaxInFlight(pe);break;case 17:pe=ae.readString(),Q.addOptionValue(pe);break;case 1005:pe=ae.readString(),Q.addExternalInput(pe);break;default:ae.skipField()}return Q},proto.mediapipe.CalculatorGraphConfig.Node.prototype.serializeBinary=function(){var Q=new n.BinaryWriter;return proto.mediapipe.CalculatorGraphConfig.Node.serializeBinaryToWriter(this,Q),Q.getResultBuffer()},proto.mediapipe.CalculatorGraphConfig.Node.serializeBinaryToWriter=function(Q,ae){var pe=void 0;(pe=Q.getName()).length>0&&ae.writeString(1,pe),(pe=Q.getCalculator()).length>0&&ae.writeString(2,pe),(pe=Q.getInputStreamList()).length>0&&ae.writeRepeatedString(3,pe),(pe=Q.getOutputStreamList()).length>0&&ae.writeRepeatedString(4,pe),(pe=Q.getInputSidePacketList()).length>0&&ae.writeRepeatedString(5,pe),(pe=Q.getOutputSidePacketList()).length>0&&ae.writeRepeatedString(6,pe),(pe=Q.getOptions())!=null&&ae.writeMessage(7,pe,d.CalculatorOptions.serializeBinaryToWriter),(pe=Q.getNodeOptionsList()).length>0&&ae.writeRepeatedMessage(8,pe,g.Any.serializeBinaryToWriter),(pe=Q.getSourceLayer())!==0&&ae.writeInt32(9,pe),(pe=Q.getBufferSizeHint())!==0&&ae.writeInt32(10,pe),(pe=Q.getInputStreamHandler())!=null&&ae.writeMessage(11,pe,re.InputStreamHandlerConfig.serializeBinaryToWriter),(pe=Q.getOutputStreamHandler())!=null&&ae.writeMessage(12,pe,re.OutputStreamHandlerConfig.serializeBinaryToWriter),(pe=Q.getInputStreamInfoList()).length>0&&ae.writeRepeatedMessage(13,pe,proto.mediapipe.InputStreamInfo.serializeBinaryToWriter),(pe=Q.getExecutor()).length>0&&ae.writeString(14,pe),(pe=Q.getProfilerConfig())!=null&&ae.writeMessage(15,pe,proto.mediapipe.ProfilerConfig.serializeBinaryToWriter),(pe=Q.getMaxInFlight())!==0&&ae.writeInt32(16,pe),(pe=Q.getOptionValueList()).length>0&&ae.writeRepeatedString(17,pe),(pe=Q.getExternalInputList()).length>0&&ae.writeRepeatedString(1005,pe)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getName=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setName=function(Q){return n.Message.setProto3StringField(this,1,Q)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getCalculator=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setCalculator=function(Q){return n.Message.setProto3StringField(this,2,Q)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputStreamList=function(){return n.Message.getRepeatedField(this,3)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputStreamList=function(Q){return n.Message.setField(this,3,Q||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addInputStream=function(Q,ae){return n.Message.addToRepeatedField(this,3,Q,ae)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputStreamList=function(){return this.setInputStreamList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOutputStreamList=function(){return n.Message.getRepeatedField(this,4)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOutputStreamList=function(Q){return n.Message.setField(this,4,Q||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addOutputStream=function(Q,ae){return n.Message.addToRepeatedField(this,4,Q,ae)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOutputStreamList=function(){return this.setOutputStreamList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputSidePacketList=function(){return n.Message.getRepeatedField(this,5)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputSidePacketList=function(Q){return n.Message.setField(this,5,Q||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addInputSidePacket=function(Q,ae){return n.Message.addToRepeatedField(this,5,Q,ae)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOutputSidePacketList=function(){return n.Message.getRepeatedField(this,6)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOutputSidePacketList=function(Q){return n.Message.setField(this,6,Q||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addOutputSidePacket=function(Q,ae){return n.Message.addToRepeatedField(this,6,Q,ae)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOutputSidePacketList=function(){return this.setOutputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOptions=function(){return n.Message.getWrapperField(this,d.CalculatorOptions,7)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOptions=function(Q){return n.Message.setWrapperField(this,7,Q)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasOptions=function(){return n.Message.getField(this,7)!=null},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getNodeOptionsList=function(){return n.Message.getRepeatedWrapperField(this,g.Any,8)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setNodeOptionsList=function(Q){return n.Message.setRepeatedWrapperField(this,8,Q)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addNodeOptions=function(Q,ae){return n.Message.addToRepeatedWrapperField(this,8,Q,proto.google.protobuf.Any,ae)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearNodeOptionsList=function(){return this.setNodeOptionsList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getSourceLayer=function(){return n.Message.getFieldWithDefault(this,9,0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setSourceLayer=function(Q){return n.Message.setProto3IntField(this,9,Q)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getBufferSizeHint=function(){return n.Message.getFieldWithDefault(this,10,0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setBufferSizeHint=function(Q){return n.Message.setProto3IntField(this,10,Q)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputStreamHandler=function(){return n.Message.getWrapperField(this,re.InputStreamHandlerConfig,11)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputStreamHandler=function(Q){return n.Message.setWrapperField(this,11,Q)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputStreamHandler=function(){return this.setInputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasInputStreamHandler=function(){return n.Message.getField(this,11)!=null},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOutputStreamHandler=function(){return n.Message.getWrapperField(this,re.OutputStreamHandlerConfig,12)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOutputStreamHandler=function(Q){return n.Message.setWrapperField(this,12,Q)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOutputStreamHandler=function(){return this.setOutputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasOutputStreamHandler=function(){return n.Message.getField(this,12)!=null},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getInputStreamInfoList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.InputStreamInfo,13)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setInputStreamInfoList=function(Q){return n.Message.setRepeatedWrapperField(this,13,Q)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addInputStreamInfo=function(Q,ae){return n.Message.addToRepeatedWrapperField(this,13,Q,proto.mediapipe.InputStreamInfo,ae)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearInputStreamInfoList=function(){return this.setInputStreamInfoList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getExecutor=function(){return n.Message.getFieldWithDefault(this,14,"")},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setExecutor=function(Q){return n.Message.setProto3StringField(this,14,Q)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getProfilerConfig=function(){return n.Message.getWrapperField(this,proto.mediapipe.ProfilerConfig,15)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setProfilerConfig=function(Q){return n.Message.setWrapperField(this,15,Q)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearProfilerConfig=function(){return this.setProfilerConfig(void 0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.hasProfilerConfig=function(){return n.Message.getField(this,15)!=null},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getMaxInFlight=function(){return n.Message.getFieldWithDefault(this,16,0)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setMaxInFlight=function(Q){return n.Message.setProto3IntField(this,16,Q)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getOptionValueList=function(){return n.Message.getRepeatedField(this,17)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setOptionValueList=function(Q){return n.Message.setField(this,17,Q||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addOptionValue=function(Q,ae){return n.Message.addToRepeatedField(this,17,Q,ae)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearOptionValueList=function(){return this.setOptionValueList([])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.getExternalInputList=function(){return n.Message.getRepeatedField(this,1005)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.setExternalInputList=function(Q){return n.Message.setField(this,1005,Q||[])},proto.mediapipe.CalculatorGraphConfig.Node.prototype.addExternalInput=function(Q,ae){return n.Message.addToRepeatedField(this,1005,Q,ae)},proto.mediapipe.CalculatorGraphConfig.Node.prototype.clearExternalInputList=function(){return this.setExternalInputList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getNodeList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.CalculatorGraphConfig.Node,1)},proto.mediapipe.CalculatorGraphConfig.prototype.setNodeList=function(Q){return n.Message.setRepeatedWrapperField(this,1,Q)},proto.mediapipe.CalculatorGraphConfig.prototype.addNode=function(Q,ae){return n.Message.addToRepeatedWrapperField(this,1,Q,proto.mediapipe.CalculatorGraphConfig.Node,ae)},proto.mediapipe.CalculatorGraphConfig.prototype.clearNodeList=function(){return this.setNodeList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getPacketFactoryList=function(){return n.Message.getRepeatedWrapperField(this,_.PacketFactoryConfig,6)},proto.mediapipe.CalculatorGraphConfig.prototype.setPacketFactoryList=function(Q){return n.Message.setRepeatedWrapperField(this,6,Q)},proto.mediapipe.CalculatorGraphConfig.prototype.addPacketFactory=function(Q,ae){return n.Message.addToRepeatedWrapperField(this,6,Q,proto.mediapipe.PacketFactoryConfig,ae)},proto.mediapipe.CalculatorGraphConfig.prototype.clearPacketFactoryList=function(){return this.setPacketFactoryList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getPacketGeneratorList=function(){return n.Message.getRepeatedWrapperField(this,j.PacketGeneratorConfig,7)},proto.mediapipe.CalculatorGraphConfig.prototype.setPacketGeneratorList=function(Q){return n.Message.setRepeatedWrapperField(this,7,Q)},proto.mediapipe.CalculatorGraphConfig.prototype.addPacketGenerator=function(Q,ae){return n.Message.addToRepeatedWrapperField(this,7,Q,proto.mediapipe.PacketGeneratorConfig,ae)},proto.mediapipe.CalculatorGraphConfig.prototype.clearPacketGeneratorList=function(){return this.setPacketGeneratorList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getNumThreads=function(){return n.Message.getFieldWithDefault(this,8,0)},proto.mediapipe.CalculatorGraphConfig.prototype.setNumThreads=function(Q){return n.Message.setProto3IntField(this,8,Q)},proto.mediapipe.CalculatorGraphConfig.prototype.getStatusHandlerList=function(){return n.Message.getRepeatedWrapperField(this,$.StatusHandlerConfig,9)},proto.mediapipe.CalculatorGraphConfig.prototype.setStatusHandlerList=function(Q){return n.Message.setRepeatedWrapperField(this,9,Q)},proto.mediapipe.CalculatorGraphConfig.prototype.addStatusHandler=function(Q,ae){return n.Message.addToRepeatedWrapperField(this,9,Q,proto.mediapipe.StatusHandlerConfig,ae)},proto.mediapipe.CalculatorGraphConfig.prototype.clearStatusHandlerList=function(){return this.setStatusHandlerList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getInputStreamList=function(){return n.Message.getRepeatedField(this,10)},proto.mediapipe.CalculatorGraphConfig.prototype.setInputStreamList=function(Q){return n.Message.setField(this,10,Q||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addInputStream=function(Q,ae){return n.Message.addToRepeatedField(this,10,Q,ae)},proto.mediapipe.CalculatorGraphConfig.prototype.clearInputStreamList=function(){return this.setInputStreamList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getOutputStreamList=function(){return n.Message.getRepeatedField(this,15)},proto.mediapipe.CalculatorGraphConfig.prototype.setOutputStreamList=function(Q){return n.Message.setField(this,15,Q||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addOutputStream=function(Q,ae){return n.Message.addToRepeatedField(this,15,Q,ae)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOutputStreamList=function(){return this.setOutputStreamList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getInputSidePacketList=function(){return n.Message.getRepeatedField(this,16)},proto.mediapipe.CalculatorGraphConfig.prototype.setInputSidePacketList=function(Q){return n.Message.setField(this,16,Q||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addInputSidePacket=function(Q,ae){return n.Message.addToRepeatedField(this,16,Q,ae)},proto.mediapipe.CalculatorGraphConfig.prototype.clearInputSidePacketList=function(){return this.setInputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getOutputSidePacketList=function(){return n.Message.getRepeatedField(this,17)},proto.mediapipe.CalculatorGraphConfig.prototype.setOutputSidePacketList=function(Q){return n.Message.setField(this,17,Q||[])},proto.mediapipe.CalculatorGraphConfig.prototype.addOutputSidePacket=function(Q,ae){return n.Message.addToRepeatedField(this,17,Q,ae)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOutputSidePacketList=function(){return this.setOutputSidePacketList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getMaxQueueSize=function(){return n.Message.getFieldWithDefault(this,11,0)},proto.mediapipe.CalculatorGraphConfig.prototype.setMaxQueueSize=function(Q){return n.Message.setProto3IntField(this,11,Q)},proto.mediapipe.CalculatorGraphConfig.prototype.getReportDeadlock=function(){return n.Message.getBooleanFieldWithDefault(this,21,!1)},proto.mediapipe.CalculatorGraphConfig.prototype.setReportDeadlock=function(Q){return n.Message.setProto3BooleanField(this,21,Q)},proto.mediapipe.CalculatorGraphConfig.prototype.getInputStreamHandler=function(){return n.Message.getWrapperField(this,re.InputStreamHandlerConfig,12)},proto.mediapipe.CalculatorGraphConfig.prototype.setInputStreamHandler=function(Q){return n.Message.setWrapperField(this,12,Q)},proto.mediapipe.CalculatorGraphConfig.prototype.clearInputStreamHandler=function(){return this.setInputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasInputStreamHandler=function(){return n.Message.getField(this,12)!=null},proto.mediapipe.CalculatorGraphConfig.prototype.getOutputStreamHandler=function(){return n.Message.getWrapperField(this,re.OutputStreamHandlerConfig,13)},proto.mediapipe.CalculatorGraphConfig.prototype.setOutputStreamHandler=function(Q){return n.Message.setWrapperField(this,13,Q)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOutputStreamHandler=function(){return this.setOutputStreamHandler(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasOutputStreamHandler=function(){return n.Message.getField(this,13)!=null},proto.mediapipe.CalculatorGraphConfig.prototype.getExecutorList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.ExecutorConfig,14)},proto.mediapipe.CalculatorGraphConfig.prototype.setExecutorList=function(Q){return n.Message.setRepeatedWrapperField(this,14,Q)},proto.mediapipe.CalculatorGraphConfig.prototype.addExecutor=function(Q,ae){return n.Message.addToRepeatedWrapperField(this,14,Q,proto.mediapipe.ExecutorConfig,ae)},proto.mediapipe.CalculatorGraphConfig.prototype.clearExecutorList=function(){return this.setExecutorList([])},proto.mediapipe.CalculatorGraphConfig.prototype.getProfilerConfig=function(){return n.Message.getWrapperField(this,proto.mediapipe.ProfilerConfig,18)},proto.mediapipe.CalculatorGraphConfig.prototype.setProfilerConfig=function(Q){return n.Message.setWrapperField(this,18,Q)},proto.mediapipe.CalculatorGraphConfig.prototype.clearProfilerConfig=function(){return this.setProfilerConfig(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasProfilerConfig=function(){return n.Message.getField(this,18)!=null},proto.mediapipe.CalculatorGraphConfig.prototype.getPackage=function(){return n.Message.getFieldWithDefault(this,19,"")},proto.mediapipe.CalculatorGraphConfig.prototype.setPackage=function(Q){return n.Message.setProto3StringField(this,19,Q)},proto.mediapipe.CalculatorGraphConfig.prototype.getType=function(){return n.Message.getFieldWithDefault(this,20,"")},proto.mediapipe.CalculatorGraphConfig.prototype.setType=function(Q){return n.Message.setProto3StringField(this,20,Q)},proto.mediapipe.CalculatorGraphConfig.prototype.getOptions=function(){return n.Message.getWrapperField(this,i.MediaPipeOptions,1001)},proto.mediapipe.CalculatorGraphConfig.prototype.setOptions=function(Q){return n.Message.setWrapperField(this,1001,Q)},proto.mediapipe.CalculatorGraphConfig.prototype.clearOptions=function(){return this.setOptions(void 0)},proto.mediapipe.CalculatorGraphConfig.prototype.hasOptions=function(){return n.Message.getField(this,1001)!=null},proto.mediapipe.CalculatorGraphConfig.prototype.getGraphOptionsList=function(){return n.Message.getRepeatedWrapperField(this,g.Any,1002)},proto.mediapipe.CalculatorGraphConfig.prototype.setGraphOptionsList=function(Q){return n.Message.setRepeatedWrapperField(this,1002,Q)},proto.mediapipe.CalculatorGraphConfig.prototype.addGraphOptions=function(Q,ae){return n.Message.addToRepeatedWrapperField(this,1002,Q,proto.google.protobuf.Any,ae)},proto.mediapipe.CalculatorGraphConfig.prototype.clearGraphOptionsList=function(){return this.setGraphOptionsList([])},A.object.extend(u,proto.mediapipe)}(calculator_pb);var detection_pb={},location_data_pb={},rasterization_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.Rasterization",null,C),A.exportSymbol("proto.mediapipe.Rasterization.Interval",null,C),proto.mediapipe.Rasterization=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.Rasterization.repeatedFields_,null)},A.inherits(proto.mediapipe.Rasterization,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.Rasterization.displayName="proto.mediapipe.Rasterization"),proto.mediapipe.Rasterization.Interval=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.Rasterization.Interval,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.Rasterization.Interval.displayName="proto.mediapipe.Rasterization.Interval"),proto.mediapipe.Rasterization.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Rasterization.prototype.toObject=function(d){return proto.mediapipe.Rasterization.toObject(d,this)},proto.mediapipe.Rasterization.toObject=function(d,g){var i={intervalList:n.Message.toObjectList(g.getIntervalList(),proto.mediapipe.Rasterization.Interval.toObject,d)};return d&&(i.$jspbMessageInstance=g),i}),proto.mediapipe.Rasterization.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.Rasterization;return proto.mediapipe.Rasterization.deserializeBinaryFromReader(i,g)},proto.mediapipe.Rasterization.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)if(g.getFieldNumber()===1){var i=new proto.mediapipe.Rasterization.Interval;g.readMessage(i,proto.mediapipe.Rasterization.Interval.deserializeBinaryFromReader),d.addInterval(i)}else g.skipField();return d},proto.mediapipe.Rasterization.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.Rasterization.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.Rasterization.serializeBinaryToWriter=function(d,g){var i;(i=d.getIntervalList()).length>0&&g.writeRepeatedMessage(1,i,proto.mediapipe.Rasterization.Interval.serializeBinaryToWriter)},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Rasterization.Interval.prototype.toObject=function(d){return proto.mediapipe.Rasterization.Interval.toObject(d,this)},proto.mediapipe.Rasterization.Interval.toObject=function(d,g){var i,_={y:(i=n.Message.getField(g,1))==null?void 0:i,leftX:(i=n.Message.getField(g,2))==null?void 0:i,rightX:(i=n.Message.getField(g,3))==null?void 0:i};return d&&(_.$jspbMessageInstance=g),_}),proto.mediapipe.Rasterization.Interval.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.Rasterization.Interval;return proto.mediapipe.Rasterization.Interval.deserializeBinaryFromReader(i,g)},proto.mediapipe.Rasterization.Interval.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var i=g.readInt32();d.setY(i);break;case 2:i=g.readInt32(),d.setLeftX(i);break;case 3:i=g.readInt32(),d.setRightX(i);break;default:g.skipField()}return d},proto.mediapipe.Rasterization.Interval.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.Rasterization.Interval.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.Rasterization.Interval.serializeBinaryToWriter=function(d,g){var i=void 0;(i=n.Message.getField(d,1))!=null&&g.writeInt32(1,i),(i=n.Message.getField(d,2))!=null&&g.writeInt32(2,i),(i=n.Message.getField(d,3))!=null&&g.writeInt32(3,i)},proto.mediapipe.Rasterization.Interval.prototype.getY=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Rasterization.Interval.prototype.setY=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.Rasterization.Interval.prototype.clearY=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.Rasterization.Interval.prototype.hasY=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.Rasterization.Interval.prototype.getLeftX=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.Rasterization.Interval.prototype.setLeftX=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.Rasterization.Interval.prototype.clearLeftX=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.Rasterization.Interval.prototype.hasLeftX=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.Rasterization.Interval.prototype.getRightX=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.Rasterization.Interval.prototype.setRightX=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.Rasterization.Interval.prototype.clearRightX=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.Rasterization.Interval.prototype.hasRightX=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.Rasterization.prototype.getIntervalList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.Rasterization.Interval,1)},proto.mediapipe.Rasterization.prototype.setIntervalList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.Rasterization.prototype.addInterval=function(d,g){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.Rasterization.Interval,g)},proto.mediapipe.Rasterization.prototype.clearIntervalList=function(){return this.setIntervalList([])},A.object.extend(u,proto.mediapipe)})(rasterization_pb),function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=rasterization_pb;A.object.extend(proto,d),A.exportSymbol("proto.mediapipe.LocationData",null,C),A.exportSymbol("proto.mediapipe.LocationData.BinaryMask",null,C),A.exportSymbol("proto.mediapipe.LocationData.BoundingBox",null,C),A.exportSymbol("proto.mediapipe.LocationData.Format",null,C),A.exportSymbol("proto.mediapipe.LocationData.RelativeBoundingBox",null,C),A.exportSymbol("proto.mediapipe.LocationData.RelativeKeypoint",null,C),proto.mediapipe.LocationData=function(g){n.Message.initialize(this,g,0,-1,proto.mediapipe.LocationData.repeatedFields_,null)},A.inherits(proto.mediapipe.LocationData,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.displayName="proto.mediapipe.LocationData"),proto.mediapipe.LocationData.BoundingBox=function(g){n.Message.initialize(this,g,0,-1,null,null)},A.inherits(proto.mediapipe.LocationData.BoundingBox,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.BoundingBox.displayName="proto.mediapipe.LocationData.BoundingBox"),proto.mediapipe.LocationData.RelativeBoundingBox=function(g){n.Message.initialize(this,g,0,-1,null,null)},A.inherits(proto.mediapipe.LocationData.RelativeBoundingBox,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.RelativeBoundingBox.displayName="proto.mediapipe.LocationData.RelativeBoundingBox"),proto.mediapipe.LocationData.BinaryMask=function(g){n.Message.initialize(this,g,0,-1,null,null)},A.inherits(proto.mediapipe.LocationData.BinaryMask,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.BinaryMask.displayName="proto.mediapipe.LocationData.BinaryMask"),proto.mediapipe.LocationData.RelativeKeypoint=function(g){n.Message.initialize(this,g,0,-1,null,null)},A.inherits(proto.mediapipe.LocationData.RelativeKeypoint,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.LocationData.RelativeKeypoint.displayName="proto.mediapipe.LocationData.RelativeKeypoint"),proto.mediapipe.LocationData.repeatedFields_=[5],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.prototype.toObject=function(g){return proto.mediapipe.LocationData.toObject(g,this)},proto.mediapipe.LocationData.toObject=function(g,i){var _,j={format:(_=n.Message.getField(i,1))==null?void 0:_,boundingBox:(_=i.getBoundingBox())&&proto.mediapipe.LocationData.BoundingBox.toObject(g,_),relativeBoundingBox:(_=i.getRelativeBoundingBox())&&proto.mediapipe.LocationData.RelativeBoundingBox.toObject(g,_),mask:(_=i.getMask())&&proto.mediapipe.LocationData.BinaryMask.toObject(g,_),relativeKeypointsList:n.Message.toObjectList(i.getRelativeKeypointsList(),proto.mediapipe.LocationData.RelativeKeypoint.toObject,g)};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.LocationData.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.LocationData;return proto.mediapipe.LocationData.deserializeBinaryFromReader(_,i)},proto.mediapipe.LocationData.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=i.readEnum();g.setFormat(_);break;case 2:_=new proto.mediapipe.LocationData.BoundingBox,i.readMessage(_,proto.mediapipe.LocationData.BoundingBox.deserializeBinaryFromReader),g.setBoundingBox(_);break;case 3:_=new proto.mediapipe.LocationData.RelativeBoundingBox,i.readMessage(_,proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinaryFromReader),g.setRelativeBoundingBox(_);break;case 4:_=new proto.mediapipe.LocationData.BinaryMask,i.readMessage(_,proto.mediapipe.LocationData.BinaryMask.deserializeBinaryFromReader),g.setMask(_);break;case 5:_=new proto.mediapipe.LocationData.RelativeKeypoint,i.readMessage(_,proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinaryFromReader),g.addRelativeKeypoints(_);break;default:i.skipField()}return g},proto.mediapipe.LocationData.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.LocationData.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.LocationData.serializeBinaryToWriter=function(g,i){var _=void 0;(_=n.Message.getField(g,1))!=null&&i.writeEnum(1,_),(_=g.getBoundingBox())!=null&&i.writeMessage(2,_,proto.mediapipe.LocationData.BoundingBox.serializeBinaryToWriter),(_=g.getRelativeBoundingBox())!=null&&i.writeMessage(3,_,proto.mediapipe.LocationData.RelativeBoundingBox.serializeBinaryToWriter),(_=g.getMask())!=null&&i.writeMessage(4,_,proto.mediapipe.LocationData.BinaryMask.serializeBinaryToWriter),(_=g.getRelativeKeypointsList()).length>0&&i.writeRepeatedMessage(5,_,proto.mediapipe.LocationData.RelativeKeypoint.serializeBinaryToWriter)},proto.mediapipe.LocationData.Format={GLOBAL:0,BOUNDING_BOX:1,RELATIVE_BOUNDING_BOX:2,MASK:3},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.BoundingBox.prototype.toObject=function(g){return proto.mediapipe.LocationData.BoundingBox.toObject(g,this)},proto.mediapipe.LocationData.BoundingBox.toObject=function(g,i){var _,j={xmin:(_=n.Message.getField(i,1))==null?void 0:_,ymin:(_=n.Message.getField(i,2))==null?void 0:_,width:(_=n.Message.getField(i,3))==null?void 0:_,height:(_=n.Message.getField(i,4))==null?void 0:_};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.LocationData.BoundingBox.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.LocationData.BoundingBox;return proto.mediapipe.LocationData.BoundingBox.deserializeBinaryFromReader(_,i)},proto.mediapipe.LocationData.BoundingBox.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=i.readInt32();g.setXmin(_);break;case 2:_=i.readInt32(),g.setYmin(_);break;case 3:_=i.readInt32(),g.setWidth(_);break;case 4:_=i.readInt32(),g.setHeight(_);break;default:i.skipField()}return g},proto.mediapipe.LocationData.BoundingBox.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.LocationData.BoundingBox.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.LocationData.BoundingBox.serializeBinaryToWriter=function(g,i){var _=void 0;(_=n.Message.getField(g,1))!=null&&i.writeInt32(1,_),(_=n.Message.getField(g,2))!=null&&i.writeInt32(2,_),(_=n.Message.getField(g,3))!=null&&i.writeInt32(3,_),(_=n.Message.getField(g,4))!=null&&i.writeInt32(4,_)},proto.mediapipe.LocationData.BoundingBox.prototype.getXmin=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setXmin=function(g){return n.Message.setField(this,1,g)},proto.mediapipe.LocationData.BoundingBox.prototype.clearXmin=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasXmin=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.LocationData.BoundingBox.prototype.getYmin=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setYmin=function(g){return n.Message.setField(this,2,g)},proto.mediapipe.LocationData.BoundingBox.prototype.clearYmin=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasYmin=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.LocationData.BoundingBox.prototype.getWidth=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setWidth=function(g){return n.Message.setField(this,3,g)},proto.mediapipe.LocationData.BoundingBox.prototype.clearWidth=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasWidth=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.LocationData.BoundingBox.prototype.getHeight=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.LocationData.BoundingBox.prototype.setHeight=function(g){return n.Message.setField(this,4,g)},proto.mediapipe.LocationData.BoundingBox.prototype.clearHeight=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.LocationData.BoundingBox.prototype.hasHeight=function(){return n.Message.getField(this,4)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.RelativeBoundingBox.prototype.toObject=function(g){return proto.mediapipe.LocationData.RelativeBoundingBox.toObject(g,this)},proto.mediapipe.LocationData.RelativeBoundingBox.toObject=function(g,i){var _,j={xmin:(_=n.Message.getOptionalFloatingPointField(i,1))==null?void 0:_,ymin:(_=n.Message.getOptionalFloatingPointField(i,2))==null?void 0:_,width:(_=n.Message.getOptionalFloatingPointField(i,3))==null?void 0:_,height:(_=n.Message.getOptionalFloatingPointField(i,4))==null?void 0:_};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.LocationData.RelativeBoundingBox;return proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinaryFromReader(_,i)},proto.mediapipe.LocationData.RelativeBoundingBox.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=i.readFloat();g.setXmin(_);break;case 2:_=i.readFloat(),g.setYmin(_);break;case 3:_=i.readFloat(),g.setWidth(_);break;case 4:_=i.readFloat(),g.setHeight(_);break;default:i.skipField()}return g},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.LocationData.RelativeBoundingBox.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.LocationData.RelativeBoundingBox.serializeBinaryToWriter=function(g,i){var _=void 0;(_=n.Message.getField(g,1))!=null&&i.writeFloat(1,_),(_=n.Message.getField(g,2))!=null&&i.writeFloat(2,_),(_=n.Message.getField(g,3))!=null&&i.writeFloat(3,_),(_=n.Message.getField(g,4))!=null&&i.writeFloat(4,_)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getXmin=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setXmin=function(g){return n.Message.setField(this,1,g)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearXmin=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasXmin=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getYmin=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setYmin=function(g){return n.Message.setField(this,2,g)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearYmin=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasYmin=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getWidth=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setWidth=function(g){return n.Message.setField(this,3,g)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearWidth=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasWidth=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.getHeight=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.setHeight=function(g){return n.Message.setField(this,4,g)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.clearHeight=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.LocationData.RelativeBoundingBox.prototype.hasHeight=function(){return n.Message.getField(this,4)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.BinaryMask.prototype.toObject=function(g){return proto.mediapipe.LocationData.BinaryMask.toObject(g,this)},proto.mediapipe.LocationData.BinaryMask.toObject=function(g,i){var _,j={width:(_=n.Message.getField(i,1))==null?void 0:_,height:(_=n.Message.getField(i,2))==null?void 0:_,rasterization:(_=i.getRasterization())&&d.Rasterization.toObject(g,_)};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.LocationData.BinaryMask.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.LocationData.BinaryMask;return proto.mediapipe.LocationData.BinaryMask.deserializeBinaryFromReader(_,i)},proto.mediapipe.LocationData.BinaryMask.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=i.readInt32();g.setWidth(_);break;case 2:_=i.readInt32(),g.setHeight(_);break;case 3:_=new d.Rasterization,i.readMessage(_,d.Rasterization.deserializeBinaryFromReader),g.setRasterization(_);break;default:i.skipField()}return g},proto.mediapipe.LocationData.BinaryMask.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.LocationData.BinaryMask.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.LocationData.BinaryMask.serializeBinaryToWriter=function(g,i){var _=void 0;(_=n.Message.getField(g,1))!=null&&i.writeInt32(1,_),(_=n.Message.getField(g,2))!=null&&i.writeInt32(2,_),(_=g.getRasterization())!=null&&i.writeMessage(3,_,d.Rasterization.serializeBinaryToWriter)},proto.mediapipe.LocationData.BinaryMask.prototype.getWidth=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.BinaryMask.prototype.setWidth=function(g){return n.Message.setField(this,1,g)},proto.mediapipe.LocationData.BinaryMask.prototype.clearWidth=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.BinaryMask.prototype.hasWidth=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.LocationData.BinaryMask.prototype.getHeight=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.BinaryMask.prototype.setHeight=function(g){return n.Message.setField(this,2,g)},proto.mediapipe.LocationData.BinaryMask.prototype.clearHeight=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.BinaryMask.prototype.hasHeight=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.LocationData.BinaryMask.prototype.getRasterization=function(){return n.Message.getWrapperField(this,d.Rasterization,3)},proto.mediapipe.LocationData.BinaryMask.prototype.setRasterization=function(g){return n.Message.setWrapperField(this,3,g)},proto.mediapipe.LocationData.BinaryMask.prototype.clearRasterization=function(){return this.setRasterization(void 0)},proto.mediapipe.LocationData.BinaryMask.prototype.hasRasterization=function(){return n.Message.getField(this,3)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LocationData.RelativeKeypoint.prototype.toObject=function(g){return proto.mediapipe.LocationData.RelativeKeypoint.toObject(g,this)},proto.mediapipe.LocationData.RelativeKeypoint.toObject=function(g,i){var _,j={x:(_=n.Message.getOptionalFloatingPointField(i,1))==null?void 0:_,y:(_=n.Message.getOptionalFloatingPointField(i,2))==null?void 0:_,keypointLabel:(_=n.Message.getField(i,3))==null?void 0:_,score:(_=n.Message.getOptionalFloatingPointField(i,4))==null?void 0:_};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.LocationData.RelativeKeypoint;return proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinaryFromReader(_,i)},proto.mediapipe.LocationData.RelativeKeypoint.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=i.readFloat();g.setX(_);break;case 2:_=i.readFloat(),g.setY(_);break;case 3:_=i.readString(),g.setKeypointLabel(_);break;case 4:_=i.readFloat(),g.setScore(_);break;default:i.skipField()}return g},proto.mediapipe.LocationData.RelativeKeypoint.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.LocationData.RelativeKeypoint.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.LocationData.RelativeKeypoint.serializeBinaryToWriter=function(g,i){var _=void 0;(_=n.Message.getField(g,1))!=null&&i.writeFloat(1,_),(_=n.Message.getField(g,2))!=null&&i.writeFloat(2,_),(_=n.Message.getField(g,3))!=null&&i.writeString(3,_),(_=n.Message.getField(g,4))!=null&&i.writeFloat(4,_)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getX=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setX=function(g){return n.Message.setField(this,1,g)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearX=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasX=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getY=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setY=function(g){return n.Message.setField(this,2,g)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearY=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasY=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getKeypointLabel=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setKeypointLabel=function(g){return n.Message.setField(this,3,g)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearKeypointLabel=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasKeypointLabel=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.LocationData.RelativeKeypoint.prototype.getScore=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.setScore=function(g){return n.Message.setField(this,4,g)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.clearScore=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.LocationData.RelativeKeypoint.prototype.hasScore=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.LocationData.prototype.getFormat=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.LocationData.prototype.setFormat=function(g){return n.Message.setField(this,1,g)},proto.mediapipe.LocationData.prototype.clearFormat=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.LocationData.prototype.hasFormat=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.LocationData.prototype.getBoundingBox=function(){return n.Message.getWrapperField(this,proto.mediapipe.LocationData.BoundingBox,2)},proto.mediapipe.LocationData.prototype.setBoundingBox=function(g){return n.Message.setWrapperField(this,2,g)},proto.mediapipe.LocationData.prototype.clearBoundingBox=function(){return this.setBoundingBox(void 0)},proto.mediapipe.LocationData.prototype.hasBoundingBox=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.LocationData.prototype.getRelativeBoundingBox=function(){return n.Message.getWrapperField(this,proto.mediapipe.LocationData.RelativeBoundingBox,3)},proto.mediapipe.LocationData.prototype.setRelativeBoundingBox=function(g){return n.Message.setWrapperField(this,3,g)},proto.mediapipe.LocationData.prototype.clearRelativeBoundingBox=function(){return this.setRelativeBoundingBox(void 0)},proto.mediapipe.LocationData.prototype.hasRelativeBoundingBox=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.LocationData.prototype.getMask=function(){return n.Message.getWrapperField(this,proto.mediapipe.LocationData.BinaryMask,4)},proto.mediapipe.LocationData.prototype.setMask=function(g){return n.Message.setWrapperField(this,4,g)},proto.mediapipe.LocationData.prototype.clearMask=function(){return this.setMask(void 0)},proto.mediapipe.LocationData.prototype.hasMask=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.LocationData.prototype.getRelativeKeypointsList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.LocationData.RelativeKeypoint,5)},proto.mediapipe.LocationData.prototype.setRelativeKeypointsList=function(g){return n.Message.setRepeatedWrapperField(this,5,g)},proto.mediapipe.LocationData.prototype.addRelativeKeypoints=function(g,i){return n.Message.addToRepeatedWrapperField(this,5,g,proto.mediapipe.LocationData.RelativeKeypoint,i)},proto.mediapipe.LocationData.prototype.clearRelativeKeypointsList=function(){return this.setRelativeKeypointsList([])},A.object.extend(u,proto.mediapipe)}(location_data_pb),function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=location_data_pb;A.object.extend(proto,d),A.exportSymbol("proto.mediapipe.Detection",null,C),A.exportSymbol("proto.mediapipe.Detection.AssociatedDetection",null,C),A.exportSymbol("proto.mediapipe.DetectionList",null,C),proto.mediapipe.Detection=function(g){n.Message.initialize(this,g,0,-1,proto.mediapipe.Detection.repeatedFields_,null)},A.inherits(proto.mediapipe.Detection,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.Detection.displayName="proto.mediapipe.Detection"),proto.mediapipe.Detection.AssociatedDetection=function(g){n.Message.initialize(this,g,0,-1,null,null)},A.inherits(proto.mediapipe.Detection.AssociatedDetection,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.Detection.AssociatedDetection.displayName="proto.mediapipe.Detection.AssociatedDetection"),proto.mediapipe.DetectionList=function(g){n.Message.initialize(this,g,0,-1,proto.mediapipe.DetectionList.repeatedFields_,null)},A.inherits(proto.mediapipe.DetectionList,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.DetectionList.displayName="proto.mediapipe.DetectionList"),proto.mediapipe.Detection.repeatedFields_=[1,2,3,8,9],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Detection.prototype.toObject=function(g){return proto.mediapipe.Detection.toObject(g,this)},proto.mediapipe.Detection.toObject=function(g,i){var _,j={labelList:(_=n.Message.getRepeatedField(i,1))==null?void 0:_,labelIdList:(_=n.Message.getRepeatedField(i,2))==null?void 0:_,scoreList:(_=n.Message.getRepeatedFloatingPointField(i,3))==null?void 0:_,locationData:(_=i.getLocationData())&&d.LocationData.toObject(g,_),featureTag:(_=n.Message.getField(i,5))==null?void 0:_,trackId:(_=n.Message.getField(i,6))==null?void 0:_,detectionId:(_=n.Message.getField(i,7))==null?void 0:_,associatedDetectionsList:n.Message.toObjectList(i.getAssociatedDetectionsList(),proto.mediapipe.Detection.AssociatedDetection.toObject,g),displayNameList:(_=n.Message.getRepeatedField(i,9))==null?void 0:_,timestampUsec:(_=n.Message.getField(i,10))==null?void 0:_};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.Detection.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.Detection;return proto.mediapipe.Detection.deserializeBinaryFromReader(_,i)},proto.mediapipe.Detection.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=i.readString();g.addLabel(_);break;case 2:for(var j=i.isDelimited()?i.readPackedInt32():[i.readInt32()],$=0;$<j.length;$++)g.addLabelId(j[$]);break;case 3:for(j=i.isDelimited()?i.readPackedFloat():[i.readFloat()],$=0;$<j.length;$++)g.addScore(j[$]);break;case 4:_=new d.LocationData,i.readMessage(_,d.LocationData.deserializeBinaryFromReader),g.setLocationData(_);break;case 5:_=i.readString(),g.setFeatureTag(_);break;case 6:_=i.readString(),g.setTrackId(_);break;case 7:_=i.readInt64(),g.setDetectionId(_);break;case 8:_=new proto.mediapipe.Detection.AssociatedDetection,i.readMessage(_,proto.mediapipe.Detection.AssociatedDetection.deserializeBinaryFromReader),g.addAssociatedDetections(_);break;case 9:_=i.readString(),g.addDisplayName(_);break;case 10:_=i.readInt64(),g.setTimestampUsec(_);break;default:i.skipField()}return g},proto.mediapipe.Detection.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.Detection.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.Detection.serializeBinaryToWriter=function(g,i){var _=void 0;(_=g.getLabelList()).length>0&&i.writeRepeatedString(1,_),(_=g.getLabelIdList()).length>0&&i.writePackedInt32(2,_),(_=g.getScoreList()).length>0&&i.writePackedFloat(3,_),(_=g.getLocationData())!=null&&i.writeMessage(4,_,d.LocationData.serializeBinaryToWriter),(_=n.Message.getField(g,5))!=null&&i.writeString(5,_),(_=n.Message.getField(g,6))!=null&&i.writeString(6,_),(_=n.Message.getField(g,7))!=null&&i.writeInt64(7,_),(_=g.getAssociatedDetectionsList()).length>0&&i.writeRepeatedMessage(8,_,proto.mediapipe.Detection.AssociatedDetection.serializeBinaryToWriter),(_=g.getDisplayNameList()).length>0&&i.writeRepeatedString(9,_),(_=n.Message.getField(g,10))!=null&&i.writeInt64(10,_)},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Detection.AssociatedDetection.prototype.toObject=function(g){return proto.mediapipe.Detection.AssociatedDetection.toObject(g,this)},proto.mediapipe.Detection.AssociatedDetection.toObject=function(g,i){var _,j={id:(_=n.Message.getField(i,1))==null?void 0:_,confidence:(_=n.Message.getOptionalFloatingPointField(i,2))==null?void 0:_};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.Detection.AssociatedDetection.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.Detection.AssociatedDetection;return proto.mediapipe.Detection.AssociatedDetection.deserializeBinaryFromReader(_,i)},proto.mediapipe.Detection.AssociatedDetection.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=i.readInt32();g.setId(_);break;case 2:_=i.readFloat(),g.setConfidence(_);break;default:i.skipField()}return g},proto.mediapipe.Detection.AssociatedDetection.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.Detection.AssociatedDetection.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.Detection.AssociatedDetection.serializeBinaryToWriter=function(g,i){var _=void 0;(_=n.Message.getField(g,1))!=null&&i.writeInt32(1,_),(_=n.Message.getField(g,2))!=null&&i.writeFloat(2,_)},proto.mediapipe.Detection.AssociatedDetection.prototype.getId=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Detection.AssociatedDetection.prototype.setId=function(g){return n.Message.setField(this,1,g)},proto.mediapipe.Detection.AssociatedDetection.prototype.clearId=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.Detection.AssociatedDetection.prototype.hasId=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.Detection.AssociatedDetection.prototype.getConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.Detection.AssociatedDetection.prototype.setConfidence=function(g){return n.Message.setField(this,2,g)},proto.mediapipe.Detection.AssociatedDetection.prototype.clearConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.Detection.AssociatedDetection.prototype.hasConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.Detection.prototype.getLabelList=function(){return n.Message.getRepeatedField(this,1)},proto.mediapipe.Detection.prototype.setLabelList=function(g){return n.Message.setField(this,1,g||[])},proto.mediapipe.Detection.prototype.addLabel=function(g,i){return n.Message.addToRepeatedField(this,1,g,i)},proto.mediapipe.Detection.prototype.clearLabelList=function(){return this.setLabelList([])},proto.mediapipe.Detection.prototype.getLabelIdList=function(){return n.Message.getRepeatedField(this,2)},proto.mediapipe.Detection.prototype.setLabelIdList=function(g){return n.Message.setField(this,2,g||[])},proto.mediapipe.Detection.prototype.addLabelId=function(g,i){return n.Message.addToRepeatedField(this,2,g,i)},proto.mediapipe.Detection.prototype.clearLabelIdList=function(){return this.setLabelIdList([])},proto.mediapipe.Detection.prototype.getScoreList=function(){return n.Message.getRepeatedFloatingPointField(this,3)},proto.mediapipe.Detection.prototype.setScoreList=function(g){return n.Message.setField(this,3,g||[])},proto.mediapipe.Detection.prototype.addScore=function(g,i){return n.Message.addToRepeatedField(this,3,g,i)},proto.mediapipe.Detection.prototype.clearScoreList=function(){return this.setScoreList([])},proto.mediapipe.Detection.prototype.getLocationData=function(){return n.Message.getWrapperField(this,d.LocationData,4)},proto.mediapipe.Detection.prototype.setLocationData=function(g){return n.Message.setWrapperField(this,4,g)},proto.mediapipe.Detection.prototype.clearLocationData=function(){return this.setLocationData(void 0)},proto.mediapipe.Detection.prototype.hasLocationData=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.Detection.prototype.getFeatureTag=function(){return n.Message.getFieldWithDefault(this,5,"")},proto.mediapipe.Detection.prototype.setFeatureTag=function(g){return n.Message.setField(this,5,g)},proto.mediapipe.Detection.prototype.clearFeatureTag=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.Detection.prototype.hasFeatureTag=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.Detection.prototype.getTrackId=function(){return n.Message.getFieldWithDefault(this,6,"")},proto.mediapipe.Detection.prototype.setTrackId=function(g){return n.Message.setField(this,6,g)},proto.mediapipe.Detection.prototype.clearTrackId=function(){return n.Message.setField(this,6,void 0)},proto.mediapipe.Detection.prototype.hasTrackId=function(){return n.Message.getField(this,6)!=null},proto.mediapipe.Detection.prototype.getDetectionId=function(){return n.Message.getFieldWithDefault(this,7,0)},proto.mediapipe.Detection.prototype.setDetectionId=function(g){return n.Message.setField(this,7,g)},proto.mediapipe.Detection.prototype.clearDetectionId=function(){return n.Message.setField(this,7,void 0)},proto.mediapipe.Detection.prototype.hasDetectionId=function(){return n.Message.getField(this,7)!=null},proto.mediapipe.Detection.prototype.getAssociatedDetectionsList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.Detection.AssociatedDetection,8)},proto.mediapipe.Detection.prototype.setAssociatedDetectionsList=function(g){return n.Message.setRepeatedWrapperField(this,8,g)},proto.mediapipe.Detection.prototype.addAssociatedDetections=function(g,i){return n.Message.addToRepeatedWrapperField(this,8,g,proto.mediapipe.Detection.AssociatedDetection,i)},proto.mediapipe.Detection.prototype.clearAssociatedDetectionsList=function(){return this.setAssociatedDetectionsList([])},proto.mediapipe.Detection.prototype.getDisplayNameList=function(){return n.Message.getRepeatedField(this,9)},proto.mediapipe.Detection.prototype.setDisplayNameList=function(g){return n.Message.setField(this,9,g||[])},proto.mediapipe.Detection.prototype.addDisplayName=function(g,i){return n.Message.addToRepeatedField(this,9,g,i)},proto.mediapipe.Detection.prototype.clearDisplayNameList=function(){return this.setDisplayNameList([])},proto.mediapipe.Detection.prototype.getTimestampUsec=function(){return n.Message.getFieldWithDefault(this,10,0)},proto.mediapipe.Detection.prototype.setTimestampUsec=function(g){return n.Message.setField(this,10,g)},proto.mediapipe.Detection.prototype.clearTimestampUsec=function(){return n.Message.setField(this,10,void 0)},proto.mediapipe.Detection.prototype.hasTimestampUsec=function(){return n.Message.getField(this,10)!=null},proto.mediapipe.DetectionList.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.DetectionList.prototype.toObject=function(g){return proto.mediapipe.DetectionList.toObject(g,this)},proto.mediapipe.DetectionList.toObject=function(g,i){var _={detectionList:n.Message.toObjectList(i.getDetectionList(),proto.mediapipe.Detection.toObject,g)};return g&&(_.$jspbMessageInstance=i),_}),proto.mediapipe.DetectionList.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.DetectionList;return proto.mediapipe.DetectionList.deserializeBinaryFromReader(_,i)},proto.mediapipe.DetectionList.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)if(i.getFieldNumber()===1){var _=new proto.mediapipe.Detection;i.readMessage(_,proto.mediapipe.Detection.deserializeBinaryFromReader),g.addDetection(_)}else i.skipField();return g},proto.mediapipe.DetectionList.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.DetectionList.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.DetectionList.serializeBinaryToWriter=function(g,i){var _;(_=g.getDetectionList()).length>0&&i.writeRepeatedMessage(1,_,proto.mediapipe.Detection.serializeBinaryToWriter)},proto.mediapipe.DetectionList.prototype.getDetectionList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.Detection,1)},proto.mediapipe.DetectionList.prototype.setDetectionList=function(g){return n.Message.setRepeatedWrapperField(this,1,g)},proto.mediapipe.DetectionList.prototype.addDetection=function(g,i){return n.Message.addToRepeatedWrapperField(this,1,g,proto.mediapipe.Detection,i)},proto.mediapipe.DetectionList.prototype.clearDetectionList=function(){return this.setDetectionList([])},A.object.extend(u,proto.mediapipe)}(detection_pb);var base_options_pb={},acceleration_pb={},inference_calculator_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var g=calculator_options_pb;A.object.extend(proto,g),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions",null,C),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate",null,C),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.DelegateCase",null,C),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu",null,C),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.Api",null,C),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.InferenceUsage",null,C),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi",null,C),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite",null,C),A.exportSymbol("proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack",null,C),proto.mediapipe.InferenceCalculatorOptions=function(i){n.Message.initialize(this,i,0,-1,null,null)},A.inherits(proto.mediapipe.InferenceCalculatorOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.displayName="proto.mediapipe.InferenceCalculatorOptions"),proto.mediapipe.InferenceCalculatorOptions.Delegate=function(i){n.Message.initialize(this,i,0,-1,null,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_)},A.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate"),proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite=function(i){n.Message.initialize(this,i,0,-1,null,null)},A.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite"),proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu=function(i){n.Message.initialize(this,i,0,-1,null,null)},A.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu"),proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi=function(i){n.Message.initialize(this,i,0,-1,null,null)},A.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi"),proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack=function(i){n.Message.initialize(this,i,0,-1,null,null)},A.inherits(proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.displayName="proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.prototype.toObject=function(i){return proto.mediapipe.InferenceCalculatorOptions.toObject(i,this)},proto.mediapipe.InferenceCalculatorOptions.toObject=function(i,_){var j,$={modelPath:(j=n.Message.getField(_,1))==null?void 0:j,useGpu:n.Message.getBooleanFieldWithDefault(_,2,!1),useNnapi:n.Message.getBooleanFieldWithDefault(_,3,!1),cpuNumThread:n.Message.getFieldWithDefault(_,4,-1),delegate:(j=_.getDelegate())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.toObject(i,j)};return i&&($.$jspbMessageInstance=_),$}),proto.mediapipe.InferenceCalculatorOptions.deserializeBinary=function(i){var _=new n.BinaryReader(i),j=new proto.mediapipe.InferenceCalculatorOptions;return proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader(j,_)},proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader=function(i,_){for(;_.nextField()&&!_.isEndGroup();)switch(_.getFieldNumber()){case 1:var j=_.readString();i.setModelPath(j);break;case 2:j=_.readBool(),i.setUseGpu(j);break;case 3:j=_.readBool(),i.setUseNnapi(j);break;case 4:j=_.readInt32(),i.setCpuNumThread(j);break;case 5:j=new proto.mediapipe.InferenceCalculatorOptions.Delegate,_.readMessage(j,proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinaryFromReader),i.setDelegate(j);break;default:_.skipField()}return i},proto.mediapipe.InferenceCalculatorOptions.prototype.serializeBinary=function(){var i=new n.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter=function(i,_){var j=void 0;(j=n.Message.getField(i,1))!=null&&_.writeString(1,j),(j=n.Message.getField(i,2))!=null&&_.writeBool(2,j),(j=n.Message.getField(i,3))!=null&&_.writeBool(3,j),(j=n.Message.getField(i,4))!=null&&_.writeInt32(4,j),(j=i.getDelegate())!=null&&_.writeMessage(5,j,proto.mediapipe.InferenceCalculatorOptions.Delegate.serializeBinaryToWriter)},proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_=[[1,2,3,4]],proto.mediapipe.InferenceCalculatorOptions.Delegate.DelegateCase={DELEGATE_NOT_SET:0,TFLITE:1,GPU:2,NNAPI:3,XNNPACK:4},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getDelegateCase=function(){return n.Message.computeOneofCase(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.toObject=function(i){return proto.mediapipe.InferenceCalculatorOptions.Delegate.toObject(i,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.toObject=function(i,_){var j,$={tflite:(j=_.getTflite())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.toObject(i,j),gpu:(j=_.getGpu())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.toObject(i,j),nnapi:(j=_.getNnapi())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.toObject(i,j),xnnpack:(j=_.getXnnpack())&&proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.toObject(i,j)};return i&&($.$jspbMessageInstance=_),$}),proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinary=function(i){var _=new n.BinaryReader(i),j=new proto.mediapipe.InferenceCalculatorOptions.Delegate;return proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinaryFromReader(j,_)},proto.mediapipe.InferenceCalculatorOptions.Delegate.deserializeBinaryFromReader=function(i,_){for(;_.nextField()&&!_.isEndGroup();)switch(_.getFieldNumber()){case 1:var j=new proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite;_.readMessage(j,proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader),i.setTflite(j);break;case 2:j=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu,_.readMessage(j,proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader),i.setGpu(j);break;case 3:j=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi,_.readMessage(j,proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader),i.setNnapi(j);break;case 4:j=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack,_.readMessage(j,proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader),i.setXnnpack(j);break;default:_.skipField()}return i},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.serializeBinary=function(){var i=new n.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.serializeBinaryToWriter=function(i,_){var j=void 0;(j=i.getTflite())!=null&&_.writeMessage(1,j,proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter),(j=i.getGpu())!=null&&_.writeMessage(2,j,proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter),(j=i.getNnapi())!=null&&_.writeMessage(3,j,proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter),(j=i.getXnnpack())!=null&&_.writeMessage(4,j,proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter)},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.prototype.toObject=function(i){return proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.toObject(i,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.toObject=function(i,_){var j={};return i&&(j.$jspbMessageInstance=_),j}),proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinary=function(i){var _=new n.BinaryReader(i),j=new proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite;return proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader(j,_)},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader=function(i,_){for(;_.nextField()&&!_.isEndGroup();)_.getFieldNumber(),_.skipField();return i},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.prototype.serializeBinary=function(){var i=new n.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter=function(i,_){},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.toObject=function(i){return proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.toObject(i,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.toObject=function(i,_){var j,$={useAdvancedGpuApi:n.Message.getBooleanFieldWithDefault(_,1,!1),api:n.Message.getFieldWithDefault(_,4,0),allowPrecisionLoss:n.Message.getBooleanFieldWithDefault(_,3,!0),cachedKernelPath:(j=n.Message.getField(_,2))==null?void 0:j,serializedModelDir:(j=n.Message.getField(_,7))==null?void 0:j,modelToken:(j=n.Message.getField(_,8))==null?void 0:j,usage:n.Message.getFieldWithDefault(_,5,2)};return i&&($.$jspbMessageInstance=_),$}),proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinary=function(i){var _=new n.BinaryReader(i),j=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader(j,_)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader=function(i,_){for(;_.nextField()&&!_.isEndGroup();)switch(_.getFieldNumber()){case 1:var j=_.readBool();i.setUseAdvancedGpuApi(j);break;case 4:j=_.readEnum(),i.setApi(j);break;case 3:j=_.readBool(),i.setAllowPrecisionLoss(j);break;case 2:j=_.readString(),i.setCachedKernelPath(j);break;case 7:j=_.readString(),i.setSerializedModelDir(j);break;case 8:j=_.readString(),i.setModelToken(j);break;case 5:j=_.readEnum(),i.setUsage(j);break;default:_.skipField()}return i},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.serializeBinary=function(){var i=new n.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter=function(i,_){var j=void 0;(j=n.Message.getField(i,1))!=null&&_.writeBool(1,j),(j=n.Message.getField(i,4))!=null&&_.writeEnum(4,j),(j=n.Message.getField(i,3))!=null&&_.writeBool(3,j),(j=n.Message.getField(i,2))!=null&&_.writeString(2,j),(j=n.Message.getField(i,7))!=null&&_.writeString(7,j),(j=n.Message.getField(i,8))!=null&&_.writeString(8,j),(j=n.Message.getField(i,5))!=null&&_.writeEnum(5,j)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.Api={ANY:0,OPENGL:1,OPENCL:2},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.InferenceUsage={UNSPECIFIED:0,FAST_SINGLE_ANSWER:1,SUSTAINED_SPEED:2},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getUseAdvancedGpuApi=function(){return n.Message.getBooleanFieldWithDefault(this,1,!1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setUseAdvancedGpuApi=function(i){return n.Message.setField(this,1,i)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearUseAdvancedGpuApi=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasUseAdvancedGpuApi=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getApi=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setApi=function(i){return n.Message.setField(this,4,i)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearApi=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasApi=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getAllowPrecisionLoss=function(){return n.Message.getBooleanFieldWithDefault(this,3,!0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setAllowPrecisionLoss=function(i){return n.Message.setField(this,3,i)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearAllowPrecisionLoss=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasAllowPrecisionLoss=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getCachedKernelPath=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setCachedKernelPath=function(i){return n.Message.setField(this,2,i)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearCachedKernelPath=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasCachedKernelPath=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getSerializedModelDir=function(){return n.Message.getFieldWithDefault(this,7,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setSerializedModelDir=function(i){return n.Message.setField(this,7,i)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearSerializedModelDir=function(){return n.Message.setField(this,7,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasSerializedModelDir=function(){return n.Message.getField(this,7)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getModelToken=function(){return n.Message.getFieldWithDefault(this,8,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setModelToken=function(i){return n.Message.setField(this,8,i)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearModelToken=function(){return n.Message.setField(this,8,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasModelToken=function(){return n.Message.getField(this,8)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.getUsage=function(){return n.Message.getFieldWithDefault(this,5,2)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.setUsage=function(i){return n.Message.setField(this,5,i)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.clearUsage=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu.prototype.hasUsage=function(){return n.Message.getField(this,5)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.toObject=function(i){return proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.toObject(i,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.toObject=function(i,_){var j,$={cacheDir:(j=n.Message.getField(_,1))==null?void 0:j,modelToken:(j=n.Message.getField(_,2))==null?void 0:j,acceleratorName:(j=n.Message.getField(_,3))==null?void 0:j};return i&&($.$jspbMessageInstance=_),$}),proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinary=function(i){var _=new n.BinaryReader(i),j=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader(j,_)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader=function(i,_){for(;_.nextField()&&!_.isEndGroup();)switch(_.getFieldNumber()){case 1:var j=_.readString();i.setCacheDir(j);break;case 2:j=_.readString(),i.setModelToken(j);break;case 3:j=_.readString(),i.setAcceleratorName(j);break;default:_.skipField()}return i},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.serializeBinary=function(){var i=new n.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter=function(i,_){var j=void 0;(j=n.Message.getField(i,1))!=null&&_.writeString(1,j),(j=n.Message.getField(i,2))!=null&&_.writeString(2,j),(j=n.Message.getField(i,3))!=null&&_.writeString(3,j)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.getCacheDir=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.setCacheDir=function(i){return n.Message.setField(this,1,i)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.clearCacheDir=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.hasCacheDir=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.getModelToken=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.setModelToken=function(i){return n.Message.setField(this,2,i)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.clearModelToken=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.hasModelToken=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.getAcceleratorName=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.setAcceleratorName=function(i){return n.Message.setField(this,3,i)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.clearAcceleratorName=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi.prototype.hasAcceleratorName=function(){return n.Message.getField(this,3)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.toObject=function(i){return proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.toObject(i,this)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.toObject=function(i,_){var j={numThreads:n.Message.getFieldWithDefault(_,1,-1)};return i&&(j.$jspbMessageInstance=_),j}),proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinary=function(i){var _=new n.BinaryReader(i),j=new proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader(j,_)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader=function(i,_){for(;_.nextField()&&!_.isEndGroup();)if(_.getFieldNumber()===1){var j=_.readInt32();i.setNumThreads(j)}else _.skipField();return i},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.serializeBinary=function(){var i=new n.BinaryWriter;return proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter=function(i,_){var j;(j=n.Message.getField(i,1))!=null&&_.writeInt32(1,j)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.getNumThreads=function(){return n.Message.getFieldWithDefault(this,1,-1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.setNumThreads=function(i){return n.Message.setField(this,1,i)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.clearNumThreads=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack.prototype.hasNumThreads=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getTflite=function(){return n.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.TfLite,1)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setTflite=function(i){return n.Message.setOneofWrapperField(this,1,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],i)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearTflite=function(){return this.setTflite(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasTflite=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getGpu=function(){return n.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.Gpu,2)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setGpu=function(i){return n.Message.setOneofWrapperField(this,2,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],i)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearGpu=function(){return this.setGpu(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasGpu=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getNnapi=function(){return n.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.Nnapi,3)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setNnapi=function(i){return n.Message.setOneofWrapperField(this,3,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],i)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearNnapi=function(){return this.setNnapi(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasNnapi=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.getXnnpack=function(){return n.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate.Xnnpack,4)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.setXnnpack=function(i){return n.Message.setOneofWrapperField(this,4,proto.mediapipe.InferenceCalculatorOptions.Delegate.oneofGroups_[0],i)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.clearXnnpack=function(){return this.setXnnpack(void 0)},proto.mediapipe.InferenceCalculatorOptions.Delegate.prototype.hasXnnpack=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.InferenceCalculatorOptions.ext=new n.ExtensionFieldInfo(336783863,{ext:0},proto.mediapipe.InferenceCalculatorOptions,proto.mediapipe.InferenceCalculatorOptions.toObject,0),g.CalculatorOptions.extensionsBinary[336783863]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.InferenceCalculatorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[336783863]=proto.mediapipe.InferenceCalculatorOptions.ext,proto.mediapipe.InferenceCalculatorOptions.prototype.getModelPath=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.InferenceCalculatorOptions.prototype.setModelPath=function(i){return n.Message.setField(this,1,i)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearModelPath=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasModelPath=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.InferenceCalculatorOptions.prototype.getUseGpu=function(){return n.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.InferenceCalculatorOptions.prototype.setUseGpu=function(i){return n.Message.setField(this,2,i)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearUseGpu=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasUseGpu=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.InferenceCalculatorOptions.prototype.getUseNnapi=function(){return n.Message.getBooleanFieldWithDefault(this,3,!1)},proto.mediapipe.InferenceCalculatorOptions.prototype.setUseNnapi=function(i){return n.Message.setField(this,3,i)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearUseNnapi=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasUseNnapi=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.InferenceCalculatorOptions.prototype.getCpuNumThread=function(){return n.Message.getFieldWithDefault(this,4,-1)},proto.mediapipe.InferenceCalculatorOptions.prototype.setCpuNumThread=function(i){return n.Message.setField(this,4,i)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearCpuNumThread=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasCpuNumThread=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.InferenceCalculatorOptions.prototype.getDelegate=function(){return n.Message.getWrapperField(this,proto.mediapipe.InferenceCalculatorOptions.Delegate,5)},proto.mediapipe.InferenceCalculatorOptions.prototype.setDelegate=function(i){return n.Message.setWrapperField(this,5,i)},proto.mediapipe.InferenceCalculatorOptions.prototype.clearDelegate=function(){return this.setDelegate(void 0)},proto.mediapipe.InferenceCalculatorOptions.prototype.hasDelegate=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.InferenceCalculatorOptions.ext=new n.ExtensionFieldInfo(336783863,{ext:0},proto.mediapipe.InferenceCalculatorOptions,proto.mediapipe.InferenceCalculatorOptions.toObject,0),g.CalculatorOptions.extensionsBinary[336783863]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.InferenceCalculatorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.InferenceCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.InferenceCalculatorOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[336783863]=proto.mediapipe.InferenceCalculatorOptions.ext,A.object.extend(u,proto.mediapipe)})(inference_calculator_pb),function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=inference_calculator_pb;A.object.extend(proto,d),A.exportSymbol("proto.mediapipe.tasks.core.proto.Acceleration",null,C),A.exportSymbol("proto.mediapipe.tasks.core.proto.Acceleration.DelegateCase",null,C),proto.mediapipe.tasks.core.proto.Acceleration=function(g){n.Message.initialize(this,g,0,-1,null,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_)},A.inherits(proto.mediapipe.tasks.core.proto.Acceleration,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.Acceleration.displayName="proto.mediapipe.tasks.core.proto.Acceleration"),proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_=[[1,2,4,5]],proto.mediapipe.tasks.core.proto.Acceleration.DelegateCase={DELEGATE_NOT_SET:0,XNNPACK:1,GPU:2,TFLITE:4,NNAPI:5},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getDelegateCase=function(){return n.Message.computeOneofCase(this,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.Acceleration.prototype.toObject=function(g){return proto.mediapipe.tasks.core.proto.Acceleration.toObject(g,this)},proto.mediapipe.tasks.core.proto.Acceleration.toObject=function(g,i){var _,j={xnnpack:(_=i.getXnnpack())&&d.InferenceCalculatorOptions.Delegate.Xnnpack.toObject(g,_),gpu:(_=i.getGpu())&&d.InferenceCalculatorOptions.Delegate.Gpu.toObject(g,_),tflite:(_=i.getTflite())&&d.InferenceCalculatorOptions.Delegate.TfLite.toObject(g,_),nnapi:(_=i.getNnapi())&&d.InferenceCalculatorOptions.Delegate.Nnapi.toObject(g,_)};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.tasks.core.proto.Acceleration.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.tasks.core.proto.Acceleration;return proto.mediapipe.tasks.core.proto.Acceleration.deserializeBinaryFromReader(_,i)},proto.mediapipe.tasks.core.proto.Acceleration.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=new d.InferenceCalculatorOptions.Delegate.Xnnpack;i.readMessage(_,d.InferenceCalculatorOptions.Delegate.Xnnpack.deserializeBinaryFromReader),g.setXnnpack(_);break;case 2:_=new d.InferenceCalculatorOptions.Delegate.Gpu,i.readMessage(_,d.InferenceCalculatorOptions.Delegate.Gpu.deserializeBinaryFromReader),g.setGpu(_);break;case 4:_=new d.InferenceCalculatorOptions.Delegate.TfLite,i.readMessage(_,d.InferenceCalculatorOptions.Delegate.TfLite.deserializeBinaryFromReader),g.setTflite(_);break;case 5:_=new d.InferenceCalculatorOptions.Delegate.Nnapi,i.readMessage(_,d.InferenceCalculatorOptions.Delegate.Nnapi.deserializeBinaryFromReader),g.setNnapi(_);break;default:i.skipField()}return g},proto.mediapipe.tasks.core.proto.Acceleration.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.tasks.core.proto.Acceleration.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.tasks.core.proto.Acceleration.serializeBinaryToWriter=function(g,i){var _=void 0;(_=g.getXnnpack())!=null&&i.writeMessage(1,_,d.InferenceCalculatorOptions.Delegate.Xnnpack.serializeBinaryToWriter),(_=g.getGpu())!=null&&i.writeMessage(2,_,d.InferenceCalculatorOptions.Delegate.Gpu.serializeBinaryToWriter),(_=g.getTflite())!=null&&i.writeMessage(4,_,d.InferenceCalculatorOptions.Delegate.TfLite.serializeBinaryToWriter),(_=g.getNnapi())!=null&&i.writeMessage(5,_,d.InferenceCalculatorOptions.Delegate.Nnapi.serializeBinaryToWriter)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getXnnpack=function(){return n.Message.getWrapperField(this,d.InferenceCalculatorOptions.Delegate.Xnnpack,1)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setXnnpack=function(g){return n.Message.setOneofWrapperField(this,1,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],g)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearXnnpack=function(){return this.setXnnpack(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasXnnpack=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getGpu=function(){return n.Message.getWrapperField(this,d.InferenceCalculatorOptions.Delegate.Gpu,2)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setGpu=function(g){return n.Message.setOneofWrapperField(this,2,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],g)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearGpu=function(){return this.setGpu(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasGpu=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getTflite=function(){return n.Message.getWrapperField(this,d.InferenceCalculatorOptions.Delegate.TfLite,4)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setTflite=function(g){return n.Message.setOneofWrapperField(this,4,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],g)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearTflite=function(){return this.setTflite(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasTflite=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.core.proto.Acceleration.prototype.getNnapi=function(){return n.Message.getWrapperField(this,d.InferenceCalculatorOptions.Delegate.Nnapi,5)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.setNnapi=function(g){return n.Message.setOneofWrapperField(this,5,proto.mediapipe.tasks.core.proto.Acceleration.oneofGroups_[0],g)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.clearNnapi=function(){return this.setNnapi(void 0)},proto.mediapipe.tasks.core.proto.Acceleration.prototype.hasNnapi=function(){return n.Message.getField(this,5)!=null},A.object.extend(u,proto.mediapipe.tasks.core.proto)}(acceleration_pb);var external_file_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.tasks.core.proto.ExternalFile",null,C),A.exportSymbol("proto.mediapipe.tasks.core.proto.FileDescriptorMeta",null,C),A.exportSymbol("proto.mediapipe.tasks.core.proto.FilePointerMeta",null,C),proto.mediapipe.tasks.core.proto.ExternalFile=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.core.proto.ExternalFile,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.ExternalFile.displayName="proto.mediapipe.tasks.core.proto.ExternalFile"),proto.mediapipe.tasks.core.proto.FileDescriptorMeta=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.core.proto.FileDescriptorMeta,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.FileDescriptorMeta.displayName="proto.mediapipe.tasks.core.proto.FileDescriptorMeta"),proto.mediapipe.tasks.core.proto.FilePointerMeta=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.core.proto.FilePointerMeta,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.FilePointerMeta.displayName="proto.mediapipe.tasks.core.proto.FilePointerMeta"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.ExternalFile.prototype.toObject=function(d){return proto.mediapipe.tasks.core.proto.ExternalFile.toObject(d,this)},proto.mediapipe.tasks.core.proto.ExternalFile.toObject=function(d,g){var i,_={fileContent:g.getFileContent_asB64(),fileName:(i=n.Message.getField(g,2))==null?void 0:i,fileDescriptorMeta:(i=g.getFileDescriptorMeta())&&proto.mediapipe.tasks.core.proto.FileDescriptorMeta.toObject(d,i),filePointerMeta:(i=g.getFilePointerMeta())&&proto.mediapipe.tasks.core.proto.FilePointerMeta.toObject(d,i)};return d&&(_.$jspbMessageInstance=g),_}),proto.mediapipe.tasks.core.proto.ExternalFile.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.tasks.core.proto.ExternalFile;return proto.mediapipe.tasks.core.proto.ExternalFile.deserializeBinaryFromReader(i,g)},proto.mediapipe.tasks.core.proto.ExternalFile.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var i=g.readBytes();d.setFileContent(i);break;case 2:i=g.readString(),d.setFileName(i);break;case 3:i=new proto.mediapipe.tasks.core.proto.FileDescriptorMeta,g.readMessage(i,proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinaryFromReader),d.setFileDescriptorMeta(i);break;case 4:i=new proto.mediapipe.tasks.core.proto.FilePointerMeta,g.readMessage(i,proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinaryFromReader),d.setFilePointerMeta(i);break;default:g.skipField()}return d},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.core.proto.ExternalFile.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.core.proto.ExternalFile.serializeBinaryToWriter=function(d,g){var i=void 0;(i=n.Message.getField(d,1))!=null&&g.writeBytes(1,i),(i=n.Message.getField(d,2))!=null&&g.writeString(2,i),(i=d.getFileDescriptorMeta())!=null&&g.writeMessage(3,i,proto.mediapipe.tasks.core.proto.FileDescriptorMeta.serializeBinaryToWriter),(i=d.getFilePointerMeta())!=null&&g.writeMessage(4,i,proto.mediapipe.tasks.core.proto.FilePointerMeta.serializeBinaryToWriter)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileContent=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileContent_asB64=function(){return n.Message.bytesAsB64(this.getFileContent())},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileContent_asU8=function(){return n.Message.bytesAsU8(this.getFileContent())},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFileContent=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFileContent=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFileContent=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileName=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFileName=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFileName=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFileName=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFileDescriptorMeta=function(){return n.Message.getWrapperField(this,proto.mediapipe.tasks.core.proto.FileDescriptorMeta,3)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFileDescriptorMeta=function(d){return n.Message.setWrapperField(this,3,d)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFileDescriptorMeta=function(){return this.setFileDescriptorMeta(void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFileDescriptorMeta=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.getFilePointerMeta=function(){return n.Message.getWrapperField(this,proto.mediapipe.tasks.core.proto.FilePointerMeta,4)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.setFilePointerMeta=function(d){return n.Message.setWrapperField(this,4,d)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.clearFilePointerMeta=function(){return this.setFilePointerMeta(void 0)},proto.mediapipe.tasks.core.proto.ExternalFile.prototype.hasFilePointerMeta=function(){return n.Message.getField(this,4)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.toObject=function(d){return proto.mediapipe.tasks.core.proto.FileDescriptorMeta.toObject(d,this)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.toObject=function(d,g){var i,_={fd:(i=n.Message.getField(g,1))==null?void 0:i,length:(i=n.Message.getField(g,2))==null?void 0:i,offset:(i=n.Message.getField(g,3))==null?void 0:i};return d&&(_.$jspbMessageInstance=g),_}),proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.tasks.core.proto.FileDescriptorMeta;return proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinaryFromReader(i,g)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var i=g.readInt32();d.setFd(i);break;case 2:i=g.readInt64(),d.setLength(i);break;case 3:i=g.readInt64(),d.setOffset(i);break;default:g.skipField()}return d},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.core.proto.FileDescriptorMeta.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.serializeBinaryToWriter=function(d,g){var i=void 0;(i=n.Message.getField(d,1))!=null&&g.writeInt32(1,i),(i=n.Message.getField(d,2))!=null&&g.writeInt64(2,i),(i=n.Message.getField(d,3))!=null&&g.writeInt64(3,i)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.getFd=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.setFd=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.clearFd=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.hasFd=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.getLength=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.setLength=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.clearLength=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.hasLength=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.getOffset=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.setOffset=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.clearOffset=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.core.proto.FileDescriptorMeta.prototype.hasOffset=function(){return n.Message.getField(this,3)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.toObject=function(d){return proto.mediapipe.tasks.core.proto.FilePointerMeta.toObject(d,this)},proto.mediapipe.tasks.core.proto.FilePointerMeta.toObject=function(d,g){var i,_={pointer:(i=n.Message.getField(g,1))==null?void 0:i,length:(i=n.Message.getField(g,2))==null?void 0:i};return d&&(_.$jspbMessageInstance=g),_}),proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.tasks.core.proto.FilePointerMeta;return proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinaryFromReader(i,g)},proto.mediapipe.tasks.core.proto.FilePointerMeta.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var i=g.readUint64();d.setPointer(i);break;case 2:i=g.readInt64(),d.setLength(i);break;default:g.skipField()}return d},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.core.proto.FilePointerMeta.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.core.proto.FilePointerMeta.serializeBinaryToWriter=function(d,g){var i=void 0;(i=n.Message.getField(d,1))!=null&&g.writeUint64(1,i),(i=n.Message.getField(d,2))!=null&&g.writeInt64(2,i)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.getPointer=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.setPointer=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.clearPointer=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.hasPointer=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.getLength=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.setLength=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.clearLength=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.FilePointerMeta.prototype.hasLength=function(){return n.Message.getField(this,2)!=null},A.object.extend(u,proto.mediapipe.tasks.core.proto)})(external_file_pb),function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=acceleration_pb;A.object.extend(proto,d);var g=external_file_pb;A.object.extend(proto,g),A.exportSymbol("proto.mediapipe.tasks.core.proto.BaseOptions",null,C),proto.mediapipe.tasks.core.proto.BaseOptions=function(i){n.Message.initialize(this,i,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.core.proto.BaseOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.core.proto.BaseOptions.displayName="proto.mediapipe.tasks.core.proto.BaseOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.core.proto.BaseOptions.prototype.toObject=function(i){return proto.mediapipe.tasks.core.proto.BaseOptions.toObject(i,this)},proto.mediapipe.tasks.core.proto.BaseOptions.toObject=function(i,_){var j,$={modelAsset:(j=_.getModelAsset())&&g.ExternalFile.toObject(i,j),useStreamMode:n.Message.getBooleanFieldWithDefault(_,2,!1),acceleration:(j=_.getAcceleration())&&d.Acceleration.toObject(i,j)};return i&&($.$jspbMessageInstance=_),$}),proto.mediapipe.tasks.core.proto.BaseOptions.deserializeBinary=function(i){var _=new n.BinaryReader(i),j=new proto.mediapipe.tasks.core.proto.BaseOptions;return proto.mediapipe.tasks.core.proto.BaseOptions.deserializeBinaryFromReader(j,_)},proto.mediapipe.tasks.core.proto.BaseOptions.deserializeBinaryFromReader=function(i,_){for(;_.nextField()&&!_.isEndGroup();)switch(_.getFieldNumber()){case 1:var j=new g.ExternalFile;_.readMessage(j,g.ExternalFile.deserializeBinaryFromReader),i.setModelAsset(j);break;case 2:j=_.readBool(),i.setUseStreamMode(j);break;case 3:j=new d.Acceleration,_.readMessage(j,d.Acceleration.deserializeBinaryFromReader),i.setAcceleration(j);break;default:_.skipField()}return i},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.serializeBinary=function(){var i=new n.BinaryWriter;return proto.mediapipe.tasks.core.proto.BaseOptions.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.tasks.core.proto.BaseOptions.serializeBinaryToWriter=function(i,_){var j=void 0;(j=i.getModelAsset())!=null&&_.writeMessage(1,j,g.ExternalFile.serializeBinaryToWriter),(j=n.Message.getField(i,2))!=null&&_.writeBool(2,j),(j=i.getAcceleration())!=null&&_.writeMessage(3,j,d.Acceleration.serializeBinaryToWriter)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.getModelAsset=function(){return n.Message.getWrapperField(this,g.ExternalFile,1)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.setModelAsset=function(i){return n.Message.setWrapperField(this,1,i)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.clearModelAsset=function(){return this.setModelAsset(void 0)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.hasModelAsset=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.getUseStreamMode=function(){return n.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.setUseStreamMode=function(i){return n.Message.setField(this,2,i)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.clearUseStreamMode=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.hasUseStreamMode=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.getAcceleration=function(){return n.Message.getWrapperField(this,d.Acceleration,3)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.setAcceleration=function(i){return n.Message.setWrapperField(this,3,i)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.clearAcceleration=function(){return this.setAcceleration(void 0)},proto.mediapipe.tasks.core.proto.BaseOptions.prototype.hasAcceleration=function(){return n.Message.getField(this,3)!=null},A.object.extend(u,proto.mediapipe.tasks.core.proto)}(base_options_pb);var face_detector_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var g=calculator_options_pb;A.object.extend(proto,g);var i=base_options_pb;A.object.extend(proto,i),A.exportSymbol("proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions",null,C),proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions=function(_){n.Message.initialize(this,_,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.toObject=function(_){return proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject(_,this)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject=function(_,j){var $,re={baseOptions:($=j.getBaseOptions())&&i.BaseOptions.toObject(_,$),minDetectionConfidence:n.Message.getFloatingPointFieldWithDefault(j,2,.5),minSuppressionThreshold:n.Message.getFloatingPointFieldWithDefault(j,3,.5),numFaces:($=n.Message.getField(j,4))==null?void 0:$};return _&&(re.$jspbMessageInstance=j),re}),proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinary=function(_){var j=new n.BinaryReader(_),$=new proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions;return proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader($,j)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader=function(_,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var $=new i.BaseOptions;j.readMessage($,i.BaseOptions.deserializeBinaryFromReader),_.setBaseOptions($);break;case 2:$=j.readFloat(),_.setMinDetectionConfidence($);break;case 3:$=j.readFloat(),_.setMinSuppressionThreshold($);break;case 4:$=j.readInt32(),_.setNumFaces($);break;default:j.skipField()}return _},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.serializeBinary=function(){var _=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter(this,_),_.getResultBuffer()},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter=function(_,j){var $=void 0;($=_.getBaseOptions())!=null&&j.writeMessage(1,$,i.BaseOptions.serializeBinaryToWriter),($=n.Message.getField(_,2))!=null&&j.writeFloat(2,$),($=n.Message.getField(_,3))!=null&&j.writeFloat(3,$),($=n.Message.getField(_,4))!=null&&j.writeInt32(4,$)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext=new n.ExtensionFieldInfo(502141897,{ext:0},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[502141897]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[502141897]=proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setBaseOptions=function(_){return n.Message.setWrapperField(this,1,_)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setMinDetectionConfidence=function(_){return n.Message.setField(this,2,_)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getMinSuppressionThreshold=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,.5)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setMinSuppressionThreshold=function(_){return n.Message.setField(this,3,_)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearMinSuppressionThreshold=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasMinSuppressionThreshold=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.getNumFaces=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.setNumFaces=function(_){return n.Message.setField(this,4,_)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.clearNumFaces=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.prototype.hasNumFaces=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext=new n.ExtensionFieldInfo(502141897,{ext:0},proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[502141897]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[502141897]=proto.mediapipe.tasks.vision.face_detector.proto.FaceDetectorGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.face_detector.proto)})(face_detector_graph_options_pb);var detection_result={};Object.defineProperty(detection_result,"__esModule",{value:!0}),detection_result.convertFromDetectionProto=void 0;const DEFAULT_CATEGORY_INDEX=-1;function convertFromDetectionProto(u){var n,A,C,d,g,i,_,j,$,re,Q,ae,pe;const st=u.getScoreList(),Pe=u.getLabelIdList(),Oe=u.getLabelList(),Ze=u.getDisplayNameList(),rt={categories:[],keypoints:[]};for(let at=0;at<st.length;at++)rt.categories.push({score:st[at],index:(n=Pe[at])!==null&&n!==void 0?n:DEFAULT_CATEGORY_INDEX,categoryName:(A=Oe[at])!==null&&A!==void 0?A:"",displayName:(C=Ze[at])!==null&&C!==void 0?C:""});const gt=(d=u.getLocationData())===null||d===void 0?void 0:d.getBoundingBox();if(gt&&(rt.boundingBox={originX:(g=gt.getXmin())!==null&&g!==void 0?g:0,originY:(i=gt.getYmin())!==null&&i!==void 0?i:0,width:(_=gt.getWidth())!==null&&_!==void 0?_:0,height:(j=gt.getHeight())!==null&&j!==void 0?j:0}),($=u.getLocationData())===null||$===void 0?void 0:$.getRelativeKeypointsList().length)for(const at of u.getLocationData().getRelativeKeypointsList())rt.keypoints.push({x:(re=at.getX())!==null&&re!==void 0?re:0,y:(Q=at.getY())!==null&&Q!==void 0?Q:0,score:(ae=at.getScore())!==null&&ae!==void 0?ae:0,label:(pe=at.getKeypointLabel())!==null&&pe!==void 0?pe:""});return rt}detection_result.convertFromDetectionProto=convertFromDetectionProto;var vision_task_runner={},rect_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.NormalizedRect",null,C),A.exportSymbol("proto.mediapipe.Rect",null,C),proto.mediapipe.Rect=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.Rect,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.Rect.displayName="proto.mediapipe.Rect"),proto.mediapipe.NormalizedRect=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.NormalizedRect,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedRect.displayName="proto.mediapipe.NormalizedRect"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Rect.prototype.toObject=function(d){return proto.mediapipe.Rect.toObject(d,this)},proto.mediapipe.Rect.toObject=function(d,g){var i,_={xCenter:(i=n.Message.getField(g,1))==null?void 0:i,yCenter:(i=n.Message.getField(g,2))==null?void 0:i,height:(i=n.Message.getField(g,3))==null?void 0:i,width:(i=n.Message.getField(g,4))==null?void 0:i,rotation:n.Message.getFloatingPointFieldWithDefault(g,5,0),rectId:(i=n.Message.getField(g,6))==null?void 0:i};return d&&(_.$jspbMessageInstance=g),_}),proto.mediapipe.Rect.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.Rect;return proto.mediapipe.Rect.deserializeBinaryFromReader(i,g)},proto.mediapipe.Rect.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var i=g.readInt32();d.setXCenter(i);break;case 2:i=g.readInt32(),d.setYCenter(i);break;case 3:i=g.readInt32(),d.setHeight(i);break;case 4:i=g.readInt32(),d.setWidth(i);break;case 5:i=g.readFloat(),d.setRotation(i);break;case 6:i=g.readInt64(),d.setRectId(i);break;default:g.skipField()}return d},proto.mediapipe.Rect.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.Rect.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.Rect.serializeBinaryToWriter=function(d,g){var i=void 0;(i=n.Message.getField(d,1))!=null&&g.writeInt32(1,i),(i=n.Message.getField(d,2))!=null&&g.writeInt32(2,i),(i=n.Message.getField(d,3))!=null&&g.writeInt32(3,i),(i=n.Message.getField(d,4))!=null&&g.writeInt32(4,i),(i=n.Message.getField(d,5))!=null&&g.writeFloat(5,i),(i=n.Message.getField(d,6))!=null&&g.writeInt64(6,i)},proto.mediapipe.Rect.prototype.getXCenter=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Rect.prototype.setXCenter=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.Rect.prototype.clearXCenter=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.Rect.prototype.hasXCenter=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.Rect.prototype.getYCenter=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.Rect.prototype.setYCenter=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.Rect.prototype.clearYCenter=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.Rect.prototype.hasYCenter=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.Rect.prototype.getHeight=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.Rect.prototype.setHeight=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.Rect.prototype.clearHeight=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.Rect.prototype.hasHeight=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.Rect.prototype.getWidth=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.Rect.prototype.setWidth=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.Rect.prototype.clearWidth=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.Rect.prototype.hasWidth=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.Rect.prototype.getRotation=function(){return n.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.Rect.prototype.setRotation=function(d){return n.Message.setField(this,5,d)},proto.mediapipe.Rect.prototype.clearRotation=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.Rect.prototype.hasRotation=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.Rect.prototype.getRectId=function(){return n.Message.getFieldWithDefault(this,6,0)},proto.mediapipe.Rect.prototype.setRectId=function(d){return n.Message.setField(this,6,d)},proto.mediapipe.Rect.prototype.clearRectId=function(){return n.Message.setField(this,6,void 0)},proto.mediapipe.Rect.prototype.hasRectId=function(){return n.Message.getField(this,6)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedRect.prototype.toObject=function(d){return proto.mediapipe.NormalizedRect.toObject(d,this)},proto.mediapipe.NormalizedRect.toObject=function(d,g){var i,_={xCenter:(i=n.Message.getOptionalFloatingPointField(g,1))==null?void 0:i,yCenter:(i=n.Message.getOptionalFloatingPointField(g,2))==null?void 0:i,height:(i=n.Message.getOptionalFloatingPointField(g,3))==null?void 0:i,width:(i=n.Message.getOptionalFloatingPointField(g,4))==null?void 0:i,rotation:n.Message.getFloatingPointFieldWithDefault(g,5,0),rectId:(i=n.Message.getField(g,6))==null?void 0:i};return d&&(_.$jspbMessageInstance=g),_}),proto.mediapipe.NormalizedRect.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.NormalizedRect;return proto.mediapipe.NormalizedRect.deserializeBinaryFromReader(i,g)},proto.mediapipe.NormalizedRect.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var i=g.readFloat();d.setXCenter(i);break;case 2:i=g.readFloat(),d.setYCenter(i);break;case 3:i=g.readFloat(),d.setHeight(i);break;case 4:i=g.readFloat(),d.setWidth(i);break;case 5:i=g.readFloat(),d.setRotation(i);break;case 6:i=g.readInt64(),d.setRectId(i);break;default:g.skipField()}return d},proto.mediapipe.NormalizedRect.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.NormalizedRect.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.NormalizedRect.serializeBinaryToWriter=function(d,g){var i=void 0;(i=n.Message.getField(d,1))!=null&&g.writeFloat(1,i),(i=n.Message.getField(d,2))!=null&&g.writeFloat(2,i),(i=n.Message.getField(d,3))!=null&&g.writeFloat(3,i),(i=n.Message.getField(d,4))!=null&&g.writeFloat(4,i),(i=n.Message.getField(d,5))!=null&&g.writeFloat(5,i),(i=n.Message.getField(d,6))!=null&&g.writeInt64(6,i)},proto.mediapipe.NormalizedRect.prototype.getXCenter=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.NormalizedRect.prototype.setXCenter=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.NormalizedRect.prototype.clearXCenter=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.NormalizedRect.prototype.hasXCenter=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.NormalizedRect.prototype.getYCenter=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.NormalizedRect.prototype.setYCenter=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.NormalizedRect.prototype.clearYCenter=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.NormalizedRect.prototype.hasYCenter=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.NormalizedRect.prototype.getHeight=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.NormalizedRect.prototype.setHeight=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.NormalizedRect.prototype.clearHeight=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.NormalizedRect.prototype.hasHeight=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.NormalizedRect.prototype.getWidth=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.NormalizedRect.prototype.setWidth=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.NormalizedRect.prototype.clearWidth=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.NormalizedRect.prototype.hasWidth=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.NormalizedRect.prototype.getRotation=function(){return n.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.NormalizedRect.prototype.setRotation=function(d){return n.Message.setField(this,5,d)},proto.mediapipe.NormalizedRect.prototype.clearRotation=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.NormalizedRect.prototype.hasRotation=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.NormalizedRect.prototype.getRectId=function(){return n.Message.getFieldWithDefault(this,6,0)},proto.mediapipe.NormalizedRect.prototype.setRectId=function(d){return n.Message.setField(this,6,d)},proto.mediapipe.NormalizedRect.prototype.clearRectId=function(){return n.Message.setField(this,6,void 0)},proto.mediapipe.NormalizedRect.prototype.hasRectId=function(){return n.Message.getField(this,6)!=null},A.object.extend(u,proto.mediapipe)})(rect_pb);var task_runner={},graph_runner={};(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.createGraphRunner=u.createMediaPipeLib=u.GraphRunner=u.CALCULATOR_GRAPH_CONFIG_LISTENER_NAME=void 0;const n=platform_utils;u.CALCULATOR_GRAPH_CONFIG_LISTENER_NAME="__graph_config__";class A{constructor(i,_){this.autoResizeCanvas=!0,this.wasmModule=i,this.audioPtr=null,this.audioSize=0,this.hasMultiStreamSupport=typeof this.wasmModule._addIntToInputStream=="function",_!==void 0?this.wasmModule.canvas=_:typeof OffscreenCanvas=="undefined"||(0,n.isWebKit)()?(console.warn("OffscreenCanvas not supported and GraphRunner constructor glCanvas parameter is undefined. Creating backup canvas."),this.wasmModule.canvas=document.createElement("canvas")):this.wasmModule.canvas=new OffscreenCanvas(1,1)}initializeGraph(i){return fs(this,null,function*(){const _=yield fetch(i),j=yield _.arrayBuffer(),$=!(i.endsWith(".pbtxt")||i.endsWith(".textproto"));this.setGraph(new Uint8Array(j),$)})}setGraphFromString(i){this.setGraph(new TextEncoder().encode(i),!1)}setGraph(i,_){const j=i.length,$=this.wasmModule._malloc(j);this.wasmModule.HEAPU8.set(i,$),_?this.wasmModule._changeBinaryGraph(j,$):this.wasmModule._changeTextGraph(j,$),this.wasmModule._free($)}configureAudio(i,_,j,$,re){this.wasmModule._configureAudio||console.warn('Attempting to use configureAudio without support for input audio. Is build dep ":gl_graph_runner_audio" missing?'),$=$||"input_audio",this.wrapStringPtr($,Q=>{re=re||"audio_header",this.wrapStringPtr(re,ae=>{this.wasmModule._configureAudio(Q,ae,i,_,j)})})}setAutoResizeCanvas(i){this.autoResizeCanvas=i}setAutoRenderToScreen(i){this.wasmModule._setAutoRenderToScreen(i)}bindTextureToStream(i,_){if(!this.wasmModule.canvas)throw new Error("No OpenGL canvas configured.");_?this.wasmModule._bindTextureToStream(_):console.assert(this.wasmModule._bindTextureToCanvas());const j=this.wasmModule.canvas.getContext("webgl2")||this.wasmModule.canvas.getContext("webgl");if(!j)throw new Error("Failed to obtain WebGL context from the provided canvas. `getContext()` should only be invoked with `webgl` or `webgl2`.");let $,re;return j.texImage2D(j.TEXTURE_2D,0,j.RGBA,j.RGBA,j.UNSIGNED_BYTE,i),i.videoWidth?($=i.videoWidth,re=i.videoHeight):i.naturalWidth?($=i.naturalWidth,re=i.naturalHeight):($=i.width,re=i.height),!this.autoResizeCanvas||$===this.wasmModule.canvas.width&&re===this.wasmModule.canvas.height||(this.wasmModule.canvas.width=$,this.wasmModule.canvas.height=re),[$,re]}processGl(i,_){const[j,$]=this.bindTextureToStream(i),re=this.wasmModule._malloc(16);this.wasmModule.HEAPU32[re/4]=j,this.wasmModule.HEAPU32[re/4+1]=$,this.wasmModule.HEAPF64[re/8+1]=_,this.wasmModule._processGl(re),this.wasmModule._free(re)}wrapStringPtr(i,_){this.hasMultiStreamSupport||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const j=this.wasmModule.stringToNewUTF8(i);_(j),this.wasmModule._free(j)}wrapStringPtrPtr(i,_){this.hasMultiStreamSupport||console.error("No wasm multistream support detected: ensure dependency inclusion of :gl_graph_runner_internal_multi_input target");const j=new Uint32Array(i.length);for(let re=0;re<i.length;re++)j[re]=this.wasmModule.stringToNewUTF8(i[re]);const $=this.wasmModule._malloc(4*j.length);this.wasmModule.HEAPU32.set(j,$>>2),_($);for(const re of j)this.wasmModule._free(re);this.wasmModule._free($)}getCalculatorGraphConfig(i,_){const j=u.CALCULATOR_GRAPH_CONFIG_LISTENER_NAME;this.setListener(j,$=>{i($)}),this.wrapStringPtr(j,$=>{this.wasmModule._getGraphConfig($,_)}),delete this.wasmModule.simpleListeners[j]}setListener(i,_){this.wasmModule.simpleListeners=this.wasmModule.simpleListeners||{},this.wasmModule.simpleListeners[i]=_}setVectorListener(i,_){let j=[];this.wasmModule.simpleListeners=this.wasmModule.simpleListeners||{},this.wasmModule.simpleListeners[i]=($,re,Q)=>{re?(_(j,Q),j=[]):j.push($)}}attachErrorListener(i){this.wasmModule.errorListener=i}attachEmptyPacketListener(i,_){this.wasmModule.emptyPacketListeners=this.wasmModule.emptyPacketListeners||{},this.wasmModule.emptyPacketListeners[i]=_}addAudioToStream(i,_,j){this.addAudioToStreamWithShape(i,0,0,_,j)}addAudioToStreamWithShape(i,_,j,$,re){const Q=4*i.length;this.audioSize!==Q&&(this.audioPtr&&this.wasmModule._free(this.audioPtr),this.audioPtr=this.wasmModule._malloc(Q),this.audioSize=Q),this.wasmModule.HEAPF32.set(i,this.audioPtr/4),this.wrapStringPtr($,ae=>{this.wasmModule._addAudioToInputStream(this.audioPtr,_,j,ae,re)})}addGpuBufferToStream(i,_,j){this.wrapStringPtr(_,$=>{const[re,Q]=this.bindTextureToStream(i,$);this.wasmModule._addBoundTextureToStream($,re,Q,j)})}addBoolToStream(i,_,j){this.wrapStringPtr(_,$=>{this.wasmModule._addBoolToInputStream(i,$,j)})}addDoubleToStream(i,_,j){this.wrapStringPtr(_,$=>{this.wasmModule._addDoubleToInputStream(i,$,j)})}addFloatToStream(i,_,j){this.wrapStringPtr(_,$=>{this.wasmModule._addFloatToInputStream(i,$,j)})}addIntToStream(i,_,j){this.wrapStringPtr(_,$=>{this.wasmModule._addIntToInputStream(i,$,j)})}addStringToStream(i,_,j){this.wrapStringPtr(_,$=>{this.wrapStringPtr(i,re=>{this.wasmModule._addStringToInputStream(re,$,j)})})}addStringRecordToStream(i,_,j){this.wrapStringPtr(_,$=>{this.wrapStringPtrPtr(Object.keys(i),re=>{this.wrapStringPtrPtr(Object.values(i),Q=>{this.wasmModule._addFlatHashMapToInputStream(re,Q,Object.keys(i).length,$,j)})})})}addProtoToStream(i,_,j,$){this.wrapStringPtr(j,re=>{this.wrapStringPtr(_,Q=>{const ae=this.wasmModule._malloc(i.length);this.wasmModule.HEAPU8.set(i,ae),this.wasmModule._addProtoToInputStream(ae,i.length,Q,re,$),this.wasmModule._free(ae)})})}addEmptyPacketToStream(i,_){this.wrapStringPtr(i,j=>{this.wasmModule._addEmptyPacketToInputStream(j,_)})}addBoolToInputSidePacket(i,_){this.wrapStringPtr(_,j=>{this.wasmModule._addBoolToInputSidePacket(i,j)})}addDoubleToInputSidePacket(i,_){this.wrapStringPtr(_,j=>{this.wasmModule._addDoubleToInputSidePacket(i,j)})}addFloatToInputSidePacket(i,_){this.wrapStringPtr(_,j=>{this.wasmModule._addFloatToInputSidePacket(i,j)})}addIntToInputSidePacket(i,_){this.wrapStringPtr(_,j=>{this.wasmModule._addIntToInputSidePacket(i,j)})}addStringToInputSidePacket(i,_){this.wrapStringPtr(_,j=>{this.wrapStringPtr(i,$=>{this.wasmModule._addStringToInputSidePacket($,j)})})}addProtoToInputSidePacket(i,_,j){this.wrapStringPtr(j,$=>{this.wrapStringPtr(_,re=>{const Q=this.wasmModule._malloc(i.length);this.wasmModule.HEAPU8.set(i,Q),this.wasmModule._addProtoToInputSidePacket(Q,i.length,re,$),this.wasmModule._free(Q)})})}attachBoolListener(i,_){this.setListener(i,_),this.wrapStringPtr(i,j=>{this.wasmModule._attachBoolListener(j)})}attachBoolVectorListener(i,_){this.setVectorListener(i,_),this.wrapStringPtr(i,j=>{this.wasmModule._attachBoolVectorListener(j)})}attachIntListener(i,_){this.setListener(i,_),this.wrapStringPtr(i,j=>{this.wasmModule._attachIntListener(j)})}attachIntVectorListener(i,_){this.setVectorListener(i,_),this.wrapStringPtr(i,j=>{this.wasmModule._attachIntVectorListener(j)})}attachDoubleListener(i,_){this.setListener(i,_),this.wrapStringPtr(i,j=>{this.wasmModule._attachDoubleListener(j)})}attachDoubleVectorListener(i,_){this.setVectorListener(i,_),this.wrapStringPtr(i,j=>{this.wasmModule._attachDoubleVectorListener(j)})}attachFloatListener(i,_){this.setListener(i,_),this.wrapStringPtr(i,j=>{this.wasmModule._attachFloatListener(j)})}attachFloatVectorListener(i,_){this.setVectorListener(i,_),this.wrapStringPtr(i,j=>{this.wasmModule._attachFloatVectorListener(j)})}attachStringListener(i,_){this.setListener(i,_),this.wrapStringPtr(i,j=>{this.wasmModule._attachStringListener(j)})}attachStringVectorListener(i,_){this.setVectorListener(i,_),this.wrapStringPtr(i,j=>{this.wasmModule._attachStringVectorListener(j)})}attachProtoListener(i,_,j){this.setListener(i,_),this.wrapStringPtr(i,$=>{this.wasmModule._attachProtoListener($,j||!1)})}attachProtoVectorListener(i,_,j){this.setVectorListener(i,_),this.wrapStringPtr(i,$=>{this.wasmModule._attachProtoVectorListener($,j||!1)})}attachAudioListener(i,_,j){this.wasmModule._attachAudioListener||console.warn('Attempting to use attachAudioListener without support for output audio. Is build dep ":gl_graph_runner_audio_out" missing?'),this.setListener(i,($,re)=>{const Q=new Float32Array($.buffer,$.byteOffset,$.length/4);_(Q,re)}),this.wrapStringPtr(i,$=>{this.wasmModule._attachAudioListener($,j||!1)})}finishProcessing(){this.wasmModule._waitUntilIdle()}closeGraph(){this.wasmModule._closeGraph(),this.wasmModule.simpleListeners=void 0,this.wasmModule.emptyPacketListeners=void 0}}function C(g){return fs(this,null,function*(){if(typeof importScripts!="function"){const i=document.createElement("script");return i.setAttribute("src",g),i.setAttribute("crossorigin","anonymous"),new Promise(_=>{i.addEventListener("load",()=>{_()},!1),i.addEventListener("error",()=>{_()},!1),document.body.appendChild(i)})}importScripts(g.toString())})}function d(g,i,_,j,$){return fs(this,null,function*(){const re=[];if(i&&re.push(i),_&&re.push(_),re.length&&(yield Promise.all(re.map(C))),!self.ModuleFactory)throw new Error("ModuleFactory not set.");if(self.Module&&$){const ae=self.Module;ae.locateFile=$.locateFile,$.mainScriptUrlOrBlob&&(ae.mainScriptUrlOrBlob=$.mainScriptUrlOrBlob)}const Q=yield self.ModuleFactory(self.Module||$);return self.ModuleFactory=self.Module=void 0,new g(Q,j)})}u.GraphRunner=A,u.createMediaPipeLib=d,u.createGraphRunner=function(g,i,_,j){return fs(this,null,function*(){return d(A,g,i,_,j)})}})(graph_runner);var register_model_resources_graph_service={};function SupportModelResourcesGraphService(u){return class extends u{registerModelResourcesGraphService(){this.wasmModule._registerModelResourcesGraphService()}}}Object.defineProperty(register_model_resources_graph_service,"__esModule",{value:!0}),register_model_resources_graph_service.SupportModelResourcesGraphService=void 0,register_model_resources_graph_service.SupportModelResourcesGraphService=SupportModelResourcesGraphService,Object.defineProperty(task_runner,"__esModule",{value:!0}),task_runner.TaskRunner=task_runner.createTaskRunner=task_runner.CachedGraphRunner=void 0;const inference_calculator_pb_1=inference_calculator_pb,calculator_pb_1=calculator_pb,acceleration_pb_1=acceleration_pb,external_file_pb_1=external_file_pb,graph_runner_1$1=graph_runner,register_model_resources_graph_service_1$1=register_model_resources_graph_service,NO_ASSETS=void 0,FREE_MEMORY_STREAM="free_memory",UNUSED_STREAM_SUFFIX="_unused_out",CachedGraphRunnerType=(0,register_model_resources_graph_service_1$1.SupportModelResourcesGraphService)(graph_runner_1$1.GraphRunner);class CachedGraphRunner extends CachedGraphRunnerType{}function createTaskRunner(u,n,A,C){return fs(this,null,function*(){const d={locateFile:()=>A.wasmBinaryPath.toString()},g=yield(0,graph_runner_1$1.createMediaPipeLib)(u,A.wasmLoaderPath,NO_ASSETS,n,d);return yield g.setOptions(C),g})}task_runner.CachedGraphRunner=CachedGraphRunner,task_runner.createTaskRunner=createTaskRunner;class TaskRunner{static createInstance(n,A,C,d){return fs(this,null,function*(){return createTaskRunner(n,A,C,d)})}constructor(n){this.graphRunner=n,this.processingErrors=[],this.latestOutputTimestamp=0,this.graphRunner.setAutoRenderToScreen(!1)}applyOptions(n){var A,C,d,g,i,_;const j=n.baseOptions||{};if(!((A=n.baseOptions)===null||A===void 0)&&A.modelAssetBuffer&&(!((C=n.baseOptions)===null||C===void 0)&&C.modelAssetPath))throw new Error("Cannot set both baseOptions.modelAssetPath and baseOptions.modelAssetBuffer");if(!(!((d=this.baseOptions.getModelAsset())===null||d===void 0)&&d.hasFileContent()||!((g=this.baseOptions.getModelAsset())===null||g===void 0)&&g.hasFileName()||!((i=n.baseOptions)===null||i===void 0)&&i.modelAssetBuffer||!((_=n.baseOptions)===null||_===void 0)&&_.modelAssetPath))throw new Error("Either baseOptions.modelAssetPath or baseOptions.modelAssetBuffer must be set");return this.setAcceleration(j),j.modelAssetPath?fetch(j.modelAssetPath.toString()).then($=>{if($.ok)return $.arrayBuffer();throw new Error(`Failed to fetch model: ${j.modelAssetPath} (${$.status})`)}).then($=>{try{this.graphRunner.wasmModule.FS_unlink("/model.dat")}catch(re){}this.graphRunner.wasmModule.FS_createDataFile("/","model.dat",new Uint8Array($),!0,!1,!1),this.setExternalFile("/model.dat"),this.refreshGraph(),this.onGraphRefreshed()}):(this.setExternalFile(j.modelAssetBuffer),this.refreshGraph(),this.onGraphRefreshed(),Promise.resolve())}onGraphRefreshed(){}getCalculatorGraphConfig(){let n;if(this.graphRunner.getCalculatorGraphConfig(A=>{n=calculator_pb_1.CalculatorGraphConfig.deserializeBinary(A)}),!n)throw new Error("Failed to retrieve CalculatorGraphConfig");return n}setGraph(n,A){this.graphRunner.attachErrorListener((C,d)=>{this.processingErrors.push(new Error(d))}),this.graphRunner.registerModelResourcesGraphService(),this.graphRunner.setGraph(n,A),this.keepaliveNode=void 0,this.handleErrors()}finishProcessing(){this.graphRunner.finishProcessing(),this.handleErrors()}setLatestOutputTimestamp(n){this.latestOutputTimestamp=Math.max(this.latestOutputTimestamp,n)}getSynctheticTimestamp(){return this.latestOutputTimestamp+1}handleErrors(){try{const n=this.processingErrors.length;if(n===1)throw new Error(this.processingErrors[0].message);if(n>1)throw new Error("Encountered multiple errors: "+this.processingErrors.map(A=>A.message).join(", "))}finally{this.processingErrors=[]}}setExternalFile(n){const A=this.baseOptions.getModelAsset()||new external_file_pb_1.ExternalFile;typeof n=="string"?(A.setFileName(n),A.clearFileContent()):n instanceof Uint8Array&&(A.setFileContent(n),A.clearFileName()),this.baseOptions.setModelAsset(A)}setAcceleration(n){let A=this.baseOptions.getAcceleration();A||(A=new acceleration_pb_1.Acceleration,A.setTflite(new inference_calculator_pb_1.InferenceCalculatorOptions.Delegate.TfLite)),"delegate"in n&&(n.delegate==="GPU"?A.setGpu(new inference_calculator_pb_1.InferenceCalculatorOptions.Delegate.Gpu):A.setTflite(new inference_calculator_pb_1.InferenceCalculatorOptions.Delegate.TfLite)),this.baseOptions.setAcceleration(A)}addKeepaliveNode(n){this.keepaliveNode=new calculator_pb_1.CalculatorGraphConfig.Node,this.keepaliveNode.setCalculator("PassThroughCalculator"),this.keepaliveNode.addInputStream(FREE_MEMORY_STREAM),this.keepaliveNode.addOutputStream(FREE_MEMORY_STREAM+UNUSED_STREAM_SUFFIX),n.addInputStream(FREE_MEMORY_STREAM),n.addNode(this.keepaliveNode)}keepStreamAlive(n){this.keepaliveNode.addInputStream(n),this.keepaliveNode.addOutputStream(n+UNUSED_STREAM_SUFFIX)}freeKeepaliveStreams(){this.graphRunner.addBoolToStream(!0,FREE_MEMORY_STREAM,this.latestOutputTimestamp)}close(){this.keepaliveNode=void 0,this.graphRunner.closeGraph()}}task_runner.TaskRunner=TaskRunner;var graph_runner_image_lib={};function SupportImage(u){return class extends u{get wasmImageModule(){return this.wasmModule}addGpuBufferAsImageToStream(n,A,C){this.wrapStringPtr(A,d=>{const[g,i]=this.bindTextureToStream(n,d);this.wasmImageModule._addBoundTextureAsImageToStream(d,g,i,C)})}attachImageListener(n,A){this.setListener(n,A),this.wrapStringPtr(n,C=>{this.wasmImageModule._attachImageListener(C)})}attachImageVectorListener(n,A){this.setVectorListener(n,A),this.wrapStringPtr(n,C=>{this.wasmImageModule._attachImageVectorListener(C)})}}}Object.defineProperty(graph_runner_image_lib,"__esModule",{value:!0}),graph_runner_image_lib.SupportImage=void 0,graph_runner_image_lib.SupportImage=SupportImage,Object.defineProperty(vision_task_runner,"__esModule",{value:!0}),vision_task_runner.VisionTaskRunner=vision_task_runner.VisionGraphRunner=void 0;const rect_pb_1=rect_pb,task_runner_1=task_runner,image_1$1=image,image_shader_context_1=image_shader_context,mask_1$1=mask,graph_runner_1=graph_runner,graph_runner_image_lib_1=graph_runner_image_lib,platform_utils_1=platform_utils,register_model_resources_graph_service_1=register_model_resources_graph_service,GraphRunnerVisionType=(0,register_model_resources_graph_service_1.SupportModelResourcesGraphService)((0,graph_runner_image_lib_1.SupportImage)(graph_runner_1.GraphRunner));class VisionGraphRunner extends GraphRunnerVisionType{}function createCanvas(){return typeof OffscreenCanvas!="undefined"&&!(0,platform_utils_1.isWebKit)()?void 0:document.createElement("canvas")}vision_task_runner.VisionGraphRunner=VisionGraphRunner;class VisionTaskRunner extends task_runner_1.TaskRunner{static createVisionInstance(n,A,C){return fs(this,null,function*(){var d;const g=(d=C.canvas)!==null&&d!==void 0?d:createCanvas();return task_runner_1.TaskRunner.createInstance(n,g,A,C)})}constructor(n,A,C,d){super(n),this.graphRunner=n,this.imageStreamName=A,this.normRectStreamName=C,this.roiAllowed=d,this.shaderContext=new image_shader_context_1.MPImageShaderContext}applyOptions(n){if("runningMode"in n){const A=!!n.runningMode&&n.runningMode!=="IMAGE";this.baseOptions.setUseStreamMode(A)}if(n.canvas!==void 0&&this.graphRunner.wasmModule.canvas!==n.canvas)throw new Error("You must create a new task to reset the canvas.");return super.applyOptions(n)}processImageData(n,A){var C;if(!((C=this.baseOptions)===null||C===void 0)&&C.getUseStreamMode())throw new Error("Task is not initialized with image mode. 'runningMode' must be set to 'IMAGE'.");this.process(n,A,this.getSynctheticTimestamp())}processVideoData(n,A,C){var d;if(!(!((d=this.baseOptions)===null||d===void 0)&&d.getUseStreamMode()))throw new Error("Task is not initialized with video mode. 'runningMode' must be set to 'VIDEO'.");this.process(n,A,C)}getImageSourceSize(n){return n.videoWidth!==void 0?[n.videoWidth,n.videoHeight]:n.naturalWidth!==void 0?[n.naturalWidth,n.naturalHeight]:[n.width,n.height]}convertToNormalizedRect(n,A){const C=new rect_pb_1.NormalizedRect;if(A!=null&&A.regionOfInterest){if(!this.roiAllowed)throw new Error("This task doesn't support region-of-interest.");const d=A.regionOfInterest;if(d.left>=d.right||d.top>=d.bottom)throw new Error("Expected RectF with left < right and top < bottom.");if(d.left<0||d.top<0||d.right>1||d.bottom>1)throw new Error("Expected RectF values to be in [0,1].");C.setXCenter((d.left+d.right)/2),C.setYCenter((d.top+d.bottom)/2),C.setWidth(d.right-d.left),C.setHeight(d.bottom-d.top)}else C.setXCenter(.5),C.setYCenter(.5),C.setWidth(1),C.setHeight(1);if(A!=null&&A.rotationDegrees){if((A==null?void 0:A.rotationDegrees)%90!=0)throw new Error("Expected rotation to be a multiple of 90\xB0.");if(C.setRotation(-Math.PI*A.rotationDegrees/180),(A==null?void 0:A.rotationDegrees)%180!=0){const[d,g]=this.getImageSourceSize(n),i=C.getHeight()*g/d,_=C.getWidth()*d/g;C.setWidth(i),C.setHeight(_)}}return C}process(n,A,C){const d=this.convertToNormalizedRect(n,A);this.graphRunner.addProtoToStream(d.serializeBinary(),"mediapipe.NormalizedRect",this.normRectStreamName,C),this.graphRunner.addGpuBufferAsImageToStream(n,this.imageStreamName,C!=null?C:performance.now()),this.finishProcessing()}convertToMPImage(n,A){const{data:C,width:d,height:g}=n,i=d*g;let _;if(C instanceof Uint8Array)if(C.length===3*i){const $=new Uint8ClampedArray(4*i);for(let re=0;re<i;++re)$[4*re]=C[3*re],$[4*re+1]=C[3*re+1],$[4*re+2]=C[3*re+2],$[4*re+3]=255;_=new ImageData($,d,g)}else{if(C.length!==4*i)throw new Error("Unsupported channel count: "+C.length/i);_=new ImageData(new Uint8ClampedArray(C.buffer,C.byteOffset,C.length),d,g)}else{if(!(C instanceof WebGLTexture))throw new Error(`Unsupported format: ${C.constructor.name}`);_=C}const j=new image_1$1.MPImage([_],!1,!1,this.graphRunner.wasmModule.canvas,this.shaderContext,d,g);return A?j.clone():j}convertToMPMask(n,A){const{data:C,width:d,height:g}=n,i=d*g;let _;if(C instanceof Uint8Array||C instanceof Float32Array){if(C.length!==i)throw new Error("Unsupported channel count: "+C.length/i);_=C}else _=C;const j=new mask_1$1.MPMask([_],!1,this.graphRunner.wasmModule.canvas,this.shaderContext,d,g);return A?j.clone():j}close(){this.shaderContext.close(),super.close()}}vision_task_runner.VisionTaskRunner=VisionTaskRunner;var face_detector_options={};Object.defineProperty(face_detector_options,"__esModule",{value:!0});var face_detector_result={};Object.defineProperty(face_detector_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(st,Pe,Oe,Ze){Ze===void 0&&(Ze=Oe);var rt=Object.getOwnPropertyDescriptor(Pe,Oe);rt&&!("get"in rt?!Pe.__esModule:rt.writable||rt.configurable)||(rt={enumerable:!0,get:function(){return Pe[Oe]}}),Object.defineProperty(st,Ze,rt)}:function(st,Pe,Oe,Ze){Ze===void 0&&(Ze=Oe),st[Ze]=Pe[Oe]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(st,Pe){for(var Oe in st)Oe==="default"||Object.prototype.hasOwnProperty.call(Pe,Oe)||n(Pe,st,Oe)};Object.defineProperty(u,"__esModule",{value:!0}),u.FaceDetector=void 0;const C=calculator_pb,d=calculator_options_pb,g=detection_pb,i=base_options_pb,_=face_detector_graph_options_pb,j=detection_result,$=vision_task_runner,re="image_in",Q="norm_rect_in",ae="detections";A(face_detector_options,u),A(face_detector_result,u);class pe extends $.VisionTaskRunner{static createFromOptions(Pe,Oe){return $.VisionTaskRunner.createVisionInstance(pe,Pe,Oe)}static createFromModelBuffer(Pe,Oe){return $.VisionTaskRunner.createVisionInstance(pe,Pe,{baseOptions:{modelAssetBuffer:Oe}})}static createFromModelPath(Pe,Oe){return fs(this,null,function*(){return $.VisionTaskRunner.createVisionInstance(pe,Pe,{baseOptions:{modelAssetPath:Oe}})})}constructor(Pe,Oe){super(new $.VisionGraphRunner(Pe,Oe),re,Q,!1),this.result={detections:[]},this.options=new _.FaceDetectorGraphOptions,this.options.setBaseOptions(new i.BaseOptions),this.options.setMinDetectionConfidence(.5),this.options.setMinSuppressionThreshold(.3)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(Pe){this.options.setBaseOptions(Pe)}setOptions(Pe){var Oe,Ze;return"minDetectionConfidence"in Pe&&this.options.setMinDetectionConfidence((Oe=Pe.minDetectionConfidence)!==null&&Oe!==void 0?Oe:.5),"minSuppressionThreshold"in Pe&&this.options.setMinSuppressionThreshold((Ze=Pe.minSuppressionThreshold)!==null&&Ze!==void 0?Ze:.3),this.applyOptions(Pe)}detect(Pe,Oe){return this.result={detections:[]},this.processImageData(Pe,Oe),this.result}detectForVideo(Pe,Oe,Ze){return this.result={detections:[]},this.processVideoData(Pe,Ze,Oe),this.result}addJsFaceDetections(Pe){for(const Oe of Pe){const Ze=g.Detection.deserializeBinary(Oe);this.result.detections.push((0,j.convertFromDetectionProto)(Ze))}}refreshGraph(){const Pe=new C.CalculatorGraphConfig;Pe.addInputStream(re),Pe.addInputStream(Q),Pe.addOutputStream(ae);const Oe=new d.CalculatorOptions;Oe.setExtension(_.FaceDetectorGraphOptions.ext,this.options);const Ze=new C.CalculatorGraphConfig.Node;Ze.setCalculator("mediapipe.tasks.vision.face_detector.FaceDetectorGraph"),Ze.addInputStream("IMAGE:"+re),Ze.addInputStream("NORM_RECT:"+Q),Ze.addOutputStream("DETECTIONS:"+ae),Ze.setOptions(Oe),Pe.addNode(Ze),this.graphRunner.attachProtoVectorListener(ae,(gt,at)=>{this.addJsFaceDetections(gt),this.setLatestOutputTimestamp(at)}),this.graphRunner.attachEmptyPacketListener(ae,gt=>{this.setLatestOutputTimestamp(gt)});const rt=Pe.serializeBinary();this.setGraph(new Uint8Array(rt),!0)}}u.FaceDetector=pe}(face_detector);var face_landmarker={},classification_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.Classification",null,C),A.exportSymbol("proto.mediapipe.ClassificationList",null,C),A.exportSymbol("proto.mediapipe.ClassificationListCollection",null,C),proto.mediapipe.Classification=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.Classification,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.Classification.displayName="proto.mediapipe.Classification"),proto.mediapipe.ClassificationList=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.ClassificationList.repeatedFields_,null)},A.inherits(proto.mediapipe.ClassificationList,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.ClassificationList.displayName="proto.mediapipe.ClassificationList"),proto.mediapipe.ClassificationListCollection=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.ClassificationListCollection.repeatedFields_,null)},A.inherits(proto.mediapipe.ClassificationListCollection,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.ClassificationListCollection.displayName="proto.mediapipe.ClassificationListCollection"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Classification.prototype.toObject=function(d){return proto.mediapipe.Classification.toObject(d,this)},proto.mediapipe.Classification.toObject=function(d,g){var i,_={index:(i=n.Message.getField(g,1))==null?void 0:i,score:(i=n.Message.getOptionalFloatingPointField(g,2))==null?void 0:i,label:(i=n.Message.getField(g,3))==null?void 0:i,displayName:(i=n.Message.getField(g,4))==null?void 0:i};return d&&(_.$jspbMessageInstance=g),_}),proto.mediapipe.Classification.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.Classification;return proto.mediapipe.Classification.deserializeBinaryFromReader(i,g)},proto.mediapipe.Classification.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var i=g.readInt32();d.setIndex(i);break;case 2:i=g.readFloat(),d.setScore(i);break;case 3:i=g.readString(),d.setLabel(i);break;case 4:i=g.readString(),d.setDisplayName(i);break;default:g.skipField()}return d},proto.mediapipe.Classification.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.Classification.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.Classification.serializeBinaryToWriter=function(d,g){var i=void 0;(i=n.Message.getField(d,1))!=null&&g.writeInt32(1,i),(i=n.Message.getField(d,2))!=null&&g.writeFloat(2,i),(i=n.Message.getField(d,3))!=null&&g.writeString(3,i),(i=n.Message.getField(d,4))!=null&&g.writeString(4,i)},proto.mediapipe.Classification.prototype.getIndex=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Classification.prototype.setIndex=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.Classification.prototype.clearIndex=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.Classification.prototype.hasIndex=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.Classification.prototype.getScore=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.Classification.prototype.setScore=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.Classification.prototype.clearScore=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.Classification.prototype.hasScore=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.Classification.prototype.getLabel=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.Classification.prototype.setLabel=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.Classification.prototype.clearLabel=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.Classification.prototype.hasLabel=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.Classification.prototype.getDisplayName=function(){return n.Message.getFieldWithDefault(this,4,"")},proto.mediapipe.Classification.prototype.setDisplayName=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.Classification.prototype.clearDisplayName=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.Classification.prototype.hasDisplayName=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.ClassificationList.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ClassificationList.prototype.toObject=function(d){return proto.mediapipe.ClassificationList.toObject(d,this)},proto.mediapipe.ClassificationList.toObject=function(d,g){var i={classificationList:n.Message.toObjectList(g.getClassificationList(),proto.mediapipe.Classification.toObject,d)};return d&&(i.$jspbMessageInstance=g),i}),proto.mediapipe.ClassificationList.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.ClassificationList;return proto.mediapipe.ClassificationList.deserializeBinaryFromReader(i,g)},proto.mediapipe.ClassificationList.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)if(g.getFieldNumber()===1){var i=new proto.mediapipe.Classification;g.readMessage(i,proto.mediapipe.Classification.deserializeBinaryFromReader),d.addClassification(i)}else g.skipField();return d},proto.mediapipe.ClassificationList.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.ClassificationList.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.ClassificationList.serializeBinaryToWriter=function(d,g){var i;(i=d.getClassificationList()).length>0&&g.writeRepeatedMessage(1,i,proto.mediapipe.Classification.serializeBinaryToWriter)},proto.mediapipe.ClassificationList.prototype.getClassificationList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.Classification,1)},proto.mediapipe.ClassificationList.prototype.setClassificationList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.ClassificationList.prototype.addClassification=function(d,g){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.Classification,g)},proto.mediapipe.ClassificationList.prototype.clearClassificationList=function(){return this.setClassificationList([])},proto.mediapipe.ClassificationListCollection.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ClassificationListCollection.prototype.toObject=function(d){return proto.mediapipe.ClassificationListCollection.toObject(d,this)},proto.mediapipe.ClassificationListCollection.toObject=function(d,g){var i={classificationListList:n.Message.toObjectList(g.getClassificationListList(),proto.mediapipe.ClassificationList.toObject,d)};return d&&(i.$jspbMessageInstance=g),i}),proto.mediapipe.ClassificationListCollection.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.ClassificationListCollection;return proto.mediapipe.ClassificationListCollection.deserializeBinaryFromReader(i,g)},proto.mediapipe.ClassificationListCollection.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)if(g.getFieldNumber()===1){var i=new proto.mediapipe.ClassificationList;g.readMessage(i,proto.mediapipe.ClassificationList.deserializeBinaryFromReader),d.addClassificationList(i)}else g.skipField();return d},proto.mediapipe.ClassificationListCollection.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.ClassificationListCollection.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.ClassificationListCollection.serializeBinaryToWriter=function(d,g){var i;(i=d.getClassificationListList()).length>0&&g.writeRepeatedMessage(1,i,proto.mediapipe.ClassificationList.serializeBinaryToWriter)},proto.mediapipe.ClassificationListCollection.prototype.getClassificationListList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.ClassificationList,1)},proto.mediapipe.ClassificationListCollection.prototype.setClassificationListList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.ClassificationListCollection.prototype.addClassificationList=function(d,g){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.ClassificationList,g)},proto.mediapipe.ClassificationListCollection.prototype.clearClassificationListList=function(){return this.setClassificationListList([])},A.object.extend(u,proto.mediapipe)})(classification_pb);var landmark_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.Landmark",null,C),A.exportSymbol("proto.mediapipe.LandmarkList",null,C),A.exportSymbol("proto.mediapipe.LandmarkListCollection",null,C),A.exportSymbol("proto.mediapipe.NormalizedLandmark",null,C),A.exportSymbol("proto.mediapipe.NormalizedLandmarkList",null,C),A.exportSymbol("proto.mediapipe.NormalizedLandmarkListCollection",null,C),proto.mediapipe.Landmark=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.Landmark,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.Landmark.displayName="proto.mediapipe.Landmark"),proto.mediapipe.LandmarkList=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.LandmarkList.repeatedFields_,null)},A.inherits(proto.mediapipe.LandmarkList,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.LandmarkList.displayName="proto.mediapipe.LandmarkList"),proto.mediapipe.LandmarkListCollection=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.LandmarkListCollection.repeatedFields_,null)},A.inherits(proto.mediapipe.LandmarkListCollection,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.LandmarkListCollection.displayName="proto.mediapipe.LandmarkListCollection"),proto.mediapipe.NormalizedLandmark=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.NormalizedLandmark,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedLandmark.displayName="proto.mediapipe.NormalizedLandmark"),proto.mediapipe.NormalizedLandmarkList=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.NormalizedLandmarkList.repeatedFields_,null)},A.inherits(proto.mediapipe.NormalizedLandmarkList,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedLandmarkList.displayName="proto.mediapipe.NormalizedLandmarkList"),proto.mediapipe.NormalizedLandmarkListCollection=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.NormalizedLandmarkListCollection.repeatedFields_,null)},A.inherits(proto.mediapipe.NormalizedLandmarkListCollection,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.NormalizedLandmarkListCollection.displayName="proto.mediapipe.NormalizedLandmarkListCollection"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Landmark.prototype.toObject=function(d){return proto.mediapipe.Landmark.toObject(d,this)},proto.mediapipe.Landmark.toObject=function(d,g){var i,_={x:(i=n.Message.getOptionalFloatingPointField(g,1))==null?void 0:i,y:(i=n.Message.getOptionalFloatingPointField(g,2))==null?void 0:i,z:(i=n.Message.getOptionalFloatingPointField(g,3))==null?void 0:i,visibility:(i=n.Message.getOptionalFloatingPointField(g,4))==null?void 0:i,presence:(i=n.Message.getOptionalFloatingPointField(g,5))==null?void 0:i};return d&&(_.$jspbMessageInstance=g),_}),proto.mediapipe.Landmark.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.Landmark;return proto.mediapipe.Landmark.deserializeBinaryFromReader(i,g)},proto.mediapipe.Landmark.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var i=g.readFloat();d.setX(i);break;case 2:i=g.readFloat(),d.setY(i);break;case 3:i=g.readFloat(),d.setZ(i);break;case 4:i=g.readFloat(),d.setVisibility(i);break;case 5:i=g.readFloat(),d.setPresence(i);break;default:g.skipField()}return d},proto.mediapipe.Landmark.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.Landmark.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.Landmark.serializeBinaryToWriter=function(d,g){var i=void 0;(i=n.Message.getField(d,1))!=null&&g.writeFloat(1,i),(i=n.Message.getField(d,2))!=null&&g.writeFloat(2,i),(i=n.Message.getField(d,3))!=null&&g.writeFloat(3,i),(i=n.Message.getField(d,4))!=null&&g.writeFloat(4,i),(i=n.Message.getField(d,5))!=null&&g.writeFloat(5,i)},proto.mediapipe.Landmark.prototype.getX=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.Landmark.prototype.setX=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.Landmark.prototype.clearX=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.Landmark.prototype.hasX=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.Landmark.prototype.getY=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.Landmark.prototype.setY=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.Landmark.prototype.clearY=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.Landmark.prototype.hasY=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.Landmark.prototype.getZ=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.Landmark.prototype.setZ=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.Landmark.prototype.clearZ=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.Landmark.prototype.hasZ=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.Landmark.prototype.getVisibility=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.Landmark.prototype.setVisibility=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.Landmark.prototype.clearVisibility=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.Landmark.prototype.hasVisibility=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.Landmark.prototype.getPresence=function(){return n.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.Landmark.prototype.setPresence=function(d){return n.Message.setField(this,5,d)},proto.mediapipe.Landmark.prototype.clearPresence=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.Landmark.prototype.hasPresence=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.LandmarkList.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LandmarkList.prototype.toObject=function(d){return proto.mediapipe.LandmarkList.toObject(d,this)},proto.mediapipe.LandmarkList.toObject=function(d,g){var i={landmarkList:n.Message.toObjectList(g.getLandmarkList(),proto.mediapipe.Landmark.toObject,d)};return d&&(i.$jspbMessageInstance=g),i}),proto.mediapipe.LandmarkList.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.LandmarkList;return proto.mediapipe.LandmarkList.deserializeBinaryFromReader(i,g)},proto.mediapipe.LandmarkList.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)if(g.getFieldNumber()===1){var i=new proto.mediapipe.Landmark;g.readMessage(i,proto.mediapipe.Landmark.deserializeBinaryFromReader),d.addLandmark(i)}else g.skipField();return d},proto.mediapipe.LandmarkList.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.LandmarkList.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.LandmarkList.serializeBinaryToWriter=function(d,g){var i;(i=d.getLandmarkList()).length>0&&g.writeRepeatedMessage(1,i,proto.mediapipe.Landmark.serializeBinaryToWriter)},proto.mediapipe.LandmarkList.prototype.getLandmarkList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.Landmark,1)},proto.mediapipe.LandmarkList.prototype.setLandmarkList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.LandmarkList.prototype.addLandmark=function(d,g){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.Landmark,g)},proto.mediapipe.LandmarkList.prototype.clearLandmarkList=function(){return this.setLandmarkList([])},proto.mediapipe.LandmarkListCollection.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LandmarkListCollection.prototype.toObject=function(d){return proto.mediapipe.LandmarkListCollection.toObject(d,this)},proto.mediapipe.LandmarkListCollection.toObject=function(d,g){var i={landmarkListList:n.Message.toObjectList(g.getLandmarkListList(),proto.mediapipe.LandmarkList.toObject,d)};return d&&(i.$jspbMessageInstance=g),i}),proto.mediapipe.LandmarkListCollection.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.LandmarkListCollection;return proto.mediapipe.LandmarkListCollection.deserializeBinaryFromReader(i,g)},proto.mediapipe.LandmarkListCollection.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)if(g.getFieldNumber()===1){var i=new proto.mediapipe.LandmarkList;g.readMessage(i,proto.mediapipe.LandmarkList.deserializeBinaryFromReader),d.addLandmarkList(i)}else g.skipField();return d},proto.mediapipe.LandmarkListCollection.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.LandmarkListCollection.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.LandmarkListCollection.serializeBinaryToWriter=function(d,g){var i;(i=d.getLandmarkListList()).length>0&&g.writeRepeatedMessage(1,i,proto.mediapipe.LandmarkList.serializeBinaryToWriter)},proto.mediapipe.LandmarkListCollection.prototype.getLandmarkListList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.LandmarkList,1)},proto.mediapipe.LandmarkListCollection.prototype.setLandmarkListList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.LandmarkListCollection.prototype.addLandmarkList=function(d,g){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.LandmarkList,g)},proto.mediapipe.LandmarkListCollection.prototype.clearLandmarkListList=function(){return this.setLandmarkListList([])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedLandmark.prototype.toObject=function(d){return proto.mediapipe.NormalizedLandmark.toObject(d,this)},proto.mediapipe.NormalizedLandmark.toObject=function(d,g){var i,_={x:(i=n.Message.getOptionalFloatingPointField(g,1))==null?void 0:i,y:(i=n.Message.getOptionalFloatingPointField(g,2))==null?void 0:i,z:(i=n.Message.getOptionalFloatingPointField(g,3))==null?void 0:i,visibility:(i=n.Message.getOptionalFloatingPointField(g,4))==null?void 0:i,presence:(i=n.Message.getOptionalFloatingPointField(g,5))==null?void 0:i};return d&&(_.$jspbMessageInstance=g),_}),proto.mediapipe.NormalizedLandmark.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.NormalizedLandmark;return proto.mediapipe.NormalizedLandmark.deserializeBinaryFromReader(i,g)},proto.mediapipe.NormalizedLandmark.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var i=g.readFloat();d.setX(i);break;case 2:i=g.readFloat(),d.setY(i);break;case 3:i=g.readFloat(),d.setZ(i);break;case 4:i=g.readFloat(),d.setVisibility(i);break;case 5:i=g.readFloat(),d.setPresence(i);break;default:g.skipField()}return d},proto.mediapipe.NormalizedLandmark.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.NormalizedLandmark.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.NormalizedLandmark.serializeBinaryToWriter=function(d,g){var i=void 0;(i=n.Message.getField(d,1))!=null&&g.writeFloat(1,i),(i=n.Message.getField(d,2))!=null&&g.writeFloat(2,i),(i=n.Message.getField(d,3))!=null&&g.writeFloat(3,i),(i=n.Message.getField(d,4))!=null&&g.writeFloat(4,i),(i=n.Message.getField(d,5))!=null&&g.writeFloat(5,i)},proto.mediapipe.NormalizedLandmark.prototype.getX=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.NormalizedLandmark.prototype.setX=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.NormalizedLandmark.prototype.clearX=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasX=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.NormalizedLandmark.prototype.getY=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.NormalizedLandmark.prototype.setY=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.NormalizedLandmark.prototype.clearY=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasY=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.NormalizedLandmark.prototype.getZ=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.NormalizedLandmark.prototype.setZ=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.NormalizedLandmark.prototype.clearZ=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasZ=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.NormalizedLandmark.prototype.getVisibility=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.NormalizedLandmark.prototype.setVisibility=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.NormalizedLandmark.prototype.clearVisibility=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasVisibility=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.NormalizedLandmark.prototype.getPresence=function(){return n.Message.getFloatingPointFieldWithDefault(this,5,0)},proto.mediapipe.NormalizedLandmark.prototype.setPresence=function(d){return n.Message.setField(this,5,d)},proto.mediapipe.NormalizedLandmark.prototype.clearPresence=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.NormalizedLandmark.prototype.hasPresence=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.NormalizedLandmarkList.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedLandmarkList.prototype.toObject=function(d){return proto.mediapipe.NormalizedLandmarkList.toObject(d,this)},proto.mediapipe.NormalizedLandmarkList.toObject=function(d,g){var i={landmarkList:n.Message.toObjectList(g.getLandmarkList(),proto.mediapipe.NormalizedLandmark.toObject,d)};return d&&(i.$jspbMessageInstance=g),i}),proto.mediapipe.NormalizedLandmarkList.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.NormalizedLandmarkList;return proto.mediapipe.NormalizedLandmarkList.deserializeBinaryFromReader(i,g)},proto.mediapipe.NormalizedLandmarkList.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)if(g.getFieldNumber()===1){var i=new proto.mediapipe.NormalizedLandmark;g.readMessage(i,proto.mediapipe.NormalizedLandmark.deserializeBinaryFromReader),d.addLandmark(i)}else g.skipField();return d},proto.mediapipe.NormalizedLandmarkList.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.NormalizedLandmarkList.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.NormalizedLandmarkList.serializeBinaryToWriter=function(d,g){var i;(i=d.getLandmarkList()).length>0&&g.writeRepeatedMessage(1,i,proto.mediapipe.NormalizedLandmark.serializeBinaryToWriter)},proto.mediapipe.NormalizedLandmarkList.prototype.getLandmarkList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.NormalizedLandmark,1)},proto.mediapipe.NormalizedLandmarkList.prototype.setLandmarkList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.NormalizedLandmarkList.prototype.addLandmark=function(d,g){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.NormalizedLandmark,g)},proto.mediapipe.NormalizedLandmarkList.prototype.clearLandmarkList=function(){return this.setLandmarkList([])},proto.mediapipe.NormalizedLandmarkListCollection.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.NormalizedLandmarkListCollection.prototype.toObject=function(d){return proto.mediapipe.NormalizedLandmarkListCollection.toObject(d,this)},proto.mediapipe.NormalizedLandmarkListCollection.toObject=function(d,g){var i={landmarkListList:n.Message.toObjectList(g.getLandmarkListList(),proto.mediapipe.NormalizedLandmarkList.toObject,d)};return d&&(i.$jspbMessageInstance=g),i}),proto.mediapipe.NormalizedLandmarkListCollection.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.NormalizedLandmarkListCollection;return proto.mediapipe.NormalizedLandmarkListCollection.deserializeBinaryFromReader(i,g)},proto.mediapipe.NormalizedLandmarkListCollection.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)if(g.getFieldNumber()===1){var i=new proto.mediapipe.NormalizedLandmarkList;g.readMessage(i,proto.mediapipe.NormalizedLandmarkList.deserializeBinaryFromReader),d.addLandmarkList(i)}else g.skipField();return d},proto.mediapipe.NormalizedLandmarkListCollection.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.NormalizedLandmarkListCollection.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.NormalizedLandmarkListCollection.serializeBinaryToWriter=function(d,g){var i;(i=d.getLandmarkListList()).length>0&&g.writeRepeatedMessage(1,i,proto.mediapipe.NormalizedLandmarkList.serializeBinaryToWriter)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.getLandmarkListList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.NormalizedLandmarkList,1)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.setLandmarkListList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.addLandmarkList=function(d,g){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.NormalizedLandmarkList,g)},proto.mediapipe.NormalizedLandmarkListCollection.prototype.clearLandmarkListList=function(){return this.setLandmarkListList([])},A.object.extend(u,proto.mediapipe)})(landmark_pb);var face_geometry_pb={},matrix_data_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.MatrixData",null,C),A.exportSymbol("proto.mediapipe.MatrixData.Layout",null,C),proto.mediapipe.MatrixData=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.MatrixData.repeatedFields_,null)},A.inherits(proto.mediapipe.MatrixData,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.MatrixData.displayName="proto.mediapipe.MatrixData"),proto.mediapipe.MatrixData.repeatedFields_=[3],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.MatrixData.prototype.toObject=function(d){return proto.mediapipe.MatrixData.toObject(d,this)},proto.mediapipe.MatrixData.toObject=function(d,g){var i,_={rows:(i=n.Message.getField(g,1))==null?void 0:i,cols:(i=n.Message.getField(g,2))==null?void 0:i,packedDataList:(i=n.Message.getRepeatedFloatingPointField(g,3))==null?void 0:i,layout:n.Message.getFieldWithDefault(g,4,0)};return d&&(_.$jspbMessageInstance=g),_}),proto.mediapipe.MatrixData.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.MatrixData;return proto.mediapipe.MatrixData.deserializeBinaryFromReader(i,g)},proto.mediapipe.MatrixData.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var i=g.readInt32();d.setRows(i);break;case 2:i=g.readInt32(),d.setCols(i);break;case 3:for(var _=g.isDelimited()?g.readPackedFloat():[g.readFloat()],j=0;j<_.length;j++)d.addPackedData(_[j]);break;case 4:i=g.readEnum(),d.setLayout(i);break;default:g.skipField()}return d},proto.mediapipe.MatrixData.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.MatrixData.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.MatrixData.serializeBinaryToWriter=function(d,g){var i=void 0;(i=n.Message.getField(d,1))!=null&&g.writeInt32(1,i),(i=n.Message.getField(d,2))!=null&&g.writeInt32(2,i),(i=d.getPackedDataList()).length>0&&g.writePackedFloat(3,i),(i=n.Message.getField(d,4))!=null&&g.writeEnum(4,i)},proto.mediapipe.MatrixData.Layout={COLUMN_MAJOR:0,ROW_MAJOR:1},proto.mediapipe.MatrixData.prototype.getRows=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.MatrixData.prototype.setRows=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.MatrixData.prototype.clearRows=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.MatrixData.prototype.hasRows=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.MatrixData.prototype.getCols=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.MatrixData.prototype.setCols=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.MatrixData.prototype.clearCols=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.MatrixData.prototype.hasCols=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.MatrixData.prototype.getPackedDataList=function(){return n.Message.getRepeatedFloatingPointField(this,3)},proto.mediapipe.MatrixData.prototype.setPackedDataList=function(d){return n.Message.setField(this,3,d||[])},proto.mediapipe.MatrixData.prototype.addPackedData=function(d,g){return n.Message.addToRepeatedField(this,3,d,g)},proto.mediapipe.MatrixData.prototype.clearPackedDataList=function(){return this.setPackedDataList([])},proto.mediapipe.MatrixData.prototype.getLayout=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.MatrixData.prototype.setLayout=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.MatrixData.prototype.clearLayout=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.MatrixData.prototype.hasLayout=function(){return n.Message.getField(this,4)!=null},A.object.extend(u,proto.mediapipe)})(matrix_data_pb);var mesh_3d_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d",null,C),A.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.PrimitiveType",null,C),A.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.VertexType",null,C),proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.repeatedFields_,null)},A.inherits(proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.displayName="proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d"),proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.repeatedFields_=[3,4],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.toObject=function(d){return proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.toObject(d,this)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.toObject=function(d,g){var i,_={vertexType:(i=n.Message.getField(g,1))==null?void 0:i,primitiveType:(i=n.Message.getField(g,2))==null?void 0:i,vertexBufferList:(i=n.Message.getRepeatedFloatingPointField(g,3))==null?void 0:i,indexBufferList:(i=n.Message.getRepeatedField(g,4))==null?void 0:i};return d&&(_.$jspbMessageInstance=g),_}),proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d;return proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.deserializeBinaryFromReader(i,g)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var i=g.readEnum();d.setVertexType(i);break;case 2:i=g.readEnum(),d.setPrimitiveType(i);break;case 3:for(var _=g.isDelimited()?g.readPackedFloat():[g.readFloat()],j=0;j<_.length;j++)d.addVertexBuffer(_[j]);break;case 4:for(_=g.isDelimited()?g.readPackedUint32():[g.readUint32()],j=0;j<_.length;j++)d.addIndexBuffer(_[j]);break;default:g.skipField()}return d},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.serializeBinaryToWriter=function(d,g){var i=void 0;(i=n.Message.getField(d,1))!=null&&g.writeEnum(1,i),(i=n.Message.getField(d,2))!=null&&g.writeEnum(2,i),(i=d.getVertexBufferList()).length>0&&g.writeRepeatedFloat(3,i),(i=d.getIndexBufferList()).length>0&&g.writeRepeatedUint32(4,i)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.VertexType={VERTEX_PT:0},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.PrimitiveType={TRIANGLE:0},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getVertexType=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setVertexType=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearVertexType=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.hasVertexType=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getPrimitiveType=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setPrimitiveType=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearPrimitiveType=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.hasPrimitiveType=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getVertexBufferList=function(){return n.Message.getRepeatedFloatingPointField(this,3)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setVertexBufferList=function(d){return n.Message.setField(this,3,d||[])},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.addVertexBuffer=function(d,g){return n.Message.addToRepeatedField(this,3,d,g)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearVertexBufferList=function(){return this.setVertexBufferList([])},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.getIndexBufferList=function(){return n.Message.getRepeatedField(this,4)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.setIndexBufferList=function(d){return n.Message.setField(this,4,d||[])},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.addIndexBuffer=function(d,g){return n.Message.addToRepeatedField(this,4,d,g)},proto.mediapipe.tasks.vision.face_geometry.proto.Mesh3d.prototype.clearIndexBufferList=function(){return this.setIndexBufferList([])},A.object.extend(u,proto.mediapipe.tasks.vision.face_geometry.proto)})(mesh_3d_pb),function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=matrix_data_pb;A.object.extend(proto,d);var g=mesh_3d_pb;A.object.extend(proto,g),A.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry",null,C),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry=function(i){n.Message.initialize(this,i,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.displayName="proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.toObject=function(i){return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.toObject(i,this)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.toObject=function(i,_){var j,$={mesh:(j=_.getMesh())&&g.Mesh3d.toObject(i,j),poseTransformMatrix:(j=_.getPoseTransformMatrix())&&d.MatrixData.toObject(i,j)};return i&&($.$jspbMessageInstance=_),$}),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.deserializeBinary=function(i){var _=new n.BinaryReader(i),j=new proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.deserializeBinaryFromReader(j,_)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.deserializeBinaryFromReader=function(i,_){for(;_.nextField()&&!_.isEndGroup();)switch(_.getFieldNumber()){case 1:var j=new g.Mesh3d;_.readMessage(j,g.Mesh3d.deserializeBinaryFromReader),i.setMesh(j);break;case 2:j=new d.MatrixData,_.readMessage(j,d.MatrixData.deserializeBinaryFromReader),i.setPoseTransformMatrix(j);break;default:_.skipField()}return i},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.serializeBinary=function(){var i=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.serializeBinaryToWriter=function(i,_){var j=void 0;(j=i.getMesh())!=null&&_.writeMessage(1,j,g.Mesh3d.serializeBinaryToWriter),(j=i.getPoseTransformMatrix())!=null&&_.writeMessage(2,j,d.MatrixData.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.getMesh=function(){return n.Message.getWrapperField(this,g.Mesh3d,1)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.setMesh=function(i){return n.Message.setWrapperField(this,1,i)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.clearMesh=function(){return this.setMesh(void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.hasMesh=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.getPoseTransformMatrix=function(){return n.Message.getWrapperField(this,d.MatrixData,2)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.setPoseTransformMatrix=function(i){return n.Message.setWrapperField(this,2,i)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.clearPoseTransformMatrix=function(){return this.setPoseTransformMatrix(void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometry.prototype.hasPoseTransformMatrix=function(){return n.Message.getField(this,2)!=null},A.object.extend(u,proto.mediapipe.tasks.vision.face_geometry.proto)}(face_geometry_pb);var face_landmarker_graph_options_pb={},face_geometry_graph_options_pb={},geometry_pipeline_calculator_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_options_pb;A.object.extend(proto,d);var g=external_file_pb;A.object.extend(proto,g),A.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions",null,C),proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions=function(i){n.Message.initialize(this,i,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.displayName="proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.toObject=function(i){return proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject(i,this)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject=function(i,_){var j,$={metadataFile:(j=_.getMetadataFile())&&g.ExternalFile.toObject(i,j)};return i&&($.$jspbMessageInstance=_),$}),proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinary=function(i){var _=new n.BinaryReader(i),j=new proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions;return proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader(j,_)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader=function(i,_){for(;_.nextField()&&!_.isEndGroup();)if(_.getFieldNumber()===1){var j=new g.ExternalFile;_.readMessage(j,g.ExternalFile.deserializeBinaryFromReader),i.setMetadataFile(j)}else _.skipField();return i},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.serializeBinary=function(){var i=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter=function(i,_){var j;(j=i.getMetadataFile())!=null&&_.writeMessage(1,j,g.ExternalFile.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext=new n.ExtensionFieldInfo(512499200,{ext:0},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject,0),d.CalculatorOptions.extensionsBinary[512499200]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader,!1),d.CalculatorOptions.extensions[512499200]=proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.getMetadataFile=function(){return n.Message.getWrapperField(this,g.ExternalFile,1)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.setMetadataFile=function(i){return n.Message.setWrapperField(this,1,i)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.clearMetadataFile=function(){return this.setMetadataFile(void 0)},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.prototype.hasMetadataFile=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext=new n.ExtensionFieldInfo(512499200,{ext:0},proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.toObject,0),d.CalculatorOptions.extensionsBinary[512499200]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader,!1),d.CalculatorOptions.extensions[512499200]=proto.mediapipe.tasks.vision.face_geometry.FaceGeometryPipelineCalculatorOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.face_geometry)})(geometry_pipeline_calculator_pb),function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_options_pb;A.object.extend(proto,d);var g=geometry_pipeline_calculator_pb;A.object.extend(proto,g),A.exportSymbol("proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions",null,C),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions=function(i){n.Message.initialize(this,i,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.displayName="proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.toObject=function(i){return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject(i,this)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject=function(i,_){var j,$={geometryPipelineOptions:(j=_.getGeometryPipelineOptions())&&g.FaceGeometryPipelineCalculatorOptions.toObject(i,j)};return i&&($.$jspbMessageInstance=_),$}),proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinary=function(i){var _=new n.BinaryReader(i),j=new proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader(j,_)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader=function(i,_){for(;_.nextField()&&!_.isEndGroup();)if(_.getFieldNumber()===1){var j=new g.FaceGeometryPipelineCalculatorOptions;_.readMessage(j,g.FaceGeometryPipelineCalculatorOptions.deserializeBinaryFromReader),i.setGeometryPipelineOptions(j)}else _.skipField();return i},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.serializeBinary=function(){var i=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter(this,i),i.getResultBuffer()},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter=function(i,_){var j;(j=i.getGeometryPipelineOptions())!=null&&_.writeMessage(1,j,g.FaceGeometryPipelineCalculatorOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext=new n.ExtensionFieldInfo(515723506,{ext:0},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject,0),d.CalculatorOptions.extensionsBinary[515723506]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader,!1),d.CalculatorOptions.extensions[515723506]=proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.getGeometryPipelineOptions=function(){return n.Message.getWrapperField(this,g.FaceGeometryPipelineCalculatorOptions,1)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.setGeometryPipelineOptions=function(i){return n.Message.setWrapperField(this,1,i)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.clearGeometryPipelineOptions=function(){return this.setGeometryPipelineOptions(void 0)},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.prototype.hasGeometryPipelineOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext=new n.ExtensionFieldInfo(515723506,{ext:0},proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.toObject,0),d.CalculatorOptions.extensionsBinary[515723506]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.deserializeBinaryFromReader,!1),d.CalculatorOptions.extensions[515723506]=proto.mediapipe.tasks.vision.face_geometry.proto.FaceGeometryGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.face_geometry.proto)}(face_geometry_graph_options_pb);var face_landmarks_detector_graph_options_pb={},face_blendshapes_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var g=calculator_options_pb;A.object.extend(proto,g);var i=base_options_pb;A.object.extend(proto,i),A.exportSymbol("proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions",null,C),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions=function(_){n.Message.initialize(this,_,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.displayName="proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.toObject=function(_){return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject(_,this)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject=function(_,j){var $,re={baseOptions:($=j.getBaseOptions())&&i.BaseOptions.toObject(_,$)};return _&&(re.$jspbMessageInstance=j),re}),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinary=function(_){var j=new n.BinaryReader(_),$=new proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader($,j)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader=function(_,j){for(;j.nextField()&&!j.isEndGroup();)if(j.getFieldNumber()===1){var $=new i.BaseOptions;j.readMessage($,i.BaseOptions.deserializeBinaryFromReader),_.setBaseOptions($)}else j.skipField();return _},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.serializeBinary=function(){var _=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter(this,_),_.getResultBuffer()},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter=function(_,j){var $;($=_.getBaseOptions())!=null&&j.writeMessage(1,$,i.BaseOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext=new n.ExtensionFieldInfo(508981768,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[508981768]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[508981768]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.setBaseOptions=function(_){return n.Message.setWrapperField(this,1,_)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext=new n.ExtensionFieldInfo(508981768,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[508981768]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[508981768]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceBlendshapesGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.face_landmarker.proto)})(face_blendshapes_graph_options_pb),function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var g=calculator_options_pb;A.object.extend(proto,g);var i=base_options_pb;A.object.extend(proto,i);var _=face_blendshapes_graph_options_pb;A.object.extend(proto,_),A.exportSymbol("proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions",null,C),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions=function(j){n.Message.initialize(this,j,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.toObject=function(j){return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject(j,this)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject=function(j,$){var re,Q={baseOptions:(re=$.getBaseOptions())&&i.BaseOptions.toObject(j,re),minDetectionConfidence:n.Message.getFloatingPointFieldWithDefault($,2,.5),smoothLandmarks:(re=n.Message.getBooleanField($,4))==null?void 0:re,faceBlendshapesGraphOptions:(re=$.getFaceBlendshapesGraphOptions())&&_.FaceBlendshapesGraphOptions.toObject(j,re)};return j&&(Q.$jspbMessageInstance=$),Q}),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinary=function(j){var $=new n.BinaryReader(j),re=new proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader(re,$)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader=function(j,$){for(;$.nextField()&&!$.isEndGroup();)switch($.getFieldNumber()){case 1:var re=new i.BaseOptions;$.readMessage(re,i.BaseOptions.deserializeBinaryFromReader),j.setBaseOptions(re);break;case 2:re=$.readFloat(),j.setMinDetectionConfidence(re);break;case 4:re=$.readBool(),j.setSmoothLandmarks(re);break;case 3:re=new _.FaceBlendshapesGraphOptions,$.readMessage(re,_.FaceBlendshapesGraphOptions.deserializeBinaryFromReader),j.setFaceBlendshapesGraphOptions(re);break;default:$.skipField()}return j},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.serializeBinary=function(){var j=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter=function(j,$){var re=void 0;(re=j.getBaseOptions())!=null&&$.writeMessage(1,re,i.BaseOptions.serializeBinaryToWriter),(re=n.Message.getField(j,2))!=null&&$.writeFloat(2,re),(re=n.Message.getField(j,4))!=null&&$.writeBool(4,re),(re=j.getFaceBlendshapesGraphOptions())!=null&&$.writeMessage(3,re,_.FaceBlendshapesGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext=new n.ExtensionFieldInfo(508968149,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[508968149]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[508968149]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setBaseOptions=function(j){return n.Message.setWrapperField(this,1,j)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setMinDetectionConfidence=function(j){return n.Message.setField(this,2,j)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getSmoothLandmarks=function(){return n.Message.getBooleanFieldWithDefault(this,4,!1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setSmoothLandmarks=function(j){return n.Message.setField(this,4,j)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearSmoothLandmarks=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasSmoothLandmarks=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.getFaceBlendshapesGraphOptions=function(){return n.Message.getWrapperField(this,_.FaceBlendshapesGraphOptions,3)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.setFaceBlendshapesGraphOptions=function(j){return n.Message.setWrapperField(this,3,j)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.clearFaceBlendshapesGraphOptions=function(){return this.setFaceBlendshapesGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.prototype.hasFaceBlendshapesGraphOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext=new n.ExtensionFieldInfo(508968149,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[508968149]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[508968149]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarksDetectorGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.face_landmarker.proto)}(face_landmarks_detector_graph_options_pb),function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var g=calculator_options_pb;A.object.extend(proto,g);var i=base_options_pb;A.object.extend(proto,i);var _=face_detector_graph_options_pb;A.object.extend(proto,_);var j=face_geometry_graph_options_pb;A.object.extend(proto,j);var $=face_landmarks_detector_graph_options_pb;A.object.extend(proto,$),A.exportSymbol("proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions",null,C),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions=function(re){n.Message.initialize(this,re,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.displayName="proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.toObject=function(re){return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject(re,this)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject=function(re,Q){var ae,pe={baseOptions:(ae=Q.getBaseOptions())&&i.BaseOptions.toObject(re,ae),faceDetectorGraphOptions:(ae=Q.getFaceDetectorGraphOptions())&&_.FaceDetectorGraphOptions.toObject(re,ae),faceLandmarksDetectorGraphOptions:(ae=Q.getFaceLandmarksDetectorGraphOptions())&&$.FaceLandmarksDetectorGraphOptions.toObject(re,ae),minTrackingConfidence:n.Message.getFloatingPointFieldWithDefault(Q,4,.5),faceGeometryGraphOptions:(ae=Q.getFaceGeometryGraphOptions())&&j.FaceGeometryGraphOptions.toObject(re,ae)};return re&&(pe.$jspbMessageInstance=Q),pe}),proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinary=function(re){var Q=new n.BinaryReader(re),ae=new proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader(ae,Q)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader=function(re,Q){for(;Q.nextField()&&!Q.isEndGroup();)switch(Q.getFieldNumber()){case 1:var ae=new i.BaseOptions;Q.readMessage(ae,i.BaseOptions.deserializeBinaryFromReader),re.setBaseOptions(ae);break;case 2:ae=new _.FaceDetectorGraphOptions,Q.readMessage(ae,_.FaceDetectorGraphOptions.deserializeBinaryFromReader),re.setFaceDetectorGraphOptions(ae);break;case 3:ae=new $.FaceLandmarksDetectorGraphOptions,Q.readMessage(ae,$.FaceLandmarksDetectorGraphOptions.deserializeBinaryFromReader),re.setFaceLandmarksDetectorGraphOptions(ae);break;case 4:ae=Q.readFloat(),re.setMinTrackingConfidence(ae);break;case 5:ae=new j.FaceGeometryGraphOptions,Q.readMessage(ae,j.FaceGeometryGraphOptions.deserializeBinaryFromReader),re.setFaceGeometryGraphOptions(ae);break;default:Q.skipField()}return re},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.serializeBinary=function(){var re=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter(this,re),re.getResultBuffer()},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter=function(re,Q){var ae=void 0;(ae=re.getBaseOptions())!=null&&Q.writeMessage(1,ae,i.BaseOptions.serializeBinaryToWriter),(ae=re.getFaceDetectorGraphOptions())!=null&&Q.writeMessage(2,ae,_.FaceDetectorGraphOptions.serializeBinaryToWriter),(ae=re.getFaceLandmarksDetectorGraphOptions())!=null&&Q.writeMessage(3,ae,$.FaceLandmarksDetectorGraphOptions.serializeBinaryToWriter),(ae=n.Message.getField(re,4))!=null&&Q.writeFloat(4,ae),(ae=re.getFaceGeometryGraphOptions())!=null&&Q.writeMessage(5,ae,j.FaceGeometryGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext=new n.ExtensionFieldInfo(508968150,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[508968150]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[508968150]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setBaseOptions=function(re){return n.Message.setWrapperField(this,1,re)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getFaceDetectorGraphOptions=function(){return n.Message.getWrapperField(this,_.FaceDetectorGraphOptions,2)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setFaceDetectorGraphOptions=function(re){return n.Message.setWrapperField(this,2,re)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearFaceDetectorGraphOptions=function(){return this.setFaceDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasFaceDetectorGraphOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getFaceLandmarksDetectorGraphOptions=function(){return n.Message.getWrapperField(this,$.FaceLandmarksDetectorGraphOptions,3)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setFaceLandmarksDetectorGraphOptions=function(re){return n.Message.setWrapperField(this,3,re)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearFaceLandmarksDetectorGraphOptions=function(){return this.setFaceLandmarksDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasFaceLandmarksDetectorGraphOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getMinTrackingConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,.5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setMinTrackingConfidence=function(re){return n.Message.setField(this,4,re)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearMinTrackingConfidence=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasMinTrackingConfidence=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.getFaceGeometryGraphOptions=function(){return n.Message.getWrapperField(this,j.FaceGeometryGraphOptions,5)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.setFaceGeometryGraphOptions=function(re){return n.Message.setWrapperField(this,5,re)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.clearFaceGeometryGraphOptions=function(){return this.setFaceGeometryGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.prototype.hasFaceGeometryGraphOptions=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext=new n.ExtensionFieldInfo(508968150,{ext:0},proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[508968150]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[508968150]=proto.mediapipe.tasks.vision.face_landmarker.proto.FaceLandmarkerGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.face_landmarker.proto)}(face_landmarker_graph_options_pb);var classifier_result={};Object.defineProperty(classifier_result,"__esModule",{value:!0}),classifier_result.convertFromClassificationResultProto=classifier_result.convertFromClassifications=void 0;const DEFAULT_INDEX$1=-1,DEFAULT_SCORE=0;function convertFromClassifications(u,n=DEFAULT_INDEX$1,A=""){return{categories:u.map(C=>{var d,g,i,_;return{index:(d=C.getIndex())!==null&&d!==void 0?d:DEFAULT_INDEX$1,score:(g=C.getScore())!==null&&g!==void 0?g:DEFAULT_SCORE,categoryName:(i=C.getLabel())!==null&&i!==void 0?i:"",displayName:(_=C.getDisplayName())!==null&&_!==void 0?_:""}}),headIndex:n,headName:A}}function convertFromClassificationsProto(u){var n,A;return convertFromClassifications((A=(n=u.getClassificationList())===null||n===void 0?void 0:n.getClassificationList())!==null&&A!==void 0?A:[],u.getHeadIndex(),u.getHeadName())}function convertFromClassificationResultProto(u){const n={classifications:u.getClassificationsList().map(A=>convertFromClassificationsProto(A))};return u.hasTimestampMs()&&(n.timestampMs=u.getTimestampMs()),n}classifier_result.convertFromClassifications=convertFromClassifications,classifier_result.convertFromClassificationResultProto=convertFromClassificationResultProto;var landmark_result={};function convertToLandmarks(u){var n,A,C;const d=[];for(const g of u.getLandmarkList())d.push({x:(n=g.getX())!==null&&n!==void 0?n:0,y:(A=g.getY())!==null&&A!==void 0?A:0,z:(C=g.getZ())!==null&&C!==void 0?C:0});return d}function convertToWorldLandmarks(u){var n,A,C;const d=[];for(const g of u.getLandmarkList())d.push({x:(n=g.getX())!==null&&n!==void 0?n:0,y:(A=g.getY())!==null&&A!==void 0?A:0,z:(C=g.getZ())!==null&&C!==void 0?C:0});return d}Object.defineProperty(landmark_result,"__esModule",{value:!0}),landmark_result.convertToWorldLandmarks=landmark_result.convertToLandmarks=void 0,landmark_result.convertToLandmarks=convertToLandmarks,landmark_result.convertToWorldLandmarks=convertToWorldLandmarks;var face_landmarks_connections={},exports;exports=face_landmarks_connections,Object.defineProperty(exports,"__esModule",{value:!0}),exports.FACE_LANDMARKS_TESSELATION=exports.FACE_LANDMARKS_CONTOURS=exports.FACE_LANDMARKS_FACE_OVAL=exports.FACE_LANDMARKS_RIGHT_IRIS=exports.FACE_LANDMARKS_RIGHT_EYEBROW=exports.FACE_LANDMARKS_RIGHT_EYE=exports.FACE_LANDMARKS_LEFT_IRIS=exports.FACE_LANDMARKS_LEFT_EYEBROW=exports.FACE_LANDMARKS_LEFT_EYE=exports.FACE_LANDMARKS_LIPS=void 0,exports.FACE_LANDMARKS_LIPS=[{start:61,end:146},{start:146,end:91},{start:91,end:181},{start:181,end:84},{start:84,end:17},{start:17,end:314},{start:314,end:405},{start:405,end:321},{start:321,end:375},{start:375,end:291},{start:61,end:185},{start:185,end:40},{start:40,end:39},{start:39,end:37},{start:37,end:0},{start:0,end:267},{start:267,end:269},{start:269,end:270},{start:270,end:409},{start:409,end:291},{start:78,end:95},{start:95,end:88},{start:88,end:178},{start:178,end:87},{start:87,end:14},{start:14,end:317},{start:317,end:402},{start:402,end:318},{start:318,end:324},{start:324,end:308},{start:78,end:191},{start:191,end:80},{start:80,end:81},{start:81,end:82},{start:82,end:13},{start:13,end:312},{start:312,end:311},{start:311,end:310},{start:310,end:415},{start:415,end:308}],exports.FACE_LANDMARKS_LEFT_EYE=[{start:263,end:249},{start:249,end:390},{start:390,end:373},{start:373,end:374},{start:374,end:380},{start:380,end:381},{start:381,end:382},{start:382,end:362},{start:263,end:466},{start:466,end:388},{start:388,end:387},{start:387,end:386},{start:386,end:385},{start:385,end:384},{start:384,end:398},{start:398,end:362}],exports.FACE_LANDMARKS_LEFT_EYEBROW=[{start:276,end:283},{start:283,end:282},{start:282,end:295},{start:295,end:285},{start:300,end:293},{start:293,end:334},{start:334,end:296},{start:296,end:336}],exports.FACE_LANDMARKS_LEFT_IRIS=[{start:474,end:475},{start:475,end:476},{start:476,end:477},{start:477,end:474}],exports.FACE_LANDMARKS_RIGHT_EYE=[{start:33,end:7},{start:7,end:163},{start:163,end:144},{start:144,end:145},{start:145,end:153},{start:153,end:154},{start:154,end:155},{start:155,end:133},{start:33,end:246},{start:246,end:161},{start:161,end:160},{start:160,end:159},{start:159,end:158},{start:158,end:157},{start:157,end:173},{start:173,end:133}],exports.FACE_LANDMARKS_RIGHT_EYEBROW=[{start:46,end:53},{start:53,end:52},{start:52,end:65},{start:65,end:55},{start:70,end:63},{start:63,end:105},{start:105,end:66},{start:66,end:107}],exports.FACE_LANDMARKS_RIGHT_IRIS=[{start:469,end:470},{start:470,end:471},{start:471,end:472},{start:472,end:469}],exports.FACE_LANDMARKS_FACE_OVAL=[{start:10,end:338},{start:338,end:297},{start:297,end:332},{start:332,end:284},{start:284,end:251},{start:251,end:389},{start:389,end:356},{start:356,end:454},{start:454,end:323},{start:323,end:361},{start:361,end:288},{start:288,end:397},{start:397,end:365},{start:365,end:379},{start:379,end:378},{start:378,end:400},{start:400,end:377},{start:377,end:152},{start:152,end:148},{start:148,end:176},{start:176,end:149},{start:149,end:150},{start:150,end:136},{start:136,end:172},{start:172,end:58},{start:58,end:132},{start:132,end:93},{start:93,end:234},{start:234,end:127},{start:127,end:162},{start:162,end:21},{start:21,end:54},{start:54,end:103},{start:103,end:67},{start:67,end:109},{start:109,end:10}],exports.FACE_LANDMARKS_CONTOURS=[...exports.FACE_LANDMARKS_LIPS,...exports.FACE_LANDMARKS_LEFT_EYE,...exports.FACE_LANDMARKS_LEFT_EYEBROW,...exports.FACE_LANDMARKS_RIGHT_EYE,...exports.FACE_LANDMARKS_RIGHT_EYEBROW,...exports.FACE_LANDMARKS_FACE_OVAL],exports.FACE_LANDMARKS_TESSELATION=[{start:127,end:34},{start:34,end:139},{start:139,end:127},{start:11,end:0},{start:0,end:37},{start:37,end:11},{start:232,end:231},{start:231,end:120},{start:120,end:232},{start:72,end:37},{start:37,end:39},{start:39,end:72},{start:128,end:121},{start:121,end:47},{start:47,end:128},{start:232,end:121},{start:121,end:128},{start:128,end:232},{start:104,end:69},{start:69,end:67},{start:67,end:104},{start:175,end:171},{start:171,end:148},{start:148,end:175},{start:118,end:50},{start:50,end:101},{start:101,end:118},{start:73,end:39},{start:39,end:40},{start:40,end:73},{start:9,end:151},{start:151,end:108},{start:108,end:9},{start:48,end:115},{start:115,end:131},{start:131,end:48},{start:194,end:204},{start:204,end:211},{start:211,end:194},{start:74,end:40},{start:40,end:185},{start:185,end:74},{start:80,end:42},{start:42,end:183},{start:183,end:80},{start:40,end:92},{start:92,end:186},{start:186,end:40},{start:230,end:229},{start:229,end:118},{start:118,end:230},{start:202,end:212},{start:212,end:214},{start:214,end:202},{start:83,end:18},{start:18,end:17},{start:17,end:83},{start:76,end:61},{start:61,end:146},{start:146,end:76},{start:160,end:29},{start:29,end:30},{start:30,end:160},{start:56,end:157},{start:157,end:173},{start:173,end:56},{start:106,end:204},{start:204,end:194},{start:194,end:106},{start:135,end:214},{start:214,end:192},{start:192,end:135},{start:203,end:165},{start:165,end:98},{start:98,end:203},{start:21,end:71},{start:71,end:68},{start:68,end:21},{start:51,end:45},{start:45,end:4},{start:4,end:51},{start:144,end:24},{start:24,end:23},{start:23,end:144},{start:77,end:146},{start:146,end:91},{start:91,end:77},{start:205,end:50},{start:50,end:187},{start:187,end:205},{start:201,end:200},{start:200,end:18},{start:18,end:201},{start:91,end:106},{start:106,end:182},{start:182,end:91},{start:90,end:91},{start:91,end:181},{start:181,end:90},{start:85,end:84},{start:84,end:17},{start:17,end:85},{start:206,end:203},{start:203,end:36},{start:36,end:206},{start:148,end:171},{start:171,end:140},{start:140,end:148},{start:92,end:40},{start:40,end:39},{start:39,end:92},{start:193,end:189},{start:189,end:244},{start:244,end:193},{start:159,end:158},{start:158,end:28},{start:28,end:159},{start:247,end:246},{start:246,end:161},{start:161,end:247},{start:236,end:3},{start:3,end:196},{start:196,end:236},{start:54,end:68},{start:68,end:104},{start:104,end:54},{start:193,end:168},{start:168,end:8},{start:8,end:193},{start:117,end:228},{start:228,end:31},{start:31,end:117},{start:189,end:193},{start:193,end:55},{start:55,end:189},{start:98,end:97},{start:97,end:99},{start:99,end:98},{start:126,end:47},{start:47,end:100},{start:100,end:126},{start:166,end:79},{start:79,end:218},{start:218,end:166},{start:155,end:154},{start:154,end:26},{start:26,end:155},{start:209,end:49},{start:49,end:131},{start:131,end:209},{start:135,end:136},{start:136,end:150},{start:150,end:135},{start:47,end:126},{start:126,end:217},{start:217,end:47},{start:223,end:52},{start:52,end:53},{start:53,end:223},{start:45,end:51},{start:51,end:134},{start:134,end:45},{start:211,end:170},{start:170,end:140},{start:140,end:211},{start:67,end:69},{start:69,end:108},{start:108,end:67},{start:43,end:106},{start:106,end:91},{start:91,end:43},{start:230,end:119},{start:119,end:120},{start:120,end:230},{start:226,end:130},{start:130,end:247},{start:247,end:226},{start:63,end:53},{start:53,end:52},{start:52,end:63},{start:238,end:20},{start:20,end:242},{start:242,end:238},{start:46,end:70},{start:70,end:156},{start:156,end:46},{start:78,end:62},{start:62,end:96},{start:96,end:78},{start:46,end:53},{start:53,end:63},{start:63,end:46},{start:143,end:34},{start:34,end:227},{start:227,end:143},{start:123,end:117},{start:117,end:111},{start:111,end:123},{start:44,end:125},{start:125,end:19},{start:19,end:44},{start:236,end:134},{start:134,end:51},{start:51,end:236},{start:216,end:206},{start:206,end:205},{start:205,end:216},{start:154,end:153},{start:153,end:22},{start:22,end:154},{start:39,end:37},{start:37,end:167},{start:167,end:39},{start:200,end:201},{start:201,end:208},{start:208,end:200},{start:36,end:142},{start:142,end:100},{start:100,end:36},{start:57,end:212},{start:212,end:202},{start:202,end:57},{start:20,end:60},{start:60,end:99},{start:99,end:20},{start:28,end:158},{start:158,end:157},{start:157,end:28},{start:35,end:226},{start:226,end:113},{start:113,end:35},{start:160,end:159},{start:159,end:27},{start:27,end:160},{start:204,end:202},{start:202,end:210},{start:210,end:204},{start:113,end:225},{start:225,end:46},{start:46,end:113},{start:43,end:202},{start:202,end:204},{start:204,end:43},{start:62,end:76},{start:76,end:77},{start:77,end:62},{start:137,end:123},{start:123,end:116},{start:116,end:137},{start:41,end:38},{start:38,end:72},{start:72,end:41},{start:203,end:129},{start:129,end:142},{start:142,end:203},{start:64,end:98},{start:98,end:240},{start:240,end:64},{start:49,end:102},{start:102,end:64},{start:64,end:49},{start:41,end:73},{start:73,end:74},{start:74,end:41},{start:212,end:216},{start:216,end:207},{start:207,end:212},{start:42,end:74},{start:74,end:184},{start:184,end:42},{start:169,end:170},{start:170,end:211},{start:211,end:169},{start:170,end:149},{start:149,end:176},{start:176,end:170},{start:105,end:66},{start:66,end:69},{start:69,end:105},{start:122,end:6},{start:6,end:168},{start:168,end:122},{start:123,end:147},{start:147,end:187},{start:187,end:123},{start:96,end:77},{start:77,end:90},{start:90,end:96},{start:65,end:55},{start:55,end:107},{start:107,end:65},{start:89,end:90},{start:90,end:180},{start:180,end:89},{start:101,end:100},{start:100,end:120},{start:120,end:101},{start:63,end:105},{start:105,end:104},{start:104,end:63},{start:93,end:137},{start:137,end:227},{start:227,end:93},{start:15,end:86},{start:86,end:85},{start:85,end:15},{start:129,end:102},{start:102,end:49},{start:49,end:129},{start:14,end:87},{start:87,end:86},{start:86,end:14},{start:55,end:8},{start:8,end:9},{start:9,end:55},{start:100,end:47},{start:47,end:121},{start:121,end:100},{start:145,end:23},{start:23,end:22},{start:22,end:145},{start:88,end:89},{start:89,end:179},{start:179,end:88},{start:6,end:122},{start:122,end:196},{start:196,end:6},{start:88,end:95},{start:95,end:96},{start:96,end:88},{start:138,end:172},{start:172,end:136},{start:136,end:138},{start:215,end:58},{start:58,end:172},{start:172,end:215},{start:115,end:48},{start:48,end:219},{start:219,end:115},{start:42,end:80},{start:80,end:81},{start:81,end:42},{start:195,end:3},{start:3,end:51},{start:51,end:195},{start:43,end:146},{start:146,end:61},{start:61,end:43},{start:171,end:175},{start:175,end:199},{start:199,end:171},{start:81,end:82},{start:82,end:38},{start:38,end:81},{start:53,end:46},{start:46,end:225},{start:225,end:53},{start:144,end:163},{start:163,end:110},{start:110,end:144},{start:52,end:65},{start:65,end:66},{start:66,end:52},{start:229,end:228},{start:228,end:117},{start:117,end:229},{start:34,end:127},{start:127,end:234},{start:234,end:34},{start:107,end:108},{start:108,end:69},{start:69,end:107},{start:109,end:108},{start:108,end:151},{start:151,end:109},{start:48,end:64},{start:64,end:235},{start:235,end:48},{start:62,end:78},{start:78,end:191},{start:191,end:62},{start:129,end:209},{start:209,end:126},{start:126,end:129},{start:111,end:35},{start:35,end:143},{start:143,end:111},{start:117,end:123},{start:123,end:50},{start:50,end:117},{start:222,end:65},{start:65,end:52},{start:52,end:222},{start:19,end:125},{start:125,end:141},{start:141,end:19},{start:221,end:55},{start:55,end:65},{start:65,end:221},{start:3,end:195},{start:195,end:197},{start:197,end:3},{start:25,end:7},{start:7,end:33},{start:33,end:25},{start:220,end:237},{start:237,end:44},{start:44,end:220},{start:70,end:71},{start:71,end:139},{start:139,end:70},{start:122,end:193},{start:193,end:245},{start:245,end:122},{start:247,end:130},{start:130,end:33},{start:33,end:247},{start:71,end:21},{start:21,end:162},{start:162,end:71},{start:170,end:169},{start:169,end:150},{start:150,end:170},{start:188,end:174},{start:174,end:196},{start:196,end:188},{start:216,end:186},{start:186,end:92},{start:92,end:216},{start:2,end:97},{start:97,end:167},{start:167,end:2},{start:141,end:125},{start:125,end:241},{start:241,end:141},{start:164,end:167},{start:167,end:37},{start:37,end:164},{start:72,end:38},{start:38,end:12},{start:12,end:72},{start:38,end:82},{start:82,end:13},{start:13,end:38},{start:63,end:68},{start:68,end:71},{start:71,end:63},{start:226,end:35},{start:35,end:111},{start:111,end:226},{start:101,end:50},{start:50,end:205},{start:205,end:101},{start:206,end:92},{start:92,end:165},{start:165,end:206},{start:209,end:198},{start:198,end:217},{start:217,end:209},{start:165,end:167},{start:167,end:97},{start:97,end:165},{start:220,end:115},{start:115,end:218},{start:218,end:220},{start:133,end:112},{start:112,end:243},{start:243,end:133},{start:239,end:238},{start:238,end:241},{start:241,end:239},{start:214,end:135},{start:135,end:169},{start:169,end:214},{start:190,end:173},{start:173,end:133},{start:133,end:190},{start:171,end:208},{start:208,end:32},{start:32,end:171},{start:125,end:44},{start:44,end:237},{start:237,end:125},{start:86,end:87},{start:87,end:178},{start:178,end:86},{start:85,end:86},{start:86,end:179},{start:179,end:85},{start:84,end:85},{start:85,end:180},{start:180,end:84},{start:83,end:84},{start:84,end:181},{start:181,end:83},{start:201,end:83},{start:83,end:182},{start:182,end:201},{start:137,end:93},{start:93,end:132},{start:132,end:137},{start:76,end:62},{start:62,end:183},{start:183,end:76},{start:61,end:76},{start:76,end:184},{start:184,end:61},{start:57,end:61},{start:61,end:185},{start:185,end:57},{start:212,end:57},{start:57,end:186},{start:186,end:212},{start:214,end:207},{start:207,end:187},{start:187,end:214},{start:34,end:143},{start:143,end:156},{start:156,end:34},{start:79,end:239},{start:239,end:237},{start:237,end:79},{start:123,end:137},{start:137,end:177},{start:177,end:123},{start:44,end:1},{start:1,end:4},{start:4,end:44},{start:201,end:194},{start:194,end:32},{start:32,end:201},{start:64,end:102},{start:102,end:129},{start:129,end:64},{start:213,end:215},{start:215,end:138},{start:138,end:213},{start:59,end:166},{start:166,end:219},{start:219,end:59},{start:242,end:99},{start:99,end:97},{start:97,end:242},{start:2,end:94},{start:94,end:141},{start:141,end:2},{start:75,end:59},{start:59,end:235},{start:235,end:75},{start:24,end:110},{start:110,end:228},{start:228,end:24},{start:25,end:130},{start:130,end:226},{start:226,end:25},{start:23,end:24},{start:24,end:229},{start:229,end:23},{start:22,end:23},{start:23,end:230},{start:230,end:22},{start:26,end:22},{start:22,end:231},{start:231,end:26},{start:112,end:26},{start:26,end:232},{start:232,end:112},{start:189,end:190},{start:190,end:243},{start:243,end:189},{start:221,end:56},{start:56,end:190},{start:190,end:221},{start:28,end:56},{start:56,end:221},{start:221,end:28},{start:27,end:28},{start:28,end:222},{start:222,end:27},{start:29,end:27},{start:27,end:223},{start:223,end:29},{start:30,end:29},{start:29,end:224},{start:224,end:30},{start:247,end:30},{start:30,end:225},{start:225,end:247},{start:238,end:79},{start:79,end:20},{start:20,end:238},{start:166,end:59},{start:59,end:75},{start:75,end:166},{start:60,end:75},{start:75,end:240},{start:240,end:60},{start:147,end:177},{start:177,end:215},{start:215,end:147},{start:20,end:79},{start:79,end:166},{start:166,end:20},{start:187,end:147},{start:147,end:213},{start:213,end:187},{start:112,end:233},{start:233,end:244},{start:244,end:112},{start:233,end:128},{start:128,end:245},{start:245,end:233},{start:128,end:114},{start:114,end:188},{start:188,end:128},{start:114,end:217},{start:217,end:174},{start:174,end:114},{start:131,end:115},{start:115,end:220},{start:220,end:131},{start:217,end:198},{start:198,end:236},{start:236,end:217},{start:198,end:131},{start:131,end:134},{start:134,end:198},{start:177,end:132},{start:132,end:58},{start:58,end:177},{start:143,end:35},{start:35,end:124},{start:124,end:143},{start:110,end:163},{start:163,end:7},{start:7,end:110},{start:228,end:110},{start:110,end:25},{start:25,end:228},{start:356,end:389},{start:389,end:368},{start:368,end:356},{start:11,end:302},{start:302,end:267},{start:267,end:11},{start:452,end:350},{start:350,end:349},{start:349,end:452},{start:302,end:303},{start:303,end:269},{start:269,end:302},{start:357,end:343},{start:343,end:277},{start:277,end:357},{start:452,end:453},{start:453,end:357},{start:357,end:452},{start:333,end:332},{start:332,end:297},{start:297,end:333},{start:175,end:152},{start:152,end:377},{start:377,end:175},{start:347,end:348},{start:348,end:330},{start:330,end:347},{start:303,end:304},{start:304,end:270},{start:270,end:303},{start:9,end:336},{start:336,end:337},{start:337,end:9},{start:278,end:279},{start:279,end:360},{start:360,end:278},{start:418,end:262},{start:262,end:431},{start:431,end:418},{start:304,end:408},{start:408,end:409},{start:409,end:304},{start:310,end:415},{start:415,end:407},{start:407,end:310},{start:270,end:409},{start:409,end:410},{start:410,end:270},{start:450,end:348},{start:348,end:347},{start:347,end:450},{start:422,end:430},{start:430,end:434},{start:434,end:422},{start:313,end:314},{start:314,end:17},{start:17,end:313},{start:306,end:307},{start:307,end:375},{start:375,end:306},{start:387,end:388},{start:388,end:260},{start:260,end:387},{start:286,end:414},{start:414,end:398},{start:398,end:286},{start:335,end:406},{start:406,end:418},{start:418,end:335},{start:364,end:367},{start:367,end:416},{start:416,end:364},{start:423,end:358},{start:358,end:327},{start:327,end:423},{start:251,end:284},{start:284,end:298},{start:298,end:251},{start:281,end:5},{start:5,end:4},{start:4,end:281},{start:373,end:374},{start:374,end:253},{start:253,end:373},{start:307,end:320},{start:320,end:321},{start:321,end:307},{start:425,end:427},{start:427,end:411},{start:411,end:425},{start:421,end:313},{start:313,end:18},{start:18,end:421},{start:321,end:405},{start:405,end:406},{start:406,end:321},{start:320,end:404},{start:404,end:405},{start:405,end:320},{start:315,end:16},{start:16,end:17},{start:17,end:315},{start:426,end:425},{start:425,end:266},{start:266,end:426},{start:377,end:400},{start:400,end:369},{start:369,end:377},{start:322,end:391},{start:391,end:269},{start:269,end:322},{start:417,end:465},{start:465,end:464},{start:464,end:417},{start:386,end:257},{start:257,end:258},{start:258,end:386},{start:466,end:260},{start:260,end:388},{start:388,end:466},{start:456,end:399},{start:399,end:419},{start:419,end:456},{start:284,end:332},{start:332,end:333},{start:333,end:284},{start:417,end:285},{start:285,end:8},{start:8,end:417},{start:346,end:340},{start:340,end:261},{start:261,end:346},{start:413,end:441},{start:441,end:285},{start:285,end:413},{start:327,end:460},{start:460,end:328},{start:328,end:327},{start:355,end:371},{start:371,end:329},{start:329,end:355},{start:392,end:439},{start:439,end:438},{start:438,end:392},{start:382,end:341},{start:341,end:256},{start:256,end:382},{start:429,end:420},{start:420,end:360},{start:360,end:429},{start:364,end:394},{start:394,end:379},{start:379,end:364},{start:277,end:343},{start:343,end:437},{start:437,end:277},{start:443,end:444},{start:444,end:283},{start:283,end:443},{start:275,end:440},{start:440,end:363},{start:363,end:275},{start:431,end:262},{start:262,end:369},{start:369,end:431},{start:297,end:338},{start:338,end:337},{start:337,end:297},{start:273,end:375},{start:375,end:321},{start:321,end:273},{start:450,end:451},{start:451,end:349},{start:349,end:450},{start:446,end:342},{start:342,end:467},{start:467,end:446},{start:293,end:334},{start:334,end:282},{start:282,end:293},{start:458,end:461},{start:461,end:462},{start:462,end:458},{start:276,end:353},{start:353,end:383},{start:383,end:276},{start:308,end:324},{start:324,end:325},{start:325,end:308},{start:276,end:300},{start:300,end:293},{start:293,end:276},{start:372,end:345},{start:345,end:447},{start:447,end:372},{start:352,end:345},{start:345,end:340},{start:340,end:352},{start:274,end:1},{start:1,end:19},{start:19,end:274},{start:456,end:248},{start:248,end:281},{start:281,end:456},{start:436,end:427},{start:427,end:425},{start:425,end:436},{start:381,end:256},{start:256,end:252},{start:252,end:381},{start:269,end:391},{start:391,end:393},{start:393,end:269},{start:200,end:199},{start:199,end:428},{start:428,end:200},{start:266,end:330},{start:330,end:329},{start:329,end:266},{start:287,end:273},{start:273,end:422},{start:422,end:287},{start:250,end:462},{start:462,end:328},{start:328,end:250},{start:258,end:286},{start:286,end:384},{start:384,end:258},{start:265,end:353},{start:353,end:342},{start:342,end:265},{start:387,end:259},{start:259,end:257},{start:257,end:387},{start:424,end:431},{start:431,end:430},{start:430,end:424},{start:342,end:353},{start:353,end:276},{start:276,end:342},{start:273,end:335},{start:335,end:424},{start:424,end:273},{start:292,end:325},{start:325,end:307},{start:307,end:292},{start:366,end:447},{start:447,end:345},{start:345,end:366},{start:271,end:303},{start:303,end:302},{start:302,end:271},{start:423,end:266},{start:266,end:371},{start:371,end:423},{start:294,end:455},{start:455,end:460},{start:460,end:294},{start:279,end:278},{start:278,end:294},{start:294,end:279},{start:271,end:272},{start:272,end:304},{start:304,end:271},{start:432,end:434},{start:434,end:427},{start:427,end:432},{start:272,end:407},{start:407,end:408},{start:408,end:272},{start:394,end:430},{start:430,end:431},{start:431,end:394},{start:395,end:369},{start:369,end:400},{start:400,end:395},{start:334,end:333},{start:333,end:299},{start:299,end:334},{start:351,end:417},{start:417,end:168},{start:168,end:351},{start:352,end:280},{start:280,end:411},{start:411,end:352},{start:325,end:319},{start:319,end:320},{start:320,end:325},{start:295,end:296},{start:296,end:336},{start:336,end:295},{start:319,end:403},{start:403,end:404},{start:404,end:319},{start:330,end:348},{start:348,end:349},{start:349,end:330},{start:293,end:298},{start:298,end:333},{start:333,end:293},{start:323,end:454},{start:454,end:447},{start:447,end:323},{start:15,end:16},{start:16,end:315},{start:315,end:15},{start:358,end:429},{start:429,end:279},{start:279,end:358},{start:14,end:15},{start:15,end:316},{start:316,end:14},{start:285,end:336},{start:336,end:9},{start:9,end:285},{start:329,end:349},{start:349,end:350},{start:350,end:329},{start:374,end:380},{start:380,end:252},{start:252,end:374},{start:318,end:402},{start:402,end:403},{start:403,end:318},{start:6,end:197},{start:197,end:419},{start:419,end:6},{start:318,end:319},{start:319,end:325},{start:325,end:318},{start:367,end:364},{start:364,end:365},{start:365,end:367},{start:435,end:367},{start:367,end:397},{start:397,end:435},{start:344,end:438},{start:438,end:439},{start:439,end:344},{start:272,end:271},{start:271,end:311},{start:311,end:272},{start:195,end:5},{start:5,end:281},{start:281,end:195},{start:273,end:287},{start:287,end:291},{start:291,end:273},{start:396,end:428},{start:428,end:199},{start:199,end:396},{start:311,end:271},{start:271,end:268},{start:268,end:311},{start:283,end:444},{start:444,end:445},{start:445,end:283},{start:373,end:254},{start:254,end:339},{start:339,end:373},{start:282,end:334},{start:334,end:296},{start:296,end:282},{start:449,end:347},{start:347,end:346},{start:346,end:449},{start:264,end:447},{start:447,end:454},{start:454,end:264},{start:336,end:296},{start:296,end:299},{start:299,end:336},{start:338,end:10},{start:10,end:151},{start:151,end:338},{start:278,end:439},{start:439,end:455},{start:455,end:278},{start:292,end:407},{start:407,end:415},{start:415,end:292},{start:358,end:371},{start:371,end:355},{start:355,end:358},{start:340,end:345},{start:345,end:372},{start:372,end:340},{start:346,end:347},{start:347,end:280},{start:280,end:346},{start:442,end:443},{start:443,end:282},{start:282,end:442},{start:19,end:94},{start:94,end:370},{start:370,end:19},{start:441,end:442},{start:442,end:295},{start:295,end:441},{start:248,end:419},{start:419,end:197},{start:197,end:248},{start:263,end:255},{start:255,end:359},{start:359,end:263},{start:440,end:275},{start:275,end:274},{start:274,end:440},{start:300,end:383},{start:383,end:368},{start:368,end:300},{start:351,end:412},{start:412,end:465},{start:465,end:351},{start:263,end:467},{start:467,end:466},{start:466,end:263},{start:301,end:368},{start:368,end:389},{start:389,end:301},{start:395,end:378},{start:378,end:379},{start:379,end:395},{start:412,end:351},{start:351,end:419},{start:419,end:412},{start:436,end:426},{start:426,end:322},{start:322,end:436},{start:2,end:164},{start:164,end:393},{start:393,end:2},{start:370,end:462},{start:462,end:461},{start:461,end:370},{start:164,end:0},{start:0,end:267},{start:267,end:164},{start:302,end:11},{start:11,end:12},{start:12,end:302},{start:268,end:12},{start:12,end:13},{start:13,end:268},{start:293,end:300},{start:300,end:301},{start:301,end:293},{start:446,end:261},{start:261,end:340},{start:340,end:446},{start:330,end:266},{start:266,end:425},{start:425,end:330},{start:426,end:423},{start:423,end:391},{start:391,end:426},{start:429,end:355},{start:355,end:437},{start:437,end:429},{start:391,end:327},{start:327,end:326},{start:326,end:391},{start:440,end:457},{start:457,end:438},{start:438,end:440},{start:341,end:382},{start:382,end:362},{start:362,end:341},{start:459,end:457},{start:457,end:461},{start:461,end:459},{start:434,end:430},{start:430,end:394},{start:394,end:434},{start:414,end:463},{start:463,end:362},{start:362,end:414},{start:396,end:369},{start:369,end:262},{start:262,end:396},{start:354,end:461},{start:461,end:457},{start:457,end:354},{start:316,end:403},{start:403,end:402},{start:402,end:316},{start:315,end:404},{start:404,end:403},{start:403,end:315},{start:314,end:405},{start:405,end:404},{start:404,end:314},{start:313,end:406},{start:406,end:405},{start:405,end:313},{start:421,end:418},{start:418,end:406},{start:406,end:421},{start:366,end:401},{start:401,end:361},{start:361,end:366},{start:306,end:408},{start:408,end:407},{start:407,end:306},{start:291,end:409},{start:409,end:408},{start:408,end:291},{start:287,end:410},{start:410,end:409},{start:409,end:287},{start:432,end:436},{start:436,end:410},{start:410,end:432},{start:434,end:416},{start:416,end:411},{start:411,end:434},{start:264,end:368},{start:368,end:383},{start:383,end:264},{start:309,end:438},{start:438,end:457},{start:457,end:309},{start:352,end:376},{start:376,end:401},{start:401,end:352},{start:274,end:275},{start:275,end:4},{start:4,end:274},{start:421,end:428},{start:428,end:262},{start:262,end:421},{start:294,end:327},{start:327,end:358},{start:358,end:294},{start:433,end:416},{start:416,end:367},{start:367,end:433},{start:289,end:455},{start:455,end:439},{start:439,end:289},{start:462,end:370},{start:370,end:326},{start:326,end:462},{start:2,end:326},{start:326,end:370},{start:370,end:2},{start:305,end:460},{start:460,end:455},{start:455,end:305},{start:254,end:449},{start:449,end:448},{start:448,end:254},{start:255,end:261},{start:261,end:446},{start:446,end:255},{start:253,end:450},{start:450,end:449},{start:449,end:253},{start:252,end:451},{start:451,end:450},{start:450,end:252},{start:256,end:452},{start:452,end:451},{start:451,end:256},{start:341,end:453},{start:453,end:452},{start:452,end:341},{start:413,end:464},{start:464,end:463},{start:463,end:413},{start:441,end:413},{start:413,end:414},{start:414,end:441},{start:258,end:442},{start:442,end:441},{start:441,end:258},{start:257,end:443},{start:443,end:442},{start:442,end:257},{start:259,end:444},{start:444,end:443},{start:443,end:259},{start:260,end:445},{start:445,end:444},{start:444,end:260},{start:467,end:342},{start:342,end:445},{start:445,end:467},{start:459,end:458},{start:458,end:250},{start:250,end:459},{start:289,end:392},{start:392,end:290},{start:290,end:289},{start:290,end:328},{start:328,end:460},{start:460,end:290},{start:376,end:433},{start:433,end:435},{start:435,end:376},{start:250,end:290},{start:290,end:392},{start:392,end:250},{start:411,end:416},{start:416,end:433},{start:433,end:411},{start:341,end:463},{start:463,end:464},{start:464,end:341},{start:453,end:464},{start:464,end:465},{start:465,end:453},{start:357,end:465},{start:465,end:412},{start:412,end:357},{start:343,end:412},{start:412,end:399},{start:399,end:343},{start:360,end:363},{start:363,end:440},{start:440,end:360},{start:437,end:399},{start:399,end:456},{start:456,end:437},{start:420,end:456},{start:456,end:363},{start:363,end:420},{start:401,end:435},{start:435,end:288},{start:288,end:401},{start:372,end:383},{start:383,end:353},{start:353,end:372},{start:339,end:255},{start:255,end:249},{start:249,end:339},{start:448,end:261},{start:261,end:255},{start:255,end:448},{start:133,end:243},{start:243,end:190},{start:190,end:133},{start:133,end:155},{start:155,end:112},{start:112,end:133},{start:33,end:246},{start:246,end:247},{start:247,end:33},{start:33,end:130},{start:130,end:25},{start:25,end:33},{start:398,end:384},{start:384,end:286},{start:286,end:398},{start:362,end:398},{start:398,end:414},{start:414,end:362},{start:362,end:463},{start:463,end:341},{start:341,end:362},{start:263,end:359},{start:359,end:467},{start:467,end:263},{start:263,end:249},{start:249,end:255},{start:255,end:263},{start:466,end:467},{start:467,end:260},{start:260,end:466},{start:75,end:60},{start:60,end:166},{start:166,end:75},{start:238,end:239},{start:239,end:79},{start:79,end:238},{start:162,end:127},{start:127,end:139},{start:139,end:162},{start:72,end:11},{start:11,end:37},{start:37,end:72},{start:121,end:232},{start:232,end:120},{start:120,end:121},{start:73,end:72},{start:72,end:39},{start:39,end:73},{start:114,end:128},{start:128,end:47},{start:47,end:114},{start:233,end:232},{start:232,end:128},{start:128,end:233},{start:103,end:104},{start:104,end:67},{start:67,end:103},{start:152,end:175},{start:175,end:148},{start:148,end:152},{start:119,end:118},{start:118,end:101},{start:101,end:119},{start:74,end:73},{start:73,end:40},{start:40,end:74},{start:107,end:9},{start:9,end:108},{start:108,end:107},{start:49,end:48},{start:48,end:131},{start:131,end:49},{start:32,end:194},{start:194,end:211},{start:211,end:32},{start:184,end:74},{start:74,end:185},{start:185,end:184},{start:191,end:80},{start:80,end:183},{start:183,end:191},{start:185,end:40},{start:40,end:186},{start:186,end:185},{start:119,end:230},{start:230,end:118},{start:118,end:119},{start:210,end:202},{start:202,end:214},{start:214,end:210},{start:84,end:83},{start:83,end:17},{start:17,end:84},{start:77,end:76},{start:76,end:146},{start:146,end:77},{start:161,end:160},{start:160,end:30},{start:30,end:161},{start:190,end:56},{start:56,end:173},{start:173,end:190},{start:182,end:106},{start:106,end:194},{start:194,end:182},{start:138,end:135},{start:135,end:192},{start:192,end:138},{start:129,end:203},{start:203,end:98},{start:98,end:129},{start:54,end:21},{start:21,end:68},{start:68,end:54},{start:5,end:51},{start:51,end:4},{start:4,end:5},{start:145,end:144},{start:144,end:23},{start:23,end:145},{start:90,end:77},{start:77,end:91},{start:91,end:90},{start:207,end:205},{start:205,end:187},{start:187,end:207},{start:83,end:201},{start:201,end:18},{start:18,end:83},{start:181,end:91},{start:91,end:182},{start:182,end:181},{start:180,end:90},{start:90,end:181},{start:181,end:180},{start:16,end:85},{start:85,end:17},{start:17,end:16},{start:205,end:206},{start:206,end:36},{start:36,end:205},{start:176,end:148},{start:148,end:140},{start:140,end:176},{start:165,end:92},{start:92,end:39},{start:39,end:165},{start:245,end:193},{start:193,end:244},{start:244,end:245},{start:27,end:159},{start:159,end:28},{start:28,end:27},{start:30,end:247},{start:247,end:161},{start:161,end:30},{start:174,end:236},{start:236,end:196},{start:196,end:174},{start:103,end:54},{start:54,end:104},{start:104,end:103},{start:55,end:193},{start:193,end:8},{start:8,end:55},{start:111,end:117},{start:117,end:31},{start:31,end:111},{start:221,end:189},{start:189,end:55},{start:55,end:221},{start:240,end:98},{start:98,end:99},{start:99,end:240},{start:142,end:126},{start:126,end:100},{start:100,end:142},{start:219,end:166},{start:166,end:218},{start:218,end:219},{start:112,end:155},{start:155,end:26},{start:26,end:112},{start:198,end:209},{start:209,end:131},{start:131,end:198},{start:169,end:135},{start:135,end:150},{start:150,end:169},{start:114,end:47},{start:47,end:217},{start:217,end:114},{start:224,end:223},{start:223,end:53},{start:53,end:224},{start:220,end:45},{start:45,end:134},{start:134,end:220},{start:32,end:211},{start:211,end:140},{start:140,end:32},{start:109,end:67},{start:67,end:108},{start:108,end:109},{start:146,end:43},{start:43,end:91},{start:91,end:146},{start:231,end:230},{start:230,end:120},{start:120,end:231},{start:113,end:226},{start:226,end:247},{start:247,end:113},{start:105,end:63},{start:63,end:52},{start:52,end:105},{start:241,end:238},{start:238,end:242},{start:242,end:241},{start:124,end:46},{start:46,end:156},{start:156,end:124},{start:95,end:78},{start:78,end:96},{start:96,end:95},{start:70,end:46},{start:46,end:63},{start:63,end:70},{start:116,end:143},{start:143,end:227},{start:227,end:116},{start:116,end:123},{start:123,end:111},{start:111,end:116},{start:1,end:44},{start:44,end:19},{start:19,end:1},{start:3,end:236},{start:236,end:51},{start:51,end:3},{start:207,end:216},{start:216,end:205},{start:205,end:207},{start:26,end:154},{start:154,end:22},{start:22,end:26},{start:165,end:39},{start:39,end:167},{start:167,end:165},{start:199,end:200},{start:200,end:208},{start:208,end:199},{start:101,end:36},{start:36,end:100},{start:100,end:101},{start:43,end:57},{start:57,end:202},{start:202,end:43},{start:242,end:20},{start:20,end:99},{start:99,end:242},{start:56,end:28},{start:28,end:157},{start:157,end:56},{start:124,end:35},{start:35,end:113},{start:113,end:124},{start:29,end:160},{start:160,end:27},{start:27,end:29},{start:211,end:204},{start:204,end:210},{start:210,end:211},{start:124,end:113},{start:113,end:46},{start:46,end:124},{start:106,end:43},{start:43,end:204},{start:204,end:106},{start:96,end:62},{start:62,end:77},{start:77,end:96},{start:227,end:137},{start:137,end:116},{start:116,end:227},{start:73,end:41},{start:41,end:72},{start:72,end:73},{start:36,end:203},{start:203,end:142},{start:142,end:36},{start:235,end:64},{start:64,end:240},{start:240,end:235},{start:48,end:49},{start:49,end:64},{start:64,end:48},{start:42,end:41},{start:41,end:74},{start:74,end:42},{start:214,end:212},{start:212,end:207},{start:207,end:214},{start:183,end:42},{start:42,end:184},{start:184,end:183},{start:210,end:169},{start:169,end:211},{start:211,end:210},{start:140,end:170},{start:170,end:176},{start:176,end:140},{start:104,end:105},{start:105,end:69},{start:69,end:104},{start:193,end:122},{start:122,end:168},{start:168,end:193},{start:50,end:123},{start:123,end:187},{start:187,end:50},{start:89,end:96},{start:96,end:90},{start:90,end:89},{start:66,end:65},{start:65,end:107},{start:107,end:66},{start:179,end:89},{start:89,end:180},{start:180,end:179},{start:119,end:101},{start:101,end:120},{start:120,end:119},{start:68,end:63},{start:63,end:104},{start:104,end:68},{start:234,end:93},{start:93,end:227},{start:227,end:234},{start:16,end:15},{start:15,end:85},{start:85,end:16},{start:209,end:129},{start:129,end:49},{start:49,end:209},{start:15,end:14},{start:14,end:86},{start:86,end:15},{start:107,end:55},{start:55,end:9},{start:9,end:107},{start:120,end:100},{start:100,end:121},{start:121,end:120},{start:153,end:145},{start:145,end:22},{start:22,end:153},{start:178,end:88},{start:88,end:179},{start:179,end:178},{start:197,end:6},{start:6,end:196},{start:196,end:197},{start:89,end:88},{start:88,end:96},{start:96,end:89},{start:135,end:138},{start:138,end:136},{start:136,end:135},{start:138,end:215},{start:215,end:172},{start:172,end:138},{start:218,end:115},{start:115,end:219},{start:219,end:218},{start:41,end:42},{start:42,end:81},{start:81,end:41},{start:5,end:195},{start:195,end:51},{start:51,end:5},{start:57,end:43},{start:43,end:61},{start:61,end:57},{start:208,end:171},{start:171,end:199},{start:199,end:208},{start:41,end:81},{start:81,end:38},{start:38,end:41},{start:224,end:53},{start:53,end:225},{start:225,end:224},{start:24,end:144},{start:144,end:110},{start:110,end:24},{start:105,end:52},{start:52,end:66},{start:66,end:105},{start:118,end:229},{start:229,end:117},{start:117,end:118},{start:227,end:34},{start:34,end:234},{start:234,end:227},{start:66,end:107},{start:107,end:69},{start:69,end:66},{start:10,end:109},{start:109,end:151},{start:151,end:10},{start:219,end:48},{start:48,end:235},{start:235,end:219},{start:183,end:62},{start:62,end:191},{start:191,end:183},{start:142,end:129},{start:129,end:126},{start:126,end:142},{start:116,end:111},{start:111,end:143},{start:143,end:116},{start:118,end:117},{start:117,end:50},{start:50,end:118},{start:223,end:222},{start:222,end:52},{start:52,end:223},{start:94,end:19},{start:19,end:141},{start:141,end:94},{start:222,end:221},{start:221,end:65},{start:65,end:222},{start:196,end:3},{start:3,end:197},{start:197,end:196},{start:45,end:220},{start:220,end:44},{start:44,end:45},{start:156,end:70},{start:70,end:139},{start:139,end:156},{start:188,end:122},{start:122,end:245},{start:245,end:188},{start:139,end:71},{start:71,end:162},{start:162,end:139},{start:149,end:170},{start:170,end:150},{start:150,end:149},{start:122,end:188},{start:188,end:196},{start:196,end:122},{start:206,end:216},{start:216,end:92},{start:92,end:206},{start:164,end:2},{start:2,end:167},{start:167,end:164},{start:242,end:141},{start:141,end:241},{start:241,end:242},{start:0,end:164},{start:164,end:37},{start:37,end:0},{start:11,end:72},{start:72,end:12},{start:12,end:11},{start:12,end:38},{start:38,end:13},{start:13,end:12},{start:70,end:63},{start:63,end:71},{start:71,end:70},{start:31,end:226},{start:226,end:111},{start:111,end:31},{start:36,end:101},{start:101,end:205},{start:205,end:36},{start:203,end:206},{start:206,end:165},{start:165,end:203},{start:126,end:209},{start:209,end:217},{start:217,end:126},{start:98,end:165},{start:165,end:97},{start:97,end:98},{start:237,end:220},{start:220,end:218},{start:218,end:237},{start:237,end:239},{start:239,end:241},{start:241,end:237},{start:210,end:214},{start:214,end:169},{start:169,end:210},{start:140,end:171},{start:171,end:32},{start:32,end:140},{start:241,end:125},{start:125,end:237},{start:237,end:241},{start:179,end:86},{start:86,end:178},{start:178,end:179},{start:180,end:85},{start:85,end:179},{start:179,end:180},{start:181,end:84},{start:84,end:180},{start:180,end:181},{start:182,end:83},{start:83,end:181},{start:181,end:182},{start:194,end:201},{start:201,end:182},{start:182,end:194},{start:177,end:137},{start:137,end:132},{start:132,end:177},{start:184,end:76},{start:76,end:183},{start:183,end:184},{start:185,end:61},{start:61,end:184},{start:184,end:185},{start:186,end:57},{start:57,end:185},{start:185,end:186},{start:216,end:212},{start:212,end:186},{start:186,end:216},{start:192,end:214},{start:214,end:187},{start:187,end:192},{start:139,end:34},{start:34,end:156},{start:156,end:139},{start:218,end:79},{start:79,end:237},{start:237,end:218},{start:147,end:123},{start:123,end:177},{start:177,end:147},{start:45,end:44},{start:44,end:4},{start:4,end:45},{start:208,end:201},{start:201,end:32},{start:32,end:208},{start:98,end:64},{start:64,end:129},{start:129,end:98},{start:192,end:213},{start:213,end:138},{start:138,end:192},{start:235,end:59},{start:59,end:219},{start:219,end:235},{start:141,end:242},{start:242,end:97},{start:97,end:141},{start:97,end:2},{start:2,end:141},{start:141,end:97},{start:240,end:75},{start:75,end:235},{start:235,end:240},{start:229,end:24},{start:24,end:228},{start:228,end:229},{start:31,end:25},{start:25,end:226},{start:226,end:31},{start:230,end:23},{start:23,end:229},{start:229,end:230},{start:231,end:22},{start:22,end:230},{start:230,end:231},{start:232,end:26},{start:26,end:231},{start:231,end:232},{start:233,end:112},{start:112,end:232},{start:232,end:233},{start:244,end:189},{start:189,end:243},{start:243,end:244},{start:189,end:221},{start:221,end:190},{start:190,end:189},{start:222,end:28},{start:28,end:221},{start:221,end:222},{start:223,end:27},{start:27,end:222},{start:222,end:223},{start:224,end:29},{start:29,end:223},{start:223,end:224},{start:225,end:30},{start:30,end:224},{start:224,end:225},{start:113,end:247},{start:247,end:225},{start:225,end:113},{start:99,end:60},{start:60,end:240},{start:240,end:99},{start:213,end:147},{start:147,end:215},{start:215,end:213},{start:60,end:20},{start:20,end:166},{start:166,end:60},{start:192,end:187},{start:187,end:213},{start:213,end:192},{start:243,end:112},{start:112,end:244},{start:244,end:243},{start:244,end:233},{start:233,end:245},{start:245,end:244},{start:245,end:128},{start:128,end:188},{start:188,end:245},{start:188,end:114},{start:114,end:174},{start:174,end:188},{start:134,end:131},{start:131,end:220},{start:220,end:134},{start:174,end:217},{start:217,end:236},{start:236,end:174},{start:236,end:198},{start:198,end:134},{start:134,end:236},{start:215,end:177},{start:177,end:58},{start:58,end:215},{start:156,end:143},{start:143,end:124},{start:124,end:156},{start:25,end:110},{start:110,end:7},{start:7,end:25},{start:31,end:228},{start:228,end:25},{start:25,end:31},{start:264,end:356},{start:356,end:368},{start:368,end:264},{start:0,end:11},{start:11,end:267},{start:267,end:0},{start:451,end:452},{start:452,end:349},{start:349,end:451},{start:267,end:302},{start:302,end:269},{start:269,end:267},{start:350,end:357},{start:357,end:277},{start:277,end:350},{start:350,end:452},{start:452,end:357},{start:357,end:350},{start:299,end:333},{start:333,end:297},{start:297,end:299},{start:396,end:175},{start:175,end:377},{start:377,end:396},{start:280,end:347},{start:347,end:330},{start:330,end:280},{start:269,end:303},{start:303,end:270},{start:270,end:269},{start:151,end:9},{start:9,end:337},{start:337,end:151},{start:344,end:278},{start:278,end:360},{start:360,end:344},{start:424,end:418},{start:418,end:431},{start:431,end:424},{start:270,end:304},{start:304,end:409},{start:409,end:270},{start:272,end:310},{start:310,end:407},{start:407,end:272},{start:322,end:270},{start:270,end:410},{start:410,end:322},{start:449,end:450},{start:450,end:347},{start:347,end:449},{start:432,end:422},{start:422,end:434},{start:434,end:432},{start:18,end:313},{start:313,end:17},{start:17,end:18},{start:291,end:306},{start:306,end:375},{start:375,end:291},{start:259,end:387},{start:387,end:260},{start:260,end:259},{start:424,end:335},{start:335,end:418},{start:418,end:424},{start:434,end:364},{start:364,end:416},{start:416,end:434},{start:391,end:423},{start:423,end:327},{start:327,end:391},{start:301,end:251},{start:251,end:298},{start:298,end:301},{start:275,end:281},{start:281,end:4},{start:4,end:275},{start:254,end:373},{start:373,end:253},{start:253,end:254},{start:375,end:307},{start:307,end:321},{start:321,end:375},{start:280,end:425},{start:425,end:411},{start:411,end:280},{start:200,end:421},{start:421,end:18},{start:18,end:200},{start:335,end:321},{start:321,end:406},{start:406,end:335},{start:321,end:320},{start:320,end:405},{start:405,end:321},{start:314,end:315},{start:315,end:17},{start:17,end:314},{start:423,end:426},{start:426,end:266},{start:266,end:423},{start:396,end:377},{start:377,end:369},{start:369,end:396},{start:270,end:322},{start:322,end:269},{start:269,end:270},{start:413,end:417},{start:417,end:464},{start:464,end:413},{start:385,end:386},{start:386,end:258},{start:258,end:385},{start:248,end:456},{start:456,end:419},{start:419,end:248},{start:298,end:284},{start:284,end:333},{start:333,end:298},{start:168,end:417},{start:417,end:8},{start:8,end:168},{start:448,end:346},{start:346,end:261},{start:261,end:448},{start:417,end:413},{start:413,end:285},{start:285,end:417},{start:326,end:327},{start:327,end:328},{start:328,end:326},{start:277,end:355},{start:355,end:329},{start:329,end:277},{start:309,end:392},{start:392,end:438},{start:438,end:309},{start:381,end:382},{start:382,end:256},{start:256,end:381},{start:279,end:429},{start:429,end:360},{start:360,end:279},{start:365,end:364},{start:364,end:379},{start:379,end:365},{start:355,end:277},{start:277,end:437},{start:437,end:355},{start:282,end:443},{start:443,end:283},{start:283,end:282},{start:281,end:275},{start:275,end:363},{start:363,end:281},{start:395,end:431},{start:431,end:369},{start:369,end:395},{start:299,end:297},{start:297,end:337},{start:337,end:299},{start:335,end:273},{start:273,end:321},{start:321,end:335},{start:348,end:450},{start:450,end:349},{start:349,end:348},{start:359,end:446},{start:446,end:467},{start:467,end:359},{start:283,end:293},{start:293,end:282},{start:282,end:283},{start:250,end:458},{start:458,end:462},{start:462,end:250},{start:300,end:276},{start:276,end:383},{start:383,end:300},{start:292,end:308},{start:308,end:325},{start:325,end:292},{start:283,end:276},{start:276,end:293},{start:293,end:283},{start:264,end:372},{start:372,end:447},{start:447,end:264},{start:346,end:352},{start:352,end:340},{start:340,end:346},{start:354,end:274},{start:274,end:19},{start:19,end:354},{start:363,end:456},{start:456,end:281},{start:281,end:363},{start:426,end:436},{start:436,end:425},{start:425,end:426},{start:380,end:381},{start:381,end:252},{start:252,end:380},{start:267,end:269},{start:269,end:393},{start:393,end:267},{start:421,end:200},{start:200,end:428},{start:428,end:421},{start:371,end:266},{start:266,end:329},{start:329,end:371},{start:432,end:287},{start:287,end:422},{start:422,end:432},{start:290,end:250},{start:250,end:328},{start:328,end:290},{start:385,end:258},{start:258,end:384},{start:384,end:385},{start:446,end:265},{start:265,end:342},{start:342,end:446},{start:386,end:387},{start:387,end:257},{start:257,end:386},{start:422,end:424},{start:424,end:430},{start:430,end:422},{start:445,end:342},{start:342,end:276},{start:276,end:445},{start:422,end:273},{start:273,end:424},{start:424,end:422},{start:306,end:292},{start:292,end:307},{start:307,end:306},{start:352,end:366},{start:366,end:345},{start:345,end:352},{start:268,end:271},{start:271,end:302},{start:302,end:268},{start:358,end:423},{start:423,end:371},{start:371,end:358},{start:327,end:294},{start:294,end:460},{start:460,end:327},{start:331,end:279},{start:279,end:294},{start:294,end:331},{start:303,end:271},{start:271,end:304},{start:304,end:303},{start:436,end:432},{start:432,end:427},{start:427,end:436},{start:304,end:272},{start:272,end:408},{start:408,end:304},{start:395,end:394},{start:394,end:431},{start:431,end:395},{start:378,end:395},{start:395,end:400},{start:400,end:378},{start:296,end:334},{start:334,end:299},{start:299,end:296},{start:6,end:351},{start:351,end:168},{start:168,end:6},{start:376,end:352},{start:352,end:411},{start:411,end:376},{start:307,end:325},{start:325,end:320},{start:320,end:307},{start:285,end:295},{start:295,end:336},{start:336,end:285},{start:320,end:319},{start:319,end:404},{start:404,end:320},{start:329,end:330},{start:330,end:349},{start:349,end:329},{start:334,end:293},{start:293,end:333},{start:333,end:334},{start:366,end:323},{start:323,end:447},{start:447,end:366},{start:316,end:15},{start:15,end:315},{start:315,end:316},{start:331,end:358},{start:358,end:279},{start:279,end:331},{start:317,end:14},{start:14,end:316},{start:316,end:317},{start:8,end:285},{start:285,end:9},{start:9,end:8},{start:277,end:329},{start:329,end:350},{start:350,end:277},{start:253,end:374},{start:374,end:252},{start:252,end:253},{start:319,end:318},{start:318,end:403},{start:403,end:319},{start:351,end:6},{start:6,end:419},{start:419,end:351},{start:324,end:318},{start:318,end:325},{start:325,end:324},{start:397,end:367},{start:367,end:365},{start:365,end:397},{start:288,end:435},{start:435,end:397},{start:397,end:288},{start:278,end:344},{start:344,end:439},{start:439,end:278},{start:310,end:272},{start:272,end:311},{start:311,end:310},{start:248,end:195},{start:195,end:281},{start:281,end:248},{start:375,end:273},{start:273,end:291},{start:291,end:375},{start:175,end:396},{start:396,end:199},{start:199,end:175},{start:312,end:311},{start:311,end:268},{start:268,end:312},{start:276,end:283},{start:283,end:445},{start:445,end:276},{start:390,end:373},{start:373,end:339},{start:339,end:390},{start:295,end:282},{start:282,end:296},{start:296,end:295},{start:448,end:449},{start:449,end:346},{start:346,end:448},{start:356,end:264},{start:264,end:454},{start:454,end:356},{start:337,end:336},{start:336,end:299},{start:299,end:337},{start:337,end:338},{start:338,end:151},{start:151,end:337},{start:294,end:278},{start:278,end:455},{start:455,end:294},{start:308,end:292},{start:292,end:415},{start:415,end:308},{start:429,end:358},{start:358,end:355},{start:355,end:429},{start:265,end:340},{start:340,end:372},{start:372,end:265},{start:352,end:346},{start:346,end:280},{start:280,end:352},{start:295,end:442},{start:442,end:282},{start:282,end:295},{start:354,end:19},{start:19,end:370},{start:370,end:354},{start:285,end:441},{start:441,end:295},{start:295,end:285},{start:195,end:248},{start:248,end:197},{start:197,end:195},{start:457,end:440},{start:440,end:274},{start:274,end:457},{start:301,end:300},{start:300,end:368},{start:368,end:301},{start:417,end:351},{start:351,end:465},{start:465,end:417},{start:251,end:301},{start:301,end:389},{start:389,end:251},{start:394,end:395},{start:395,end:379},{start:379,end:394},{start:399,end:412},{start:412,end:419},{start:419,end:399},{start:410,end:436},{start:436,end:322},{start:322,end:410},{start:326,end:2},{start:2,end:393},{start:393,end:326},{start:354,end:370},{start:370,end:461},{start:461,end:354},{start:393,end:164},{start:164,end:267},{start:267,end:393},{start:268,end:302},{start:302,end:12},{start:12,end:268},{start:312,end:268},{start:268,end:13},{start:13,end:312},{start:298,end:293},{start:293,end:301},{start:301,end:298},{start:265,end:446},{start:446,end:340},{start:340,end:265},{start:280,end:330},{start:330,end:425},{start:425,end:280},{start:322,end:426},{start:426,end:391},{start:391,end:322},{start:420,end:429},{start:429,end:437},{start:437,end:420},{start:393,end:391},{start:391,end:326},{start:326,end:393},{start:344,end:440},{start:440,end:438},{start:438,end:344},{start:458,end:459},{start:459,end:461},{start:461,end:458},{start:364,end:434},{start:434,end:394},{start:394,end:364},{start:428,end:396},{start:396,end:262},{start:262,end:428},{start:274,end:354},{start:354,end:457},{start:457,end:274},{start:317,end:316},{start:316,end:402},{start:402,end:317},{start:316,end:315},{start:315,end:403},{start:403,end:316},{start:315,end:314},{start:314,end:404},{start:404,end:315},{start:314,end:313},{start:313,end:405},{start:405,end:314},{start:313,end:421},{start:421,end:406},{start:406,end:313},{start:323,end:366},{start:366,end:361},{start:361,end:323},{start:292,end:306},{start:306,end:407},{start:407,end:292},{start:306,end:291},{start:291,end:408},{start:408,end:306},{start:291,end:287},{start:287,end:409},{start:409,end:291},{start:287,end:432},{start:432,end:410},{start:410,end:287},{start:427,end:434},{start:434,end:411},{start:411,end:427},{start:372,end:264},{start:264,end:383},{start:383,end:372},{start:459,end:309},{start:309,end:457},{start:457,end:459},{start:366,end:352},{start:352,end:401},{start:401,end:366},{start:1,end:274},{start:274,end:4},{start:4,end:1},{start:418,end:421},{start:421,end:262},{start:262,end:418},{start:331,end:294},{start:294,end:358},{start:358,end:331},{start:435,end:433},{start:433,end:367},{start:367,end:435},{start:392,end:289},{start:289,end:439},{start:439,end:392},{start:328,end:462},{start:462,end:326},{start:326,end:328},{start:94,end:2},{start:2,end:370},{start:370,end:94},{start:289,end:305},{start:305,end:455},{start:455,end:289},{start:339,end:254},{start:254,end:448},{start:448,end:339},{start:359,end:255},{start:255,end:446},{start:446,end:359},{start:254,end:253},{start:253,end:449},{start:449,end:254},{start:253,end:252},{start:252,end:450},{start:450,end:253},{start:252,end:256},{start:256,end:451},{start:451,end:252},{start:256,end:341},{start:341,end:452},{start:452,end:256},{start:414,end:413},{start:413,end:463},{start:463,end:414},{start:286,end:441},{start:441,end:414},{start:414,end:286},{start:286,end:258},{start:258,end:441},{start:441,end:286},{start:258,end:257},{start:257,end:442},{start:442,end:258},{start:257,end:259},{start:259,end:443},{start:443,end:257},{start:259,end:260},{start:260,end:444},{start:444,end:259},{start:260,end:467},{start:467,end:445},{start:445,end:260},{start:309,end:459},{start:459,end:250},{start:250,end:309},{start:305,end:289},{start:289,end:290},{start:290,end:305},{start:305,end:290},{start:290,end:460},{start:460,end:305},{start:401,end:376},{start:376,end:435},{start:435,end:401},{start:309,end:250},{start:250,end:392},{start:392,end:309},{start:376,end:411},{start:411,end:433},{start:433,end:376},{start:453,end:341},{start:341,end:464},{start:464,end:453},{start:357,end:453},{start:453,end:465},{start:465,end:357},{start:343,end:357},{start:357,end:412},{start:412,end:343},{start:437,end:343},{start:343,end:399},{start:399,end:437},{start:344,end:360},{start:360,end:440},{start:440,end:344},{start:420,end:437},{start:437,end:456},{start:456,end:420},{start:360,end:420},{start:420,end:363},{start:363,end:360},{start:361,end:401},{start:401,end:288},{start:288,end:361},{start:265,end:372},{start:372,end:353},{start:353,end:265},{start:390,end:339},{start:339,end:249},{start:249,end:390},{start:339,end:448},{start:448,end:255},{start:255,end:339}];var face_landmarker_options={};Object.defineProperty(face_landmarker_options,"__esModule",{value:!0});var face_landmarker_result={};Object.defineProperty(face_landmarker_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Rt,Mt,Pt,It){It===void 0&&(It=Pt);var xt=Object.getOwnPropertyDescriptor(Mt,Pt);xt&&!("get"in xt?!Mt.__esModule:xt.writable||xt.configurable)||(xt={enumerable:!0,get:function(){return Mt[Pt]}}),Object.defineProperty(Rt,It,xt)}:function(Rt,Mt,Pt,It){It===void 0&&(It=Pt),Rt[It]=Mt[Pt]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(Rt,Mt){for(var Pt in Rt)Pt==="default"||Object.prototype.hasOwnProperty.call(Mt,Pt)||n(Mt,Rt,Pt)};Object.defineProperty(u,"__esModule",{value:!0}),u.FaceLandmarker=void 0;const C=calculator_pb,d=calculator_options_pb,g=classification_pb,i=landmark_pb,_=base_options_pb,j=face_detector_graph_options_pb,$=face_geometry_pb,re=face_landmarker_graph_options_pb,Q=face_landmarks_detector_graph_options_pb,ae=classifier_result,pe=landmark_result,st=vision_task_runner,Pe=face_landmarks_connections;A(face_landmarker_options,u),A(face_landmarker_result,u);const Oe="image_in",Ze="norm_rect",rt="face_landmarks",gt="blendshapes",at="face_geometry",ut=.5;class ot extends st.VisionTaskRunner{static createFromOptions(Mt,Pt){return st.VisionTaskRunner.createVisionInstance(ot,Mt,Pt)}static createFromModelBuffer(Mt,Pt){return st.VisionTaskRunner.createVisionInstance(ot,Mt,{baseOptions:{modelAssetBuffer:Pt}})}static createFromModelPath(Mt,Pt){return st.VisionTaskRunner.createVisionInstance(ot,Mt,{baseOptions:{modelAssetPath:Pt}})}constructor(Mt,Pt){super(new st.VisionGraphRunner(Mt,Pt),Oe,Ze,!1),this.result={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]},this.outputFaceBlendshapes=!1,this.outputFacialTransformationMatrixes=!1,this.options=new re.FaceLandmarkerGraphOptions,this.options.setBaseOptions(new _.BaseOptions),this.faceLandmarksDetectorGraphOptions=new Q.FaceLandmarksDetectorGraphOptions,this.options.setFaceLandmarksDetectorGraphOptions(this.faceLandmarksDetectorGraphOptions),this.faceDetectorGraphOptions=new j.FaceDetectorGraphOptions,this.options.setFaceDetectorGraphOptions(this.faceDetectorGraphOptions),this.initDefaults()}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(Mt){this.options.setBaseOptions(Mt)}setOptions(Mt){var Pt,It,xt,ln;return"numFaces"in Mt&&this.faceDetectorGraphOptions.setNumFaces((Pt=Mt.numFaces)!==null&&Pt!==void 0?Pt:1),"minFaceDetectionConfidence"in Mt&&this.faceDetectorGraphOptions.setMinDetectionConfidence((It=Mt.minFaceDetectionConfidence)!==null&&It!==void 0?It:ut),"minTrackingConfidence"in Mt&&this.options.setMinTrackingConfidence((xt=Mt.minTrackingConfidence)!==null&&xt!==void 0?xt:ut),"minFacePresenceConfidence"in Mt&&this.faceLandmarksDetectorGraphOptions.setMinDetectionConfidence((ln=Mt.minFacePresenceConfidence)!==null&&ln!==void 0?ln:ut),"outputFaceBlendshapes"in Mt&&(this.outputFaceBlendshapes=!!Mt.outputFaceBlendshapes),"outputFacialTransformationMatrixes"in Mt&&(this.outputFacialTransformationMatrixes=!!Mt.outputFacialTransformationMatrixes),this.applyOptions(Mt)}detect(Mt,Pt){return this.resetResults(),this.processImageData(Mt,Pt),this.result}detectForVideo(Mt,Pt,It){return this.resetResults(),this.processVideoData(Mt,It,Pt),this.result}resetResults(){this.result={faceLandmarks:[],faceBlendshapes:[],facialTransformationMatrixes:[]}}initDefaults(){this.faceDetectorGraphOptions.setNumFaces(1),this.faceDetectorGraphOptions.setMinDetectionConfidence(ut),this.faceLandmarksDetectorGraphOptions.setMinDetectionConfidence(ut),this.options.setMinTrackingConfidence(ut)}addJsLandmarks(Mt){for(const Pt of Mt){const It=i.NormalizedLandmarkList.deserializeBinary(Pt);this.result.faceLandmarks.push((0,pe.convertToLandmarks)(It))}}addBlenshape(Mt){var Pt;if(this.outputFaceBlendshapes)for(const It of Mt){const xt=g.ClassificationList.deserializeBinary(It);this.result.faceBlendshapes.push((0,ae.convertFromClassifications)((Pt=xt.getClassificationList())!==null&&Pt!==void 0?Pt:[]))}}addFacialTransformationMatrixes(Mt){var Pt,It,xt;if(this.outputFacialTransformationMatrixes)for(const ln of Mt){const Mn=$.FaceGeometry.deserializeBinary(ln).getPoseTransformMatrix();Mn&&this.result.facialTransformationMatrixes.push({rows:(Pt=Mn.getRows())!==null&&Pt!==void 0?Pt:0,columns:(It=Mn.getCols())!==null&&It!==void 0?It:0,data:(xt=Mn.getPackedDataList())!==null&&xt!==void 0?xt:[]})}}refreshGraph(){const Mt=new C.CalculatorGraphConfig;Mt.addInputStream(Oe),Mt.addInputStream(Ze),Mt.addOutputStream(rt);const Pt=new d.CalculatorOptions;Pt.setExtension(re.FaceLandmarkerGraphOptions.ext,this.options);const It=new C.CalculatorGraphConfig.Node;It.setCalculator("mediapipe.tasks.vision.face_landmarker.FaceLandmarkerGraph"),It.addInputStream("IMAGE:"+Oe),It.addInputStream("NORM_RECT:"+Ze),It.addOutputStream("NORM_LANDMARKS:"+rt),It.setOptions(Pt),Mt.addNode(It),this.graphRunner.attachProtoVectorListener(rt,(ln,Mn)=>{this.addJsLandmarks(ln),this.setLatestOutputTimestamp(Mn)}),this.graphRunner.attachEmptyPacketListener(rt,ln=>{this.setLatestOutputTimestamp(ln)}),this.outputFaceBlendshapes&&(Mt.addOutputStream(gt),It.addOutputStream("BLENDSHAPES:"+gt),this.graphRunner.attachProtoVectorListener(gt,(ln,Mn)=>{this.addBlenshape(ln),this.setLatestOutputTimestamp(Mn)}),this.graphRunner.attachEmptyPacketListener(gt,ln=>{this.setLatestOutputTimestamp(ln)})),this.outputFacialTransformationMatrixes&&(Mt.addOutputStream(at),It.addOutputStream("FACE_GEOMETRY:"+at),this.graphRunner.attachProtoVectorListener(at,(ln,Mn)=>{this.addFacialTransformationMatrixes(ln),this.setLatestOutputTimestamp(Mn)}),this.graphRunner.attachEmptyPacketListener(at,ln=>{this.setLatestOutputTimestamp(ln)}));const xt=Mt.serializeBinary();this.setGraph(new Uint8Array(xt),!0)}}u.FaceLandmarker=ot,ot.FACE_LANDMARKS_LIPS=Pe.FACE_LANDMARKS_LIPS,ot.FACE_LANDMARKS_LEFT_EYE=Pe.FACE_LANDMARKS_LEFT_EYE,ot.FACE_LANDMARKS_LEFT_EYEBROW=Pe.FACE_LANDMARKS_LEFT_EYEBROW,ot.FACE_LANDMARKS_LEFT_IRIS=Pe.FACE_LANDMARKS_LEFT_IRIS,ot.FACE_LANDMARKS_RIGHT_EYE=Pe.FACE_LANDMARKS_RIGHT_EYE,ot.FACE_LANDMARKS_RIGHT_EYEBROW=Pe.FACE_LANDMARKS_RIGHT_EYEBROW,ot.FACE_LANDMARKS_RIGHT_IRIS=Pe.FACE_LANDMARKS_RIGHT_IRIS,ot.FACE_LANDMARKS_FACE_OVAL=Pe.FACE_LANDMARKS_FACE_OVAL,ot.FACE_LANDMARKS_CONTOURS=Pe.FACE_LANDMARKS_CONTOURS,ot.FACE_LANDMARKS_TESSELATION=Pe.FACE_LANDMARKS_TESSELATION}(face_landmarker);var face_stylizer={},face_stylizer_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var g=calculator_options_pb;A.object.extend(proto,g);var i=base_options_pb;A.object.extend(proto,i);var _=face_landmarker_graph_options_pb;A.object.extend(proto,_),A.exportSymbol("proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions",null,C),proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions=function(j){n.Message.initialize(this,j,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.displayName="proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.toObject=function(j){return proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject(j,this)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject=function(j,$){var re,Q={baseOptions:(re=$.getBaseOptions())&&i.BaseOptions.toObject(j,re),faceLandmarkerGraphOptions:(re=$.getFaceLandmarkerGraphOptions())&&_.FaceLandmarkerGraphOptions.toObject(j,re),faceAlignmentSize:n.Message.getFieldWithDefault($,3,256)};return j&&(Q.$jspbMessageInstance=$),Q}),proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinary=function(j){var $=new n.BinaryReader(j),re=new proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions;return proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader(re,$)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader=function(j,$){for(;$.nextField()&&!$.isEndGroup();)switch($.getFieldNumber()){case 1:var re=new i.BaseOptions;$.readMessage(re,i.BaseOptions.deserializeBinaryFromReader),j.setBaseOptions(re);break;case 2:re=new _.FaceLandmarkerGraphOptions,$.readMessage(re,_.FaceLandmarkerGraphOptions.deserializeBinaryFromReader),j.setFaceLandmarkerGraphOptions(re);break;case 3:re=$.readInt32(),j.setFaceAlignmentSize(re);break;default:$.skipField()}return j},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.serializeBinary=function(){var j=new n.BinaryWriter;return proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter=function(j,$){var re=void 0;(re=j.getBaseOptions())!=null&&$.writeMessage(1,re,i.BaseOptions.serializeBinaryToWriter),(re=j.getFaceLandmarkerGraphOptions())!=null&&$.writeMessage(2,re,_.FaceLandmarkerGraphOptions.serializeBinaryToWriter),(re=n.Message.getField(j,3))!=null&&$.writeInt32(3,re)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext=new n.ExtensionFieldInfo(513916220,{ext:0},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[513916220]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[513916220]=proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.setBaseOptions=function(j){return n.Message.setWrapperField(this,1,j)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.getFaceLandmarkerGraphOptions=function(){return n.Message.getWrapperField(this,_.FaceLandmarkerGraphOptions,2)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.setFaceLandmarkerGraphOptions=function(j){return n.Message.setWrapperField(this,2,j)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.clearFaceLandmarkerGraphOptions=function(){return this.setFaceLandmarkerGraphOptions(void 0)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.hasFaceLandmarkerGraphOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.getFaceAlignmentSize=function(){return n.Message.getFieldWithDefault(this,3,256)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.setFaceAlignmentSize=function(j){return n.Message.setField(this,3,j)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.clearFaceAlignmentSize=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.prototype.hasFaceAlignmentSize=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext=new n.ExtensionFieldInfo(513916220,{ext:0},proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[513916220]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[513916220]=proto.mediapipe.tasks.vision.face_stylizer.proto.FaceStylizerGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.face_stylizer.proto)})(face_stylizer_graph_options_pb);var face_stylizer_options={};Object.defineProperty(face_stylizer_options,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(ae,pe,st,Pe){Pe===void 0&&(Pe=st);var Oe=Object.getOwnPropertyDescriptor(pe,st);Oe&&!("get"in Oe?!pe.__esModule:Oe.writable||Oe.configurable)||(Oe={enumerable:!0,get:function(){return pe[st]}}),Object.defineProperty(ae,Pe,Oe)}:function(ae,pe,st,Pe){Pe===void 0&&(Pe=st),ae[Pe]=pe[st]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(ae,pe){for(var st in ae)st==="default"||Object.prototype.hasOwnProperty.call(pe,st)||n(pe,ae,st)};Object.defineProperty(u,"__esModule",{value:!0}),u.FaceStylizer=void 0;const C=calculator_pb,d=calculator_options_pb,g=base_options_pb,i=face_stylizer_graph_options_pb,_=vision_task_runner;A(face_stylizer_options,u);const j="image_in",$="norm_rect",re="stylized_image";class Q extends _.VisionTaskRunner{static createFromOptions(pe,st){return _.VisionTaskRunner.createVisionInstance(Q,pe,st)}static createFromModelBuffer(pe,st){return _.VisionTaskRunner.createVisionInstance(Q,pe,{baseOptions:{modelAssetBuffer:st}})}static createFromModelPath(pe,st){return _.VisionTaskRunner.createVisionInstance(Q,pe,{baseOptions:{modelAssetPath:st}})}constructor(pe,st){super(new _.VisionGraphRunner(pe,st),j,$,!0),this.options=new i.FaceStylizerGraphOptions,this.options.setBaseOptions(new g.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(pe){this.options.setBaseOptions(pe)}setOptions(pe){return super.applyOptions(pe)}stylize(pe,st,Pe){const Oe=typeof st!="function"?st:{};if(this.userCallback=typeof st=="function"?st:Pe,this.processImageData(pe,Oe!=null?Oe:{}),!this.userCallback)return this.result}stylizeForVideo(pe,st,Pe,Oe){const Ze=typeof Pe!="function"?Pe:{};if(this.userCallback=typeof Pe=="function"?Pe:Oe,this.processVideoData(pe,Ze,st),this.userCallback=void 0,!this.userCallback)return this.result}refreshGraph(){const pe=new C.CalculatorGraphConfig;pe.addInputStream(j),pe.addInputStream($),pe.addOutputStream(re);const st=new d.CalculatorOptions;st.setExtension(i.FaceStylizerGraphOptions.ext,this.options);const Pe=new C.CalculatorGraphConfig.Node;Pe.setCalculator("mediapipe.tasks.vision.face_stylizer.FaceStylizerGraph"),Pe.addInputStream("IMAGE:"+j),Pe.addInputStream("NORM_RECT:"+$),Pe.addOutputStream("STYLIZED_IMAGE:"+re),Pe.setOptions(st),pe.addNode(Pe),this.graphRunner.attachImageListener(re,(Ze,rt)=>{const gt=this.convertToMPImage(Ze,!this.userCallback);this.result=gt,this.userCallback&&this.userCallback(gt),this.setLatestOutputTimestamp(rt)}),this.graphRunner.attachEmptyPacketListener(re,Ze=>{this.result=null,this.userCallback&&this.userCallback(null),this.setLatestOutputTimestamp(Ze)});const Oe=pe.serializeBinary();this.setGraph(new Uint8Array(Oe),!0)}}u.FaceStylizer=Q}(face_stylizer);var gesture_recognizer={},gesture_classifier_graph_options_pb={},classifier_options_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.tasks.components.processors.proto.ClassifierOptions",null,C),proto.mediapipe.tasks.components.processors.proto.ClassifierOptions=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.repeatedFields_,null)},A.inherits(proto.mediapipe.tasks.components.processors.proto.ClassifierOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.displayName="proto.mediapipe.tasks.components.processors.proto.ClassifierOptions"),proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.repeatedFields_=[4,5],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.toObject=function(d){return proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.toObject(d,this)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.toObject=function(d,g){var i,_={displayNamesLocale:n.Message.getFieldWithDefault(g,1,"en"),maxResults:n.Message.getFieldWithDefault(g,2,-1),scoreThreshold:(i=n.Message.getOptionalFloatingPointField(g,3))==null?void 0:i,categoryAllowlistList:(i=n.Message.getRepeatedField(g,4))==null?void 0:i,categoryDenylistList:(i=n.Message.getRepeatedField(g,5))==null?void 0:i};return d&&(_.$jspbMessageInstance=g),_}),proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.tasks.components.processors.proto.ClassifierOptions;return proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.deserializeBinaryFromReader(i,g)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var i=g.readString();d.setDisplayNamesLocale(i);break;case 2:i=g.readInt32(),d.setMaxResults(i);break;case 3:i=g.readFloat(),d.setScoreThreshold(i);break;case 4:i=g.readString(),d.addCategoryAllowlist(i);break;case 5:i=g.readString(),d.addCategoryDenylist(i);break;default:g.skipField()}return d},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.serializeBinaryToWriter=function(d,g){var i=void 0;(i=n.Message.getField(d,1))!=null&&g.writeString(1,i),(i=n.Message.getField(d,2))!=null&&g.writeInt32(2,i),(i=n.Message.getField(d,3))!=null&&g.writeFloat(3,i),(i=d.getCategoryAllowlistList()).length>0&&g.writeRepeatedString(4,i),(i=d.getCategoryDenylistList()).length>0&&g.writeRepeatedString(5,i)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getDisplayNamesLocale=function(){return n.Message.getFieldWithDefault(this,1,"en")},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setDisplayNamesLocale=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearDisplayNamesLocale=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.hasDisplayNamesLocale=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getMaxResults=function(){return n.Message.getFieldWithDefault(this,2,-1)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setMaxResults=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearMaxResults=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.hasMaxResults=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getScoreThreshold=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setScoreThreshold=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearScoreThreshold=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.hasScoreThreshold=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getCategoryAllowlistList=function(){return n.Message.getRepeatedField(this,4)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setCategoryAllowlistList=function(d){return n.Message.setField(this,4,d||[])},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.addCategoryAllowlist=function(d,g){return n.Message.addToRepeatedField(this,4,d,g)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearCategoryAllowlistList=function(){return this.setCategoryAllowlistList([])},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.getCategoryDenylistList=function(){return n.Message.getRepeatedField(this,5)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.setCategoryDenylistList=function(d){return n.Message.setField(this,5,d||[])},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.addCategoryDenylist=function(d,g){return n.Message.addToRepeatedField(this,5,d,g)},proto.mediapipe.tasks.components.processors.proto.ClassifierOptions.prototype.clearCategoryDenylistList=function(){return this.setCategoryDenylistList([])},A.object.extend(u,proto.mediapipe.tasks.components.processors.proto)})(classifier_options_pb),function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var g=calculator_options_pb;A.object.extend(proto,g);var i=classifier_options_pb;A.object.extend(proto,i);var _=base_options_pb;A.object.extend(proto,_),A.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions",null,C),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions=function(j){n.Message.initialize(this,j,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.toObject=function(j){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject(j,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject=function(j,$){var re,Q={baseOptions:(re=$.getBaseOptions())&&_.BaseOptions.toObject(j,re),classifierOptions:(re=$.getClassifierOptions())&&i.ClassifierOptions.toObject(j,re)};return j&&(Q.$jspbMessageInstance=$),Q}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinary=function(j){var $=new n.BinaryReader(j),re=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader(re,$)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader=function(j,$){for(;$.nextField()&&!$.isEndGroup();)switch($.getFieldNumber()){case 1:var re=new _.BaseOptions;$.readMessage(re,_.BaseOptions.deserializeBinaryFromReader),j.setBaseOptions(re);break;case 2:re=new i.ClassifierOptions,$.readMessage(re,i.ClassifierOptions.deserializeBinaryFromReader),j.setClassifierOptions(re);break;default:$.skipField()}return j},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.serializeBinary=function(){var j=new n.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter=function(j,$){var re=void 0;(re=j.getBaseOptions())!=null&&$.writeMessage(1,re,_.BaseOptions.serializeBinaryToWriter),(re=j.getClassifierOptions())!=null&&$.writeMessage(2,re,i.ClassifierOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext=new n.ExtensionFieldInfo(478825465,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[478825465]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[478825465]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,_.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.setBaseOptions=function(j){return n.Message.setWrapperField(this,1,j)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.getClassifierOptions=function(){return n.Message.getWrapperField(this,i.ClassifierOptions,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.setClassifierOptions=function(j){return n.Message.setWrapperField(this,2,j)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.clearClassifierOptions=function(){return this.setClassifierOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.prototype.hasClassifierOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext=new n.ExtensionFieldInfo(478825465,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[478825465]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[478825465]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureClassifierGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.gesture_recognizer.proto)}(gesture_classifier_graph_options_pb);var gesture_recognizer_graph_options_pb={},hand_gesture_recognizer_graph_options_pb={},gesture_embedder_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var g=calculator_options_pb;A.object.extend(proto,g);var i=base_options_pb;A.object.extend(proto,i),A.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions",null,C),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions=function(_){n.Message.initialize(this,_,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.toObject=function(_){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject(_,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject=function(_,j){var $,re={baseOptions:($=j.getBaseOptions())&&i.BaseOptions.toObject(_,$)};return _&&(re.$jspbMessageInstance=j),re}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinary=function(_){var j=new n.BinaryReader(_),$=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader($,j)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader=function(_,j){for(;j.nextField()&&!j.isEndGroup();)if(j.getFieldNumber()===1){var $=new i.BaseOptions;j.readMessage($,i.BaseOptions.deserializeBinaryFromReader),_.setBaseOptions($)}else j.skipField();return _},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.serializeBinary=function(){var _=new n.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter(this,_),_.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter=function(_,j){var $;($=_.getBaseOptions())!=null&&j.writeMessage(1,$,i.BaseOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext=new n.ExtensionFieldInfo(478825422,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[478825422]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[478825422]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.setBaseOptions=function(_){return n.Message.setWrapperField(this,1,_)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext=new n.ExtensionFieldInfo(478825422,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[478825422]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[478825422]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureEmbedderGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.gesture_recognizer.proto)})(gesture_embedder_graph_options_pb),function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var g=calculator_options_pb;A.object.extend(proto,g);var i=base_options_pb;A.object.extend(proto,i);var _=gesture_classifier_graph_options_pb;A.object.extend(proto,_);var j=gesture_embedder_graph_options_pb;A.object.extend(proto,j),A.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions",null,C),proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions=function($){n.Message.initialize(this,$,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.toObject=function($){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject($,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject=function($,re){var Q,ae={baseOptions:(Q=re.getBaseOptions())&&i.BaseOptions.toObject($,Q),gestureEmbedderGraphOptions:(Q=re.getGestureEmbedderGraphOptions())&&j.GestureEmbedderGraphOptions.toObject($,Q),cannedGestureClassifierGraphOptions:(Q=re.getCannedGestureClassifierGraphOptions())&&_.GestureClassifierGraphOptions.toObject($,Q),customGestureClassifierGraphOptions:(Q=re.getCustomGestureClassifierGraphOptions())&&_.GestureClassifierGraphOptions.toObject($,Q)};return $&&(ae.$jspbMessageInstance=re),ae}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinary=function($){var re=new n.BinaryReader($),Q=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader(Q,re)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader=function($,re){for(;re.nextField()&&!re.isEndGroup();)switch(re.getFieldNumber()){case 1:var Q=new i.BaseOptions;re.readMessage(Q,i.BaseOptions.deserializeBinaryFromReader),$.setBaseOptions(Q);break;case 2:Q=new j.GestureEmbedderGraphOptions,re.readMessage(Q,j.GestureEmbedderGraphOptions.deserializeBinaryFromReader),$.setGestureEmbedderGraphOptions(Q);break;case 3:Q=new _.GestureClassifierGraphOptions,re.readMessage(Q,_.GestureClassifierGraphOptions.deserializeBinaryFromReader),$.setCannedGestureClassifierGraphOptions(Q);break;case 4:Q=new _.GestureClassifierGraphOptions,re.readMessage(Q,_.GestureClassifierGraphOptions.deserializeBinaryFromReader),$.setCustomGestureClassifierGraphOptions(Q);break;default:re.skipField()}return $},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.serializeBinary=function(){var $=new n.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter(this,$),$.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter=function($,re){var Q=void 0;(Q=$.getBaseOptions())!=null&&re.writeMessage(1,Q,i.BaseOptions.serializeBinaryToWriter),(Q=$.getGestureEmbedderGraphOptions())!=null&&re.writeMessage(2,Q,j.GestureEmbedderGraphOptions.serializeBinaryToWriter),(Q=$.getCannedGestureClassifierGraphOptions())!=null&&re.writeMessage(3,Q,_.GestureClassifierGraphOptions.serializeBinaryToWriter),(Q=$.getCustomGestureClassifierGraphOptions())!=null&&re.writeMessage(4,Q,_.GestureClassifierGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext=new n.ExtensionFieldInfo(463370452,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[463370452]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[463370452]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setBaseOptions=function($){return n.Message.setWrapperField(this,1,$)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getGestureEmbedderGraphOptions=function(){return n.Message.getWrapperField(this,j.GestureEmbedderGraphOptions,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setGestureEmbedderGraphOptions=function($){return n.Message.setWrapperField(this,2,$)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearGestureEmbedderGraphOptions=function(){return this.setGestureEmbedderGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasGestureEmbedderGraphOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getCannedGestureClassifierGraphOptions=function(){return n.Message.getWrapperField(this,_.GestureClassifierGraphOptions,3)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setCannedGestureClassifierGraphOptions=function($){return n.Message.setWrapperField(this,3,$)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearCannedGestureClassifierGraphOptions=function(){return this.setCannedGestureClassifierGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasCannedGestureClassifierGraphOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.getCustomGestureClassifierGraphOptions=function(){return n.Message.getWrapperField(this,_.GestureClassifierGraphOptions,4)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.setCustomGestureClassifierGraphOptions=function($){return n.Message.setWrapperField(this,4,$)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.clearCustomGestureClassifierGraphOptions=function(){return this.setCustomGestureClassifierGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.prototype.hasCustomGestureClassifierGraphOptions=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext=new n.ExtensionFieldInfo(463370452,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[463370452]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[463370452]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.HandGestureRecognizerGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.gesture_recognizer.proto)}(hand_gesture_recognizer_graph_options_pb);var hand_landmarker_graph_options_pb={},hand_detector_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var g=calculator_options_pb;A.object.extend(proto,g);var i=base_options_pb;A.object.extend(proto,i),A.exportSymbol("proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions",null,C),proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions=function(_){n.Message.initialize(this,_,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.toObject=function(_){return proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject(_,this)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject=function(_,j){var $,re={baseOptions:($=j.getBaseOptions())&&i.BaseOptions.toObject(_,$),minDetectionConfidence:n.Message.getFloatingPointFieldWithDefault(j,2,.5),numHands:($=n.Message.getField(j,3))==null?void 0:$};return _&&(re.$jspbMessageInstance=j),re}),proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinary=function(_){var j=new n.BinaryReader(_),$=new proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions;return proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader($,j)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader=function(_,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var $=new i.BaseOptions;j.readMessage($,i.BaseOptions.deserializeBinaryFromReader),_.setBaseOptions($);break;case 2:$=j.readFloat(),_.setMinDetectionConfidence($);break;case 3:$=j.readInt32(),_.setNumHands($);break;default:j.skipField()}return _},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.serializeBinary=function(){var _=new n.BinaryWriter;return proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter(this,_),_.getResultBuffer()},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter=function(_,j){var $=void 0;($=_.getBaseOptions())!=null&&j.writeMessage(1,$,i.BaseOptions.serializeBinaryToWriter),($=n.Message.getField(_,2))!=null&&j.writeFloat(2,$),($=n.Message.getField(_,3))!=null&&j.writeInt32(3,$)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext=new n.ExtensionFieldInfo(464864288,{ext:0},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[464864288]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[464864288]=proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.setBaseOptions=function(_){return n.Message.setWrapperField(this,1,_)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.setMinDetectionConfidence=function(_){return n.Message.setField(this,2,_)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.getNumHands=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.setNumHands=function(_){return n.Message.setField(this,3,_)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.clearNumHands=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.prototype.hasNumHands=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext=new n.ExtensionFieldInfo(464864288,{ext:0},proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[464864288]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[464864288]=proto.mediapipe.tasks.vision.hand_detector.proto.HandDetectorGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.hand_detector.proto)})(hand_detector_graph_options_pb);var hand_landmarks_detector_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var g=calculator_options_pb;A.object.extend(proto,g);var i=base_options_pb;A.object.extend(proto,i),A.exportSymbol("proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions",null,C),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions=function(_){n.Message.initialize(this,_,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.toObject=function(_){return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject(_,this)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject=function(_,j){var $,re={baseOptions:($=j.getBaseOptions())&&i.BaseOptions.toObject(_,$),minDetectionConfidence:n.Message.getFloatingPointFieldWithDefault(j,2,.5)};return _&&(re.$jspbMessageInstance=j),re}),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinary=function(_){var j=new n.BinaryReader(_),$=new proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader($,j)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader=function(_,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var $=new i.BaseOptions;j.readMessage($,i.BaseOptions.deserializeBinaryFromReader),_.setBaseOptions($);break;case 2:$=j.readFloat(),_.setMinDetectionConfidence($);break;default:j.skipField()}return _},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.serializeBinary=function(){var _=new n.BinaryWriter;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter(this,_),_.getResultBuffer()},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter=function(_,j){var $=void 0;($=_.getBaseOptions())!=null&&j.writeMessage(1,$,i.BaseOptions.serializeBinaryToWriter),($=n.Message.getField(_,2))!=null&&j.writeFloat(2,$)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext=new n.ExtensionFieldInfo(474472470,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[474472470]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[474472470]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.setBaseOptions=function(_){return n.Message.setWrapperField(this,1,_)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.setMinDetectionConfidence=function(_){return n.Message.setField(this,2,_)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext=new n.ExtensionFieldInfo(474472470,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[474472470]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[474472470]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarksDetectorGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.hand_landmarker.proto)})(hand_landmarks_detector_graph_options_pb),function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var g=calculator_options_pb;A.object.extend(proto,g);var i=base_options_pb;A.object.extend(proto,i);var _=hand_detector_graph_options_pb;A.object.extend(proto,_);var j=hand_landmarks_detector_graph_options_pb;A.object.extend(proto,j),A.exportSymbol("proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions",null,C),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions=function($){n.Message.initialize(this,$,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.displayName="proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.toObject=function($){return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject($,this)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject=function($,re){var Q,ae={baseOptions:(Q=re.getBaseOptions())&&i.BaseOptions.toObject($,Q),handDetectorGraphOptions:(Q=re.getHandDetectorGraphOptions())&&_.HandDetectorGraphOptions.toObject($,Q),handLandmarksDetectorGraphOptions:(Q=re.getHandLandmarksDetectorGraphOptions())&&j.HandLandmarksDetectorGraphOptions.toObject($,Q),minTrackingConfidence:n.Message.getFloatingPointFieldWithDefault(re,4,.5)};return $&&(ae.$jspbMessageInstance=re),ae}),proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinary=function($){var re=new n.BinaryReader($),Q=new proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader(Q,re)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader=function($,re){for(;re.nextField()&&!re.isEndGroup();)switch(re.getFieldNumber()){case 1:var Q=new i.BaseOptions;re.readMessage(Q,i.BaseOptions.deserializeBinaryFromReader),$.setBaseOptions(Q);break;case 2:Q=new _.HandDetectorGraphOptions,re.readMessage(Q,_.HandDetectorGraphOptions.deserializeBinaryFromReader),$.setHandDetectorGraphOptions(Q);break;case 3:Q=new j.HandLandmarksDetectorGraphOptions,re.readMessage(Q,j.HandLandmarksDetectorGraphOptions.deserializeBinaryFromReader),$.setHandLandmarksDetectorGraphOptions(Q);break;case 4:Q=re.readFloat(),$.setMinTrackingConfidence(Q);break;default:re.skipField()}return $},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.serializeBinary=function(){var $=new n.BinaryWriter;return proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter(this,$),$.getResultBuffer()},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter=function($,re){var Q=void 0;(Q=$.getBaseOptions())!=null&&re.writeMessage(1,Q,i.BaseOptions.serializeBinaryToWriter),(Q=$.getHandDetectorGraphOptions())!=null&&re.writeMessage(2,Q,_.HandDetectorGraphOptions.serializeBinaryToWriter),(Q=$.getHandLandmarksDetectorGraphOptions())!=null&&re.writeMessage(3,Q,j.HandLandmarksDetectorGraphOptions.serializeBinaryToWriter),(Q=n.Message.getField($,4))!=null&&re.writeFloat(4,Q)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext=new n.ExtensionFieldInfo(462713202,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[462713202]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[462713202]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setBaseOptions=function($){return n.Message.setWrapperField(this,1,$)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getHandDetectorGraphOptions=function(){return n.Message.getWrapperField(this,_.HandDetectorGraphOptions,2)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setHandDetectorGraphOptions=function($){return n.Message.setWrapperField(this,2,$)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearHandDetectorGraphOptions=function(){return this.setHandDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasHandDetectorGraphOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getHandLandmarksDetectorGraphOptions=function(){return n.Message.getWrapperField(this,j.HandLandmarksDetectorGraphOptions,3)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setHandLandmarksDetectorGraphOptions=function($){return n.Message.setWrapperField(this,3,$)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearHandLandmarksDetectorGraphOptions=function(){return this.setHandLandmarksDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasHandLandmarksDetectorGraphOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.getMinTrackingConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,.5)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.setMinTrackingConfidence=function($){return n.Message.setField(this,4,$)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.clearMinTrackingConfidence=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.prototype.hasMinTrackingConfidence=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext=new n.ExtensionFieldInfo(462713202,{ext:0},proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[462713202]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[462713202]=proto.mediapipe.tasks.vision.hand_landmarker.proto.HandLandmarkerGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.hand_landmarker.proto)}(hand_landmarker_graph_options_pb),function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var g=calculator_options_pb;A.object.extend(proto,g);var i=base_options_pb;A.object.extend(proto,i);var _=hand_gesture_recognizer_graph_options_pb;A.object.extend(proto,_);var j=hand_landmarker_graph_options_pb;A.object.extend(proto,j),A.exportSymbol("proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions",null,C),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions=function($){n.Message.initialize(this,$,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.displayName="proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.toObject=function($){return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject($,this)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject=function($,re){var Q,ae={baseOptions:(Q=re.getBaseOptions())&&i.BaseOptions.toObject($,Q),handLandmarkerGraphOptions:(Q=re.getHandLandmarkerGraphOptions())&&j.HandLandmarkerGraphOptions.toObject($,Q),handGestureRecognizerGraphOptions:(Q=re.getHandGestureRecognizerGraphOptions())&&_.HandGestureRecognizerGraphOptions.toObject($,Q)};return $&&(ae.$jspbMessageInstance=re),ae}),proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinary=function($){var re=new n.BinaryReader($),Q=new proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader(Q,re)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader=function($,re){for(;re.nextField()&&!re.isEndGroup();)switch(re.getFieldNumber()){case 1:var Q=new i.BaseOptions;re.readMessage(Q,i.BaseOptions.deserializeBinaryFromReader),$.setBaseOptions(Q);break;case 2:Q=new j.HandLandmarkerGraphOptions,re.readMessage(Q,j.HandLandmarkerGraphOptions.deserializeBinaryFromReader),$.setHandLandmarkerGraphOptions(Q);break;case 3:Q=new _.HandGestureRecognizerGraphOptions,re.readMessage(Q,_.HandGestureRecognizerGraphOptions.deserializeBinaryFromReader),$.setHandGestureRecognizerGraphOptions(Q);break;default:re.skipField()}return $},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.serializeBinary=function(){var $=new n.BinaryWriter;return proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter(this,$),$.getResultBuffer()},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter=function($,re){var Q=void 0;(Q=$.getBaseOptions())!=null&&re.writeMessage(1,Q,i.BaseOptions.serializeBinaryToWriter),(Q=$.getHandLandmarkerGraphOptions())!=null&&re.writeMessage(2,Q,j.HandLandmarkerGraphOptions.serializeBinaryToWriter),(Q=$.getHandGestureRecognizerGraphOptions())!=null&&re.writeMessage(3,Q,_.HandGestureRecognizerGraphOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext=new n.ExtensionFieldInfo(479097054,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[479097054]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[479097054]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.setBaseOptions=function($){return n.Message.setWrapperField(this,1,$)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.getHandLandmarkerGraphOptions=function(){return n.Message.getWrapperField(this,j.HandLandmarkerGraphOptions,2)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.setHandLandmarkerGraphOptions=function($){return n.Message.setWrapperField(this,2,$)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.clearHandLandmarkerGraphOptions=function(){return this.setHandLandmarkerGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.hasHandLandmarkerGraphOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.getHandGestureRecognizerGraphOptions=function(){return n.Message.getWrapperField(this,_.HandGestureRecognizerGraphOptions,3)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.setHandGestureRecognizerGraphOptions=function($){return n.Message.setWrapperField(this,3,$)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.clearHandGestureRecognizerGraphOptions=function(){return this.setHandGestureRecognizerGraphOptions(void 0)},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.prototype.hasHandGestureRecognizerGraphOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext=new n.ExtensionFieldInfo(479097054,{ext:0},proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[479097054]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[479097054]=proto.mediapipe.tasks.vision.gesture_recognizer.proto.GestureRecognizerGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.gesture_recognizer.proto)}(gesture_recognizer_graph_options_pb);var classifier_options={};Object.defineProperty(classifier_options,"__esModule",{value:!0}),classifier_options.convertClassifierOptionsToProto=void 0;const classifier_options_pb_1=classifier_options_pb;function convertClassifierOptionsToProto(u,n){const A=n?n.clone():new classifier_options_pb_1.ClassifierOptions;return u.displayNamesLocale!==void 0?A.setDisplayNamesLocale(u.displayNamesLocale):u.displayNamesLocale===void 0&&A.clearDisplayNamesLocale(),u.maxResults!==void 0?A.setMaxResults(u.maxResults):"maxResults"in u&&A.clearMaxResults(),u.scoreThreshold!==void 0?A.setScoreThreshold(u.scoreThreshold):"scoreThreshold"in u&&A.clearScoreThreshold(),u.categoryAllowlist!==void 0?A.setCategoryAllowlistList(u.categoryAllowlist):"categoryAllowlist"in u&&A.clearCategoryAllowlistList(),u.categoryDenylist!==void 0?A.setCategoryDenylistList(u.categoryDenylist):"categoryDenylist"in u&&A.clearCategoryDenylistList(),A}classifier_options.convertClassifierOptionsToProto=convertClassifierOptionsToProto;var hand_landmarks_connections={};Object.defineProperty(hand_landmarks_connections,"__esModule",{value:!0}),hand_landmarks_connections.HAND_CONNECTIONS=void 0,hand_landmarks_connections.HAND_CONNECTIONS=[{start:0,end:1},{start:1,end:2},{start:2,end:3},{start:3,end:4},{start:0,end:5},{start:5,end:6},{start:6,end:7},{start:7,end:8},{start:5,end:9},{start:9,end:10},{start:10,end:11},{start:11,end:12},{start:9,end:13},{start:13,end:14},{start:14,end:15},{start:15,end:16},{start:13,end:17},{start:0,end:17},{start:17,end:18},{start:18,end:19},{start:19,end:20}];var gesture_recognizer_options={};Object.defineProperty(gesture_recognizer_options,"__esModule",{value:!0});var gesture_recognizer_result={};Object.defineProperty(gesture_recognizer_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Pt,It,xt,ln){ln===void 0&&(ln=xt);var Mn=Object.getOwnPropertyDescriptor(It,xt);Mn&&!("get"in Mn?!It.__esModule:Mn.writable||Mn.configurable)||(Mn={enumerable:!0,get:function(){return It[xt]}}),Object.defineProperty(Pt,ln,Mn)}:function(Pt,It,xt,ln){ln===void 0&&(ln=xt),Pt[ln]=It[xt]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(Pt,It){for(var xt in Pt)xt==="default"||Object.prototype.hasOwnProperty.call(It,xt)||n(It,Pt,xt)};Object.defineProperty(u,"__esModule",{value:!0}),u.GestureRecognizer=void 0;const C=calculator_pb,d=calculator_options_pb,g=classification_pb,i=landmark_pb,_=base_options_pb,j=gesture_classifier_graph_options_pb,$=gesture_recognizer_graph_options_pb,re=hand_gesture_recognizer_graph_options_pb,Q=hand_detector_graph_options_pb,ae=hand_landmarker_graph_options_pb,pe=hand_landmarks_detector_graph_options_pb,st=classifier_options,Pe=vision_task_runner,Oe=hand_landmarks_connections;A(gesture_recognizer_options,u),A(gesture_recognizer_result,u);const Ze="image_in",rt="norm_rect",gt="hand_gestures",at="hand_landmarks",ut="world_hand_landmarks",ot="handedness",Rt=.5;class Mt extends Pe.VisionTaskRunner{static createFromOptions(It,xt){return Pe.VisionTaskRunner.createVisionInstance(Mt,It,xt)}static createFromModelBuffer(It,xt){return Pe.VisionTaskRunner.createVisionInstance(Mt,It,{baseOptions:{modelAssetBuffer:xt}})}static createFromModelPath(It,xt){return Pe.VisionTaskRunner.createVisionInstance(Mt,It,{baseOptions:{modelAssetPath:xt}})}constructor(It,xt){super(new Pe.VisionGraphRunner(It,xt),Ze,rt,!1),this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handednesses=[],this.options=new $.GestureRecognizerGraphOptions,this.options.setBaseOptions(new _.BaseOptions),this.handLandmarkerGraphOptions=new ae.HandLandmarkerGraphOptions,this.options.setHandLandmarkerGraphOptions(this.handLandmarkerGraphOptions),this.handLandmarksDetectorGraphOptions=new pe.HandLandmarksDetectorGraphOptions,this.handLandmarkerGraphOptions.setHandLandmarksDetectorGraphOptions(this.handLandmarksDetectorGraphOptions),this.handDetectorGraphOptions=new Q.HandDetectorGraphOptions,this.handLandmarkerGraphOptions.setHandDetectorGraphOptions(this.handDetectorGraphOptions),this.handGestureRecognizerGraphOptions=new re.HandGestureRecognizerGraphOptions,this.options.setHandGestureRecognizerGraphOptions(this.handGestureRecognizerGraphOptions),this.handDetectorGraphOptions.setMinDetectionConfidence(Rt),this.handLandmarkerGraphOptions.setMinTrackingConfidence(Rt),this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence(Rt)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(It){this.options.setBaseOptions(It)}setOptions(It){var xt,ln,Mn,Xn,mt,rn,un,On;if(this.handDetectorGraphOptions.setNumHands((xt=It.numHands)!==null&&xt!==void 0?xt:1),"minHandDetectionConfidence"in It&&this.handDetectorGraphOptions.setMinDetectionConfidence((ln=It.minHandDetectionConfidence)!==null&&ln!==void 0?ln:Rt),"minTrackingConfidence"in It&&this.handLandmarkerGraphOptions.setMinTrackingConfidence((Mn=It.minTrackingConfidence)!==null&&Mn!==void 0?Mn:Rt),"minHandPresenceConfidence"in It&&this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence((Xn=It.minHandPresenceConfidence)!==null&&Xn!==void 0?Xn:Rt),It.cannedGesturesClassifierOptions){const Ln=new j.GestureClassifierGraphOptions;Ln.setClassifierOptions((0,st.convertClassifierOptionsToProto)(It.cannedGesturesClassifierOptions,(mt=this.handGestureRecognizerGraphOptions.getCannedGestureClassifierGraphOptions())===null||mt===void 0?void 0:mt.getClassifierOptions())),this.handGestureRecognizerGraphOptions.setCannedGestureClassifierGraphOptions(Ln)}else It.cannedGesturesClassifierOptions===void 0&&((rn=this.handGestureRecognizerGraphOptions.getCannedGestureClassifierGraphOptions())===null||rn===void 0||rn.clearClassifierOptions());if(It.customGesturesClassifierOptions){const Ln=new j.GestureClassifierGraphOptions;Ln.setClassifierOptions((0,st.convertClassifierOptionsToProto)(It.customGesturesClassifierOptions,(un=this.handGestureRecognizerGraphOptions.getCustomGestureClassifierGraphOptions())===null||un===void 0?void 0:un.getClassifierOptions())),this.handGestureRecognizerGraphOptions.setCustomGestureClassifierGraphOptions(Ln)}else It.customGesturesClassifierOptions===void 0&&((On=this.handGestureRecognizerGraphOptions.getCustomGestureClassifierGraphOptions())===null||On===void 0||On.clearClassifierOptions());return this.applyOptions(It)}recognize(It,xt){return this.resetResults(),this.processImageData(It,xt),this.processResults()}recognizeForVideo(It,xt,ln){return this.resetResults(),this.processVideoData(It,ln,xt),this.processResults()}resetResults(){this.gestures=[],this.landmarks=[],this.worldLandmarks=[],this.handednesses=[]}processResults(){return this.gestures.length===0?{gestures:[],landmarks:[],worldLandmarks:[],handednesses:[]}:{gestures:this.gestures,landmarks:this.landmarks,worldLandmarks:this.worldLandmarks,handednesses:this.handednesses}}toJsCategories(It,xt=!0){var ln,Mn,Xn;const mt=[];for(const rn of It){const un=g.ClassificationList.deserializeBinary(rn),On=[];for(const Ln of un.getClassificationList()){const fr=xt&&Ln.hasIndex()?Ln.getIndex():-1;On.push({score:(ln=Ln.getScore())!==null&&ln!==void 0?ln:0,index:fr,categoryName:(Mn=Ln.getLabel())!==null&&Mn!==void 0?Mn:"",displayName:(Xn=Ln.getDisplayName())!==null&&Xn!==void 0?Xn:""})}mt.push(On)}return mt}addJsLandmarks(It){var xt,ln,Mn;for(const Xn of It){const mt=i.NormalizedLandmarkList.deserializeBinary(Xn),rn=[];for(const un of mt.getLandmarkList())rn.push({x:(xt=un.getX())!==null&&xt!==void 0?xt:0,y:(ln=un.getY())!==null&&ln!==void 0?ln:0,z:(Mn=un.getZ())!==null&&Mn!==void 0?Mn:0});this.landmarks.push(rn)}}adddJsWorldLandmarks(It){var xt,ln,Mn;for(const Xn of It){const mt=i.LandmarkList.deserializeBinary(Xn),rn=[];for(const un of mt.getLandmarkList())rn.push({x:(xt=un.getX())!==null&&xt!==void 0?xt:0,y:(ln=un.getY())!==null&&ln!==void 0?ln:0,z:(Mn=un.getZ())!==null&&Mn!==void 0?Mn:0});this.worldLandmarks.push(rn)}}refreshGraph(){const It=new C.CalculatorGraphConfig;It.addInputStream(Ze),It.addInputStream(rt),It.addOutputStream(gt),It.addOutputStream(at),It.addOutputStream(ut),It.addOutputStream(ot);const xt=new d.CalculatorOptions;xt.setExtension($.GestureRecognizerGraphOptions.ext,this.options);const ln=new C.CalculatorGraphConfig.Node;ln.setCalculator("mediapipe.tasks.vision.gesture_recognizer.GestureRecognizerGraph"),ln.addInputStream("IMAGE:"+Ze),ln.addInputStream("NORM_RECT:"+rt),ln.addOutputStream("HAND_GESTURES:"+gt),ln.addOutputStream("LANDMARKS:"+at),ln.addOutputStream("WORLD_LANDMARKS:"+ut),ln.addOutputStream("HANDEDNESS:"+ot),ln.setOptions(xt),It.addNode(ln),this.graphRunner.attachProtoVectorListener(at,(Xn,mt)=>{this.addJsLandmarks(Xn),this.setLatestOutputTimestamp(mt)}),this.graphRunner.attachEmptyPacketListener(at,Xn=>{this.setLatestOutputTimestamp(Xn)}),this.graphRunner.attachProtoVectorListener(ut,(Xn,mt)=>{this.adddJsWorldLandmarks(Xn),this.setLatestOutputTimestamp(mt)}),this.graphRunner.attachEmptyPacketListener(ut,Xn=>{this.setLatestOutputTimestamp(Xn)}),this.graphRunner.attachProtoVectorListener(gt,(Xn,mt)=>{this.gestures.push(...this.toJsCategories(Xn,!1)),this.setLatestOutputTimestamp(mt)}),this.graphRunner.attachEmptyPacketListener(gt,Xn=>{this.setLatestOutputTimestamp(Xn)}),this.graphRunner.attachProtoVectorListener(ot,(Xn,mt)=>{this.handednesses.push(...this.toJsCategories(Xn)),this.setLatestOutputTimestamp(mt)}),this.graphRunner.attachEmptyPacketListener(ot,Xn=>{this.setLatestOutputTimestamp(Xn)});const Mn=It.serializeBinary();this.setGraph(new Uint8Array(Mn),!0)}}u.GestureRecognizer=Mt,Mt.HAND_CONNECTIONS=Oe.HAND_CONNECTIONS}(gesture_recognizer);var hand_landmarker={},hand_landmarker_options={};Object.defineProperty(hand_landmarker_options,"__esModule",{value:!0});var hand_landmarker_result={};Object.defineProperty(hand_landmarker_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(ut,ot,Rt,Mt){Mt===void 0&&(Mt=Rt);var Pt=Object.getOwnPropertyDescriptor(ot,Rt);Pt&&!("get"in Pt?!ot.__esModule:Pt.writable||Pt.configurable)||(Pt={enumerable:!0,get:function(){return ot[Rt]}}),Object.defineProperty(ut,Mt,Pt)}:function(ut,ot,Rt,Mt){Mt===void 0&&(Mt=Rt),ut[Mt]=ot[Rt]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(ut,ot){for(var Rt in ut)Rt==="default"||Object.prototype.hasOwnProperty.call(ot,Rt)||n(ot,ut,Rt)};Object.defineProperty(u,"__esModule",{value:!0}),u.HandLandmarker=void 0;const C=calculator_pb,d=calculator_options_pb,g=classification_pb,i=landmark_pb,_=base_options_pb,j=hand_detector_graph_options_pb,$=hand_landmarker_graph_options_pb,re=hand_landmarks_detector_graph_options_pb,Q=landmark_result,ae=vision_task_runner,pe=hand_landmarks_connections;A(hand_landmarker_options,u),A(hand_landmarker_result,u);const st="image_in",Pe="norm_rect",Oe="hand_landmarks",Ze="world_hand_landmarks",rt="handedness",gt=.5;class at extends ae.VisionTaskRunner{static createFromOptions(ot,Rt){return ae.VisionTaskRunner.createVisionInstance(at,ot,Rt)}static createFromModelBuffer(ot,Rt){return ae.VisionTaskRunner.createVisionInstance(at,ot,{baseOptions:{modelAssetBuffer:Rt}})}static createFromModelPath(ot,Rt){return ae.VisionTaskRunner.createVisionInstance(at,ot,{baseOptions:{modelAssetPath:Rt}})}constructor(ot,Rt){super(new ae.VisionGraphRunner(ot,Rt),st,Pe,!1),this.landmarks=[],this.worldLandmarks=[],this.handednesses=[],this.options=new $.HandLandmarkerGraphOptions,this.options.setBaseOptions(new _.BaseOptions),this.handLandmarksDetectorGraphOptions=new re.HandLandmarksDetectorGraphOptions,this.options.setHandLandmarksDetectorGraphOptions(this.handLandmarksDetectorGraphOptions),this.handDetectorGraphOptions=new j.HandDetectorGraphOptions,this.options.setHandDetectorGraphOptions(this.handDetectorGraphOptions),this.initDefaults()}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(ot){this.options.setBaseOptions(ot)}setOptions(ot){var Rt,Mt,Pt,It;return"numHands"in ot&&this.handDetectorGraphOptions.setNumHands((Rt=ot.numHands)!==null&&Rt!==void 0?Rt:1),"minHandDetectionConfidence"in ot&&this.handDetectorGraphOptions.setMinDetectionConfidence((Mt=ot.minHandDetectionConfidence)!==null&&Mt!==void 0?Mt:gt),"minTrackingConfidence"in ot&&this.options.setMinTrackingConfidence((Pt=ot.minTrackingConfidence)!==null&&Pt!==void 0?Pt:gt),"minHandPresenceConfidence"in ot&&this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence((It=ot.minHandPresenceConfidence)!==null&&It!==void 0?It:gt),this.applyOptions(ot)}detect(ot,Rt){return this.resetResults(),this.processImageData(ot,Rt),this.processResults()}detectForVideo(ot,Rt,Mt){return this.resetResults(),this.processVideoData(ot,Mt,Rt),this.processResults()}resetResults(){this.landmarks=[],this.worldLandmarks=[],this.handednesses=[]}processResults(){return{landmarks:this.landmarks,worldLandmarks:this.worldLandmarks,handednesses:this.handednesses}}initDefaults(){this.handDetectorGraphOptions.setNumHands(1),this.handDetectorGraphOptions.setMinDetectionConfidence(gt),this.handLandmarksDetectorGraphOptions.setMinDetectionConfidence(gt),this.options.setMinTrackingConfidence(gt)}toJsCategories(ot){var Rt,Mt,Pt,It;const xt=[];for(const ln of ot){const Mn=g.ClassificationList.deserializeBinary(ln),Xn=[];for(const mt of Mn.getClassificationList())Xn.push({score:(Rt=mt.getScore())!==null&&Rt!==void 0?Rt:0,index:(Mt=mt.getIndex())!==null&&Mt!==void 0?Mt:-1,categoryName:(Pt=mt.getLabel())!==null&&Pt!==void 0?Pt:"",displayName:(It=mt.getDisplayName())!==null&&It!==void 0?It:""});xt.push(Xn)}return xt}addJsLandmarks(ot){for(const Rt of ot){const Mt=i.NormalizedLandmarkList.deserializeBinary(Rt);this.landmarks.push((0,Q.convertToLandmarks)(Mt))}}adddJsWorldLandmarks(ot){for(const Rt of ot){const Mt=i.LandmarkList.deserializeBinary(Rt);this.worldLandmarks.push((0,Q.convertToWorldLandmarks)(Mt))}}refreshGraph(){const ot=new C.CalculatorGraphConfig;ot.addInputStream(st),ot.addInputStream(Pe),ot.addOutputStream(Oe),ot.addOutputStream(Ze),ot.addOutputStream(rt);const Rt=new d.CalculatorOptions;Rt.setExtension($.HandLandmarkerGraphOptions.ext,this.options);const Mt=new C.CalculatorGraphConfig.Node;Mt.setCalculator("mediapipe.tasks.vision.hand_landmarker.HandLandmarkerGraph"),Mt.addInputStream("IMAGE:"+st),Mt.addInputStream("NORM_RECT:"+Pe),Mt.addOutputStream("LANDMARKS:"+Oe),Mt.addOutputStream("WORLD_LANDMARKS:"+Ze),Mt.addOutputStream("HANDEDNESS:"+rt),Mt.setOptions(Rt),ot.addNode(Mt),this.graphRunner.attachProtoVectorListener(Oe,(It,xt)=>{this.addJsLandmarks(It),this.setLatestOutputTimestamp(xt)}),this.graphRunner.attachEmptyPacketListener(Oe,It=>{this.setLatestOutputTimestamp(It)}),this.graphRunner.attachProtoVectorListener(Ze,(It,xt)=>{this.adddJsWorldLandmarks(It),this.setLatestOutputTimestamp(xt)}),this.graphRunner.attachEmptyPacketListener(Ze,It=>{this.setLatestOutputTimestamp(It)}),this.graphRunner.attachProtoVectorListener(rt,(It,xt)=>{this.handednesses.push(...this.toJsCategories(It)),this.setLatestOutputTimestamp(xt)}),this.graphRunner.attachEmptyPacketListener(rt,It=>{this.setLatestOutputTimestamp(It)});const Pt=ot.serializeBinary();this.setGraph(new Uint8Array(Pt),!0)}}u.HandLandmarker=at,at.HAND_CONNECTIONS=pe.HAND_CONNECTIONS}(hand_landmarker);var image_classifier={},classifications_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=classification_pb;A.object.extend(proto,d),A.exportSymbol("proto.mediapipe.tasks.components.containers.proto.ClassificationResult",null,C),A.exportSymbol("proto.mediapipe.tasks.components.containers.proto.Classifications",null,C),proto.mediapipe.tasks.components.containers.proto.Classifications=function(g){n.Message.initialize(this,g,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.components.containers.proto.Classifications,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.Classifications.displayName="proto.mediapipe.tasks.components.containers.proto.Classifications"),proto.mediapipe.tasks.components.containers.proto.ClassificationResult=function(g){n.Message.initialize(this,g,0,-1,proto.mediapipe.tasks.components.containers.proto.ClassificationResult.repeatedFields_,null)},A.inherits(proto.mediapipe.tasks.components.containers.proto.ClassificationResult,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.ClassificationResult.displayName="proto.mediapipe.tasks.components.containers.proto.ClassificationResult"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.toObject=function(g){return proto.mediapipe.tasks.components.containers.proto.Classifications.toObject(g,this)},proto.mediapipe.tasks.components.containers.proto.Classifications.toObject=function(g,i){var _,j={classificationList:(_=i.getClassificationList())&&d.ClassificationList.toObject(g,_),headIndex:(_=n.Message.getField(i,2))==null?void 0:_,headName:(_=n.Message.getField(i,3))==null?void 0:_};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.tasks.components.containers.proto.Classifications;return proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinaryFromReader(_,i)},proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 4:var _=new d.ClassificationList;i.readMessage(_,d.ClassificationList.deserializeBinaryFromReader),g.setClassificationList(_);break;case 2:_=i.readInt32(),g.setHeadIndex(_);break;case 3:_=i.readString(),g.setHeadName(_);break;default:i.skipField()}return g},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.Classifications.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.Classifications.serializeBinaryToWriter=function(g,i){var _=void 0;(_=g.getClassificationList())!=null&&i.writeMessage(4,_,d.ClassificationList.serializeBinaryToWriter),(_=n.Message.getField(g,2))!=null&&i.writeInt32(2,_),(_=n.Message.getField(g,3))!=null&&i.writeString(3,_)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.getClassificationList=function(){return n.Message.getWrapperField(this,d.ClassificationList,4)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.setClassificationList=function(g){return n.Message.setWrapperField(this,4,g)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.clearClassificationList=function(){return this.setClassificationList(void 0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.hasClassificationList=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.getHeadIndex=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.setHeadIndex=function(g){return n.Message.setField(this,2,g)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.clearHeadIndex=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.hasHeadIndex=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.getHeadName=function(){return n.Message.getFieldWithDefault(this,3,"")},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.setHeadName=function(g){return n.Message.setField(this,3,g)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.clearHeadName=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.components.containers.proto.Classifications.prototype.hasHeadName=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.toObject=function(g){return proto.mediapipe.tasks.components.containers.proto.ClassificationResult.toObject(g,this)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.toObject=function(g,i){var _,j={classificationsList:n.Message.toObjectList(i.getClassificationsList(),proto.mediapipe.tasks.components.containers.proto.Classifications.toObject,g),timestampMs:(_=n.Message.getField(i,2))==null?void 0:_};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.tasks.components.containers.proto.ClassificationResult.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.tasks.components.containers.proto.ClassificationResult;return proto.mediapipe.tasks.components.containers.proto.ClassificationResult.deserializeBinaryFromReader(_,i)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=new proto.mediapipe.tasks.components.containers.proto.Classifications;i.readMessage(_,proto.mediapipe.tasks.components.containers.proto.Classifications.deserializeBinaryFromReader),g.addClassifications(_);break;case 2:_=i.readInt64(),g.setTimestampMs(_);break;default:i.skipField()}return g},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.ClassificationResult.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.serializeBinaryToWriter=function(g,i){var _=void 0;(_=g.getClassificationsList()).length>0&&i.writeRepeatedMessage(1,_,proto.mediapipe.tasks.components.containers.proto.Classifications.serializeBinaryToWriter),(_=n.Message.getField(g,2))!=null&&i.writeInt64(2,_)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.getClassificationsList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.tasks.components.containers.proto.Classifications,1)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.setClassificationsList=function(g){return n.Message.setRepeatedWrapperField(this,1,g)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.addClassifications=function(g,i){return n.Message.addToRepeatedWrapperField(this,1,g,proto.mediapipe.tasks.components.containers.proto.Classifications,i)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.clearClassificationsList=function(){return this.setClassificationsList([])},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.getTimestampMs=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.setTimestampMs=function(g){return n.Message.setField(this,2,g)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.clearTimestampMs=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.containers.proto.ClassificationResult.prototype.hasTimestampMs=function(){return n.Message.getField(this,2)!=null},A.object.extend(u,proto.mediapipe.tasks.components.containers.proto)})(classifications_pb);var image_classifier_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var g=calculator_options_pb;A.object.extend(proto,g);var i=classifier_options_pb;A.object.extend(proto,i);var _=base_options_pb;A.object.extend(proto,_),A.exportSymbol("proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions",null,C),proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions=function(j){n.Message.initialize(this,j,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.displayName="proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.toObject=function(j){return proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject(j,this)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject=function(j,$){var re,Q={baseOptions:(re=$.getBaseOptions())&&_.BaseOptions.toObject(j,re),classifierOptions:(re=$.getClassifierOptions())&&i.ClassifierOptions.toObject(j,re)};return j&&(Q.$jspbMessageInstance=$),Q}),proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinary=function(j){var $=new n.BinaryReader(j),re=new proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions;return proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader(re,$)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader=function(j,$){for(;$.nextField()&&!$.isEndGroup();)switch($.getFieldNumber()){case 1:var re=new _.BaseOptions;$.readMessage(re,_.BaseOptions.deserializeBinaryFromReader),j.setBaseOptions(re);break;case 2:re=new i.ClassifierOptions,$.readMessage(re,i.ClassifierOptions.deserializeBinaryFromReader),j.setClassifierOptions(re);break;default:$.skipField()}return j},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.serializeBinary=function(){var j=new n.BinaryWriter;return proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter=function(j,$){var re=void 0;(re=j.getBaseOptions())!=null&&$.writeMessage(1,re,_.BaseOptions.serializeBinaryToWriter),(re=j.getClassifierOptions())!=null&&$.writeMessage(2,re,i.ClassifierOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext=new n.ExtensionFieldInfo(456383383,{ext:0},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[456383383]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[456383383]=proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,_.BaseOptions,1)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.setBaseOptions=function(j){return n.Message.setWrapperField(this,1,j)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.getClassifierOptions=function(){return n.Message.getWrapperField(this,i.ClassifierOptions,2)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.setClassifierOptions=function(j){return n.Message.setWrapperField(this,2,j)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.clearClassifierOptions=function(){return this.setClassifierOptions(void 0)},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.prototype.hasClassifierOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext=new n.ExtensionFieldInfo(456383383,{ext:0},proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[456383383]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[456383383]=proto.mediapipe.tasks.vision.image_classifier.proto.ImageClassifierGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.image_classifier.proto)})(image_classifier_graph_options_pb);var image_classifier_options={};Object.defineProperty(image_classifier_options,"__esModule",{value:!0});var image_classifier_result={};Object.defineProperty(image_classifier_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Pe,Oe,Ze,rt){rt===void 0&&(rt=Ze);var gt=Object.getOwnPropertyDescriptor(Oe,Ze);gt&&!("get"in gt?!Oe.__esModule:gt.writable||gt.configurable)||(gt={enumerable:!0,get:function(){return Oe[Ze]}}),Object.defineProperty(Pe,rt,gt)}:function(Pe,Oe,Ze,rt){rt===void 0&&(rt=Ze),Pe[rt]=Oe[Ze]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(Pe,Oe){for(var Ze in Pe)Ze==="default"||Object.prototype.hasOwnProperty.call(Oe,Ze)||n(Oe,Pe,Ze)};Object.defineProperty(u,"__esModule",{value:!0}),u.ImageClassifier=void 0;const C=calculator_pb,d=calculator_options_pb,g=classifications_pb,i=base_options_pb,_=image_classifier_graph_options_pb,j=classifier_options,$=classifier_result,re=vision_task_runner,Q="input_image",ae="norm_rect",pe="classifications";A(image_classifier_options,u),A(image_classifier_result,u);class st extends re.VisionTaskRunner{static createFromOptions(Oe,Ze){return re.VisionTaskRunner.createVisionInstance(st,Oe,Ze)}static createFromModelBuffer(Oe,Ze){return re.VisionTaskRunner.createVisionInstance(st,Oe,{baseOptions:{modelAssetBuffer:Ze}})}static createFromModelPath(Oe,Ze){return re.VisionTaskRunner.createVisionInstance(st,Oe,{baseOptions:{modelAssetPath:Ze}})}constructor(Oe,Ze){super(new re.VisionGraphRunner(Oe,Ze),Q,ae,!0),this.classificationResult={classifications:[]},this.options=new _.ImageClassifierGraphOptions,this.options.setBaseOptions(new i.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(Oe){this.options.setBaseOptions(Oe)}setOptions(Oe){return this.options.setClassifierOptions((0,j.convertClassifierOptionsToProto)(Oe,this.options.getClassifierOptions())),this.applyOptions(Oe)}classify(Oe,Ze){return this.classificationResult={classifications:[]},this.processImageData(Oe,Ze),this.classificationResult}classifyForVideo(Oe,Ze,rt){return this.classificationResult={classifications:[]},this.processVideoData(Oe,rt,Ze),this.classificationResult}refreshGraph(){const Oe=new C.CalculatorGraphConfig;Oe.addInputStream(Q),Oe.addInputStream(ae),Oe.addOutputStream(pe);const Ze=new d.CalculatorOptions;Ze.setExtension(_.ImageClassifierGraphOptions.ext,this.options);const rt=new C.CalculatorGraphConfig.Node;rt.setCalculator("mediapipe.tasks.vision.image_classifier.ImageClassifierGraph"),rt.addInputStream("IMAGE:"+Q),rt.addInputStream("NORM_RECT:"+ae),rt.addOutputStream("CLASSIFICATIONS:"+pe),rt.setOptions(Ze),Oe.addNode(rt),this.graphRunner.attachProtoListener(pe,(at,ut)=>{this.classificationResult=(0,$.convertFromClassificationResultProto)(g.ClassificationResult.deserializeBinary(at)),this.setLatestOutputTimestamp(ut)}),this.graphRunner.attachEmptyPacketListener(pe,at=>{this.setLatestOutputTimestamp(at)});const gt=Oe.serializeBinary();this.setGraph(new Uint8Array(gt),!0)}}u.ImageClassifier=st}(image_classifier);var image_embedder={},embeddings_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.tasks.components.containers.proto.Embedding",null,C),A.exportSymbol("proto.mediapipe.tasks.components.containers.proto.Embedding.EmbeddingCase",null,C),A.exportSymbol("proto.mediapipe.tasks.components.containers.proto.EmbeddingResult",null,C),A.exportSymbol("proto.mediapipe.tasks.components.containers.proto.FloatEmbedding",null,C),A.exportSymbol("proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding",null,C),proto.mediapipe.tasks.components.containers.proto.FloatEmbedding=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.repeatedFields_,null)},A.inherits(proto.mediapipe.tasks.components.containers.proto.FloatEmbedding,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.displayName="proto.mediapipe.tasks.components.containers.proto.FloatEmbedding"),proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.displayName="proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding"),proto.mediapipe.tasks.components.containers.proto.Embedding=function(d){n.Message.initialize(this,d,0,-1,null,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_)},A.inherits(proto.mediapipe.tasks.components.containers.proto.Embedding,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.Embedding.displayName="proto.mediapipe.tasks.components.containers.proto.Embedding"),proto.mediapipe.tasks.components.containers.proto.EmbeddingResult=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.repeatedFields_,null)},A.inherits(proto.mediapipe.tasks.components.containers.proto.EmbeddingResult,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.displayName="proto.mediapipe.tasks.components.containers.proto.EmbeddingResult"),proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.toObject=function(d){return proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.toObject(d,this)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.toObject=function(d,g){var i,_={valuesList:(i=n.Message.getRepeatedFloatingPointField(g,1))==null?void 0:i};return d&&(_.$jspbMessageInstance=g),_}),proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.tasks.components.containers.proto.FloatEmbedding;return proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinaryFromReader(i,g)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)if(g.getFieldNumber()===1)for(var i=g.isDelimited()?g.readPackedFloat():[g.readFloat()],_=0;_<i.length;_++)d.addValues(i[_]);else g.skipField();return d},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.serializeBinaryToWriter=function(d,g){var i;(i=d.getValuesList()).length>0&&g.writePackedFloat(1,i)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.getValuesList=function(){return n.Message.getRepeatedFloatingPointField(this,1)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.setValuesList=function(d){return n.Message.setField(this,1,d||[])},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.addValues=function(d,g){return n.Message.addToRepeatedField(this,1,d,g)},proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.prototype.clearValuesList=function(){return this.setValuesList([])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.toObject=function(d){return proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.toObject(d,this)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.toObject=function(d,g){var i={values:g.getValues_asB64()};return d&&(i.$jspbMessageInstance=g),i}),proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding;return proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinaryFromReader(i,g)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)if(g.getFieldNumber()===1){var i=g.readBytes();d.setValues(i)}else g.skipField();return d},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.serializeBinaryToWriter=function(d,g){var i;(i=n.Message.getField(d,1))!=null&&g.writeBytes(1,i)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.getValues=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.getValues_asB64=function(){return n.Message.bytesAsB64(this.getValues())},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.getValues_asU8=function(){return n.Message.bytesAsU8(this.getValues())},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.setValues=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.clearValues=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.prototype.hasValues=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_=[[1,2]],proto.mediapipe.tasks.components.containers.proto.Embedding.EmbeddingCase={EMBEDDING_NOT_SET:0,FLOAT_EMBEDDING:1,QUANTIZED_EMBEDDING:2},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getEmbeddingCase=function(){return n.Message.computeOneofCase(this,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_[0])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.toObject=function(d){return proto.mediapipe.tasks.components.containers.proto.Embedding.toObject(d,this)},proto.mediapipe.tasks.components.containers.proto.Embedding.toObject=function(d,g){var i,_={floatEmbedding:(i=g.getFloatEmbedding())&&proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.toObject(d,i),quantizedEmbedding:(i=g.getQuantizedEmbedding())&&proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.toObject(d,i),headIndex:(i=n.Message.getField(g,3))==null?void 0:i,headName:(i=n.Message.getField(g,4))==null?void 0:i};return d&&(_.$jspbMessageInstance=g),_}),proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.tasks.components.containers.proto.Embedding;return proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinaryFromReader(i,g)},proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var i=new proto.mediapipe.tasks.components.containers.proto.FloatEmbedding;g.readMessage(i,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.deserializeBinaryFromReader),d.setFloatEmbedding(i);break;case 2:i=new proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding,g.readMessage(i,proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.deserializeBinaryFromReader),d.setQuantizedEmbedding(i);break;case 3:i=g.readInt32(),d.setHeadIndex(i);break;case 4:i=g.readString(),d.setHeadName(i);break;default:g.skipField()}return d},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.Embedding.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.Embedding.serializeBinaryToWriter=function(d,g){var i=void 0;(i=d.getFloatEmbedding())!=null&&g.writeMessage(1,i,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding.serializeBinaryToWriter),(i=d.getQuantizedEmbedding())!=null&&g.writeMessage(2,i,proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding.serializeBinaryToWriter),(i=n.Message.getField(d,3))!=null&&g.writeInt32(3,i),(i=n.Message.getField(d,4))!=null&&g.writeString(4,i)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getFloatEmbedding=function(){return n.Message.getWrapperField(this,proto.mediapipe.tasks.components.containers.proto.FloatEmbedding,1)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setFloatEmbedding=function(d){return n.Message.setOneofWrapperField(this,1,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_[0],d)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearFloatEmbedding=function(){return this.setFloatEmbedding(void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasFloatEmbedding=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getQuantizedEmbedding=function(){return n.Message.getWrapperField(this,proto.mediapipe.tasks.components.containers.proto.QuantizedEmbedding,2)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setQuantizedEmbedding=function(d){return n.Message.setOneofWrapperField(this,2,proto.mediapipe.tasks.components.containers.proto.Embedding.oneofGroups_[0],d)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearQuantizedEmbedding=function(){return this.setQuantizedEmbedding(void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasQuantizedEmbedding=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getHeadIndex=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setHeadIndex=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearHeadIndex=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasHeadIndex=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.getHeadName=function(){return n.Message.getFieldWithDefault(this,4,"")},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.setHeadName=function(d){return n.Message.setField(this,4,d)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.clearHeadName=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.components.containers.proto.Embedding.prototype.hasHeadName=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.toObject=function(d){return proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.toObject(d,this)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.toObject=function(d,g){var i,_={embeddingsList:n.Message.toObjectList(g.getEmbeddingsList(),proto.mediapipe.tasks.components.containers.proto.Embedding.toObject,d),timestampMs:(i=n.Message.getField(g,2))==null?void 0:i};return d&&(_.$jspbMessageInstance=g),_}),proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.tasks.components.containers.proto.EmbeddingResult;return proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.deserializeBinaryFromReader(i,g)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var i=new proto.mediapipe.tasks.components.containers.proto.Embedding;g.readMessage(i,proto.mediapipe.tasks.components.containers.proto.Embedding.deserializeBinaryFromReader),d.addEmbeddings(i);break;case 2:i=g.readInt64(),d.setTimestampMs(i);break;default:g.skipField()}return d},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.serializeBinaryToWriter=function(d,g){var i=void 0;(i=d.getEmbeddingsList()).length>0&&g.writeRepeatedMessage(1,i,proto.mediapipe.tasks.components.containers.proto.Embedding.serializeBinaryToWriter),(i=n.Message.getField(d,2))!=null&&g.writeInt64(2,i)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.getEmbeddingsList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.tasks.components.containers.proto.Embedding,1)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.setEmbeddingsList=function(d){return n.Message.setRepeatedWrapperField(this,1,d)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.addEmbeddings=function(d,g){return n.Message.addToRepeatedWrapperField(this,1,d,proto.mediapipe.tasks.components.containers.proto.Embedding,g)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.clearEmbeddingsList=function(){return this.setEmbeddingsList([])},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.getTimestampMs=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.setTimestampMs=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.clearTimestampMs=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.containers.proto.EmbeddingResult.prototype.hasTimestampMs=function(){return n.Message.getField(this,2)!=null},A.object.extend(u,proto.mediapipe.tasks.components.containers.proto)})(embeddings_pb);var image_embedder_graph_options_pb={},embedder_options_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.tasks.components.processors.proto.EmbedderOptions",null,C),proto.mediapipe.tasks.components.processors.proto.EmbedderOptions=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.components.processors.proto.EmbedderOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.displayName="proto.mediapipe.tasks.components.processors.proto.EmbedderOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.toObject=function(d){return proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.toObject(d,this)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.toObject=function(d,g){var i,_={l2Normalize:(i=n.Message.getBooleanField(g,1))==null?void 0:i,quantize:(i=n.Message.getBooleanField(g,2))==null?void 0:i};return d&&(_.$jspbMessageInstance=g),_}),proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.tasks.components.processors.proto.EmbedderOptions;return proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.deserializeBinaryFromReader(i,g)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var i=g.readBool();d.setL2Normalize(i);break;case 2:i=g.readBool(),d.setQuantize(i);break;default:g.skipField()}return d},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.serializeBinaryToWriter=function(d,g){var i=void 0;(i=n.Message.getField(d,1))!=null&&g.writeBool(1,i),(i=n.Message.getField(d,2))!=null&&g.writeBool(2,i)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.getL2Normalize=function(){return n.Message.getBooleanFieldWithDefault(this,1,!1)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.setL2Normalize=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.clearL2Normalize=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.hasL2Normalize=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.getQuantize=function(){return n.Message.getBooleanFieldWithDefault(this,2,!1)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.setQuantize=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.clearQuantize=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.components.processors.proto.EmbedderOptions.prototype.hasQuantize=function(){return n.Message.getField(this,2)!=null},A.object.extend(u,proto.mediapipe.tasks.components.processors.proto)})(embedder_options_pb),function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var g=calculator_options_pb;A.object.extend(proto,g);var i=embedder_options_pb;A.object.extend(proto,i);var _=base_options_pb;A.object.extend(proto,_),A.exportSymbol("proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions",null,C),proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions=function(j){n.Message.initialize(this,j,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.displayName="proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.toObject=function(j){return proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject(j,this)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject=function(j,$){var re,Q={baseOptions:(re=$.getBaseOptions())&&_.BaseOptions.toObject(j,re),embedderOptions:(re=$.getEmbedderOptions())&&i.EmbedderOptions.toObject(j,re)};return j&&(Q.$jspbMessageInstance=$),Q}),proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinary=function(j){var $=new n.BinaryReader(j),re=new proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions;return proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader(re,$)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader=function(j,$){for(;$.nextField()&&!$.isEndGroup();)switch($.getFieldNumber()){case 1:var re=new _.BaseOptions;$.readMessage(re,_.BaseOptions.deserializeBinaryFromReader),j.setBaseOptions(re);break;case 2:re=new i.EmbedderOptions,$.readMessage(re,i.EmbedderOptions.deserializeBinaryFromReader),j.setEmbedderOptions(re);break;default:$.skipField()}return j},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.serializeBinary=function(){var j=new n.BinaryWriter;return proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter=function(j,$){var re=void 0;(re=j.getBaseOptions())!=null&&$.writeMessage(1,re,_.BaseOptions.serializeBinaryToWriter),(re=j.getEmbedderOptions())!=null&&$.writeMessage(2,re,i.EmbedderOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext=new n.ExtensionFieldInfo(476348187,{ext:0},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[476348187]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[476348187]=proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,_.BaseOptions,1)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.setBaseOptions=function(j){return n.Message.setWrapperField(this,1,j)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.getEmbedderOptions=function(){return n.Message.getWrapperField(this,i.EmbedderOptions,2)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.setEmbedderOptions=function(j){return n.Message.setWrapperField(this,2,j)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.clearEmbedderOptions=function(){return this.setEmbedderOptions(void 0)},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.prototype.hasEmbedderOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext=new n.ExtensionFieldInfo(476348187,{ext:0},proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[476348187]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[476348187]=proto.mediapipe.tasks.vision.image_embedder.proto.ImageEmbedderGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.image_embedder.proto)}(image_embedder_graph_options_pb);var embedder_options={};Object.defineProperty(embedder_options,"__esModule",{value:!0}),embedder_options.convertEmbedderOptionsToProto=void 0;const embedder_options_pb_1=embedder_options_pb;function convertEmbedderOptionsToProto(u,n){const A=n?n.clone():new embedder_options_pb_1.EmbedderOptions;return u.l2Normalize!==void 0?A.setL2Normalize(u.l2Normalize):"l2Normalize"in u&&A.clearL2Normalize(),u.quantize!==void 0?A.setQuantize(u.quantize):"quantize"in u&&A.clearQuantize(),A}embedder_options.convertEmbedderOptionsToProto=convertEmbedderOptionsToProto;var embedder_result={};Object.defineProperty(embedder_result,"__esModule",{value:!0}),embedder_result.convertFromEmbeddingResultProto=void 0;const DEFAULT_INDEX=-1;function convertFromEmbeddingsProto(u){var n,A,C,d;const g={headIndex:(n=u.getHeadIndex())!==null&&n!==void 0?n:DEFAULT_INDEX,headName:(A=u.getHeadName())!==null&&A!==void 0?A:""};if(u.hasFloatEmbedding())g.floatEmbedding=u.getFloatEmbedding().getValuesList();else{const i=(d=(C=u.getQuantizedEmbedding())===null||C===void 0?void 0:C.getValues())!==null&&d!==void 0?d:"";g.quantizedEmbedding=typeof i=="string"?Uint8Array.from(atob(i),_=>_.charCodeAt(0)):i}return g}function convertFromEmbeddingResultProto(u){return{embeddings:u.getEmbeddingsList().map(n=>convertFromEmbeddingsProto(n)),timestampMs:u.getTimestampMs()}}embedder_result.convertFromEmbeddingResultProto=convertFromEmbeddingResultProto;var cosine_similarity={};function computeCosineSimilarity(u,n){if(u.floatEmbedding&&n.floatEmbedding)return compute(u.floatEmbedding,n.floatEmbedding);if(u.quantizedEmbedding&&n.quantizedEmbedding)return compute(convertToBytes(u.quantizedEmbedding),convertToBytes(n.quantizedEmbedding));throw new Error("Cannot compute cosine similarity between quantized and float embeddings.")}function convertToBytes(u){return Array.from(u,n=>n>127?n-256:n)}function compute(u,n){if(u.length!==n.length)throw new Error(`Cannot compute cosine similarity between embeddings of different sizes (${u.length} vs. ${n.length}).`);let A=0,C=0,d=0;for(let g=0;g<u.length;g++)A+=u[g]*n[g],C+=u[g]*u[g],d+=n[g]*n[g];if(C<=0||d<=0)throw new Error("Cannot compute cosine similarity on embedding with 0 norm.");return A/Math.sqrt(C*d)}Object.defineProperty(cosine_similarity,"__esModule",{value:!0}),cosine_similarity.computeCosineSimilarity=void 0,cosine_similarity.computeCosineSimilarity=computeCosineSimilarity;var image_embedder_options={};Object.defineProperty(image_embedder_options,"__esModule",{value:!0});var image_embedder_result={};Object.defineProperty(image_embedder_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(Oe,Ze,rt,gt){gt===void 0&&(gt=rt);var at=Object.getOwnPropertyDescriptor(Ze,rt);at&&!("get"in at?!Ze.__esModule:at.writable||at.configurable)||(at={enumerable:!0,get:function(){return Ze[rt]}}),Object.defineProperty(Oe,gt,at)}:function(Oe,Ze,rt,gt){gt===void 0&&(gt=rt),Oe[gt]=Ze[rt]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(Oe,Ze){for(var rt in Oe)rt==="default"||Object.prototype.hasOwnProperty.call(Ze,rt)||n(Ze,Oe,rt)};Object.defineProperty(u,"__esModule",{value:!0}),u.ImageEmbedder=void 0;const C=calculator_pb,d=calculator_options_pb,g=embeddings_pb,i=base_options_pb,_=image_embedder_graph_options_pb,j=embedder_options,$=embedder_result,re=cosine_similarity,Q=vision_task_runner,ae="image_in",pe="norm_rect",st="embeddings_out";A(image_embedder_options,u),A(image_embedder_result,u);class Pe extends Q.VisionTaskRunner{static createFromOptions(Ze,rt){return Q.VisionTaskRunner.createVisionInstance(Pe,Ze,rt)}static createFromModelBuffer(Ze,rt){return Q.VisionTaskRunner.createVisionInstance(Pe,Ze,{baseOptions:{modelAssetBuffer:rt}})}static createFromModelPath(Ze,rt){return Q.VisionTaskRunner.createVisionInstance(Pe,Ze,{baseOptions:{modelAssetPath:rt}})}constructor(Ze,rt){super(new Q.VisionGraphRunner(Ze,rt),ae,pe,!0),this.options=new _.ImageEmbedderGraphOptions,this.embeddings={embeddings:[]},this.options.setBaseOptions(new i.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(Ze){this.options.setBaseOptions(Ze)}setOptions(Ze){return this.options.setEmbedderOptions((0,j.convertEmbedderOptionsToProto)(Ze,this.options.getEmbedderOptions())),this.applyOptions(Ze)}embed(Ze,rt){return this.processImageData(Ze,rt),this.embeddings}embedForVideo(Ze,rt,gt){return this.processVideoData(Ze,gt,rt),this.embeddings}static cosineSimilarity(Ze,rt){return(0,re.computeCosineSimilarity)(Ze,rt)}addJsImageEmdedding(Ze){const rt=g.EmbeddingResult.deserializeBinary(Ze);this.embeddings=(0,$.convertFromEmbeddingResultProto)(rt)}refreshGraph(){const Ze=new C.CalculatorGraphConfig;Ze.addInputStream(ae),Ze.addInputStream(pe),Ze.addOutputStream(st);const rt=new d.CalculatorOptions;rt.setExtension(_.ImageEmbedderGraphOptions.ext,this.options);const gt=new C.CalculatorGraphConfig.Node;gt.setCalculator("mediapipe.tasks.vision.image_embedder.ImageEmbedderGraph"),gt.addInputStream("IMAGE:"+ae),gt.addInputStream("NORM_RECT:"+pe),gt.addOutputStream("EMBEDDINGS:"+st),gt.setOptions(rt),Ze.addNode(gt),this.graphRunner.attachProtoListener(st,(ut,ot)=>{this.addJsImageEmdedding(ut),this.setLatestOutputTimestamp(ot)}),this.graphRunner.attachEmptyPacketListener(st,ut=>{this.setLatestOutputTimestamp(ut)});const at=Ze.serializeBinary();this.setGraph(new Uint8Array(at),!0)}}u.ImageEmbedder=Pe}(image_embedder);var image_segmenter={},tensors_to_segmentation_calculator_pb={},segmenter_options_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions",null,C),A.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.Activation",null,C),A.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.OutputType",null,C),proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.displayName="proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.toObject=function(d){return proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.toObject(d,this)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.toObject=function(d,g){var i,_={outputType:(i=n.Message.getField(g,1))==null?void 0:i,activation:n.Message.getFieldWithDefault(g,2,0)};return d&&(_.$jspbMessageInstance=g),_}),proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions;return proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.deserializeBinaryFromReader(i,g)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var i=g.readEnum();d.setOutputType(i);break;case 2:i=g.readEnum(),d.setActivation(i);break;default:g.skipField()}return d},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.serializeBinaryToWriter=function(d,g){var i=void 0;(i=n.Message.getField(d,1))!=null&&g.writeEnum(1,i),(i=n.Message.getField(d,2))!=null&&g.writeEnum(2,i)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.OutputType={UNSPECIFIED:0,CATEGORY_MASK:1,CONFIDENCE_MASK:2},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.Activation={NONE:0,SIGMOID:1,SOFTMAX:2},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.getOutputType=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.setOutputType=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.clearOutputType=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.hasOutputType=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.getActivation=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.setActivation=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.clearActivation=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.SegmenterOptions.prototype.hasActivation=function(){return n.Message.getField(this,2)!=null},A.object.extend(u,proto.mediapipe.tasks.vision.image_segmenter.proto)})(segmenter_options_pb);var label_map_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.LabelMapItem",null,C),proto.mediapipe.LabelMapItem=function(d){n.Message.initialize(this,d,0,-1,proto.mediapipe.LabelMapItem.repeatedFields_,null)},A.inherits(proto.mediapipe.LabelMapItem,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.LabelMapItem.displayName="proto.mediapipe.LabelMapItem"),proto.mediapipe.LabelMapItem.repeatedFields_=[3],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.LabelMapItem.prototype.toObject=function(d){return proto.mediapipe.LabelMapItem.toObject(d,this)},proto.mediapipe.LabelMapItem.toObject=function(d,g){var i,_={name:(i=n.Message.getField(g,1))==null?void 0:i,displayName:(i=n.Message.getField(g,2))==null?void 0:i,childNameList:(i=n.Message.getRepeatedField(g,3))==null?void 0:i};return d&&(_.$jspbMessageInstance=g),_}),proto.mediapipe.LabelMapItem.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.LabelMapItem;return proto.mediapipe.LabelMapItem.deserializeBinaryFromReader(i,g)},proto.mediapipe.LabelMapItem.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var i=g.readString();d.setName(i);break;case 2:i=g.readString(),d.setDisplayName(i);break;case 3:i=g.readString(),d.addChildName(i);break;default:g.skipField()}return d},proto.mediapipe.LabelMapItem.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.LabelMapItem.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.LabelMapItem.serializeBinaryToWriter=function(d,g){var i=void 0;(i=n.Message.getField(d,1))!=null&&g.writeString(1,i),(i=n.Message.getField(d,2))!=null&&g.writeString(2,i),(i=d.getChildNameList()).length>0&&g.writeRepeatedString(3,i)},proto.mediapipe.LabelMapItem.prototype.getName=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.LabelMapItem.prototype.setName=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.LabelMapItem.prototype.clearName=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.LabelMapItem.prototype.hasName=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.LabelMapItem.prototype.getDisplayName=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.LabelMapItem.prototype.setDisplayName=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.LabelMapItem.prototype.clearDisplayName=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.LabelMapItem.prototype.hasDisplayName=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.LabelMapItem.prototype.getChildNameList=function(){return n.Message.getRepeatedField(this,3)},proto.mediapipe.LabelMapItem.prototype.setChildNameList=function(d){return n.Message.setField(this,3,d||[])},proto.mediapipe.LabelMapItem.prototype.addChildName=function(d,g){return n.Message.addToRepeatedField(this,3,d,g)},proto.mediapipe.LabelMapItem.prototype.clearChildNameList=function(){return this.setChildNameList([])},A.object.extend(u,proto.mediapipe)})(label_map_pb),function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_options_pb;A.object.extend(proto,d);var g=segmenter_options_pb;A.object.extend(proto,g);var i=label_map_pb;A.object.extend(proto,i),A.exportSymbol("proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions",null,C),proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions=function(_){n.Message.initialize(this,_,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.displayName="proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.toObject=function(_){return proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject(_,this)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject=function(_,j){var $,re={segmenterOptions:($=j.getSegmenterOptions())&&g.SegmenterOptions.toObject(_,$),labelItemsMap:($=j.getLabelItemsMap())?$.toObject(_,proto.mediapipe.LabelMapItem.toObject):[]};return _&&(re.$jspbMessageInstance=j),re}),proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinary=function(_){var j=new n.BinaryReader(_),$=new proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions;return proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader($,j)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader=function(_,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var $=new g.SegmenterOptions;j.readMessage($,g.SegmenterOptions.deserializeBinaryFromReader),_.setSegmenterOptions($);break;case 2:$=_.getLabelItemsMap(),j.readMessage($,function(re,Q){n.Map.deserializeBinary(re,Q,n.BinaryReader.prototype.readInt64,n.BinaryReader.prototype.readMessage,proto.mediapipe.LabelMapItem.deserializeBinaryFromReader,0,new proto.mediapipe.LabelMapItem)});break;default:j.skipField()}return _},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.serializeBinary=function(){var _=new n.BinaryWriter;return proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter(this,_),_.getResultBuffer()},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter=function(_,j){var $=void 0;($=_.getSegmenterOptions())!=null&&j.writeMessage(1,$,g.SegmenterOptions.serializeBinaryToWriter),($=_.getLabelItemsMap(!0))&&$.getLength()>0&&$.serializeBinary(2,j,n.BinaryWriter.prototype.writeInt64,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.LabelMapItem.serializeBinaryToWriter)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext=new n.ExtensionFieldInfo(458105876,{ext:0},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject,0),d.CalculatorOptions.extensionsBinary[458105876]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader,!1),d.CalculatorOptions.extensions[458105876]=proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.getSegmenterOptions=function(){return n.Message.getWrapperField(this,g.SegmenterOptions,1)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.setSegmenterOptions=function(_){return n.Message.setWrapperField(this,1,_)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.clearSegmenterOptions=function(){return this.setSegmenterOptions(void 0)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.hasSegmenterOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.getLabelItemsMap=function(_){return n.Message.getMapField(this,2,_,proto.mediapipe.LabelMapItem)},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.prototype.clearLabelItemsMap=function(){return this.getLabelItemsMap().clear(),this},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext=new n.ExtensionFieldInfo(458105876,{ext:0},proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.toObject,0),d.CalculatorOptions.extensionsBinary[458105876]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.deserializeBinaryFromReader,!1),d.CalculatorOptions.extensions[458105876]=proto.mediapipe.tasks.TensorsToSegmentationCalculatorOptions.ext,A.object.extend(u,proto.mediapipe.tasks)}(tensors_to_segmentation_calculator_pb);var image_segmenter_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var g=calculator_options_pb;A.object.extend(proto,g);var i=base_options_pb;A.object.extend(proto,i);var _=segmenter_options_pb;A.object.extend(proto,_),A.exportSymbol("proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions",null,C),proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions=function(j){n.Message.initialize(this,j,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.displayName="proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.toObject=function(j){return proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject(j,this)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject=function(j,$){var re,Q={baseOptions:(re=$.getBaseOptions())&&i.BaseOptions.toObject(j,re),displayNamesLocale:n.Message.getFieldWithDefault($,2,"en"),segmenterOptions:(re=$.getSegmenterOptions())&&_.SegmenterOptions.toObject(j,re)};return j&&(Q.$jspbMessageInstance=$),Q}),proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinary=function(j){var $=new n.BinaryReader(j),re=new proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions;return proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader(re,$)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader=function(j,$){for(;$.nextField()&&!$.isEndGroup();)switch($.getFieldNumber()){case 1:var re=new i.BaseOptions;$.readMessage(re,i.BaseOptions.deserializeBinaryFromReader),j.setBaseOptions(re);break;case 2:re=$.readString(),j.setDisplayNamesLocale(re);break;case 3:re=new _.SegmenterOptions,$.readMessage(re,_.SegmenterOptions.deserializeBinaryFromReader),j.setSegmenterOptions(re);break;default:$.skipField()}return j},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.serializeBinary=function(){var j=new n.BinaryWriter;return proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter(this,j),j.getResultBuffer()},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter=function(j,$){var re=void 0;(re=j.getBaseOptions())!=null&&$.writeMessage(1,re,i.BaseOptions.serializeBinaryToWriter),(re=n.Message.getField(j,2))!=null&&$.writeString(2,re),(re=j.getSegmenterOptions())!=null&&$.writeMessage(3,re,_.SegmenterOptions.serializeBinaryToWriter)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext=new n.ExtensionFieldInfo(458105758,{ext:0},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[458105758]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[458105758]=proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.setBaseOptions=function(j){return n.Message.setWrapperField(this,1,j)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.getDisplayNamesLocale=function(){return n.Message.getFieldWithDefault(this,2,"en")},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.setDisplayNamesLocale=function(j){return n.Message.setField(this,2,j)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.clearDisplayNamesLocale=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.hasDisplayNamesLocale=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.getSegmenterOptions=function(){return n.Message.getWrapperField(this,_.SegmenterOptions,3)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.setSegmenterOptions=function(j){return n.Message.setWrapperField(this,3,j)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.clearSegmenterOptions=function(){return this.setSegmenterOptions(void 0)},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.prototype.hasSegmenterOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext=new n.ExtensionFieldInfo(458105758,{ext:0},proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[458105758]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[458105758]=proto.mediapipe.tasks.vision.image_segmenter.proto.ImageSegmenterGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.image_segmenter.proto)})(image_segmenter_graph_options_pb);var image_segmenter_result={};Object.defineProperty(image_segmenter_result,"__esModule",{value:!0}),image_segmenter_result.ImageSegmenterResult=void 0;class ImageSegmenterResult{constructor(n,A,C){this.confidenceMasks=n,this.categoryMask=A,this.qualityScores=C}close(){var n,A;(n=this.confidenceMasks)===null||n===void 0||n.forEach(C=>{C.close()}),(A=this.categoryMask)===null||A===void 0||A.close()}}image_segmenter_result.ImageSegmenterResult=ImageSegmenterResult;var image_segmenter_options={};Object.defineProperty(image_segmenter_options,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(rt,gt,at,ut){ut===void 0&&(ut=at);var ot=Object.getOwnPropertyDescriptor(gt,at);ot&&!("get"in ot?!gt.__esModule:ot.writable||ot.configurable)||(ot={enumerable:!0,get:function(){return gt[at]}}),Object.defineProperty(rt,ut,ot)}:function(rt,gt,at,ut){ut===void 0&&(ut=at),rt[ut]=gt[at]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(rt,gt){for(var at in rt)at==="default"||Object.prototype.hasOwnProperty.call(gt,at)||n(gt,rt,at)};Object.defineProperty(u,"__esModule",{value:!0}),u.ImageSegmenter=void 0;const C=calculator_pb,d=calculator_options_pb,g=base_options_pb,i=tensors_to_segmentation_calculator_pb,_=image_segmenter_graph_options_pb,j=segmenter_options_pb,$=vision_task_runner,re=image_segmenter_result;A(image_segmenter_options,u),A(image_segmenter_result,u);const Q="image_in",ae="norm_rect",pe="confidence_masks",st="category_mask",Pe="quality_scores",Oe="mediapipe.tasks.TensorsToSegmentationCalculator";class Ze extends $.VisionTaskRunner{static createFromOptions(gt,at){return $.VisionTaskRunner.createVisionInstance(Ze,gt,at)}static createFromModelBuffer(gt,at){return $.VisionTaskRunner.createVisionInstance(Ze,gt,{baseOptions:{modelAssetBuffer:at}})}static createFromModelPath(gt,at){return $.VisionTaskRunner.createVisionInstance(Ze,gt,{baseOptions:{modelAssetPath:at}})}constructor(gt,at){super(new $.VisionGraphRunner(gt,at),Q,ae,!1),this.labels=[],this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.options=new _.ImageSegmenterGraphOptions,this.segmenterOptions=new j.SegmenterOptions,this.options.setSegmenterOptions(this.segmenterOptions),this.options.setBaseOptions(new g.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(gt){this.options.setBaseOptions(gt)}setOptions(gt){var at,ut;return gt.displayNamesLocale!==void 0?this.options.setDisplayNamesLocale(gt.displayNamesLocale):"displayNamesLocale"in gt&&this.options.clearDisplayNamesLocale(),"outputCategoryMask"in gt&&(this.outputCategoryMask=(at=gt.outputCategoryMask)!==null&&at!==void 0&&at),"outputConfidenceMasks"in gt&&(this.outputConfidenceMasks=(ut=gt.outputConfidenceMasks)===null||ut===void 0||ut),super.applyOptions(gt)}onGraphRefreshed(){this.populateLabels()}populateLabels(){var gt,at,ut;const ot=this.getCalculatorGraphConfig().getNodeList().filter(Rt=>Rt.getName().includes(Oe));if(this.labels=[],ot.length>1)throw new Error(`The graph has more than one ${Oe}.`);ot.length===1&&((ut=(at=(gt=ot[0].getOptions())===null||gt===void 0?void 0:gt.getExtension(i.TensorsToSegmentationCalculatorOptions.ext))===null||at===void 0?void 0:at.getLabelItemsMap())!==null&&ut!==void 0?ut:new Map).forEach((Rt,Mt)=>{this.labels[Number(Mt)]=Rt.getName()})}segment(gt,at,ut){const ot=typeof at!="function"?at:{};return this.userCallback=typeof at=="function"?at:ut,this.reset(),this.processImageData(gt,ot),this.processResults()}segmentForVideo(gt,at,ut,ot){const Rt=typeof ut!="function"?ut:{};return this.userCallback=typeof ut=="function"?ut:ot,this.reset(),this.processVideoData(gt,Rt,at),this.processResults()}getLabels(){return this.labels}reset(){this.categoryMask=void 0,this.confidenceMasks=void 0,this.qualityScores=void 0}processResults(){try{const gt=new re.ImageSegmenterResult(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.userCallback)return gt;this.userCallback(gt)}finally{this.freeKeepaliveStreams()}}refreshGraph(){const gt=new C.CalculatorGraphConfig;gt.addInputStream(Q),gt.addInputStream(ae);const at=new d.CalculatorOptions;at.setExtension(_.ImageSegmenterGraphOptions.ext,this.options);const ut=new C.CalculatorGraphConfig.Node;ut.setCalculator("mediapipe.tasks.vision.image_segmenter.ImageSegmenterGraph"),ut.addInputStream("IMAGE:"+Q),ut.addInputStream("NORM_RECT:"+ae),ut.setOptions(at),gt.addNode(ut),this.addKeepaliveNode(gt),this.outputConfidenceMasks&&(gt.addOutputStream(pe),ut.addOutputStream("CONFIDENCE_MASKS:"+pe),this.keepStreamAlive(pe),this.graphRunner.attachImageVectorListener(pe,(Rt,Mt)=>{this.confidenceMasks=Rt.map(Pt=>this.convertToMPMask(Pt,!this.userCallback)),this.setLatestOutputTimestamp(Mt)}),this.graphRunner.attachEmptyPacketListener(pe,Rt=>{this.confidenceMasks=[],this.setLatestOutputTimestamp(Rt)})),this.outputCategoryMask&&(gt.addOutputStream(st),ut.addOutputStream("CATEGORY_MASK:"+st),this.keepStreamAlive(st),this.graphRunner.attachImageListener(st,(Rt,Mt)=>{this.categoryMask=this.convertToMPMask(Rt,!this.userCallback),this.setLatestOutputTimestamp(Mt)}),this.graphRunner.attachEmptyPacketListener(st,Rt=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(Rt)})),gt.addOutputStream(Pe),ut.addOutputStream("QUALITY_SCORES:"+Pe),this.graphRunner.attachFloatVectorListener(Pe,(Rt,Mt)=>{this.qualityScores=Rt,this.setLatestOutputTimestamp(Mt)}),this.graphRunner.attachEmptyPacketListener(Pe,Rt=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(Rt)});const ot=gt.serializeBinary();this.setGraph(new Uint8Array(ot),!0)}}u.ImageSegmenter=Ze}(image_segmenter);var interactive_segmenter={},color_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")();A.exportSymbol("proto.mediapipe.Color",null,C),A.exportSymbol("proto.mediapipe.ColorMap",null,C),proto.mediapipe.Color=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.Color,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.Color.displayName="proto.mediapipe.Color"),proto.mediapipe.ColorMap=function(d){n.Message.initialize(this,d,0,-1,null,null)},A.inherits(proto.mediapipe.ColorMap,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.ColorMap.displayName="proto.mediapipe.ColorMap"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.Color.prototype.toObject=function(d){return proto.mediapipe.Color.toObject(d,this)},proto.mediapipe.Color.toObject=function(d,g){var i,_={r:(i=n.Message.getField(g,1))==null?void 0:i,g:(i=n.Message.getField(g,2))==null?void 0:i,b:(i=n.Message.getField(g,3))==null?void 0:i};return d&&(_.$jspbMessageInstance=g),_}),proto.mediapipe.Color.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.Color;return proto.mediapipe.Color.deserializeBinaryFromReader(i,g)},proto.mediapipe.Color.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)switch(g.getFieldNumber()){case 1:var i=g.readInt32();d.setR(i);break;case 2:i=g.readInt32(),d.setG(i);break;case 3:i=g.readInt32(),d.setB(i);break;default:g.skipField()}return d},proto.mediapipe.Color.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.Color.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.Color.serializeBinaryToWriter=function(d,g){var i=void 0;(i=n.Message.getField(d,1))!=null&&g.writeInt32(1,i),(i=n.Message.getField(d,2))!=null&&g.writeInt32(2,i),(i=n.Message.getField(d,3))!=null&&g.writeInt32(3,i)},proto.mediapipe.Color.prototype.getR=function(){return n.Message.getFieldWithDefault(this,1,0)},proto.mediapipe.Color.prototype.setR=function(d){return n.Message.setField(this,1,d)},proto.mediapipe.Color.prototype.clearR=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.Color.prototype.hasR=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.Color.prototype.getG=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.Color.prototype.setG=function(d){return n.Message.setField(this,2,d)},proto.mediapipe.Color.prototype.clearG=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.Color.prototype.hasG=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.Color.prototype.getB=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.Color.prototype.setB=function(d){return n.Message.setField(this,3,d)},proto.mediapipe.Color.prototype.clearB=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.Color.prototype.hasB=function(){return n.Message.getField(this,3)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.ColorMap.prototype.toObject=function(d){return proto.mediapipe.ColorMap.toObject(d,this)},proto.mediapipe.ColorMap.toObject=function(d,g){var i,_={labelToColorMap:(i=g.getLabelToColorMap())?i.toObject(d,proto.mediapipe.Color.toObject):[]};return d&&(_.$jspbMessageInstance=g),_}),proto.mediapipe.ColorMap.deserializeBinary=function(d){var g=new n.BinaryReader(d),i=new proto.mediapipe.ColorMap;return proto.mediapipe.ColorMap.deserializeBinaryFromReader(i,g)},proto.mediapipe.ColorMap.deserializeBinaryFromReader=function(d,g){for(;g.nextField()&&!g.isEndGroup();)if(g.getFieldNumber()===1){var i=d.getLabelToColorMap();g.readMessage(i,function(_,j){n.Map.deserializeBinary(_,j,n.BinaryReader.prototype.readString,n.BinaryReader.prototype.readMessage,proto.mediapipe.Color.deserializeBinaryFromReader,"",new proto.mediapipe.Color)})}else g.skipField();return d},proto.mediapipe.ColorMap.prototype.serializeBinary=function(){var d=new n.BinaryWriter;return proto.mediapipe.ColorMap.serializeBinaryToWriter(this,d),d.getResultBuffer()},proto.mediapipe.ColorMap.serializeBinaryToWriter=function(d,g){var i=void 0;(i=d.getLabelToColorMap(!0))&&i.getLength()>0&&i.serializeBinary(1,g,n.BinaryWriter.prototype.writeString,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.Color.serializeBinaryToWriter)},proto.mediapipe.ColorMap.prototype.getLabelToColorMap=function(d){return n.Message.getMapField(this,1,d,proto.mediapipe.Color)},proto.mediapipe.ColorMap.prototype.clearLabelToColorMap=function(){return this.getLabelToColorMap().clear(),this},A.object.extend(u,proto.mediapipe)})(color_pb);var render_data_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=color_pb;A.object.extend(proto,d),A.exportSymbol("proto.mediapipe.RenderAnnotation",null,C),A.exportSymbol("proto.mediapipe.RenderAnnotation.Arrow",null,C),A.exportSymbol("proto.mediapipe.RenderAnnotation.DataCase",null,C),A.exportSymbol("proto.mediapipe.RenderAnnotation.FilledOval",null,C),A.exportSymbol("proto.mediapipe.RenderAnnotation.FilledRectangle",null,C),A.exportSymbol("proto.mediapipe.RenderAnnotation.FilledRoundedRectangle",null,C),A.exportSymbol("proto.mediapipe.RenderAnnotation.GradientLine",null,C),A.exportSymbol("proto.mediapipe.RenderAnnotation.Line",null,C),A.exportSymbol("proto.mediapipe.RenderAnnotation.Line.LineType",null,C),A.exportSymbol("proto.mediapipe.RenderAnnotation.Oval",null,C),A.exportSymbol("proto.mediapipe.RenderAnnotation.Point",null,C),A.exportSymbol("proto.mediapipe.RenderAnnotation.Rectangle",null,C),A.exportSymbol("proto.mediapipe.RenderAnnotation.RoundedRectangle",null,C),A.exportSymbol("proto.mediapipe.RenderAnnotation.Scribble",null,C),A.exportSymbol("proto.mediapipe.RenderAnnotation.Text",null,C),A.exportSymbol("proto.mediapipe.RenderData",null,C),A.exportSymbol("proto.mediapipe.RenderViewport",null,C),proto.mediapipe.RenderData=function(g){n.Message.initialize(this,g,0,-1,proto.mediapipe.RenderData.repeatedFields_,null)},A.inherits(proto.mediapipe.RenderData,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderData.displayName="proto.mediapipe.RenderData"),proto.mediapipe.RenderAnnotation=function(g){n.Message.initialize(this,g,0,-1,null,proto.mediapipe.RenderAnnotation.oneofGroups_)},A.inherits(proto.mediapipe.RenderAnnotation,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.displayName="proto.mediapipe.RenderAnnotation"),proto.mediapipe.RenderAnnotation.Rectangle=function(g){n.Message.initialize(this,g,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.Rectangle,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Rectangle.displayName="proto.mediapipe.RenderAnnotation.Rectangle"),proto.mediapipe.RenderAnnotation.FilledRectangle=function(g){n.Message.initialize(this,g,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.FilledRectangle,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.FilledRectangle.displayName="proto.mediapipe.RenderAnnotation.FilledRectangle"),proto.mediapipe.RenderAnnotation.RoundedRectangle=function(g){n.Message.initialize(this,g,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.RoundedRectangle,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.RoundedRectangle.displayName="proto.mediapipe.RenderAnnotation.RoundedRectangle"),proto.mediapipe.RenderAnnotation.FilledRoundedRectangle=function(g){n.Message.initialize(this,g,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.FilledRoundedRectangle,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.displayName="proto.mediapipe.RenderAnnotation.FilledRoundedRectangle"),proto.mediapipe.RenderAnnotation.Oval=function(g){n.Message.initialize(this,g,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.Oval,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Oval.displayName="proto.mediapipe.RenderAnnotation.Oval"),proto.mediapipe.RenderAnnotation.FilledOval=function(g){n.Message.initialize(this,g,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.FilledOval,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.FilledOval.displayName="proto.mediapipe.RenderAnnotation.FilledOval"),proto.mediapipe.RenderAnnotation.Point=function(g){n.Message.initialize(this,g,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.Point,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Point.displayName="proto.mediapipe.RenderAnnotation.Point"),proto.mediapipe.RenderAnnotation.Line=function(g){n.Message.initialize(this,g,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.Line,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Line.displayName="proto.mediapipe.RenderAnnotation.Line"),proto.mediapipe.RenderAnnotation.GradientLine=function(g){n.Message.initialize(this,g,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.GradientLine,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.GradientLine.displayName="proto.mediapipe.RenderAnnotation.GradientLine"),proto.mediapipe.RenderAnnotation.Scribble=function(g){n.Message.initialize(this,g,0,-1,proto.mediapipe.RenderAnnotation.Scribble.repeatedFields_,null)},A.inherits(proto.mediapipe.RenderAnnotation.Scribble,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Scribble.displayName="proto.mediapipe.RenderAnnotation.Scribble"),proto.mediapipe.RenderAnnotation.Arrow=function(g){n.Message.initialize(this,g,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.Arrow,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Arrow.displayName="proto.mediapipe.RenderAnnotation.Arrow"),proto.mediapipe.RenderAnnotation.Text=function(g){n.Message.initialize(this,g,0,-1,null,null)},A.inherits(proto.mediapipe.RenderAnnotation.Text,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderAnnotation.Text.displayName="proto.mediapipe.RenderAnnotation.Text"),proto.mediapipe.RenderViewport=function(g){n.Message.initialize(this,g,0,-1,null,null)},A.inherits(proto.mediapipe.RenderViewport,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.RenderViewport.displayName="proto.mediapipe.RenderViewport"),proto.mediapipe.RenderData.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderData.prototype.toObject=function(g){return proto.mediapipe.RenderData.toObject(g,this)},proto.mediapipe.RenderData.toObject=function(g,i){var _,j={renderAnnotationsList:n.Message.toObjectList(i.getRenderAnnotationsList(),proto.mediapipe.RenderAnnotation.toObject,g),sceneClass:(_=n.Message.getField(i,2))==null?void 0:_,sceneViewport:(_=i.getSceneViewport())&&proto.mediapipe.RenderViewport.toObject(g,_)};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.RenderData.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.RenderData;return proto.mediapipe.RenderData.deserializeBinaryFromReader(_,i)},proto.mediapipe.RenderData.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=new proto.mediapipe.RenderAnnotation;i.readMessage(_,proto.mediapipe.RenderAnnotation.deserializeBinaryFromReader),g.addRenderAnnotations(_);break;case 2:_=i.readString(),g.setSceneClass(_);break;case 3:_=new proto.mediapipe.RenderViewport,i.readMessage(_,proto.mediapipe.RenderViewport.deserializeBinaryFromReader),g.setSceneViewport(_);break;default:i.skipField()}return g},proto.mediapipe.RenderData.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.RenderData.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.RenderData.serializeBinaryToWriter=function(g,i){var _=void 0;(_=g.getRenderAnnotationsList()).length>0&&i.writeRepeatedMessage(1,_,proto.mediapipe.RenderAnnotation.serializeBinaryToWriter),(_=n.Message.getField(g,2))!=null&&i.writeString(2,_),(_=g.getSceneViewport())!=null&&i.writeMessage(3,_,proto.mediapipe.RenderViewport.serializeBinaryToWriter)},proto.mediapipe.RenderData.prototype.getRenderAnnotationsList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.RenderAnnotation,1)},proto.mediapipe.RenderData.prototype.setRenderAnnotationsList=function(g){return n.Message.setRepeatedWrapperField(this,1,g)},proto.mediapipe.RenderData.prototype.addRenderAnnotations=function(g,i){return n.Message.addToRepeatedWrapperField(this,1,g,proto.mediapipe.RenderAnnotation,i)},proto.mediapipe.RenderData.prototype.clearRenderAnnotationsList=function(){return this.setRenderAnnotationsList([])},proto.mediapipe.RenderData.prototype.getSceneClass=function(){return n.Message.getFieldWithDefault(this,2,"")},proto.mediapipe.RenderData.prototype.setSceneClass=function(g){return n.Message.setField(this,2,g)},proto.mediapipe.RenderData.prototype.clearSceneClass=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderData.prototype.hasSceneClass=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderData.prototype.getSceneViewport=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderViewport,3)},proto.mediapipe.RenderData.prototype.setSceneViewport=function(g){return n.Message.setWrapperField(this,3,g)},proto.mediapipe.RenderData.prototype.clearSceneViewport=function(){return this.setSceneViewport(void 0)},proto.mediapipe.RenderData.prototype.hasSceneViewport=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.oneofGroups_=[[1,2,3,4,5,6,7,8,9,10,14,15]],proto.mediapipe.RenderAnnotation.DataCase={DATA_NOT_SET:0,RECTANGLE:1,FILLED_RECTANGLE:2,OVAL:3,FILLED_OVAL:4,POINT:5,LINE:6,ARROW:7,TEXT:8,ROUNDED_RECTANGLE:9,FILLED_ROUNDED_RECTANGLE:10,GRADIENT_LINE:14,SCRIBBLE:15},proto.mediapipe.RenderAnnotation.prototype.getDataCase=function(){return n.Message.computeOneofCase(this,proto.mediapipe.RenderAnnotation.oneofGroups_[0])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.prototype.toObject=function(g){return proto.mediapipe.RenderAnnotation.toObject(g,this)},proto.mediapipe.RenderAnnotation.toObject=function(g,i){var _,j={rectangle:(_=i.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(g,_),filledRectangle:(_=i.getFilledRectangle())&&proto.mediapipe.RenderAnnotation.FilledRectangle.toObject(g,_),oval:(_=i.getOval())&&proto.mediapipe.RenderAnnotation.Oval.toObject(g,_),filledOval:(_=i.getFilledOval())&&proto.mediapipe.RenderAnnotation.FilledOval.toObject(g,_),point:(_=i.getPoint())&&proto.mediapipe.RenderAnnotation.Point.toObject(g,_),line:(_=i.getLine())&&proto.mediapipe.RenderAnnotation.Line.toObject(g,_),arrow:(_=i.getArrow())&&proto.mediapipe.RenderAnnotation.Arrow.toObject(g,_),text:(_=i.getText())&&proto.mediapipe.RenderAnnotation.Text.toObject(g,_),roundedRectangle:(_=i.getRoundedRectangle())&&proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject(g,_),filledRoundedRectangle:(_=i.getFilledRoundedRectangle())&&proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.toObject(g,_),gradientLine:(_=i.getGradientLine())&&proto.mediapipe.RenderAnnotation.GradientLine.toObject(g,_),scribble:(_=i.getScribble())&&proto.mediapipe.RenderAnnotation.Scribble.toObject(g,_),thickness:n.Message.getFloatingPointFieldWithDefault(i,11,1),color:(_=i.getColor())&&d.Color.toObject(g,_),sceneTag:(_=n.Message.getField(i,13))==null?void 0:_};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.RenderAnnotation.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.RenderAnnotation;return proto.mediapipe.RenderAnnotation.deserializeBinaryFromReader(_,i)},proto.mediapipe.RenderAnnotation.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=new proto.mediapipe.RenderAnnotation.Rectangle;i.readMessage(_,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),g.setRectangle(_);break;case 2:_=new proto.mediapipe.RenderAnnotation.FilledRectangle,i.readMessage(_,proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinaryFromReader),g.setFilledRectangle(_);break;case 3:_=new proto.mediapipe.RenderAnnotation.Oval,i.readMessage(_,proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader),g.setOval(_);break;case 4:_=new proto.mediapipe.RenderAnnotation.FilledOval,i.readMessage(_,proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinaryFromReader),g.setFilledOval(_);break;case 5:_=new proto.mediapipe.RenderAnnotation.Point,i.readMessage(_,proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader),g.setPoint(_);break;case 6:_=new proto.mediapipe.RenderAnnotation.Line,i.readMessage(_,proto.mediapipe.RenderAnnotation.Line.deserializeBinaryFromReader),g.setLine(_);break;case 7:_=new proto.mediapipe.RenderAnnotation.Arrow,i.readMessage(_,proto.mediapipe.RenderAnnotation.Arrow.deserializeBinaryFromReader),g.setArrow(_);break;case 8:_=new proto.mediapipe.RenderAnnotation.Text,i.readMessage(_,proto.mediapipe.RenderAnnotation.Text.deserializeBinaryFromReader),g.setText(_);break;case 9:_=new proto.mediapipe.RenderAnnotation.RoundedRectangle,i.readMessage(_,proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader),g.setRoundedRectangle(_);break;case 10:_=new proto.mediapipe.RenderAnnotation.FilledRoundedRectangle,i.readMessage(_,proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinaryFromReader),g.setFilledRoundedRectangle(_);break;case 14:_=new proto.mediapipe.RenderAnnotation.GradientLine,i.readMessage(_,proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinaryFromReader),g.setGradientLine(_);break;case 15:_=new proto.mediapipe.RenderAnnotation.Scribble,i.readMessage(_,proto.mediapipe.RenderAnnotation.Scribble.deserializeBinaryFromReader),g.setScribble(_);break;case 11:_=i.readDouble(),g.setThickness(_);break;case 12:_=new d.Color,i.readMessage(_,d.Color.deserializeBinaryFromReader),g.setColor(_);break;case 13:_=i.readString(),g.setSceneTag(_);break;default:i.skipField()}return g},proto.mediapipe.RenderAnnotation.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.RenderAnnotation.serializeBinaryToWriter=function(g,i){var _=void 0;(_=g.getRectangle())!=null&&i.writeMessage(1,_,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter),(_=g.getFilledRectangle())!=null&&i.writeMessage(2,_,proto.mediapipe.RenderAnnotation.FilledRectangle.serializeBinaryToWriter),(_=g.getOval())!=null&&i.writeMessage(3,_,proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter),(_=g.getFilledOval())!=null&&i.writeMessage(4,_,proto.mediapipe.RenderAnnotation.FilledOval.serializeBinaryToWriter),(_=g.getPoint())!=null&&i.writeMessage(5,_,proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter),(_=g.getLine())!=null&&i.writeMessage(6,_,proto.mediapipe.RenderAnnotation.Line.serializeBinaryToWriter),(_=g.getArrow())!=null&&i.writeMessage(7,_,proto.mediapipe.RenderAnnotation.Arrow.serializeBinaryToWriter),(_=g.getText())!=null&&i.writeMessage(8,_,proto.mediapipe.RenderAnnotation.Text.serializeBinaryToWriter),(_=g.getRoundedRectangle())!=null&&i.writeMessage(9,_,proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter),(_=g.getFilledRoundedRectangle())!=null&&i.writeMessage(10,_,proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.serializeBinaryToWriter),(_=g.getGradientLine())!=null&&i.writeMessage(14,_,proto.mediapipe.RenderAnnotation.GradientLine.serializeBinaryToWriter),(_=g.getScribble())!=null&&i.writeMessage(15,_,proto.mediapipe.RenderAnnotation.Scribble.serializeBinaryToWriter),(_=n.Message.getField(g,11))!=null&&i.writeDouble(11,_),(_=g.getColor())!=null&&i.writeMessage(12,_,d.Color.serializeBinaryToWriter),(_=n.Message.getField(g,13))!=null&&i.writeString(13,_)},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Rectangle.prototype.toObject=function(g){return proto.mediapipe.RenderAnnotation.Rectangle.toObject(g,this)},proto.mediapipe.RenderAnnotation.Rectangle.toObject=function(g,i){var _,j={left:(_=n.Message.getOptionalFloatingPointField(i,1))==null?void 0:_,top:(_=n.Message.getOptionalFloatingPointField(i,2))==null?void 0:_,right:(_=n.Message.getOptionalFloatingPointField(i,3))==null?void 0:_,bottom:(_=n.Message.getOptionalFloatingPointField(i,4))==null?void 0:_,normalized:n.Message.getBooleanFieldWithDefault(i,5,!1),rotation:(_=n.Message.getOptionalFloatingPointField(i,6))==null?void 0:_,topLeftThickness:(_=n.Message.getOptionalFloatingPointField(i,7))==null?void 0:_};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.RenderAnnotation.Rectangle;return proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader(_,i)},proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=i.readDouble();g.setLeft(_);break;case 2:_=i.readDouble(),g.setTop(_);break;case 3:_=i.readDouble(),g.setRight(_);break;case 4:_=i.readDouble(),g.setBottom(_);break;case 5:_=i.readBool(),g.setNormalized(_);break;case 6:_=i.readDouble(),g.setRotation(_);break;case 7:_=i.readDouble(),g.setTopLeftThickness(_);break;default:i.skipField()}return g},proto.mediapipe.RenderAnnotation.Rectangle.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter=function(g,i){var _=void 0;(_=n.Message.getField(g,1))!=null&&i.writeDouble(1,_),(_=n.Message.getField(g,2))!=null&&i.writeDouble(2,_),(_=n.Message.getField(g,3))!=null&&i.writeDouble(3,_),(_=n.Message.getField(g,4))!=null&&i.writeDouble(4,_),(_=n.Message.getField(g,5))!=null&&i.writeBool(5,_),(_=n.Message.getField(g,6))!=null&&i.writeDouble(6,_),(_=n.Message.getField(g,7))!=null&&i.writeDouble(7,_)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getLeft=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setLeft=function(g){return n.Message.setField(this,1,g)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearLeft=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasLeft=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getTop=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setTop=function(g){return n.Message.setField(this,2,g)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearTop=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasTop=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getRight=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setRight=function(g){return n.Message.setField(this,3,g)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearRight=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasRight=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getBottom=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setBottom=function(g){return n.Message.setField(this,4,g)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearBottom=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasBottom=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getNormalized=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setNormalized=function(g){return n.Message.setField(this,5,g)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearNormalized=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasNormalized=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getRotation=function(){return n.Message.getFloatingPointFieldWithDefault(this,6,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setRotation=function(g){return n.Message.setField(this,6,g)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearRotation=function(){return n.Message.setField(this,6,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasRotation=function(){return n.Message.getField(this,6)!=null},proto.mediapipe.RenderAnnotation.Rectangle.prototype.getTopLeftThickness=function(){return n.Message.getFloatingPointFieldWithDefault(this,7,0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.setTopLeftThickness=function(g){return n.Message.setField(this,7,g)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.clearTopLeftThickness=function(){return n.Message.setField(this,7,void 0)},proto.mediapipe.RenderAnnotation.Rectangle.prototype.hasTopLeftThickness=function(){return n.Message.getField(this,7)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.toObject=function(g){return proto.mediapipe.RenderAnnotation.FilledRectangle.toObject(g,this)},proto.mediapipe.RenderAnnotation.FilledRectangle.toObject=function(g,i){var _,j={rectangle:(_=i.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(g,_),fillColor:(_=i.getFillColor())&&d.Color.toObject(g,_)};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.RenderAnnotation.FilledRectangle;return proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinaryFromReader(_,i)},proto.mediapipe.RenderAnnotation.FilledRectangle.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=new proto.mediapipe.RenderAnnotation.Rectangle;i.readMessage(_,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),g.setRectangle(_);break;case 2:_=new d.Color,i.readMessage(_,d.Color.deserializeBinaryFromReader),g.setFillColor(_);break;default:i.skipField()}return g},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.FilledRectangle.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.RenderAnnotation.FilledRectangle.serializeBinaryToWriter=function(g,i){var _=void 0;(_=g.getRectangle())!=null&&i.writeMessage(1,_,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter),(_=g.getFillColor())!=null&&i.writeMessage(2,_,d.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.getRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.setRectangle=function(g){return n.Message.setWrapperField(this,1,g)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.hasRectangle=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.getFillColor=function(){return n.Message.getWrapperField(this,d.Color,2)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.setFillColor=function(g){return n.Message.setWrapperField(this,2,g)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.clearFillColor=function(){return this.setFillColor(void 0)},proto.mediapipe.RenderAnnotation.FilledRectangle.prototype.hasFillColor=function(){return n.Message.getField(this,2)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.toObject=function(g){return proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject(g,this)},proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject=function(g,i){var _,j={rectangle:(_=i.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(g,_),cornerRadius:n.Message.getFieldWithDefault(i,2,0),lineType:n.Message.getFieldWithDefault(i,3,4)};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.RenderAnnotation.RoundedRectangle;return proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader(_,i)},proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=new proto.mediapipe.RenderAnnotation.Rectangle;i.readMessage(_,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),g.setRectangle(_);break;case 2:_=i.readInt32(),g.setCornerRadius(_);break;case 3:_=i.readInt32(),g.setLineType(_);break;default:i.skipField()}return g},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter=function(g,i){var _=void 0;(_=g.getRectangle())!=null&&i.writeMessage(1,_,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter),(_=n.Message.getField(g,2))!=null&&i.writeInt32(2,_),(_=n.Message.getField(g,3))!=null&&i.writeInt32(3,_)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.getRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.setRectangle=function(g){return n.Message.setWrapperField(this,1,g)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.hasRectangle=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.getCornerRadius=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.setCornerRadius=function(g){return n.Message.setField(this,2,g)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.clearCornerRadius=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.hasCornerRadius=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.getLineType=function(){return n.Message.getFieldWithDefault(this,3,4)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.setLineType=function(g){return n.Message.setField(this,3,g)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.clearLineType=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.RoundedRectangle.prototype.hasLineType=function(){return n.Message.getField(this,3)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.toObject=function(g){return proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.toObject(g,this)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.toObject=function(g,i){var _,j={roundedRectangle:(_=i.getRoundedRectangle())&&proto.mediapipe.RenderAnnotation.RoundedRectangle.toObject(g,_),fillColor:(_=i.getFillColor())&&d.Color.toObject(g,_)};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.RenderAnnotation.FilledRoundedRectangle;return proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinaryFromReader(_,i)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=new proto.mediapipe.RenderAnnotation.RoundedRectangle;i.readMessage(_,proto.mediapipe.RenderAnnotation.RoundedRectangle.deserializeBinaryFromReader),g.setRoundedRectangle(_);break;case 2:_=new d.Color,i.readMessage(_,d.Color.deserializeBinaryFromReader),g.setFillColor(_);break;default:i.skipField()}return g},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.serializeBinaryToWriter=function(g,i){var _=void 0;(_=g.getRoundedRectangle())!=null&&i.writeMessage(1,_,proto.mediapipe.RenderAnnotation.RoundedRectangle.serializeBinaryToWriter),(_=g.getFillColor())!=null&&i.writeMessage(2,_,d.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.getRoundedRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.RoundedRectangle,1)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.setRoundedRectangle=function(g){return n.Message.setWrapperField(this,1,g)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.clearRoundedRectangle=function(){return this.setRoundedRectangle(void 0)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.hasRoundedRectangle=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.getFillColor=function(){return n.Message.getWrapperField(this,d.Color,2)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.setFillColor=function(g){return n.Message.setWrapperField(this,2,g)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.clearFillColor=function(){return this.setFillColor(void 0)},proto.mediapipe.RenderAnnotation.FilledRoundedRectangle.prototype.hasFillColor=function(){return n.Message.getField(this,2)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Oval.prototype.toObject=function(g){return proto.mediapipe.RenderAnnotation.Oval.toObject(g,this)},proto.mediapipe.RenderAnnotation.Oval.toObject=function(g,i){var _,j={rectangle:(_=i.getRectangle())&&proto.mediapipe.RenderAnnotation.Rectangle.toObject(g,_)};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.RenderAnnotation.Oval.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.RenderAnnotation.Oval;return proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader(_,i)},proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)if(i.getFieldNumber()===1){var _=new proto.mediapipe.RenderAnnotation.Rectangle;i.readMessage(_,proto.mediapipe.RenderAnnotation.Rectangle.deserializeBinaryFromReader),g.setRectangle(_)}else i.skipField();return g},proto.mediapipe.RenderAnnotation.Oval.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter=function(g,i){var _;(_=g.getRectangle())!=null&&i.writeMessage(1,_,proto.mediapipe.RenderAnnotation.Rectangle.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.Oval.prototype.getRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.Oval.prototype.setRectangle=function(g){return n.Message.setWrapperField(this,1,g)},proto.mediapipe.RenderAnnotation.Oval.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.Oval.prototype.hasRectangle=function(){return n.Message.getField(this,1)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.FilledOval.prototype.toObject=function(g){return proto.mediapipe.RenderAnnotation.FilledOval.toObject(g,this)},proto.mediapipe.RenderAnnotation.FilledOval.toObject=function(g,i){var _,j={oval:(_=i.getOval())&&proto.mediapipe.RenderAnnotation.Oval.toObject(g,_),fillColor:(_=i.getFillColor())&&d.Color.toObject(g,_)};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.RenderAnnotation.FilledOval;return proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinaryFromReader(_,i)},proto.mediapipe.RenderAnnotation.FilledOval.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=new proto.mediapipe.RenderAnnotation.Oval;i.readMessage(_,proto.mediapipe.RenderAnnotation.Oval.deserializeBinaryFromReader),g.setOval(_);break;case 2:_=new d.Color,i.readMessage(_,d.Color.deserializeBinaryFromReader),g.setFillColor(_);break;default:i.skipField()}return g},proto.mediapipe.RenderAnnotation.FilledOval.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.FilledOval.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.RenderAnnotation.FilledOval.serializeBinaryToWriter=function(g,i){var _=void 0;(_=g.getOval())!=null&&i.writeMessage(1,_,proto.mediapipe.RenderAnnotation.Oval.serializeBinaryToWriter),(_=g.getFillColor())!=null&&i.writeMessage(2,_,d.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.getOval=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Oval,1)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.setOval=function(g){return n.Message.setWrapperField(this,1,g)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.clearOval=function(){return this.setOval(void 0)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.hasOval=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.FilledOval.prototype.getFillColor=function(){return n.Message.getWrapperField(this,d.Color,2)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.setFillColor=function(g){return n.Message.setWrapperField(this,2,g)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.clearFillColor=function(){return this.setFillColor(void 0)},proto.mediapipe.RenderAnnotation.FilledOval.prototype.hasFillColor=function(){return n.Message.getField(this,2)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Point.prototype.toObject=function(g){return proto.mediapipe.RenderAnnotation.Point.toObject(g,this)},proto.mediapipe.RenderAnnotation.Point.toObject=function(g,i){var _,j={x:(_=n.Message.getOptionalFloatingPointField(i,1))==null?void 0:_,y:(_=n.Message.getOptionalFloatingPointField(i,2))==null?void 0:_,normalized:n.Message.getBooleanFieldWithDefault(i,3,!1)};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.RenderAnnotation.Point.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.RenderAnnotation.Point;return proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader(_,i)},proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=i.readDouble();g.setX(_);break;case 2:_=i.readDouble(),g.setY(_);break;case 3:_=i.readBool(),g.setNormalized(_);break;default:i.skipField()}return g},proto.mediapipe.RenderAnnotation.Point.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter=function(g,i){var _=void 0;(_=n.Message.getField(g,1))!=null&&i.writeDouble(1,_),(_=n.Message.getField(g,2))!=null&&i.writeDouble(2,_),(_=n.Message.getField(g,3))!=null&&i.writeBool(3,_)},proto.mediapipe.RenderAnnotation.Point.prototype.getX=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Point.prototype.setX=function(g){return n.Message.setField(this,1,g)},proto.mediapipe.RenderAnnotation.Point.prototype.clearX=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Point.prototype.hasX=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Point.prototype.getY=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Point.prototype.setY=function(g){return n.Message.setField(this,2,g)},proto.mediapipe.RenderAnnotation.Point.prototype.clearY=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Point.prototype.hasY=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Point.prototype.getNormalized=function(){return n.Message.getBooleanFieldWithDefault(this,3,!1)},proto.mediapipe.RenderAnnotation.Point.prototype.setNormalized=function(g){return n.Message.setField(this,3,g)},proto.mediapipe.RenderAnnotation.Point.prototype.clearNormalized=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Point.prototype.hasNormalized=function(){return n.Message.getField(this,3)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Line.prototype.toObject=function(g){return proto.mediapipe.RenderAnnotation.Line.toObject(g,this)},proto.mediapipe.RenderAnnotation.Line.toObject=function(g,i){var _,j={xStart:(_=n.Message.getOptionalFloatingPointField(i,1))==null?void 0:_,yStart:(_=n.Message.getOptionalFloatingPointField(i,2))==null?void 0:_,xEnd:(_=n.Message.getOptionalFloatingPointField(i,3))==null?void 0:_,yEnd:(_=n.Message.getOptionalFloatingPointField(i,4))==null?void 0:_,normalized:n.Message.getBooleanFieldWithDefault(i,5,!1),lineType:n.Message.getFieldWithDefault(i,6,1)};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.RenderAnnotation.Line.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.RenderAnnotation.Line;return proto.mediapipe.RenderAnnotation.Line.deserializeBinaryFromReader(_,i)},proto.mediapipe.RenderAnnotation.Line.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=i.readDouble();g.setXStart(_);break;case 2:_=i.readDouble(),g.setYStart(_);break;case 3:_=i.readDouble(),g.setXEnd(_);break;case 4:_=i.readDouble(),g.setYEnd(_);break;case 5:_=i.readBool(),g.setNormalized(_);break;case 6:_=i.readEnum(),g.setLineType(_);break;default:i.skipField()}return g},proto.mediapipe.RenderAnnotation.Line.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Line.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.RenderAnnotation.Line.serializeBinaryToWriter=function(g,i){var _=void 0;(_=n.Message.getField(g,1))!=null&&i.writeDouble(1,_),(_=n.Message.getField(g,2))!=null&&i.writeDouble(2,_),(_=n.Message.getField(g,3))!=null&&i.writeDouble(3,_),(_=n.Message.getField(g,4))!=null&&i.writeDouble(4,_),(_=n.Message.getField(g,5))!=null&&i.writeBool(5,_),(_=n.Message.getField(g,6))!=null&&i.writeEnum(6,_)},proto.mediapipe.RenderAnnotation.Line.LineType={UNKNOWN:0,SOLID:1,DASHED:2},proto.mediapipe.RenderAnnotation.Line.prototype.getXStart=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setXStart=function(g){return n.Message.setField(this,1,g)},proto.mediapipe.RenderAnnotation.Line.prototype.clearXStart=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasXStart=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getYStart=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setYStart=function(g){return n.Message.setField(this,2,g)},proto.mediapipe.RenderAnnotation.Line.prototype.clearYStart=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasYStart=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getXEnd=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setXEnd=function(g){return n.Message.setField(this,3,g)},proto.mediapipe.RenderAnnotation.Line.prototype.clearXEnd=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasXEnd=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getYEnd=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.Line.prototype.setYEnd=function(g){return n.Message.setField(this,4,g)},proto.mediapipe.RenderAnnotation.Line.prototype.clearYEnd=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasYEnd=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getNormalized=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Line.prototype.setNormalized=function(g){return n.Message.setField(this,5,g)},proto.mediapipe.RenderAnnotation.Line.prototype.clearNormalized=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasNormalized=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.Line.prototype.getLineType=function(){return n.Message.getFieldWithDefault(this,6,1)},proto.mediapipe.RenderAnnotation.Line.prototype.setLineType=function(g){return n.Message.setField(this,6,g)},proto.mediapipe.RenderAnnotation.Line.prototype.clearLineType=function(){return n.Message.setField(this,6,void 0)},proto.mediapipe.RenderAnnotation.Line.prototype.hasLineType=function(){return n.Message.getField(this,6)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.GradientLine.prototype.toObject=function(g){return proto.mediapipe.RenderAnnotation.GradientLine.toObject(g,this)},proto.mediapipe.RenderAnnotation.GradientLine.toObject=function(g,i){var _,j={xStart:(_=n.Message.getOptionalFloatingPointField(i,1))==null?void 0:_,yStart:(_=n.Message.getOptionalFloatingPointField(i,2))==null?void 0:_,xEnd:(_=n.Message.getOptionalFloatingPointField(i,3))==null?void 0:_,yEnd:(_=n.Message.getOptionalFloatingPointField(i,4))==null?void 0:_,normalized:n.Message.getBooleanFieldWithDefault(i,5,!1),color1:(_=i.getColor1())&&d.Color.toObject(g,_),color2:(_=i.getColor2())&&d.Color.toObject(g,_)};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.RenderAnnotation.GradientLine;return proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinaryFromReader(_,i)},proto.mediapipe.RenderAnnotation.GradientLine.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=i.readDouble();g.setXStart(_);break;case 2:_=i.readDouble(),g.setYStart(_);break;case 3:_=i.readDouble(),g.setXEnd(_);break;case 4:_=i.readDouble(),g.setYEnd(_);break;case 5:_=i.readBool(),g.setNormalized(_);break;case 6:_=new d.Color,i.readMessage(_,d.Color.deserializeBinaryFromReader),g.setColor1(_);break;case 7:_=new d.Color,i.readMessage(_,d.Color.deserializeBinaryFromReader),g.setColor2(_);break;default:i.skipField()}return g},proto.mediapipe.RenderAnnotation.GradientLine.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.GradientLine.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.RenderAnnotation.GradientLine.serializeBinaryToWriter=function(g,i){var _=void 0;(_=n.Message.getField(g,1))!=null&&i.writeDouble(1,_),(_=n.Message.getField(g,2))!=null&&i.writeDouble(2,_),(_=n.Message.getField(g,3))!=null&&i.writeDouble(3,_),(_=n.Message.getField(g,4))!=null&&i.writeDouble(4,_),(_=n.Message.getField(g,5))!=null&&i.writeBool(5,_),(_=g.getColor1())!=null&&i.writeMessage(6,_,d.Color.serializeBinaryToWriter),(_=g.getColor2())!=null&&i.writeMessage(7,_,d.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getXStart=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setXStart=function(g){return n.Message.setField(this,1,g)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearXStart=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasXStart=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getYStart=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setYStart=function(g){return n.Message.setField(this,2,g)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearYStart=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasYStart=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getXEnd=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setXEnd=function(g){return n.Message.setField(this,3,g)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearXEnd=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasXEnd=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getYEnd=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setYEnd=function(g){return n.Message.setField(this,4,g)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearYEnd=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasYEnd=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getNormalized=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setNormalized=function(g){return n.Message.setField(this,5,g)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearNormalized=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasNormalized=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getColor1=function(){return n.Message.getWrapperField(this,d.Color,6)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setColor1=function(g){return n.Message.setWrapperField(this,6,g)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearColor1=function(){return this.setColor1(void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasColor1=function(){return n.Message.getField(this,6)!=null},proto.mediapipe.RenderAnnotation.GradientLine.prototype.getColor2=function(){return n.Message.getWrapperField(this,d.Color,7)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.setColor2=function(g){return n.Message.setWrapperField(this,7,g)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.clearColor2=function(){return this.setColor2(void 0)},proto.mediapipe.RenderAnnotation.GradientLine.prototype.hasColor2=function(){return n.Message.getField(this,7)!=null},proto.mediapipe.RenderAnnotation.Scribble.repeatedFields_=[1],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Scribble.prototype.toObject=function(g){return proto.mediapipe.RenderAnnotation.Scribble.toObject(g,this)},proto.mediapipe.RenderAnnotation.Scribble.toObject=function(g,i){var _={pointList:n.Message.toObjectList(i.getPointList(),proto.mediapipe.RenderAnnotation.Point.toObject,g)};return g&&(_.$jspbMessageInstance=i),_}),proto.mediapipe.RenderAnnotation.Scribble.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.RenderAnnotation.Scribble;return proto.mediapipe.RenderAnnotation.Scribble.deserializeBinaryFromReader(_,i)},proto.mediapipe.RenderAnnotation.Scribble.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)if(i.getFieldNumber()===1){var _=new proto.mediapipe.RenderAnnotation.Point;i.readMessage(_,proto.mediapipe.RenderAnnotation.Point.deserializeBinaryFromReader),g.addPoint(_)}else i.skipField();return g},proto.mediapipe.RenderAnnotation.Scribble.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Scribble.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.RenderAnnotation.Scribble.serializeBinaryToWriter=function(g,i){var _;(_=g.getPointList()).length>0&&i.writeRepeatedMessage(1,_,proto.mediapipe.RenderAnnotation.Point.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.Scribble.prototype.getPointList=function(){return n.Message.getRepeatedWrapperField(this,proto.mediapipe.RenderAnnotation.Point,1)},proto.mediapipe.RenderAnnotation.Scribble.prototype.setPointList=function(g){return n.Message.setRepeatedWrapperField(this,1,g)},proto.mediapipe.RenderAnnotation.Scribble.prototype.addPoint=function(g,i){return n.Message.addToRepeatedWrapperField(this,1,g,proto.mediapipe.RenderAnnotation.Point,i)},proto.mediapipe.RenderAnnotation.Scribble.prototype.clearPointList=function(){return this.setPointList([])},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Arrow.prototype.toObject=function(g){return proto.mediapipe.RenderAnnotation.Arrow.toObject(g,this)},proto.mediapipe.RenderAnnotation.Arrow.toObject=function(g,i){var _,j={xStart:(_=n.Message.getOptionalFloatingPointField(i,1))==null?void 0:_,yStart:(_=n.Message.getOptionalFloatingPointField(i,2))==null?void 0:_,xEnd:(_=n.Message.getOptionalFloatingPointField(i,3))==null?void 0:_,yEnd:(_=n.Message.getOptionalFloatingPointField(i,4))==null?void 0:_,normalized:n.Message.getBooleanFieldWithDefault(i,5,!1)};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.RenderAnnotation.Arrow.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.RenderAnnotation.Arrow;return proto.mediapipe.RenderAnnotation.Arrow.deserializeBinaryFromReader(_,i)},proto.mediapipe.RenderAnnotation.Arrow.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=i.readDouble();g.setXStart(_);break;case 2:_=i.readDouble(),g.setYStart(_);break;case 3:_=i.readDouble(),g.setXEnd(_);break;case 4:_=i.readDouble(),g.setYEnd(_);break;case 5:_=i.readBool(),g.setNormalized(_);break;default:i.skipField()}return g},proto.mediapipe.RenderAnnotation.Arrow.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Arrow.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.RenderAnnotation.Arrow.serializeBinaryToWriter=function(g,i){var _=void 0;(_=n.Message.getField(g,1))!=null&&i.writeDouble(1,_),(_=n.Message.getField(g,2))!=null&&i.writeDouble(2,_),(_=n.Message.getField(g,3))!=null&&i.writeDouble(3,_),(_=n.Message.getField(g,4))!=null&&i.writeDouble(4,_),(_=n.Message.getField(g,5))!=null&&i.writeBool(5,_)},proto.mediapipe.RenderAnnotation.Arrow.prototype.getXStart=function(){return n.Message.getFloatingPointFieldWithDefault(this,1,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setXStart=function(g){return n.Message.setField(this,1,g)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearXStart=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasXStart=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Arrow.prototype.getYStart=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setYStart=function(g){return n.Message.setField(this,2,g)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearYStart=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasYStart=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Arrow.prototype.getXEnd=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setXEnd=function(g){return n.Message.setField(this,3,g)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearXEnd=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasXEnd=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.Arrow.prototype.getYEnd=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setYEnd=function(g){return n.Message.setField(this,4,g)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearYEnd=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasYEnd=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.Arrow.prototype.getNormalized=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Arrow.prototype.setNormalized=function(g){return n.Message.setField(this,5,g)},proto.mediapipe.RenderAnnotation.Arrow.prototype.clearNormalized=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Arrow.prototype.hasNormalized=function(){return n.Message.getField(this,5)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderAnnotation.Text.prototype.toObject=function(g){return proto.mediapipe.RenderAnnotation.Text.toObject(g,this)},proto.mediapipe.RenderAnnotation.Text.toObject=function(g,i){var _,j={displayText:(_=n.Message.getField(i,1))==null?void 0:_,left:(_=n.Message.getOptionalFloatingPointField(i,2))==null?void 0:_,baseline:(_=n.Message.getOptionalFloatingPointField(i,3))==null?void 0:_,fontHeight:n.Message.getFloatingPointFieldWithDefault(i,4,8),normalized:n.Message.getBooleanFieldWithDefault(i,5,!1),fontFace:n.Message.getFieldWithDefault(i,6,0),centerHorizontally:n.Message.getBooleanFieldWithDefault(i,7,!1),centerVertically:n.Message.getBooleanFieldWithDefault(i,8,!1),outlineThickness:n.Message.getFloatingPointFieldWithDefault(i,11,0),outlineColor:(_=i.getOutlineColor())&&d.Color.toObject(g,_)};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.RenderAnnotation.Text.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.RenderAnnotation.Text;return proto.mediapipe.RenderAnnotation.Text.deserializeBinaryFromReader(_,i)},proto.mediapipe.RenderAnnotation.Text.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=i.readString();g.setDisplayText(_);break;case 2:_=i.readDouble(),g.setLeft(_);break;case 3:_=i.readDouble(),g.setBaseline(_);break;case 4:_=i.readDouble(),g.setFontHeight(_);break;case 5:_=i.readBool(),g.setNormalized(_);break;case 6:_=i.readInt32(),g.setFontFace(_);break;case 7:_=i.readBool(),g.setCenterHorizontally(_);break;case 8:_=i.readBool(),g.setCenterVertically(_);break;case 11:_=i.readDouble(),g.setOutlineThickness(_);break;case 12:_=new d.Color,i.readMessage(_,d.Color.deserializeBinaryFromReader),g.setOutlineColor(_);break;default:i.skipField()}return g},proto.mediapipe.RenderAnnotation.Text.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.RenderAnnotation.Text.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.RenderAnnotation.Text.serializeBinaryToWriter=function(g,i){var _=void 0;(_=n.Message.getField(g,1))!=null&&i.writeString(1,_),(_=n.Message.getField(g,2))!=null&&i.writeDouble(2,_),(_=n.Message.getField(g,3))!=null&&i.writeDouble(3,_),(_=n.Message.getField(g,4))!=null&&i.writeDouble(4,_),(_=n.Message.getField(g,5))!=null&&i.writeBool(5,_),(_=n.Message.getField(g,6))!=null&&i.writeInt32(6,_),(_=n.Message.getField(g,7))!=null&&i.writeBool(7,_),(_=n.Message.getField(g,8))!=null&&i.writeBool(8,_),(_=n.Message.getField(g,11))!=null&&i.writeDouble(11,_),(_=g.getOutlineColor())!=null&&i.writeMessage(12,_,d.Color.serializeBinaryToWriter)},proto.mediapipe.RenderAnnotation.Text.prototype.getDisplayText=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.RenderAnnotation.Text.prototype.setDisplayText=function(g){return n.Message.setField(this,1,g)},proto.mediapipe.RenderAnnotation.Text.prototype.clearDisplayText=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasDisplayText=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getLeft=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setLeft=function(g){return n.Message.setField(this,2,g)},proto.mediapipe.RenderAnnotation.Text.prototype.clearLeft=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasLeft=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getBaseline=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setBaseline=function(g){return n.Message.setField(this,3,g)},proto.mediapipe.RenderAnnotation.Text.prototype.clearBaseline=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasBaseline=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getFontHeight=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,8)},proto.mediapipe.RenderAnnotation.Text.prototype.setFontHeight=function(g){return n.Message.setField(this,4,g)},proto.mediapipe.RenderAnnotation.Text.prototype.clearFontHeight=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasFontHeight=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getNormalized=function(){return n.Message.getBooleanFieldWithDefault(this,5,!1)},proto.mediapipe.RenderAnnotation.Text.prototype.setNormalized=function(g){return n.Message.setField(this,5,g)},proto.mediapipe.RenderAnnotation.Text.prototype.clearNormalized=function(){return n.Message.setField(this,5,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasNormalized=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getFontFace=function(){return n.Message.getFieldWithDefault(this,6,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setFontFace=function(g){return n.Message.setField(this,6,g)},proto.mediapipe.RenderAnnotation.Text.prototype.clearFontFace=function(){return n.Message.setField(this,6,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasFontFace=function(){return n.Message.getField(this,6)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getCenterHorizontally=function(){return n.Message.getBooleanFieldWithDefault(this,7,!1)},proto.mediapipe.RenderAnnotation.Text.prototype.setCenterHorizontally=function(g){return n.Message.setField(this,7,g)},proto.mediapipe.RenderAnnotation.Text.prototype.clearCenterHorizontally=function(){return n.Message.setField(this,7,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasCenterHorizontally=function(){return n.Message.getField(this,7)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getCenterVertically=function(){return n.Message.getBooleanFieldWithDefault(this,8,!1)},proto.mediapipe.RenderAnnotation.Text.prototype.setCenterVertically=function(g){return n.Message.setField(this,8,g)},proto.mediapipe.RenderAnnotation.Text.prototype.clearCenterVertically=function(){return n.Message.setField(this,8,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasCenterVertically=function(){return n.Message.getField(this,8)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getOutlineThickness=function(){return n.Message.getFloatingPointFieldWithDefault(this,11,0)},proto.mediapipe.RenderAnnotation.Text.prototype.setOutlineThickness=function(g){return n.Message.setField(this,11,g)},proto.mediapipe.RenderAnnotation.Text.prototype.clearOutlineThickness=function(){return n.Message.setField(this,11,void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasOutlineThickness=function(){return n.Message.getField(this,11)!=null},proto.mediapipe.RenderAnnotation.Text.prototype.getOutlineColor=function(){return n.Message.getWrapperField(this,d.Color,12)},proto.mediapipe.RenderAnnotation.Text.prototype.setOutlineColor=function(g){return n.Message.setWrapperField(this,12,g)},proto.mediapipe.RenderAnnotation.Text.prototype.clearOutlineColor=function(){return this.setOutlineColor(void 0)},proto.mediapipe.RenderAnnotation.Text.prototype.hasOutlineColor=function(){return n.Message.getField(this,12)!=null},proto.mediapipe.RenderAnnotation.prototype.getRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Rectangle,1)},proto.mediapipe.RenderAnnotation.prototype.setRectangle=function(g){return n.Message.setOneofWrapperField(this,1,proto.mediapipe.RenderAnnotation.oneofGroups_[0],g)},proto.mediapipe.RenderAnnotation.prototype.clearRectangle=function(){return this.setRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasRectangle=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderAnnotation.prototype.getFilledRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.FilledRectangle,2)},proto.mediapipe.RenderAnnotation.prototype.setFilledRectangle=function(g){return n.Message.setOneofWrapperField(this,2,proto.mediapipe.RenderAnnotation.oneofGroups_[0],g)},proto.mediapipe.RenderAnnotation.prototype.clearFilledRectangle=function(){return this.setFilledRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasFilledRectangle=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderAnnotation.prototype.getOval=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Oval,3)},proto.mediapipe.RenderAnnotation.prototype.setOval=function(g){return n.Message.setOneofWrapperField(this,3,proto.mediapipe.RenderAnnotation.oneofGroups_[0],g)},proto.mediapipe.RenderAnnotation.prototype.clearOval=function(){return this.setOval(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasOval=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderAnnotation.prototype.getFilledOval=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.FilledOval,4)},proto.mediapipe.RenderAnnotation.prototype.setFilledOval=function(g){return n.Message.setOneofWrapperField(this,4,proto.mediapipe.RenderAnnotation.oneofGroups_[0],g)},proto.mediapipe.RenderAnnotation.prototype.clearFilledOval=function(){return this.setFilledOval(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasFilledOval=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.RenderAnnotation.prototype.getPoint=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Point,5)},proto.mediapipe.RenderAnnotation.prototype.setPoint=function(g){return n.Message.setOneofWrapperField(this,5,proto.mediapipe.RenderAnnotation.oneofGroups_[0],g)},proto.mediapipe.RenderAnnotation.prototype.clearPoint=function(){return this.setPoint(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasPoint=function(){return n.Message.getField(this,5)!=null},proto.mediapipe.RenderAnnotation.prototype.getLine=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Line,6)},proto.mediapipe.RenderAnnotation.prototype.setLine=function(g){return n.Message.setOneofWrapperField(this,6,proto.mediapipe.RenderAnnotation.oneofGroups_[0],g)},proto.mediapipe.RenderAnnotation.prototype.clearLine=function(){return this.setLine(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasLine=function(){return n.Message.getField(this,6)!=null},proto.mediapipe.RenderAnnotation.prototype.getArrow=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Arrow,7)},proto.mediapipe.RenderAnnotation.prototype.setArrow=function(g){return n.Message.setOneofWrapperField(this,7,proto.mediapipe.RenderAnnotation.oneofGroups_[0],g)},proto.mediapipe.RenderAnnotation.prototype.clearArrow=function(){return this.setArrow(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasArrow=function(){return n.Message.getField(this,7)!=null},proto.mediapipe.RenderAnnotation.prototype.getText=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Text,8)},proto.mediapipe.RenderAnnotation.prototype.setText=function(g){return n.Message.setOneofWrapperField(this,8,proto.mediapipe.RenderAnnotation.oneofGroups_[0],g)},proto.mediapipe.RenderAnnotation.prototype.clearText=function(){return this.setText(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasText=function(){return n.Message.getField(this,8)!=null},proto.mediapipe.RenderAnnotation.prototype.getRoundedRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.RoundedRectangle,9)},proto.mediapipe.RenderAnnotation.prototype.setRoundedRectangle=function(g){return n.Message.setOneofWrapperField(this,9,proto.mediapipe.RenderAnnotation.oneofGroups_[0],g)},proto.mediapipe.RenderAnnotation.prototype.clearRoundedRectangle=function(){return this.setRoundedRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasRoundedRectangle=function(){return n.Message.getField(this,9)!=null},proto.mediapipe.RenderAnnotation.prototype.getFilledRoundedRectangle=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.FilledRoundedRectangle,10)},proto.mediapipe.RenderAnnotation.prototype.setFilledRoundedRectangle=function(g){return n.Message.setOneofWrapperField(this,10,proto.mediapipe.RenderAnnotation.oneofGroups_[0],g)},proto.mediapipe.RenderAnnotation.prototype.clearFilledRoundedRectangle=function(){return this.setFilledRoundedRectangle(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasFilledRoundedRectangle=function(){return n.Message.getField(this,10)!=null},proto.mediapipe.RenderAnnotation.prototype.getGradientLine=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.GradientLine,14)},proto.mediapipe.RenderAnnotation.prototype.setGradientLine=function(g){return n.Message.setOneofWrapperField(this,14,proto.mediapipe.RenderAnnotation.oneofGroups_[0],g)},proto.mediapipe.RenderAnnotation.prototype.clearGradientLine=function(){return this.setGradientLine(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasGradientLine=function(){return n.Message.getField(this,14)!=null},proto.mediapipe.RenderAnnotation.prototype.getScribble=function(){return n.Message.getWrapperField(this,proto.mediapipe.RenderAnnotation.Scribble,15)},proto.mediapipe.RenderAnnotation.prototype.setScribble=function(g){return n.Message.setOneofWrapperField(this,15,proto.mediapipe.RenderAnnotation.oneofGroups_[0],g)},proto.mediapipe.RenderAnnotation.prototype.clearScribble=function(){return this.setScribble(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasScribble=function(){return n.Message.getField(this,15)!=null},proto.mediapipe.RenderAnnotation.prototype.getThickness=function(){return n.Message.getFloatingPointFieldWithDefault(this,11,1)},proto.mediapipe.RenderAnnotation.prototype.setThickness=function(g){return n.Message.setField(this,11,g)},proto.mediapipe.RenderAnnotation.prototype.clearThickness=function(){return n.Message.setField(this,11,void 0)},proto.mediapipe.RenderAnnotation.prototype.hasThickness=function(){return n.Message.getField(this,11)!=null},proto.mediapipe.RenderAnnotation.prototype.getColor=function(){return n.Message.getWrapperField(this,d.Color,12)},proto.mediapipe.RenderAnnotation.prototype.setColor=function(g){return n.Message.setWrapperField(this,12,g)},proto.mediapipe.RenderAnnotation.prototype.clearColor=function(){return this.setColor(void 0)},proto.mediapipe.RenderAnnotation.prototype.hasColor=function(){return n.Message.getField(this,12)!=null},proto.mediapipe.RenderAnnotation.prototype.getSceneTag=function(){return n.Message.getFieldWithDefault(this,13,"")},proto.mediapipe.RenderAnnotation.prototype.setSceneTag=function(g){return n.Message.setField(this,13,g)},proto.mediapipe.RenderAnnotation.prototype.clearSceneTag=function(){return n.Message.setField(this,13,void 0)},proto.mediapipe.RenderAnnotation.prototype.hasSceneTag=function(){return n.Message.getField(this,13)!=null},n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.RenderViewport.prototype.toObject=function(g){return proto.mediapipe.RenderViewport.toObject(g,this)},proto.mediapipe.RenderViewport.toObject=function(g,i){var _,j={id:(_=n.Message.getField(i,1))==null?void 0:_,widthPx:(_=n.Message.getField(i,2))==null?void 0:_,heightPx:(_=n.Message.getField(i,3))==null?void 0:_,composeOnVideo:(_=n.Message.getBooleanField(i,4))==null?void 0:_};return g&&(j.$jspbMessageInstance=i),j}),proto.mediapipe.RenderViewport.deserializeBinary=function(g){var i=new n.BinaryReader(g),_=new proto.mediapipe.RenderViewport;return proto.mediapipe.RenderViewport.deserializeBinaryFromReader(_,i)},proto.mediapipe.RenderViewport.deserializeBinaryFromReader=function(g,i){for(;i.nextField()&&!i.isEndGroup();)switch(i.getFieldNumber()){case 1:var _=i.readString();g.setId(_);break;case 2:_=i.readInt32(),g.setWidthPx(_);break;case 3:_=i.readInt32(),g.setHeightPx(_);break;case 4:_=i.readBool(),g.setComposeOnVideo(_);break;default:i.skipField()}return g},proto.mediapipe.RenderViewport.prototype.serializeBinary=function(){var g=new n.BinaryWriter;return proto.mediapipe.RenderViewport.serializeBinaryToWriter(this,g),g.getResultBuffer()},proto.mediapipe.RenderViewport.serializeBinaryToWriter=function(g,i){var _=void 0;(_=n.Message.getField(g,1))!=null&&i.writeString(1,_),(_=n.Message.getField(g,2))!=null&&i.writeInt32(2,_),(_=n.Message.getField(g,3))!=null&&i.writeInt32(3,_),(_=n.Message.getField(g,4))!=null&&i.writeBool(4,_)},proto.mediapipe.RenderViewport.prototype.getId=function(){return n.Message.getFieldWithDefault(this,1,"")},proto.mediapipe.RenderViewport.prototype.setId=function(g){return n.Message.setField(this,1,g)},proto.mediapipe.RenderViewport.prototype.clearId=function(){return n.Message.setField(this,1,void 0)},proto.mediapipe.RenderViewport.prototype.hasId=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.RenderViewport.prototype.getWidthPx=function(){return n.Message.getFieldWithDefault(this,2,0)},proto.mediapipe.RenderViewport.prototype.setWidthPx=function(g){return n.Message.setField(this,2,g)},proto.mediapipe.RenderViewport.prototype.clearWidthPx=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.RenderViewport.prototype.hasWidthPx=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.RenderViewport.prototype.getHeightPx=function(){return n.Message.getFieldWithDefault(this,3,0)},proto.mediapipe.RenderViewport.prototype.setHeightPx=function(g){return n.Message.setField(this,3,g)},proto.mediapipe.RenderViewport.prototype.clearHeightPx=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.RenderViewport.prototype.hasHeightPx=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.RenderViewport.prototype.getComposeOnVideo=function(){return n.Message.getBooleanFieldWithDefault(this,4,!1)},proto.mediapipe.RenderViewport.prototype.setComposeOnVideo=function(g){return n.Message.setField(this,4,g)},proto.mediapipe.RenderViewport.prototype.clearComposeOnVideo=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.RenderViewport.prototype.hasComposeOnVideo=function(){return n.Message.getField(this,4)!=null},A.object.extend(u,proto.mediapipe)})(render_data_pb);var interactive_segmenter_result={};Object.defineProperty(interactive_segmenter_result,"__esModule",{value:!0}),interactive_segmenter_result.InteractiveSegmenterResult=void 0;class InteractiveSegmenterResult{constructor(n,A,C){this.confidenceMasks=n,this.categoryMask=A,this.qualityScores=C}close(){var n,A;(n=this.confidenceMasks)===null||n===void 0||n.forEach(C=>{C.close()}),(A=this.categoryMask)===null||A===void 0||A.close()}}interactive_segmenter_result.InteractiveSegmenterResult=InteractiveSegmenterResult;var interactive_segmenter_options={};Object.defineProperty(interactive_segmenter_options,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(gt,at,ut,ot){ot===void 0&&(ot=ut);var Rt=Object.getOwnPropertyDescriptor(at,ut);Rt&&!("get"in Rt?!at.__esModule:Rt.writable||Rt.configurable)||(Rt={enumerable:!0,get:function(){return at[ut]}}),Object.defineProperty(gt,ot,Rt)}:function(gt,at,ut,ot){ot===void 0&&(ot=ut),gt[ot]=at[ut]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(gt,at){for(var ut in gt)ut==="default"||Object.prototype.hasOwnProperty.call(at,ut)||n(at,gt,ut)};Object.defineProperty(u,"__esModule",{value:!0}),u.InteractiveSegmenter=void 0;const C=calculator_pb,d=calculator_options_pb,g=base_options_pb,i=image_segmenter_graph_options_pb,_=segmenter_options_pb,j=vision_task_runner,$=color_pb,re=render_data_pb,Q=interactive_segmenter_result;A(interactive_segmenter_options,u),A(interactive_segmenter_result,u);const ae="image_in",pe="norm_rect_in",st="roi_in",Pe="confidence_masks",Oe="category_mask",Ze="quality_scores";class rt extends j.VisionTaskRunner{static createFromOptions(at,ut){return j.VisionTaskRunner.createVisionInstance(rt,at,ut)}static createFromModelBuffer(at,ut){return j.VisionTaskRunner.createVisionInstance(rt,at,{baseOptions:{modelAssetBuffer:ut}})}static createFromModelPath(at,ut){return j.VisionTaskRunner.createVisionInstance(rt,at,{baseOptions:{modelAssetPath:ut}})}constructor(at,ut){super(new j.VisionGraphRunner(at,ut),ae,pe,!1),this.outputCategoryMask=!1,this.outputConfidenceMasks=!0,this.options=new i.ImageSegmenterGraphOptions,this.segmenterOptions=new _.SegmenterOptions,this.options.setSegmenterOptions(this.segmenterOptions),this.options.setBaseOptions(new g.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(at){this.options.setBaseOptions(at)}setOptions(at){var ut,ot;return"outputCategoryMask"in at&&(this.outputCategoryMask=(ut=at.outputCategoryMask)!==null&&ut!==void 0&&ut),"outputConfidenceMasks"in at&&(this.outputConfidenceMasks=(ot=at.outputConfidenceMasks)===null||ot===void 0||ot),super.applyOptions(at)}segment(at,ut,ot,Rt){const Mt=typeof ot!="function"?ot:{};return this.userCallback=typeof ot=="function"?ot:Rt,this.reset(),this.processRenderData(ut,this.getSynctheticTimestamp()),this.processImageData(at,Mt),this.processResults()}reset(){this.confidenceMasks=void 0,this.categoryMask=void 0,this.qualityScores=void 0}processResults(){try{const at=new Q.InteractiveSegmenterResult(this.confidenceMasks,this.categoryMask,this.qualityScores);if(!this.userCallback)return at;this.userCallback(at)}finally{this.freeKeepaliveStreams()}}refreshGraph(){const at=new C.CalculatorGraphConfig;at.addInputStream(ae),at.addInputStream(st),at.addInputStream(pe);const ut=new d.CalculatorOptions;ut.setExtension(i.ImageSegmenterGraphOptions.ext,this.options);const ot=new C.CalculatorGraphConfig.Node;ot.setCalculator("mediapipe.tasks.vision.interactive_segmenter.InteractiveSegmenterGraph"),ot.addInputStream("IMAGE:"+ae),ot.addInputStream("ROI:"+st),ot.addInputStream("NORM_RECT:"+pe),ot.setOptions(ut),at.addNode(ot),this.addKeepaliveNode(at),this.outputConfidenceMasks&&(at.addOutputStream(Pe),ot.addOutputStream("CONFIDENCE_MASKS:"+Pe),this.keepStreamAlive(Pe),this.graphRunner.attachImageVectorListener(Pe,(Mt,Pt)=>{this.confidenceMasks=Mt.map(It=>this.convertToMPMask(It,!this.userCallback)),this.setLatestOutputTimestamp(Pt)}),this.graphRunner.attachEmptyPacketListener(Pe,Mt=>{this.confidenceMasks=[],this.setLatestOutputTimestamp(Mt)})),this.outputCategoryMask&&(at.addOutputStream(Oe),ot.addOutputStream("CATEGORY_MASK:"+Oe),this.keepStreamAlive(Oe),this.graphRunner.attachImageListener(Oe,(Mt,Pt)=>{this.categoryMask=this.convertToMPMask(Mt,!this.userCallback),this.setLatestOutputTimestamp(Pt)}),this.graphRunner.attachEmptyPacketListener(Oe,Mt=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(Mt)})),at.addOutputStream(Ze),ot.addOutputStream("QUALITY_SCORES:"+Ze),this.graphRunner.attachFloatVectorListener(Ze,(Mt,Pt)=>{this.qualityScores=Mt,this.setLatestOutputTimestamp(Pt)}),this.graphRunner.attachEmptyPacketListener(Ze,Mt=>{this.categoryMask=void 0,this.setLatestOutputTimestamp(Mt)});const Rt=at.serializeBinary();this.setGraph(new Uint8Array(Rt),!0)}processRenderData(at,ut){const ot=new re.RenderData,Rt=new re.RenderAnnotation,Mt=new $.Color;if(Mt.setR(255),Rt.setColor(Mt),at.keypoint&&at.scribble)throw new Error("Cannot provide both keypoint and scribble.");if(at.keypoint){const Pt=new re.RenderAnnotation.Point;Pt.setNormalized(!0),Pt.setX(at.keypoint.x),Pt.setY(at.keypoint.y),Rt.setPoint(Pt)}else{if(!at.scribble)throw new Error("Must provide either a keypoint or a scribble.");{const Pt=new re.RenderAnnotation.Scribble;for(const It of at.scribble){const xt=new re.RenderAnnotation.Point;xt.setNormalized(!0),xt.setX(It.x),xt.setY(It.y),Pt.addPoint(xt)}Rt.setScribble(Pt)}}ot.addRenderAnnotations(Rt),this.graphRunner.addProtoToStream(ot.serializeBinary(),"mediapipe.RenderData",st,ut)}}u.InteractiveSegmenter=rt}(interactive_segmenter);var object_detector={},object_detector_options_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var g=calculator_options_pb;A.object.extend(proto,g);var i=base_options_pb;A.object.extend(proto,i),A.exportSymbol("proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions",null,C),proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions=function(_){n.Message.initialize(this,_,0,-1,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.repeatedFields_,null)},A.inherits(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.displayName="proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions"),proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.repeatedFields_=[5,6],n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.toObject=function(_){return proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject(_,this)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject=function(_,j){var $,re={baseOptions:($=j.getBaseOptions())&&i.BaseOptions.toObject(_,$),displayNamesLocale:n.Message.getFieldWithDefault(j,2,"en"),maxResults:n.Message.getFieldWithDefault(j,3,-1),scoreThreshold:($=n.Message.getOptionalFloatingPointField(j,4))==null?void 0:$,categoryAllowlistList:($=n.Message.getRepeatedField(j,5))==null?void 0:$,categoryDenylistList:($=n.Message.getRepeatedField(j,6))==null?void 0:$};return _&&(re.$jspbMessageInstance=j),re}),proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinary=function(_){var j=new n.BinaryReader(_),$=new proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions;return proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader($,j)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader=function(_,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var $=new i.BaseOptions;j.readMessage($,i.BaseOptions.deserializeBinaryFromReader),_.setBaseOptions($);break;case 2:$=j.readString(),_.setDisplayNamesLocale($);break;case 3:$=j.readInt32(),_.setMaxResults($);break;case 4:$=j.readFloat(),_.setScoreThreshold($);break;case 5:$=j.readString(),_.addCategoryAllowlist($);break;case 6:$=j.readString(),_.addCategoryDenylist($);break;default:j.skipField()}return _},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.serializeBinary=function(){var _=new n.BinaryWriter;return proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter(this,_),_.getResultBuffer()},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter=function(_,j){var $=void 0;($=_.getBaseOptions())!=null&&j.writeMessage(1,$,i.BaseOptions.serializeBinaryToWriter),($=n.Message.getField(_,2))!=null&&j.writeString(2,$),($=n.Message.getField(_,3))!=null&&j.writeInt32(3,$),($=n.Message.getField(_,4))!=null&&j.writeFloat(4,$),($=_.getCategoryAllowlistList()).length>0&&j.writeRepeatedString(5,$),($=_.getCategoryDenylistList()).length>0&&j.writeRepeatedString(6,$)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext=new n.ExtensionFieldInfo(443442058,{ext:0},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject,0),g.CalculatorOptions.extensionsBinary[443442058]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[443442058]=proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setBaseOptions=function(_){return n.Message.setWrapperField(this,1,_)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getDisplayNamesLocale=function(){return n.Message.getFieldWithDefault(this,2,"en")},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setDisplayNamesLocale=function(_){return n.Message.setField(this,2,_)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearDisplayNamesLocale=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasDisplayNamesLocale=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getMaxResults=function(){return n.Message.getFieldWithDefault(this,3,-1)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setMaxResults=function(_){return n.Message.setField(this,3,_)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearMaxResults=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasMaxResults=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getScoreThreshold=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setScoreThreshold=function(_){return n.Message.setField(this,4,_)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearScoreThreshold=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.hasScoreThreshold=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getCategoryAllowlistList=function(){return n.Message.getRepeatedField(this,5)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setCategoryAllowlistList=function(_){return n.Message.setField(this,5,_||[])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.addCategoryAllowlist=function(_,j){return n.Message.addToRepeatedField(this,5,_,j)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearCategoryAllowlistList=function(){return this.setCategoryAllowlistList([])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.getCategoryDenylistList=function(){return n.Message.getRepeatedField(this,6)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.setCategoryDenylistList=function(_){return n.Message.setField(this,6,_||[])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.addCategoryDenylist=function(_,j){return n.Message.addToRepeatedField(this,6,_,j)},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.prototype.clearCategoryDenylistList=function(){return this.setCategoryDenylistList([])},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext=new n.ExtensionFieldInfo(443442058,{ext:0},proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.toObject,0),g.CalculatorOptions.extensionsBinary[443442058]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[443442058]=proto.mediapipe.tasks.vision.object_detector.proto.ObjectDetectorOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.object_detector.proto)})(object_detector_options_pb);var object_detector_options={};Object.defineProperty(object_detector_options,"__esModule",{value:!0});var object_detector_result={};Object.defineProperty(object_detector_result,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(st,Pe,Oe,Ze){Ze===void 0&&(Ze=Oe);var rt=Object.getOwnPropertyDescriptor(Pe,Oe);rt&&!("get"in rt?!Pe.__esModule:rt.writable||rt.configurable)||(rt={enumerable:!0,get:function(){return Pe[Oe]}}),Object.defineProperty(st,Ze,rt)}:function(st,Pe,Oe,Ze){Ze===void 0&&(Ze=Oe),st[Ze]=Pe[Oe]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(st,Pe){for(var Oe in st)Oe==="default"||Object.prototype.hasOwnProperty.call(Pe,Oe)||n(Pe,st,Oe)};Object.defineProperty(u,"__esModule",{value:!0}),u.ObjectDetector=void 0;const C=calculator_pb,d=calculator_options_pb,g=detection_pb,i=base_options_pb,_=object_detector_options_pb,j=detection_result,$=vision_task_runner,re="input_frame_gpu",Q="norm_rect",ae="detections";A(object_detector_options,u),A(object_detector_result,u);class pe extends $.VisionTaskRunner{static createFromOptions(Pe,Oe){return $.VisionTaskRunner.createVisionInstance(pe,Pe,Oe)}static createFromModelBuffer(Pe,Oe){return $.VisionTaskRunner.createVisionInstance(pe,Pe,{baseOptions:{modelAssetBuffer:Oe}})}static createFromModelPath(Pe,Oe){return fs(this,null,function*(){return $.VisionTaskRunner.createVisionInstance(pe,Pe,{baseOptions:{modelAssetPath:Oe}})})}constructor(Pe,Oe){super(new $.VisionGraphRunner(Pe,Oe),re,Q,!1),this.result={detections:[]},this.options=new _.ObjectDetectorOptions,this.options.setBaseOptions(new i.BaseOptions)}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(Pe){this.options.setBaseOptions(Pe)}setOptions(Pe){return Pe.displayNamesLocale!==void 0?this.options.setDisplayNamesLocale(Pe.displayNamesLocale):"displayNamesLocale"in Pe&&this.options.clearDisplayNamesLocale(),Pe.maxResults!==void 0?this.options.setMaxResults(Pe.maxResults):"maxResults"in Pe&&this.options.clearMaxResults(),Pe.scoreThreshold!==void 0?this.options.setScoreThreshold(Pe.scoreThreshold):"scoreThreshold"in Pe&&this.options.clearScoreThreshold(),Pe.categoryAllowlist!==void 0?this.options.setCategoryAllowlistList(Pe.categoryAllowlist):"categoryAllowlist"in Pe&&this.options.clearCategoryAllowlistList(),Pe.categoryDenylist!==void 0?this.options.setCategoryDenylistList(Pe.categoryDenylist):"categoryDenylist"in Pe&&this.options.clearCategoryDenylistList(),this.applyOptions(Pe)}detect(Pe,Oe){return this.result={detections:[]},this.processImageData(Pe,Oe),this.result}detectForVideo(Pe,Oe,Ze){return this.result={detections:[]},this.processVideoData(Pe,Ze,Oe),this.result}addJsObjectDetections(Pe){for(const Oe of Pe){const Ze=g.Detection.deserializeBinary(Oe);this.result.detections.push((0,j.convertFromDetectionProto)(Ze))}}refreshGraph(){const Pe=new C.CalculatorGraphConfig;Pe.addInputStream(re),Pe.addInputStream(Q),Pe.addOutputStream(ae);const Oe=new d.CalculatorOptions;Oe.setExtension(_.ObjectDetectorOptions.ext,this.options);const Ze=new C.CalculatorGraphConfig.Node;Ze.setCalculator("mediapipe.tasks.vision.ObjectDetectorGraph"),Ze.addInputStream("IMAGE:"+re),Ze.addInputStream("NORM_RECT:"+Q),Ze.addOutputStream("DETECTIONS:"+ae),Ze.setOptions(Oe),Pe.addNode(Ze),this.graphRunner.attachProtoVectorListener(ae,(gt,at)=>{this.addJsObjectDetections(gt),this.setLatestOutputTimestamp(at)}),this.graphRunner.attachEmptyPacketListener(ae,gt=>{this.setLatestOutputTimestamp(gt)});const rt=Pe.serializeBinary();this.setGraph(new Uint8Array(rt),!0)}}u.ObjectDetector=pe}(object_detector);var pose_landmarker={},pose_detector_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var g=calculator_options_pb;A.object.extend(proto,g);var i=base_options_pb;A.object.extend(proto,i),A.exportSymbol("proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions",null,C),proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions=function(_){n.Message.initialize(this,_,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.toObject=function(_){return proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject(_,this)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject=function(_,j){var $,re={baseOptions:($=j.getBaseOptions())&&i.BaseOptions.toObject(_,$),minDetectionConfidence:n.Message.getFloatingPointFieldWithDefault(j,2,.5),minSuppressionThreshold:n.Message.getFloatingPointFieldWithDefault(j,3,.5),numPoses:($=n.Message.getField(j,4))==null?void 0:$};return _&&(re.$jspbMessageInstance=j),re}),proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinary=function(_){var j=new n.BinaryReader(_),$=new proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions;return proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader($,j)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader=function(_,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var $=new i.BaseOptions;j.readMessage($,i.BaseOptions.deserializeBinaryFromReader),_.setBaseOptions($);break;case 2:$=j.readFloat(),_.setMinDetectionConfidence($);break;case 3:$=j.readFloat(),_.setMinSuppressionThreshold($);break;case 4:$=j.readInt32(),_.setNumPoses($);break;default:j.skipField()}return _},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.serializeBinary=function(){var _=new n.BinaryWriter;return proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter(this,_),_.getResultBuffer()},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter=function(_,j){var $=void 0;($=_.getBaseOptions())!=null&&j.writeMessage(1,$,i.BaseOptions.serializeBinaryToWriter),($=n.Message.getField(_,2))!=null&&j.writeFloat(2,$),($=n.Message.getField(_,3))!=null&&j.writeFloat(3,$),($=n.Message.getField(_,4))!=null&&j.writeInt32(4,$)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext=new n.ExtensionFieldInfo(514774813,{ext:0},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[514774813]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[514774813]=proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setBaseOptions=function(_){return n.Message.setWrapperField(this,1,_)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setMinDetectionConfidence=function(_){return n.Message.setField(this,2,_)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getMinSuppressionThreshold=function(){return n.Message.getFloatingPointFieldWithDefault(this,3,.5)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setMinSuppressionThreshold=function(_){return n.Message.setField(this,3,_)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearMinSuppressionThreshold=function(){return n.Message.setField(this,3,void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasMinSuppressionThreshold=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.getNumPoses=function(){return n.Message.getFieldWithDefault(this,4,0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.setNumPoses=function(_){return n.Message.setField(this,4,_)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.clearNumPoses=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.prototype.hasNumPoses=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext=new n.ExtensionFieldInfo(514774813,{ext:0},proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[514774813]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[514774813]=proto.mediapipe.tasks.vision.pose_detector.proto.PoseDetectorGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.pose_detector.proto)})(pose_detector_graph_options_pb);var pose_landmarker_graph_options_pb={},pose_landmarks_detector_graph_options_pb={};(function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var g=calculator_options_pb;A.object.extend(proto,g);var i=base_options_pb;A.object.extend(proto,i),A.exportSymbol("proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions",null,C),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions=function(_){n.Message.initialize(this,_,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.displayName="proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.toObject=function(_){return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject(_,this)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject=function(_,j){var $,re={baseOptions:($=j.getBaseOptions())&&i.BaseOptions.toObject(_,$),minDetectionConfidence:n.Message.getFloatingPointFieldWithDefault(j,2,.5)};return _&&(re.$jspbMessageInstance=j),re}),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinary=function(_){var j=new n.BinaryReader(_),$=new proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader($,j)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader=function(_,j){for(;j.nextField()&&!j.isEndGroup();)switch(j.getFieldNumber()){case 1:var $=new i.BaseOptions;j.readMessage($,i.BaseOptions.deserializeBinaryFromReader),_.setBaseOptions($);break;case 2:$=j.readFloat(),_.setMinDetectionConfidence($);break;default:j.skipField()}return _},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.serializeBinary=function(){var _=new n.BinaryWriter;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter(this,_),_.getResultBuffer()},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter=function(_,j){var $=void 0;($=_.getBaseOptions())!=null&&j.writeMessage(1,$,i.BaseOptions.serializeBinaryToWriter),($=n.Message.getField(_,2))!=null&&j.writeFloat(2,$)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext=new n.ExtensionFieldInfo(518928384,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[518928384]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[518928384]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.setBaseOptions=function(_){return n.Message.setWrapperField(this,1,_)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.getMinDetectionConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,2,.5)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.setMinDetectionConfidence=function(_){return n.Message.setField(this,2,_)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.clearMinDetectionConfidence=function(){return n.Message.setField(this,2,void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.prototype.hasMinDetectionConfidence=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext=new n.ExtensionFieldInfo(518928384,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[518928384]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[518928384]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarksDetectorGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.pose_landmarker.proto)})(pose_landmarks_detector_graph_options_pb),function(u){var n=googleProtobuf,A=n,C=typeof globalThis!="undefined"&&globalThis||typeof window!="undefined"&&window||C!==void 0&&C||typeof self!="undefined"&&self||function(){return this}.call(null)||Function("return this")(),d=calculator_pb;A.object.extend(proto,d);var g=calculator_options_pb;A.object.extend(proto,g);var i=base_options_pb;A.object.extend(proto,i);var _=pose_detector_graph_options_pb;A.object.extend(proto,_);var j=pose_landmarks_detector_graph_options_pb;A.object.extend(proto,j),A.exportSymbol("proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions",null,C),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions=function($){n.Message.initialize(this,$,0,-1,null,null)},A.inherits(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions,n.Message),A.DEBUG&&!COMPILED&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.displayName="proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions"),n.Message.GENERATE_TO_OBJECT&&(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.toObject=function($){return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject($,this)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject=function($,re){var Q,ae={baseOptions:(Q=re.getBaseOptions())&&i.BaseOptions.toObject($,Q),poseDetectorGraphOptions:(Q=re.getPoseDetectorGraphOptions())&&_.PoseDetectorGraphOptions.toObject($,Q),poseLandmarksDetectorGraphOptions:(Q=re.getPoseLandmarksDetectorGraphOptions())&&j.PoseLandmarksDetectorGraphOptions.toObject($,Q),minTrackingConfidence:n.Message.getFloatingPointFieldWithDefault(re,4,.5)};return $&&(ae.$jspbMessageInstance=re),ae}),proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinary=function($){var re=new n.BinaryReader($),Q=new proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader(Q,re)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader=function($,re){for(;re.nextField()&&!re.isEndGroup();)switch(re.getFieldNumber()){case 1:var Q=new i.BaseOptions;re.readMessage(Q,i.BaseOptions.deserializeBinaryFromReader),$.setBaseOptions(Q);break;case 2:Q=new _.PoseDetectorGraphOptions,re.readMessage(Q,_.PoseDetectorGraphOptions.deserializeBinaryFromReader),$.setPoseDetectorGraphOptions(Q);break;case 3:Q=new j.PoseLandmarksDetectorGraphOptions,re.readMessage(Q,j.PoseLandmarksDetectorGraphOptions.deserializeBinaryFromReader),$.setPoseLandmarksDetectorGraphOptions(Q);break;case 4:Q=re.readFloat(),$.setMinTrackingConfidence(Q);break;default:re.skipField()}return $},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.serializeBinary=function(){var $=new n.BinaryWriter;return proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter(this,$),$.getResultBuffer()},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter=function($,re){var Q=void 0;(Q=$.getBaseOptions())!=null&&re.writeMessage(1,Q,i.BaseOptions.serializeBinaryToWriter),(Q=$.getPoseDetectorGraphOptions())!=null&&re.writeMessage(2,Q,_.PoseDetectorGraphOptions.serializeBinaryToWriter),(Q=$.getPoseLandmarksDetectorGraphOptions())!=null&&re.writeMessage(3,Q,j.PoseLandmarksDetectorGraphOptions.serializeBinaryToWriter),(Q=n.Message.getField($,4))!=null&&re.writeFloat(4,Q)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext=new n.ExtensionFieldInfo(516587230,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[516587230]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[516587230]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getBaseOptions=function(){return n.Message.getWrapperField(this,i.BaseOptions,1)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setBaseOptions=function($){return n.Message.setWrapperField(this,1,$)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearBaseOptions=function(){return this.setBaseOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasBaseOptions=function(){return n.Message.getField(this,1)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getPoseDetectorGraphOptions=function(){return n.Message.getWrapperField(this,_.PoseDetectorGraphOptions,2)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setPoseDetectorGraphOptions=function($){return n.Message.setWrapperField(this,2,$)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearPoseDetectorGraphOptions=function(){return this.setPoseDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasPoseDetectorGraphOptions=function(){return n.Message.getField(this,2)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getPoseLandmarksDetectorGraphOptions=function(){return n.Message.getWrapperField(this,j.PoseLandmarksDetectorGraphOptions,3)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setPoseLandmarksDetectorGraphOptions=function($){return n.Message.setWrapperField(this,3,$)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearPoseLandmarksDetectorGraphOptions=function(){return this.setPoseLandmarksDetectorGraphOptions(void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasPoseLandmarksDetectorGraphOptions=function(){return n.Message.getField(this,3)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.getMinTrackingConfidence=function(){return n.Message.getFloatingPointFieldWithDefault(this,4,.5)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.setMinTrackingConfidence=function($){return n.Message.setField(this,4,$)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.clearMinTrackingConfidence=function(){return n.Message.setField(this,4,void 0)},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.prototype.hasMinTrackingConfidence=function(){return n.Message.getField(this,4)!=null},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext=new n.ExtensionFieldInfo(516587230,{ext:0},proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.toObject,0),g.CalculatorOptions.extensionsBinary[516587230]=new n.ExtensionFieldBinaryInfo(proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,n.BinaryReader.prototype.readMessage,n.BinaryWriter.prototype.writeMessage,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.serializeBinaryToWriter,proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.deserializeBinaryFromReader,!1),g.CalculatorOptions.extensions[516587230]=proto.mediapipe.tasks.vision.pose_landmarker.proto.PoseLandmarkerGraphOptions.ext,A.object.extend(u,proto.mediapipe.tasks.vision.pose_landmarker.proto)}(pose_landmarker_graph_options_pb);var pose_landmarker_result={};Object.defineProperty(pose_landmarker_result,"__esModule",{value:!0}),pose_landmarker_result.PoseLandmarkerResult=void 0;class PoseLandmarkerResult{constructor(n,A,C){this.landmarks=n,this.worldLandmarks=A,this.segmentationMasks=C}close(){var n;(n=this.segmentationMasks)===null||n===void 0||n.forEach(A=>{A.close()})}}pose_landmarker_result.PoseLandmarkerResult=PoseLandmarkerResult;var pose_landmarker_options={};Object.defineProperty(pose_landmarker_options,"__esModule",{value:!0}),function(u){var n=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(at,ut,ot,Rt){Rt===void 0&&(Rt=ot);var Mt=Object.getOwnPropertyDescriptor(ut,ot);Mt&&!("get"in Mt?!ut.__esModule:Mt.writable||Mt.configurable)||(Mt={enumerable:!0,get:function(){return ut[ot]}}),Object.defineProperty(at,Rt,Mt)}:function(at,ut,ot,Rt){Rt===void 0&&(Rt=ot),at[Rt]=ut[ot]}),A=commonjsGlobal&&commonjsGlobal.__exportStar||function(at,ut){for(var ot in at)ot==="default"||Object.prototype.hasOwnProperty.call(ut,ot)||n(ut,at,ot)};Object.defineProperty(u,"__esModule",{value:!0}),u.PoseLandmarker=void 0;const C=calculator_pb,d=calculator_options_pb,g=landmark_pb,i=base_options_pb,_=pose_detector_graph_options_pb,j=pose_landmarker_graph_options_pb,$=pose_landmarks_detector_graph_options_pb,re=landmark_result,Q=vision_task_runner,ae=pose_landmarker_result;A(pose_landmarker_options,u),A(pose_landmarker_result,u);const pe="image_in",st="norm_rect",Pe="normalized_landmarks",Oe="world_landmarks",Ze="segmentation_masks",rt=.5;class gt extends Q.VisionTaskRunner{static createFromOptions(ut,ot){return Q.VisionTaskRunner.createVisionInstance(gt,ut,ot)}static createFromModelBuffer(ut,ot){return Q.VisionTaskRunner.createVisionInstance(gt,ut,{baseOptions:{modelAssetBuffer:ot}})}static createFromModelPath(ut,ot){return Q.VisionTaskRunner.createVisionInstance(gt,ut,{baseOptions:{modelAssetPath:ot}})}constructor(ut,ot){super(new Q.VisionGraphRunner(ut,ot),pe,st,!1),this.landmarks=[],this.worldLandmarks=[],this.outputSegmentationMasks=!1,this.options=new j.PoseLandmarkerGraphOptions,this.options.setBaseOptions(new i.BaseOptions),this.poseLandmarksDetectorGraphOptions=new $.PoseLandmarksDetectorGraphOptions,this.options.setPoseLandmarksDetectorGraphOptions(this.poseLandmarksDetectorGraphOptions),this.poseDetectorGraphOptions=new _.PoseDetectorGraphOptions,this.options.setPoseDetectorGraphOptions(this.poseDetectorGraphOptions),this.initDefaults()}get baseOptions(){return this.options.getBaseOptions()}set baseOptions(ut){this.options.setBaseOptions(ut)}setOptions(ut){var ot,Rt,Mt,Pt,It;return"numPoses"in ut&&this.poseDetectorGraphOptions.setNumPoses((ot=ut.numPoses)!==null&&ot!==void 0?ot:1),"minPoseDetectionConfidence"in ut&&this.poseDetectorGraphOptions.setMinDetectionConfidence((Rt=ut.minPoseDetectionConfidence)!==null&&Rt!==void 0?Rt:rt),"minTrackingConfidence"in ut&&this.options.setMinTrackingConfidence((Mt=ut.minTrackingConfidence)!==null&&Mt!==void 0?Mt:rt),"minPosePresenceConfidence"in ut&&this.poseLandmarksDetectorGraphOptions.setMinDetectionConfidence((Pt=ut.minPosePresenceConfidence)!==null&&Pt!==void 0?Pt:rt),"outputSegmentationMasks"in ut&&(this.outputSegmentationMasks=(It=ut.outputSegmentationMasks)!==null&&It!==void 0&&It),this.applyOptions(ut)}detect(ut,ot,Rt){const Mt=typeof ot!="function"?ot:{};return this.userCallback=typeof ot=="function"?ot:Rt,this.resetResults(),this.processImageData(ut,Mt),this.processResults()}detectForVideo(ut,ot,Rt,Mt){const Pt=typeof Rt!="function"?Rt:{};return this.userCallback=typeof Rt=="function"?Rt:Mt,this.resetResults(),this.processVideoData(ut,Pt,ot),this.processResults()}resetResults(){this.landmarks=[],this.worldLandmarks=[],this.segmentationMasks=void 0}processResults(){try{const ut=new ae.PoseLandmarkerResult(this.landmarks,this.worldLandmarks,this.segmentationMasks);if(!this.userCallback)return ut;this.userCallback(ut)}finally{this.freeKeepaliveStreams()}}initDefaults(){this.poseDetectorGraphOptions.setNumPoses(1),this.poseDetectorGraphOptions.setMinDetectionConfidence(rt),this.poseLandmarksDetectorGraphOptions.setMinDetectionConfidence(rt),this.options.setMinTrackingConfidence(rt)}addJsLandmarks(ut){this.landmarks=[];for(const ot of ut){const Rt=g.NormalizedLandmarkList.deserializeBinary(ot);this.landmarks.push((0,re.convertToLandmarks)(Rt))}}adddJsWorldLandmarks(ut){this.worldLandmarks=[];for(const ot of ut){const Rt=g.LandmarkList.deserializeBinary(ot);this.worldLandmarks.push((0,re.convertToWorldLandmarks)(Rt))}}refreshGraph(){const ut=new C.CalculatorGraphConfig;ut.addInputStream(pe),ut.addInputStream(st),ut.addOutputStream(Pe),ut.addOutputStream(Oe),ut.addOutputStream(Ze);const ot=new d.CalculatorOptions;ot.setExtension(j.PoseLandmarkerGraphOptions.ext,this.options);const Rt=new C.CalculatorGraphConfig.Node;Rt.setCalculator("mediapipe.tasks.vision.pose_landmarker.PoseLandmarkerGraph"),Rt.addInputStream("IMAGE:"+pe),Rt.addInputStream("NORM_RECT:"+st),Rt.addOutputStream("NORM_LANDMARKS:"+Pe),Rt.addOutputStream("WORLD_LANDMARKS:"+Oe),Rt.setOptions(ot),ut.addNode(Rt),this.addKeepaliveNode(ut),this.graphRunner.attachProtoVectorListener(Pe,(Pt,It)=>{this.addJsLandmarks(Pt),this.setLatestOutputTimestamp(It)}),this.graphRunner.attachEmptyPacketListener(Pe,Pt=>{this.landmarks=[],this.setLatestOutputTimestamp(Pt)}),this.graphRunner.attachProtoVectorListener(Oe,(Pt,It)=>{this.adddJsWorldLandmarks(Pt),this.setLatestOutputTimestamp(It)}),this.graphRunner.attachEmptyPacketListener(Oe,Pt=>{this.worldLandmarks=[],this.setLatestOutputTimestamp(Pt)}),this.outputSegmentationMasks&&(Rt.addOutputStream("SEGMENTATION_MASK:"+Ze),this.keepStreamAlive(Ze),this.graphRunner.attachImageVectorListener(Ze,(Pt,It)=>{this.segmentationMasks=Pt.map(xt=>this.convertToMPMask(xt,!this.userCallback)),this.setLatestOutputTimestamp(It)}),this.graphRunner.attachEmptyPacketListener(Ze,Pt=>{this.segmentationMasks=[],this.setLatestOutputTimestamp(Pt)}));const Mt=ut.serializeBinary();this.setGraph(new Uint8Array(Mt),!0)}}u.PoseLandmarker=gt,gt.POSE_CONNECTIONS=[{start:0,end:1},{start:1,end:2},{start:2,end:3},{start:3,end:7},{start:0,end:4},{start:4,end:5},{start:5,end:6},{start:6,end:8},{start:9,end:10},{start:11,end:12},{start:11,end:13},{start:13,end:15},{start:15,end:17},{start:15,end:19},{start:15,end:21},{start:17,end:19},{start:12,end:14},{start:14,end:16},{start:16,end:18},{start:16,end:20},{start:16,end:22},{start:18,end:20},{start:11,end:23},{start:12,end:24},{start:23,end:24},{start:23,end:25},{start:24,end:26},{start:25,end:27},{start:26,end:28},{start:27,end:29},{start:28,end:30},{start:29,end:31},{start:30,end:32},{start:27,end:31},{start:28,end:32}]}(pose_landmarker),Object.defineProperty(vision,"__esModule",{value:!0});var PoseLandmarker_1=vision.PoseLandmarker=ObjectDetector_1=vision.ObjectDetector=InteractiveSegmenter_1=vision.InteractiveSegmenter=ImageSegmenter_1=vision.ImageSegmenter=ImageEmbedder_1=vision.ImageEmbedder=ImageClassifier_1=vision.ImageClassifier=HandLandmarker_1=vision.HandLandmarker=GestureRecognizer_1=vision.GestureRecognizer=FaceStylizer_1=vision.FaceStylizer=FaceLandmarker_1=vision.FaceLandmarker=FaceDetector_1=vision.FaceDetector=MPMask_1=vision.MPMask=MPImage_1=vision.MPImage=FilesetResolver_1=vision.FilesetResolver=DrawingUtils_1=vision.DrawingUtils=void 0;const fileset_resolver_1=fileset_resolver,drawing_utils_1=drawing_utils,image_1=image,mask_1=mask,face_detector_1=face_detector,face_landmarker_1=face_landmarker,face_stylizer_1=face_stylizer,gesture_recognizer_1=gesture_recognizer,hand_landmarker_1=hand_landmarker,image_classifier_1=image_classifier,image_embedder_1=image_embedder,image_segmenter_1=image_segmenter,interactive_segmenter_1=interactive_segmenter,object_detector_1=object_detector,pose_landmarker_1=pose_landmarker,DrawingUtils=drawing_utils_1.DrawingUtils;var DrawingUtils_1=vision.DrawingUtils=DrawingUtils;const FilesetResolver=fileset_resolver_1.FilesetResolver;var FilesetResolver_1=vision.FilesetResolver=FilesetResolver;const MPImage=image_1.MPImage;var MPImage_1=vision.MPImage=MPImage;const MPMask=mask_1.MPMask;var MPMask_1=vision.MPMask=MPMask;const FaceDetector=face_detector_1.FaceDetector;var FaceDetector_1=vision.FaceDetector=FaceDetector;const FaceLandmarker=face_landmarker_1.FaceLandmarker;var FaceLandmarker_1=vision.FaceLandmarker=FaceLandmarker;const FaceStylizer=face_stylizer_1.FaceStylizer;var FaceStylizer_1=vision.FaceStylizer=FaceStylizer;const GestureRecognizer=gesture_recognizer_1.GestureRecognizer;var GestureRecognizer_1=vision.GestureRecognizer=GestureRecognizer;const HandLandmarker=hand_landmarker_1.HandLandmarker;var HandLandmarker_1=vision.HandLandmarker=HandLandmarker;const ImageClassifier=image_classifier_1.ImageClassifier;var ImageClassifier_1=vision.ImageClassifier=ImageClassifier;const ImageEmbedder=image_embedder_1.ImageEmbedder;var ImageEmbedder_1=vision.ImageEmbedder=ImageEmbedder;const ImageSegmenter=image_segmenter_1.ImageSegmenter;var ImageSegmenter_1=vision.ImageSegmenter=ImageSegmenter;const InteractiveSegmenter=interactive_segmenter_1.InteractiveSegmenter;var InteractiveSegmenter_1=vision.InteractiveSegmenter=InteractiveSegmenter;const ObjectDetector=object_detector_1.ObjectDetector;var ObjectDetector_1=vision.ObjectDetector=ObjectDetector;const PoseLandmarker=pose_landmarker_1.PoseLandmarker;PoseLandmarker_1=vision.PoseLandmarker=PoseLandmarker},9477:function(u,n,A){"use strict";A.r(n),A.d(n,{ACESFilmicToneMapping:function(){return Eo},AddEquation:function(){return Pt},AddOperation:function(){return Ur},AdditiveAnimationBlendMode:function(){return Hu},AdditiveBlending:function(){return ut},AlphaFormat:function(){return Ep},AlwaysCompare:function(){return Na},AlwaysDepth:function(){return fn},AlwaysStencilFunc:function(){return Lc},AmbientLight:function(){return Bv},AmbientLightProbe:function(){return Zr},AnimationAction:function(){return Ei},AnimationClip:function(){return mm},AnimationLoader:function(){return rc},AnimationMixer:function(){return X3},AnimationObjectGroup:function(){return K3},AnimationUtils:function(){return eA},ArcCurve:function(){return qy},ArrayCamera:function(){return jg},ArrowHelper:function(){return Vv},Audio:function(){return Ov},AudioAnalyser:function(){return U3},AudioContext:function(){return aA},AudioListener:function(){return lA},AudioLoader:function(){return P3},AxesHelper:function(){return hA},BackSide:function(){return Oe},BasicDepthPacking:function(){return Im},BasicShadowMap:function(){return Q},Bone:function(){return Uy},BooleanKeyframeTrack:function(){return nc},Box2:function(){return Wf},Box3:function(){return Qo},Box3Helper:function(){return Hv},BoxBufferGeometry:function(){return fA},BoxGeometry:function(){return Fl},BoxHelper:function(){return Oh},BufferAttribute:function(){return no},BufferGeometry:function(){return mi},BufferGeometryLoader:function(){return ym},ByteType:function(){return ta},Cache:function(){return Cd},Camera:function(){return Qi},CameraHelper:function(){return Mm},CanvasTexture:function(){return l3},CapsuleBufferGeometry:function(){return gA},CapsuleGeometry:function(){return Ff},CatmullRomCurve3:function(){return $y},CineonToneMapping:function(){return uo},CircleBufferGeometry:function(){return k0},CircleGeometry:function(){return tm},ClampToEdgeWrapping:function(){return yo},Clock:function(){return Vc},Color:function(){return br},ColorKeyframeTrack:function(){return tA},ColorManagement:function(){return $o},CompressedArrayTexture:function(){return Zy},CompressedTexture:function(){return G1},CompressedTextureLoader:function(){return T3},ConeBufferGeometry:function(){return Kf},ConeGeometry:function(){return nm},CubeCamera:function(){return Eu},CubeReflectionMapping:function(){return Io},CubeRefractionMapping:function(){return $i},CubeTexture:function(){return Es},CubeTextureLoader:function(){return B3},CubeUVReflectionMapping:function(){return bs},CubicBezierCurve:function(){return v0},CubicBezierCurve3:function(){return nv},CubicInterpolant:function(){return vv},CullFaceBack:function(){return j},CullFaceFront:function(){return $},CullFaceFrontBack:function(){return re},CullFaceNone:function(){return _},Curve:function(){return dp},CurvePath:function(){return rv},CustomBlending:function(){return Mt},CustomToneMapping:function(){return Go},CylinderBufferGeometry:function(){return Z3},CylinderGeometry:function(){return bd},Cylindrical:function(){return zv},Data3DTexture:function(){return es},DataArrayTexture:function(){return ia},DataTexture:function(){return wf},DataTextureLoader:function(){return R3},DataUtils:function(){return id},DecrementStencilOp:function(){return og},DecrementWrapStencilOp:function(){return Hs},DefaultLoadingManager:function(){return nA},DepthFormat:function(){return Wn},DepthStencilFormat:function(){return Vn},DepthTexture:function(){return Fy},DirectionalLight:function(){return Tv},DirectionalLightHelper:function(){return ki},DiscreteInterpolant:function(){return _v},DisplayP3ColorSpace:function(){return ru},DodecahedronBufferGeometry:function(){return Kv},DodecahedronGeometry:function(){return Zs},DoubleSide:function(){return Ze},DstAlphaFactor:function(){return fr},DstColorFactor:function(){return ct},DynamicCopyUsage:function(){return Pc},DynamicDrawUsage:function(){return Wu},DynamicReadUsage:function(){return su},EdgesGeometry:function(){return iv},EllipseCurve:function(){return Pl},EqualCompare:function(){return Om},EqualDepth:function(){return kt},EqualStencilFunc:function(){return qc},EquirectangularReflectionMapping:function(){return gi},EquirectangularRefractionMapping:function(){return bo},Euler:function(){return Rl},EventDispatcher:function(){return wa},ExtrudeBufferGeometry:function(){return Xv},ExtrudeGeometry:function(){return Sh},FileLoader:function(){return Lu},Float16BufferAttribute:function(){return Uc},Float32BufferAttribute:function(){return Dr},Float64BufferAttribute:function(){return of},FloatType:function(){return gs},Fog:function(){return bf},FogExp2:function(){return u0},FramebufferTexture:function(){return Jy},FrontSide:function(){return Pe},Frustum:function(){return ch},GLBufferAttribute:function(){return jf},GLSL1:function(){return dc},GLSL3:function(){return ja},GreaterCompare:function(){return Cl},GreaterDepth:function(){return or},GreaterEqualCompare:function(){return Ua},GreaterEqualDepth:function(){return yn},GreaterEqualStencilFunc:function(){return Fm},GreaterStencilFunc:function(){return Hh},GridHelper:function(){return li},Group:function(){return Ef},HalfFloatType:function(){return za},HemisphereLight:function(){return Mv},HemisphereLightHelper:function(){return J3},HemisphereLightProbe:function(){return Lt},IcosahedronBufferGeometry:function(){return q3},IcosahedronGeometry:function(){return sm},ImageBitmapLoader:function(){return L3},ImageLoader:function(){return Gf},ImageUtils:function(){return wp},IncrementStencilOp:function(){return jh},IncrementWrapStencilOp:function(){return xl},InstancedBufferAttribute:function(){return Tf},InstancedBufferGeometry:function(){return Rv},InstancedInterleavedBuffer:function(){return sn},InstancedMesh:function(){return m0},Int16BufferAttribute:function(){return ih},Int32BufferAttribute:function(){return l1},Int8BufferAttribute:function(){return Gc},IntType:function(){return na},InterleavedBuffer:function(){return d0},InterleavedBufferAttribute:function(){return vh},Interpolant:function(){return Wc},InterpolateDiscrete:function(){return ra},InterpolateLinear:function(){return ju},InterpolateSmooth:function(){return Gh},InvertStencilOp:function(){return sg},KeepStencilOp:function(){return Zc},KeyframeTrack:function(){return qa},LOD:function(){return O1},LatheBufferGeometry:function(){return $3},LatheGeometry:function(){return em},Layers:function(){return rp},LessCompare:function(){return ou},LessDepth:function(){return At},LessEqualCompare:function(){return Un},LessEqualDepth:function(){return Ot},LessEqualStencilFunc:function(){return Qd},LessStencilFunc:function(){return lc},Light:function(){return Sd},LightProbe:function(){return Am},Line:function(){return Ed},Line3:function(){return Gv},LineBasicMaterial:function(){return ml},LineCurve:function(){return _0},LineCurve3:function(){return Co},LineDashedMaterial:function(){return Av},LineLoop:function(){return Yg},LineSegments:function(){return Al},LinearEncoding:function(){return nu},LinearFilter:function(){return ho},LinearInterpolant:function(){return hm},LinearMipMapLinearFilter:function(){return ws},LinearMipMapNearestFilter:function(){return Gi},LinearMipmapLinearFilter:function(){return Fo},LinearMipmapNearestFilter:function(){return Ca},LinearSRGBColorSpace:function(){return al},LinearToneMapping:function(){return Si},Loader:function(){return yl},LoaderUtils:function(){return sA},LoadingManager:function(){return zf},LoopOnce:function(){return bp},LoopPingPong:function(){return Hd},LoopRepeat:function(){return Bs},LuminanceAlphaFormat:function(){return dn},LuminanceFormat:function(){return bt},MOUSE:function(){return g},Material:function(){return Xs},MaterialLoader:function(){return D0},MathUtils:function(){return Qu},Matrix3:function(){return wi},Matrix4:function(){return ui},MaxEquation:function(){return Mn},Mesh:function(){return Oo},MeshBasicMaterial:function(){return Ec},MeshDepthMaterial:function(){return yd},MeshDistanceMaterial:function(){return wy},MeshLambertMaterial:function(){return gv},MeshMatcapMaterial:function(){return mv},MeshNormalMaterial:function(){return fv},MeshPhongMaterial:function(){return kf},MeshPhysicalMaterial:function(){return J1},MeshStandardMaterial:function(){return Y1},MeshToonMaterial:function(){return Z1},MinEquation:function(){return ln},MirroredRepeatWrapping:function(){return Aa},MixOperation:function(){return oi},MultiplyBlending:function(){return Rt},MultiplyOperation:function(){return Or},NearestFilter:function(){return Vi},NearestMipMapLinearFilter:function(){return il},NearestMipMapNearestFilter:function(){return El},NearestMipmapLinearFilter:function(){return Ss},NearestMipmapNearestFilter:function(){return Gs},NeverCompare:function(){return ag},NeverDepth:function(){return Tt},NeverStencilFunc:function(){return Vd},NoBlending:function(){return gt},NoColorSpace:function(){return Ml},NoToneMapping:function(){return Ci},NormalAnimationBlendMode:function(){return tu},NormalBlending:function(){return at},NotEqualCompare:function(){return to},NotEqualDepth:function(){return pr},NotEqualStencilFunc:function(){return cc},NumberKeyframeTrack:function(){return fm},Object3D:function(){return Yi},ObjectLoader:function(){return O3},ObjectSpaceNormalMap:function(){return Nh},OctahedronBufferGeometry:function(){return eE},OctahedronGeometry:function(){return Lf},OneFactor:function(){return mt},OneMinusDstAlphaFactor:function(){return _t},OneMinusDstColorFactor:function(){return nt},OneMinusSrcAlphaFactor:function(){return Ln},OneMinusSrcColorFactor:function(){return un},OrthographicCamera:function(){return yf},PCFShadowMap:function(){return ae},PCFSoftShadowMap:function(){return pe},PMREMGenerator:function(){return fh},Path:function(){return $g},PerspectiveCamera:function(){return Ji},Plane:function(){return $l},PlaneBufferGeometry:function(){return Yv},PlaneGeometry:function(){return Pp},PlaneHelper:function(){return Wv},PointLight:function(){return wv},PointLightHelper:function(){return Y3},Points:function(){return Xy},PointsMaterial:function(){return up},PolarGridHelper:function(){return jv},PolyhedronBufferGeometry:function(){return Xf},PolyhedronGeometry:function(){return Fu},PositionalAudio:function(){return G3},PropertyBinding:function(){return go},PropertyMixer:function(){return Dv},QuadraticBezierCurve:function(){return qg},QuadraticBezierCurve3:function(){return H1},Quaternion:function(){return aa},QuaternionKeyframeTrack:function(){return xd},QuaternionLinearInterpolant:function(){return Ev},RED_GREEN_RGTC2_Format:function(){return as},RED_RGTC1_Format:function(){return Ga},REVISION:function(){return d},RGBADepthPacking:function(){return Uh},RGBAFormat:function(){return Je},RGBAIntegerFormat:function(){return Sr},RGBA_ASTC_10x10_Format:function(){return sl},RGBA_ASTC_10x5_Format:function(){return ms},RGBA_ASTC_10x6_Format:function(){return fo},RGBA_ASTC_10x8_Format:function(){return ao},RGBA_ASTC_12x10_Format:function(){return qo},RGBA_ASTC_12x12_Format:function(){return Ts},RGBA_ASTC_4x4_Format:function(){return vr},RGBA_ASTC_5x4_Format:function(){return Br},RGBA_ASTC_5x5_Format:function(){return si},RGBA_ASTC_6x5_Format:function(){return Ui},RGBA_ASTC_6x6_Format:function(){return Uo},RGBA_ASTC_8x5_Format:function(){return xo},RGBA_ASTC_8x6_Format:function(){return Rr},RGBA_ASTC_8x8_Format:function(){return Xi},RGBA_BPTC_Format:function(){return ac},RGBA_ETC2_EAC_Format:function(){return mn},RGBA_PVRTC_2BPPV1_Format:function(){return Se},RGBA_PVRTC_4BPPV1_Format:function(){return yr},RGBA_S3TC_DXT1_Format:function(){return Vt},RGBA_S3TC_DXT3_Format:function(){return gn},RGBA_S3TC_DXT5_Format:function(){return vn},RGB_ETC1_Format:function(){return Ke},RGB_ETC2_Format:function(){return yt},RGB_PVRTC_2BPPV1_Format:function(){return Kr},RGB_PVRTC_4BPPV1_Format:function(){return Pn},RGB_S3TC_DXT1_Format:function(){return wt},RGFormat:function(){return Ar},RGIntegerFormat:function(){return Bn},RawShaderMaterial:function(){return hv},Ray:function(){return Rp},Raycaster:function(){return Fh},RectAreaLight:function(){return Ti},RedFormat:function(){return gr},RedIntegerFormat:function(){return Xr},ReinhardToneMapping:function(){return qi},RepeatWrapping:function(){return ss},ReplaceStencilOp:function(){return iu},ReverseSubtractEquation:function(){return xt},RingBufferGeometry:function(){return mA},RingGeometry:function(){return am},SIGNED_RED_GREEN_RGTC2_Format:function(){return Sa},SIGNED_RED_RGTC1_Format:function(){return js},SRGBColorSpace:function(){return Qn},Scene:function(){return Ly},ShaderChunk:function(){return ji},ShaderLib:function(){return jc},ShaderMaterial:function(){return ai},ShadowMaterial:function(){return dv},Shape:function(){return Mh},ShapeBufferGeometry:function(){return z0},ShapeGeometry:function(){return lm},ShapePath:function(){return Qv},ShapeUtils:function(){return Sc},ShortType:function(){return bl},Skeleton:function(){return g0},SkeletonHelper:function(){return uA},SkinnedMesh:function(){return a3},Source:function(){return Vl},Sphere:function(){return Ta},SphereBufferGeometry:function(){return Jv},SphereGeometry:function(){return Pf},Spherical:function(){return kv},SphericalHarmonics3:function(){return oA},SplineCurve:function(){return W1},SpotLight:function(){return Cv},SpotLightHelper:function(){return vm},Sprite:function(){return F1},SpriteMaterial:function(){return B1},SrcAlphaFactor:function(){return On},SrcAlphaSaturateFactor:function(){return St},SrcColorFactor:function(){return rn},StaticCopyUsage:function(){return uc},StaticDrawUsage:function(){return pc},StaticReadUsage:function(){return Xd},StereoCamera:function(){return us},StreamCopyUsage:function(){return Wh},StreamDrawUsage:function(){return Kd},StreamReadUsage:function(){return Ws},StringKeyframeTrack:function(){return Ou},SubtractEquation:function(){return It},SubtractiveBlending:function(){return ot},TOUCH:function(){return i},TangentSpaceNormalMap:function(){return Li},TetrahedronBufferGeometry:function(){return Zv},TetrahedronGeometry:function(){return cm},Texture:function(){return ps},TextureLoader:function(){return bv},TorusBufferGeometry:function(){return AA},TorusGeometry:function(){return pm},TorusKnotBufferGeometry:function(){return tE},TorusKnotGeometry:function(){return um},Triangle:function(){return Ks},TriangleFanDrawMode:function(){return Wd},TriangleStripDrawMode:function(){return YA},TrianglesDrawMode:function(){return s1},TubeBufferGeometry:function(){return qv},TubeGeometry:function(){return dm},TwoPassDoubleSide:function(){return rt},UVMapping:function(){return Wo},Uint16BufferAttribute:function(){return Mc},Uint32BufferAttribute:function(){return lr},Uint8BufferAttribute:function(){return rh},Uint8ClampedBufferAttribute:function(){return zm},Uniform:function(){return pA},UniformsGroup:function(){return di},UniformsLib:function(){return ur},UniformsUtils:function(){return lh},UnsignedByteType:function(){return Mo},UnsignedInt248Type:function(){return ol},UnsignedIntType:function(){return Ns},UnsignedShort4444Type:function(){return ya},UnsignedShort5551Type:function(){return _p},UnsignedShortType:function(){return Us},VSMShadowMap:function(){return st},Vector2:function(){return _n},Vector3:function(){return je},Vector4:function(){return lo},VectorKeyframeTrack:function(){return gm},VideoTexture:function(){return z1},WebGL1Renderer:function(){return Dy},WebGL3DRenderTarget:function(){return oa},WebGLArrayRenderTarget:function(){return du},WebGLCoordinateSystem:function(){return Ha},WebGLCubeRenderTarget:function(){return ud},WebGLMultipleRenderTargets:function(){return sa},WebGLRenderTarget:function(){return pl},WebGLRenderer:function(){return T1},WebGLUtils:function(){return w1},WebGPUCoordinateSystem:function(){return $c},WireframeGeometry:function(){return cv},WrapAroundEnding:function(){return eu},ZeroCurvatureEnding:function(){return $p},ZeroFactor:function(){return Xn},ZeroSlopeEnding:function(){return Dc},ZeroStencilOp:function(){return Ms},_SRGBAFormat:function(){return As},sRGBEncoding:function(){return Nl}});var C=A(5108);/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const d="153",g={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},i={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},_=0,j=1,$=2,re=3,Q=0,ae=1,pe=2,st=3,Pe=0,Oe=1,Ze=2,rt=2,gt=0,at=1,ut=2,ot=3,Rt=4,Mt=5,Pt=100,It=101,xt=102,ln=103,Mn=104,Xn=200,mt=201,rn=202,un=203,On=204,Ln=205,fr=206,_t=207,ct=208,nt=209,St=210,Tt=0,fn=1,At=2,Ot=3,kt=4,yn=5,or=6,pr=7,Or=0,oi=1,Ur=2,Ci=0,Si=1,qi=2,uo=3,Eo=4,Go=5,Wo=300,Io=301,$i=302,gi=303,bo=304,bs=306,ss=1e3,yo=1001,Aa=1002,Vi=1003,Gs=1004,El=1004,Ss=1005,il=1005,ho=1006,Ca=1007,Gi=1007,Fo=1008,ws=1008,Mo=1009,ta=1010,bl=1011,Us=1012,na=1013,Ns=1014,gs=1015,za=1016,ya=1017,_p=1018,ol=1020,Ep=1021,Je=1023,bt=1024,dn=1025,Wn=1026,Vn=1027,gr=1028,Xr=1029,Ar=1030,Bn=1031,Sr=1033,wt=33776,Vt=33777,gn=33778,vn=33779,Pn=35840,Kr=35841,yr=35842,Se=35843,Ke=36196,yt=37492,mn=37496,vr=37808,Br=37809,si=37810,Ui=37811,Uo=37812,xo=37813,Rr=37814,Xi=37815,ms=37816,fo=37817,ao=37818,sl=37819,qo=37820,Ts=37821,ac=36492,Ga=36283,js=36284,as=36285,Sa=36286,bp=2200,Bs=2201,Hd=2202,ra=2300,ju=2301,Gh=2302,$p=2400,Dc=2401,eu=2402,tu=2500,Hu=2501,s1=0,YA=1,Wd=2,nu=3e3,Nl=3001,Im=3200,Uh=3201,Li=0,Nh=1,Ml="",Qn="srgb",al="srgb-linear",ru="display-p3",Ms=0,Zc=7680,iu=7681,jh=7682,og=7683,xl=34055,Hs=34056,sg=5386,Vd=512,lc=513,qc=514,Qd=515,Hh=516,cc=517,Fm=518,Lc=519,ag=512,ou=513,Om=514,Un=515,Cl=516,to=517,Ua=518,Na=519,pc=35044,Wu=35048,Kd=35040,Xd=35045,su=35049,Ws=35041,uc=35046,Pc=35050,Wh=35042,dc="100",ja="300 es",As=1035,Ha=2e3,$c=2001;class wa{addEventListener(e,o){this._listeners===void 0&&(this._listeners={});const f=this._listeners;f[e]===void 0&&(f[e]=[]),f[e].indexOf(o)===-1&&f[e].push(o)}hasEventListener(e,o){if(this._listeners===void 0)return!1;const f=this._listeners;return f[e]!==void 0&&f[e].indexOf(o)!==-1}removeEventListener(e,o){if(this._listeners===void 0)return;const y=this._listeners[e];if(y!==void 0){const b=y.indexOf(o);b!==-1&&y.splice(b,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const f=this._listeners[e.type];if(f!==void 0){e.target=this;const y=f.slice(0);for(let b=0,B=y.length;b<B;b++)y[b].call(this,e);e.target=null}}}const va=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Vh=1234567;const kc=Math.PI/180,hc=180/Math.PI;function ll(){const S=Math.random()*4294967295|0,e=Math.random()*4294967295|0,o=Math.random()*4294967295|0,f=Math.random()*4294967295|0;return(va[S&255]+va[S>>8&255]+va[S>>16&255]+va[S>>24&255]+"-"+va[e&255]+va[e>>8&255]+"-"+va[e>>16&15|64]+va[e>>24&255]+"-"+va[o&63|128]+va[o>>8&255]+"-"+va[o>>16&255]+va[o>>24&255]+va[f&255]+va[f>>8&255]+va[f>>16&255]+va[f>>24&255]).toLowerCase()}function ls(S,e,o){return Math.max(e,Math.min(o,S))}function Qh(S,e){return(S%e+e)%e}function Sl(S,e,o,f,y){return f+(S-e)*(y-f)/(o-e)}function ep(S,e,o){return S!==e?(o-S)/(e-S):0}function wl(S,e,o){return(1-o)*S+o*e}function Kh(S,e,o,f){return wl(S,e,1-Math.exp(-o*f))}function Xh(S,e=1){return e-Math.abs(Qh(S,e*2)-e)}function jl(S,e,o){return S<=e?0:S>=o?1:(S=(S-e)/(o-e),S*S*(3-2*S))}function Hl(S,e,o){return S<=e?0:S>=o?1:(S=(S-e)/(o-e),S*S*S*(S*(S*6-15)+10))}function au(S,e){return S+Math.floor(Math.random()*(e-S+1))}function tp(S,e){return S+Math.random()*(e-S)}function np(S){return S*(.5-Math.random())}function lu(S){S!==void 0&&(Vh=S);let e=Vh+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function Dm(S){return S*kc}function Yd(S){return S*hc}function Vu(S){return(S&S-1)===0&&S!==0}function Vs(S){return Math.pow(2,Math.ceil(Math.log(S)/Math.LN2))}function _a(S){return Math.pow(2,Math.floor(Math.log(S)/Math.LN2))}function Vo(S,e,o,f,y){const b=Math.cos,B=Math.sin,I=b(o/2),D=B(o/2),N=b((e+f)/2),K=B((e+f)/2),Z=b((e-f)/2),q=B((e-f)/2),ee=b((f-e)/2),ie=B((f-e)/2);switch(y){case"XYX":S.set(I*K,D*Z,D*q,I*N);break;case"YZY":S.set(D*q,I*K,D*Z,I*N);break;case"ZXZ":S.set(D*Z,D*q,I*K,I*N);break;case"XZX":S.set(I*K,D*ie,D*ee,I*N);break;case"YXY":S.set(D*ee,I*K,D*ie,I*N);break;case"ZYZ":S.set(D*ie,D*ee,I*K,I*N);break;default:C.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+y)}}function Rs(S,e){switch(e.constructor){case Float32Array:return S;case Uint32Array:return S/4294967295;case Uint16Array:return S/65535;case Uint8Array:return S/255;case Int32Array:return Math.max(S/2147483647,-1);case Int16Array:return Math.max(S/32767,-1);case Int8Array:return Math.max(S/127,-1);default:throw new Error("Invalid component type.")}}function ei(S,e){switch(e.constructor){case Float32Array:return S;case Uint32Array:return Math.round(S*4294967295);case Uint16Array:return Math.round(S*65535);case Uint8Array:return Math.round(S*255);case Int32Array:return Math.round(S*2147483647);case Int16Array:return Math.round(S*32767);case Int8Array:return Math.round(S*127);default:throw new Error("Invalid component type.")}}const Qu={DEG2RAD:kc,RAD2DEG:hc,generateUUID:ll,clamp:ls,euclideanModulo:Qh,mapLinear:Sl,inverseLerp:ep,lerp:wl,damp:Kh,pingpong:Xh,smoothstep:jl,smootherstep:Hl,randInt:au,randFloat:tp,randFloatSpread:np,seededRandom:lu,degToRad:Dm,radToDeg:Yd,isPowerOfTwo:Vu,ceilPowerOfTwo:Vs,floorPowerOfTwo:_a,setQuaternionFromProperEuler:Vo,normalize:ei,denormalize:Rs};class _n{constructor(e=0,o=0){_n.prototype.isVector2=!0,this.x=e,this.y=o}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,o){return this.x=e,this.y=o,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,o){switch(e){case 0:this.x=o;break;case 1:this.y=o;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,o){return this.x=e.x+o.x,this.y=e.y+o.y,this}addScaledVector(e,o){return this.x+=e.x*o,this.y+=e.y*o,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,o){return this.x=e.x-o.x,this.y=e.y-o.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const o=this.x,f=this.y,y=e.elements;return this.x=y[0]*o+y[3]*f+y[6],this.y=y[1]*o+y[4]*f+y[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,o){return this.x=Math.max(e.x,Math.min(o.x,this.x)),this.y=Math.max(e.y,Math.min(o.y,this.y)),this}clampScalar(e,o){return this.x=Math.max(e,Math.min(o,this.x)),this.y=Math.max(e,Math.min(o,this.y)),this}clampLength(e,o){const f=this.length();return this.divideScalar(f||1).multiplyScalar(Math.max(e,Math.min(o,f)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const o=Math.sqrt(this.lengthSq()*e.lengthSq());if(o===0)return Math.PI/2;const f=this.dot(e)/o;return Math.acos(ls(f,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const o=this.x-e.x,f=this.y-e.y;return o*o+f*f}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,o){return this.x+=(e.x-this.x)*o,this.y+=(e.y-this.y)*o,this}lerpVectors(e,o,f){return this.x=e.x+(o.x-e.x)*f,this.y=e.y+(o.y-e.y)*f,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,o=0){return this.x=e[o],this.y=e[o+1],this}toArray(e=[],o=0){return e[o]=this.x,e[o+1]=this.y,e}fromBufferAttribute(e,o){return this.x=e.getX(o),this.y=e.getY(o),this}rotateAround(e,o){const f=Math.cos(o),y=Math.sin(o),b=this.x-e.x,B=this.y-e.y;return this.x=b*f-B*y+e.x,this.y=b*y+B*f+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class wi{constructor(e,o,f,y,b,B,I,D,N){wi.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,o,f,y,b,B,I,D,N)}set(e,o,f,y,b,B,I,D,N){const K=this.elements;return K[0]=e,K[1]=y,K[2]=I,K[3]=o,K[4]=b,K[5]=D,K[6]=f,K[7]=B,K[8]=N,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const o=this.elements,f=e.elements;return o[0]=f[0],o[1]=f[1],o[2]=f[2],o[3]=f[3],o[4]=f[4],o[5]=f[5],o[6]=f[6],o[7]=f[7],o[8]=f[8],this}extractBasis(e,o,f){return e.setFromMatrix3Column(this,0),o.setFromMatrix3Column(this,1),f.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const o=e.elements;return this.set(o[0],o[4],o[8],o[1],o[5],o[9],o[2],o[6],o[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,o){const f=e.elements,y=o.elements,b=this.elements,B=f[0],I=f[3],D=f[6],N=f[1],K=f[4],Z=f[7],q=f[2],ee=f[5],ie=f[8],he=y[0],se=y[3],ne=y[6],be=y[1],fe=y[4],xe=y[7],Le=y[2],He=y[5],qe=y[8];return b[0]=B*he+I*be+D*Le,b[3]=B*se+I*fe+D*He,b[6]=B*ne+I*xe+D*qe,b[1]=N*he+K*be+Z*Le,b[4]=N*se+K*fe+Z*He,b[7]=N*ne+K*xe+Z*qe,b[2]=q*he+ee*be+ie*Le,b[5]=q*se+ee*fe+ie*He,b[8]=q*ne+ee*xe+ie*qe,this}multiplyScalar(e){const o=this.elements;return o[0]*=e,o[3]*=e,o[6]*=e,o[1]*=e,o[4]*=e,o[7]*=e,o[2]*=e,o[5]*=e,o[8]*=e,this}determinant(){const e=this.elements,o=e[0],f=e[1],y=e[2],b=e[3],B=e[4],I=e[5],D=e[6],N=e[7],K=e[8];return o*B*K-o*I*N-f*b*K+f*I*D+y*b*N-y*B*D}invert(){const e=this.elements,o=e[0],f=e[1],y=e[2],b=e[3],B=e[4],I=e[5],D=e[6],N=e[7],K=e[8],Z=K*B-I*N,q=I*D-K*b,ee=N*b-B*D,ie=o*Z+f*q+y*ee;if(ie===0)return this.set(0,0,0,0,0,0,0,0,0);const he=1/ie;return e[0]=Z*he,e[1]=(y*N-K*f)*he,e[2]=(I*f-y*B)*he,e[3]=q*he,e[4]=(K*o-y*D)*he,e[5]=(y*b-I*o)*he,e[6]=ee*he,e[7]=(f*D-N*o)*he,e[8]=(B*o-f*b)*he,this}transpose(){let e;const o=this.elements;return e=o[1],o[1]=o[3],o[3]=e,e=o[2],o[2]=o[6],o[6]=e,e=o[5],o[5]=o[7],o[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const o=this.elements;return e[0]=o[0],e[1]=o[3],e[2]=o[6],e[3]=o[1],e[4]=o[4],e[5]=o[7],e[6]=o[2],e[7]=o[5],e[8]=o[8],this}setUvTransform(e,o,f,y,b,B,I){const D=Math.cos(b),N=Math.sin(b);return this.set(f*D,f*N,-f*(D*B+N*I)+B+e,-y*N,y*D,-y*(-N*B+D*I)+I+o,0,0,1),this}scale(e,o){return this.premultiply(Jd.makeScale(e,o)),this}rotate(e){return this.premultiply(Jd.makeRotation(-e)),this}translate(e,o){return this.premultiply(Jd.makeTranslation(e,o)),this}makeTranslation(e,o){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,o,0,0,1),this}makeRotation(e){const o=Math.cos(e),f=Math.sin(e);return this.set(o,-f,0,f,o,0,0,0,1),this}makeScale(e,o){return this.set(e,0,0,0,o,0,0,0,1),this}equals(e){const o=this.elements,f=e.elements;for(let y=0;y<9;y++)if(o[y]!==f[y])return!1;return!0}fromArray(e,o=0){for(let f=0;f<9;f++)this.elements[f]=e[f+o];return this}toArray(e=[],o=0){const f=this.elements;return e[o]=f[0],e[o+1]=f[1],e[o+2]=f[2],e[o+3]=f[3],e[o+4]=f[4],e[o+5]=f[5],e[o+6]=f[6],e[o+7]=f[7],e[o+8]=f[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const Jd=new wi;function Ku(S){for(let e=S.length-1;e>=0;--e)if(S[e]>=65535)return!0;return!1}const Mp={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Wl(S,e){return new Mp[S](e)}function xp(S){return document.createElementNS("http://www.w3.org/1999/xhtml",S)}const cu={};function fc(S){S in cu||(cu[S]=!0,C.warn(S))}function pu(S){return S<.04045?S*.0773993808:Math.pow(S*.9478672986+.0521327014,2.4)}function Xu(S){return S<.0031308?S*12.92:1.055*Math.pow(S,.41666)-.055}const gc=new wi().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),Cp=new wi().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function cl(S){return S.convertSRGBToLinear().applyMatrix3(Cp)}function cs(S){return S.applyMatrix3(gc).convertLinearToSRGB()}const Yu={[al]:S=>S,[Qn]:S=>S.convertSRGBToLinear(),[ru]:cl},Ju={[al]:S=>S,[Qn]:S=>S.convertLinearToSRGB(),[ru]:cs},$o={enabled:!0,get legacyMode(){return C.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(S){C.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!S},get workingColorSpace(){return al},set workingColorSpace(S){C.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(S,e,o){if(this.enabled===!1||e===o||!e||!o)return S;const f=Yu[e],y=Ju[o];if(f===void 0||y===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${o}".`);return y(f(S))},fromWorkingColorSpace:function(S,e){return this.convert(S,this.workingColorSpace,e)},toWorkingColorSpace:function(S,e){return this.convert(S,e,this.workingColorSpace)}};let Sp;class wp{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement=="undefined")return e.src;let o;if(e instanceof HTMLCanvasElement)o=e;else{Sp===void 0&&(Sp=xp("canvas")),Sp.width=e.width,Sp.height=e.height;const f=Sp.getContext("2d");e instanceof ImageData?f.putImageData(e,0,0):f.drawImage(e,0,0,e.width,e.height),o=Sp}return o.width>2048||o.height>2048?(C.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),o.toDataURL("image/jpeg",.6)):o.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement!="undefined"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&e instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap){const o=xp("canvas");o.width=e.width,o.height=e.height;const f=o.getContext("2d");f.drawImage(e,0,0,e.width,e.height);const y=f.getImageData(0,0,e.width,e.height),b=y.data;for(let B=0;B<b.length;B++)b[B]=pu(b[B]/255)*255;return f.putImageData(y,0,0),o}else if(e.data){const o=e.data.slice(0);for(let f=0;f<o.length;f++)o instanceof Uint8Array||o instanceof Uint8ClampedArray?o[f]=Math.floor(pu(o[f]/255)*255):o[f]=pu(o[f]);return{data:o,width:e.width,height:e.height}}else return C.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Zu=0;class Vl{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Zu++}),this.uuid=ll(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const o=e===void 0||typeof e=="string";if(!o&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const f={uuid:this.uuid,url:""},y=this.data;if(y!==null){let b;if(Array.isArray(y)){b=[];for(let B=0,I=y.length;B<I;B++)y[B].isDataTexture?b.push(No(y[B].image)):b.push(No(y[B]))}else b=No(y);f.url=b}return o||(e.images[this.uuid]=f),f}}function No(S){return typeof HTMLImageElement!="undefined"&&S instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&S instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&S instanceof ImageBitmap?wp.getDataURL(S):S.data?{data:Array.from(S.data),width:S.width,height:S.height,type:S.data.constructor.name}:(C.warn("THREE.Texture: Unable to serialize Texture."),{})}let uu=0;class ps extends wa{constructor(e=ps.DEFAULT_IMAGE,o=ps.DEFAULT_MAPPING,f=yo,y=yo,b=ho,B=Fo,I=Je,D=Mo,N=ps.DEFAULT_ANISOTROPY,K=Ml){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:uu++}),this.uuid=ll(),this.name="",this.source=new Vl(e),this.mipmaps=[],this.mapping=o,this.channel=0,this.wrapS=f,this.wrapT=y,this.magFilter=b,this.minFilter=B,this.anisotropy=N,this.format=I,this.internalFormat=null,this.type=D,this.offset=new _n(0,0),this.repeat=new _n(1,1),this.center=new _n(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new wi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof K=="string"?this.colorSpace=K:(fc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=K===Nl?Qn:Ml),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const o=e===void 0||typeof e=="string";if(!o&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const f={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(f.userData=this.userData),o||(e.textures[this.uuid]=f),f}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Wo)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ss:e.x=e.x-Math.floor(e.x);break;case yo:e.x=e.x<0?0:1;break;case Aa:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ss:e.y=e.y-Math.floor(e.y);break;case yo:e.y=e.y<0?0:1;break;case Aa:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return fc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===Qn?Nl:nu}set encoding(e){fc("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===Nl?Qn:Ml}}ps.DEFAULT_IMAGE=null,ps.DEFAULT_MAPPING=Wo,ps.DEFAULT_ANISOTROPY=1;class lo{constructor(e=0,o=0,f=0,y=1){lo.prototype.isVector4=!0,this.x=e,this.y=o,this.z=f,this.w=y}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,o,f,y){return this.x=e,this.y=o,this.z=f,this.w=y,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,o){switch(e){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;case 3:this.w=o;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,o){return this.x=e.x+o.x,this.y=e.y+o.y,this.z=e.z+o.z,this.w=e.w+o.w,this}addScaledVector(e,o){return this.x+=e.x*o,this.y+=e.y*o,this.z+=e.z*o,this.w+=e.w*o,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,o){return this.x=e.x-o.x,this.y=e.y-o.y,this.z=e.z-o.z,this.w=e.w-o.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const o=this.x,f=this.y,y=this.z,b=this.w,B=e.elements;return this.x=B[0]*o+B[4]*f+B[8]*y+B[12]*b,this.y=B[1]*o+B[5]*f+B[9]*y+B[13]*b,this.z=B[2]*o+B[6]*f+B[10]*y+B[14]*b,this.w=B[3]*o+B[7]*f+B[11]*y+B[15]*b,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const o=Math.sqrt(1-e.w*e.w);return o<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/o,this.y=e.y/o,this.z=e.z/o),this}setAxisAngleFromRotationMatrix(e){let o,f,y,b;const D=e.elements,N=D[0],K=D[4],Z=D[8],q=D[1],ee=D[5],ie=D[9],he=D[2],se=D[6],ne=D[10];if(Math.abs(K-q)<.01&&Math.abs(Z-he)<.01&&Math.abs(ie-se)<.01){if(Math.abs(K+q)<.1&&Math.abs(Z+he)<.1&&Math.abs(ie+se)<.1&&Math.abs(N+ee+ne-3)<.1)return this.set(1,0,0,0),this;o=Math.PI;const fe=(N+1)/2,xe=(ee+1)/2,Le=(ne+1)/2,He=(K+q)/4,qe=(Z+he)/4,et=(ie+se)/4;return fe>xe&&fe>Le?fe<.01?(f=0,y=.707106781,b=.707106781):(f=Math.sqrt(fe),y=He/f,b=qe/f):xe>Le?xe<.01?(f=.707106781,y=0,b=.707106781):(y=Math.sqrt(xe),f=He/y,b=et/y):Le<.01?(f=.707106781,y=.707106781,b=0):(b=Math.sqrt(Le),f=qe/b,y=et/b),this.set(f,y,b,o),this}let be=Math.sqrt((se-ie)*(se-ie)+(Z-he)*(Z-he)+(q-K)*(q-K));return Math.abs(be)<.001&&(be=1),this.x=(se-ie)/be,this.y=(Z-he)/be,this.z=(q-K)/be,this.w=Math.acos((N+ee+ne-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,o){return this.x=Math.max(e.x,Math.min(o.x,this.x)),this.y=Math.max(e.y,Math.min(o.y,this.y)),this.z=Math.max(e.z,Math.min(o.z,this.z)),this.w=Math.max(e.w,Math.min(o.w,this.w)),this}clampScalar(e,o){return this.x=Math.max(e,Math.min(o,this.x)),this.y=Math.max(e,Math.min(o,this.y)),this.z=Math.max(e,Math.min(o,this.z)),this.w=Math.max(e,Math.min(o,this.w)),this}clampLength(e,o){const f=this.length();return this.divideScalar(f||1).multiplyScalar(Math.max(e,Math.min(o,f)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,o){return this.x+=(e.x-this.x)*o,this.y+=(e.y-this.y)*o,this.z+=(e.z-this.z)*o,this.w+=(e.w-this.w)*o,this}lerpVectors(e,o,f){return this.x=e.x+(o.x-e.x)*f,this.y=e.y+(o.y-e.y)*f,this.z=e.z+(o.z-e.z)*f,this.w=e.w+(o.w-e.w)*f,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,o=0){return this.x=e[o],this.y=e[o+1],this.z=e[o+2],this.w=e[o+3],this}toArray(e=[],o=0){return e[o]=this.x,e[o+1]=this.y,e[o+2]=this.z,e[o+3]=this.w,e}fromBufferAttribute(e,o){return this.x=e.getX(o),this.y=e.getY(o),this.z=e.getZ(o),this.w=e.getW(o),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class pl extends wa{constructor(e=1,o=1,f={}){super(),this.isWebGLRenderTarget=!0,this.width=e,this.height=o,this.depth=1,this.scissor=new lo(0,0,e,o),this.scissorTest=!1,this.viewport=new lo(0,0,e,o);const y={width:e,height:o,depth:1};f.encoding!==void 0&&(fc("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),f.colorSpace=f.encoding===Nl?Qn:Ml),this.texture=new ps(y,f.mapping,f.wrapS,f.wrapT,f.magFilter,f.minFilter,f.format,f.type,f.anisotropy,f.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=f.generateMipmaps!==void 0?f.generateMipmaps:!1,this.texture.internalFormat=f.internalFormat!==void 0?f.internalFormat:null,this.texture.minFilter=f.minFilter!==void 0?f.minFilter:ho,this.depthBuffer=f.depthBuffer!==void 0?f.depthBuffer:!0,this.stencilBuffer=f.stencilBuffer!==void 0?f.stencilBuffer:!1,this.depthTexture=f.depthTexture!==void 0?f.depthTexture:null,this.samples=f.samples!==void 0?f.samples:0}setSize(e,o,f=1){(this.width!==e||this.height!==o||this.depth!==f)&&(this.width=e,this.height=o,this.depth=f,this.texture.image.width=e,this.texture.image.height=o,this.texture.image.depth=f,this.dispose()),this.viewport.set(0,0,e,o),this.scissor.set(0,0,e,o)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const o=Object.assign({},e.texture.image);return this.texture.source=new Vl(o),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ia extends ps{constructor(e=null,o=1,f=1,y=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:o,height:f,depth:y},this.magFilter=Vi,this.minFilter=Vi,this.wrapR=yo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class du extends pl{constructor(e=1,o=1,f=1){super(e,o),this.isWebGLArrayRenderTarget=!0,this.depth=f,this.texture=new ia(null,e,o,f),this.texture.isRenderTargetTexture=!0}}class es extends ps{constructor(e=null,o=1,f=1,y=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:o,height:f,depth:y},this.magFilter=Vi,this.minFilter=Vi,this.wrapR=yo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class oa extends pl{constructor(e=1,o=1,f=1){super(e,o),this.isWebGL3DRenderTarget=!0,this.depth=f,this.texture=new es(null,e,o,f),this.texture.isRenderTargetTexture=!0}}class sa extends pl{constructor(e=1,o=1,f=1,y={}){super(e,o,y),this.isWebGLMultipleRenderTargets=!0;const b=this.texture;this.texture=[];for(let B=0;B<f;B++)this.texture[B]=b.clone(),this.texture[B].isRenderTargetTexture=!0}setSize(e,o,f=1){if(this.width!==e||this.height!==o||this.depth!==f){this.width=e,this.height=o,this.depth=f;for(let y=0,b=this.texture.length;y<b;y++)this.texture[y].image.width=e,this.texture[y].image.height=o,this.texture[y].image.depth=f;this.dispose()}return this.viewport.set(0,0,e,o),this.scissor.set(0,0,e,o),this}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let o=0,f=e.texture.length;o<f;o++)this.texture[o]=e.texture[o].clone(),this.texture[o].isRenderTargetTexture=!0;return this}}class aa{constructor(e=0,o=0,f=0,y=1){this.isQuaternion=!0,this._x=e,this._y=o,this._z=f,this._w=y}static slerpFlat(e,o,f,y,b,B,I){let D=f[y+0],N=f[y+1],K=f[y+2],Z=f[y+3];const q=b[B+0],ee=b[B+1],ie=b[B+2],he=b[B+3];if(I===0){e[o+0]=D,e[o+1]=N,e[o+2]=K,e[o+3]=Z;return}if(I===1){e[o+0]=q,e[o+1]=ee,e[o+2]=ie,e[o+3]=he;return}if(Z!==he||D!==q||N!==ee||K!==ie){let se=1-I;const ne=D*q+N*ee+K*ie+Z*he,be=ne>=0?1:-1,fe=1-ne*ne;if(fe>Number.EPSILON){const Le=Math.sqrt(fe),He=Math.atan2(Le,ne*be);se=Math.sin(se*He)/Le,I=Math.sin(I*He)/Le}const xe=I*be;if(D=D*se+q*xe,N=N*se+ee*xe,K=K*se+ie*xe,Z=Z*se+he*xe,se===1-I){const Le=1/Math.sqrt(D*D+N*N+K*K+Z*Z);D*=Le,N*=Le,K*=Le,Z*=Le}}e[o]=D,e[o+1]=N,e[o+2]=K,e[o+3]=Z}static multiplyQuaternionsFlat(e,o,f,y,b,B){const I=f[y],D=f[y+1],N=f[y+2],K=f[y+3],Z=b[B],q=b[B+1],ee=b[B+2],ie=b[B+3];return e[o]=I*ie+K*Z+D*ee-N*q,e[o+1]=D*ie+K*q+N*Z-I*ee,e[o+2]=N*ie+K*ee+I*q-D*Z,e[o+3]=K*ie-I*Z-D*q-N*ee,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,o,f,y){return this._x=e,this._y=o,this._z=f,this._w=y,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,o){const f=e._x,y=e._y,b=e._z,B=e._order,I=Math.cos,D=Math.sin,N=I(f/2),K=I(y/2),Z=I(b/2),q=D(f/2),ee=D(y/2),ie=D(b/2);switch(B){case"XYZ":this._x=q*K*Z+N*ee*ie,this._y=N*ee*Z-q*K*ie,this._z=N*K*ie+q*ee*Z,this._w=N*K*Z-q*ee*ie;break;case"YXZ":this._x=q*K*Z+N*ee*ie,this._y=N*ee*Z-q*K*ie,this._z=N*K*ie-q*ee*Z,this._w=N*K*Z+q*ee*ie;break;case"ZXY":this._x=q*K*Z-N*ee*ie,this._y=N*ee*Z+q*K*ie,this._z=N*K*ie+q*ee*Z,this._w=N*K*Z-q*ee*ie;break;case"ZYX":this._x=q*K*Z-N*ee*ie,this._y=N*ee*Z+q*K*ie,this._z=N*K*ie-q*ee*Z,this._w=N*K*Z+q*ee*ie;break;case"YZX":this._x=q*K*Z+N*ee*ie,this._y=N*ee*Z+q*K*ie,this._z=N*K*ie-q*ee*Z,this._w=N*K*Z-q*ee*ie;break;case"XZY":this._x=q*K*Z-N*ee*ie,this._y=N*ee*Z-q*K*ie,this._z=N*K*ie+q*ee*Z,this._w=N*K*Z+q*ee*ie;break;default:C.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+B)}return o!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,o){const f=o/2,y=Math.sin(f);return this._x=e.x*y,this._y=e.y*y,this._z=e.z*y,this._w=Math.cos(f),this._onChangeCallback(),this}setFromRotationMatrix(e){const o=e.elements,f=o[0],y=o[4],b=o[8],B=o[1],I=o[5],D=o[9],N=o[2],K=o[6],Z=o[10],q=f+I+Z;if(q>0){const ee=.5/Math.sqrt(q+1);this._w=.25/ee,this._x=(K-D)*ee,this._y=(b-N)*ee,this._z=(B-y)*ee}else if(f>I&&f>Z){const ee=2*Math.sqrt(1+f-I-Z);this._w=(K-D)/ee,this._x=.25*ee,this._y=(y+B)/ee,this._z=(b+N)/ee}else if(I>Z){const ee=2*Math.sqrt(1+I-f-Z);this._w=(b-N)/ee,this._x=(y+B)/ee,this._y=.25*ee,this._z=(D+K)/ee}else{const ee=2*Math.sqrt(1+Z-f-I);this._w=(B-y)/ee,this._x=(b+N)/ee,this._y=(D+K)/ee,this._z=.25*ee}return this._onChangeCallback(),this}setFromUnitVectors(e,o){let f=e.dot(o)+1;return f<Number.EPSILON?(f=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=f):(this._x=0,this._y=-e.z,this._z=e.y,this._w=f)):(this._x=e.y*o.z-e.z*o.y,this._y=e.z*o.x-e.x*o.z,this._z=e.x*o.y-e.y*o.x,this._w=f),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(ls(this.dot(e),-1,1)))}rotateTowards(e,o){const f=this.angleTo(e);if(f===0)return this;const y=Math.min(1,o/f);return this.slerp(e,y),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,o){const f=e._x,y=e._y,b=e._z,B=e._w,I=o._x,D=o._y,N=o._z,K=o._w;return this._x=f*K+B*I+y*N-b*D,this._y=y*K+B*D+b*I-f*N,this._z=b*K+B*N+f*D-y*I,this._w=B*K-f*I-y*D-b*N,this._onChangeCallback(),this}slerp(e,o){if(o===0)return this;if(o===1)return this.copy(e);const f=this._x,y=this._y,b=this._z,B=this._w;let I=B*e._w+f*e._x+y*e._y+b*e._z;if(I<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,I=-I):this.copy(e),I>=1)return this._w=B,this._x=f,this._y=y,this._z=b,this;const D=1-I*I;if(D<=Number.EPSILON){const ee=1-o;return this._w=ee*B+o*this._w,this._x=ee*f+o*this._x,this._y=ee*y+o*this._y,this._z=ee*b+o*this._z,this.normalize(),this._onChangeCallback(),this}const N=Math.sqrt(D),K=Math.atan2(N,I),Z=Math.sin((1-o)*K)/N,q=Math.sin(o*K)/N;return this._w=B*Z+this._w*q,this._x=f*Z+this._x*q,this._y=y*Z+this._y*q,this._z=b*Z+this._z*q,this._onChangeCallback(),this}slerpQuaternions(e,o,f){return this.copy(e).slerp(o,f)}random(){const e=Math.random(),o=Math.sqrt(1-e),f=Math.sqrt(e),y=2*Math.PI*Math.random(),b=2*Math.PI*Math.random();return this.set(o*Math.cos(y),f*Math.sin(b),f*Math.cos(b),o*Math.sin(y))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,o=0){return this._x=e[o],this._y=e[o+1],this._z=e[o+2],this._w=e[o+3],this._onChangeCallback(),this}toArray(e=[],o=0){return e[o]=this._x,e[o+1]=this._y,e[o+2]=this._z,e[o+3]=this._w,e}fromBufferAttribute(e,o){return this._x=e.getX(o),this._y=e.getY(o),this._z=e.getZ(o),this._w=e.getW(o),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class je{constructor(e=0,o=0,f=0){je.prototype.isVector3=!0,this.x=e,this.y=o,this.z=f}set(e,o,f){return f===void 0&&(f=this.z),this.x=e,this.y=o,this.z=f,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,o){switch(e){case 0:this.x=o;break;case 1:this.y=o;break;case 2:this.z=o;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,o){return this.x=e.x+o.x,this.y=e.y+o.y,this.z=e.z+o.z,this}addScaledVector(e,o){return this.x+=e.x*o,this.y+=e.y*o,this.z+=e.z*o,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,o){return this.x=e.x-o.x,this.y=e.y-o.y,this.z=e.z-o.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,o){return this.x=e.x*o.x,this.y=e.y*o.y,this.z=e.z*o.z,this}applyEuler(e){return this.applyQuaternion(Lm.setFromEuler(e))}applyAxisAngle(e,o){return this.applyQuaternion(Lm.setFromAxisAngle(e,o))}applyMatrix3(e){const o=this.x,f=this.y,y=this.z,b=e.elements;return this.x=b[0]*o+b[3]*f+b[6]*y,this.y=b[1]*o+b[4]*f+b[7]*y,this.z=b[2]*o+b[5]*f+b[8]*y,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const o=this.x,f=this.y,y=this.z,b=e.elements,B=1/(b[3]*o+b[7]*f+b[11]*y+b[15]);return this.x=(b[0]*o+b[4]*f+b[8]*y+b[12])*B,this.y=(b[1]*o+b[5]*f+b[9]*y+b[13])*B,this.z=(b[2]*o+b[6]*f+b[10]*y+b[14])*B,this}applyQuaternion(e){const o=this.x,f=this.y,y=this.z,b=e.x,B=e.y,I=e.z,D=e.w,N=D*o+B*y-I*f,K=D*f+I*o-b*y,Z=D*y+b*f-B*o,q=-b*o-B*f-I*y;return this.x=N*D+q*-b+K*-I-Z*-B,this.y=K*D+q*-B+Z*-b-N*-I,this.z=Z*D+q*-I+N*-B-K*-b,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const o=this.x,f=this.y,y=this.z,b=e.elements;return this.x=b[0]*o+b[4]*f+b[8]*y,this.y=b[1]*o+b[5]*f+b[9]*y,this.z=b[2]*o+b[6]*f+b[10]*y,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,o){return this.x=Math.max(e.x,Math.min(o.x,this.x)),this.y=Math.max(e.y,Math.min(o.y,this.y)),this.z=Math.max(e.z,Math.min(o.z,this.z)),this}clampScalar(e,o){return this.x=Math.max(e,Math.min(o,this.x)),this.y=Math.max(e,Math.min(o,this.y)),this.z=Math.max(e,Math.min(o,this.z)),this}clampLength(e,o){const f=this.length();return this.divideScalar(f||1).multiplyScalar(Math.max(e,Math.min(o,f)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,o){return this.x+=(e.x-this.x)*o,this.y+=(e.y-this.y)*o,this.z+=(e.z-this.z)*o,this}lerpVectors(e,o,f){return this.x=e.x+(o.x-e.x)*f,this.y=e.y+(o.y-e.y)*f,this.z=e.z+(o.z-e.z)*f,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,o){const f=e.x,y=e.y,b=e.z,B=o.x,I=o.y,D=o.z;return this.x=y*D-b*I,this.y=b*B-f*D,this.z=f*I-y*B,this}projectOnVector(e){const o=e.lengthSq();if(o===0)return this.set(0,0,0);const f=e.dot(this)/o;return this.copy(e).multiplyScalar(f)}projectOnPlane(e){return Tp.copy(this).projectOnVector(e),this.sub(Tp)}reflect(e){return this.sub(Tp.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const o=Math.sqrt(this.lengthSq()*e.lengthSq());if(o===0)return Math.PI/2;const f=this.dot(e)/o;return Math.acos(ls(f,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const o=this.x-e.x,f=this.y-e.y,y=this.z-e.z;return o*o+f*f+y*y}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,o,f){const y=Math.sin(o)*e;return this.x=y*Math.sin(f),this.y=Math.cos(o)*e,this.z=y*Math.cos(f),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,o,f){return this.x=e*Math.sin(o),this.y=f,this.z=e*Math.cos(o),this}setFromMatrixPosition(e){const o=e.elements;return this.x=o[12],this.y=o[13],this.z=o[14],this}setFromMatrixScale(e){const o=this.setFromMatrixColumn(e,0).length(),f=this.setFromMatrixColumn(e,1).length(),y=this.setFromMatrixColumn(e,2).length();return this.x=o,this.y=f,this.z=y,this}setFromMatrixColumn(e,o){return this.fromArray(e.elements,o*4)}setFromMatrix3Column(e,o){return this.fromArray(e.elements,o*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,o=0){return this.x=e[o],this.y=e[o+1],this.z=e[o+2],this}toArray(e=[],o=0){return e[o]=this.x,e[o+1]=this.y,e[o+2]=this.z,e}fromBufferAttribute(e,o){return this.x=e.getX(o),this.y=e.getY(o),this.z=e.getZ(o),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,o=Math.random()*Math.PI*2,f=Math.sqrt(1-Y2(e,2));return this.x=f*Math.cos(o),this.y=f*Math.sin(o),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Tp=new je,Lm=new aa;class Qo{constructor(e=new je(1/0,1/0,1/0),o=new je(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=o}set(e,o){return this.min.copy(e),this.max.copy(o),this}setFromArray(e){this.makeEmpty();for(let o=0,f=e.length;o<f;o+=3)this.expandByPoint(Ac.fromArray(e,o));return this}setFromBufferAttribute(e){this.makeEmpty();for(let o=0,f=e.count;o<f;o++)this.expandByPoint(Ac.fromBufferAttribute(e,o));return this}setFromPoints(e){this.makeEmpty();for(let o=0,f=e.length;o<f;o++)this.expandByPoint(e[o]);return this}setFromCenterAndSize(e,o){const f=Ac.copy(o).multiplyScalar(.5);return this.min.copy(e).sub(f),this.max.copy(e).add(f),this}setFromObject(e,o=!1){return this.makeEmpty(),this.expandByObject(e,o)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,o=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),yc.copy(e.boundingBox),yc.applyMatrix4(e.matrixWorld),this.union(yc);else{const y=e.geometry;if(y!==void 0)if(o&&y.attributes!==void 0&&y.attributes.position!==void 0){const b=y.attributes.position;for(let B=0,I=b.count;B<I;B++)Ac.fromBufferAttribute(b,B).applyMatrix4(e.matrixWorld),this.expandByPoint(Ac)}else y.boundingBox===null&&y.computeBoundingBox(),yc.copy(y.boundingBox),yc.applyMatrix4(e.matrixWorld),this.union(yc)}const f=e.children;for(let y=0,b=f.length;y<b;y++)this.expandByObject(f[y],o);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,o){return o.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ac),Ac.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let o,f;return e.normal.x>0?(o=e.normal.x*this.min.x,f=e.normal.x*this.max.x):(o=e.normal.x*this.max.x,f=e.normal.x*this.min.x),e.normal.y>0?(o+=e.normal.y*this.min.y,f+=e.normal.y*this.max.y):(o+=e.normal.y*this.max.y,f+=e.normal.y*this.min.y),e.normal.z>0?(o+=e.normal.z*this.min.z,f+=e.normal.z*this.max.z):(o+=e.normal.z*this.max.z,f+=e.normal.z*this.min.z),o<=-e.constant&&f>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(qu),Zd.subVectors(this.max,qu),Qs.subVectors(e.a,qu),la.subVectors(e.b,qu),Ql.subVectors(e.c,qu),vc.subVectors(la,Qs),ul.subVectors(Ql,la),Kl.subVectors(Qs,Ql);let o=[0,-vc.z,vc.y,0,-ul.z,ul.y,0,-Kl.z,Kl.y,vc.z,0,-vc.x,ul.z,0,-ul.x,Kl.z,0,-Kl.x,-vc.y,vc.x,0,-ul.y,ul.x,0,-Kl.y,Kl.x,0];return!Yh(o,Qs,la,Ql,Zd)||(o=[1,0,0,0,1,0,0,0,1],!Yh(o,Qs,la,Ql,Zd))?!1:(qd.crossVectors(vc,ul),o=[qd.x,qd.y,qd.z],Yh(o,Qs,la,Ql,Zd))}clampPoint(e,o){return o.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ac).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ac).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(mc[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),mc[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),mc[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),mc[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),mc[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),mc[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),mc[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),mc[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(mc),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const mc=[new je,new je,new je,new je,new je,new je,new je,new je],Ac=new je,yc=new Qo,Qs=new je,la=new je,Ql=new je,vc=new je,ul=new je,Kl=new je,qu=new je,Zd=new je,qd=new je,Bp=new je;function Yh(S,e,o,f,y){for(let b=0,B=S.length-3;b<=B;b+=3){Bp.fromArray(S,b);const I=y.x*Math.abs(Bp.x)+y.y*Math.abs(Bp.y)+y.z*Math.abs(Bp.z),D=e.dot(Bp),N=o.dot(Bp),K=f.dot(Bp);if(Math.max(-Math.max(D,N,K),Math.min(D,N,K))>I)return!1}return!0}const lg=new Qo,Tl=new je,$d=new je;class Ta{constructor(e=new je,o=-1){this.center=e,this.radius=o}set(e,o){return this.center.copy(e),this.radius=o,this}setFromPoints(e,o){const f=this.center;o!==void 0?f.copy(o):lg.setFromPoints(e).getCenter(f);let y=0;for(let b=0,B=e.length;b<B;b++)y=Math.max(y,f.distanceToSquared(e[b]));return this.radius=Math.sqrt(y),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const o=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=o*o}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,o){const f=this.center.distanceToSquared(e);return o.copy(e),f>this.radius*this.radius&&(o.sub(this.center).normalize(),o.multiplyScalar(this.radius).add(this.center)),o}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Tl.subVectors(e,this.center);const o=Tl.lengthSq();if(o>this.radius*this.radius){const f=Math.sqrt(o),y=(f-this.radius)*.5;this.center.addScaledVector(Tl,y/f),this.radius+=y}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):($d.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Tl.copy(e.center).add($d)),this.expandByPoint(Tl.copy(e.center).sub($d))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Bl=new je,Jh=new je,hu=new je,Xl=new je,Zh=new je,$u=new je,qh=new je;class Rp{constructor(e=new je,o=new je(0,0,-1)){this.origin=e,this.direction=o}set(e,o){return this.origin.copy(e),this.direction.copy(o),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,o){return o.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Bl)),this}closestPointToPoint(e,o){o.subVectors(e,this.origin);const f=o.dot(this.direction);return f<0?o.copy(this.origin):o.copy(this.origin).addScaledVector(this.direction,f)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const o=Bl.subVectors(e,this.origin).dot(this.direction);return o<0?this.origin.distanceToSquared(e):(Bl.copy(this.origin).addScaledVector(this.direction,o),Bl.distanceToSquared(e))}distanceSqToSegment(e,o,f,y){Jh.copy(e).add(o).multiplyScalar(.5),hu.copy(o).sub(e).normalize(),Xl.copy(this.origin).sub(Jh);const b=e.distanceTo(o)*.5,B=-this.direction.dot(hu),I=Xl.dot(this.direction),D=-Xl.dot(hu),N=Xl.lengthSq(),K=Math.abs(1-B*B);let Z,q,ee,ie;if(K>0)if(Z=B*D-I,q=B*I-D,ie=b*K,Z>=0)if(q>=-ie)if(q<=ie){const he=1/K;Z*=he,q*=he,ee=Z*(Z+B*q+2*I)+q*(B*Z+q+2*D)+N}else q=b,Z=Math.max(0,-(B*q+I)),ee=-Z*Z+q*(q+2*D)+N;else q=-b,Z=Math.max(0,-(B*q+I)),ee=-Z*Z+q*(q+2*D)+N;else q<=-ie?(Z=Math.max(0,-(-B*b+I)),q=Z>0?-b:Math.min(Math.max(-b,-D),b),ee=-Z*Z+q*(q+2*D)+N):q<=ie?(Z=0,q=Math.min(Math.max(-b,-D),b),ee=q*(q+2*D)+N):(Z=Math.max(0,-(B*b+I)),q=Z>0?b:Math.min(Math.max(-b,-D),b),ee=-Z*Z+q*(q+2*D)+N);else q=B>0?-b:b,Z=Math.max(0,-(B*q+I)),ee=-Z*Z+q*(q+2*D)+N;return f&&f.copy(this.origin).addScaledVector(this.direction,Z),y&&y.copy(Jh).addScaledVector(hu,q),ee}intersectSphere(e,o){Bl.subVectors(e.center,this.origin);const f=Bl.dot(this.direction),y=Bl.dot(Bl)-f*f,b=e.radius*e.radius;if(y>b)return null;const B=Math.sqrt(b-y),I=f-B,D=f+B;return D<0?null:I<0?this.at(D,o):this.at(I,o)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const o=e.normal.dot(this.direction);if(o===0)return e.distanceToPoint(this.origin)===0?0:null;const f=-(this.origin.dot(e.normal)+e.constant)/o;return f>=0?f:null}intersectPlane(e,o){const f=this.distanceToPlane(e);return f===null?null:this.at(f,o)}intersectsPlane(e){const o=e.distanceToPoint(this.origin);return o===0||e.normal.dot(this.direction)*o<0}intersectBox(e,o){let f,y,b,B,I,D;const N=1/this.direction.x,K=1/this.direction.y,Z=1/this.direction.z,q=this.origin;return N>=0?(f=(e.min.x-q.x)*N,y=(e.max.x-q.x)*N):(f=(e.max.x-q.x)*N,y=(e.min.x-q.x)*N),K>=0?(b=(e.min.y-q.y)*K,B=(e.max.y-q.y)*K):(b=(e.max.y-q.y)*K,B=(e.min.y-q.y)*K),f>B||b>y||((b>f||isNaN(f))&&(f=b),(B<y||isNaN(y))&&(y=B),Z>=0?(I=(e.min.z-q.z)*Z,D=(e.max.z-q.z)*Z):(I=(e.max.z-q.z)*Z,D=(e.min.z-q.z)*Z),f>D||I>y)||((I>f||f!==f)&&(f=I),(D<y||y!==y)&&(y=D),y<0)?null:this.at(f>=0?f:y,o)}intersectsBox(e){return this.intersectBox(e,Bl)!==null}intersectTriangle(e,o,f,y,b){Zh.subVectors(o,e),$u.subVectors(f,e),qh.crossVectors(Zh,$u);let B=this.direction.dot(qh),I;if(B>0){if(y)return null;I=1}else if(B<0)I=-1,B=-B;else return null;Xl.subVectors(this.origin,e);const D=I*this.direction.dot($u.crossVectors(Xl,$u));if(D<0)return null;const N=I*this.direction.dot(Zh.cross(Xl));if(N<0||D+N>B)return null;const K=-I*Xl.dot(qh);return K<0?null:this.at(K/B,b)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class ui{constructor(e,o,f,y,b,B,I,D,N,K,Z,q,ee,ie,he,se){ui.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,o,f,y,b,B,I,D,N,K,Z,q,ee,ie,he,se)}set(e,o,f,y,b,B,I,D,N,K,Z,q,ee,ie,he,se){const ne=this.elements;return ne[0]=e,ne[4]=o,ne[8]=f,ne[12]=y,ne[1]=b,ne[5]=B,ne[9]=I,ne[13]=D,ne[2]=N,ne[6]=K,ne[10]=Z,ne[14]=q,ne[3]=ee,ne[7]=ie,ne[11]=he,ne[15]=se,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new ui().fromArray(this.elements)}copy(e){const o=this.elements,f=e.elements;return o[0]=f[0],o[1]=f[1],o[2]=f[2],o[3]=f[3],o[4]=f[4],o[5]=f[5],o[6]=f[6],o[7]=f[7],o[8]=f[8],o[9]=f[9],o[10]=f[10],o[11]=f[11],o[12]=f[12],o[13]=f[13],o[14]=f[14],o[15]=f[15],this}copyPosition(e){const o=this.elements,f=e.elements;return o[12]=f[12],o[13]=f[13],o[14]=f[14],this}setFromMatrix3(e){const o=e.elements;return this.set(o[0],o[3],o[6],0,o[1],o[4],o[7],0,o[2],o[5],o[8],0,0,0,0,1),this}extractBasis(e,o,f){return e.setFromMatrixColumn(this,0),o.setFromMatrixColumn(this,1),f.setFromMatrixColumn(this,2),this}makeBasis(e,o,f){return this.set(e.x,o.x,f.x,0,e.y,o.y,f.y,0,e.z,o.z,f.z,0,0,0,0,1),this}extractRotation(e){const o=this.elements,f=e.elements,y=1/fu.setFromMatrixColumn(e,0).length(),b=1/fu.setFromMatrixColumn(e,1).length(),B=1/fu.setFromMatrixColumn(e,2).length();return o[0]=f[0]*y,o[1]=f[1]*y,o[2]=f[2]*y,o[3]=0,o[4]=f[4]*b,o[5]=f[5]*b,o[6]=f[6]*b,o[7]=0,o[8]=f[8]*B,o[9]=f[9]*B,o[10]=f[10]*B,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,this}makeRotationFromEuler(e){const o=this.elements,f=e.x,y=e.y,b=e.z,B=Math.cos(f),I=Math.sin(f),D=Math.cos(y),N=Math.sin(y),K=Math.cos(b),Z=Math.sin(b);if(e.order==="XYZ"){const q=B*K,ee=B*Z,ie=I*K,he=I*Z;o[0]=D*K,o[4]=-D*Z,o[8]=N,o[1]=ee+ie*N,o[5]=q-he*N,o[9]=-I*D,o[2]=he-q*N,o[6]=ie+ee*N,o[10]=B*D}else if(e.order==="YXZ"){const q=D*K,ee=D*Z,ie=N*K,he=N*Z;o[0]=q+he*I,o[4]=ie*I-ee,o[8]=B*N,o[1]=B*Z,o[5]=B*K,o[9]=-I,o[2]=ee*I-ie,o[6]=he+q*I,o[10]=B*D}else if(e.order==="ZXY"){const q=D*K,ee=D*Z,ie=N*K,he=N*Z;o[0]=q-he*I,o[4]=-B*Z,o[8]=ie+ee*I,o[1]=ee+ie*I,o[5]=B*K,o[9]=he-q*I,o[2]=-B*N,o[6]=I,o[10]=B*D}else if(e.order==="ZYX"){const q=B*K,ee=B*Z,ie=I*K,he=I*Z;o[0]=D*K,o[4]=ie*N-ee,o[8]=q*N+he,o[1]=D*Z,o[5]=he*N+q,o[9]=ee*N-ie,o[2]=-N,o[6]=I*D,o[10]=B*D}else if(e.order==="YZX"){const q=B*D,ee=B*N,ie=I*D,he=I*N;o[0]=D*K,o[4]=he-q*Z,o[8]=ie*Z+ee,o[1]=Z,o[5]=B*K,o[9]=-I*K,o[2]=-N*K,o[6]=ee*Z+ie,o[10]=q-he*Z}else if(e.order==="XZY"){const q=B*D,ee=B*N,ie=I*D,he=I*N;o[0]=D*K,o[4]=-Z,o[8]=N*K,o[1]=q*Z+he,o[5]=B*K,o[9]=ee*Z-ie,o[2]=ie*Z-ee,o[6]=I*K,o[10]=he*Z+q}return o[3]=0,o[7]=0,o[11]=0,o[12]=0,o[13]=0,o[14]=0,o[15]=1,this}makeRotationFromQuaternion(e){return this.compose(a1,e,eh)}lookAt(e,o,f){const y=this.elements;return Ba.subVectors(e,o),Ba.lengthSq()===0&&(Ba.z=1),Ba.normalize(),Ip.crossVectors(f,Ba),Ip.lengthSq()===0&&(Math.abs(f.z)===1?Ba.x+=1e-4:Ba.z+=1e-4,Ba.normalize(),Ip.crossVectors(f,Ba)),Ip.normalize(),dl.crossVectors(Ba,Ip),y[0]=Ip.x,y[4]=dl.x,y[8]=Ba.x,y[1]=Ip.y,y[5]=dl.y,y[9]=Ba.y,y[2]=Ip.z,y[6]=dl.z,y[10]=Ba.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,o){const f=e.elements,y=o.elements,b=this.elements,B=f[0],I=f[4],D=f[8],N=f[12],K=f[1],Z=f[5],q=f[9],ee=f[13],ie=f[2],he=f[6],se=f[10],ne=f[14],be=f[3],fe=f[7],xe=f[11],Le=f[15],He=y[0],qe=y[4],et=y[8],we=y[12],We=y[1],Wt=y[5],Rn=y[9],Ut=y[13],Ht=y[2],Jt=y[6],Sn=y[10],cn=y[14],En=y[3],In=y[7],kn=y[11],wr=y[15];return b[0]=B*He+I*We+D*Ht+N*En,b[4]=B*qe+I*Wt+D*Jt+N*In,b[8]=B*et+I*Rn+D*Sn+N*kn,b[12]=B*we+I*Ut+D*cn+N*wr,b[1]=K*He+Z*We+q*Ht+ee*En,b[5]=K*qe+Z*Wt+q*Jt+ee*In,b[9]=K*et+Z*Rn+q*Sn+ee*kn,b[13]=K*we+Z*Ut+q*cn+ee*wr,b[2]=ie*He+he*We+se*Ht+ne*En,b[6]=ie*qe+he*Wt+se*Jt+ne*In,b[10]=ie*et+he*Rn+se*Sn+ne*kn,b[14]=ie*we+he*Ut+se*cn+ne*wr,b[3]=be*He+fe*We+xe*Ht+Le*En,b[7]=be*qe+fe*Wt+xe*Jt+Le*In,b[11]=be*et+fe*Rn+xe*Sn+Le*kn,b[15]=be*we+fe*Ut+xe*cn+Le*wr,this}multiplyScalar(e){const o=this.elements;return o[0]*=e,o[4]*=e,o[8]*=e,o[12]*=e,o[1]*=e,o[5]*=e,o[9]*=e,o[13]*=e,o[2]*=e,o[6]*=e,o[10]*=e,o[14]*=e,o[3]*=e,o[7]*=e,o[11]*=e,o[15]*=e,this}determinant(){const e=this.elements,o=e[0],f=e[4],y=e[8],b=e[12],B=e[1],I=e[5],D=e[9],N=e[13],K=e[2],Z=e[6],q=e[10],ee=e[14],ie=e[3],he=e[7],se=e[11],ne=e[15];return ie*(+b*D*Z-y*N*Z-b*I*q+f*N*q+y*I*ee-f*D*ee)+he*(+o*D*ee-o*N*q+b*B*q-y*B*ee+y*N*K-b*D*K)+se*(+o*N*Z-o*I*ee-b*B*Z+f*B*ee+b*I*K-f*N*K)+ne*(-y*I*K-o*D*Z+o*I*q+y*B*Z-f*B*q+f*D*K)}transpose(){const e=this.elements;let o;return o=e[1],e[1]=e[4],e[4]=o,o=e[2],e[2]=e[8],e[8]=o,o=e[6],e[6]=e[9],e[9]=o,o=e[3],e[3]=e[12],e[12]=o,o=e[7],e[7]=e[13],e[13]=o,o=e[11],e[11]=e[14],e[14]=o,this}setPosition(e,o,f){const y=this.elements;return e.isVector3?(y[12]=e.x,y[13]=e.y,y[14]=e.z):(y[12]=e,y[13]=o,y[14]=f),this}invert(){const e=this.elements,o=e[0],f=e[1],y=e[2],b=e[3],B=e[4],I=e[5],D=e[6],N=e[7],K=e[8],Z=e[9],q=e[10],ee=e[11],ie=e[12],he=e[13],se=e[14],ne=e[15],be=Z*se*N-he*q*N+he*D*ee-I*se*ee-Z*D*ne+I*q*ne,fe=ie*q*N-K*se*N-ie*D*ee+B*se*ee+K*D*ne-B*q*ne,xe=K*he*N-ie*Z*N+ie*I*ee-B*he*ee-K*I*ne+B*Z*ne,Le=ie*Z*D-K*he*D-ie*I*q+B*he*q+K*I*se-B*Z*se,He=o*be+f*fe+y*xe+b*Le;if(He===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const qe=1/He;return e[0]=be*qe,e[1]=(he*q*b-Z*se*b-he*y*ee+f*se*ee+Z*y*ne-f*q*ne)*qe,e[2]=(I*se*b-he*D*b+he*y*N-f*se*N-I*y*ne+f*D*ne)*qe,e[3]=(Z*D*b-I*q*b-Z*y*N+f*q*N+I*y*ee-f*D*ee)*qe,e[4]=fe*qe,e[5]=(K*se*b-ie*q*b+ie*y*ee-o*se*ee-K*y*ne+o*q*ne)*qe,e[6]=(ie*D*b-B*se*b-ie*y*N+o*se*N+B*y*ne-o*D*ne)*qe,e[7]=(B*q*b-K*D*b+K*y*N-o*q*N-B*y*ee+o*D*ee)*qe,e[8]=xe*qe,e[9]=(ie*Z*b-K*he*b-ie*f*ee+o*he*ee+K*f*ne-o*Z*ne)*qe,e[10]=(B*he*b-ie*I*b+ie*f*N-o*he*N-B*f*ne+o*I*ne)*qe,e[11]=(K*I*b-B*Z*b-K*f*N+o*Z*N+B*f*ee-o*I*ee)*qe,e[12]=Le*qe,e[13]=(K*he*y-ie*Z*y+ie*f*q-o*he*q-K*f*se+o*Z*se)*qe,e[14]=(ie*I*y-B*he*y-ie*f*D+o*he*D+B*f*se-o*I*se)*qe,e[15]=(B*Z*y-K*I*y+K*f*D-o*Z*D-B*f*q+o*I*q)*qe,this}scale(e){const o=this.elements,f=e.x,y=e.y,b=e.z;return o[0]*=f,o[4]*=y,o[8]*=b,o[1]*=f,o[5]*=y,o[9]*=b,o[2]*=f,o[6]*=y,o[10]*=b,o[3]*=f,o[7]*=y,o[11]*=b,this}getMaxScaleOnAxis(){const e=this.elements,o=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],f=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],y=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(o,f,y))}makeTranslation(e,o,f){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,o,0,0,1,f,0,0,0,1),this}makeRotationX(e){const o=Math.cos(e),f=Math.sin(e);return this.set(1,0,0,0,0,o,-f,0,0,f,o,0,0,0,0,1),this}makeRotationY(e){const o=Math.cos(e),f=Math.sin(e);return this.set(o,0,f,0,0,1,0,0,-f,0,o,0,0,0,0,1),this}makeRotationZ(e){const o=Math.cos(e),f=Math.sin(e);return this.set(o,-f,0,0,f,o,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,o){const f=Math.cos(o),y=Math.sin(o),b=1-f,B=e.x,I=e.y,D=e.z,N=b*B,K=b*I;return this.set(N*B+f,N*I-y*D,N*D+y*I,0,N*I+y*D,K*I+f,K*D-y*B,0,N*D-y*I,K*D+y*B,b*D*D+f,0,0,0,0,1),this}makeScale(e,o,f){return this.set(e,0,0,0,0,o,0,0,0,0,f,0,0,0,0,1),this}makeShear(e,o,f,y,b,B){return this.set(1,f,b,0,e,1,B,0,o,y,1,0,0,0,0,1),this}compose(e,o,f){const y=this.elements,b=o._x,B=o._y,I=o._z,D=o._w,N=b+b,K=B+B,Z=I+I,q=b*N,ee=b*K,ie=b*Z,he=B*K,se=B*Z,ne=I*Z,be=D*N,fe=D*K,xe=D*Z,Le=f.x,He=f.y,qe=f.z;return y[0]=(1-(he+ne))*Le,y[1]=(ee+xe)*Le,y[2]=(ie-fe)*Le,y[3]=0,y[4]=(ee-xe)*He,y[5]=(1-(q+ne))*He,y[6]=(se+be)*He,y[7]=0,y[8]=(ie+fe)*qe,y[9]=(se-be)*qe,y[10]=(1-(q+he))*qe,y[11]=0,y[12]=e.x,y[13]=e.y,y[14]=e.z,y[15]=1,this}decompose(e,o,f){const y=this.elements;let b=fu.set(y[0],y[1],y[2]).length();const B=fu.set(y[4],y[5],y[6]).length(),I=fu.set(y[8],y[9],y[10]).length();this.determinant()<0&&(b=-b),e.x=y[12],e.y=y[13],e.z=y[14],Yl.copy(this);const N=1/b,K=1/B,Z=1/I;return Yl.elements[0]*=N,Yl.elements[1]*=N,Yl.elements[2]*=N,Yl.elements[4]*=K,Yl.elements[5]*=K,Yl.elements[6]*=K,Yl.elements[8]*=Z,Yl.elements[9]*=Z,Yl.elements[10]*=Z,o.setFromRotationMatrix(Yl),f.x=b,f.y=B,f.z=I,this}makePerspective(e,o,f,y,b,B,I=Ha){const D=this.elements,N=2*b/(o-e),K=2*b/(f-y),Z=(o+e)/(o-e),q=(f+y)/(f-y);let ee,ie;if(I===Ha)ee=-(B+b)/(B-b),ie=-2*B*b/(B-b);else if(I===$c)ee=-B/(B-b),ie=-B*b/(B-b);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+I);return D[0]=N,D[4]=0,D[8]=Z,D[12]=0,D[1]=0,D[5]=K,D[9]=q,D[13]=0,D[2]=0,D[6]=0,D[10]=ee,D[14]=ie,D[3]=0,D[7]=0,D[11]=-1,D[15]=0,this}makeOrthographic(e,o,f,y,b,B,I=Ha){const D=this.elements,N=1/(o-e),K=1/(f-y),Z=1/(B-b),q=(o+e)*N,ee=(f+y)*K;let ie,he;if(I===Ha)ie=(B+b)*Z,he=-2*Z;else if(I===$c)ie=b*Z,he=-1*Z;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+I);return D[0]=2*N,D[4]=0,D[8]=0,D[12]=-q,D[1]=0,D[5]=2*K,D[9]=0,D[13]=-ee,D[2]=0,D[6]=0,D[10]=he,D[14]=-ie,D[3]=0,D[7]=0,D[11]=0,D[15]=1,this}equals(e){const o=this.elements,f=e.elements;for(let y=0;y<16;y++)if(o[y]!==f[y])return!1;return!0}fromArray(e,o=0){for(let f=0;f<16;f++)this.elements[f]=e[f+o];return this}toArray(e=[],o=0){const f=this.elements;return e[o]=f[0],e[o+1]=f[1],e[o+2]=f[2],e[o+3]=f[3],e[o+4]=f[4],e[o+5]=f[5],e[o+6]=f[6],e[o+7]=f[7],e[o+8]=f[8],e[o+9]=f[9],e[o+10]=f[10],e[o+11]=f[11],e[o+12]=f[12],e[o+13]=f[13],e[o+14]=f[14],e[o+15]=f[15],e}}const fu=new je,Yl=new ui,a1=new je(0,0,0),eh=new je(1,1,1),Ip=new je,dl=new je,Ba=new je,ed=new ui,$h=new aa;class Rl{constructor(e=0,o=0,f=0,y=Rl.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=o,this._z=f,this._order=y}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,o,f,y=this._order){return this._x=e,this._y=o,this._z=f,this._order=y,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,o=this._order,f=!0){const y=e.elements,b=y[0],B=y[4],I=y[8],D=y[1],N=y[5],K=y[9],Z=y[2],q=y[6],ee=y[10];switch(o){case"XYZ":this._y=Math.asin(ls(I,-1,1)),Math.abs(I)<.9999999?(this._x=Math.atan2(-K,ee),this._z=Math.atan2(-B,b)):(this._x=Math.atan2(q,N),this._z=0);break;case"YXZ":this._x=Math.asin(-ls(K,-1,1)),Math.abs(K)<.9999999?(this._y=Math.atan2(I,ee),this._z=Math.atan2(D,N)):(this._y=Math.atan2(-Z,b),this._z=0);break;case"ZXY":this._x=Math.asin(ls(q,-1,1)),Math.abs(q)<.9999999?(this._y=Math.atan2(-Z,ee),this._z=Math.atan2(-B,N)):(this._y=0,this._z=Math.atan2(D,b));break;case"ZYX":this._y=Math.asin(-ls(Z,-1,1)),Math.abs(Z)<.9999999?(this._x=Math.atan2(q,ee),this._z=Math.atan2(D,b)):(this._x=0,this._z=Math.atan2(-B,N));break;case"YZX":this._z=Math.asin(ls(D,-1,1)),Math.abs(D)<.9999999?(this._x=Math.atan2(-K,N),this._y=Math.atan2(-Z,b)):(this._x=0,this._y=Math.atan2(I,ee));break;case"XZY":this._z=Math.asin(-ls(B,-1,1)),Math.abs(B)<.9999999?(this._x=Math.atan2(q,N),this._y=Math.atan2(I,b)):(this._x=Math.atan2(-K,ee),this._y=0);break;default:C.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+o)}return this._order=o,f===!0&&this._onChangeCallback(),this}setFromQuaternion(e,o,f){return ed.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ed,o,f)}setFromVector3(e,o=this._order){return this.set(e.x,e.y,e.z,o)}reorder(e){return $h.setFromEuler(this),this.setFromQuaternion($h,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],o=0){return e[o]=this._x,e[o+1]=this._y,e[o+2]=this._z,e[o+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Rl.DEFAULT_ORDER="XYZ";class rp{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let ef=0;const tf=new je,zc=new aa,_c=new ui,td=new je,ip=new je,cg=new je,Pm=new aa,pg=new je(1,0,0),ug=new je(0,1,0),Jl=new je(0,0,1),km={type:"added"},gu={type:"removed"};class Yi extends wa{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:ef++}),this.uuid=ll(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Yi.DEFAULT_UP.clone();const e=new je,o=new Rl,f=new aa,y=new je(1,1,1);function b(){f.setFromEuler(o,!1)}function B(){o.setFromQuaternion(f,void 0,!1)}o._onChange(b),f._onChange(B),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:o},quaternion:{configurable:!0,enumerable:!0,value:f},scale:{configurable:!0,enumerable:!0,value:y},modelViewMatrix:{value:new ui},normalMatrix:{value:new wi}}),this.matrix=new ui,this.matrixWorld=new ui,this.matrixAutoUpdate=Yi.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Yi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new rp,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,o){this.quaternion.setFromAxisAngle(e,o)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,o){return zc.setFromAxisAngle(e,o),this.quaternion.multiply(zc),this}rotateOnWorldAxis(e,o){return zc.setFromAxisAngle(e,o),this.quaternion.premultiply(zc),this}rotateX(e){return this.rotateOnAxis(pg,e)}rotateY(e){return this.rotateOnAxis(ug,e)}rotateZ(e){return this.rotateOnAxis(Jl,e)}translateOnAxis(e,o){return tf.copy(e).applyQuaternion(this.quaternion),this.position.add(tf.multiplyScalar(o)),this}translateX(e){return this.translateOnAxis(pg,e)}translateY(e){return this.translateOnAxis(ug,e)}translateZ(e){return this.translateOnAxis(Jl,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(_c.copy(this.matrixWorld).invert())}lookAt(e,o,f){e.isVector3?td.copy(e):td.set(e,o,f);const y=this.parent;this.updateWorldMatrix(!0,!1),ip.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_c.lookAt(ip,td,this.up):_c.lookAt(td,ip,this.up),this.quaternion.setFromRotationMatrix(_c),y&&(_c.extractRotation(y.matrixWorld),zc.setFromRotationMatrix(_c),this.quaternion.premultiply(zc.invert()))}add(e){if(arguments.length>1){for(let o=0;o<arguments.length;o++)this.add(arguments[o]);return this}return e===this?(C.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(km)):C.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let f=0;f<arguments.length;f++)this.remove(arguments[f]);return this}const o=this.children.indexOf(e);return o!==-1&&(e.parent=null,this.children.splice(o,1),e.dispatchEvent(gu)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const o=this.children[e];o.parent=null,o.dispatchEvent(gu)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),_c.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),_c.multiply(e.parent.matrixWorld)),e.applyMatrix4(_c),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,o){if(this[e]===o)return this;for(let f=0,y=this.children.length;f<y;f++){const B=this.children[f].getObjectByProperty(e,o);if(B!==void 0)return B}}getObjectsByProperty(e,o){let f=[];this[e]===o&&f.push(this);for(let y=0,b=this.children.length;y<b;y++){const B=this.children[y].getObjectsByProperty(e,o);B.length>0&&(f=f.concat(B))}return f}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ip,e,cg),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ip,Pm,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const o=this.matrixWorld.elements;return e.set(o[8],o[9],o[10]).normalize()}raycast(){}traverse(e){e(this);const o=this.children;for(let f=0,y=o.length;f<y;f++)o[f].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const o=this.children;for(let f=0,y=o.length;f<y;f++)o[f].traverseVisible(e)}traverseAncestors(e){const o=this.parent;o!==null&&(e(o),o.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const o=this.children;for(let f=0,y=o.length;f<y;f++){const b=o[f];(b.matrixWorldAutoUpdate===!0||e===!0)&&b.updateMatrixWorld(e)}}updateWorldMatrix(e,o){const f=this.parent;if(e===!0&&f!==null&&f.matrixWorldAutoUpdate===!0&&f.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),o===!0){const y=this.children;for(let b=0,B=y.length;b<B;b++){const I=y[b];I.matrixWorldAutoUpdate===!0&&I.updateWorldMatrix(!1,!0)}}}toJSON(e){const o=e===void 0||typeof e=="string",f={};o&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},f.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const y={};y.uuid=this.uuid,y.type=this.type,this.name!==""&&(y.name=this.name),this.castShadow===!0&&(y.castShadow=!0),this.receiveShadow===!0&&(y.receiveShadow=!0),this.visible===!1&&(y.visible=!1),this.frustumCulled===!1&&(y.frustumCulled=!1),this.renderOrder!==0&&(y.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(y.userData=this.userData),y.layers=this.layers.mask,y.matrix=this.matrix.toArray(),y.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(y.matrixAutoUpdate=!1),this.isInstancedMesh&&(y.type="InstancedMesh",y.count=this.count,y.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(y.instanceColor=this.instanceColor.toJSON()));function b(I,D){return I[D.uuid]===void 0&&(I[D.uuid]=D.toJSON(e)),D.uuid}if(this.isScene)this.background&&(this.background.isColor?y.background=this.background.toJSON():this.background.isTexture&&(y.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(y.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){y.geometry=b(e.geometries,this.geometry);const I=this.geometry.parameters;if(I!==void 0&&I.shapes!==void 0){const D=I.shapes;if(Array.isArray(D))for(let N=0,K=D.length;N<K;N++){const Z=D[N];b(e.shapes,Z)}else b(e.shapes,D)}}if(this.isSkinnedMesh&&(y.bindMode=this.bindMode,y.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(b(e.skeletons,this.skeleton),y.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const I=[];for(let D=0,N=this.material.length;D<N;D++)I.push(b(e.materials,this.material[D]));y.material=I}else y.material=b(e.materials,this.material);if(this.children.length>0){y.children=[];for(let I=0;I<this.children.length;I++)y.children.push(this.children[I].toJSON(e).object)}if(this.animations.length>0){y.animations=[];for(let I=0;I<this.animations.length;I++){const D=this.animations[I];y.animations.push(b(e.animations,D))}}if(o){const I=B(e.geometries),D=B(e.materials),N=B(e.textures),K=B(e.images),Z=B(e.shapes),q=B(e.skeletons),ee=B(e.animations),ie=B(e.nodes);I.length>0&&(f.geometries=I),D.length>0&&(f.materials=D),N.length>0&&(f.textures=N),K.length>0&&(f.images=K),Z.length>0&&(f.shapes=Z),q.length>0&&(f.skeletons=q),ee.length>0&&(f.animations=ee),ie.length>0&&(f.nodes=ie)}return f.object=y,f;function B(I){const D=[];for(const N in I){const K=I[N];delete K.metadata,D.push(K)}return D}}clone(e){return new this.constructor().copy(this,e)}copy(e,o=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations,this.userData=JSON.parse(JSON.stringify(e.userData)),o===!0)for(let f=0;f<e.children.length;f++){const y=e.children[f];this.add(y.clone())}return this}}Yi.DEFAULT_UP=new je(0,1,0),Yi.DEFAULT_MATRIX_AUTO_UPDATE=!0,Yi.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Pi=new je,jo=new je,Fp=new je,hl=new je,ys=new je,nd=new je,th=new je,Wa=new je,Ea=new je,nf=new je;let mu=!1;class Ks{constructor(e=new je,o=new je,f=new je){this.a=e,this.b=o,this.c=f}static getNormal(e,o,f,y){y.subVectors(f,o),Pi.subVectors(e,o),y.cross(Pi);const b=y.lengthSq();return b>0?y.multiplyScalar(1/Math.sqrt(b)):y.set(0,0,0)}static getBarycoord(e,o,f,y,b){Pi.subVectors(y,o),jo.subVectors(f,o),Fp.subVectors(e,o);const B=Pi.dot(Pi),I=Pi.dot(jo),D=Pi.dot(Fp),N=jo.dot(jo),K=jo.dot(Fp),Z=B*N-I*I;if(Z===0)return b.set(-2,-1,-1);const q=1/Z,ee=(N*D-I*K)*q,ie=(B*K-I*D)*q;return b.set(1-ee-ie,ie,ee)}static containsPoint(e,o,f,y){return this.getBarycoord(e,o,f,y,hl),hl.x>=0&&hl.y>=0&&hl.x+hl.y<=1}static getUV(e,o,f,y,b,B,I,D){return mu===!1&&(C.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),mu=!0),this.getInterpolation(e,o,f,y,b,B,I,D)}static getInterpolation(e,o,f,y,b,B,I,D){return this.getBarycoord(e,o,f,y,hl),D.setScalar(0),D.addScaledVector(b,hl.x),D.addScaledVector(B,hl.y),D.addScaledVector(I,hl.z),D}static isFrontFacing(e,o,f,y){return Pi.subVectors(f,o),jo.subVectors(e,o),Pi.cross(jo).dot(y)<0}set(e,o,f){return this.a.copy(e),this.b.copy(o),this.c.copy(f),this}setFromPointsAndIndices(e,o,f,y){return this.a.copy(e[o]),this.b.copy(e[f]),this.c.copy(e[y]),this}setFromAttributeAndIndices(e,o,f,y){return this.a.fromBufferAttribute(e,o),this.b.fromBufferAttribute(e,f),this.c.fromBufferAttribute(e,y),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Pi.subVectors(this.c,this.b),jo.subVectors(this.a,this.b),Pi.cross(jo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Ks.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,o){return Ks.getBarycoord(e,this.a,this.b,this.c,o)}getUV(e,o,f,y,b){return mu===!1&&(C.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),mu=!0),Ks.getInterpolation(e,this.a,this.b,this.c,o,f,y,b)}getInterpolation(e,o,f,y,b){return Ks.getInterpolation(e,this.a,this.b,this.c,o,f,y,b)}containsPoint(e){return Ks.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Ks.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,o){const f=this.a,y=this.b,b=this.c;let B,I;ys.subVectors(y,f),nd.subVectors(b,f),Wa.subVectors(e,f);const D=ys.dot(Wa),N=nd.dot(Wa);if(D<=0&&N<=0)return o.copy(f);Ea.subVectors(e,y);const K=ys.dot(Ea),Z=nd.dot(Ea);if(K>=0&&Z<=K)return o.copy(y);const q=D*Z-K*N;if(q<=0&&D>=0&&K<=0)return B=D/(D-K),o.copy(f).addScaledVector(ys,B);nf.subVectors(e,b);const ee=ys.dot(nf),ie=nd.dot(nf);if(ie>=0&&ee<=ie)return o.copy(b);const he=ee*N-D*ie;if(he<=0&&N>=0&&ie<=0)return I=N/(N-ie),o.copy(f).addScaledVector(nd,I);const se=K*ie-ee*Z;if(se<=0&&Z-K>=0&&ee-ie>=0)return th.subVectors(b,y),I=(Z-K)/(Z-K+(ee-ie)),o.copy(y).addScaledVector(th,I);const ne=1/(se+he+q);return B=he*ne,I=q*ne,o.copy(f).addScaledVector(ys,B).addScaledVector(nd,I)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let dg=0;class Xs extends wa{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:dg++}),this.uuid=ll(),this.name="",this.type="Material",this.blending=at,this.side=Pe,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=On,this.blendDst=Ln,this.blendEquation=Pt,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Ot,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Lc,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Zc,this.stencilZFail=Zc,this.stencilZPass=Zc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const o in e){const f=e[o];if(f===void 0){C.warn(`THREE.Material: parameter '${o}' has value of undefined.`);continue}const y=this[o];if(y===void 0){C.warn(`THREE.Material: '${o}' is not a property of THREE.${this.type}.`);continue}y&&y.isColor?y.set(f):y&&y.isVector3&&f&&f.isVector3?y.copy(f):this[o]=f}}toJSON(e){const o=e===void 0||typeof e=="string";o&&(e={textures:{},images:{}});const f={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};f.uuid=this.uuid,f.type=this.type,this.name!==""&&(f.name=this.name),this.color&&this.color.isColor&&(f.color=this.color.getHex()),this.roughness!==void 0&&(f.roughness=this.roughness),this.metalness!==void 0&&(f.metalness=this.metalness),this.sheen!==void 0&&(f.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(f.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(f.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(f.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(f.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(f.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(f.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(f.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(f.shininess=this.shininess),this.clearcoat!==void 0&&(f.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(f.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(f.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(f.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(f.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,f.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(f.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(f.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(f.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(f.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(f.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(f.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(f.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(f.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(f.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(f.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(f.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(f.lightMap=this.lightMap.toJSON(e).uuid,f.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(f.aoMap=this.aoMap.toJSON(e).uuid,f.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(f.bumpMap=this.bumpMap.toJSON(e).uuid,f.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(f.normalMap=this.normalMap.toJSON(e).uuid,f.normalMapType=this.normalMapType,f.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(f.displacementMap=this.displacementMap.toJSON(e).uuid,f.displacementScale=this.displacementScale,f.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(f.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(f.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(f.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(f.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(f.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(f.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(f.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(f.combine=this.combine)),this.envMapIntensity!==void 0&&(f.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(f.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(f.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(f.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(f.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(f.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(f.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(f.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(f.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(f.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(f.size=this.size),this.shadowSide!==null&&(f.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(f.sizeAttenuation=this.sizeAttenuation),this.blending!==at&&(f.blending=this.blending),this.side!==Pe&&(f.side=this.side),this.vertexColors&&(f.vertexColors=!0),this.opacity<1&&(f.opacity=this.opacity),this.transparent===!0&&(f.transparent=this.transparent),f.depthFunc=this.depthFunc,f.depthTest=this.depthTest,f.depthWrite=this.depthWrite,f.colorWrite=this.colorWrite,f.stencilWrite=this.stencilWrite,f.stencilWriteMask=this.stencilWriteMask,f.stencilFunc=this.stencilFunc,f.stencilRef=this.stencilRef,f.stencilFuncMask=this.stencilFuncMask,f.stencilFail=this.stencilFail,f.stencilZFail=this.stencilZFail,f.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(f.rotation=this.rotation),this.polygonOffset===!0&&(f.polygonOffset=!0),this.polygonOffsetFactor!==0&&(f.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(f.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(f.linewidth=this.linewidth),this.dashSize!==void 0&&(f.dashSize=this.dashSize),this.gapSize!==void 0&&(f.gapSize=this.gapSize),this.scale!==void 0&&(f.scale=this.scale),this.dithering===!0&&(f.dithering=!0),this.alphaTest>0&&(f.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(f.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(f.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(f.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(f.wireframe=this.wireframe),this.wireframeLinewidth>1&&(f.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(f.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(f.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(f.flatShading=this.flatShading),this.visible===!1&&(f.visible=!1),this.toneMapped===!1&&(f.toneMapped=!1),this.fog===!1&&(f.fog=!1),Object.keys(this.userData).length>0&&(f.userData=this.userData);function y(b){const B=[];for(const I in b){const D=b[I];delete D.metadata,B.push(D)}return B}if(o){const b=y(e.textures),B=y(e.images);b.length>0&&(f.textures=b),B.length>0&&(f.images=B)}return f}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const o=e.clippingPlanes;let f=null;if(o!==null){const y=o.length;f=new Array(y);for(let b=0;b!==y;++b)f[b]=o[b].clone()}return this.clippingPlanes=f,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const rd={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},fl={h:0,s:0,l:0},nh={h:0,s:0,l:0};function hg(S,e,o){return o<0&&(o+=1),o>1&&(o-=1),o<1/6?S+(e-S)*6*o:o<1/2?e:o<2/3?S+(e-S)*6*(2/3-o):S}class br{constructor(e,o,f){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,o,f)}set(e,o,f){if(o===void 0&&f===void 0){const y=e;y&&y.isColor?this.copy(y):typeof y=="number"?this.setHex(y):typeof y=="string"&&this.setStyle(y)}else this.setRGB(e,o,f);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,o=Qn){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,$o.toWorkingColorSpace(this,o),this}setRGB(e,o,f,y=$o.workingColorSpace){return this.r=e,this.g=o,this.b=f,$o.toWorkingColorSpace(this,y),this}setHSL(e,o,f,y=$o.workingColorSpace){if(e=Qh(e,1),o=ls(o,0,1),f=ls(f,0,1),o===0)this.r=this.g=this.b=f;else{const b=f<=.5?f*(1+o):f+o-f*o,B=2*f-b;this.r=hg(B,b,e+1/3),this.g=hg(B,b,e),this.b=hg(B,b,e-1/3)}return $o.toWorkingColorSpace(this,y),this}setStyle(e,o=Qn){function f(b){b!==void 0&&parseFloat(b)<1&&C.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let y;if(y=/^(\w+)\(([^\)]*)\)/.exec(e)){let b;const B=y[1],I=y[2];switch(B){case"rgb":case"rgba":if(b=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(I))return f(b[4]),this.setRGB(Math.min(255,parseInt(b[1],10))/255,Math.min(255,parseInt(b[2],10))/255,Math.min(255,parseInt(b[3],10))/255,o);if(b=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(I))return f(b[4]),this.setRGB(Math.min(100,parseInt(b[1],10))/100,Math.min(100,parseInt(b[2],10))/100,Math.min(100,parseInt(b[3],10))/100,o);break;case"hsl":case"hsla":if(b=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(I))return f(b[4]),this.setHSL(parseFloat(b[1])/360,parseFloat(b[2])/100,parseFloat(b[3])/100,o);break;default:C.warn("THREE.Color: Unknown color model "+e)}}else if(y=/^\#([A-Fa-f\d]+)$/.exec(e)){const b=y[1],B=b.length;if(B===3)return this.setRGB(parseInt(b.charAt(0),16)/15,parseInt(b.charAt(1),16)/15,parseInt(b.charAt(2),16)/15,o);if(B===6)return this.setHex(parseInt(b,16),o);C.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,o);return this}setColorName(e,o=Qn){const f=rd[e.toLowerCase()];return f!==void 0?this.setHex(f,o):C.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=pu(e.r),this.g=pu(e.g),this.b=pu(e.b),this}copyLinearToSRGB(e){return this.r=Xu(e.r),this.g=Xu(e.g),this.b=Xu(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Qn){return $o.fromWorkingColorSpace(Ys.copy(this),e),Math.round(ls(Ys.r*255,0,255))*65536+Math.round(ls(Ys.g*255,0,255))*256+Math.round(ls(Ys.b*255,0,255))}getHexString(e=Qn){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,o=$o.workingColorSpace){$o.fromWorkingColorSpace(Ys.copy(this),o);const f=Ys.r,y=Ys.g,b=Ys.b,B=Math.max(f,y,b),I=Math.min(f,y,b);let D,N;const K=(I+B)/2;if(I===B)D=0,N=0;else{const Z=B-I;switch(N=K<=.5?Z/(B+I):Z/(2-B-I),B){case f:D=(y-b)/Z+(y<b?6:0);break;case y:D=(b-f)/Z+2;break;case b:D=(f-y)/Z+4;break}D/=6}return e.h=D,e.s=N,e.l=K,e}getRGB(e,o=$o.workingColorSpace){return $o.fromWorkingColorSpace(Ys.copy(this),o),e.r=Ys.r,e.g=Ys.g,e.b=Ys.b,e}getStyle(e=Qn){$o.fromWorkingColorSpace(Ys.copy(this),e);const o=Ys.r,f=Ys.g,y=Ys.b;return e!==Qn?`color(${e} ${o.toFixed(3)} ${f.toFixed(3)} ${y.toFixed(3)})`:`rgb(${Math.round(o*255)},${Math.round(f*255)},${Math.round(y*255)})`}offsetHSL(e,o,f){return this.getHSL(fl),fl.h+=e,fl.s+=o,fl.l+=f,this.setHSL(fl.h,fl.s,fl.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,o){return this.r=e.r+o.r,this.g=e.g+o.g,this.b=e.b+o.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,o){return this.r+=(e.r-this.r)*o,this.g+=(e.g-this.g)*o,this.b+=(e.b-this.b)*o,this}lerpColors(e,o,f){return this.r=e.r+(o.r-e.r)*f,this.g=e.g+(o.g-e.g)*f,this.b=e.b+(o.b-e.b)*f,this}lerpHSL(e,o){this.getHSL(fl),e.getHSL(nh);const f=wl(fl.h,nh.h,o),y=wl(fl.s,nh.s,o),b=wl(fl.l,nh.l,o);return this.setHSL(f,y,b),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const o=this.r,f=this.g,y=this.b,b=e.elements;return this.r=b[0]*o+b[3]*f+b[6]*y,this.g=b[1]*o+b[4]*f+b[7]*y,this.b=b[2]*o+b[5]*f+b[8]*y,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,o=0){return this.r=e[o],this.g=e[o+1],this.b=e[o+2],this}toArray(e=[],o=0){return e[o]=this.r,e[o+1]=this.g,e[o+2]=this.b,e}fromBufferAttribute(e,o){return this.r=e.getX(o),this.g=e.getY(o),this.b=e.getZ(o),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ys=new br;br.NAMES=rd;class Ec extends Xs{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new br(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Or,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const bc=rf();function rf(){const S=new ArrayBuffer(4),e=new Float32Array(S),o=new Uint32Array(S),f=new Uint32Array(512),y=new Uint32Array(512);for(let D=0;D<256;++D){const N=D-127;N<-27?(f[D]=0,f[D|256]=32768,y[D]=24,y[D|256]=24):N<-14?(f[D]=1024>>-N-14,f[D|256]=1024>>-N-14|32768,y[D]=-N-1,y[D|256]=-N-1):N<=15?(f[D]=N+15<<10,f[D|256]=N+15<<10|32768,y[D]=13,y[D|256]=13):N<128?(f[D]=31744,f[D|256]=64512,y[D]=24,y[D|256]=24):(f[D]=31744,f[D|256]=64512,y[D]=13,y[D|256]=13)}const b=new Uint32Array(2048),B=new Uint32Array(64),I=new Uint32Array(64);for(let D=1;D<1024;++D){let N=D<<13,K=0;for(;!(N&8388608);)N<<=1,K-=8388608;N&=-8388609,K+=947912704,b[D]=N|K}for(let D=1024;D<2048;++D)b[D]=939524096+(D-1024<<13);for(let D=1;D<31;++D)B[D]=D<<23;B[31]=1199570944,B[32]=2147483648;for(let D=33;D<63;++D)B[D]=2147483648+(D-32<<23);B[63]=3347054592;for(let D=1;D<64;++D)D!==32&&(I[D]=1024);return{floatView:e,uint32View:o,baseTable:f,shiftTable:y,mantissaTable:b,exponentTable:B,offsetTable:I}}function Va(S){Math.abs(S)>65504&&C.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),S=ls(S,-65504,65504),bc.floatView[0]=S;const e=bc.uint32View[0],o=e>>23&511;return bc.baseTable[o]+((e&8388607)>>bc.shiftTable[o])}function Au(S){const e=S>>10;return bc.uint32View[0]=bc.mantissaTable[bc.offsetTable[e]+(S&1023)]+bc.exponentTable[e],bc.floatView[0]}const id={toHalfFloat:Va,fromHalfFloat:Au},vs=new je,Ra=new _n;class no{constructor(e,o,f=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=o,this.count=e!==void 0?e.length/o:0,this.normalized=f,this.usage=pc,this.updateRange={offset:0,count:-1},this.gpuType=gs,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,o,f){e*=this.itemSize,f*=o.itemSize;for(let y=0,b=this.itemSize;y<b;y++)this.array[e+y]=o.array[f+y];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let o=0,f=this.count;o<f;o++)Ra.fromBufferAttribute(this,o),Ra.applyMatrix3(e),this.setXY(o,Ra.x,Ra.y);else if(this.itemSize===3)for(let o=0,f=this.count;o<f;o++)vs.fromBufferAttribute(this,o),vs.applyMatrix3(e),this.setXYZ(o,vs.x,vs.y,vs.z);return this}applyMatrix4(e){for(let o=0,f=this.count;o<f;o++)vs.fromBufferAttribute(this,o),vs.applyMatrix4(e),this.setXYZ(o,vs.x,vs.y,vs.z);return this}applyNormalMatrix(e){for(let o=0,f=this.count;o<f;o++)vs.fromBufferAttribute(this,o),vs.applyNormalMatrix(e),this.setXYZ(o,vs.x,vs.y,vs.z);return this}transformDirection(e){for(let o=0,f=this.count;o<f;o++)vs.fromBufferAttribute(this,o),vs.transformDirection(e),this.setXYZ(o,vs.x,vs.y,vs.z);return this}set(e,o=0){return this.array.set(e,o),this}getX(e){let o=this.array[e*this.itemSize];return this.normalized&&(o=Rs(o,this.array)),o}setX(e,o){return this.normalized&&(o=ei(o,this.array)),this.array[e*this.itemSize]=o,this}getY(e){let o=this.array[e*this.itemSize+1];return this.normalized&&(o=Rs(o,this.array)),o}setY(e,o){return this.normalized&&(o=ei(o,this.array)),this.array[e*this.itemSize+1]=o,this}getZ(e){let o=this.array[e*this.itemSize+2];return this.normalized&&(o=Rs(o,this.array)),o}setZ(e,o){return this.normalized&&(o=ei(o,this.array)),this.array[e*this.itemSize+2]=o,this}getW(e){let o=this.array[e*this.itemSize+3];return this.normalized&&(o=Rs(o,this.array)),o}setW(e,o){return this.normalized&&(o=ei(o,this.array)),this.array[e*this.itemSize+3]=o,this}setXY(e,o,f){return e*=this.itemSize,this.normalized&&(o=ei(o,this.array),f=ei(f,this.array)),this.array[e+0]=o,this.array[e+1]=f,this}setXYZ(e,o,f,y){return e*=this.itemSize,this.normalized&&(o=ei(o,this.array),f=ei(f,this.array),y=ei(y,this.array)),this.array[e+0]=o,this.array[e+1]=f,this.array[e+2]=y,this}setXYZW(e,o,f,y,b){return e*=this.itemSize,this.normalized&&(o=ei(o,this.array),f=ei(f,this.array),y=ei(y,this.array),b=ei(b,this.array)),this.array[e+0]=o,this.array[e+1]=f,this.array[e+2]=y,this.array[e+3]=b,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==pc&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}copyColorsArray(){C.error("THREE.BufferAttribute: copyColorsArray() was removed in r144.")}copyVector2sArray(){C.error("THREE.BufferAttribute: copyVector2sArray() was removed in r144.")}copyVector3sArray(){C.error("THREE.BufferAttribute: copyVector3sArray() was removed in r144.")}copyVector4sArray(){C.error("THREE.BufferAttribute: copyVector4sArray() was removed in r144.")}}class Gc extends no{constructor(e,o,f){super(new Int8Array(e),o,f)}}class rh extends no{constructor(e,o,f){super(new Uint8Array(e),o,f)}}class zm extends no{constructor(e,o,f){super(new Uint8ClampedArray(e),o,f)}}class ih extends no{constructor(e,o,f){super(new Int16Array(e),o,f)}}class Mc extends no{constructor(e,o,f){super(new Uint16Array(e),o,f)}}class l1 extends no{constructor(e,o,f){super(new Int32Array(e),o,f)}}class lr extends no{constructor(e,o,f){super(new Uint32Array(e),o,f)}}class Uc extends no{constructor(e,o,f){super(new Uint16Array(e),o,f),this.isFloat16BufferAttribute=!0}getX(e){let o=Au(this.array[e*this.itemSize]);return this.normalized&&(o=Rs(o,this.array)),o}setX(e,o){return this.normalized&&(o=ei(o,this.array)),this.array[e*this.itemSize]=Va(o),this}getY(e){let o=Au(this.array[e*this.itemSize+1]);return this.normalized&&(o=Rs(o,this.array)),o}setY(e,o){return this.normalized&&(o=ei(o,this.array)),this.array[e*this.itemSize+1]=Va(o),this}getZ(e){let o=Au(this.array[e*this.itemSize+2]);return this.normalized&&(o=Rs(o,this.array)),o}setZ(e,o){return this.normalized&&(o=ei(o,this.array)),this.array[e*this.itemSize+2]=Va(o),this}getW(e){let o=Au(this.array[e*this.itemSize+3]);return this.normalized&&(o=Rs(o,this.array)),o}setW(e,o){return this.normalized&&(o=ei(o,this.array)),this.array[e*this.itemSize+3]=Va(o),this}setXY(e,o,f){return e*=this.itemSize,this.normalized&&(o=ei(o,this.array),f=ei(f,this.array)),this.array[e+0]=Va(o),this.array[e+1]=Va(f),this}setXYZ(e,o,f,y){return e*=this.itemSize,this.normalized&&(o=ei(o,this.array),f=ei(f,this.array),y=ei(y,this.array)),this.array[e+0]=Va(o),this.array[e+1]=Va(f),this.array[e+2]=Va(y),this}setXYZW(e,o,f,y,b){return e*=this.itemSize,this.normalized&&(o=ei(o,this.array),f=ei(f,this.array),y=ei(y,this.array),b=ei(b,this.array)),this.array[e+0]=Va(o),this.array[e+1]=Va(f),this.array[e+2]=Va(y),this.array[e+3]=Va(b),this}}class Dr extends no{constructor(e,o,f){super(new Float32Array(e),o,f)}}class of extends no{constructor(e,o,f){super(new Float64Array(e),o,f)}}let fg=0;const Is=new ui,gl=new Yi,Zl=new je,Qa=new Qo,yu=new Qo,Fs=new je;class mi extends wa{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:fg++}),this.uuid=ll(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Ku(e)?lr:Mc)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,o){return this.attributes[e]=o,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,o,f=0){this.groups.push({start:e,count:o,materialIndex:f})}clearGroups(){this.groups=[]}setDrawRange(e,o){this.drawRange.start=e,this.drawRange.count=o}applyMatrix4(e){const o=this.attributes.position;o!==void 0&&(o.applyMatrix4(e),o.needsUpdate=!0);const f=this.attributes.normal;if(f!==void 0){const b=new wi().getNormalMatrix(e);f.applyNormalMatrix(b),f.needsUpdate=!0}const y=this.attributes.tangent;return y!==void 0&&(y.transformDirection(e),y.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Is.makeRotationFromQuaternion(e),this.applyMatrix4(Is),this}rotateX(e){return Is.makeRotationX(e),this.applyMatrix4(Is),this}rotateY(e){return Is.makeRotationY(e),this.applyMatrix4(Is),this}rotateZ(e){return Is.makeRotationZ(e),this.applyMatrix4(Is),this}translate(e,o,f){return Is.makeTranslation(e,o,f),this.applyMatrix4(Is),this}scale(e,o,f){return Is.makeScale(e,o,f),this.applyMatrix4(Is),this}lookAt(e){return gl.lookAt(e),gl.updateMatrix(),this.applyMatrix4(gl.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Zl).negate(),this.translate(Zl.x,Zl.y,Zl.z),this}setFromPoints(e){const o=[];for(let f=0,y=e.length;f<y;f++){const b=e[f];o.push(b.x,b.y,b.z||0)}return this.setAttribute("position",new Dr(o,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Qo);const e=this.attributes.position,o=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){C.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new je(-1/0,-1/0,-1/0),new je(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),o)for(let f=0,y=o.length;f<y;f++){const b=o[f];Qa.setFromBufferAttribute(b),this.morphTargetsRelative?(Fs.addVectors(this.boundingBox.min,Qa.min),this.boundingBox.expandByPoint(Fs),Fs.addVectors(this.boundingBox.max,Qa.max),this.boundingBox.expandByPoint(Fs)):(this.boundingBox.expandByPoint(Qa.min),this.boundingBox.expandByPoint(Qa.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&C.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ta);const e=this.attributes.position,o=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){C.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new je,1/0);return}if(e){const f=this.boundingSphere.center;if(Qa.setFromBufferAttribute(e),o)for(let b=0,B=o.length;b<B;b++){const I=o[b];yu.setFromBufferAttribute(I),this.morphTargetsRelative?(Fs.addVectors(Qa.min,yu.min),Qa.expandByPoint(Fs),Fs.addVectors(Qa.max,yu.max),Qa.expandByPoint(Fs)):(Qa.expandByPoint(yu.min),Qa.expandByPoint(yu.max))}Qa.getCenter(f);let y=0;for(let b=0,B=e.count;b<B;b++)Fs.fromBufferAttribute(e,b),y=Math.max(y,f.distanceToSquared(Fs));if(o)for(let b=0,B=o.length;b<B;b++){const I=o[b],D=this.morphTargetsRelative;for(let N=0,K=I.count;N<K;N++)Fs.fromBufferAttribute(I,N),D&&(Zl.fromBufferAttribute(e,N),Fs.add(Zl)),y=Math.max(y,f.distanceToSquared(Fs))}this.boundingSphere.radius=Math.sqrt(y),isNaN(this.boundingSphere.radius)&&C.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,o=this.attributes;if(e===null||o.position===void 0||o.normal===void 0||o.uv===void 0){C.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const f=e.array,y=o.position.array,b=o.normal.array,B=o.uv.array,I=y.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new no(new Float32Array(4*I),4));const D=this.getAttribute("tangent").array,N=[],K=[];for(let We=0;We<I;We++)N[We]=new je,K[We]=new je;const Z=new je,q=new je,ee=new je,ie=new _n,he=new _n,se=new _n,ne=new je,be=new je;function fe(We,Wt,Rn){Z.fromArray(y,We*3),q.fromArray(y,Wt*3),ee.fromArray(y,Rn*3),ie.fromArray(B,We*2),he.fromArray(B,Wt*2),se.fromArray(B,Rn*2),q.sub(Z),ee.sub(Z),he.sub(ie),se.sub(ie);const Ut=1/(he.x*se.y-se.x*he.y);isFinite(Ut)&&(ne.copy(q).multiplyScalar(se.y).addScaledVector(ee,-he.y).multiplyScalar(Ut),be.copy(ee).multiplyScalar(he.x).addScaledVector(q,-se.x).multiplyScalar(Ut),N[We].add(ne),N[Wt].add(ne),N[Rn].add(ne),K[We].add(be),K[Wt].add(be),K[Rn].add(be))}let xe=this.groups;xe.length===0&&(xe=[{start:0,count:f.length}]);for(let We=0,Wt=xe.length;We<Wt;++We){const Rn=xe[We],Ut=Rn.start,Ht=Rn.count;for(let Jt=Ut,Sn=Ut+Ht;Jt<Sn;Jt+=3)fe(f[Jt+0],f[Jt+1],f[Jt+2])}const Le=new je,He=new je,qe=new je,et=new je;function we(We){qe.fromArray(b,We*3),et.copy(qe);const Wt=N[We];Le.copy(Wt),Le.sub(qe.multiplyScalar(qe.dot(Wt))).normalize(),He.crossVectors(et,Wt);const Ut=He.dot(K[We])<0?-1:1;D[We*4]=Le.x,D[We*4+1]=Le.y,D[We*4+2]=Le.z,D[We*4+3]=Ut}for(let We=0,Wt=xe.length;We<Wt;++We){const Rn=xe[We],Ut=Rn.start,Ht=Rn.count;for(let Jt=Ut,Sn=Ut+Ht;Jt<Sn;Jt+=3)we(f[Jt+0]),we(f[Jt+1]),we(f[Jt+2])}}computeVertexNormals(){const e=this.index,o=this.getAttribute("position");if(o!==void 0){let f=this.getAttribute("normal");if(f===void 0)f=new no(new Float32Array(o.count*3),3),this.setAttribute("normal",f);else for(let q=0,ee=f.count;q<ee;q++)f.setXYZ(q,0,0,0);const y=new je,b=new je,B=new je,I=new je,D=new je,N=new je,K=new je,Z=new je;if(e)for(let q=0,ee=e.count;q<ee;q+=3){const ie=e.getX(q+0),he=e.getX(q+1),se=e.getX(q+2);y.fromBufferAttribute(o,ie),b.fromBufferAttribute(o,he),B.fromBufferAttribute(o,se),K.subVectors(B,b),Z.subVectors(y,b),K.cross(Z),I.fromBufferAttribute(f,ie),D.fromBufferAttribute(f,he),N.fromBufferAttribute(f,se),I.add(K),D.add(K),N.add(K),f.setXYZ(ie,I.x,I.y,I.z),f.setXYZ(he,D.x,D.y,D.z),f.setXYZ(se,N.x,N.y,N.z)}else for(let q=0,ee=o.count;q<ee;q+=3)y.fromBufferAttribute(o,q+0),b.fromBufferAttribute(o,q+1),B.fromBufferAttribute(o,q+2),K.subVectors(B,b),Z.subVectors(y,b),K.cross(Z),f.setXYZ(q+0,K.x,K.y,K.z),f.setXYZ(q+1,K.x,K.y,K.z),f.setXYZ(q+2,K.x,K.y,K.z);this.normalizeNormals(),f.needsUpdate=!0}}merge(){return C.error("THREE.BufferGeometry.merge() has been removed. Use THREE.BufferGeometryUtils.mergeGeometries() instead."),this}normalizeNormals(){const e=this.attributes.normal;for(let o=0,f=e.count;o<f;o++)Fs.fromBufferAttribute(e,o),Fs.normalize(),e.setXYZ(o,Fs.x,Fs.y,Fs.z)}toNonIndexed(){function e(I,D){const N=I.array,K=I.itemSize,Z=I.normalized,q=new N.constructor(D.length*K);let ee=0,ie=0;for(let he=0,se=D.length;he<se;he++){I.isInterleavedBufferAttribute?ee=D[he]*I.data.stride+I.offset:ee=D[he]*K;for(let ne=0;ne<K;ne++)q[ie++]=N[ee++]}return new no(q,K,Z)}if(this.index===null)return C.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const o=new mi,f=this.index.array,y=this.attributes;for(const I in y){const D=y[I],N=e(D,f);o.setAttribute(I,N)}const b=this.morphAttributes;for(const I in b){const D=[],N=b[I];for(let K=0,Z=N.length;K<Z;K++){const q=N[K],ee=e(q,f);D.push(ee)}o.morphAttributes[I]=D}o.morphTargetsRelative=this.morphTargetsRelative;const B=this.groups;for(let I=0,D=B.length;I<D;I++){const N=B[I];o.addGroup(N.start,N.count,N.materialIndex)}return o}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const D=this.parameters;for(const N in D)D[N]!==void 0&&(e[N]=D[N]);return e}e.data={attributes:{}};const o=this.index;o!==null&&(e.data.index={type:o.array.constructor.name,array:Array.prototype.slice.call(o.array)});const f=this.attributes;for(const D in f){const N=f[D];e.data.attributes[D]=N.toJSON(e.data)}const y={};let b=!1;for(const D in this.morphAttributes){const N=this.morphAttributes[D],K=[];for(let Z=0,q=N.length;Z<q;Z++){const ee=N[Z];K.push(ee.toJSON(e.data))}K.length>0&&(y[D]=K,b=!0)}b&&(e.data.morphAttributes=y,e.data.morphTargetsRelative=this.morphTargetsRelative);const B=this.groups;B.length>0&&(e.data.groups=JSON.parse(JSON.stringify(B)));const I=this.boundingSphere;return I!==null&&(e.data.boundingSphere={center:I.center.toArray(),radius:I.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const o={};this.name=e.name;const f=e.index;f!==null&&this.setIndex(f.clone(o));const y=e.attributes;for(const N in y){const K=y[N];this.setAttribute(N,K.clone(o))}const b=e.morphAttributes;for(const N in b){const K=[],Z=b[N];for(let q=0,ee=Z.length;q<ee;q++)K.push(Z[q].clone(o));this.morphAttributes[N]=K}this.morphTargetsRelative=e.morphTargetsRelative;const B=e.groups;for(let N=0,K=B.length;N<K;N++){const Z=B[N];this.addGroup(Z.start,Z.count,Z.materialIndex)}const I=e.boundingBox;I!==null&&(this.boundingBox=I.clone());const D=e.boundingSphere;return D!==null&&(this.boundingSphere=D.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const sf=new ui,ql=new Rp,od=new Ta,oh=new je,vu=new je,op=new je,Il=new je,gg=new je,af=new je,sd=new _n,_u=new _n,ad=new _n,sh=new je,ld=new je,cd=new je,Op=new je,Dp=new je;class Oo extends Yi{constructor(e=new mi,o=new Ec){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=o,this.updateMorphTargets()}copy(e,o){return super.copy(e,o),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const o=this.geometry.morphAttributes,f=Object.keys(o);if(f.length>0){const y=o[f[0]];if(y!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let b=0,B=y.length;b<B;b++){const I=y[b].name||String(b);this.morphTargetInfluences.push(0),this.morphTargetDictionary[I]=b}}}}getVertexPosition(e,o){const f=this.geometry,y=f.attributes.position,b=f.morphAttributes.position,B=f.morphTargetsRelative;o.fromBufferAttribute(y,e);const I=this.morphTargetInfluences;if(b&&I){af.set(0,0,0);for(let D=0,N=b.length;D<N;D++){const K=I[D],Z=b[D];K!==0&&(gg.fromBufferAttribute(Z,e),B?af.addScaledVector(gg,K):af.addScaledVector(gg.sub(o),K))}o.add(af)}return o}raycast(e,o){const f=this.geometry,y=this.material,b=this.matrixWorld;y!==void 0&&(f.boundingSphere===null&&f.computeBoundingSphere(),od.copy(f.boundingSphere),od.applyMatrix4(b),ql.copy(e.ray).recast(e.near),!(od.containsPoint(ql.origin)===!1&&(ql.intersectSphere(od,oh)===null||ql.origin.distanceToSquared(oh)>Y2(e.far-e.near,2)))&&(sf.copy(b).invert(),ql.copy(e.ray).applyMatrix4(sf),!(f.boundingBox!==null&&ql.intersectsBox(f.boundingBox)===!1)&&this._computeIntersections(e,o,ql)))}_computeIntersections(e,o,f){let y;const b=this.geometry,B=this.material,I=b.index,D=b.attributes.position,N=b.attributes.uv,K=b.attributes.uv1,Z=b.attributes.normal,q=b.groups,ee=b.drawRange;if(I!==null)if(Array.isArray(B))for(let ie=0,he=q.length;ie<he;ie++){const se=q[ie],ne=B[se.materialIndex],be=Math.max(se.start,ee.start),fe=Math.min(I.count,Math.min(se.start+se.count,ee.start+ee.count));for(let xe=be,Le=fe;xe<Le;xe+=3){const He=I.getX(xe),qe=I.getX(xe+1),et=I.getX(xe+2);y=Nc(this,ne,e,f,N,K,Z,He,qe,et),y&&(y.faceIndex=Math.floor(xe/3),y.face.materialIndex=se.materialIndex,o.push(y))}}else{const ie=Math.max(0,ee.start),he=Math.min(I.count,ee.start+ee.count);for(let se=ie,ne=he;se<ne;se+=3){const be=I.getX(se),fe=I.getX(se+1),xe=I.getX(se+2);y=Nc(this,B,e,f,N,K,Z,be,fe,xe),y&&(y.faceIndex=Math.floor(se/3),o.push(y))}}else if(D!==void 0)if(Array.isArray(B))for(let ie=0,he=q.length;ie<he;ie++){const se=q[ie],ne=B[se.materialIndex],be=Math.max(se.start,ee.start),fe=Math.min(D.count,Math.min(se.start+se.count,ee.start+ee.count));for(let xe=be,Le=fe;xe<Le;xe+=3){const He=xe,qe=xe+1,et=xe+2;y=Nc(this,ne,e,f,N,K,Z,He,qe,et),y&&(y.faceIndex=Math.floor(xe/3),y.face.materialIndex=se.materialIndex,o.push(y))}}else{const ie=Math.max(0,ee.start),he=Math.min(D.count,ee.start+ee.count);for(let se=ie,ne=he;se<ne;se+=3){const be=se,fe=se+1,xe=se+2;y=Nc(this,B,e,f,N,K,Z,be,fe,xe),y&&(y.faceIndex=Math.floor(se/3),o.push(y))}}}}function ah(S,e,o,f,y,b,B,I){let D;if(e.side===Oe?D=f.intersectTriangle(B,b,y,!0,I):D=f.intersectTriangle(y,b,B,e.side===Pe,I),D===null)return null;Dp.copy(I),Dp.applyMatrix4(S.matrixWorld);const N=o.ray.origin.distanceTo(Dp);return N<o.near||N>o.far?null:{distance:N,point:Dp.clone(),object:S}}function Nc(S,e,o,f,y,b,B,I,D,N){S.getVertexPosition(I,vu),S.getVertexPosition(D,op),S.getVertexPosition(N,Il);const K=ah(S,e,o,f,vu,op,Il,Op);if(K){y&&(sd.fromBufferAttribute(y,I),_u.fromBufferAttribute(y,D),ad.fromBufferAttribute(y,N),K.uv=Ks.getInterpolation(Op,vu,op,Il,sd,_u,ad,new _n)),b&&(sd.fromBufferAttribute(b,I),_u.fromBufferAttribute(b,D),ad.fromBufferAttribute(b,N),K.uv1=Ks.getInterpolation(Op,vu,op,Il,sd,_u,ad,new _n),K.uv2=K.uv1),B&&(sh.fromBufferAttribute(B,I),ld.fromBufferAttribute(B,D),cd.fromBufferAttribute(B,N),K.normal=Ks.getInterpolation(Op,vu,op,Il,sh,ld,cd,new je),K.normal.dot(f.direction)>0&&K.normal.multiplyScalar(-1));const Z={a:I,b:D,c:N,normal:new je,materialIndex:0};Ks.getNormal(vu,op,Il,Z.normal),K.face=Z}return K}class Fl extends mi{constructor(e=1,o=1,f=1,y=1,b=1,B=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:o,depth:f,widthSegments:y,heightSegments:b,depthSegments:B};const I=this;y=Math.floor(y),b=Math.floor(b),B=Math.floor(B);const D=[],N=[],K=[],Z=[];let q=0,ee=0;ie("z","y","x",-1,-1,f,o,e,B,b,0),ie("z","y","x",1,-1,f,o,-e,B,b,1),ie("x","z","y",1,1,e,f,o,y,B,2),ie("x","z","y",1,-1,e,f,-o,y,B,3),ie("x","y","z",1,-1,e,o,f,y,b,4),ie("x","y","z",-1,-1,e,o,-f,y,b,5),this.setIndex(D),this.setAttribute("position",new Dr(N,3)),this.setAttribute("normal",new Dr(K,3)),this.setAttribute("uv",new Dr(Z,2));function ie(he,se,ne,be,fe,xe,Le,He,qe,et,we){const We=xe/qe,Wt=Le/et,Rn=xe/2,Ut=Le/2,Ht=He/2,Jt=qe+1,Sn=et+1;let cn=0,En=0;const In=new je;for(let kn=0;kn<Sn;kn++){const wr=kn*Wt-Ut;for(let Zt=0;Zt<Jt;Zt++){const zn=Zt*We-Rn;In[he]=zn*be,In[se]=wr*fe,In[ne]=Ht,N.push(In.x,In.y,In.z),In[he]=0,In[se]=0,In[ne]=He>0?1:-1,K.push(In.x,In.y,In.z),Z.push(Zt/qe),Z.push(1-kn/et),cn+=1}}for(let kn=0;kn<et;kn++)for(let wr=0;wr<qe;wr++){const Zt=q+wr+Jt*kn,zn=q+wr+Jt*(kn+1),hn=q+(wr+1)+Jt*(kn+1),ir=q+(wr+1)+Jt*kn;D.push(Zt,zn,ir),D.push(zn,hn,ir),En+=6}I.addGroup(ee,En,we),ee+=En,q+=cn}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fl(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Lp(S){const e={};for(const o in S){e[o]={};for(const f in S[o]){const y=S[o][f];y&&(y.isColor||y.isMatrix3||y.isMatrix4||y.isVector2||y.isVector3||y.isVector4||y.isTexture||y.isQuaternion)?y.isRenderTargetTexture?(C.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[o][f]=null):e[o][f]=y.clone():Array.isArray(y)?e[o][f]=y.slice():e[o][f]=y}}return e}function ca(S){const e={};for(let o=0;o<S.length;o++){const f=Lp(S[o]);for(const y in f)e[y]=f[y]}return e}function lf(S){const e=[];for(let o=0;o<S.length;o++)e.push(S[o].clone());return e}function pd(S){return S.getRenderTarget()===null?S.outputColorSpace:al}const lh={clone:Lp,merge:ca};var Gm=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Os=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ai extends Xs{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Gm,this.fragmentShader=Os,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Lp(e.uniforms),this.uniformsGroups=lf(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const o=super.toJSON(e);o.glslVersion=this.glslVersion,o.uniforms={};for(const y in this.uniforms){const B=this.uniforms[y].value;B&&B.isTexture?o.uniforms[y]={type:"t",value:B.toJSON(e).uuid}:B&&B.isColor?o.uniforms[y]={type:"c",value:B.getHex()}:B&&B.isVector2?o.uniforms[y]={type:"v2",value:B.toArray()}:B&&B.isVector3?o.uniforms[y]={type:"v3",value:B.toArray()}:B&&B.isVector4?o.uniforms[y]={type:"v4",value:B.toArray()}:B&&B.isMatrix3?o.uniforms[y]={type:"m3",value:B.toArray()}:B&&B.isMatrix4?o.uniforms[y]={type:"m4",value:B.toArray()}:o.uniforms[y]={value:B}}Object.keys(this.defines).length>0&&(o.defines=this.defines),o.vertexShader=this.vertexShader,o.fragmentShader=this.fragmentShader,o.lights=this.lights,o.clipping=this.clipping;const f={};for(const y in this.extensions)this.extensions[y]===!0&&(f[y]=!0);return Object.keys(f).length>0&&(o.extensions=f),o}}class Qi extends Yi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ui,this.projectionMatrix=new ui,this.projectionMatrixInverse=new ui,this.coordinateSystem=Ha}copy(e,o){return super.copy(e,o),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const o=this.matrixWorld.elements;return e.set(-o[8],-o[9],-o[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,o){super.updateWorldMatrix(e,o),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Ji extends Qi{constructor(e=50,o=1,f=.1,y=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=f,this.far=y,this.focus=10,this.aspect=o,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,o){return super.copy(e,o),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const o=.5*this.getFilmHeight()/e;this.fov=hc*2*Math.atan(o),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(kc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return hc*2*Math.atan(Math.tan(kc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,o,f,y,b,B){this.aspect=e/o,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=o,this.view.offsetX=f,this.view.offsetY=y,this.view.width=b,this.view.height=B,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let o=e*Math.tan(kc*.5*this.fov)/this.zoom,f=2*o,y=this.aspect*f,b=-.5*y;const B=this.view;if(this.view!==null&&this.view.enabled){const D=B.fullWidth,N=B.fullHeight;b+=B.offsetX*y/D,o-=B.offsetY*f/N,y*=B.width/D,f*=B.height/N}const I=this.filmOffset;I!==0&&(b+=e*I/this.getFilmWidth()),this.projectionMatrix.makePerspective(b,b+y,o,o-f,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const o=super.toJSON(e);return o.object.fov=this.fov,o.object.zoom=this.zoom,o.object.near=this.near,o.object.far=this.far,o.object.focus=this.focus,o.object.aspect=this.aspect,this.view!==null&&(o.object.view=Object.assign({},this.view)),o.object.filmGauge=this.filmGauge,o.object.filmOffset=this.filmOffset,o}}const _s=-90,pa=1;class Eu extends Yi{constructor(e,o,f){super(),this.type="CubeCamera",this.renderTarget=f,this.coordinateSystem=null;const y=new Ji(_s,pa,e,o);y.layers=this.layers,this.add(y);const b=new Ji(_s,pa,e,o);b.layers=this.layers,this.add(b);const B=new Ji(_s,pa,e,o);B.layers=this.layers,this.add(B);const I=new Ji(_s,pa,e,o);I.layers=this.layers,this.add(I);const D=new Ji(_s,pa,e,o);D.layers=this.layers,this.add(D);const N=new Ji(_s,pa,e,o);N.layers=this.layers,this.add(N)}updateCoordinateSystem(){const e=this.coordinateSystem,o=this.children.concat(),[f,y,b,B,I,D]=o;for(const N of o)this.remove(N);if(e===Ha)f.up.set(0,1,0),f.lookAt(1,0,0),y.up.set(0,1,0),y.lookAt(-1,0,0),b.up.set(0,0,-1),b.lookAt(0,1,0),B.up.set(0,0,1),B.lookAt(0,-1,0),I.up.set(0,1,0),I.lookAt(0,0,1),D.up.set(0,1,0),D.lookAt(0,0,-1);else if(e===$c)f.up.set(0,-1,0),f.lookAt(-1,0,0),y.up.set(0,-1,0),y.lookAt(1,0,0),b.up.set(0,0,1),b.lookAt(0,1,0),B.up.set(0,0,-1),B.lookAt(0,-1,0),I.up.set(0,-1,0),I.lookAt(0,0,1),D.up.set(0,-1,0),D.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const N of o)this.add(N),N.updateMatrixWorld()}update(e,o){this.parent===null&&this.updateMatrixWorld();const f=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[y,b,B,I,D,N]=this.children,K=e.getRenderTarget(),Z=e.toneMapping,q=e.xr.enabled;e.toneMapping=Ci,e.xr.enabled=!1;const ee=f.texture.generateMipmaps;f.texture.generateMipmaps=!1,e.setRenderTarget(f,0),e.render(o,y),e.setRenderTarget(f,1),e.render(o,b),e.setRenderTarget(f,2),e.render(o,B),e.setRenderTarget(f,3),e.render(o,I),e.setRenderTarget(f,4),e.render(o,D),f.texture.generateMipmaps=ee,e.setRenderTarget(f,5),e.render(o,N),e.setRenderTarget(K),e.toneMapping=Z,e.xr.enabled=q,f.texture.needsPMREMUpdate=!0}}class Es extends ps{constructor(e,o,f,y,b,B,I,D,N,K){e=e!==void 0?e:[],o=o!==void 0?o:Io,super(e,o,f,y,b,B,I,D,N,K),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class ud extends pl{constructor(e=1,o={}){super(e,e,o),this.isWebGLCubeRenderTarget=!0;const f={width:e,height:e,depth:1},y=[f,f,f,f,f,f];o.encoding!==void 0&&(fc("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),o.colorSpace=o.encoding===Nl?Qn:Ml),this.texture=new Es(y,o.mapping,o.wrapS,o.wrapT,o.magFilter,o.minFilter,o.format,o.type,o.anisotropy,o.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=o.generateMipmaps!==void 0?o.generateMipmaps:!1,this.texture.minFilter=o.minFilter!==void 0?o.minFilter:ho}fromEquirectangularTexture(e,o){this.texture.type=o.type,this.texture.colorSpace=o.colorSpace,this.texture.generateMipmaps=o.generateMipmaps,this.texture.minFilter=o.minFilter,this.texture.magFilter=o.magFilter;const f={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},y=new Fl(5,5,5),b=new ai({name:"CubemapFromEquirect",uniforms:Lp(f.uniforms),vertexShader:f.vertexShader,fragmentShader:f.fragmentShader,side:Oe,blending:gt});b.uniforms.tEquirect.value=o;const B=new Oo(y,b),I=o.minFilter;return o.minFilter===Fo&&(o.minFilter=ho),new Eu(1,10,this).update(e,B),o.minFilter=I,B.geometry.dispose(),B.material.dispose(),this}clear(e,o,f,y){const b=e.getRenderTarget();for(let B=0;B<6;B++)e.setRenderTarget(this,B),e.clear(o,f,y);e.setRenderTarget(b)}}const bu=new je,cf=new je,mg=new wi;class $l{constructor(e=new je(1,0,0),o=0){this.isPlane=!0,this.normal=e,this.constant=o}set(e,o){return this.normal.copy(e),this.constant=o,this}setComponents(e,o,f,y){return this.normal.set(e,o,f),this.constant=y,this}setFromNormalAndCoplanarPoint(e,o){return this.normal.copy(e),this.constant=-o.dot(this.normal),this}setFromCoplanarPoints(e,o,f){const y=bu.subVectors(f,o).cross(cf.subVectors(e,o)).normalize();return this.setFromNormalAndCoplanarPoint(y,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,o){return o.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,o){const f=e.delta(bu),y=this.normal.dot(f);if(y===0)return this.distanceToPoint(e.start)===0?o.copy(e.start):null;const b=-(e.start.dot(this.normal)+this.constant)/y;return b<0||b>1?null:o.copy(e.start).addScaledVector(f,b)}intersectsLine(e){const o=this.distanceToPoint(e.start),f=this.distanceToPoint(e.end);return o<0&&f>0||f<0&&o>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,o){const f=o||mg.getNormalMatrix(e),y=this.coplanarPoint(bu).applyMatrix4(e),b=this.normal.applyMatrix3(f).normalize();return this.constant=-y.dot(b),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Js=new Ta,dd=new je;class ch{constructor(e=new $l,o=new $l,f=new $l,y=new $l,b=new $l,B=new $l){this.planes=[e,o,f,y,b,B]}set(e,o,f,y,b,B){const I=this.planes;return I[0].copy(e),I[1].copy(o),I[2].copy(f),I[3].copy(y),I[4].copy(b),I[5].copy(B),this}copy(e){const o=this.planes;for(let f=0;f<6;f++)o[f].copy(e.planes[f]);return this}setFromProjectionMatrix(e,o=Ha){const f=this.planes,y=e.elements,b=y[0],B=y[1],I=y[2],D=y[3],N=y[4],K=y[5],Z=y[6],q=y[7],ee=y[8],ie=y[9],he=y[10],se=y[11],ne=y[12],be=y[13],fe=y[14],xe=y[15];if(f[0].setComponents(D-b,q-N,se-ee,xe-ne).normalize(),f[1].setComponents(D+b,q+N,se+ee,xe+ne).normalize(),f[2].setComponents(D+B,q+K,se+ie,xe+be).normalize(),f[3].setComponents(D-B,q-K,se-ie,xe-be).normalize(),f[4].setComponents(D-I,q-Z,se-he,xe-fe).normalize(),o===Ha)f[5].setComponents(D+I,q+Z,se+he,xe+fe).normalize();else if(o===$c)f[5].setComponents(I,Z,he,fe).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+o);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Js.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const o=e.geometry;o.boundingSphere===null&&o.computeBoundingSphere(),Js.copy(o.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Js)}intersectsSprite(e){return Js.center.set(0,0,0),Js.radius=.7071067811865476,Js.applyMatrix4(e.matrixWorld),this.intersectsSphere(Js)}intersectsSphere(e){const o=this.planes,f=e.center,y=-e.radius;for(let b=0;b<6;b++)if(o[b].distanceToPoint(f)<y)return!1;return!0}intersectsBox(e){const o=this.planes;for(let f=0;f<6;f++){const y=o[f];if(dd.x=y.normal.x>0?e.max.x:e.min.x,dd.y=y.normal.y>0?e.max.y:e.min.y,dd.z=y.normal.z>0?e.max.z:e.min.z,y.distanceToPoint(dd)<0)return!1}return!0}containsPoint(e){const o=this.planes;for(let f=0;f<6;f++)if(o[f].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Mu(){let S=null,e=!1,o=null,f=null;function y(b,B){o(b,B),f=S.requestAnimationFrame(y)}return{start:function(){e!==!0&&o!==null&&(f=S.requestAnimationFrame(y),e=!0)},stop:function(){S.cancelAnimationFrame(f),e=!1},setAnimationLoop:function(b){o=b},setContext:function(b){S=b}}}function Ag(S,e){const o=e.isWebGL2,f=new WeakMap;function y(N,K){const Z=N.array,q=N.usage,ee=S.createBuffer();S.bindBuffer(K,ee),S.bufferData(K,Z,q),N.onUploadCallback();let ie;if(Z instanceof Float32Array)ie=S.FLOAT;else if(Z instanceof Uint16Array)if(N.isFloat16BufferAttribute)if(o)ie=S.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else ie=S.UNSIGNED_SHORT;else if(Z instanceof Int16Array)ie=S.SHORT;else if(Z instanceof Uint32Array)ie=S.UNSIGNED_INT;else if(Z instanceof Int32Array)ie=S.INT;else if(Z instanceof Int8Array)ie=S.BYTE;else if(Z instanceof Uint8Array)ie=S.UNSIGNED_BYTE;else if(Z instanceof Uint8ClampedArray)ie=S.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+Z);return{buffer:ee,type:ie,bytesPerElement:Z.BYTES_PER_ELEMENT,version:N.version}}function b(N,K,Z){const q=K.array,ee=K.updateRange;S.bindBuffer(Z,N),ee.count===-1?S.bufferSubData(Z,0,q):(o?S.bufferSubData(Z,ee.offset*q.BYTES_PER_ELEMENT,q,ee.offset,ee.count):S.bufferSubData(Z,ee.offset*q.BYTES_PER_ELEMENT,q.subarray(ee.offset,ee.offset+ee.count)),ee.count=-1),K.onUploadCallback()}function B(N){return N.isInterleavedBufferAttribute&&(N=N.data),f.get(N)}function I(N){N.isInterleavedBufferAttribute&&(N=N.data);const K=f.get(N);K&&(S.deleteBuffer(K.buffer),f.delete(N))}function D(N,K){if(N.isGLBufferAttribute){const q=f.get(N);(!q||q.version<N.version)&&f.set(N,{buffer:N.buffer,type:N.type,bytesPerElement:N.elementSize,version:N.version});return}N.isInterleavedBufferAttribute&&(N=N.data);const Z=f.get(N);Z===void 0?f.set(N,y(N,K)):Z.version<N.version&&(b(Z.buffer,N,K),Z.version=N.version)}return{get:B,remove:I,update:D}}class Pp extends mi{constructor(e=1,o=1,f=1,y=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:o,widthSegments:f,heightSegments:y};const b=e/2,B=o/2,I=Math.floor(f),D=Math.floor(y),N=I+1,K=D+1,Z=e/I,q=o/D,ee=[],ie=[],he=[],se=[];for(let ne=0;ne<K;ne++){const be=ne*q-B;for(let fe=0;fe<N;fe++){const xe=fe*Z-b;ie.push(xe,-be,0),he.push(0,0,1),se.push(fe/I),se.push(1-ne/D)}}for(let ne=0;ne<D;ne++)for(let be=0;be<I;be++){const fe=be+N*ne,xe=be+N*(ne+1),Le=be+1+N*(ne+1),He=be+1+N*ne;ee.push(fe,xe,He),ee.push(xe,Le,He)}this.setIndex(ee),this.setAttribute("position",new Dr(ie,3)),this.setAttribute("normal",new Dr(he,3)),this.setAttribute("uv",new Dr(se,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pp(e.width,e.height,e.widthSegments,e.heightSegments)}}var xu=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,hd=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,kp=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,ph=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Cu=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Um=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,yg="vec3 transformed = vec3( position );",vg=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Ka=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Su=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			 return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float R21 = R12;
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,ec=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,pf=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,Ni=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,_g=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,uf=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Eg=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,c1=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,zp=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,xs=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,bg=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Ko=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Gp=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Mg=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Nm=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,xg=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,df=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,p1="gl_FragColor = linearToOutputTexel( gl_FragColor );",u1=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,jm=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,uh=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Up=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,d1=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,wu=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Cg=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Ia=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,h1=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Sg=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,wg=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,fd=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,Tg=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Bg=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,Hm=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,tc=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Rg=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,hf=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Np=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,ff=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,jp=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,gf=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,mf=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Ig=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,dh=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Wm=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Fg=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Og=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Vm=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,sp=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,Qm=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,f1=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,M=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,w=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,G=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,V=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,te=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,de=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Ve=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,pt=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,en=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal, vNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,Nn=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Ir=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,vi=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,qr=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Do=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,Nr=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Fa=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,Ol=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,Dt=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,Et=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,Qt=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,_r=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,jr=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,Oi=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,_i=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,co=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,ua=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,po=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,Hp=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,g1=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,m1=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,A1=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,J2=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,Z2=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,q2=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,$2=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,e_=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,t_=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,n_=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,r_=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,i_=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,o_=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,s_=`#ifdef USE_UV
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Km=`#ifdef USE_UV
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,a_=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const ji={alphamap_fragment:xu,alphamap_pars_fragment:hd,alphatest_fragment:kp,alphatest_pars_fragment:ph,aomap_fragment:Cu,aomap_pars_fragment:Um,begin_vertex:yg,beginnormal_vertex:vg,bsdfs:Ka,iridescence_fragment:Su,bumpmap_pars_fragment:ec,clipping_planes_fragment:pf,clipping_planes_pars_fragment:Ni,clipping_planes_pars_vertex:_g,clipping_planes_vertex:uf,color_fragment:Eg,color_pars_fragment:c1,color_pars_vertex:zp,color_vertex:xs,common:bg,cube_uv_reflection_fragment:Ko,defaultnormal_vertex:Gp,displacementmap_pars_vertex:Mg,displacementmap_vertex:Nm,emissivemap_fragment:xg,emissivemap_pars_fragment:df,encodings_fragment:p1,encodings_pars_fragment:u1,envmap_fragment:jm,envmap_common_pars_fragment:uh,envmap_pars_fragment:Up,envmap_pars_vertex:d1,envmap_physical_pars_fragment:Rg,envmap_vertex:wu,fog_vertex:Cg,fog_pars_vertex:Ia,fog_fragment:h1,fog_pars_fragment:Sg,gradientmap_pars_fragment:wg,lightmap_fragment:fd,lightmap_pars_fragment:Tg,lights_lambert_fragment:Bg,lights_lambert_pars_fragment:Hm,lights_pars_begin:tc,lights_toon_fragment:hf,lights_toon_pars_fragment:Np,lights_phong_fragment:ff,lights_phong_pars_fragment:jp,lights_physical_fragment:gf,lights_physical_pars_fragment:mf,lights_fragment_begin:Ig,lights_fragment_maps:dh,lights_fragment_end:Wm,logdepthbuf_fragment:Fg,logdepthbuf_pars_fragment:Og,logdepthbuf_pars_vertex:Vm,logdepthbuf_vertex:sp,map_fragment:Qm,map_pars_fragment:f1,map_particle_fragment:M,map_particle_pars_fragment:w,metalnessmap_fragment:G,metalnessmap_pars_fragment:V,morphcolor_vertex:te,morphnormal_vertex:de,morphtarget_pars_vertex:Ve,morphtarget_vertex:pt,normal_fragment_begin:en,normal_fragment_maps:Nn,normal_pars_fragment:Ir,normal_pars_vertex:vi,normal_vertex:qr,normalmap_pars_fragment:Do,clearcoat_normal_fragment_begin:Nr,clearcoat_normal_fragment_maps:Fa,clearcoat_pars_fragment:Ol,iridescence_pars_fragment:Dt,output_fragment:Et,packing:Qt,premultiplied_alpha_fragment:_r,project_vertex:jr,dithering_fragment:Oi,dithering_pars_fragment:_i,roughnessmap_fragment:co,roughnessmap_pars_fragment:ua,shadowmap_pars_fragment:po,shadowmap_pars_vertex:Hp,shadowmap_vertex:g1,shadowmask_pars_fragment:m1,skinbase_vertex:A1,skinning_pars_vertex:J2,skinning_vertex:Z2,skinnormal_vertex:q2,specularmap_fragment:$2,specularmap_pars_fragment:e_,tonemapping_fragment:t_,tonemapping_pars_fragment:n_,transmission_fragment:r_,transmission_pars_fragment:i_,uv_pars_fragment:o_,uv_pars_vertex:s_,uv_vertex:Km,worldpos_vertex:a_,background_vert:`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,background_frag:`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,backgroundCube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,backgroundCube_frag:`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,cube_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cube_frag:`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,depth_vert:`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,depth_frag:`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,distanceRGBA_vert:`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,distanceRGBA_frag:`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,equirect_vert:`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,equirect_frag:`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,linedashed_vert:`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,linedashed_frag:`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,meshbasic_vert:`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,meshbasic_frag:`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshlambert_vert:`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshlambert_frag:`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshmatcap_vert:`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,meshmatcap_frag:`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshnormal_vert:`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,meshnormal_frag:`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,meshphong_vert:`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshphong_frag:`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshphysical_vert:`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,meshphysical_frag:`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,meshtoon_vert:`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,meshtoon_frag:`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,points_vert:`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,points_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,shadow_vert:`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,shadow_frag:`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sprite_vert:`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,sprite_frag:`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`},ur={common:{diffuse:{value:new br(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new wi},alphaMap:{value:null},alphaMapTransform:{value:new wi},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new wi}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new wi}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new wi}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new wi},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new wi},normalScale:{value:new _n(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new wi},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new wi}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new wi}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new wi}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new br(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new br(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new wi},alphaTest:{value:0},uvTransform:{value:new wi}},sprite:{diffuse:{value:new br(16777215)},opacity:{value:1},center:{value:new _n(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new wi},alphaMap:{value:null},alphaMapTransform:{value:new wi},alphaTest:{value:0}}},jc={basic:{uniforms:ca([ur.common,ur.specularmap,ur.envmap,ur.aomap,ur.lightmap,ur.fog]),vertexShader:ji.meshbasic_vert,fragmentShader:ji.meshbasic_frag},lambert:{uniforms:ca([ur.common,ur.specularmap,ur.envmap,ur.aomap,ur.lightmap,ur.emissivemap,ur.bumpmap,ur.normalmap,ur.displacementmap,ur.fog,ur.lights,{emissive:{value:new br(0)}}]),vertexShader:ji.meshlambert_vert,fragmentShader:ji.meshlambert_frag},phong:{uniforms:ca([ur.common,ur.specularmap,ur.envmap,ur.aomap,ur.lightmap,ur.emissivemap,ur.bumpmap,ur.normalmap,ur.displacementmap,ur.fog,ur.lights,{emissive:{value:new br(0)},specular:{value:new br(1118481)},shininess:{value:30}}]),vertexShader:ji.meshphong_vert,fragmentShader:ji.meshphong_frag},standard:{uniforms:ca([ur.common,ur.envmap,ur.aomap,ur.lightmap,ur.emissivemap,ur.bumpmap,ur.normalmap,ur.displacementmap,ur.roughnessmap,ur.metalnessmap,ur.fog,ur.lights,{emissive:{value:new br(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:ji.meshphysical_vert,fragmentShader:ji.meshphysical_frag},toon:{uniforms:ca([ur.common,ur.aomap,ur.lightmap,ur.emissivemap,ur.bumpmap,ur.normalmap,ur.displacementmap,ur.gradientmap,ur.fog,ur.lights,{emissive:{value:new br(0)}}]),vertexShader:ji.meshtoon_vert,fragmentShader:ji.meshtoon_frag},matcap:{uniforms:ca([ur.common,ur.bumpmap,ur.normalmap,ur.displacementmap,ur.fog,{matcap:{value:null}}]),vertexShader:ji.meshmatcap_vert,fragmentShader:ji.meshmatcap_frag},points:{uniforms:ca([ur.points,ur.fog]),vertexShader:ji.points_vert,fragmentShader:ji.points_frag},dashed:{uniforms:ca([ur.common,ur.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ji.linedashed_vert,fragmentShader:ji.linedashed_frag},depth:{uniforms:ca([ur.common,ur.displacementmap]),vertexShader:ji.depth_vert,fragmentShader:ji.depth_frag},normal:{uniforms:ca([ur.common,ur.bumpmap,ur.normalmap,ur.displacementmap,{opacity:{value:1}}]),vertexShader:ji.meshnormal_vert,fragmentShader:ji.meshnormal_frag},sprite:{uniforms:ca([ur.sprite,ur.fog]),vertexShader:ji.sprite_vert,fragmentShader:ji.sprite_frag},background:{uniforms:{uvTransform:{value:new wi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:ji.background_vert,fragmentShader:ji.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:ji.backgroundCube_vert,fragmentShader:ji.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ji.cube_vert,fragmentShader:ji.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ji.equirect_vert,fragmentShader:ji.equirect_frag},distanceRGBA:{uniforms:ca([ur.common,ur.displacementmap,{referencePosition:{value:new je},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ji.distanceRGBA_vert,fragmentShader:ji.distanceRGBA_frag},shadow:{uniforms:ca([ur.lights,ur.fog,{color:{value:new br(0)},opacity:{value:1}}]),vertexShader:ji.shadow_vert,fragmentShader:ji.shadow_frag}};jc.physical={uniforms:ca([jc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new wi},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new wi},clearcoatNormalScale:{value:new _n(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new wi},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new wi},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new wi},sheen:{value:0},sheenColor:{value:new br(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new wi},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new wi},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new wi},transmissionSamplerSize:{value:new _n},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new wi},attenuationDistance:{value:0},attenuationColor:{value:new br(0)},specularColor:{value:new br(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new wi},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new wi},anisotropyVector:{value:new _n},anisotropyMap:{value:null},anisotropyMapTransform:{value:new wi}}]),vertexShader:ji.meshphysical_vert,fragmentShader:ji.meshphysical_frag};const Tu={r:0,b:0,g:0};function Xm(S,e,o,f,y,b,B){const I=new br(0);let D=b===!0?0:1,N,K,Z=null,q=0,ee=null;function ie(se,ne){let be=!1,fe=ne.isScene===!0?ne.background:null;switch(fe&&fe.isTexture&&(fe=(ne.backgroundBlurriness>0?o:e).get(fe)),fe===null?he(I,D):fe&&fe.isColor&&(he(fe,1),be=!0),S.xr.getEnvironmentBlendMode()){case"opaque":be=!0;break;case"additive":f.buffers.color.setClear(0,0,0,1,B),be=!0;break;case"alpha-blend":f.buffers.color.setClear(0,0,0,0,B),be=!0;break}(S.autoClear||be)&&S.clear(S.autoClearColor,S.autoClearDepth,S.autoClearStencil),fe&&(fe.isCubeTexture||fe.mapping===bs)?(K===void 0&&(K=new Oo(new Fl(1,1,1),new ai({name:"BackgroundCubeMaterial",uniforms:Lp(jc.backgroundCube.uniforms),vertexShader:jc.backgroundCube.vertexShader,fragmentShader:jc.backgroundCube.fragmentShader,side:Oe,depthTest:!1,depthWrite:!1,fog:!1})),K.geometry.deleteAttribute("normal"),K.geometry.deleteAttribute("uv"),K.onBeforeRender=function(He,qe,et){this.matrixWorld.copyPosition(et.matrixWorld)},Object.defineProperty(K.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),y.update(K)),K.material.uniforms.envMap.value=fe,K.material.uniforms.flipEnvMap.value=fe.isCubeTexture&&fe.isRenderTargetTexture===!1?-1:1,K.material.uniforms.backgroundBlurriness.value=ne.backgroundBlurriness,K.material.uniforms.backgroundIntensity.value=ne.backgroundIntensity,K.material.toneMapped=fe.colorSpace!==Qn,(Z!==fe||q!==fe.version||ee!==S.toneMapping)&&(K.material.needsUpdate=!0,Z=fe,q=fe.version,ee=S.toneMapping),K.layers.enableAll(),se.unshift(K,K.geometry,K.material,0,0,null)):fe&&fe.isTexture&&(N===void 0&&(N=new Oo(new Pp(2,2),new ai({name:"BackgroundMaterial",uniforms:Lp(jc.background.uniforms),vertexShader:jc.background.vertexShader,fragmentShader:jc.background.fragmentShader,side:Pe,depthTest:!1,depthWrite:!1,fog:!1})),N.geometry.deleteAttribute("normal"),Object.defineProperty(N.material,"map",{get:function(){return this.uniforms.t2D.value}}),y.update(N)),N.material.uniforms.t2D.value=fe,N.material.uniforms.backgroundIntensity.value=ne.backgroundIntensity,N.material.toneMapped=fe.colorSpace!==Qn,fe.matrixAutoUpdate===!0&&fe.updateMatrix(),N.material.uniforms.uvTransform.value.copy(fe.matrix),(Z!==fe||q!==fe.version||ee!==S.toneMapping)&&(N.material.needsUpdate=!0,Z=fe,q=fe.version,ee=S.toneMapping),N.layers.enableAll(),se.unshift(N,N.geometry,N.material,0,0,null))}function he(se,ne){se.getRGB(Tu,pd(S)),f.buffers.color.setClear(Tu.r,Tu.g,Tu.b,ne,B)}return{getClearColor:function(){return I},setClearColor:function(se,ne=1){I.set(se),D=ne,he(I,D)},getClearAlpha:function(){return D},setClearAlpha:function(se){D=se,he(I,D)},render:ie}}function Rb(S,e,o,f){const y=S.getParameter(S.MAX_VERTEX_ATTRIBS),b=f.isWebGL2?null:e.get("OES_vertex_array_object"),B=f.isWebGL2||b!==null,I={},D=se(null);let N=D,K=!1;function Z(Ht,Jt,Sn,cn,En){let In=!1;if(B){const kn=he(cn,Sn,Jt);N!==kn&&(N=kn,ee(N.object)),In=ne(Ht,cn,Sn,En),In&&be(Ht,cn,Sn,En)}else{const kn=Jt.wireframe===!0;(N.geometry!==cn.id||N.program!==Sn.id||N.wireframe!==kn)&&(N.geometry=cn.id,N.program=Sn.id,N.wireframe=kn,In=!0)}En!==null&&o.update(En,S.ELEMENT_ARRAY_BUFFER),(In||K)&&(K=!1,et(Ht,Jt,Sn,cn),En!==null&&S.bindBuffer(S.ELEMENT_ARRAY_BUFFER,o.get(En).buffer))}function q(){return f.isWebGL2?S.createVertexArray():b.createVertexArrayOES()}function ee(Ht){return f.isWebGL2?S.bindVertexArray(Ht):b.bindVertexArrayOES(Ht)}function ie(Ht){return f.isWebGL2?S.deleteVertexArray(Ht):b.deleteVertexArrayOES(Ht)}function he(Ht,Jt,Sn){const cn=Sn.wireframe===!0;let En=I[Ht.id];En===void 0&&(En={},I[Ht.id]=En);let In=En[Jt.id];In===void 0&&(In={},En[Jt.id]=In);let kn=In[cn];return kn===void 0&&(kn=se(q()),In[cn]=kn),kn}function se(Ht){const Jt=[],Sn=[],cn=[];for(let En=0;En<y;En++)Jt[En]=0,Sn[En]=0,cn[En]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:Jt,enabledAttributes:Sn,attributeDivisors:cn,object:Ht,attributes:{},index:null}}function ne(Ht,Jt,Sn,cn){const En=N.attributes,In=Jt.attributes;let kn=0;const wr=Sn.getAttributes();for(const Zt in wr)if(wr[Zt].location>=0){const hn=En[Zt];let ir=In[Zt];if(ir===void 0&&(Zt==="instanceMatrix"&&Ht.instanceMatrix&&(ir=Ht.instanceMatrix),Zt==="instanceColor"&&Ht.instanceColor&&(ir=Ht.instanceColor)),hn===void 0||hn.attribute!==ir||ir&&hn.data!==ir.data)return!0;kn++}return N.attributesNum!==kn||N.index!==cn}function be(Ht,Jt,Sn,cn){const En={},In=Jt.attributes;let kn=0;const wr=Sn.getAttributes();for(const Zt in wr)if(wr[Zt].location>=0){let hn=In[Zt];hn===void 0&&(Zt==="instanceMatrix"&&Ht.instanceMatrix&&(hn=Ht.instanceMatrix),Zt==="instanceColor"&&Ht.instanceColor&&(hn=Ht.instanceColor));const ir={};ir.attribute=hn,hn&&hn.data&&(ir.data=hn.data),En[Zt]=ir,kn++}N.attributes=En,N.attributesNum=kn,N.index=cn}function fe(){const Ht=N.newAttributes;for(let Jt=0,Sn=Ht.length;Jt<Sn;Jt++)Ht[Jt]=0}function xe(Ht){Le(Ht,0)}function Le(Ht,Jt){const Sn=N.newAttributes,cn=N.enabledAttributes,En=N.attributeDivisors;Sn[Ht]=1,cn[Ht]===0&&(S.enableVertexAttribArray(Ht),cn[Ht]=1),En[Ht]!==Jt&&((f.isWebGL2?S:e.get("ANGLE_instanced_arrays"))[f.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](Ht,Jt),En[Ht]=Jt)}function He(){const Ht=N.newAttributes,Jt=N.enabledAttributes;for(let Sn=0,cn=Jt.length;Sn<cn;Sn++)Jt[Sn]!==Ht[Sn]&&(S.disableVertexAttribArray(Sn),Jt[Sn]=0)}function qe(Ht,Jt,Sn,cn,En,In,kn){kn===!0?S.vertexAttribIPointer(Ht,Jt,Sn,En,In):S.vertexAttribPointer(Ht,Jt,Sn,cn,En,In)}function et(Ht,Jt,Sn,cn){if(f.isWebGL2===!1&&(Ht.isInstancedMesh||cn.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;fe();const En=cn.attributes,In=Sn.getAttributes(),kn=Jt.defaultAttributeValues;for(const wr in In){const Zt=In[wr];if(Zt.location>=0){let zn=En[wr];if(zn===void 0&&(wr==="instanceMatrix"&&Ht.instanceMatrix&&(zn=Ht.instanceMatrix),wr==="instanceColor"&&Ht.instanceColor&&(zn=Ht.instanceColor)),zn!==void 0){const hn=zn.normalized,ir=zn.itemSize,Cr=o.get(zn);if(Cr===void 0)continue;const kr=Cr.buffer,hi=Cr.type,ci=Cr.bytesPerElement,Lo=f.isWebGL2===!0&&(hi===S.INT||hi===S.UNSIGNED_INT||zn.gpuType===na);if(zn.isInterleavedBufferAttribute){const bi=zn.data,tt=bi.stride,qn=zn.offset;if(bi.isInstancedInterleavedBuffer){for(let An=0;An<Zt.locationSize;An++)Le(Zt.location+An,bi.meshPerAttribute);Ht.isInstancedMesh!==!0&&cn._maxInstanceCount===void 0&&(cn._maxInstanceCount=bi.meshPerAttribute*bi.count)}else for(let An=0;An<Zt.locationSize;An++)xe(Zt.location+An);S.bindBuffer(S.ARRAY_BUFFER,kr);for(let An=0;An<Zt.locationSize;An++)qe(Zt.location+An,ir/Zt.locationSize,hi,hn,tt*ci,(qn+ir/Zt.locationSize*An)*ci,Lo)}else{if(zn.isInstancedBufferAttribute){for(let bi=0;bi<Zt.locationSize;bi++)Le(Zt.location+bi,zn.meshPerAttribute);Ht.isInstancedMesh!==!0&&cn._maxInstanceCount===void 0&&(cn._maxInstanceCount=zn.meshPerAttribute*zn.count)}else for(let bi=0;bi<Zt.locationSize;bi++)xe(Zt.location+bi);S.bindBuffer(S.ARRAY_BUFFER,kr);for(let bi=0;bi<Zt.locationSize;bi++)qe(Zt.location+bi,ir/Zt.locationSize,hi,hn,ir*ci,ir/Zt.locationSize*bi*ci,Lo)}}else if(kn!==void 0){const hn=kn[wr];if(hn!==void 0)switch(hn.length){case 2:S.vertexAttrib2fv(Zt.location,hn);break;case 3:S.vertexAttrib3fv(Zt.location,hn);break;case 4:S.vertexAttrib4fv(Zt.location,hn);break;default:S.vertexAttrib1fv(Zt.location,hn)}}}}He()}function we(){Rn();for(const Ht in I){const Jt=I[Ht];for(const Sn in Jt){const cn=Jt[Sn];for(const En in cn)ie(cn[En].object),delete cn[En];delete Jt[Sn]}delete I[Ht]}}function We(Ht){if(I[Ht.id]===void 0)return;const Jt=I[Ht.id];for(const Sn in Jt){const cn=Jt[Sn];for(const En in cn)ie(cn[En].object),delete cn[En];delete Jt[Sn]}delete I[Ht.id]}function Wt(Ht){for(const Jt in I){const Sn=I[Jt];if(Sn[Ht.id]===void 0)continue;const cn=Sn[Ht.id];for(const En in cn)ie(cn[En].object),delete cn[En];delete Sn[Ht.id]}}function Rn(){Ut(),K=!0,N!==D&&(N=D,ee(N.object))}function Ut(){D.geometry=null,D.program=null,D.wireframe=!1}return{setup:Z,reset:Rn,resetDefaultState:Ut,dispose:we,releaseStatesOfGeometry:We,releaseStatesOfProgram:Wt,initAttributes:fe,enableAttribute:xe,disableUnusedAttributes:He}}function ZA(S,e,o,f){const y=f.isWebGL2;let b;function B(N){b=N}function I(N,K){S.drawArrays(b,N,K),o.update(K,b,1)}function D(N,K,Z){if(Z===0)return;let q,ee;if(y)q=S,ee="drawArraysInstanced";else if(q=e.get("ANGLE_instanced_arrays"),ee="drawArraysInstancedANGLE",q===null){C.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}q[ee](b,N,K,Z),o.update(K,b,Z)}this.setMode=B,this.render=I,this.renderInstances=D}function h_(S,e,o){let f;function y(){if(f!==void 0)return f;if(e.has("EXT_texture_filter_anisotropic")===!0){const qe=e.get("EXT_texture_filter_anisotropic");f=S.getParameter(qe.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else f=0;return f}function b(qe){if(qe==="highp"){if(S.getShaderPrecisionFormat(S.VERTEX_SHADER,S.HIGH_FLOAT).precision>0&&S.getShaderPrecisionFormat(S.FRAGMENT_SHADER,S.HIGH_FLOAT).precision>0)return"highp";qe="mediump"}return qe==="mediump"&&S.getShaderPrecisionFormat(S.VERTEX_SHADER,S.MEDIUM_FLOAT).precision>0&&S.getShaderPrecisionFormat(S.FRAGMENT_SHADER,S.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const B=typeof WebGL2RenderingContext!="undefined"&&S.constructor.name==="WebGL2RenderingContext";let I=o.precision!==void 0?o.precision:"highp";const D=b(I);D!==I&&(C.warn("THREE.WebGLRenderer:",I,"not supported, using",D,"instead."),I=D);const N=B||e.has("WEBGL_draw_buffers"),K=o.logarithmicDepthBuffer===!0,Z=S.getParameter(S.MAX_TEXTURE_IMAGE_UNITS),q=S.getParameter(S.MAX_VERTEX_TEXTURE_IMAGE_UNITS),ee=S.getParameter(S.MAX_TEXTURE_SIZE),ie=S.getParameter(S.MAX_CUBE_MAP_TEXTURE_SIZE),he=S.getParameter(S.MAX_VERTEX_ATTRIBS),se=S.getParameter(S.MAX_VERTEX_UNIFORM_VECTORS),ne=S.getParameter(S.MAX_VARYING_VECTORS),be=S.getParameter(S.MAX_FRAGMENT_UNIFORM_VECTORS),fe=q>0,xe=B||e.has("OES_texture_float"),Le=fe&&xe,He=B?S.getParameter(S.MAX_SAMPLES):0;return{isWebGL2:B,drawBuffers:N,getMaxAnisotropy:y,getMaxPrecision:b,precision:I,logarithmicDepthBuffer:K,maxTextures:Z,maxVertexTextures:q,maxTextureSize:ee,maxCubemapSize:ie,maxAttributes:he,maxVertexUniforms:se,maxVaryings:ne,maxFragmentUniforms:be,vertexTextures:fe,floatFragmentTextures:xe,floatVertexTextures:Le,maxSamples:He}}function f_(S){const e=this;let o=null,f=0,y=!1,b=!1;const B=new $l,I=new wi,D={value:null,needsUpdate:!1};this.uniform=D,this.numPlanes=0,this.numIntersection=0,this.init=function(Z,q){const ee=Z.length!==0||q||f!==0||y;return y=q,f=Z.length,ee},this.beginShadows=function(){b=!0,K(null)},this.endShadows=function(){b=!1},this.setGlobalState=function(Z,q){o=K(Z,q,0)},this.setState=function(Z,q,ee){const ie=Z.clippingPlanes,he=Z.clipIntersection,se=Z.clipShadows,ne=S.get(Z);if(!y||ie===null||ie.length===0||b&&!se)b?K(null):N();else{const be=b?0:f,fe=be*4;let xe=ne.clippingState||null;D.value=xe,xe=K(ie,q,fe,ee);for(let Le=0;Le!==fe;++Le)xe[Le]=o[Le];ne.clippingState=xe,this.numIntersection=he?this.numPlanes:0,this.numPlanes+=be}};function N(){D.value!==o&&(D.value=o,D.needsUpdate=f>0),e.numPlanes=f,e.numIntersection=0}function K(Z,q,ee,ie){const he=Z!==null?Z.length:0;let se=null;if(he!==0){if(se=D.value,ie!==!0||se===null){const ne=ee+he*4,be=q.matrixWorldInverse;I.getNormalMatrix(be),(se===null||se.length<ne)&&(se=new Float32Array(ne));for(let fe=0,xe=ee;fe!==he;++fe,xe+=4)B.copy(Z[fe]).applyMatrix4(be,I),B.normal.toArray(se,xe),se[xe+3]=B.constant}D.value=se,D.needsUpdate=!0}return e.numPlanes=he,e.numIntersection=0,se}}function g_(S){let e=new WeakMap;function o(B,I){return I===gi?B.mapping=Io:I===bo&&(B.mapping=$i),B}function f(B){if(B&&B.isTexture&&B.isRenderTargetTexture===!1){const I=B.mapping;if(I===gi||I===bo)if(e.has(B)){const D=e.get(B).texture;return o(D,B.mapping)}else{const D=B.image;if(D&&D.height>0){const N=new ud(D.height/2);return N.fromEquirectangularTexture(S,B),e.set(B,N),B.addEventListener("dispose",y),o(N.texture,B.mapping)}else return null}}return B}function y(B){const I=B.target;I.removeEventListener("dispose",y);const D=e.get(I);D!==void 0&&(e.delete(I),D.dispose())}function b(){e=new WeakMap}return{get:f,dispose:b}}class yf extends Qi{constructor(e=-1,o=1,f=1,y=-1,b=.1,B=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=o,this.top=f,this.bottom=y,this.near=b,this.far=B,this.updateProjectionMatrix()}copy(e,o){return super.copy(e,o),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,o,f,y,b,B){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=o,this.view.offsetX=f,this.view.offsetY=y,this.view.width=b,this.view.height=B,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),o=(this.top-this.bottom)/(2*this.zoom),f=(this.right+this.left)/2,y=(this.top+this.bottom)/2;let b=f-e,B=f+e,I=y+o,D=y-o;if(this.view!==null&&this.view.enabled){const N=(this.right-this.left)/this.view.fullWidth/this.zoom,K=(this.top-this.bottom)/this.view.fullHeight/this.zoom;b+=N*this.view.offsetX,B=b+N*this.view.width,I-=K*this.view.offsetY,D=I-K*this.view.height}this.projectionMatrix.makeOrthographic(b,B,I,D,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const o=super.toJSON(e);return o.object.zoom=this.zoom,o.object.left=this.left,o.object.right=this.right,o.object.top=this.top,o.object.bottom=this.bottom,o.object.near=this.near,o.object.far=this.far,this.view!==null&&(o.object.view=Object.assign({},this.view)),o}}const gd=4,hh=[.125,.215,.35,.446,.526,.582],Xa=20,ap=new yf,lp=new br;let cp=null;const Dl=(1+Math.sqrt(5))/2,Wp=1/Dl,vf=[new je(1,1,1),new je(-1,1,1),new je(1,1,-1),new je(-1,1,-1),new je(0,Dl,Wp),new je(0,Dl,-Wp),new je(Wp,0,Dl),new je(-Wp,0,Dl),new je(Dl,Wp,0),new je(-Dl,Wp,0)];class fh{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,o=0,f=.1,y=100){cp=this._renderer.getRenderTarget(),this._setSize(256);const b=this._allocateTargets();return b.depthBuffer=!0,this._sceneToCubeUV(e,f,y,b),o>0&&this._blur(b,0,0,o),this._applyPMREM(b),this._cleanup(b),b}fromEquirectangular(e,o=null){return this._fromTexture(e,o)}fromCubemap(e,o=null){return this._fromTexture(e,o)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=$A(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=qA(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(cp),e.scissorTest=!1,md(e,0,0,e.width,e.height)}_fromTexture(e,o){e.mapping===Io||e.mapping===$i?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),cp=this._renderer.getRenderTarget();const f=o||this._allocateTargets();return this._textureToCubeUV(e,f),this._applyPMREM(f),this._cleanup(f),f}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),o=4*this._cubeSize,f={magFilter:ho,minFilter:ho,generateMipmaps:!1,type:za,format:Je,colorSpace:al,depthBuffer:!1},y=_f(e,o,f);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==o){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=_f(e,o,f);const{_lodMax:b}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Ym(b)),this._blurMaterial=Pg(b,e,o)}return y}_compileMaterial(e){const o=new Oo(this._lodPlanes[0],e);this._renderer.compile(o,ap)}_sceneToCubeUV(e,o,f,y){const I=new Ji(90,1,o,f),D=[1,-1,1,1,1,1],N=[1,1,1,-1,-1,-1],K=this._renderer,Z=K.autoClear,q=K.toneMapping;K.getClearColor(lp),K.toneMapping=Ci,K.autoClear=!1;const ee=new Ec({name:"PMREM.Background",side:Oe,depthWrite:!1,depthTest:!1}),ie=new Oo(new Fl,ee);let he=!1;const se=e.background;se?se.isColor&&(ee.color.copy(se),e.background=null,he=!0):(ee.color.copy(lp),he=!0);for(let ne=0;ne<6;ne++){const be=ne%3;be===0?(I.up.set(0,D[ne],0),I.lookAt(N[ne],0,0)):be===1?(I.up.set(0,0,D[ne]),I.lookAt(0,N[ne],0)):(I.up.set(0,D[ne],0),I.lookAt(0,0,N[ne]));const fe=this._cubeSize;md(y,be*fe,ne>2?fe:0,fe,fe),K.setRenderTarget(y),he&&K.render(ie,I),K.render(e,I)}ie.geometry.dispose(),ie.material.dispose(),K.toneMapping=q,K.autoClear=Z,e.background=se}_textureToCubeUV(e,o){const f=this._renderer,y=e.mapping===Io||e.mapping===$i;y?(this._cubemapMaterial===null&&(this._cubemapMaterial=$A()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=qA());const b=y?this._cubemapMaterial:this._equirectMaterial,B=new Oo(this._lodPlanes[0],b),I=b.uniforms;I.envMap.value=e;const D=this._cubeSize;md(o,0,0,3*D,2*D),f.setRenderTarget(o),f.render(B,ap)}_applyPMREM(e){const o=this._renderer,f=o.autoClear;o.autoClear=!1;for(let y=1;y<this._lodPlanes.length;y++){const b=Math.sqrt(this._sigmas[y]*this._sigmas[y]-this._sigmas[y-1]*this._sigmas[y-1]),B=vf[(y-1)%vf.length];this._blur(e,y-1,y,b,B)}o.autoClear=f}_blur(e,o,f,y,b){const B=this._pingPongRenderTarget;this._halfBlur(e,B,o,f,y,"latitudinal",b),this._halfBlur(B,e,f,f,y,"longitudinal",b)}_halfBlur(e,o,f,y,b,B,I){const D=this._renderer,N=this._blurMaterial;B!=="latitudinal"&&B!=="longitudinal"&&C.error("blur direction must be either latitudinal or longitudinal!");const K=3,Z=new Oo(this._lodPlanes[y],N),q=N.uniforms,ee=this._sizeLods[f]-1,ie=isFinite(b)?Math.PI/(2*ee):2*Math.PI/(2*Xa-1),he=b/ie,se=isFinite(b)?1+Math.floor(K*he):Xa;se>Xa&&C.warn(`sigmaRadians, ${b}, is too large and will clip, as it requested ${se} samples when the maximum is set to ${Xa}`);const ne=[];let be=0;for(let qe=0;qe<Xa;++qe){const et=qe/he,we=Math.exp(-et*et/2);ne.push(we),qe===0?be+=we:qe<se&&(be+=2*we)}for(let qe=0;qe<ne.length;qe++)ne[qe]=ne[qe]/be;q.envMap.value=e.texture,q.samples.value=se,q.weights.value=ne,q.latitudinal.value=B==="latitudinal",I&&(q.poleAxis.value=I);const{_lodMax:fe}=this;q.dTheta.value=ie,q.mipInt.value=fe-f;const xe=this._sizeLods[y],Le=3*xe*(y>fe-gd?y-fe+gd:0),He=4*(this._cubeSize-xe);md(o,Le,He,3*xe,2*xe),D.setRenderTarget(o),D.render(Z,ap)}}function Ym(S){const e=[],o=[],f=[];let y=S;const b=S-gd+1+hh.length;for(let B=0;B<b;B++){const I=Math.pow(2,y);o.push(I);let D=1/I;B>S-gd?D=hh[B-S+gd-1]:B===0&&(D=0),f.push(D);const N=1/(I-2),K=-N,Z=1+N,q=[K,K,Z,K,Z,Z,K,K,Z,Z,K,Z],ee=6,ie=6,he=3,se=2,ne=1,be=new Float32Array(he*ie*ee),fe=new Float32Array(se*ie*ee),xe=new Float32Array(ne*ie*ee);for(let He=0;He<ee;He++){const qe=He%3*2/3-1,et=He>2?0:-1,we=[qe,et,0,qe+2/3,et,0,qe+2/3,et+1,0,qe,et,0,qe+2/3,et+1,0,qe,et+1,0];be.set(we,he*ie*He),fe.set(q,se*ie*He);const We=[He,He,He,He,He,He];xe.set(We,ne*ie*He)}const Le=new mi;Le.setAttribute("position",new no(be,he)),Le.setAttribute("uv",new no(fe,se)),Le.setAttribute("faceIndex",new no(xe,ne)),e.push(Le),y>gd&&y--}return{lodPlanes:e,sizeLods:o,sigmas:f}}function _f(S,e,o){const f=new pl(S,e,o);return f.texture.mapping=bs,f.texture.name="PMREM.cubeUv",f.scissorTest=!0,f}function md(S,e,o,f,y){S.viewport.set(e,o,f,y),S.scissor.set(e,o,f,y)}function Pg(S,e,o){const f=new Float32Array(Xa),y=new je(0,1,0);return new ai({name:"SphericalGaussianBlur",defines:{n:Xa,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/o,CUBEUV_MAX_MIP:`${S}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:f},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:y}},vertexShader:Jm(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:gt,depthTest:!1,depthWrite:!1})}function qA(){return new ai({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Jm(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:gt,depthTest:!1,depthWrite:!1})}function $A(){return new ai({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Jm(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:gt,depthTest:!1,depthWrite:!1})}function Jm(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function m_(S){let e=new WeakMap,o=null;function f(I){if(I&&I.isTexture){const D=I.mapping,N=D===gi||D===bo,K=D===Io||D===$i;if(N||K)if(I.isRenderTargetTexture&&I.needsPMREMUpdate===!0){I.needsPMREMUpdate=!1;let Z=e.get(I);return o===null&&(o=new fh(S)),Z=N?o.fromEquirectangular(I,Z):o.fromCubemap(I,Z),e.set(I,Z),Z.texture}else{if(e.has(I))return e.get(I).texture;{const Z=I.image;if(N&&Z&&Z.height>0||K&&Z&&y(Z)){o===null&&(o=new fh(S));const q=N?o.fromEquirectangular(I):o.fromCubemap(I);return e.set(I,q),I.addEventListener("dispose",b),q.texture}else return null}}}return I}function y(I){let D=0;const N=6;for(let K=0;K<N;K++)I[K]!==void 0&&D++;return D===N}function b(I){const D=I.target;D.removeEventListener("dispose",b);const N=e.get(D);N!==void 0&&(e.delete(D),N.dispose())}function B(){e=new WeakMap,o!==null&&(o.dispose(),o=null)}return{get:f,dispose:B}}function A_(S){const e={};function o(f){if(e[f]!==void 0)return e[f];let y;switch(f){case"WEBGL_depth_texture":y=S.getExtension("WEBGL_depth_texture")||S.getExtension("MOZ_WEBGL_depth_texture")||S.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":y=S.getExtension("EXT_texture_filter_anisotropic")||S.getExtension("MOZ_EXT_texture_filter_anisotropic")||S.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":y=S.getExtension("WEBGL_compressed_texture_s3tc")||S.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||S.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":y=S.getExtension("WEBGL_compressed_texture_pvrtc")||S.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:y=S.getExtension(f)}return e[f]=y,y}return{has:function(f){return o(f)!==null},init:function(f){f.isWebGL2?o("EXT_color_buffer_float"):(o("WEBGL_depth_texture"),o("OES_texture_float"),o("OES_texture_half_float"),o("OES_texture_half_float_linear"),o("OES_standard_derivatives"),o("OES_element_index_uint"),o("OES_vertex_array_object"),o("ANGLE_instanced_arrays")),o("OES_texture_float_linear"),o("EXT_color_buffer_half_float"),o("WEBGL_multisampled_render_to_texture")},get:function(f){const y=o(f);return y===null&&C.warn("THREE.WebGLRenderer: "+f+" extension not supported."),y}}}function ey(S,e,o,f){const y={},b=new WeakMap;function B(Z){const q=Z.target;q.index!==null&&e.remove(q.index);for(const ie in q.attributes)e.remove(q.attributes[ie]);for(const ie in q.morphAttributes){const he=q.morphAttributes[ie];for(let se=0,ne=he.length;se<ne;se++)e.remove(he[se])}q.removeEventListener("dispose",B),delete y[q.id];const ee=b.get(q);ee&&(e.remove(ee),b.delete(q)),f.releaseStatesOfGeometry(q),q.isInstancedBufferGeometry===!0&&delete q._maxInstanceCount,o.memory.geometries--}function I(Z,q){return y[q.id]===!0||(q.addEventListener("dispose",B),y[q.id]=!0,o.memory.geometries++),q}function D(Z){const q=Z.attributes;for(const ie in q)e.update(q[ie],S.ARRAY_BUFFER);const ee=Z.morphAttributes;for(const ie in ee){const he=ee[ie];for(let se=0,ne=he.length;se<ne;se++)e.update(he[se],S.ARRAY_BUFFER)}}function N(Z){const q=[],ee=Z.index,ie=Z.attributes.position;let he=0;if(ee!==null){const be=ee.array;he=ee.version;for(let fe=0,xe=be.length;fe<xe;fe+=3){const Le=be[fe+0],He=be[fe+1],qe=be[fe+2];q.push(Le,He,He,qe,qe,Le)}}else{const be=ie.array;he=ie.version;for(let fe=0,xe=be.length/3-1;fe<xe;fe+=3){const Le=fe+0,He=fe+1,qe=fe+2;q.push(Le,He,He,qe,qe,Le)}}const se=new(Ku(q)?lr:Mc)(q,1);se.version=he;const ne=b.get(Z);ne&&e.remove(ne),b.set(Z,se)}function K(Z){const q=b.get(Z);if(q){const ee=Z.index;ee!==null&&q.version<ee.version&&N(Z)}else N(Z);return b.get(Z)}return{get:I,update:D,getWireframeAttribute:K}}function y_(S,e,o,f){const y=f.isWebGL2;let b;function B(q){b=q}let I,D;function N(q){I=q.type,D=q.bytesPerElement}function K(q,ee){S.drawElements(b,ee,I,q*D),o.update(ee,b,1)}function Z(q,ee,ie){if(ie===0)return;let he,se;if(y)he=S,se="drawElementsInstanced";else if(he=e.get("ANGLE_instanced_arrays"),se="drawElementsInstancedANGLE",he===null){C.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}he[se](b,ee,I,q*D,ie),o.update(ee,b,ie)}this.setMode=B,this.setIndex=N,this.render=K,this.renderInstances=Z}function ty(S){const e={geometries:0,textures:0},o={frame:0,calls:0,triangles:0,points:0,lines:0};function f(b,B,I){switch(o.calls++,B){case S.TRIANGLES:o.triangles+=I*(b/3);break;case S.LINES:o.lines+=I*(b/2);break;case S.LINE_STRIP:o.lines+=I*(b-1);break;case S.LINE_LOOP:o.lines+=I*b;break;case S.POINTS:o.points+=I*b;break;default:C.error("THREE.WebGLInfo: Unknown draw mode:",B);break}}function y(){o.calls=0,o.triangles=0,o.points=0,o.lines=0}return{memory:e,render:o,programs:null,autoReset:!0,reset:y,update:f}}function ny(S,e){return S[0]-e[0]}function Zm(S,e){return Math.abs(e[1])-Math.abs(S[1])}function qm(S,e,o){const f={},y=new Float32Array(8),b=new WeakMap,B=new lo,I=[];for(let N=0;N<8;N++)I[N]=[N,0];function D(N,K,Z){const q=N.morphTargetInfluences;if(e.isWebGL2===!0){const ee=K.morphAttributes.position||K.morphAttributes.normal||K.morphAttributes.color,ie=ee!==void 0?ee.length:0;let he=b.get(K);if(he===void 0||he.count!==ie){let Ht=function(){Rn.dispose(),b.delete(K),K.removeEventListener("dispose",Ht)};he!==void 0&&he.texture.dispose();const be=K.morphAttributes.position!==void 0,fe=K.morphAttributes.normal!==void 0,xe=K.morphAttributes.color!==void 0,Le=K.morphAttributes.position||[],He=K.morphAttributes.normal||[],qe=K.morphAttributes.color||[];let et=0;be===!0&&(et=1),fe===!0&&(et=2),xe===!0&&(et=3);let we=K.attributes.position.count*et,We=1;we>e.maxTextureSize&&(We=Math.ceil(we/e.maxTextureSize),we=e.maxTextureSize);const Wt=new Float32Array(we*We*4*ie),Rn=new ia(Wt,we,We,ie);Rn.type=gs,Rn.needsUpdate=!0;const Ut=et*4;for(let Jt=0;Jt<ie;Jt++){const Sn=Le[Jt],cn=He[Jt],En=qe[Jt],In=we*We*4*Jt;for(let kn=0;kn<Sn.count;kn++){const wr=kn*Ut;be===!0&&(B.fromBufferAttribute(Sn,kn),Wt[In+wr+0]=B.x,Wt[In+wr+1]=B.y,Wt[In+wr+2]=B.z,Wt[In+wr+3]=0),fe===!0&&(B.fromBufferAttribute(cn,kn),Wt[In+wr+4]=B.x,Wt[In+wr+5]=B.y,Wt[In+wr+6]=B.z,Wt[In+wr+7]=0),xe===!0&&(B.fromBufferAttribute(En,kn),Wt[In+wr+8]=B.x,Wt[In+wr+9]=B.y,Wt[In+wr+10]=B.z,Wt[In+wr+11]=En.itemSize===4?B.w:1)}}he={count:ie,texture:Rn,size:new _n(we,We)},b.set(K,he),K.addEventListener("dispose",Ht)}let se=0;for(let be=0;be<q.length;be++)se+=q[be];const ne=K.morphTargetsRelative?1:1-se;Z.getUniforms().setValue(S,"morphTargetBaseInfluence",ne),Z.getUniforms().setValue(S,"morphTargetInfluences",q),Z.getUniforms().setValue(S,"morphTargetsTexture",he.texture,o),Z.getUniforms().setValue(S,"morphTargetsTextureSize",he.size)}else{const ee=q===void 0?0:q.length;let ie=f[K.id];if(ie===void 0||ie.length!==ee){ie=[];for(let fe=0;fe<ee;fe++)ie[fe]=[fe,0];f[K.id]=ie}for(let fe=0;fe<ee;fe++){const xe=ie[fe];xe[0]=fe,xe[1]=q[fe]}ie.sort(Zm);for(let fe=0;fe<8;fe++)fe<ee&&ie[fe][1]?(I[fe][0]=ie[fe][0],I[fe][1]=ie[fe][1]):(I[fe][0]=Number.MAX_SAFE_INTEGER,I[fe][1]=0);I.sort(ny);const he=K.morphAttributes.position,se=K.morphAttributes.normal;let ne=0;for(let fe=0;fe<8;fe++){const xe=I[fe],Le=xe[0],He=xe[1];Le!==Number.MAX_SAFE_INTEGER&&He?(he&&K.getAttribute("morphTarget"+fe)!==he[Le]&&K.setAttribute("morphTarget"+fe,he[Le]),se&&K.getAttribute("morphNormal"+fe)!==se[Le]&&K.setAttribute("morphNormal"+fe,se[Le]),y[fe]=He,ne+=He):(he&&K.hasAttribute("morphTarget"+fe)===!0&&K.deleteAttribute("morphTarget"+fe),se&&K.hasAttribute("morphNormal"+fe)===!0&&K.deleteAttribute("morphNormal"+fe),y[fe]=0)}const be=K.morphTargetsRelative?1:1-ne;Z.getUniforms().setValue(S,"morphTargetBaseInfluence",be),Z.getUniforms().setValue(S,"morphTargetInfluences",y)}}return{update:D}}function $m(S,e,o,f){let y=new WeakMap;function b(D){const N=f.render.frame,K=D.geometry,Z=e.get(D,K);return y.get(Z)!==N&&(e.update(Z),y.set(Z,N)),D.isInstancedMesh&&(D.hasEventListener("dispose",I)===!1&&D.addEventListener("dispose",I),o.update(D.instanceMatrix,S.ARRAY_BUFFER),D.instanceColor!==null&&o.update(D.instanceColor,S.ARRAY_BUFFER)),Z}function B(){y=new WeakMap}function I(D){const N=D.target;N.removeEventListener("dispose",I),o.remove(N.instanceMatrix),N.instanceColor!==null&&o.remove(N.instanceColor)}return{update:b,dispose:B}}const ry=new ps,y1=new ia,v1=new es,Oa=new Es,Da=[],pp=[],e0=new Float32Array(16),t0=new Float32Array(9),Ya=new Float32Array(4);function gh(S,e,o){const f=S[0];if(f<=0||f>0)return S;const y=e*o;let b=Da[y];if(b===void 0&&(b=new Float32Array(y),Da[y]=b),e!==0){f.toArray(b,0);for(let B=1,I=0;B!==e;++B)I+=o,S[B].toArray(b,I)}return b}function Ds(S,e){if(S.length!==e.length)return!1;for(let o=0,f=S.length;o<f;o++)if(S[o]!==e[o])return!1;return!0}function Ls(S,e){for(let o=0,f=e.length;o<f;o++)S[o]=e[o]}function Cc(S,e){let o=pp[e];o===void 0&&(o=new Int32Array(e),pp[e]=o);for(let f=0;f!==e;++f)o[f]=S.allocateTextureUnit();return o}function Vp(S,e){const o=this.cache;o[0]!==e&&(S.uniform1f(this.addr,e),o[0]=e)}function _1(S,e){const o=this.cache;if(e.x!==void 0)(o[0]!==e.x||o[1]!==e.y)&&(S.uniform2f(this.addr,e.x,e.y),o[0]=e.x,o[1]=e.y);else{if(Ds(o,e))return;S.uniform2fv(this.addr,e),Ls(o,e)}}function iy(S,e){const o=this.cache;if(e.x!==void 0)(o[0]!==e.x||o[1]!==e.y||o[2]!==e.z)&&(S.uniform3f(this.addr,e.x,e.y,e.z),o[0]=e.x,o[1]=e.y,o[2]=e.z);else if(e.r!==void 0)(o[0]!==e.r||o[1]!==e.g||o[2]!==e.b)&&(S.uniform3f(this.addr,e.r,e.g,e.b),o[0]=e.r,o[1]=e.g,o[2]=e.b);else{if(Ds(o,e))return;S.uniform3fv(this.addr,e),Ls(o,e)}}function mh(S,e){const o=this.cache;if(e.x!==void 0)(o[0]!==e.x||o[1]!==e.y||o[2]!==e.z||o[3]!==e.w)&&(S.uniform4f(this.addr,e.x,e.y,e.z,e.w),o[0]=e.x,o[1]=e.y,o[2]=e.z,o[3]=e.w);else{if(Ds(o,e))return;S.uniform4fv(this.addr,e),Ls(o,e)}}function oy(S,e){const o=this.cache,f=e.elements;if(f===void 0){if(Ds(o,e))return;S.uniformMatrix2fv(this.addr,!1,e),Ls(o,e)}else{if(Ds(o,f))return;Ya.set(f),S.uniformMatrix2fv(this.addr,!1,Ya),Ls(o,f)}}function v_(S,e){const o=this.cache,f=e.elements;if(f===void 0){if(Ds(o,e))return;S.uniformMatrix3fv(this.addr,!1,e),Ls(o,e)}else{if(Ds(o,f))return;t0.set(f),S.uniformMatrix3fv(this.addr,!1,t0),Ls(o,f)}}function __(S,e){const o=this.cache,f=e.elements;if(f===void 0){if(Ds(o,e))return;S.uniformMatrix4fv(this.addr,!1,e),Ls(o,e)}else{if(Ds(o,f))return;e0.set(f),S.uniformMatrix4fv(this.addr,!1,e0),Ls(o,f)}}function sy(S,e){const o=this.cache;o[0]!==e&&(S.uniform1i(this.addr,e),o[0]=e)}function ay(S,e){const o=this.cache;if(e.x!==void 0)(o[0]!==e.x||o[1]!==e.y)&&(S.uniform2i(this.addr,e.x,e.y),o[0]=e.x,o[1]=e.y);else{if(Ds(o,e))return;S.uniform2iv(this.addr,e),Ls(o,e)}}function ly(S,e){const o=this.cache;if(e.x!==void 0)(o[0]!==e.x||o[1]!==e.y||o[2]!==e.z)&&(S.uniform3i(this.addr,e.x,e.y,e.z),o[0]=e.x,o[1]=e.y,o[2]=e.z);else{if(Ds(o,e))return;S.uniform3iv(this.addr,e),Ls(o,e)}}function Qp(S,e){const o=this.cache;if(e.x!==void 0)(o[0]!==e.x||o[1]!==e.y||o[2]!==e.z||o[3]!==e.w)&&(S.uniform4i(this.addr,e.x,e.y,e.z,e.w),o[0]=e.x,o[1]=e.y,o[2]=e.z,o[3]=e.w);else{if(Ds(o,e))return;S.uniform4iv(this.addr,e),Ls(o,e)}}function E_(S,e){const o=this.cache;o[0]!==e&&(S.uniform1ui(this.addr,e),o[0]=e)}function b_(S,e){const o=this.cache;if(e.x!==void 0)(o[0]!==e.x||o[1]!==e.y)&&(S.uniform2ui(this.addr,e.x,e.y),o[0]=e.x,o[1]=e.y);else{if(Ds(o,e))return;S.uniform2uiv(this.addr,e),Ls(o,e)}}function M_(S,e){const o=this.cache;if(e.x!==void 0)(o[0]!==e.x||o[1]!==e.y||o[2]!==e.z)&&(S.uniform3ui(this.addr,e.x,e.y,e.z),o[0]=e.x,o[1]=e.y,o[2]=e.z);else{if(Ds(o,e))return;S.uniform3uiv(this.addr,e),Ls(o,e)}}function x_(S,e){const o=this.cache;if(e.x!==void 0)(o[0]!==e.x||o[1]!==e.y||o[2]!==e.z||o[3]!==e.w)&&(S.uniform4ui(this.addr,e.x,e.y,e.z,e.w),o[0]=e.x,o[1]=e.y,o[2]=e.z,o[3]=e.w);else{if(Ds(o,e))return;S.uniform4uiv(this.addr,e),Ls(o,e)}}function C_(S,e,o){const f=this.cache,y=o.allocateTextureUnit();f[0]!==y&&(S.uniform1i(this.addr,y),f[0]=y),o.setTexture2D(e||ry,y)}function kg(S,e,o){const f=this.cache,y=o.allocateTextureUnit();f[0]!==y&&(S.uniform1i(this.addr,y),f[0]=y),o.setTexture3D(e||v1,y)}function S_(S,e,o){const f=this.cache,y=o.allocateTextureUnit();f[0]!==y&&(S.uniform1i(this.addr,y),f[0]=y),o.setTextureCube(e||Oa,y)}function w_(S,e,o){const f=this.cache,y=o.allocateTextureUnit();f[0]!==y&&(S.uniform1i(this.addr,y),f[0]=y),o.setTexture2DArray(e||y1,y)}function T_(S){switch(S){case 5126:return Vp;case 35664:return _1;case 35665:return iy;case 35666:return mh;case 35674:return oy;case 35675:return v_;case 35676:return __;case 5124:case 35670:return sy;case 35667:case 35671:return ay;case 35668:case 35672:return ly;case 35669:case 35673:return Qp;case 5125:return E_;case 36294:return b_;case 36295:return M_;case 36296:return x_;case 35678:case 36198:case 36298:case 36306:case 35682:return C_;case 35679:case 36299:case 36307:return kg;case 35680:case 36300:case 36308:case 36293:return S_;case 36289:case 36303:case 36311:case 36292:return w_}}function cy(S,e){S.uniform1fv(this.addr,e)}function B_(S,e){const o=gh(e,this.size,2);S.uniform2fv(this.addr,o)}function R_(S,e){const o=gh(e,this.size,3);S.uniform3fv(this.addr,o)}function E1(S,e){const o=gh(e,this.size,4);S.uniform4fv(this.addr,o)}function zg(S,e){const o=gh(e,this.size,4);S.uniformMatrix2fv(this.addr,!1,o)}function Gg(S,e){const o=gh(e,this.size,9);S.uniformMatrix3fv(this.addr,!1,o)}function b1(S,e){const o=gh(e,this.size,16);S.uniformMatrix4fv(this.addr,!1,o)}function Ug(S,e){S.uniform1iv(this.addr,e)}function I_(S,e){S.uniform2iv(this.addr,e)}function n0(S,e){S.uniform3iv(this.addr,e)}function F_(S,e){S.uniform4iv(this.addr,e)}function py(S,e){S.uniform1uiv(this.addr,e)}function r0(S,e){S.uniform2uiv(this.addr,e)}function uy(S,e){S.uniform3uiv(this.addr,e)}function O_(S,e){S.uniform4uiv(this.addr,e)}function D_(S,e,o){const f=this.cache,y=e.length,b=Cc(o,y);Ds(f,b)||(S.uniform1iv(this.addr,b),Ls(f,b));for(let B=0;B!==y;++B)o.setTexture2D(e[B]||ry,b[B])}function dy(S,e,o){const f=this.cache,y=e.length,b=Cc(o,y);Ds(f,b)||(S.uniform1iv(this.addr,b),Ls(f,b));for(let B=0;B!==y;++B)o.setTexture3D(e[B]||v1,b[B])}function M1(S,e,o){const f=this.cache,y=e.length,b=Cc(o,y);Ds(f,b)||(S.uniform1iv(this.addr,b),Ls(f,b));for(let B=0;B!==y;++B)o.setTextureCube(e[B]||Oa,b[B])}function Ja(S,e,o){const f=this.cache,y=e.length,b=Cc(o,y);Ds(f,b)||(S.uniform1iv(this.addr,b),Ls(f,b));for(let B=0;B!==y;++B)o.setTexture2DArray(e[B]||y1,b[B])}function L_(S){switch(S){case 5126:return cy;case 35664:return B_;case 35665:return R_;case 35666:return E1;case 35674:return zg;case 35675:return Gg;case 35676:return b1;case 5124:case 35670:return Ug;case 35667:case 35671:return I_;case 35668:case 35672:return n0;case 35669:case 35673:return F_;case 5125:return py;case 36294:return r0;case 36295:return uy;case 36296:return O_;case 35678:case 36198:case 36298:case 36306:case 35682:return D_;case 35679:case 36299:case 36307:return dy;case 35680:case 36300:case 36308:case 36293:return M1;case 36289:case 36303:case 36311:case 36292:return Ja}}class Ah{constructor(e,o,f){this.id=e,this.addr=f,this.cache=[],this.setValue=T_(o.type)}}class P_{constructor(e,o,f){this.id=e,this.addr=f,this.cache=[],this.size=o.size,this.setValue=L_(o.type)}}class hy{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,o,f){const y=this.seq;for(let b=0,B=y.length;b!==B;++b){const I=y[b];I.setValue(e,o[I.id],f)}}}const i0=/(\w+)(\])?(\[|\.)?/g;function fy(S,e){S.seq.push(e),S.map[e.id]=e}function o0(S,e,o){const f=S.name,y=f.length;for(i0.lastIndex=0;;){const b=i0.exec(f),B=i0.lastIndex;let I=b[1];const D=b[2]==="]",N=b[3];if(D&&(I=I|0),N===void 0||N==="["&&B+2===y){fy(o,N===void 0?new Ah(I,S,e):new P_(I,S,e));break}else{let Z=o.map[I];Z===void 0&&(Z=new hy(I),fy(o,Z)),o=Z}}}class s0{constructor(e,o){this.seq=[],this.map={};const f=e.getProgramParameter(o,e.ACTIVE_UNIFORMS);for(let y=0;y<f;++y){const b=e.getActiveUniform(o,y),B=e.getUniformLocation(o,b.name);o0(b,B,this)}}setValue(e,o,f,y){const b=this.map[o];b!==void 0&&b.setValue(e,f,y)}setOptional(e,o,f){const y=o[f];y!==void 0&&this.setValue(e,f,y)}static upload(e,o,f,y){for(let b=0,B=o.length;b!==B;++b){const I=o[b],D=f[I.id];D.needsUpdate!==!1&&I.setValue(e,D.value,y)}}static seqWithValue(e,o){const f=[];for(let y=0,b=e.length;y!==b;++y){const B=e[y];B.id in o&&f.push(B)}return f}}function x1(S,e,o){const f=S.createShader(e);return S.shaderSource(f,o),S.compileShader(f),f}let k_=0;function z_(S,e){const o=S.split(`
`),f=[],y=Math.max(e-6,0),b=Math.min(e+6,o.length);for(let B=y;B<b;B++){const I=B+1;f.push(`${I===e?">":" "} ${I}: ${o[B]}`)}return f.join(`
`)}function gy(S){switch(S){case al:return["Linear","( value )"];case Qn:return["sRGB","( value )"];default:return C.warn("THREE.WebGLProgram: Unsupported color space:",S),["Linear","( value )"]}}function my(S,e,o){const f=S.getShaderParameter(e,S.COMPILE_STATUS),y=S.getShaderInfoLog(e).trim();if(f&&y==="")return"";const b=/ERROR: 0:(\d+)/.exec(y);if(b){const B=parseInt(b[1]);return o.toUpperCase()+`

`+y+`

`+z_(S.getShaderSource(e),B)}else return y}function G_(S,e){const o=gy(e);return"vec4 "+S+"( vec4 value ) { return LinearTo"+o[0]+o[1]+"; }"}function Ib(S,e){let o;switch(e){case Si:o="Linear";break;case qi:o="Reinhard";break;case uo:o="OptimizedCineon";break;case Eo:o="ACESFilmic";break;case Go:o="Custom";break;default:C.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),o="Linear"}return"vec3 "+S+"( vec3 color ) { return "+o+"ToneMapping( color ); }"}function Fb(S){return[S.extensionDerivatives||S.envMapCubeUVHeight||S.bumpMap||S.normalMapTangentSpace||S.clearcoatNormalMap||S.flatShading||S.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(S.extensionFragDepth||S.logarithmicDepthBuffer)&&S.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",S.extensionDrawBuffers&&S.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(S.extensionShaderTextureLOD||S.envMap||S.transmission)&&S.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Ng).join(`
`)}function Ob(S){const e=[];for(const o in S){const f=S[o];f!==!1&&e.push("#define "+o+" "+f)}return e.join(`
`)}function U_(S,e){const o={},f=S.getProgramParameter(e,S.ACTIVE_ATTRIBUTES);for(let y=0;y<f;y++){const b=S.getActiveAttrib(e,y),B=b.name;let I=1;b.type===S.FLOAT_MAT2&&(I=2),b.type===S.FLOAT_MAT3&&(I=3),b.type===S.FLOAT_MAT4&&(I=4),o[B]={type:b.type,location:S.getAttribLocation(e,B),locationSize:I}}return o}function Ng(S){return S!==""}function Ay(S,e){const o=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return S.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,o).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function yy(S,e){return S.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const N_=/^[ \t]*#include +<([\w\d./]+)>/gm;function a0(S){return S.replace(N_,vy)}function vy(S,e){const o=ji[e];if(o===void 0)throw new Error("Can not resolve #include <"+e+">");return a0(o)}const _y=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function Za(S){return S.replace(_y,j_)}function j_(S,e,o,f){let y="";for(let b=parseInt(e);b<parseInt(o);b++)y+=f.replace(/\[\s*i\s*\]/g,"[ "+b+" ]").replace(/UNROLLED_LOOP_INDEX/g,b);return y}function Ad(S){let e="precision "+S.precision+` float;
precision `+S.precision+" int;";return S.precision==="highp"?e+=`
#define HIGH_PRECISION`:S.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:S.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function l0(S){let e="SHADOWMAP_TYPE_BASIC";return S.shadowMapType===ae?e="SHADOWMAP_TYPE_PCF":S.shadowMapType===pe?e="SHADOWMAP_TYPE_PCF_SOFT":S.shadowMapType===st&&(e="SHADOWMAP_TYPE_VSM"),e}function Ey(S){let e="ENVMAP_TYPE_CUBE";if(S.envMap)switch(S.envMapMode){case Io:case $i:e="ENVMAP_TYPE_CUBE";break;case bs:e="ENVMAP_TYPE_CUBE_UV";break}return e}function H_(S){let e="ENVMAP_MODE_REFLECTION";if(S.envMap)switch(S.envMapMode){case $i:e="ENVMAP_MODE_REFRACTION";break}return e}function c0(S){let e="ENVMAP_BLENDING_NONE";if(S.envMap)switch(S.combine){case Or:e="ENVMAP_BLENDING_MULTIPLY";break;case oi:e="ENVMAP_BLENDING_MIX";break;case Ur:e="ENVMAP_BLENDING_ADD";break}return e}function W_(S){const e=S.envMapCubeUVHeight;if(e===null)return null;const o=Math.log2(e)-2,f=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,o),7*16)),texelHeight:f,maxMip:o}}function C1(S,e,o,f){const y=S.getContext(),b=o.defines;let B=o.vertexShader,I=o.fragmentShader;const D=l0(o),N=Ey(o),K=H_(o),Z=c0(o),q=W_(o),ee=o.isWebGL2?"":Fb(o),ie=Ob(b),he=y.createProgram();let se,ne,be=o.glslVersion?"#version "+o.glslVersion+`
`:"";o.isRawShaderMaterial?(se=["#define SHADER_TYPE "+o.shaderType,"#define SHADER_NAME "+o.shaderName,ie].filter(Ng).join(`
`),se.length>0&&(se+=`
`),ne=[ee,"#define SHADER_TYPE "+o.shaderType,"#define SHADER_NAME "+o.shaderName,ie].filter(Ng).join(`
`),ne.length>0&&(ne+=`
`)):(se=[Ad(o),"#define SHADER_TYPE "+o.shaderType,"#define SHADER_NAME "+o.shaderName,ie,o.instancing?"#define USE_INSTANCING":"",o.instancingColor?"#define USE_INSTANCING_COLOR":"",o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+K:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",o.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",o.displacementMap?"#define USE_DISPLACEMENTMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.anisotropyMap?"#define USE_ANISOTROPYMAP":"",o.clearcoatMap?"#define USE_CLEARCOATMAP":"",o.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",o.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",o.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.transmission?"#define USE_TRANSMISSION":"",o.transmissionMap?"#define USE_TRANSMISSIONMAP":"",o.thicknessMap?"#define USE_THICKNESSMAP":"",o.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",o.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",o.mapUv?"#define MAP_UV "+o.mapUv:"",o.alphaMapUv?"#define ALPHAMAP_UV "+o.alphaMapUv:"",o.lightMapUv?"#define LIGHTMAP_UV "+o.lightMapUv:"",o.aoMapUv?"#define AOMAP_UV "+o.aoMapUv:"",o.emissiveMapUv?"#define EMISSIVEMAP_UV "+o.emissiveMapUv:"",o.bumpMapUv?"#define BUMPMAP_UV "+o.bumpMapUv:"",o.normalMapUv?"#define NORMALMAP_UV "+o.normalMapUv:"",o.displacementMapUv?"#define DISPLACEMENTMAP_UV "+o.displacementMapUv:"",o.metalnessMapUv?"#define METALNESSMAP_UV "+o.metalnessMapUv:"",o.roughnessMapUv?"#define ROUGHNESSMAP_UV "+o.roughnessMapUv:"",o.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+o.anisotropyMapUv:"",o.clearcoatMapUv?"#define CLEARCOATMAP_UV "+o.clearcoatMapUv:"",o.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+o.clearcoatNormalMapUv:"",o.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+o.clearcoatRoughnessMapUv:"",o.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+o.iridescenceMapUv:"",o.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+o.iridescenceThicknessMapUv:"",o.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+o.sheenColorMapUv:"",o.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+o.sheenRoughnessMapUv:"",o.specularMapUv?"#define SPECULARMAP_UV "+o.specularMapUv:"",o.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+o.specularColorMapUv:"",o.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+o.specularIntensityMapUv:"",o.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+o.transmissionMapUv:"",o.thicknessMapUv?"#define THICKNESSMAP_UV "+o.thicknessMapUv:"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.vertexAlphas?"#define USE_COLOR_ALPHA":"",o.vertexUv1s?"#define USE_UV1":"",o.vertexUv2s?"#define USE_UV2":"",o.vertexUv3s?"#define USE_UV3":"",o.pointsUvs?"#define USE_POINTS_UV":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&o.flatShading===!1?"#define USE_MORPHNORMALS":"",o.morphColors&&o.isWebGL2?"#define USE_MORPHCOLORS":"",o.morphTargetsCount>0&&o.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",o.morphTargetsCount>0&&o.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+o.morphTextureStride:"",o.morphTargetsCount>0&&o.isWebGL2?"#define MORPHTARGETS_COUNT "+o.morphTargetsCount:"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+D:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.useLegacyLights?"#define LEGACY_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&o.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Ng).join(`
`),ne=[ee,Ad(o),"#define SHADER_TYPE "+o.shaderType,"#define SHADER_NAME "+o.shaderName,ie,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp2?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.matcap?"#define USE_MATCAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+N:"",o.envMap?"#define "+K:"",o.envMap?"#define "+Z:"",q?"#define CUBEUV_TEXEL_WIDTH "+q.texelWidth:"",q?"#define CUBEUV_TEXEL_HEIGHT "+q.texelHeight:"",q?"#define CUBEUV_MAX_MIP "+q.maxMip+".0":"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",o.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.anisotropy?"#define USE_ANISOTROPY":"",o.anisotropyMap?"#define USE_ANISOTROPYMAP":"",o.clearcoat?"#define USE_CLEARCOAT":"",o.clearcoatMap?"#define USE_CLEARCOATMAP":"",o.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",o.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",o.iridescence?"#define USE_IRIDESCENCE":"",o.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",o.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",o.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.alphaTest?"#define USE_ALPHATEST":"",o.sheen?"#define USE_SHEEN":"",o.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",o.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",o.transmission?"#define USE_TRANSMISSION":"",o.transmissionMap?"#define USE_TRANSMISSIONMAP":"",o.thicknessMap?"#define USE_THICKNESSMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors||o.instancingColor?"#define USE_COLOR":"",o.vertexAlphas?"#define USE_COLOR_ALPHA":"",o.vertexUv1s?"#define USE_UV1":"",o.vertexUv2s?"#define USE_UV2":"",o.vertexUv3s?"#define USE_UV3":"",o.pointsUvs?"#define USE_POINTS_UV":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+D:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.useLegacyLights?"#define LEGACY_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&o.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",o.toneMapping!==Ci?"#define TONE_MAPPING":"",o.toneMapping!==Ci?ji.tonemapping_pars_fragment:"",o.toneMapping!==Ci?Ib("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.opaque?"#define OPAQUE":"",ji.encodings_pars_fragment,G_("linearToOutputTexel",o.outputColorSpace),o.useDepthPacking?"#define DEPTH_PACKING "+o.depthPacking:"",`
`].filter(Ng).join(`
`)),B=a0(B),B=Ay(B,o),B=yy(B,o),I=a0(I),I=Ay(I,o),I=yy(I,o),B=Za(B),I=Za(I),o.isWebGL2&&o.isRawShaderMaterial!==!0&&(be=`#version 300 es
`,se=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+se,ne=["#define varying in",o.glslVersion===ja?"":"layout(location = 0) out highp vec4 pc_fragColor;",o.glslVersion===ja?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+ne);const fe=be+se+B,xe=be+ne+I,Le=x1(y,y.VERTEX_SHADER,fe),He=x1(y,y.FRAGMENT_SHADER,xe);if(y.attachShader(he,Le),y.attachShader(he,He),o.index0AttributeName!==void 0?y.bindAttribLocation(he,0,o.index0AttributeName):o.morphTargets===!0&&y.bindAttribLocation(he,0,"position"),y.linkProgram(he),S.debug.checkShaderErrors){const we=y.getProgramInfoLog(he).trim(),We=y.getShaderInfoLog(Le).trim(),Wt=y.getShaderInfoLog(He).trim();let Rn=!0,Ut=!0;if(y.getProgramParameter(he,y.LINK_STATUS)===!1)if(Rn=!1,typeof S.debug.onShaderError=="function")S.debug.onShaderError(y,he,Le,He);else{const Ht=my(y,Le,"vertex"),Jt=my(y,He,"fragment");C.error("THREE.WebGLProgram: Shader Error "+y.getError()+" - VALIDATE_STATUS "+y.getProgramParameter(he,y.VALIDATE_STATUS)+`

Program Info Log: `+we+`
`+Ht+`
`+Jt)}else we!==""?C.warn("THREE.WebGLProgram: Program Info Log:",we):(We===""||Wt==="")&&(Ut=!1);Ut&&(this.diagnostics={runnable:Rn,programLog:we,vertexShader:{log:We,prefix:se},fragmentShader:{log:Wt,prefix:ne}})}y.deleteShader(Le),y.deleteShader(He);let qe;this.getUniforms=function(){return qe===void 0&&(qe=new s0(y,he)),qe};let et;return this.getAttributes=function(){return et===void 0&&(et=U_(y,he)),et},this.destroy=function(){f.releaseStatesOfProgram(this),y.deleteProgram(he),this.program=void 0},this.type=o.shaderType,this.name=o.shaderName,this.id=k_++,this.cacheKey=e,this.usedTimes=1,this.program=he,this.vertexShader=Le,this.fragmentShader=He,this}let by=0;class V_{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const o=e.vertexShader,f=e.fragmentShader,y=this._getShaderStage(o),b=this._getShaderStage(f),B=this._getShaderCacheForMaterial(e);return B.has(y)===!1&&(B.add(y),y.usedTimes++),B.has(b)===!1&&(B.add(b),b.usedTimes++),this}remove(e){const o=this.materialCache.get(e);for(const f of o)f.usedTimes--,f.usedTimes===0&&this.shaderCache.delete(f.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const o=this.materialCache;let f=o.get(e);return f===void 0&&(f=new Set,o.set(e,f)),f}_getShaderStage(e){const o=this.shaderCache;let f=o.get(e);return f===void 0&&(f=new Q_(e),o.set(e,f)),f}}class Q_{constructor(e){this.id=by++,this.code=e,this.usedTimes=0}}function K_(S,e,o,f,y,b,B){const I=new rp,D=new V_,N=[],K=y.isWebGL2,Z=y.logarithmicDepthBuffer,q=y.vertexTextures;let ee=y.precision;const ie={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function he(we){return we===0?"uv":`uv${we}`}function se(we,We,Wt,Rn,Ut){const Ht=Rn.fog,Jt=Ut.geometry,Sn=we.isMeshStandardMaterial?Rn.environment:null,cn=(we.isMeshStandardMaterial?o:e).get(we.envMap||Sn),En=cn&&cn.mapping===bs?cn.image.height:null,In=ie[we.type];we.precision!==null&&(ee=y.getMaxPrecision(we.precision),ee!==we.precision&&C.warn("THREE.WebGLProgram.getParameters:",we.precision,"not supported, using",ee,"instead."));const kn=Jt.morphAttributes.position||Jt.morphAttributes.normal||Jt.morphAttributes.color,wr=kn!==void 0?kn.length:0;let Zt=0;Jt.morphAttributes.position!==void 0&&(Zt=1),Jt.morphAttributes.normal!==void 0&&(Zt=2),Jt.morphAttributes.color!==void 0&&(Zt=3);let zn,hn,ir,Cr;if(In){const $s=jc[In];zn=$s.vertexShader,hn=$s.fragmentShader}else zn=we.vertexShader,hn=we.fragmentShader,D.update(we),ir=D.getVertexShaderID(we),Cr=D.getFragmentShaderID(we);const kr=S.getRenderTarget(),hi=Ut.isInstancedMesh===!0,ci=!!we.map,Lo=!!we.matcap,bi=!!cn,tt=!!we.aoMap,qn=!!we.lightMap,An=!!we.bumpMap,tr=!!we.normalMap,wn=!!we.displacementMap,Hr=!!we.emissiveMap,jn=!!we.metalnessMap,Tr=!!we.roughnessMap,ri=we.anisotropy>0,Di=we.clearcoat>0,ts=we.iridescence>0,Ye=we.sheen>0,Fe=we.transmission>0,an=ri&&!!we.anisotropyMap,Kn=Di&&!!we.clearcoatMap,Hn=Di&&!!we.clearcoatNormalMap,$n=Di&&!!we.clearcoatRoughnessMap,Wr=ts&&!!we.iridescenceMap,dr=ts&&!!we.iridescenceThicknessMap,on=Ye&&!!we.sheenColorMap,ti=Ye&&!!we.sheenRoughnessMap,Vr=!!we.specularMap,$r=!!we.specularColorMap,zr=!!we.specularIntensityMap,Gr=Fe&&!!we.transmissionMap,Ki=Fe&&!!we.thicknessMap,_o=!!we.gradientMap,ft=!!we.alphaMap,mr=we.alphaTest>0,Xt=!!we.extensions,sr=!!Jt.attributes.uv1,Mr=!!Jt.attributes.uv2,Ao=!!Jt.attributes.uv3;return{isWebGL2:K,shaderID:In,shaderType:we.type,shaderName:we.name,vertexShader:zn,fragmentShader:hn,defines:we.defines,customVertexShaderID:ir,customFragmentShaderID:Cr,isRawShaderMaterial:we.isRawShaderMaterial===!0,glslVersion:we.glslVersion,precision:ee,instancing:hi,instancingColor:hi&&Ut.instanceColor!==null,supportsVertexTextures:q,outputColorSpace:kr===null?S.outputColorSpace:kr.isXRRenderTarget===!0?kr.texture.colorSpace:al,map:ci,matcap:Lo,envMap:bi,envMapMode:bi&&cn.mapping,envMapCubeUVHeight:En,aoMap:tt,lightMap:qn,bumpMap:An,normalMap:tr,displacementMap:q&&wn,emissiveMap:Hr,normalMapObjectSpace:tr&&we.normalMapType===Nh,normalMapTangentSpace:tr&&we.normalMapType===Li,metalnessMap:jn,roughnessMap:Tr,anisotropy:ri,anisotropyMap:an,clearcoat:Di,clearcoatMap:Kn,clearcoatNormalMap:Hn,clearcoatRoughnessMap:$n,iridescence:ts,iridescenceMap:Wr,iridescenceThicknessMap:dr,sheen:Ye,sheenColorMap:on,sheenRoughnessMap:ti,specularMap:Vr,specularColorMap:$r,specularIntensityMap:zr,transmission:Fe,transmissionMap:Gr,thicknessMap:Ki,gradientMap:_o,opaque:we.transparent===!1&&we.blending===at,alphaMap:ft,alphaTest:mr,combine:we.combine,mapUv:ci&&he(we.map.channel),aoMapUv:tt&&he(we.aoMap.channel),lightMapUv:qn&&he(we.lightMap.channel),bumpMapUv:An&&he(we.bumpMap.channel),normalMapUv:tr&&he(we.normalMap.channel),displacementMapUv:wn&&he(we.displacementMap.channel),emissiveMapUv:Hr&&he(we.emissiveMap.channel),metalnessMapUv:jn&&he(we.metalnessMap.channel),roughnessMapUv:Tr&&he(we.roughnessMap.channel),anisotropyMapUv:an&&he(we.anisotropyMap.channel),clearcoatMapUv:Kn&&he(we.clearcoatMap.channel),clearcoatNormalMapUv:Hn&&he(we.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:$n&&he(we.clearcoatRoughnessMap.channel),iridescenceMapUv:Wr&&he(we.iridescenceMap.channel),iridescenceThicknessMapUv:dr&&he(we.iridescenceThicknessMap.channel),sheenColorMapUv:on&&he(we.sheenColorMap.channel),sheenRoughnessMapUv:ti&&he(we.sheenRoughnessMap.channel),specularMapUv:Vr&&he(we.specularMap.channel),specularColorMapUv:$r&&he(we.specularColorMap.channel),specularIntensityMapUv:zr&&he(we.specularIntensityMap.channel),transmissionMapUv:Gr&&he(we.transmissionMap.channel),thicknessMapUv:Ki&&he(we.thicknessMap.channel),alphaMapUv:ft&&he(we.alphaMap.channel),vertexTangents:!!Jt.attributes.tangent&&(tr||ri),vertexColors:we.vertexColors,vertexAlphas:we.vertexColors===!0&&!!Jt.attributes.color&&Jt.attributes.color.itemSize===4,vertexUv1s:sr,vertexUv2s:Mr,vertexUv3s:Ao,pointsUvs:Ut.isPoints===!0&&!!Jt.attributes.uv&&(ci||ft),fog:!!Ht,useFog:we.fog===!0,fogExp2:Ht&&Ht.isFogExp2,flatShading:we.flatShading===!0,sizeAttenuation:we.sizeAttenuation===!0,logarithmicDepthBuffer:Z,skinning:Ut.isSkinnedMesh===!0,morphTargets:Jt.morphAttributes.position!==void 0,morphNormals:Jt.morphAttributes.normal!==void 0,morphColors:Jt.morphAttributes.color!==void 0,morphTargetsCount:wr,morphTextureStride:Zt,numDirLights:We.directional.length,numPointLights:We.point.length,numSpotLights:We.spot.length,numSpotLightMaps:We.spotLightMap.length,numRectAreaLights:We.rectArea.length,numHemiLights:We.hemi.length,numDirLightShadows:We.directionalShadowMap.length,numPointLightShadows:We.pointShadowMap.length,numSpotLightShadows:We.spotShadowMap.length,numSpotLightShadowsWithMaps:We.numSpotLightShadowsWithMaps,numClippingPlanes:B.numPlanes,numClipIntersection:B.numIntersection,dithering:we.dithering,shadowMapEnabled:S.shadowMap.enabled&&Wt.length>0,shadowMapType:S.shadowMap.type,toneMapping:we.toneMapped?S.toneMapping:Ci,useLegacyLights:S.useLegacyLights,premultipliedAlpha:we.premultipliedAlpha,doubleSided:we.side===Ze,flipSided:we.side===Oe,useDepthPacking:we.depthPacking>=0,depthPacking:we.depthPacking||0,index0AttributeName:we.index0AttributeName,extensionDerivatives:Xt&&we.extensions.derivatives===!0,extensionFragDepth:Xt&&we.extensions.fragDepth===!0,extensionDrawBuffers:Xt&&we.extensions.drawBuffers===!0,extensionShaderTextureLOD:Xt&&we.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:K||f.has("EXT_frag_depth"),rendererExtensionDrawBuffers:K||f.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:K||f.has("EXT_shader_texture_lod"),customProgramCacheKey:we.customProgramCacheKey()}}function ne(we){const We=[];if(we.shaderID?We.push(we.shaderID):(We.push(we.customVertexShaderID),We.push(we.customFragmentShaderID)),we.defines!==void 0)for(const Wt in we.defines)We.push(Wt),We.push(we.defines[Wt]);return we.isRawShaderMaterial===!1&&(be(We,we),fe(We,we),We.push(S.outputColorSpace)),We.push(we.customProgramCacheKey),We.join()}function be(we,We){we.push(We.precision),we.push(We.outputColorSpace),we.push(We.envMapMode),we.push(We.envMapCubeUVHeight),we.push(We.mapUv),we.push(We.alphaMapUv),we.push(We.lightMapUv),we.push(We.aoMapUv),we.push(We.bumpMapUv),we.push(We.normalMapUv),we.push(We.displacementMapUv),we.push(We.emissiveMapUv),we.push(We.metalnessMapUv),we.push(We.roughnessMapUv),we.push(We.anisotropyMapUv),we.push(We.clearcoatMapUv),we.push(We.clearcoatNormalMapUv),we.push(We.clearcoatRoughnessMapUv),we.push(We.iridescenceMapUv),we.push(We.iridescenceThicknessMapUv),we.push(We.sheenColorMapUv),we.push(We.sheenRoughnessMapUv),we.push(We.specularMapUv),we.push(We.specularColorMapUv),we.push(We.specularIntensityMapUv),we.push(We.transmissionMapUv),we.push(We.thicknessMapUv),we.push(We.combine),we.push(We.fogExp2),we.push(We.sizeAttenuation),we.push(We.morphTargetsCount),we.push(We.morphAttributeCount),we.push(We.numDirLights),we.push(We.numPointLights),we.push(We.numSpotLights),we.push(We.numSpotLightMaps),we.push(We.numHemiLights),we.push(We.numRectAreaLights),we.push(We.numDirLightShadows),we.push(We.numPointLightShadows),we.push(We.numSpotLightShadows),we.push(We.numSpotLightShadowsWithMaps),we.push(We.shadowMapType),we.push(We.toneMapping),we.push(We.numClippingPlanes),we.push(We.numClipIntersection),we.push(We.depthPacking)}function fe(we,We){I.disableAll(),We.isWebGL2&&I.enable(0),We.supportsVertexTextures&&I.enable(1),We.instancing&&I.enable(2),We.instancingColor&&I.enable(3),We.matcap&&I.enable(4),We.envMap&&I.enable(5),We.normalMapObjectSpace&&I.enable(6),We.normalMapTangentSpace&&I.enable(7),We.clearcoat&&I.enable(8),We.iridescence&&I.enable(9),We.alphaTest&&I.enable(10),We.vertexColors&&I.enable(11),We.vertexAlphas&&I.enable(12),We.vertexUv1s&&I.enable(13),We.vertexUv2s&&I.enable(14),We.vertexUv3s&&I.enable(15),We.vertexTangents&&I.enable(16),We.anisotropy&&I.enable(17),we.push(I.mask),I.disableAll(),We.fog&&I.enable(0),We.useFog&&I.enable(1),We.flatShading&&I.enable(2),We.logarithmicDepthBuffer&&I.enable(3),We.skinning&&I.enable(4),We.morphTargets&&I.enable(5),We.morphNormals&&I.enable(6),We.morphColors&&I.enable(7),We.premultipliedAlpha&&I.enable(8),We.shadowMapEnabled&&I.enable(9),We.useLegacyLights&&I.enable(10),We.doubleSided&&I.enable(11),We.flipSided&&I.enable(12),We.useDepthPacking&&I.enable(13),We.dithering&&I.enable(14),We.transmission&&I.enable(15),We.sheen&&I.enable(16),We.opaque&&I.enable(17),We.pointsUvs&&I.enable(18),we.push(I.mask)}function xe(we){const We=ie[we.type];let Wt;if(We){const Rn=jc[We];Wt=lh.clone(Rn.uniforms)}else Wt=we.uniforms;return Wt}function Le(we,We){let Wt;for(let Rn=0,Ut=N.length;Rn<Ut;Rn++){const Ht=N[Rn];if(Ht.cacheKey===We){Wt=Ht,++Wt.usedTimes;break}}return Wt===void 0&&(Wt=new C1(S,We,we,b),N.push(Wt)),Wt}function He(we){if(--we.usedTimes===0){const We=N.indexOf(we);N[We]=N[N.length-1],N.pop(),we.destroy()}}function qe(we){D.remove(we)}function et(){D.dispose()}return{getParameters:se,getProgramCacheKey:ne,getUniforms:xe,acquireProgram:Le,releaseProgram:He,releaseShaderCache:qe,programs:N,dispose:et}}function My(){let S=new WeakMap;function e(b){let B=S.get(b);return B===void 0&&(B={},S.set(b,B)),B}function o(b){S.delete(b)}function f(b,B,I){S.get(b)[B]=I}function y(){S=new WeakMap}return{get:e,remove:o,update:f,dispose:y}}function X_(S,e){return S.groupOrder!==e.groupOrder?S.groupOrder-e.groupOrder:S.renderOrder!==e.renderOrder?S.renderOrder-e.renderOrder:S.material.id!==e.material.id?S.material.id-e.material.id:S.z!==e.z?S.z-e.z:S.id-e.id}function S1(S,e){return S.groupOrder!==e.groupOrder?S.groupOrder-e.groupOrder:S.renderOrder!==e.renderOrder?S.renderOrder-e.renderOrder:S.z!==e.z?e.z-S.z:S.id-e.id}function xy(){const S=[];let e=0;const o=[],f=[],y=[];function b(){e=0,o.length=0,f.length=0,y.length=0}function B(Z,q,ee,ie,he,se){let ne=S[e];return ne===void 0?(ne={id:Z.id,object:Z,geometry:q,material:ee,groupOrder:ie,renderOrder:Z.renderOrder,z:he,group:se},S[e]=ne):(ne.id=Z.id,ne.object=Z,ne.geometry=q,ne.material=ee,ne.groupOrder=ie,ne.renderOrder=Z.renderOrder,ne.z=he,ne.group=se),e++,ne}function I(Z,q,ee,ie,he,se){const ne=B(Z,q,ee,ie,he,se);ee.transmission>0?f.push(ne):ee.transparent===!0?y.push(ne):o.push(ne)}function D(Z,q,ee,ie,he,se){const ne=B(Z,q,ee,ie,he,se);ee.transmission>0?f.unshift(ne):ee.transparent===!0?y.unshift(ne):o.unshift(ne)}function N(Z,q){o.length>1&&o.sort(Z||X_),f.length>1&&f.sort(q||S1),y.length>1&&y.sort(q||S1)}function K(){for(let Z=e,q=S.length;Z<q;Z++){const ee=S[Z];if(ee.id===null)break;ee.id=null,ee.object=null,ee.geometry=null,ee.material=null,ee.group=null}}return{opaque:o,transmissive:f,transparent:y,init:b,push:I,unshift:D,finish:K,sort:N}}function Y_(){let S=new WeakMap;function e(f,y){const b=S.get(f);let B;return b===void 0?(B=new xy,S.set(f,[B])):y>=b.length?(B=new xy,b.push(B)):B=b[y],B}function o(){S=new WeakMap}return{get:e,dispose:o}}function J_(){const S={};return{get:function(e){if(S[e.id]!==void 0)return S[e.id];let o;switch(e.type){case"DirectionalLight":o={direction:new je,color:new br};break;case"SpotLight":o={position:new je,direction:new je,color:new br,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":o={position:new je,color:new br,distance:0,decay:0};break;case"HemisphereLight":o={direction:new je,skyColor:new br,groundColor:new br};break;case"RectAreaLight":o={color:new br,position:new je,halfWidth:new je,halfHeight:new je};break}return S[e.id]=o,o}}}function Z_(){const S={};return{get:function(e){if(S[e.id]!==void 0)return S[e.id];let o;switch(e.type){case"DirectionalLight":o={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _n};break;case"SpotLight":o={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _n};break;case"PointLight":o={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _n,shadowCameraNear:1,shadowCameraFar:1e3};break}return S[e.id]=o,o}}}let q_=0;function $_(S,e){return(e.castShadow?2:0)-(S.castShadow?2:0)+(e.map?1:0)-(S.map?1:0)}function yh(S,e){const o=new J_,f=Z_(),y={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let K=0;K<9;K++)y.probe.push(new je);const b=new je,B=new ui,I=new ui;function D(K,Z){let q=0,ee=0,ie=0;for(let Wt=0;Wt<9;Wt++)y.probe[Wt].set(0,0,0);let he=0,se=0,ne=0,be=0,fe=0,xe=0,Le=0,He=0,qe=0,et=0;K.sort($_);const we=Z===!0?Math.PI:1;for(let Wt=0,Rn=K.length;Wt<Rn;Wt++){const Ut=K[Wt],Ht=Ut.color,Jt=Ut.intensity,Sn=Ut.distance,cn=Ut.shadow&&Ut.shadow.map?Ut.shadow.map.texture:null;if(Ut.isAmbientLight)q+=Ht.r*Jt*we,ee+=Ht.g*Jt*we,ie+=Ht.b*Jt*we;else if(Ut.isLightProbe)for(let En=0;En<9;En++)y.probe[En].addScaledVector(Ut.sh.coefficients[En],Jt);else if(Ut.isDirectionalLight){const En=o.get(Ut);if(En.color.copy(Ut.color).multiplyScalar(Ut.intensity*we),Ut.castShadow){const In=Ut.shadow,kn=f.get(Ut);kn.shadowBias=In.bias,kn.shadowNormalBias=In.normalBias,kn.shadowRadius=In.radius,kn.shadowMapSize=In.mapSize,y.directionalShadow[he]=kn,y.directionalShadowMap[he]=cn,y.directionalShadowMatrix[he]=Ut.shadow.matrix,xe++}y.directional[he]=En,he++}else if(Ut.isSpotLight){const En=o.get(Ut);En.position.setFromMatrixPosition(Ut.matrixWorld),En.color.copy(Ht).multiplyScalar(Jt*we),En.distance=Sn,En.coneCos=Math.cos(Ut.angle),En.penumbraCos=Math.cos(Ut.angle*(1-Ut.penumbra)),En.decay=Ut.decay,y.spot[ne]=En;const In=Ut.shadow;if(Ut.map&&(y.spotLightMap[qe]=Ut.map,qe++,In.updateMatrices(Ut),Ut.castShadow&&et++),y.spotLightMatrix[ne]=In.matrix,Ut.castShadow){const kn=f.get(Ut);kn.shadowBias=In.bias,kn.shadowNormalBias=In.normalBias,kn.shadowRadius=In.radius,kn.shadowMapSize=In.mapSize,y.spotShadow[ne]=kn,y.spotShadowMap[ne]=cn,He++}ne++}else if(Ut.isRectAreaLight){const En=o.get(Ut);En.color.copy(Ht).multiplyScalar(Jt),En.halfWidth.set(Ut.width*.5,0,0),En.halfHeight.set(0,Ut.height*.5,0),y.rectArea[be]=En,be++}else if(Ut.isPointLight){const En=o.get(Ut);if(En.color.copy(Ut.color).multiplyScalar(Ut.intensity*we),En.distance=Ut.distance,En.decay=Ut.decay,Ut.castShadow){const In=Ut.shadow,kn=f.get(Ut);kn.shadowBias=In.bias,kn.shadowNormalBias=In.normalBias,kn.shadowRadius=In.radius,kn.shadowMapSize=In.mapSize,kn.shadowCameraNear=In.camera.near,kn.shadowCameraFar=In.camera.far,y.pointShadow[se]=kn,y.pointShadowMap[se]=cn,y.pointShadowMatrix[se]=Ut.shadow.matrix,Le++}y.point[se]=En,se++}else if(Ut.isHemisphereLight){const En=o.get(Ut);En.skyColor.copy(Ut.color).multiplyScalar(Jt*we),En.groundColor.copy(Ut.groundColor).multiplyScalar(Jt*we),y.hemi[fe]=En,fe++}}be>0&&(e.isWebGL2||S.has("OES_texture_float_linear")===!0?(y.rectAreaLTC1=ur.LTC_FLOAT_1,y.rectAreaLTC2=ur.LTC_FLOAT_2):S.has("OES_texture_half_float_linear")===!0?(y.rectAreaLTC1=ur.LTC_HALF_1,y.rectAreaLTC2=ur.LTC_HALF_2):C.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),y.ambient[0]=q,y.ambient[1]=ee,y.ambient[2]=ie;const We=y.hash;(We.directionalLength!==he||We.pointLength!==se||We.spotLength!==ne||We.rectAreaLength!==be||We.hemiLength!==fe||We.numDirectionalShadows!==xe||We.numPointShadows!==Le||We.numSpotShadows!==He||We.numSpotMaps!==qe)&&(y.directional.length=he,y.spot.length=ne,y.rectArea.length=be,y.point.length=se,y.hemi.length=fe,y.directionalShadow.length=xe,y.directionalShadowMap.length=xe,y.pointShadow.length=Le,y.pointShadowMap.length=Le,y.spotShadow.length=He,y.spotShadowMap.length=He,y.directionalShadowMatrix.length=xe,y.pointShadowMatrix.length=Le,y.spotLightMatrix.length=He+qe-et,y.spotLightMap.length=qe,y.numSpotLightShadowsWithMaps=et,We.directionalLength=he,We.pointLength=se,We.spotLength=ne,We.rectAreaLength=be,We.hemiLength=fe,We.numDirectionalShadows=xe,We.numPointShadows=Le,We.numSpotShadows=He,We.numSpotMaps=qe,y.version=q_++)}function N(K,Z){let q=0,ee=0,ie=0,he=0,se=0;const ne=Z.matrixWorldInverse;for(let be=0,fe=K.length;be<fe;be++){const xe=K[be];if(xe.isDirectionalLight){const Le=y.directional[q];Le.direction.setFromMatrixPosition(xe.matrixWorld),b.setFromMatrixPosition(xe.target.matrixWorld),Le.direction.sub(b),Le.direction.transformDirection(ne),q++}else if(xe.isSpotLight){const Le=y.spot[ie];Le.position.setFromMatrixPosition(xe.matrixWorld),Le.position.applyMatrix4(ne),Le.direction.setFromMatrixPosition(xe.matrixWorld),b.setFromMatrixPosition(xe.target.matrixWorld),Le.direction.sub(b),Le.direction.transformDirection(ne),ie++}else if(xe.isRectAreaLight){const Le=y.rectArea[he];Le.position.setFromMatrixPosition(xe.matrixWorld),Le.position.applyMatrix4(ne),I.identity(),B.copy(xe.matrixWorld),B.premultiply(ne),I.extractRotation(B),Le.halfWidth.set(xe.width*.5,0,0),Le.halfHeight.set(0,xe.height*.5,0),Le.halfWidth.applyMatrix4(I),Le.halfHeight.applyMatrix4(I),he++}else if(xe.isPointLight){const Le=y.point[ee];Le.position.setFromMatrixPosition(xe.matrixWorld),Le.position.applyMatrix4(ne),ee++}else if(xe.isHemisphereLight){const Le=y.hemi[se];Le.direction.setFromMatrixPosition(xe.matrixWorld),Le.direction.transformDirection(ne),se++}}}return{setup:D,setupView:N,state:y}}function Cy(S,e){const o=new yh(S,e),f=[],y=[];function b(){f.length=0,y.length=0}function B(Z){f.push(Z)}function I(Z){y.push(Z)}function D(Z){o.setup(f,Z)}function N(Z){o.setupView(f,Z)}return{init:b,state:{lightsArray:f,shadowsArray:y,lights:o},setupLights:D,setupLightsView:N,pushLight:B,pushShadow:I}}function Sy(S,e){let o=new WeakMap;function f(b,B=0){const I=o.get(b);let D;return I===void 0?(D=new Cy(S,e),o.set(b,[D])):B>=I.length?(D=new Cy(S,e),I.push(D)):D=I[B],D}function y(){o=new WeakMap}return{get:f,dispose:y}}class yd extends Xs{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Im,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class wy extends Xs{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const p0=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Ty=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function By(S,e,o){let f=new ch;const y=new _n,b=new _n,B=new lo,I=new yd({depthPacking:Uh}),D=new wy,N={},K=o.maxTextureSize,Z={[Pe]:Oe,[Oe]:Pe,[Ze]:Ze},q=new ai({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new _n},radius:{value:4}},vertexShader:p0,fragmentShader:Ty}),ee=q.clone();ee.defines.HORIZONTAL_PASS=1;const ie=new mi;ie.setAttribute("position",new no(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const he=new Oo(ie,q),se=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ae;let ne=this.type;this.render=function(Le,He,qe){if(se.enabled===!1||se.autoUpdate===!1&&se.needsUpdate===!1||Le.length===0)return;const et=S.getRenderTarget(),we=S.getActiveCubeFace(),We=S.getActiveMipmapLevel(),Wt=S.state;Wt.setBlending(gt),Wt.buffers.color.setClear(1,1,1,1),Wt.buffers.depth.setTest(!0),Wt.setScissorTest(!1);const Rn=ne!==st&&this.type===st,Ut=ne===st&&this.type!==st;for(let Ht=0,Jt=Le.length;Ht<Jt;Ht++){const Sn=Le[Ht],cn=Sn.shadow;if(cn===void 0){C.warn("THREE.WebGLShadowMap:",Sn,"has no shadow.");continue}if(cn.autoUpdate===!1&&cn.needsUpdate===!1)continue;y.copy(cn.mapSize);const En=cn.getFrameExtents();if(y.multiply(En),b.copy(cn.mapSize),(y.x>K||y.y>K)&&(y.x>K&&(b.x=Math.floor(K/En.x),y.x=b.x*En.x,cn.mapSize.x=b.x),y.y>K&&(b.y=Math.floor(K/En.y),y.y=b.y*En.y,cn.mapSize.y=b.y)),cn.map===null||Rn===!0||Ut===!0){const kn=this.type!==st?{minFilter:Vi,magFilter:Vi}:{};cn.map!==null&&cn.map.dispose(),cn.map=new pl(y.x,y.y,kn),cn.map.texture.name=Sn.name+".shadowMap",cn.camera.updateProjectionMatrix()}S.setRenderTarget(cn.map),S.clear();const In=cn.getViewportCount();for(let kn=0;kn<In;kn++){const wr=cn.getViewport(kn);B.set(b.x*wr.x,b.y*wr.y,b.x*wr.z,b.y*wr.w),Wt.viewport(B),cn.updateMatrices(Sn,kn),f=cn.getFrustum(),xe(He,qe,cn.camera,Sn,this.type)}cn.isPointLightShadow!==!0&&this.type===st&&be(cn,qe),cn.needsUpdate=!1}ne=this.type,se.needsUpdate=!1,S.setRenderTarget(et,we,We)};function be(Le,He){const qe=e.update(he);q.defines.VSM_SAMPLES!==Le.blurSamples&&(q.defines.VSM_SAMPLES=Le.blurSamples,ee.defines.VSM_SAMPLES=Le.blurSamples,q.needsUpdate=!0,ee.needsUpdate=!0),Le.mapPass===null&&(Le.mapPass=new pl(y.x,y.y)),q.uniforms.shadow_pass.value=Le.map.texture,q.uniforms.resolution.value=Le.mapSize,q.uniforms.radius.value=Le.radius,S.setRenderTarget(Le.mapPass),S.clear(),S.renderBufferDirect(He,null,qe,q,he,null),ee.uniforms.shadow_pass.value=Le.mapPass.texture,ee.uniforms.resolution.value=Le.mapSize,ee.uniforms.radius.value=Le.radius,S.setRenderTarget(Le.map),S.clear(),S.renderBufferDirect(He,null,qe,ee,he,null)}function fe(Le,He,qe,et){let we=null;const We=qe.isPointLight===!0?Le.customDistanceMaterial:Le.customDepthMaterial;if(We!==void 0)we=We;else if(we=qe.isPointLight===!0?D:I,S.localClippingEnabled&&He.clipShadows===!0&&Array.isArray(He.clippingPlanes)&&He.clippingPlanes.length!==0||He.displacementMap&&He.displacementScale!==0||He.alphaMap&&He.alphaTest>0||He.map&&He.alphaTest>0){const Wt=we.uuid,Rn=He.uuid;let Ut=N[Wt];Ut===void 0&&(Ut={},N[Wt]=Ut);let Ht=Ut[Rn];Ht===void 0&&(Ht=we.clone(),Ut[Rn]=Ht),we=Ht}if(we.visible=He.visible,we.wireframe=He.wireframe,et===st?we.side=He.shadowSide!==null?He.shadowSide:He.side:we.side=He.shadowSide!==null?He.shadowSide:Z[He.side],we.alphaMap=He.alphaMap,we.alphaTest=He.alphaTest,we.map=He.map,we.clipShadows=He.clipShadows,we.clippingPlanes=He.clippingPlanes,we.clipIntersection=He.clipIntersection,we.displacementMap=He.displacementMap,we.displacementScale=He.displacementScale,we.displacementBias=He.displacementBias,we.wireframeLinewidth=He.wireframeLinewidth,we.linewidth=He.linewidth,qe.isPointLight===!0&&we.isMeshDistanceMaterial===!0){const Wt=S.properties.get(we);Wt.light=qe}return we}function xe(Le,He,qe,et,we){if(Le.visible===!1)return;if(Le.layers.test(He.layers)&&(Le.isMesh||Le.isLine||Le.isPoints)&&(Le.castShadow||Le.receiveShadow&&we===st)&&(!Le.frustumCulled||f.intersectsObject(Le))){Le.modelViewMatrix.multiplyMatrices(qe.matrixWorldInverse,Le.matrixWorld);const Rn=e.update(Le),Ut=Le.material;if(Array.isArray(Ut)){const Ht=Rn.groups;for(let Jt=0,Sn=Ht.length;Jt<Sn;Jt++){const cn=Ht[Jt],En=Ut[cn.materialIndex];if(En&&En.visible){const In=fe(Le,En,et,we);S.renderBufferDirect(qe,null,Rn,In,Le,cn)}}}else if(Ut.visible){const Ht=fe(Le,Ut,et,we);S.renderBufferDirect(qe,null,Rn,Ht,Le,null)}}const Wt=Le.children;for(let Rn=0,Ut=Wt.length;Rn<Ut;Rn++)xe(Wt[Rn],He,qe,et,we)}}function e3(S,e,o){const f=o.isWebGL2;function y(){let ft=!1;const mr=new lo;let Xt=null;const sr=new lo(0,0,0,0);return{setMask:function(Mr){Xt!==Mr&&!ft&&(S.colorMask(Mr,Mr,Mr,Mr),Xt=Mr)},setLocked:function(Mr){ft=Mr},setClear:function(Mr,Ao,ds,$s,Yp){Yp===!0&&(Mr*=$s,Ao*=$s,ds*=$s),mr.set(Mr,Ao,ds,$s),sr.equals(mr)===!1&&(S.clearColor(Mr,Ao,ds,$s),sr.copy(mr))},reset:function(){ft=!1,Xt=null,sr.set(-1,0,0,0)}}}function b(){let ft=!1,mr=null,Xt=null,sr=null;return{setTest:function(Mr){Mr?kr(S.DEPTH_TEST):hi(S.DEPTH_TEST)},setMask:function(Mr){mr!==Mr&&!ft&&(S.depthMask(Mr),mr=Mr)},setFunc:function(Mr){if(Xt!==Mr){switch(Mr){case Tt:S.depthFunc(S.NEVER);break;case fn:S.depthFunc(S.ALWAYS);break;case At:S.depthFunc(S.LESS);break;case Ot:S.depthFunc(S.LEQUAL);break;case kt:S.depthFunc(S.EQUAL);break;case yn:S.depthFunc(S.GEQUAL);break;case or:S.depthFunc(S.GREATER);break;case pr:S.depthFunc(S.NOTEQUAL);break;default:S.depthFunc(S.LEQUAL)}Xt=Mr}},setLocked:function(Mr){ft=Mr},setClear:function(Mr){sr!==Mr&&(S.clearDepth(Mr),sr=Mr)},reset:function(){ft=!1,mr=null,Xt=null,sr=null}}}function B(){let ft=!1,mr=null,Xt=null,sr=null,Mr=null,Ao=null,ds=null,$s=null,Yp=null;return{setTest:function(hs){ft||(hs?kr(S.STENCIL_TEST):hi(S.STENCIL_TEST))},setMask:function(hs){mr!==hs&&!ft&&(S.stencilMask(hs),mr=hs)},setFunc:function(hs,mp,La){(Xt!==hs||sr!==mp||Mr!==La)&&(S.stencilFunc(hs,mp,La),Xt=hs,sr=mp,Mr=La)},setOp:function(hs,mp,La){(Ao!==hs||ds!==mp||$s!==La)&&(S.stencilOp(hs,mp,La),Ao=hs,ds=mp,$s=La)},setLocked:function(hs){ft=hs},setClear:function(hs){Yp!==hs&&(S.clearStencil(hs),Yp=hs)},reset:function(){ft=!1,mr=null,Xt=null,sr=null,Mr=null,Ao=null,ds=null,$s=null,Yp=null}}}const I=new y,D=new b,N=new B,K=new WeakMap,Z=new WeakMap;let q={},ee={},ie=new WeakMap,he=[],se=null,ne=!1,be=null,fe=null,xe=null,Le=null,He=null,qe=null,et=null,we=!1,We=null,Wt=null,Rn=null,Ut=null,Ht=null;const Jt=S.getParameter(S.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let Sn=!1,cn=0;const En=S.getParameter(S.VERSION);En.indexOf("WebGL")!==-1?(cn=parseFloat(/^WebGL (\d)/.exec(En)[1]),Sn=cn>=1):En.indexOf("OpenGL ES")!==-1&&(cn=parseFloat(/^OpenGL ES (\d)/.exec(En)[1]),Sn=cn>=2);let In=null,kn={};const wr=S.getParameter(S.SCISSOR_BOX),Zt=S.getParameter(S.VIEWPORT),zn=new lo().fromArray(wr),hn=new lo().fromArray(Zt);function ir(ft,mr,Xt,sr){const Mr=new Uint8Array(4),Ao=S.createTexture();S.bindTexture(ft,Ao),S.texParameteri(ft,S.TEXTURE_MIN_FILTER,S.NEAREST),S.texParameteri(ft,S.TEXTURE_MAG_FILTER,S.NEAREST);for(let ds=0;ds<Xt;ds++)f&&(ft===S.TEXTURE_3D||ft===S.TEXTURE_2D_ARRAY)?S.texImage3D(mr,0,S.RGBA,1,1,sr,0,S.RGBA,S.UNSIGNED_BYTE,Mr):S.texImage2D(mr+ds,0,S.RGBA,1,1,0,S.RGBA,S.UNSIGNED_BYTE,Mr);return Ao}const Cr={};Cr[S.TEXTURE_2D]=ir(S.TEXTURE_2D,S.TEXTURE_2D,1),Cr[S.TEXTURE_CUBE_MAP]=ir(S.TEXTURE_CUBE_MAP,S.TEXTURE_CUBE_MAP_POSITIVE_X,6),f&&(Cr[S.TEXTURE_2D_ARRAY]=ir(S.TEXTURE_2D_ARRAY,S.TEXTURE_2D_ARRAY,1,1),Cr[S.TEXTURE_3D]=ir(S.TEXTURE_3D,S.TEXTURE_3D,1,1)),I.setClear(0,0,0,1),D.setClear(1),N.setClear(0),kr(S.DEPTH_TEST),D.setFunc(Ot),wn(!1),Hr(j),kr(S.CULL_FACE),An(gt);function kr(ft){q[ft]!==!0&&(S.enable(ft),q[ft]=!0)}function hi(ft){q[ft]!==!1&&(S.disable(ft),q[ft]=!1)}function ci(ft,mr){return ee[ft]!==mr?(S.bindFramebuffer(ft,mr),ee[ft]=mr,f&&(ft===S.DRAW_FRAMEBUFFER&&(ee[S.FRAMEBUFFER]=mr),ft===S.FRAMEBUFFER&&(ee[S.DRAW_FRAMEBUFFER]=mr)),!0):!1}function Lo(ft,mr){let Xt=he,sr=!1;if(ft)if(Xt=ie.get(mr),Xt===void 0&&(Xt=[],ie.set(mr,Xt)),ft.isWebGLMultipleRenderTargets){const Mr=ft.texture;if(Xt.length!==Mr.length||Xt[0]!==S.COLOR_ATTACHMENT0){for(let Ao=0,ds=Mr.length;Ao<ds;Ao++)Xt[Ao]=S.COLOR_ATTACHMENT0+Ao;Xt.length=Mr.length,sr=!0}}else Xt[0]!==S.COLOR_ATTACHMENT0&&(Xt[0]=S.COLOR_ATTACHMENT0,sr=!0);else Xt[0]!==S.BACK&&(Xt[0]=S.BACK,sr=!0);sr&&(o.isWebGL2?S.drawBuffers(Xt):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Xt))}function bi(ft){return se!==ft?(S.useProgram(ft),se=ft,!0):!1}const tt={[Pt]:S.FUNC_ADD,[It]:S.FUNC_SUBTRACT,[xt]:S.FUNC_REVERSE_SUBTRACT};if(f)tt[ln]=S.MIN,tt[Mn]=S.MAX;else{const ft=e.get("EXT_blend_minmax");ft!==null&&(tt[ln]=ft.MIN_EXT,tt[Mn]=ft.MAX_EXT)}const qn={[Xn]:S.ZERO,[mt]:S.ONE,[rn]:S.SRC_COLOR,[On]:S.SRC_ALPHA,[St]:S.SRC_ALPHA_SATURATE,[ct]:S.DST_COLOR,[fr]:S.DST_ALPHA,[un]:S.ONE_MINUS_SRC_COLOR,[Ln]:S.ONE_MINUS_SRC_ALPHA,[nt]:S.ONE_MINUS_DST_COLOR,[_t]:S.ONE_MINUS_DST_ALPHA};function An(ft,mr,Xt,sr,Mr,Ao,ds,$s){if(ft===gt){ne===!0&&(hi(S.BLEND),ne=!1);return}if(ne===!1&&(kr(S.BLEND),ne=!0),ft!==Mt){if(ft!==be||$s!==we){if((fe!==Pt||He!==Pt)&&(S.blendEquation(S.FUNC_ADD),fe=Pt,He=Pt),$s)switch(ft){case at:S.blendFuncSeparate(S.ONE,S.ONE_MINUS_SRC_ALPHA,S.ONE,S.ONE_MINUS_SRC_ALPHA);break;case ut:S.blendFunc(S.ONE,S.ONE);break;case ot:S.blendFuncSeparate(S.ZERO,S.ONE_MINUS_SRC_COLOR,S.ZERO,S.ONE);break;case Rt:S.blendFuncSeparate(S.ZERO,S.SRC_COLOR,S.ZERO,S.SRC_ALPHA);break;default:C.error("THREE.WebGLState: Invalid blending: ",ft);break}else switch(ft){case at:S.blendFuncSeparate(S.SRC_ALPHA,S.ONE_MINUS_SRC_ALPHA,S.ONE,S.ONE_MINUS_SRC_ALPHA);break;case ut:S.blendFunc(S.SRC_ALPHA,S.ONE);break;case ot:S.blendFuncSeparate(S.ZERO,S.ONE_MINUS_SRC_COLOR,S.ZERO,S.ONE);break;case Rt:S.blendFunc(S.ZERO,S.SRC_COLOR);break;default:C.error("THREE.WebGLState: Invalid blending: ",ft);break}xe=null,Le=null,qe=null,et=null,be=ft,we=$s}return}Mr=Mr||mr,Ao=Ao||Xt,ds=ds||sr,(mr!==fe||Mr!==He)&&(S.blendEquationSeparate(tt[mr],tt[Mr]),fe=mr,He=Mr),(Xt!==xe||sr!==Le||Ao!==qe||ds!==et)&&(S.blendFuncSeparate(qn[Xt],qn[sr],qn[Ao],qn[ds]),xe=Xt,Le=sr,qe=Ao,et=ds),be=ft,we=!1}function tr(ft,mr){ft.side===Ze?hi(S.CULL_FACE):kr(S.CULL_FACE);let Xt=ft.side===Oe;mr&&(Xt=!Xt),wn(Xt),ft.blending===at&&ft.transparent===!1?An(gt):An(ft.blending,ft.blendEquation,ft.blendSrc,ft.blendDst,ft.blendEquationAlpha,ft.blendSrcAlpha,ft.blendDstAlpha,ft.premultipliedAlpha),D.setFunc(ft.depthFunc),D.setTest(ft.depthTest),D.setMask(ft.depthWrite),I.setMask(ft.colorWrite);const sr=ft.stencilWrite;N.setTest(sr),sr&&(N.setMask(ft.stencilWriteMask),N.setFunc(ft.stencilFunc,ft.stencilRef,ft.stencilFuncMask),N.setOp(ft.stencilFail,ft.stencilZFail,ft.stencilZPass)),Tr(ft.polygonOffset,ft.polygonOffsetFactor,ft.polygonOffsetUnits),ft.alphaToCoverage===!0?kr(S.SAMPLE_ALPHA_TO_COVERAGE):hi(S.SAMPLE_ALPHA_TO_COVERAGE)}function wn(ft){We!==ft&&(ft?S.frontFace(S.CW):S.frontFace(S.CCW),We=ft)}function Hr(ft){ft!==_?(kr(S.CULL_FACE),ft!==Wt&&(ft===j?S.cullFace(S.BACK):ft===$?S.cullFace(S.FRONT):S.cullFace(S.FRONT_AND_BACK))):hi(S.CULL_FACE),Wt=ft}function jn(ft){ft!==Rn&&(Sn&&S.lineWidth(ft),Rn=ft)}function Tr(ft,mr,Xt){ft?(kr(S.POLYGON_OFFSET_FILL),(Ut!==mr||Ht!==Xt)&&(S.polygonOffset(mr,Xt),Ut=mr,Ht=Xt)):hi(S.POLYGON_OFFSET_FILL)}function ri(ft){ft?kr(S.SCISSOR_TEST):hi(S.SCISSOR_TEST)}function Di(ft){ft===void 0&&(ft=S.TEXTURE0+Jt-1),In!==ft&&(S.activeTexture(ft),In=ft)}function ts(ft,mr,Xt){Xt===void 0&&(In===null?Xt=S.TEXTURE0+Jt-1:Xt=In);let sr=kn[Xt];sr===void 0&&(sr={type:void 0,texture:void 0},kn[Xt]=sr),(sr.type!==ft||sr.texture!==mr)&&(In!==Xt&&(S.activeTexture(Xt),In=Xt),S.bindTexture(ft,mr||Cr[ft]),sr.type=ft,sr.texture=mr)}function Ye(){const ft=kn[In];ft!==void 0&&ft.type!==void 0&&(S.bindTexture(ft.type,null),ft.type=void 0,ft.texture=void 0)}function Fe(){try{S.compressedTexImage2D.apply(S,arguments)}catch(ft){C.error("THREE.WebGLState:",ft)}}function an(){try{S.compressedTexImage3D.apply(S,arguments)}catch(ft){C.error("THREE.WebGLState:",ft)}}function Kn(){try{S.texSubImage2D.apply(S,arguments)}catch(ft){C.error("THREE.WebGLState:",ft)}}function Hn(){try{S.texSubImage3D.apply(S,arguments)}catch(ft){C.error("THREE.WebGLState:",ft)}}function $n(){try{S.compressedTexSubImage2D.apply(S,arguments)}catch(ft){C.error("THREE.WebGLState:",ft)}}function Wr(){try{S.compressedTexSubImage3D.apply(S,arguments)}catch(ft){C.error("THREE.WebGLState:",ft)}}function dr(){try{S.texStorage2D.apply(S,arguments)}catch(ft){C.error("THREE.WebGLState:",ft)}}function on(){try{S.texStorage3D.apply(S,arguments)}catch(ft){C.error("THREE.WebGLState:",ft)}}function ti(){try{S.texImage2D.apply(S,arguments)}catch(ft){C.error("THREE.WebGLState:",ft)}}function Vr(){try{S.texImage3D.apply(S,arguments)}catch(ft){C.error("THREE.WebGLState:",ft)}}function $r(ft){zn.equals(ft)===!1&&(S.scissor(ft.x,ft.y,ft.z,ft.w),zn.copy(ft))}function zr(ft){hn.equals(ft)===!1&&(S.viewport(ft.x,ft.y,ft.z,ft.w),hn.copy(ft))}function Gr(ft,mr){let Xt=Z.get(mr);Xt===void 0&&(Xt=new WeakMap,Z.set(mr,Xt));let sr=Xt.get(ft);sr===void 0&&(sr=S.getUniformBlockIndex(mr,ft.name),Xt.set(ft,sr))}function Ki(ft,mr){const sr=Z.get(mr).get(ft);K.get(mr)!==sr&&(S.uniformBlockBinding(mr,sr,ft.__bindingPointIndex),K.set(mr,sr))}function _o(){S.disable(S.BLEND),S.disable(S.CULL_FACE),S.disable(S.DEPTH_TEST),S.disable(S.POLYGON_OFFSET_FILL),S.disable(S.SCISSOR_TEST),S.disable(S.STENCIL_TEST),S.disable(S.SAMPLE_ALPHA_TO_COVERAGE),S.blendEquation(S.FUNC_ADD),S.blendFunc(S.ONE,S.ZERO),S.blendFuncSeparate(S.ONE,S.ZERO,S.ONE,S.ZERO),S.colorMask(!0,!0,!0,!0),S.clearColor(0,0,0,0),S.depthMask(!0),S.depthFunc(S.LESS),S.clearDepth(1),S.stencilMask(4294967295),S.stencilFunc(S.ALWAYS,0,4294967295),S.stencilOp(S.KEEP,S.KEEP,S.KEEP),S.clearStencil(0),S.cullFace(S.BACK),S.frontFace(S.CCW),S.polygonOffset(0,0),S.activeTexture(S.TEXTURE0),S.bindFramebuffer(S.FRAMEBUFFER,null),f===!0&&(S.bindFramebuffer(S.DRAW_FRAMEBUFFER,null),S.bindFramebuffer(S.READ_FRAMEBUFFER,null)),S.useProgram(null),S.lineWidth(1),S.scissor(0,0,S.canvas.width,S.canvas.height),S.viewport(0,0,S.canvas.width,S.canvas.height),q={},In=null,kn={},ee={},ie=new WeakMap,he=[],se=null,ne=!1,be=null,fe=null,xe=null,Le=null,He=null,qe=null,et=null,we=!1,We=null,Wt=null,Rn=null,Ut=null,Ht=null,zn.set(0,0,S.canvas.width,S.canvas.height),hn.set(0,0,S.canvas.width,S.canvas.height),I.reset(),D.reset(),N.reset()}return{buffers:{color:I,depth:D,stencil:N},enable:kr,disable:hi,bindFramebuffer:ci,drawBuffers:Lo,useProgram:bi,setBlending:An,setMaterial:tr,setFlipSided:wn,setCullFace:Hr,setLineWidth:jn,setPolygonOffset:Tr,setScissorTest:ri,activeTexture:Di,bindTexture:ts,unbindTexture:Ye,compressedTexImage2D:Fe,compressedTexImage3D:an,texImage2D:ti,texImage3D:Vr,updateUBOMapping:Gr,uniformBlockBinding:Ki,texStorage2D:dr,texStorage3D:on,texSubImage2D:Kn,texSubImage3D:Hn,compressedTexSubImage2D:$n,compressedTexSubImage3D:Wr,scissor:$r,viewport:zr,reset:_o}}function t3(S,e,o,f,y,b,B){const I=y.isWebGL2,D=y.maxTextures,N=y.maxCubemapSize,K=y.maxTextureSize,Z=y.maxSamples,q=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,ee=typeof navigator=="undefined"?!1:/OculusBrowser/g.test(navigator.userAgent),ie=new WeakMap;let he;const se=new WeakMap;let ne=!1;try{ne=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch(Ye){}function be(Ye,Fe){return ne?new OffscreenCanvas(Ye,Fe):xp("canvas")}function fe(Ye,Fe,an,Kn){let Hn=1;if((Ye.width>Kn||Ye.height>Kn)&&(Hn=Kn/Math.max(Ye.width,Ye.height)),Hn<1||Fe===!0)if(typeof HTMLImageElement!="undefined"&&Ye instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&Ye instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&Ye instanceof ImageBitmap){const $n=Fe?_a:Math.floor,Wr=$n(Hn*Ye.width),dr=$n(Hn*Ye.height);he===void 0&&(he=be(Wr,dr));const on=an?be(Wr,dr):he;return on.width=Wr,on.height=dr,on.getContext("2d").drawImage(Ye,0,0,Wr,dr),C.warn("THREE.WebGLRenderer: Texture has been resized from ("+Ye.width+"x"+Ye.height+") to ("+Wr+"x"+dr+")."),on}else return"data"in Ye&&C.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Ye.width+"x"+Ye.height+")."),Ye;return Ye}function xe(Ye){return Vu(Ye.width)&&Vu(Ye.height)}function Le(Ye){return I?!1:Ye.wrapS!==yo||Ye.wrapT!==yo||Ye.minFilter!==Vi&&Ye.minFilter!==ho}function He(Ye,Fe){return Ye.generateMipmaps&&Fe&&Ye.minFilter!==Vi&&Ye.minFilter!==ho}function qe(Ye){S.generateMipmap(Ye)}function et(Ye,Fe,an,Kn,Hn=!1){if(I===!1)return Fe;if(Ye!==null){if(S[Ye]!==void 0)return S[Ye];C.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Ye+"'")}let $n=Fe;return Fe===S.RED&&(an===S.FLOAT&&($n=S.R32F),an===S.HALF_FLOAT&&($n=S.R16F),an===S.UNSIGNED_BYTE&&($n=S.R8)),Fe===S.RG&&(an===S.FLOAT&&($n=S.RG32F),an===S.HALF_FLOAT&&($n=S.RG16F),an===S.UNSIGNED_BYTE&&($n=S.RG8)),Fe===S.RGBA&&(an===S.FLOAT&&($n=S.RGBA32F),an===S.HALF_FLOAT&&($n=S.RGBA16F),an===S.UNSIGNED_BYTE&&($n=Kn===Qn&&Hn===!1?S.SRGB8_ALPHA8:S.RGBA8),an===S.UNSIGNED_SHORT_4_4_4_4&&($n=S.RGBA4),an===S.UNSIGNED_SHORT_5_5_5_1&&($n=S.RGB5_A1)),($n===S.R16F||$n===S.R32F||$n===S.RG16F||$n===S.RG32F||$n===S.RGBA16F||$n===S.RGBA32F)&&e.get("EXT_color_buffer_float"),$n}function we(Ye,Fe,an){return He(Ye,an)===!0||Ye.isFramebufferTexture&&Ye.minFilter!==Vi&&Ye.minFilter!==ho?Math.log2(Math.max(Fe.width,Fe.height))+1:Ye.mipmaps!==void 0&&Ye.mipmaps.length>0?Ye.mipmaps.length:Ye.isCompressedTexture&&Array.isArray(Ye.image)?Fe.mipmaps.length:1}function We(Ye){return Ye===Vi||Ye===Gs||Ye===Ss?S.NEAREST:S.LINEAR}function Wt(Ye){const Fe=Ye.target;Fe.removeEventListener("dispose",Wt),Ut(Fe),Fe.isVideoTexture&&ie.delete(Fe)}function Rn(Ye){const Fe=Ye.target;Fe.removeEventListener("dispose",Rn),Jt(Fe)}function Ut(Ye){const Fe=f.get(Ye);if(Fe.__webglInit===void 0)return;const an=Ye.source,Kn=se.get(an);if(Kn){const Hn=Kn[Fe.__cacheKey];Hn.usedTimes--,Hn.usedTimes===0&&Ht(Ye),Object.keys(Kn).length===0&&se.delete(an)}f.remove(Ye)}function Ht(Ye){const Fe=f.get(Ye);S.deleteTexture(Fe.__webglTexture);const an=Ye.source,Kn=se.get(an);delete Kn[Fe.__cacheKey],B.memory.textures--}function Jt(Ye){const Fe=Ye.texture,an=f.get(Ye),Kn=f.get(Fe);if(Kn.__webglTexture!==void 0&&(S.deleteTexture(Kn.__webglTexture),B.memory.textures--),Ye.depthTexture&&Ye.depthTexture.dispose(),Ye.isWebGLCubeRenderTarget)for(let Hn=0;Hn<6;Hn++)S.deleteFramebuffer(an.__webglFramebuffer[Hn]),an.__webglDepthbuffer&&S.deleteRenderbuffer(an.__webglDepthbuffer[Hn]);else{if(S.deleteFramebuffer(an.__webglFramebuffer),an.__webglDepthbuffer&&S.deleteRenderbuffer(an.__webglDepthbuffer),an.__webglMultisampledFramebuffer&&S.deleteFramebuffer(an.__webglMultisampledFramebuffer),an.__webglColorRenderbuffer)for(let Hn=0;Hn<an.__webglColorRenderbuffer.length;Hn++)an.__webglColorRenderbuffer[Hn]&&S.deleteRenderbuffer(an.__webglColorRenderbuffer[Hn]);an.__webglDepthRenderbuffer&&S.deleteRenderbuffer(an.__webglDepthRenderbuffer)}if(Ye.isWebGLMultipleRenderTargets)for(let Hn=0,$n=Fe.length;Hn<$n;Hn++){const Wr=f.get(Fe[Hn]);Wr.__webglTexture&&(S.deleteTexture(Wr.__webglTexture),B.memory.textures--),f.remove(Fe[Hn])}f.remove(Fe),f.remove(Ye)}let Sn=0;function cn(){Sn=0}function En(){const Ye=Sn;return Ye>=D&&C.warn("THREE.WebGLTextures: Trying to use "+Ye+" texture units while this GPU supports only "+D),Sn+=1,Ye}function In(Ye){const Fe=[];return Fe.push(Ye.wrapS),Fe.push(Ye.wrapT),Fe.push(Ye.wrapR||0),Fe.push(Ye.magFilter),Fe.push(Ye.minFilter),Fe.push(Ye.anisotropy),Fe.push(Ye.internalFormat),Fe.push(Ye.format),Fe.push(Ye.type),Fe.push(Ye.generateMipmaps),Fe.push(Ye.premultiplyAlpha),Fe.push(Ye.flipY),Fe.push(Ye.unpackAlignment),Fe.push(Ye.colorSpace),Fe.join()}function kn(Ye,Fe){const an=f.get(Ye);if(Ye.isVideoTexture&&Di(Ye),Ye.isRenderTargetTexture===!1&&Ye.version>0&&an.__version!==Ye.version){const Kn=Ye.image;if(Kn===null)C.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Kn.complete===!1)C.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ci(an,Ye,Fe);return}}o.bindTexture(S.TEXTURE_2D,an.__webglTexture,S.TEXTURE0+Fe)}function wr(Ye,Fe){const an=f.get(Ye);if(Ye.version>0&&an.__version!==Ye.version){ci(an,Ye,Fe);return}o.bindTexture(S.TEXTURE_2D_ARRAY,an.__webglTexture,S.TEXTURE0+Fe)}function Zt(Ye,Fe){const an=f.get(Ye);if(Ye.version>0&&an.__version!==Ye.version){ci(an,Ye,Fe);return}o.bindTexture(S.TEXTURE_3D,an.__webglTexture,S.TEXTURE0+Fe)}function zn(Ye,Fe){const an=f.get(Ye);if(Ye.version>0&&an.__version!==Ye.version){Lo(an,Ye,Fe);return}o.bindTexture(S.TEXTURE_CUBE_MAP,an.__webglTexture,S.TEXTURE0+Fe)}const hn={[ss]:S.REPEAT,[yo]:S.CLAMP_TO_EDGE,[Aa]:S.MIRRORED_REPEAT},ir={[Vi]:S.NEAREST,[Gs]:S.NEAREST_MIPMAP_NEAREST,[Ss]:S.NEAREST_MIPMAP_LINEAR,[ho]:S.LINEAR,[Ca]:S.LINEAR_MIPMAP_NEAREST,[Fo]:S.LINEAR_MIPMAP_LINEAR},Cr={[ag]:S.NEVER,[Na]:S.ALWAYS,[ou]:S.LESS,[Un]:S.LEQUAL,[Om]:S.EQUAL,[Ua]:S.GEQUAL,[Cl]:S.GREATER,[to]:S.NOTEQUAL};function kr(Ye,Fe,an){if(an?(S.texParameteri(Ye,S.TEXTURE_WRAP_S,hn[Fe.wrapS]),S.texParameteri(Ye,S.TEXTURE_WRAP_T,hn[Fe.wrapT]),(Ye===S.TEXTURE_3D||Ye===S.TEXTURE_2D_ARRAY)&&S.texParameteri(Ye,S.TEXTURE_WRAP_R,hn[Fe.wrapR]),S.texParameteri(Ye,S.TEXTURE_MAG_FILTER,ir[Fe.magFilter]),S.texParameteri(Ye,S.TEXTURE_MIN_FILTER,ir[Fe.minFilter])):(S.texParameteri(Ye,S.TEXTURE_WRAP_S,S.CLAMP_TO_EDGE),S.texParameteri(Ye,S.TEXTURE_WRAP_T,S.CLAMP_TO_EDGE),(Ye===S.TEXTURE_3D||Ye===S.TEXTURE_2D_ARRAY)&&S.texParameteri(Ye,S.TEXTURE_WRAP_R,S.CLAMP_TO_EDGE),(Fe.wrapS!==yo||Fe.wrapT!==yo)&&C.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),S.texParameteri(Ye,S.TEXTURE_MAG_FILTER,We(Fe.magFilter)),S.texParameteri(Ye,S.TEXTURE_MIN_FILTER,We(Fe.minFilter)),Fe.minFilter!==Vi&&Fe.minFilter!==ho&&C.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),Fe.compareFunction&&(S.texParameteri(Ye,S.TEXTURE_COMPARE_MODE,S.COMPARE_REF_TO_TEXTURE),S.texParameteri(Ye,S.TEXTURE_COMPARE_FUNC,Cr[Fe.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const Kn=e.get("EXT_texture_filter_anisotropic");if(Fe.magFilter===Vi||Fe.minFilter!==Ss&&Fe.minFilter!==Fo||Fe.type===gs&&e.has("OES_texture_float_linear")===!1||I===!1&&Fe.type===za&&e.has("OES_texture_half_float_linear")===!1)return;(Fe.anisotropy>1||f.get(Fe).__currentAnisotropy)&&(S.texParameterf(Ye,Kn.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Fe.anisotropy,y.getMaxAnisotropy())),f.get(Fe).__currentAnisotropy=Fe.anisotropy)}}function hi(Ye,Fe){let an=!1;Ye.__webglInit===void 0&&(Ye.__webglInit=!0,Fe.addEventListener("dispose",Wt));const Kn=Fe.source;let Hn=se.get(Kn);Hn===void 0&&(Hn={},se.set(Kn,Hn));const $n=In(Fe);if($n!==Ye.__cacheKey){Hn[$n]===void 0&&(Hn[$n]={texture:S.createTexture(),usedTimes:0},B.memory.textures++,an=!0),Hn[$n].usedTimes++;const Wr=Hn[Ye.__cacheKey];Wr!==void 0&&(Hn[Ye.__cacheKey].usedTimes--,Wr.usedTimes===0&&Ht(Fe)),Ye.__cacheKey=$n,Ye.__webglTexture=Hn[$n].texture}return an}function ci(Ye,Fe,an){let Kn=S.TEXTURE_2D;(Fe.isDataArrayTexture||Fe.isCompressedArrayTexture)&&(Kn=S.TEXTURE_2D_ARRAY),Fe.isData3DTexture&&(Kn=S.TEXTURE_3D);const Hn=hi(Ye,Fe),$n=Fe.source;o.bindTexture(Kn,Ye.__webglTexture,S.TEXTURE0+an);const Wr=f.get($n);if($n.version!==Wr.__version||Hn===!0){o.activeTexture(S.TEXTURE0+an),S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,Fe.flipY),S.pixelStorei(S.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Fe.premultiplyAlpha),S.pixelStorei(S.UNPACK_ALIGNMENT,Fe.unpackAlignment),S.pixelStorei(S.UNPACK_COLORSPACE_CONVERSION_WEBGL,S.NONE);const dr=Le(Fe)&&xe(Fe.image)===!1;let on=fe(Fe.image,dr,!1,K);on=ts(Fe,on);const ti=xe(on)||I,Vr=b.convert(Fe.format,Fe.colorSpace);let $r=b.convert(Fe.type),zr=et(Fe.internalFormat,Vr,$r,Fe.colorSpace);kr(Kn,Fe,ti);let Gr;const Ki=Fe.mipmaps,_o=I&&Fe.isVideoTexture!==!0,ft=Wr.__version===void 0||Hn===!0,mr=we(Fe,on,ti);if(Fe.isDepthTexture)zr=S.DEPTH_COMPONENT,I?Fe.type===gs?zr=S.DEPTH_COMPONENT32F:Fe.type===Ns?zr=S.DEPTH_COMPONENT24:Fe.type===ol?zr=S.DEPTH24_STENCIL8:zr=S.DEPTH_COMPONENT16:Fe.type===gs&&C.error("WebGLRenderer: Floating point depth texture requires WebGL2."),Fe.format===Wn&&zr===S.DEPTH_COMPONENT&&Fe.type!==Us&&Fe.type!==Ns&&(C.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),Fe.type=Ns,$r=b.convert(Fe.type)),Fe.format===Vn&&zr===S.DEPTH_COMPONENT&&(zr=S.DEPTH_STENCIL,Fe.type!==ol&&(C.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),Fe.type=ol,$r=b.convert(Fe.type))),ft&&(_o?o.texStorage2D(S.TEXTURE_2D,1,zr,on.width,on.height):o.texImage2D(S.TEXTURE_2D,0,zr,on.width,on.height,0,Vr,$r,null));else if(Fe.isDataTexture)if(Ki.length>0&&ti){_o&&ft&&o.texStorage2D(S.TEXTURE_2D,mr,zr,Ki[0].width,Ki[0].height);for(let Xt=0,sr=Ki.length;Xt<sr;Xt++)Gr=Ki[Xt],_o?o.texSubImage2D(S.TEXTURE_2D,Xt,0,0,Gr.width,Gr.height,Vr,$r,Gr.data):o.texImage2D(S.TEXTURE_2D,Xt,zr,Gr.width,Gr.height,0,Vr,$r,Gr.data);Fe.generateMipmaps=!1}else _o?(ft&&o.texStorage2D(S.TEXTURE_2D,mr,zr,on.width,on.height),o.texSubImage2D(S.TEXTURE_2D,0,0,0,on.width,on.height,Vr,$r,on.data)):o.texImage2D(S.TEXTURE_2D,0,zr,on.width,on.height,0,Vr,$r,on.data);else if(Fe.isCompressedTexture)if(Fe.isCompressedArrayTexture){_o&&ft&&o.texStorage3D(S.TEXTURE_2D_ARRAY,mr,zr,Ki[0].width,Ki[0].height,on.depth);for(let Xt=0,sr=Ki.length;Xt<sr;Xt++)Gr=Ki[Xt],Fe.format!==Je?Vr!==null?_o?o.compressedTexSubImage3D(S.TEXTURE_2D_ARRAY,Xt,0,0,0,Gr.width,Gr.height,on.depth,Vr,Gr.data,0,0):o.compressedTexImage3D(S.TEXTURE_2D_ARRAY,Xt,zr,Gr.width,Gr.height,on.depth,0,Gr.data,0,0):C.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):_o?o.texSubImage3D(S.TEXTURE_2D_ARRAY,Xt,0,0,0,Gr.width,Gr.height,on.depth,Vr,$r,Gr.data):o.texImage3D(S.TEXTURE_2D_ARRAY,Xt,zr,Gr.width,Gr.height,on.depth,0,Vr,$r,Gr.data)}else{_o&&ft&&o.texStorage2D(S.TEXTURE_2D,mr,zr,Ki[0].width,Ki[0].height);for(let Xt=0,sr=Ki.length;Xt<sr;Xt++)Gr=Ki[Xt],Fe.format!==Je?Vr!==null?_o?o.compressedTexSubImage2D(S.TEXTURE_2D,Xt,0,0,Gr.width,Gr.height,Vr,Gr.data):o.compressedTexImage2D(S.TEXTURE_2D,Xt,zr,Gr.width,Gr.height,0,Gr.data):C.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):_o?o.texSubImage2D(S.TEXTURE_2D,Xt,0,0,Gr.width,Gr.height,Vr,$r,Gr.data):o.texImage2D(S.TEXTURE_2D,Xt,zr,Gr.width,Gr.height,0,Vr,$r,Gr.data)}else if(Fe.isDataArrayTexture)_o?(ft&&o.texStorage3D(S.TEXTURE_2D_ARRAY,mr,zr,on.width,on.height,on.depth),o.texSubImage3D(S.TEXTURE_2D_ARRAY,0,0,0,0,on.width,on.height,on.depth,Vr,$r,on.data)):o.texImage3D(S.TEXTURE_2D_ARRAY,0,zr,on.width,on.height,on.depth,0,Vr,$r,on.data);else if(Fe.isData3DTexture)_o?(ft&&o.texStorage3D(S.TEXTURE_3D,mr,zr,on.width,on.height,on.depth),o.texSubImage3D(S.TEXTURE_3D,0,0,0,0,on.width,on.height,on.depth,Vr,$r,on.data)):o.texImage3D(S.TEXTURE_3D,0,zr,on.width,on.height,on.depth,0,Vr,$r,on.data);else if(Fe.isFramebufferTexture){if(ft)if(_o)o.texStorage2D(S.TEXTURE_2D,mr,zr,on.width,on.height);else{let Xt=on.width,sr=on.height;for(let Mr=0;Mr<mr;Mr++)o.texImage2D(S.TEXTURE_2D,Mr,zr,Xt,sr,0,Vr,$r,null),Xt>>=1,sr>>=1}}else if(Ki.length>0&&ti){_o&&ft&&o.texStorage2D(S.TEXTURE_2D,mr,zr,Ki[0].width,Ki[0].height);for(let Xt=0,sr=Ki.length;Xt<sr;Xt++)Gr=Ki[Xt],_o?o.texSubImage2D(S.TEXTURE_2D,Xt,0,0,Vr,$r,Gr):o.texImage2D(S.TEXTURE_2D,Xt,zr,Vr,$r,Gr);Fe.generateMipmaps=!1}else _o?(ft&&o.texStorage2D(S.TEXTURE_2D,mr,zr,on.width,on.height),o.texSubImage2D(S.TEXTURE_2D,0,0,0,Vr,$r,on)):o.texImage2D(S.TEXTURE_2D,0,zr,Vr,$r,on);He(Fe,ti)&&qe(Kn),Wr.__version=$n.version,Fe.onUpdate&&Fe.onUpdate(Fe)}Ye.__version=Fe.version}function Lo(Ye,Fe,an){if(Fe.image.length!==6)return;const Kn=hi(Ye,Fe),Hn=Fe.source;o.bindTexture(S.TEXTURE_CUBE_MAP,Ye.__webglTexture,S.TEXTURE0+an);const $n=f.get(Hn);if(Hn.version!==$n.__version||Kn===!0){o.activeTexture(S.TEXTURE0+an),S.pixelStorei(S.UNPACK_FLIP_Y_WEBGL,Fe.flipY),S.pixelStorei(S.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Fe.premultiplyAlpha),S.pixelStorei(S.UNPACK_ALIGNMENT,Fe.unpackAlignment),S.pixelStorei(S.UNPACK_COLORSPACE_CONVERSION_WEBGL,S.NONE);const Wr=Fe.isCompressedTexture||Fe.image[0].isCompressedTexture,dr=Fe.image[0]&&Fe.image[0].isDataTexture,on=[];for(let Xt=0;Xt<6;Xt++)!Wr&&!dr?on[Xt]=fe(Fe.image[Xt],!1,!0,N):on[Xt]=dr?Fe.image[Xt].image:Fe.image[Xt],on[Xt]=ts(Fe,on[Xt]);const ti=on[0],Vr=xe(ti)||I,$r=b.convert(Fe.format,Fe.colorSpace),zr=b.convert(Fe.type),Gr=et(Fe.internalFormat,$r,zr,Fe.colorSpace),Ki=I&&Fe.isVideoTexture!==!0,_o=$n.__version===void 0||Kn===!0;let ft=we(Fe,ti,Vr);kr(S.TEXTURE_CUBE_MAP,Fe,Vr);let mr;if(Wr){Ki&&_o&&o.texStorage2D(S.TEXTURE_CUBE_MAP,ft,Gr,ti.width,ti.height);for(let Xt=0;Xt<6;Xt++){mr=on[Xt].mipmaps;for(let sr=0;sr<mr.length;sr++){const Mr=mr[sr];Fe.format!==Je?$r!==null?Ki?o.compressedTexSubImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,sr,0,0,Mr.width,Mr.height,$r,Mr.data):o.compressedTexImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,sr,Gr,Mr.width,Mr.height,0,Mr.data):C.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ki?o.texSubImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,sr,0,0,Mr.width,Mr.height,$r,zr,Mr.data):o.texImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,sr,Gr,Mr.width,Mr.height,0,$r,zr,Mr.data)}}}else{mr=Fe.mipmaps,Ki&&_o&&(mr.length>0&&ft++,o.texStorage2D(S.TEXTURE_CUBE_MAP,ft,Gr,on[0].width,on[0].height));for(let Xt=0;Xt<6;Xt++)if(dr){Ki?o.texSubImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,0,0,0,on[Xt].width,on[Xt].height,$r,zr,on[Xt].data):o.texImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,0,Gr,on[Xt].width,on[Xt].height,0,$r,zr,on[Xt].data);for(let sr=0;sr<mr.length;sr++){const Ao=mr[sr].image[Xt].image;Ki?o.texSubImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,sr+1,0,0,Ao.width,Ao.height,$r,zr,Ao.data):o.texImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,sr+1,Gr,Ao.width,Ao.height,0,$r,zr,Ao.data)}}else{Ki?o.texSubImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,0,0,0,$r,zr,on[Xt]):o.texImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,0,Gr,$r,zr,on[Xt]);for(let sr=0;sr<mr.length;sr++){const Mr=mr[sr];Ki?o.texSubImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,sr+1,0,0,$r,zr,Mr.image[Xt]):o.texImage2D(S.TEXTURE_CUBE_MAP_POSITIVE_X+Xt,sr+1,Gr,$r,zr,Mr.image[Xt])}}}He(Fe,Vr)&&qe(S.TEXTURE_CUBE_MAP),$n.__version=Hn.version,Fe.onUpdate&&Fe.onUpdate(Fe)}Ye.__version=Fe.version}function bi(Ye,Fe,an,Kn,Hn){const $n=b.convert(an.format,an.colorSpace),Wr=b.convert(an.type),dr=et(an.internalFormat,$n,Wr,an.colorSpace);f.get(Fe).__hasExternalTextures||(Hn===S.TEXTURE_3D||Hn===S.TEXTURE_2D_ARRAY?o.texImage3D(Hn,0,dr,Fe.width,Fe.height,Fe.depth,0,$n,Wr,null):o.texImage2D(Hn,0,dr,Fe.width,Fe.height,0,$n,Wr,null)),o.bindFramebuffer(S.FRAMEBUFFER,Ye),ri(Fe)?q.framebufferTexture2DMultisampleEXT(S.FRAMEBUFFER,Kn,Hn,f.get(an).__webglTexture,0,Tr(Fe)):(Hn===S.TEXTURE_2D||Hn>=S.TEXTURE_CUBE_MAP_POSITIVE_X&&Hn<=S.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&S.framebufferTexture2D(S.FRAMEBUFFER,Kn,Hn,f.get(an).__webglTexture,0),o.bindFramebuffer(S.FRAMEBUFFER,null)}function tt(Ye,Fe,an){if(S.bindRenderbuffer(S.RENDERBUFFER,Ye),Fe.depthBuffer&&!Fe.stencilBuffer){let Kn=S.DEPTH_COMPONENT16;if(an||ri(Fe)){const Hn=Fe.depthTexture;Hn&&Hn.isDepthTexture&&(Hn.type===gs?Kn=S.DEPTH_COMPONENT32F:Hn.type===Ns&&(Kn=S.DEPTH_COMPONENT24));const $n=Tr(Fe);ri(Fe)?q.renderbufferStorageMultisampleEXT(S.RENDERBUFFER,$n,Kn,Fe.width,Fe.height):S.renderbufferStorageMultisample(S.RENDERBUFFER,$n,Kn,Fe.width,Fe.height)}else S.renderbufferStorage(S.RENDERBUFFER,Kn,Fe.width,Fe.height);S.framebufferRenderbuffer(S.FRAMEBUFFER,S.DEPTH_ATTACHMENT,S.RENDERBUFFER,Ye)}else if(Fe.depthBuffer&&Fe.stencilBuffer){const Kn=Tr(Fe);an&&ri(Fe)===!1?S.renderbufferStorageMultisample(S.RENDERBUFFER,Kn,S.DEPTH24_STENCIL8,Fe.width,Fe.height):ri(Fe)?q.renderbufferStorageMultisampleEXT(S.RENDERBUFFER,Kn,S.DEPTH24_STENCIL8,Fe.width,Fe.height):S.renderbufferStorage(S.RENDERBUFFER,S.DEPTH_STENCIL,Fe.width,Fe.height),S.framebufferRenderbuffer(S.FRAMEBUFFER,S.DEPTH_STENCIL_ATTACHMENT,S.RENDERBUFFER,Ye)}else{const Kn=Fe.isWebGLMultipleRenderTargets===!0?Fe.texture:[Fe.texture];for(let Hn=0;Hn<Kn.length;Hn++){const $n=Kn[Hn],Wr=b.convert($n.format,$n.colorSpace),dr=b.convert($n.type),on=et($n.internalFormat,Wr,dr,$n.colorSpace),ti=Tr(Fe);an&&ri(Fe)===!1?S.renderbufferStorageMultisample(S.RENDERBUFFER,ti,on,Fe.width,Fe.height):ri(Fe)?q.renderbufferStorageMultisampleEXT(S.RENDERBUFFER,ti,on,Fe.width,Fe.height):S.renderbufferStorage(S.RENDERBUFFER,on,Fe.width,Fe.height)}}S.bindRenderbuffer(S.RENDERBUFFER,null)}function qn(Ye,Fe){if(Fe&&Fe.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(o.bindFramebuffer(S.FRAMEBUFFER,Ye),!(Fe.depthTexture&&Fe.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!f.get(Fe.depthTexture).__webglTexture||Fe.depthTexture.image.width!==Fe.width||Fe.depthTexture.image.height!==Fe.height)&&(Fe.depthTexture.image.width=Fe.width,Fe.depthTexture.image.height=Fe.height,Fe.depthTexture.needsUpdate=!0),kn(Fe.depthTexture,0);const Kn=f.get(Fe.depthTexture).__webglTexture,Hn=Tr(Fe);if(Fe.depthTexture.format===Wn)ri(Fe)?q.framebufferTexture2DMultisampleEXT(S.FRAMEBUFFER,S.DEPTH_ATTACHMENT,S.TEXTURE_2D,Kn,0,Hn):S.framebufferTexture2D(S.FRAMEBUFFER,S.DEPTH_ATTACHMENT,S.TEXTURE_2D,Kn,0);else if(Fe.depthTexture.format===Vn)ri(Fe)?q.framebufferTexture2DMultisampleEXT(S.FRAMEBUFFER,S.DEPTH_STENCIL_ATTACHMENT,S.TEXTURE_2D,Kn,0,Hn):S.framebufferTexture2D(S.FRAMEBUFFER,S.DEPTH_STENCIL_ATTACHMENT,S.TEXTURE_2D,Kn,0);else throw new Error("Unknown depthTexture format")}function An(Ye){const Fe=f.get(Ye),an=Ye.isWebGLCubeRenderTarget===!0;if(Ye.depthTexture&&!Fe.__autoAllocateDepthBuffer){if(an)throw new Error("target.depthTexture not supported in Cube render targets");qn(Fe.__webglFramebuffer,Ye)}else if(an){Fe.__webglDepthbuffer=[];for(let Kn=0;Kn<6;Kn++)o.bindFramebuffer(S.FRAMEBUFFER,Fe.__webglFramebuffer[Kn]),Fe.__webglDepthbuffer[Kn]=S.createRenderbuffer(),tt(Fe.__webglDepthbuffer[Kn],Ye,!1)}else o.bindFramebuffer(S.FRAMEBUFFER,Fe.__webglFramebuffer),Fe.__webglDepthbuffer=S.createRenderbuffer(),tt(Fe.__webglDepthbuffer,Ye,!1);o.bindFramebuffer(S.FRAMEBUFFER,null)}function tr(Ye,Fe,an){const Kn=f.get(Ye);Fe!==void 0&&bi(Kn.__webglFramebuffer,Ye,Ye.texture,S.COLOR_ATTACHMENT0,S.TEXTURE_2D),an!==void 0&&An(Ye)}function wn(Ye){const Fe=Ye.texture,an=f.get(Ye),Kn=f.get(Fe);Ye.addEventListener("dispose",Rn),Ye.isWebGLMultipleRenderTargets!==!0&&(Kn.__webglTexture===void 0&&(Kn.__webglTexture=S.createTexture()),Kn.__version=Fe.version,B.memory.textures++);const Hn=Ye.isWebGLCubeRenderTarget===!0,$n=Ye.isWebGLMultipleRenderTargets===!0,Wr=xe(Ye)||I;if(Hn){an.__webglFramebuffer=[];for(let dr=0;dr<6;dr++)an.__webglFramebuffer[dr]=S.createFramebuffer()}else{if(an.__webglFramebuffer=S.createFramebuffer(),$n)if(y.drawBuffers){const dr=Ye.texture;for(let on=0,ti=dr.length;on<ti;on++){const Vr=f.get(dr[on]);Vr.__webglTexture===void 0&&(Vr.__webglTexture=S.createTexture(),B.memory.textures++)}}else C.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(I&&Ye.samples>0&&ri(Ye)===!1){const dr=$n?Fe:[Fe];an.__webglMultisampledFramebuffer=S.createFramebuffer(),an.__webglColorRenderbuffer=[],o.bindFramebuffer(S.FRAMEBUFFER,an.__webglMultisampledFramebuffer);for(let on=0;on<dr.length;on++){const ti=dr[on];an.__webglColorRenderbuffer[on]=S.createRenderbuffer(),S.bindRenderbuffer(S.RENDERBUFFER,an.__webglColorRenderbuffer[on]);const Vr=b.convert(ti.format,ti.colorSpace),$r=b.convert(ti.type),zr=et(ti.internalFormat,Vr,$r,ti.colorSpace,Ye.isXRRenderTarget===!0),Gr=Tr(Ye);S.renderbufferStorageMultisample(S.RENDERBUFFER,Gr,zr,Ye.width,Ye.height),S.framebufferRenderbuffer(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0+on,S.RENDERBUFFER,an.__webglColorRenderbuffer[on])}S.bindRenderbuffer(S.RENDERBUFFER,null),Ye.depthBuffer&&(an.__webglDepthRenderbuffer=S.createRenderbuffer(),tt(an.__webglDepthRenderbuffer,Ye,!0)),o.bindFramebuffer(S.FRAMEBUFFER,null)}}if(Hn){o.bindTexture(S.TEXTURE_CUBE_MAP,Kn.__webglTexture),kr(S.TEXTURE_CUBE_MAP,Fe,Wr);for(let dr=0;dr<6;dr++)bi(an.__webglFramebuffer[dr],Ye,Fe,S.COLOR_ATTACHMENT0,S.TEXTURE_CUBE_MAP_POSITIVE_X+dr);He(Fe,Wr)&&qe(S.TEXTURE_CUBE_MAP),o.unbindTexture()}else if($n){const dr=Ye.texture;for(let on=0,ti=dr.length;on<ti;on++){const Vr=dr[on],$r=f.get(Vr);o.bindTexture(S.TEXTURE_2D,$r.__webglTexture),kr(S.TEXTURE_2D,Vr,Wr),bi(an.__webglFramebuffer,Ye,Vr,S.COLOR_ATTACHMENT0+on,S.TEXTURE_2D),He(Vr,Wr)&&qe(S.TEXTURE_2D)}o.unbindTexture()}else{let dr=S.TEXTURE_2D;(Ye.isWebGL3DRenderTarget||Ye.isWebGLArrayRenderTarget)&&(I?dr=Ye.isWebGL3DRenderTarget?S.TEXTURE_3D:S.TEXTURE_2D_ARRAY:C.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),o.bindTexture(dr,Kn.__webglTexture),kr(dr,Fe,Wr),bi(an.__webglFramebuffer,Ye,Fe,S.COLOR_ATTACHMENT0,dr),He(Fe,Wr)&&qe(dr),o.unbindTexture()}Ye.depthBuffer&&An(Ye)}function Hr(Ye){const Fe=xe(Ye)||I,an=Ye.isWebGLMultipleRenderTargets===!0?Ye.texture:[Ye.texture];for(let Kn=0,Hn=an.length;Kn<Hn;Kn++){const $n=an[Kn];if(He($n,Fe)){const Wr=Ye.isWebGLCubeRenderTarget?S.TEXTURE_CUBE_MAP:S.TEXTURE_2D,dr=f.get($n).__webglTexture;o.bindTexture(Wr,dr),qe(Wr),o.unbindTexture()}}}function jn(Ye){if(I&&Ye.samples>0&&ri(Ye)===!1){const Fe=Ye.isWebGLMultipleRenderTargets?Ye.texture:[Ye.texture],an=Ye.width,Kn=Ye.height;let Hn=S.COLOR_BUFFER_BIT;const $n=[],Wr=Ye.stencilBuffer?S.DEPTH_STENCIL_ATTACHMENT:S.DEPTH_ATTACHMENT,dr=f.get(Ye),on=Ye.isWebGLMultipleRenderTargets===!0;if(on)for(let ti=0;ti<Fe.length;ti++)o.bindFramebuffer(S.FRAMEBUFFER,dr.__webglMultisampledFramebuffer),S.framebufferRenderbuffer(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0+ti,S.RENDERBUFFER,null),o.bindFramebuffer(S.FRAMEBUFFER,dr.__webglFramebuffer),S.framebufferTexture2D(S.DRAW_FRAMEBUFFER,S.COLOR_ATTACHMENT0+ti,S.TEXTURE_2D,null,0);o.bindFramebuffer(S.READ_FRAMEBUFFER,dr.__webglMultisampledFramebuffer),o.bindFramebuffer(S.DRAW_FRAMEBUFFER,dr.__webglFramebuffer);for(let ti=0;ti<Fe.length;ti++){$n.push(S.COLOR_ATTACHMENT0+ti),Ye.depthBuffer&&$n.push(Wr);const Vr=dr.__ignoreDepthValues!==void 0?dr.__ignoreDepthValues:!1;if(Vr===!1&&(Ye.depthBuffer&&(Hn|=S.DEPTH_BUFFER_BIT),Ye.stencilBuffer&&(Hn|=S.STENCIL_BUFFER_BIT)),on&&S.framebufferRenderbuffer(S.READ_FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.RENDERBUFFER,dr.__webglColorRenderbuffer[ti]),Vr===!0&&(S.invalidateFramebuffer(S.READ_FRAMEBUFFER,[Wr]),S.invalidateFramebuffer(S.DRAW_FRAMEBUFFER,[Wr])),on){const $r=f.get(Fe[ti]).__webglTexture;S.framebufferTexture2D(S.DRAW_FRAMEBUFFER,S.COLOR_ATTACHMENT0,S.TEXTURE_2D,$r,0)}S.blitFramebuffer(0,0,an,Kn,0,0,an,Kn,Hn,S.NEAREST),ee&&S.invalidateFramebuffer(S.READ_FRAMEBUFFER,$n)}if(o.bindFramebuffer(S.READ_FRAMEBUFFER,null),o.bindFramebuffer(S.DRAW_FRAMEBUFFER,null),on)for(let ti=0;ti<Fe.length;ti++){o.bindFramebuffer(S.FRAMEBUFFER,dr.__webglMultisampledFramebuffer),S.framebufferRenderbuffer(S.FRAMEBUFFER,S.COLOR_ATTACHMENT0+ti,S.RENDERBUFFER,dr.__webglColorRenderbuffer[ti]);const Vr=f.get(Fe[ti]).__webglTexture;o.bindFramebuffer(S.FRAMEBUFFER,dr.__webglFramebuffer),S.framebufferTexture2D(S.DRAW_FRAMEBUFFER,S.COLOR_ATTACHMENT0+ti,S.TEXTURE_2D,Vr,0)}o.bindFramebuffer(S.DRAW_FRAMEBUFFER,dr.__webglMultisampledFramebuffer)}}function Tr(Ye){return Math.min(Z,Ye.samples)}function ri(Ye){const Fe=f.get(Ye);return I&&Ye.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Fe.__useRenderToTexture!==!1}function Di(Ye){const Fe=B.render.frame;ie.get(Ye)!==Fe&&(ie.set(Ye,Fe),Ye.update())}function ts(Ye,Fe){const an=Ye.colorSpace,Kn=Ye.format,Hn=Ye.type;return Ye.isCompressedTexture===!0||Ye.format===As||an!==al&&an!==Ml&&(an===Qn?I===!1?e.has("EXT_sRGB")===!0&&Kn===Je?(Ye.format=As,Ye.minFilter=ho,Ye.generateMipmaps=!1):Fe=wp.sRGBToLinear(Fe):(Kn!==Je||Hn!==Mo)&&C.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):C.error("THREE.WebGLTextures: Unsupported texture color space:",an)),Fe}this.allocateTextureUnit=En,this.resetTextureUnits=cn,this.setTexture2D=kn,this.setTexture2DArray=wr,this.setTexture3D=Zt,this.setTextureCube=zn,this.rebindTextures=tr,this.setupRenderTarget=wn,this.updateRenderTargetMipmap=Hr,this.updateMultisampleRenderTarget=jn,this.setupDepthRenderbuffer=An,this.setupFrameBufferTexture=bi,this.useMultisampledRTT=ri}function w1(S,e,o){const f=o.isWebGL2;function y(b,B=Ml){let I;if(b===Mo)return S.UNSIGNED_BYTE;if(b===ya)return S.UNSIGNED_SHORT_4_4_4_4;if(b===_p)return S.UNSIGNED_SHORT_5_5_5_1;if(b===ta)return S.BYTE;if(b===bl)return S.SHORT;if(b===Us)return S.UNSIGNED_SHORT;if(b===na)return S.INT;if(b===Ns)return S.UNSIGNED_INT;if(b===gs)return S.FLOAT;if(b===za)return f?S.HALF_FLOAT:(I=e.get("OES_texture_half_float"),I!==null?I.HALF_FLOAT_OES:null);if(b===Ep)return S.ALPHA;if(b===Je)return S.RGBA;if(b===bt)return S.LUMINANCE;if(b===dn)return S.LUMINANCE_ALPHA;if(b===Wn)return S.DEPTH_COMPONENT;if(b===Vn)return S.DEPTH_STENCIL;if(b===As)return I=e.get("EXT_sRGB"),I!==null?I.SRGB_ALPHA_EXT:null;if(b===gr)return S.RED;if(b===Xr)return S.RED_INTEGER;if(b===Ar)return S.RG;if(b===Bn)return S.RG_INTEGER;if(b===Sr)return S.RGBA_INTEGER;if(b===wt||b===Vt||b===gn||b===vn)if(B===Qn)if(I=e.get("WEBGL_compressed_texture_s3tc_srgb"),I!==null){if(b===wt)return I.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(b===Vt)return I.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(b===gn)return I.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(b===vn)return I.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(I=e.get("WEBGL_compressed_texture_s3tc"),I!==null){if(b===wt)return I.COMPRESSED_RGB_S3TC_DXT1_EXT;if(b===Vt)return I.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(b===gn)return I.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(b===vn)return I.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(b===Pn||b===Kr||b===yr||b===Se)if(I=e.get("WEBGL_compressed_texture_pvrtc"),I!==null){if(b===Pn)return I.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(b===Kr)return I.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(b===yr)return I.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(b===Se)return I.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(b===Ke)return I=e.get("WEBGL_compressed_texture_etc1"),I!==null?I.COMPRESSED_RGB_ETC1_WEBGL:null;if(b===yt||b===mn)if(I=e.get("WEBGL_compressed_texture_etc"),I!==null){if(b===yt)return B===Qn?I.COMPRESSED_SRGB8_ETC2:I.COMPRESSED_RGB8_ETC2;if(b===mn)return B===Qn?I.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:I.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(b===vr||b===Br||b===si||b===Ui||b===Uo||b===xo||b===Rr||b===Xi||b===ms||b===fo||b===ao||b===sl||b===qo||b===Ts)if(I=e.get("WEBGL_compressed_texture_astc"),I!==null){if(b===vr)return B===Qn?I.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:I.COMPRESSED_RGBA_ASTC_4x4_KHR;if(b===Br)return B===Qn?I.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:I.COMPRESSED_RGBA_ASTC_5x4_KHR;if(b===si)return B===Qn?I.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:I.COMPRESSED_RGBA_ASTC_5x5_KHR;if(b===Ui)return B===Qn?I.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:I.COMPRESSED_RGBA_ASTC_6x5_KHR;if(b===Uo)return B===Qn?I.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:I.COMPRESSED_RGBA_ASTC_6x6_KHR;if(b===xo)return B===Qn?I.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:I.COMPRESSED_RGBA_ASTC_8x5_KHR;if(b===Rr)return B===Qn?I.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:I.COMPRESSED_RGBA_ASTC_8x6_KHR;if(b===Xi)return B===Qn?I.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:I.COMPRESSED_RGBA_ASTC_8x8_KHR;if(b===ms)return B===Qn?I.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:I.COMPRESSED_RGBA_ASTC_10x5_KHR;if(b===fo)return B===Qn?I.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:I.COMPRESSED_RGBA_ASTC_10x6_KHR;if(b===ao)return B===Qn?I.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:I.COMPRESSED_RGBA_ASTC_10x8_KHR;if(b===sl)return B===Qn?I.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:I.COMPRESSED_RGBA_ASTC_10x10_KHR;if(b===qo)return B===Qn?I.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:I.COMPRESSED_RGBA_ASTC_12x10_KHR;if(b===Ts)return B===Qn?I.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:I.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(b===ac)if(I=e.get("EXT_texture_compression_bptc"),I!==null){if(b===ac)return B===Qn?I.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:I.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(b===Ga||b===js||b===as||b===Sa)if(I=e.get("EXT_texture_compression_rgtc"),I!==null){if(b===ac)return I.COMPRESSED_RED_RGTC1_EXT;if(b===js)return I.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(b===as)return I.COMPRESSED_RED_GREEN_RGTC2_EXT;if(b===Sa)return I.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return b===ol?f?S.UNSIGNED_INT_24_8:(I=e.get("WEBGL_depth_texture"),I!==null?I.UNSIGNED_INT_24_8_WEBGL:null):S[b]!==void 0?S[b]:null}return{convert:y}}class jg extends Ji{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Ef extends Yi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Ry={type:"move"};class Iy{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Ef,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Ef,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new je,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new je),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Ef,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new je,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new je),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const o=this._hand;if(o)for(const f of e.hand.values())this._getHandJoint(o,f)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,o,f){let y=null,b=null,B=null;const I=this._targetRay,D=this._grip,N=this._hand;if(e&&o.session.visibilityState!=="visible-blurred"){if(N&&e.hand){B=!0;for(const he of e.hand.values()){const se=o.getJointPose(he,f),ne=this._getHandJoint(N,he);se!==null&&(ne.matrix.fromArray(se.transform.matrix),ne.matrix.decompose(ne.position,ne.rotation,ne.scale),ne.matrixWorldNeedsUpdate=!0,ne.jointRadius=se.radius),ne.visible=se!==null}const K=N.joints["index-finger-tip"],Z=N.joints["thumb-tip"],q=K.position.distanceTo(Z.position),ee=.02,ie=.005;N.inputState.pinching&&q>ee+ie?(N.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!N.inputState.pinching&&q<=ee-ie&&(N.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else D!==null&&e.gripSpace&&(b=o.getPose(e.gripSpace,f),b!==null&&(D.matrix.fromArray(b.transform.matrix),D.matrix.decompose(D.position,D.rotation,D.scale),D.matrixWorldNeedsUpdate=!0,b.linearVelocity?(D.hasLinearVelocity=!0,D.linearVelocity.copy(b.linearVelocity)):D.hasLinearVelocity=!1,b.angularVelocity?(D.hasAngularVelocity=!0,D.angularVelocity.copy(b.angularVelocity)):D.hasAngularVelocity=!1));I!==null&&(y=o.getPose(e.targetRaySpace,f),y===null&&b!==null&&(y=b),y!==null&&(I.matrix.fromArray(y.transform.matrix),I.matrix.decompose(I.position,I.rotation,I.scale),I.matrixWorldNeedsUpdate=!0,y.linearVelocity?(I.hasLinearVelocity=!0,I.linearVelocity.copy(y.linearVelocity)):I.hasLinearVelocity=!1,y.angularVelocity?(I.hasAngularVelocity=!0,I.angularVelocity.copy(y.angularVelocity)):I.hasAngularVelocity=!1,this.dispatchEvent(Ry)))}return I!==null&&(I.visible=y!==null),D!==null&&(D.visible=b!==null),N!==null&&(N.visible=B!==null),this}_getHandJoint(e,o){if(e.joints[o.jointName]===void 0){const f=new Ef;f.matrixAutoUpdate=!1,f.visible=!1,e.joints[o.jointName]=f,e.add(f)}return e.joints[o.jointName]}}class Fy extends ps{constructor(e,o,f,y,b,B,I,D,N,K){if(K=K!==void 0?K:Wn,K!==Wn&&K!==Vn)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");f===void 0&&K===Wn&&(f=Ns),f===void 0&&K===Vn&&(f=ol),super(null,y,b,B,I,D,K,f,N),this.isDepthTexture=!0,this.image={width:e,height:o},this.magFilter=I!==void 0?I:Vi,this.minFilter=D!==void 0?D:Vi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const o=super.toJSON(e);return this.compareFunction!==null&&(o.compareFunction=this.compareFunction),o}}class Db extends wa{constructor(e,o){super();const f=this;let y=null,b=1,B=null,I="local-floor",D=1,N=null,K=null,Z=null,q=null,ee=null,ie=null;const he=o.getContextAttributes();let se=null,ne=null;const be=[],fe=[];let xe=null;const Le=new Ji;Le.layers.enable(1),Le.viewport=new lo;const He=new Ji;He.layers.enable(2),He.viewport=new lo;const qe=[Le,He],et=new jg;et.layers.enable(1),et.layers.enable(2);let we=null,We=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getCamera=function(){},this.setUserCamera=function(Zt){xe=Zt},this.getController=function(Zt){let zn=be[Zt];return zn===void 0&&(zn=new Iy,be[Zt]=zn),zn.getTargetRaySpace()},this.getControllerGrip=function(Zt){let zn=be[Zt];return zn===void 0&&(zn=new Iy,be[Zt]=zn),zn.getGripSpace()},this.getHand=function(Zt){let zn=be[Zt];return zn===void 0&&(zn=new Iy,be[Zt]=zn),zn.getHandSpace()};function Wt(Zt){const zn=fe.indexOf(Zt.inputSource);if(zn===-1)return;const hn=be[zn];hn!==void 0&&(hn.update(Zt.inputSource,Zt.frame,N||B),hn.dispatchEvent({type:Zt.type,data:Zt.inputSource}))}function Rn(){y.removeEventListener("select",Wt),y.removeEventListener("selectstart",Wt),y.removeEventListener("selectend",Wt),y.removeEventListener("squeeze",Wt),y.removeEventListener("squeezestart",Wt),y.removeEventListener("squeezeend",Wt),y.removeEventListener("end",Rn),y.removeEventListener("inputsourceschange",Ut);for(let Zt=0;Zt<be.length;Zt++){const zn=fe[Zt];zn!==null&&(fe[Zt]=null,be[Zt].disconnect(zn))}we=null,We=null,e.setRenderTarget(se),ee=null,q=null,Z=null,y=null,ne=null,wr.stop(),f.isPresenting=!1,f.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Zt){b=Zt,f.isPresenting===!0&&C.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Zt){I=Zt,f.isPresenting===!0&&C.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return N||B},this.setReferenceSpace=function(Zt){N=Zt},this.getBaseLayer=function(){return q!==null?q:ee},this.getBinding=function(){return Z},this.getFrame=function(){return ie},this.getSession=function(){return y},this.setSession=function(Zt){return fs(this,null,function*(){if(y=Zt,y!==null){if(se=e.getRenderTarget(),y.addEventListener("select",Wt),y.addEventListener("selectstart",Wt),y.addEventListener("selectend",Wt),y.addEventListener("squeeze",Wt),y.addEventListener("squeezestart",Wt),y.addEventListener("squeezeend",Wt),y.addEventListener("end",Rn),y.addEventListener("inputsourceschange",Ut),he.xrCompatible!==!0&&(yield o.makeXRCompatible()),y.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const zn={antialias:y.renderState.layers===void 0?he.antialias:!0,alpha:!0,depth:he.depth,stencil:he.stencil,framebufferScaleFactor:b};ee=new XRWebGLLayer(y,o,zn),y.updateRenderState({baseLayer:ee}),ne=new pl(ee.framebufferWidth,ee.framebufferHeight,{format:Je,type:Mo,colorSpace:e.outputColorSpace,stencilBuffer:he.stencil})}else{let zn=null,hn=null,ir=null;he.depth&&(ir=he.stencil?o.DEPTH24_STENCIL8:o.DEPTH_COMPONENT24,zn=he.stencil?Vn:Wn,hn=he.stencil?ol:Ns);const Cr={colorFormat:o.RGBA8,depthFormat:ir,scaleFactor:b};Z=new XRWebGLBinding(y,o),q=Z.createProjectionLayer(Cr),y.updateRenderState({layers:[q]}),ne=new pl(q.textureWidth,q.textureHeight,{format:Je,type:Mo,depthTexture:new Fy(q.textureWidth,q.textureHeight,hn,void 0,void 0,void 0,void 0,void 0,void 0,zn),stencilBuffer:he.stencil,colorSpace:e.outputColorSpace,samples:he.antialias?4:0});const kr=e.properties.get(ne);kr.__ignoreDepthValues=q.ignoreDepthValues}ne.isXRRenderTarget=!0,this.setFoveation(D),N=null,B=yield y.requestReferenceSpace(I),wr.setContext(y),wr.start(),f.isPresenting=!0,f.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(y!==null)return y.environmentBlendMode};function Ut(Zt){for(let zn=0;zn<Zt.removed.length;zn++){const hn=Zt.removed[zn],ir=fe.indexOf(hn);ir>=0&&(fe[ir]=null,be[ir].disconnect(hn))}for(let zn=0;zn<Zt.added.length;zn++){const hn=Zt.added[zn];let ir=fe.indexOf(hn);if(ir===-1){for(let kr=0;kr<be.length;kr++)if(kr>=fe.length){fe.push(hn),ir=kr;break}else if(fe[kr]===null){fe[kr]=hn,ir=kr;break}if(ir===-1)break}const Cr=be[ir];Cr&&Cr.connect(hn)}}const Ht=new je,Jt=new je;function Sn(Zt,zn,hn){Ht.setFromMatrixPosition(zn.matrixWorld),Jt.setFromMatrixPosition(hn.matrixWorld);const ir=Ht.distanceTo(Jt),Cr=zn.projectionMatrix.elements,kr=hn.projectionMatrix.elements,hi=Cr[14]/(Cr[10]-1),ci=Cr[14]/(Cr[10]+1),Lo=(Cr[9]+1)/Cr[5],bi=(Cr[9]-1)/Cr[5],tt=(Cr[8]-1)/Cr[0],qn=(kr[8]+1)/kr[0],An=hi*tt,tr=hi*qn,wn=ir/(-tt+qn),Hr=wn*-tt;zn.matrixWorld.decompose(Zt.position,Zt.quaternion,Zt.scale),Zt.translateX(Hr),Zt.translateZ(wn),Zt.matrixWorld.compose(Zt.position,Zt.quaternion,Zt.scale),Zt.matrixWorldInverse.copy(Zt.matrixWorld).invert();const jn=hi+wn,Tr=ci+wn,ri=An-Hr,Di=tr+(ir-Hr),ts=Lo*ci/Tr*jn,Ye=bi*ci/Tr*jn;Zt.projectionMatrix.makePerspective(ri,Di,ts,Ye,jn,Tr),Zt.projectionMatrixInverse.copy(Zt.projectionMatrix).invert()}function cn(Zt,zn){zn===null?Zt.matrixWorld.copy(Zt.matrix):Zt.matrixWorld.multiplyMatrices(zn.matrixWorld,Zt.matrix),Zt.matrixWorldInverse.copy(Zt.matrixWorld).invert()}this.updateCameraXR=function(Zt){if(y===null)return Zt;xe&&(Zt=xe),et.near=He.near=Le.near=Zt.near,et.far=He.far=Le.far=Zt.far,(we!==et.near||We!==et.far)&&(y.updateRenderState({depthNear:et.near,depthFar:et.far}),we=et.near,We=et.far);const zn=Zt.parent,hn=et.cameras;cn(et,zn);for(let ir=0;ir<hn.length;ir++)cn(hn[ir],zn);return hn.length===2?Sn(et,Le,He):et.projectionMatrix.copy(Le.projectionMatrix),xe&&En(et,zn),et};function En(Zt,zn){const hn=xe;zn===null?hn.matrix.copy(Zt.matrixWorld):(hn.matrix.copy(zn.matrixWorld),hn.matrix.invert(),hn.matrix.multiply(Zt.matrixWorld)),hn.matrix.decompose(hn.position,hn.quaternion,hn.scale),hn.updateMatrixWorld(!0);const ir=hn.children;for(let Cr=0,kr=ir.length;Cr<kr;Cr++)ir[Cr].updateMatrixWorld(!0);hn.projectionMatrix.copy(Zt.projectionMatrix),hn.projectionMatrixInverse.copy(Zt.projectionMatrixInverse),hn.isPerspectiveCamera&&(hn.fov=hc*2*Math.atan(1/hn.projectionMatrix.elements[5]),hn.zoom=1)}this.getFoveation=function(){if(!(q===null&&ee===null))return D},this.setFoveation=function(Zt){D=Zt,q!==null&&(q.fixedFoveation=Zt),ee!==null&&ee.fixedFoveation!==void 0&&(ee.fixedFoveation=Zt)};let In=null;function kn(Zt,zn){if(K=zn.getViewerPose(N||B),ie=zn,K!==null){const hn=K.views;ee!==null&&(e.setRenderTargetFramebuffer(ne,ee.framebuffer),e.setRenderTarget(ne));let ir=!1;hn.length!==et.cameras.length&&(et.cameras.length=0,ir=!0);for(let Cr=0;Cr<hn.length;Cr++){const kr=hn[Cr];let hi=null;if(ee!==null)hi=ee.getViewport(kr);else{const Lo=Z.getViewSubImage(q,kr);hi=Lo.viewport,Cr===0&&(e.setRenderTargetTextures(ne,Lo.colorTexture,q.ignoreDepthValues?void 0:Lo.depthStencilTexture),e.setRenderTarget(ne))}let ci=qe[Cr];ci===void 0&&(ci=new Ji,ci.layers.enable(Cr),ci.viewport=new lo,qe[Cr]=ci),ci.matrix.fromArray(kr.transform.matrix),ci.matrix.decompose(ci.position,ci.quaternion,ci.scale),ci.projectionMatrix.fromArray(kr.projectionMatrix),ci.projectionMatrixInverse.copy(ci.projectionMatrix).invert(),ci.viewport.set(hi.x,hi.y,hi.width,hi.height),Cr===0&&(et.matrix.copy(ci.matrix),et.matrix.decompose(et.position,et.quaternion,et.scale)),ir===!0&&et.cameras.push(ci)}}for(let hn=0;hn<be.length;hn++){const ir=fe[hn],Cr=be[hn];ir!==null&&Cr!==void 0&&Cr.update(ir,zn,N||B)}In&&In(Zt,zn),zn.detectedPlanes&&f.dispatchEvent({type:"planesdetected",data:zn}),ie=null}const wr=new Mu;wr.setAnimationLoop(kn),this.setAnimationLoop=function(Zt){In=Zt},this.dispose=function(){}}}function Oy(S,e){function o(se,ne){se.matrixAutoUpdate===!0&&se.updateMatrix(),ne.value.copy(se.matrix)}function f(se,ne){ne.color.getRGB(se.fogColor.value,pd(S)),ne.isFog?(se.fogNear.value=ne.near,se.fogFar.value=ne.far):ne.isFogExp2&&(se.fogDensity.value=ne.density)}function y(se,ne,be,fe,xe){ne.isMeshBasicMaterial||ne.isMeshLambertMaterial?b(se,ne):ne.isMeshToonMaterial?(b(se,ne),Z(se,ne)):ne.isMeshPhongMaterial?(b(se,ne),K(se,ne)):ne.isMeshStandardMaterial?(b(se,ne),q(se,ne),ne.isMeshPhysicalMaterial&&ee(se,ne,xe)):ne.isMeshMatcapMaterial?(b(se,ne),ie(se,ne)):ne.isMeshDepthMaterial?b(se,ne):ne.isMeshDistanceMaterial?(b(se,ne),he(se,ne)):ne.isMeshNormalMaterial?b(se,ne):ne.isLineBasicMaterial?(B(se,ne),ne.isLineDashedMaterial&&I(se,ne)):ne.isPointsMaterial?D(se,ne,be,fe):ne.isSpriteMaterial?N(se,ne):ne.isShadowMaterial?(se.color.value.copy(ne.color),se.opacity.value=ne.opacity):ne.isShaderMaterial&&(ne.uniformsNeedUpdate=!1)}function b(se,ne){se.opacity.value=ne.opacity,ne.color&&se.diffuse.value.copy(ne.color),ne.emissive&&se.emissive.value.copy(ne.emissive).multiplyScalar(ne.emissiveIntensity),ne.map&&(se.map.value=ne.map,o(ne.map,se.mapTransform)),ne.alphaMap&&(se.alphaMap.value=ne.alphaMap,o(ne.alphaMap,se.alphaMapTransform)),ne.bumpMap&&(se.bumpMap.value=ne.bumpMap,o(ne.bumpMap,se.bumpMapTransform),se.bumpScale.value=ne.bumpScale,ne.side===Oe&&(se.bumpScale.value*=-1)),ne.normalMap&&(se.normalMap.value=ne.normalMap,o(ne.normalMap,se.normalMapTransform),se.normalScale.value.copy(ne.normalScale),ne.side===Oe&&se.normalScale.value.negate()),ne.displacementMap&&(se.displacementMap.value=ne.displacementMap,o(ne.displacementMap,se.displacementMapTransform),se.displacementScale.value=ne.displacementScale,se.displacementBias.value=ne.displacementBias),ne.emissiveMap&&(se.emissiveMap.value=ne.emissiveMap,o(ne.emissiveMap,se.emissiveMapTransform)),ne.specularMap&&(se.specularMap.value=ne.specularMap,o(ne.specularMap,se.specularMapTransform)),ne.alphaTest>0&&(se.alphaTest.value=ne.alphaTest);const be=e.get(ne).envMap;if(be&&(se.envMap.value=be,se.flipEnvMap.value=be.isCubeTexture&&be.isRenderTargetTexture===!1?-1:1,se.reflectivity.value=ne.reflectivity,se.ior.value=ne.ior,se.refractionRatio.value=ne.refractionRatio),ne.lightMap){se.lightMap.value=ne.lightMap;const fe=S.useLegacyLights===!0?Math.PI:1;se.lightMapIntensity.value=ne.lightMapIntensity*fe,o(ne.lightMap,se.lightMapTransform)}ne.aoMap&&(se.aoMap.value=ne.aoMap,se.aoMapIntensity.value=ne.aoMapIntensity,o(ne.aoMap,se.aoMapTransform))}function B(se,ne){se.diffuse.value.copy(ne.color),se.opacity.value=ne.opacity,ne.map&&(se.map.value=ne.map,o(ne.map,se.mapTransform))}function I(se,ne){se.dashSize.value=ne.dashSize,se.totalSize.value=ne.dashSize+ne.gapSize,se.scale.value=ne.scale}function D(se,ne,be,fe){se.diffuse.value.copy(ne.color),se.opacity.value=ne.opacity,se.size.value=ne.size*be,se.scale.value=fe*.5,ne.map&&(se.map.value=ne.map,o(ne.map,se.uvTransform)),ne.alphaMap&&(se.alphaMap.value=ne.alphaMap,o(ne.alphaMap,se.alphaMapTransform)),ne.alphaTest>0&&(se.alphaTest.value=ne.alphaTest)}function N(se,ne){se.diffuse.value.copy(ne.color),se.opacity.value=ne.opacity,se.rotation.value=ne.rotation,ne.map&&(se.map.value=ne.map,o(ne.map,se.mapTransform)),ne.alphaMap&&(se.alphaMap.value=ne.alphaMap,o(ne.alphaMap,se.alphaMapTransform)),ne.alphaTest>0&&(se.alphaTest.value=ne.alphaTest)}function K(se,ne){se.specular.value.copy(ne.specular),se.shininess.value=Math.max(ne.shininess,1e-4)}function Z(se,ne){ne.gradientMap&&(se.gradientMap.value=ne.gradientMap)}function q(se,ne){se.metalness.value=ne.metalness,ne.metalnessMap&&(se.metalnessMap.value=ne.metalnessMap,o(ne.metalnessMap,se.metalnessMapTransform)),se.roughness.value=ne.roughness,ne.roughnessMap&&(se.roughnessMap.value=ne.roughnessMap,o(ne.roughnessMap,se.roughnessMapTransform)),e.get(ne).envMap&&(se.envMapIntensity.value=ne.envMapIntensity)}function ee(se,ne,be){se.ior.value=ne.ior,ne.sheen>0&&(se.sheenColor.value.copy(ne.sheenColor).multiplyScalar(ne.sheen),se.sheenRoughness.value=ne.sheenRoughness,ne.sheenColorMap&&(se.sheenColorMap.value=ne.sheenColorMap,o(ne.sheenColorMap,se.sheenColorMapTransform)),ne.sheenRoughnessMap&&(se.sheenRoughnessMap.value=ne.sheenRoughnessMap,o(ne.sheenRoughnessMap,se.sheenRoughnessMapTransform))),ne.clearcoat>0&&(se.clearcoat.value=ne.clearcoat,se.clearcoatRoughness.value=ne.clearcoatRoughness,ne.clearcoatMap&&(se.clearcoatMap.value=ne.clearcoatMap,o(ne.clearcoatMap,se.clearcoatMapTransform)),ne.clearcoatRoughnessMap&&(se.clearcoatRoughnessMap.value=ne.clearcoatRoughnessMap,o(ne.clearcoatRoughnessMap,se.clearcoatRoughnessMapTransform)),ne.clearcoatNormalMap&&(se.clearcoatNormalMap.value=ne.clearcoatNormalMap,o(ne.clearcoatNormalMap,se.clearcoatNormalMapTransform),se.clearcoatNormalScale.value.copy(ne.clearcoatNormalScale),ne.side===Oe&&se.clearcoatNormalScale.value.negate())),ne.iridescence>0&&(se.iridescence.value=ne.iridescence,se.iridescenceIOR.value=ne.iridescenceIOR,se.iridescenceThicknessMinimum.value=ne.iridescenceThicknessRange[0],se.iridescenceThicknessMaximum.value=ne.iridescenceThicknessRange[1],ne.iridescenceMap&&(se.iridescenceMap.value=ne.iridescenceMap,o(ne.iridescenceMap,se.iridescenceMapTransform)),ne.iridescenceThicknessMap&&(se.iridescenceThicknessMap.value=ne.iridescenceThicknessMap,o(ne.iridescenceThicknessMap,se.iridescenceThicknessMapTransform))),ne.transmission>0&&(se.transmission.value=ne.transmission,se.transmissionSamplerMap.value=be.texture,se.transmissionSamplerSize.value.set(be.width,be.height),ne.transmissionMap&&(se.transmissionMap.value=ne.transmissionMap,o(ne.transmissionMap,se.transmissionMapTransform)),se.thickness.value=ne.thickness,ne.thicknessMap&&(se.thicknessMap.value=ne.thicknessMap,o(ne.thicknessMap,se.thicknessMapTransform)),se.attenuationDistance.value=ne.attenuationDistance,se.attenuationColor.value.copy(ne.attenuationColor)),ne.anisotropy>0&&(se.anisotropyVector.value.set(ne.anisotropy*Math.cos(ne.anisotropyRotation),ne.anisotropy*Math.sin(ne.anisotropyRotation)),ne.anisotropyMap&&(se.anisotropyMap.value=ne.anisotropyMap,o(ne.anisotropyMap,se.anisotropyMapTransform))),se.specularIntensity.value=ne.specularIntensity,se.specularColor.value.copy(ne.specularColor),ne.specularColorMap&&(se.specularColorMap.value=ne.specularColorMap,o(ne.specularColorMap,se.specularColorMapTransform)),ne.specularIntensityMap&&(se.specularIntensityMap.value=ne.specularIntensityMap,o(ne.specularIntensityMap,se.specularIntensityMapTransform))}function ie(se,ne){ne.matcap&&(se.matcap.value=ne.matcap)}function he(se,ne){const be=e.get(ne).light;se.referencePosition.value.setFromMatrixPosition(be.matrixWorld),se.nearDistance.value=be.shadow.camera.near,se.farDistance.value=be.shadow.camera.far}return{refreshFogUniforms:f,refreshMaterialUniforms:y}}function n3(S,e,o,f){let y={},b={},B=[];const I=o.isWebGL2?S.getParameter(S.MAX_UNIFORM_BUFFER_BINDINGS):0;function D(be,fe){const xe=fe.program;f.uniformBlockBinding(be,xe)}function N(be,fe){let xe=y[be.id];xe===void 0&&(ie(be),xe=K(be),y[be.id]=xe,be.addEventListener("dispose",se));const Le=fe.program;f.updateUBOMapping(be,Le);const He=e.render.frame;b[be.id]!==He&&(q(be),b[be.id]=He)}function K(be){const fe=Z();be.__bindingPointIndex=fe;const xe=S.createBuffer(),Le=be.__size,He=be.usage;return S.bindBuffer(S.UNIFORM_BUFFER,xe),S.bufferData(S.UNIFORM_BUFFER,Le,He),S.bindBuffer(S.UNIFORM_BUFFER,null),S.bindBufferBase(S.UNIFORM_BUFFER,fe,xe),xe}function Z(){for(let be=0;be<I;be++)if(B.indexOf(be)===-1)return B.push(be),be;return C.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function q(be){const fe=y[be.id],xe=be.uniforms,Le=be.__cache;S.bindBuffer(S.UNIFORM_BUFFER,fe);for(let He=0,qe=xe.length;He<qe;He++){const et=xe[He];if(ee(et,He,Le)===!0){const we=et.__offset,We=Array.isArray(et.value)?et.value:[et.value];let Wt=0;for(let Rn=0;Rn<We.length;Rn++){const Ut=We[Rn],Ht=he(Ut);typeof Ut=="number"?(et.__data[0]=Ut,S.bufferSubData(S.UNIFORM_BUFFER,we+Wt,et.__data)):Ut.isMatrix3?(et.__data[0]=Ut.elements[0],et.__data[1]=Ut.elements[1],et.__data[2]=Ut.elements[2],et.__data[3]=Ut.elements[0],et.__data[4]=Ut.elements[3],et.__data[5]=Ut.elements[4],et.__data[6]=Ut.elements[5],et.__data[7]=Ut.elements[0],et.__data[8]=Ut.elements[6],et.__data[9]=Ut.elements[7],et.__data[10]=Ut.elements[8],et.__data[11]=Ut.elements[0]):(Ut.toArray(et.__data,Wt),Wt+=Ht.storage/Float32Array.BYTES_PER_ELEMENT)}S.bufferSubData(S.UNIFORM_BUFFER,we,et.__data)}}S.bindBuffer(S.UNIFORM_BUFFER,null)}function ee(be,fe,xe){const Le=be.value;if(xe[fe]===void 0){if(typeof Le=="number")xe[fe]=Le;else{const He=Array.isArray(Le)?Le:[Le],qe=[];for(let et=0;et<He.length;et++)qe.push(He[et].clone());xe[fe]=qe}return!0}else if(typeof Le=="number"){if(xe[fe]!==Le)return xe[fe]=Le,!0}else{const He=Array.isArray(xe[fe])?xe[fe]:[xe[fe]],qe=Array.isArray(Le)?Le:[Le];for(let et=0;et<He.length;et++){const we=He[et];if(we.equals(qe[et])===!1)return we.copy(qe[et]),!0}}return!1}function ie(be){const fe=be.uniforms;let xe=0;const Le=16;let He=0;for(let qe=0,et=fe.length;qe<et;qe++){const we=fe[qe],We={boundary:0,storage:0},Wt=Array.isArray(we.value)?we.value:[we.value];for(let Rn=0,Ut=Wt.length;Rn<Ut;Rn++){const Ht=Wt[Rn],Jt=he(Ht);We.boundary+=Jt.boundary,We.storage+=Jt.storage}if(we.__data=new Float32Array(We.storage/Float32Array.BYTES_PER_ELEMENT),we.__offset=xe,qe>0){He=xe%Le;const Rn=Le-He;He!==0&&Rn-We.boundary<0&&(xe+=Le-He,we.__offset=xe)}xe+=We.storage}return He=xe%Le,He>0&&(xe+=Le-He),be.__size=xe,be.__cache={},this}function he(be){const fe={boundary:0,storage:0};return typeof be=="number"?(fe.boundary=4,fe.storage=4):be.isVector2?(fe.boundary=8,fe.storage=8):be.isVector3||be.isColor?(fe.boundary=16,fe.storage=12):be.isVector4?(fe.boundary=16,fe.storage=16):be.isMatrix3?(fe.boundary=48,fe.storage=48):be.isMatrix4?(fe.boundary=64,fe.storage=64):be.isTexture?C.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):C.warn("THREE.WebGLRenderer: Unsupported uniform value type.",be),fe}function se(be){const fe=be.target;fe.removeEventListener("dispose",se);const xe=B.indexOf(fe.__bindingPointIndex);B.splice(xe,1),S.deleteBuffer(y[fe.id]),delete y[fe.id],delete b[fe.id]}function ne(){for(const be in y)S.deleteBuffer(y[be]);B=[],y={},b={}}return{bind:D,update:N,dispose:ne}}function r3(){const S=xp("canvas");return S.style.display="block",S}class T1{constructor(e={}){const{canvas:o=r3(),context:f=null,depth:y=!0,stencil:b=!0,alpha:B=!1,antialias:I=!1,premultipliedAlpha:D=!0,preserveDrawingBuffer:N=!1,powerPreference:K="default",failIfMajorPerformanceCaveat:Z=!1}=e;this.isWebGLRenderer=!0;let q;f!==null?q=f.getContextAttributes().alpha:q=B;const ee=new Uint32Array(4),ie=new Int32Array(4);let he=null,se=null;const ne=[],be=[];this.domElement=o,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=Qn,this.useLegacyLights=!0,this.toneMapping=Ci,this.toneMappingExposure=1;const fe=this;let xe=!1,Le=0,He=0,qe=null,et=-1,we=null;const We=new lo,Wt=new lo;let Rn=null;const Ut=new br(0);let Ht=0,Jt=o.width,Sn=o.height,cn=1,En=null,In=null;const kn=new lo(0,0,Jt,Sn),wr=new lo(0,0,Jt,Sn);let Zt=!1;const zn=new ch;let hn=!1,ir=!1,Cr=null;const kr=new ui,hi=new _n,ci=new je,Lo={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function bi(){return qe===null?cn:1}let tt=f;function qn(Ne,Nt){for(let pn=0;pn<Ne.length;pn++){const Ct=Ne[pn],qt=o.getContext(Ct,Nt);if(qt!==null)return qt}return null}try{const Ne={alpha:!0,depth:y,stencil:b,antialias:I,premultipliedAlpha:D,preserveDrawingBuffer:N,powerPreference:K,failIfMajorPerformanceCaveat:Z};if("setAttribute"in o&&o.setAttribute("data-engine",`three.js r${d}`),o.addEventListener("webglcontextlost",mr,!1),o.addEventListener("webglcontextrestored",Xt,!1),o.addEventListener("webglcontextcreationerror",sr,!1),tt===null){const Nt=["webgl2","webgl","experimental-webgl"];if(fe.isWebGL1Renderer===!0&&Nt.shift(),tt=qn(Nt,Ne),tt===null)throw qn(Nt)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}tt instanceof WebGLRenderingContext&&C.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),tt.getShaderPrecisionFormat===void 0&&(tt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(Ne){throw C.error("THREE.WebGLRenderer: "+Ne.message),Ne}let An,tr,wn,Hr,jn,Tr,ri,Di,ts,Ye,Fe,an,Kn,Hn,$n,Wr,dr,on,ti,Vr,$r,zr,Gr,Ki;function _o(){An=new A_(tt),tr=new h_(tt,An,e),An.init(tr),zr=new w1(tt,An,tr),wn=new e3(tt,An,tr),Hr=new ty(tt),jn=new My,Tr=new t3(tt,An,wn,jn,tr,zr,Hr),ri=new g_(fe),Di=new m_(fe),ts=new Ag(tt,tr),Gr=new Rb(tt,An,ts,tr),Ye=new ey(tt,ts,Hr,Gr),Fe=new $m(tt,Ye,ts,Hr),ti=new qm(tt,tr,Tr),Wr=new f_(jn),an=new K_(fe,ri,Di,An,tr,Gr,Wr),Kn=new Oy(fe,jn),Hn=new Y_,$n=new Sy(An,tr),on=new Xm(fe,ri,Di,wn,Fe,q,D),dr=new By(fe,Fe,tr),Ki=new n3(tt,Hr,tr,wn),Vr=new ZA(tt,An,Hr,tr),$r=new y_(tt,An,Hr,tr),Hr.programs=an.programs,fe.capabilities=tr,fe.extensions=An,fe.properties=jn,fe.renderLists=Hn,fe.shadowMap=dr,fe.state=wn,fe.info=Hr}_o();const ft=new Db(fe,tt);this.xr=ft,this.getContext=function(){return tt},this.getContextAttributes=function(){return tt.getContextAttributes()},this.forceContextLoss=function(){const Ne=An.get("WEBGL_lose_context");Ne&&Ne.loseContext()},this.forceContextRestore=function(){const Ne=An.get("WEBGL_lose_context");Ne&&Ne.restoreContext()},this.getPixelRatio=function(){return cn},this.setPixelRatio=function(Ne){Ne!==void 0&&(cn=Ne,this.setSize(Jt,Sn,!1))},this.getSize=function(Ne){return Ne.set(Jt,Sn)},this.setSize=function(Ne,Nt,pn=!0){if(ft.isPresenting){C.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Jt=Ne,Sn=Nt,o.width=Math.floor(Ne*cn),o.height=Math.floor(Nt*cn),pn===!0&&(o.style.width=Ne+"px",o.style.height=Nt+"px"),this.setViewport(0,0,Ne,Nt)},this.getDrawingBufferSize=function(Ne){return Ne.set(Jt*cn,Sn*cn).floor()},this.setDrawingBufferSize=function(Ne,Nt,pn){Jt=Ne,Sn=Nt,cn=pn,o.width=Math.floor(Ne*pn),o.height=Math.floor(Nt*pn),this.setViewport(0,0,Ne,Nt)},this.getCurrentViewport=function(Ne){return Ne.copy(We)},this.getViewport=function(Ne){return Ne.copy(kn)},this.setViewport=function(Ne,Nt,pn,Ct){Ne.isVector4?kn.set(Ne.x,Ne.y,Ne.z,Ne.w):kn.set(Ne,Nt,pn,Ct),wn.viewport(We.copy(kn).multiplyScalar(cn).floor())},this.getScissor=function(Ne){return Ne.copy(wr)},this.setScissor=function(Ne,Nt,pn,Ct){Ne.isVector4?wr.set(Ne.x,Ne.y,Ne.z,Ne.w):wr.set(Ne,Nt,pn,Ct),wn.scissor(Wt.copy(wr).multiplyScalar(cn).floor())},this.getScissorTest=function(){return Zt},this.setScissorTest=function(Ne){wn.setScissorTest(Zt=Ne)},this.setOpaqueSort=function(Ne){En=Ne},this.setTransparentSort=function(Ne){In=Ne},this.getClearColor=function(Ne){return Ne.copy(on.getClearColor())},this.setClearColor=function(){on.setClearColor.apply(on,arguments)},this.getClearAlpha=function(){return on.getClearAlpha()},this.setClearAlpha=function(){on.setClearAlpha.apply(on,arguments)},this.clear=function(Ne=!0,Nt=!0,pn=!0){let Ct=0;if(Ne){let qt=!1;if(qe!==null){const Pr=qe.texture.format;qt=Pr===Sr||Pr===Bn||Pr===Xr}if(qt){const Pr=qe.texture.type,xr=Pr===Mo||Pr===Ns||Pr===Us||Pr===ol||Pr===ya||Pr===_p,Ai=on.getClearColor(),Mi=on.getClearAlpha(),Zi=Ai.r,Ri=Ai.g,zi=Ai.b,ns=jn.get(qe).__webglFramebuffer;xr?(ee[0]=Zi,ee[1]=Ri,ee[2]=zi,ee[3]=Mi,tt.clearBufferuiv(tt.COLOR,ns,ee)):(ie[0]=Zi,ie[1]=Ri,ie[2]=zi,ie[3]=Mi,tt.clearBufferiv(tt.COLOR,ns,ie))}else Ct|=tt.COLOR_BUFFER_BIT}Nt&&(Ct|=tt.DEPTH_BUFFER_BIT),pn&&(Ct|=tt.STENCIL_BUFFER_BIT),tt.clear(Ct)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){o.removeEventListener("webglcontextlost",mr,!1),o.removeEventListener("webglcontextrestored",Xt,!1),o.removeEventListener("webglcontextcreationerror",sr,!1),Hn.dispose(),$n.dispose(),jn.dispose(),ri.dispose(),Di.dispose(),Fe.dispose(),Gr.dispose(),Ki.dispose(),an.dispose(),ft.dispose(),ft.removeEventListener("sessionstart",hs),ft.removeEventListener("sessionend",mp),Cr&&(Cr.dispose(),Cr=null),La.stop()};function mr(Ne){Ne.preventDefault(),C.log("THREE.WebGLRenderer: Context Lost."),xe=!0}function Xt(){C.log("THREE.WebGLRenderer: Context Restored."),xe=!1;const Ne=Hr.autoReset,Nt=dr.enabled,pn=dr.autoUpdate,Ct=dr.needsUpdate,qt=dr.type;_o(),Hr.autoReset=Ne,dr.enabled=Nt,dr.autoUpdate=pn,dr.needsUpdate=Ct,dr.type=qt}function sr(Ne){C.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",Ne.statusMessage)}function Mr(Ne){const Nt=Ne.target;Nt.removeEventListener("dispose",Mr),Ao(Nt)}function Ao(Ne){ds(Ne),jn.remove(Ne)}function ds(Ne){const Nt=jn.get(Ne).programs;Nt!==void 0&&(Nt.forEach(function(pn){an.releaseProgram(pn)}),Ne.isShaderMaterial&&an.releaseShaderCache(Ne))}this.renderBufferDirect=function(Ne,Nt,pn,Ct,qt,Pr){Nt===null&&(Nt=Lo);const xr=qt.isMesh&&qt.matrixWorld.determinant()<0,Ai=nE(Ne,Nt,pn,Ct,qt);wn.setMaterial(Ct,xr);let Mi=pn.index,Zi=1;Ct.wireframe===!0&&(Mi=Ye.getWireframeAttribute(pn),Zi=2);const Ri=pn.drawRange,zi=pn.attributes.position;let ns=Ri.start*Zi,ha=(Ri.start+Ri.count)*Zi;Pr!==null&&(ns=Math.max(ns,Pr.start*Zi),ha=Math.min(ha,(Pr.start+Pr.count)*Zi)),Mi!==null?(ns=Math.max(ns,0),ha=Math.min(ha,Mi.count)):zi!=null&&(ns=Math.max(ns,0),ha=Math.min(ha,zi.count));const Jp=ha-ns;if(Jp<0||Jp===1/0)return;Gr.setup(qt,Ct,Ai,pn,Mi);let Id,fa=Vr;if(Mi!==null&&(Id=ts.get(Mi),fa=$r,fa.setIndex(Id)),qt.isMesh)Ct.wireframe===!0?(wn.setLineWidth(Ct.wireframeLinewidth*bi()),fa.setMode(tt.LINES)):fa.setMode(tt.TRIANGLES);else if(qt.isLine){let eo=Ct.linewidth;eo===void 0&&(eo=1),wn.setLineWidth(eo*bi()),qt.isLineSegments?fa.setMode(tt.LINES):qt.isLineLoop?fa.setMode(tt.LINE_LOOP):fa.setMode(tt.LINE_STRIP)}else qt.isPoints?fa.setMode(tt.POINTS):qt.isSprite&&fa.setMode(tt.TRIANGLES);if(qt.isInstancedMesh)fa.renderInstances(ns,Jp,qt.count);else if(pn.isInstancedBufferGeometry){const eo=pn._maxInstanceCount!==void 0?pn._maxInstanceCount:1/0,n2=Math.min(pn.instanceCount,eo);fa.renderInstances(ns,Jp,n2)}else fa.render(ns,Jp)},this.compile=function(Ne,Nt){function pn(Ct,qt,Pr){Ct.transparent===!0&&Ct.side===Ze&&Ct.forceSinglePass===!1?(Ct.side=Oe,Ct.needsUpdate=!0,G0(Ct,qt,Pr),Ct.side=Pe,Ct.needsUpdate=!0,G0(Ct,qt,Pr),Ct.side=Ze):G0(Ct,qt,Pr)}se=$n.get(Ne),se.init(),be.push(se),Ne.traverseVisible(function(Ct){Ct.isLight&&Ct.layers.test(Nt.layers)&&(se.pushLight(Ct),Ct.castShadow&&se.pushShadow(Ct))}),se.setupLights(fe.useLegacyLights),Ne.traverse(function(Ct){const qt=Ct.material;if(qt)if(Array.isArray(qt))for(let Pr=0;Pr<qt.length;Pr++){const xr=qt[Pr];pn(xr,Ne,Ct)}else pn(qt,Ne,Ct)}),be.pop(),se=null};let $s=null;function Yp(Ne){$s&&$s(Ne)}function hs(){La.stop()}function mp(){La.start()}const La=new Mu;La.setAnimationLoop(Yp),typeof self!="undefined"&&La.setContext(self),this.setAnimationLoop=function(Ne){$s=Ne,ft.setAnimationLoop(Ne),Ne===null?La.stop():La.start()},ft.addEventListener("sessionstart",hs),ft.addEventListener("sessionend",mp),this.render=function(Ne,Nt){if(Nt!==void 0&&Nt.isCamera!==!0){C.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(xe===!0)return;Ne.matrixWorldAutoUpdate===!0&&Ne.updateMatrixWorld(),Nt.parent===null&&Nt.matrixWorldAutoUpdate===!0&&Nt.updateMatrixWorld(),ft.enabled===!0&&ft.isPresenting===!0&&(Nt=ft.updateCameraXR(Nt)),Ne.isScene===!0&&Ne.onBeforeRender(fe,Ne,Nt,qe),se=$n.get(Ne,be.length),se.init(),be.push(se),kr.multiplyMatrices(Nt.projectionMatrix,Nt.matrixWorldInverse),zn.setFromProjectionMatrix(kr),ir=this.localClippingEnabled,hn=Wr.init(this.clippingPlanes,ir),he=Hn.get(Ne,ne.length),he.init(),ne.push(he),$v(Ne,Nt,0,fe.sortObjects),he.finish(),fe.sortObjects===!0&&he.sort(En,In),hn===!0&&Wr.beginShadows();const pn=se.state.shadowsArray;if(dr.render(pn,Ne,Nt),hn===!0&&Wr.endShadows(),this.info.autoReset===!0&&this.info.reset(),this.info.render.frame++,on.render(he,Ne),se.setupLights(fe.useLegacyLights),Nt.isArrayCamera){const Ct=Nt.cameras;for(let qt=0,Pr=Ct.length;qt<Pr;qt++){const xr=Ct[qt];yA(he,Ne,xr,xr.viewport)}}else yA(he,Ne,Nt);qe!==null&&(Tr.updateMultisampleRenderTarget(qe),Tr.updateRenderTargetMipmap(qe)),Ne.isScene===!0&&Ne.onAfterRender(fe,Ne,Nt),Gr.resetDefaultState(),et=-1,we=null,be.pop(),be.length>0?se=be[be.length-1]:se=null,ne.pop(),ne.length>0?he=ne[ne.length-1]:he=null};function $v(Ne,Nt,pn,Ct){if(Ne.visible===!1)return;if(Ne.layers.test(Nt.layers)){if(Ne.isGroup)pn=Ne.renderOrder;else if(Ne.isLOD)Ne.autoUpdate===!0&&Ne.update(Nt);else if(Ne.isLight)se.pushLight(Ne),Ne.castShadow&&se.pushShadow(Ne);else if(Ne.isSprite){if(!Ne.frustumCulled||zn.intersectsSprite(Ne)){Ct&&ci.setFromMatrixPosition(Ne.matrixWorld).applyMatrix4(kr);const xr=Fe.update(Ne),Ai=Ne.material;Ai.visible&&he.push(Ne,xr,Ai,pn,ci.z,null)}}else if((Ne.isMesh||Ne.isLine||Ne.isPoints)&&(!Ne.frustumCulled||zn.intersectsObject(Ne))){Ne.isSkinnedMesh&&Ne.skeleton.frame!==Hr.render.frame&&(Ne.skeleton.update(),Ne.skeleton.frame=Hr.render.frame);const xr=Fe.update(Ne),Ai=Ne.material;if(Ct&&(Ne.boundingSphere!==void 0?(Ne.boundingSphere===null&&Ne.computeBoundingSphere(),ci.copy(Ne.boundingSphere.center)):(xr.boundingSphere===null&&xr.computeBoundingSphere(),ci.copy(xr.boundingSphere.center)),ci.applyMatrix4(Ne.matrixWorld).applyMatrix4(kr)),Array.isArray(Ai)){const Mi=xr.groups;for(let Zi=0,Ri=Mi.length;Zi<Ri;Zi++){const zi=Mi[Zi],ns=Ai[zi.materialIndex];ns&&ns.visible&&he.push(Ne,xr,ns,pn,ci.z,zi)}}else Ai.visible&&he.push(Ne,xr,Ai,pn,ci.z,null)}}const Pr=Ne.children;for(let xr=0,Ai=Pr.length;xr<Ai;xr++)$v(Pr[xr],Nt,pn,Ct)}function yA(Ne,Nt,pn,Ct){const qt=Ne.opaque,Pr=Ne.transmissive,xr=Ne.transparent;se.setupLightsView(pn),hn===!0&&Wr.setGlobalState(fe.clippingPlanes,pn),Pr.length>0&&vA(qt,Pr,Nt,pn),Ct&&wn.viewport(We.copy(Ct)),qt.length>0&&Yf(qt,Nt,pn),Pr.length>0&&Yf(Pr,Nt,pn),xr.length>0&&Yf(xr,Nt,pn),wn.buffers.depth.setTest(!0),wn.buffers.depth.setMask(!0),wn.buffers.color.setMask(!0),wn.setPolygonOffset(!1)}function vA(Ne,Nt,pn,Ct){const qt=tr.isWebGL2;Cr===null&&(Cr=new pl(1,1,{generateMipmaps:!0,type:An.has("EXT_color_buffer_half_float")?za:Mo,minFilter:Fo,samples:qt&&I===!0?4:0})),fe.getDrawingBufferSize(hi),qt?Cr.setSize(hi.x,hi.y):Cr.setSize(_a(hi.x),_a(hi.y));const Pr=fe.getRenderTarget();fe.setRenderTarget(Cr),fe.getClearColor(Ut),Ht=fe.getClearAlpha(),Ht<1&&fe.setClearColor(16777215,.5),fe.clear();const xr=fe.toneMapping;fe.toneMapping=Ci,Yf(Ne,pn,Ct),Tr.updateMultisampleRenderTarget(Cr),Tr.updateRenderTargetMipmap(Cr);let Ai=!1;for(let Mi=0,Zi=Nt.length;Mi<Zi;Mi++){const Ri=Nt[Mi],zi=Ri.object,ns=Ri.geometry,ha=Ri.material,Jp=Ri.group;if(ha.side===Ze&&zi.layers.test(Ct.layers)){const Id=ha.side;ha.side=Oe,ha.needsUpdate=!0,e2(zi,pn,Ct,ns,ha,Jp),ha.side=Id,ha.needsUpdate=!0,Ai=!0}}Ai===!0&&(Tr.updateMultisampleRenderTarget(Cr),Tr.updateRenderTargetMipmap(Cr)),fe.setRenderTarget(Pr),fe.setClearColor(Ut,Ht),fe.toneMapping=xr}function Yf(Ne,Nt,pn){const Ct=Nt.isScene===!0?Nt.overrideMaterial:null;for(let qt=0,Pr=Ne.length;qt<Pr;qt++){const xr=Ne[qt],Ai=xr.object,Mi=xr.geometry,Zi=Ct===null?xr.material:Ct,Ri=xr.group;Ai.layers.test(pn.layers)&&e2(Ai,Nt,pn,Mi,Zi,Ri)}}function e2(Ne,Nt,pn,Ct,qt,Pr){Ne.onBeforeRender(fe,Nt,pn,Ct,qt,Pr),Ne.modelViewMatrix.multiplyMatrices(pn.matrixWorldInverse,Ne.matrixWorld),Ne.normalMatrix.getNormalMatrix(Ne.modelViewMatrix),qt.onBeforeRender(fe,Nt,pn,Ct,Ne,Pr),qt.transparent===!0&&qt.side===Ze&&qt.forceSinglePass===!1?(qt.side=Oe,qt.needsUpdate=!0,fe.renderBufferDirect(pn,Nt,Ct,qt,Ne,Pr),qt.side=Pe,qt.needsUpdate=!0,fe.renderBufferDirect(pn,Nt,Ct,qt,Ne,Pr),qt.side=Ze):fe.renderBufferDirect(pn,Nt,Ct,qt,Ne,Pr),Ne.onAfterRender(fe,Nt,pn,Ct,qt,Pr)}function G0(Ne,Nt,pn){Nt.isScene!==!0&&(Nt=Lo);const Ct=jn.get(Ne),qt=se.state.lights,Pr=se.state.shadowsArray,xr=qt.state.version,Ai=an.getParameters(Ne,qt.state,Pr,Nt,pn),Mi=an.getProgramCacheKey(Ai);let Zi=Ct.programs;Ct.environment=Ne.isMeshStandardMaterial?Nt.environment:null,Ct.fog=Nt.fog,Ct.envMap=(Ne.isMeshStandardMaterial?Di:ri).get(Ne.envMap||Ct.environment),Zi===void 0&&(Ne.addEventListener("dispose",Mr),Zi=new Map,Ct.programs=Zi);let Ri=Zi.get(Mi);if(Ri!==void 0){if(Ct.currentProgram===Ri&&Ct.lightsStateVersion===xr)return t2(Ne,Ai),Ri}else Ai.uniforms=an.getUniforms(Ne),Ne.onBuild(pn,Ai,fe),Ne.onBeforeCompile(Ai,fe),Ri=an.acquireProgram(Ai,Mi),Zi.set(Mi,Ri),Ct.uniforms=Ai.uniforms;const zi=Ct.uniforms;(!Ne.isShaderMaterial&&!Ne.isRawShaderMaterial||Ne.clipping===!0)&&(zi.clippingPlanes=Wr.uniform),t2(Ne,Ai),Ct.needsLights=_A(Ne),Ct.lightsStateVersion=xr,Ct.needsLights&&(zi.ambientLightColor.value=qt.state.ambient,zi.lightProbe.value=qt.state.probe,zi.directionalLights.value=qt.state.directional,zi.directionalLightShadows.value=qt.state.directionalShadow,zi.spotLights.value=qt.state.spot,zi.spotLightShadows.value=qt.state.spotShadow,zi.rectAreaLights.value=qt.state.rectArea,zi.ltc_1.value=qt.state.rectAreaLTC1,zi.ltc_2.value=qt.state.rectAreaLTC2,zi.pointLights.value=qt.state.point,zi.pointLightShadows.value=qt.state.pointShadow,zi.hemisphereLights.value=qt.state.hemi,zi.directionalShadowMap.value=qt.state.directionalShadowMap,zi.directionalShadowMatrix.value=qt.state.directionalShadowMatrix,zi.spotShadowMap.value=qt.state.spotShadowMap,zi.spotLightMatrix.value=qt.state.spotLightMatrix,zi.spotLightMap.value=qt.state.spotLightMap,zi.pointShadowMap.value=qt.state.pointShadowMap,zi.pointShadowMatrix.value=qt.state.pointShadowMatrix);const ns=Ri.getUniforms(),ha=s0.seqWithValue(ns.seq,zi);return Ct.currentProgram=Ri,Ct.uniformsList=ha,Ri}function t2(Ne,Nt){const pn=jn.get(Ne);pn.outputColorSpace=Nt.outputColorSpace,pn.instancing=Nt.instancing,pn.skinning=Nt.skinning,pn.morphTargets=Nt.morphTargets,pn.morphNormals=Nt.morphNormals,pn.morphColors=Nt.morphColors,pn.morphTargetsCount=Nt.morphTargetsCount,pn.numClippingPlanes=Nt.numClippingPlanes,pn.numIntersection=Nt.numClipIntersection,pn.vertexAlphas=Nt.vertexAlphas,pn.vertexTangents=Nt.vertexTangents,pn.toneMapping=Nt.toneMapping}function nE(Ne,Nt,pn,Ct,qt){Nt.isScene!==!0&&(Nt=Lo),Tr.resetTextureUnits();const Pr=Nt.fog,xr=Ct.isMeshStandardMaterial?Nt.environment:null,Ai=qe===null?fe.outputColorSpace:qe.isXRRenderTarget===!0?qe.texture.colorSpace:al,Mi=(Ct.isMeshStandardMaterial?Di:ri).get(Ct.envMap||xr),Zi=Ct.vertexColors===!0&&!!pn.attributes.color&&pn.attributes.color.itemSize===4,Ri=!!pn.attributes.tangent&&(!!Ct.normalMap||Ct.anisotropy>0),zi=!!pn.morphAttributes.position,ns=!!pn.morphAttributes.normal,ha=!!pn.morphAttributes.color,Jp=Ct.toneMapped?fe.toneMapping:Ci,Id=pn.morphAttributes.position||pn.morphAttributes.normal||pn.morphAttributes.color,fa=Id!==void 0?Id.length:0,eo=jn.get(Ct),n2=se.state.lights;if(hn===!0&&(ir===!0||Ne!==we)){const Qc=Ne===we&&Ct.id===et;Wr.setState(Ct,Ne,Qc)}let $a=!1;Ct.version===eo.__version?(eo.needsLights&&eo.lightsStateVersion!==n2.state.version||eo.outputColorSpace!==Ai||qt.isInstancedMesh&&eo.instancing===!1||!qt.isInstancedMesh&&eo.instancing===!0||qt.isSkinnedMesh&&eo.skinning===!1||!qt.isSkinnedMesh&&eo.skinning===!0||eo.envMap!==Mi||Ct.fog===!0&&eo.fog!==Pr||eo.numClippingPlanes!==void 0&&(eo.numClippingPlanes!==Wr.numPlanes||eo.numIntersection!==Wr.numIntersection)||eo.vertexAlphas!==Zi||eo.vertexTangents!==Ri||eo.morphTargets!==zi||eo.morphNormals!==ns||eo.morphColors!==ha||eo.toneMapping!==Jp||tr.isWebGL2===!0&&eo.morphTargetsCount!==fa)&&($a=!0):($a=!0,eo.__version=Ct.version);let Fd=eo.currentProgram;$a===!0&&(Fd=G0(Ct,Nt,qt));let Jf=!1,U0=!1,r2=!1;const ic=Fd.getUniforms(),Od=eo.uniforms;if(wn.useProgram(Fd.program)&&(Jf=!0,U0=!0,r2=!0),Ct.id!==et&&(et=Ct.id,U0=!0),Jf||we!==Ne){if(ic.setValue(tt,"projectionMatrix",Ne.projectionMatrix),tr.logarithmicDepthBuffer&&ic.setValue(tt,"logDepthBufFC",2/(Math.log(Ne.far+1)/Math.LN2)),we!==Ne&&(we=Ne,U0=!0,r2=!0),Ct.isShaderMaterial||Ct.isMeshPhongMaterial||Ct.isMeshToonMaterial||Ct.isMeshStandardMaterial||Ct.envMap){const Qc=ic.map.cameraPosition;Qc!==void 0&&Qc.setValue(tt,ci.setFromMatrixPosition(Ne.matrixWorld))}(Ct.isMeshPhongMaterial||Ct.isMeshToonMaterial||Ct.isMeshLambertMaterial||Ct.isMeshBasicMaterial||Ct.isMeshStandardMaterial||Ct.isShaderMaterial)&&ic.setValue(tt,"isOrthographic",Ne.isOrthographicCamera===!0),(Ct.isMeshPhongMaterial||Ct.isMeshToonMaterial||Ct.isMeshLambertMaterial||Ct.isMeshBasicMaterial||Ct.isMeshStandardMaterial||Ct.isShaderMaterial||Ct.isShadowMaterial||qt.isSkinnedMesh)&&ic.setValue(tt,"viewMatrix",Ne.matrixWorldInverse)}if(qt.isSkinnedMesh){ic.setOptional(tt,qt,"bindMatrix"),ic.setOptional(tt,qt,"bindMatrixInverse");const Qc=qt.skeleton;Qc&&(tr.floatVertexTextures?(Qc.boneTexture===null&&Qc.computeBoneTexture(),ic.setValue(tt,"boneTexture",Qc.boneTexture,Tr),ic.setValue(tt,"boneTextureSize",Qc.boneTextureSize)):C.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const i2=pn.morphAttributes;if((i2.position!==void 0||i2.normal!==void 0||i2.color!==void 0&&tr.isWebGL2===!0)&&ti.update(qt,pn,Fd),(U0||eo.receiveShadow!==qt.receiveShadow)&&(eo.receiveShadow=qt.receiveShadow,ic.setValue(tt,"receiveShadow",qt.receiveShadow)),Ct.isMeshGouraudMaterial&&Ct.envMap!==null&&(Od.envMap.value=Mi,Od.flipEnvMap.value=Mi.isCubeTexture&&Mi.isRenderTargetTexture===!1?-1:1),U0&&(ic.setValue(tt,"toneMappingExposure",fe.toneMappingExposure),eo.needsLights&&Rd(Od,r2),Pr&&Ct.fog===!0&&Kn.refreshFogUniforms(Od,Pr),Kn.refreshMaterialUniforms(Od,Ct,cn,Sn,Cr),s0.upload(tt,eo.uniformsList,Od,Tr)),Ct.isShaderMaterial&&Ct.uniformsNeedUpdate===!0&&(s0.upload(tt,eo.uniformsList,Od,Tr),Ct.uniformsNeedUpdate=!1),Ct.isSpriteMaterial&&ic.setValue(tt,"center",qt.center),ic.setValue(tt,"modelViewMatrix",qt.modelViewMatrix),ic.setValue(tt,"normalMatrix",qt.normalMatrix),ic.setValue(tt,"modelMatrix",qt.matrixWorld),Ct.isShaderMaterial||Ct.isRawShaderMaterial){const Qc=Ct.uniformsGroups;for(let EA=0,bA=Qc.length;EA<bA;EA++)if(tr.isWebGL2){const rE=Qc[EA];Ki.update(rE,Fd),Ki.bind(rE,Fd)}else C.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return Fd}function Rd(Ne,Nt){Ne.ambientLightColor.needsUpdate=Nt,Ne.lightProbe.needsUpdate=Nt,Ne.directionalLights.needsUpdate=Nt,Ne.directionalLightShadows.needsUpdate=Nt,Ne.pointLights.needsUpdate=Nt,Ne.pointLightShadows.needsUpdate=Nt,Ne.spotLights.needsUpdate=Nt,Ne.spotLightShadows.needsUpdate=Nt,Ne.rectAreaLights.needsUpdate=Nt,Ne.hemisphereLights.needsUpdate=Nt}function _A(Ne){return Ne.isMeshLambertMaterial||Ne.isMeshToonMaterial||Ne.isMeshPhongMaterial||Ne.isMeshStandardMaterial||Ne.isShadowMaterial||Ne.isShaderMaterial&&Ne.lights===!0}this.getActiveCubeFace=function(){return Le},this.getActiveMipmapLevel=function(){return He},this.getRenderTarget=function(){return qe},this.setRenderTargetTextures=function(Ne,Nt,pn){jn.get(Ne.texture).__webglTexture=Nt,jn.get(Ne.depthTexture).__webglTexture=pn;const Ct=jn.get(Ne);Ct.__hasExternalTextures=!0,Ct.__hasExternalTextures&&(Ct.__autoAllocateDepthBuffer=pn===void 0,Ct.__autoAllocateDepthBuffer||An.has("WEBGL_multisampled_render_to_texture")===!0&&(C.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Ct.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(Ne,Nt){const pn=jn.get(Ne);pn.__webglFramebuffer=Nt,pn.__useDefaultFramebuffer=Nt===void 0},this.setRenderTarget=function(Ne,Nt=0,pn=0){qe=Ne,Le=Nt,He=pn;let Ct=!0,qt=null,Pr=!1,xr=!1;if(Ne){const Mi=jn.get(Ne);Mi.__useDefaultFramebuffer!==void 0?(wn.bindFramebuffer(tt.FRAMEBUFFER,null),Ct=!1):Mi.__webglFramebuffer===void 0?Tr.setupRenderTarget(Ne):Mi.__hasExternalTextures&&Tr.rebindTextures(Ne,jn.get(Ne.texture).__webglTexture,jn.get(Ne.depthTexture).__webglTexture);const Zi=Ne.texture;(Zi.isData3DTexture||Zi.isDataArrayTexture||Zi.isCompressedArrayTexture)&&(xr=!0);const Ri=jn.get(Ne).__webglFramebuffer;Ne.isWebGLCubeRenderTarget?(qt=Ri[Nt],Pr=!0):tr.isWebGL2&&Ne.samples>0&&Tr.useMultisampledRTT(Ne)===!1?qt=jn.get(Ne).__webglMultisampledFramebuffer:qt=Ri,We.copy(Ne.viewport),Wt.copy(Ne.scissor),Rn=Ne.scissorTest}else We.copy(kn).multiplyScalar(cn).floor(),Wt.copy(wr).multiplyScalar(cn).floor(),Rn=Zt;if(wn.bindFramebuffer(tt.FRAMEBUFFER,qt)&&tr.drawBuffers&&Ct&&wn.drawBuffers(Ne,qt),wn.viewport(We),wn.scissor(Wt),wn.setScissorTest(Rn),Pr){const Mi=jn.get(Ne.texture);tt.framebufferTexture2D(tt.FRAMEBUFFER,tt.COLOR_ATTACHMENT0,tt.TEXTURE_CUBE_MAP_POSITIVE_X+Nt,Mi.__webglTexture,pn)}else if(xr){const Mi=jn.get(Ne.texture),Zi=Nt||0;tt.framebufferTextureLayer(tt.FRAMEBUFFER,tt.COLOR_ATTACHMENT0,Mi.__webglTexture,pn||0,Zi)}et=-1},this.readRenderTargetPixels=function(Ne,Nt,pn,Ct,qt,Pr,xr){if(!(Ne&&Ne.isWebGLRenderTarget)){C.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ai=jn.get(Ne).__webglFramebuffer;if(Ne.isWebGLCubeRenderTarget&&xr!==void 0&&(Ai=Ai[xr]),Ai){wn.bindFramebuffer(tt.FRAMEBUFFER,Ai);try{const Mi=Ne.texture,Zi=Mi.format,Ri=Mi.type;if(Zi!==Je&&zr.convert(Zi)!==tt.getParameter(tt.IMPLEMENTATION_COLOR_READ_FORMAT)){C.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const zi=Ri===za&&(An.has("EXT_color_buffer_half_float")||tr.isWebGL2&&An.has("EXT_color_buffer_float"));if(Ri!==Mo&&zr.convert(Ri)!==tt.getParameter(tt.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Ri===gs&&(tr.isWebGL2||An.has("OES_texture_float")||An.has("WEBGL_color_buffer_float")))&&!zi){C.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Nt>=0&&Nt<=Ne.width-Ct&&pn>=0&&pn<=Ne.height-qt&&tt.readPixels(Nt,pn,Ct,qt,zr.convert(Zi),zr.convert(Ri),Pr)}finally{const Mi=qe!==null?jn.get(qe).__webglFramebuffer:null;wn.bindFramebuffer(tt.FRAMEBUFFER,Mi)}}},this.copyFramebufferToTexture=function(Ne,Nt,pn=0){const Ct=Math.pow(2,-pn),qt=Math.floor(Nt.image.width*Ct),Pr=Math.floor(Nt.image.height*Ct);Tr.setTexture2D(Nt,0),tt.copyTexSubImage2D(tt.TEXTURE_2D,pn,0,0,Ne.x,Ne.y,qt,Pr),wn.unbindTexture()},this.copyTextureToTexture=function(Ne,Nt,pn,Ct=0){const qt=Nt.image.width,Pr=Nt.image.height,xr=zr.convert(pn.format),Ai=zr.convert(pn.type);Tr.setTexture2D(pn,0),tt.pixelStorei(tt.UNPACK_FLIP_Y_WEBGL,pn.flipY),tt.pixelStorei(tt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,pn.premultiplyAlpha),tt.pixelStorei(tt.UNPACK_ALIGNMENT,pn.unpackAlignment),Nt.isDataTexture?tt.texSubImage2D(tt.TEXTURE_2D,Ct,Ne.x,Ne.y,qt,Pr,xr,Ai,Nt.image.data):Nt.isCompressedTexture?tt.compressedTexSubImage2D(tt.TEXTURE_2D,Ct,Ne.x,Ne.y,Nt.mipmaps[0].width,Nt.mipmaps[0].height,xr,Nt.mipmaps[0].data):tt.texSubImage2D(tt.TEXTURE_2D,Ct,Ne.x,Ne.y,xr,Ai,Nt.image),Ct===0&&pn.generateMipmaps&&tt.generateMipmap(tt.TEXTURE_2D),wn.unbindTexture()},this.copyTextureToTexture3D=function(Ne,Nt,pn,Ct,qt=0){if(fe.isWebGL1Renderer){C.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const Pr=Ne.max.x-Ne.min.x+1,xr=Ne.max.y-Ne.min.y+1,Ai=Ne.max.z-Ne.min.z+1,Mi=zr.convert(Ct.format),Zi=zr.convert(Ct.type);let Ri;if(Ct.isData3DTexture)Tr.setTexture3D(Ct,0),Ri=tt.TEXTURE_3D;else if(Ct.isDataArrayTexture)Tr.setTexture2DArray(Ct,0),Ri=tt.TEXTURE_2D_ARRAY;else{C.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}tt.pixelStorei(tt.UNPACK_FLIP_Y_WEBGL,Ct.flipY),tt.pixelStorei(tt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ct.premultiplyAlpha),tt.pixelStorei(tt.UNPACK_ALIGNMENT,Ct.unpackAlignment);const zi=tt.getParameter(tt.UNPACK_ROW_LENGTH),ns=tt.getParameter(tt.UNPACK_IMAGE_HEIGHT),ha=tt.getParameter(tt.UNPACK_SKIP_PIXELS),Jp=tt.getParameter(tt.UNPACK_SKIP_ROWS),Id=tt.getParameter(tt.UNPACK_SKIP_IMAGES),fa=pn.isCompressedTexture?pn.mipmaps[0]:pn.image;tt.pixelStorei(tt.UNPACK_ROW_LENGTH,fa.width),tt.pixelStorei(tt.UNPACK_IMAGE_HEIGHT,fa.height),tt.pixelStorei(tt.UNPACK_SKIP_PIXELS,Ne.min.x),tt.pixelStorei(tt.UNPACK_SKIP_ROWS,Ne.min.y),tt.pixelStorei(tt.UNPACK_SKIP_IMAGES,Ne.min.z),pn.isDataTexture||pn.isData3DTexture?tt.texSubImage3D(Ri,qt,Nt.x,Nt.y,Nt.z,Pr,xr,Ai,Mi,Zi,fa.data):pn.isCompressedArrayTexture?(C.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),tt.compressedTexSubImage3D(Ri,qt,Nt.x,Nt.y,Nt.z,Pr,xr,Ai,Mi,fa.data)):tt.texSubImage3D(Ri,qt,Nt.x,Nt.y,Nt.z,Pr,xr,Ai,Mi,Zi,fa),tt.pixelStorei(tt.UNPACK_ROW_LENGTH,zi),tt.pixelStorei(tt.UNPACK_IMAGE_HEIGHT,ns),tt.pixelStorei(tt.UNPACK_SKIP_PIXELS,ha),tt.pixelStorei(tt.UNPACK_SKIP_ROWS,Jp),tt.pixelStorei(tt.UNPACK_SKIP_IMAGES,Id),qt===0&&Ct.generateMipmaps&&tt.generateMipmap(Ri),wn.unbindTexture()},this.initTexture=function(Ne){Ne.isCubeTexture?Tr.setTextureCube(Ne,0):Ne.isData3DTexture?Tr.setTexture3D(Ne,0):Ne.isDataArrayTexture||Ne.isCompressedArrayTexture?Tr.setTexture2DArray(Ne,0):Tr.setTexture2D(Ne,0),wn.unbindTexture()},this.resetState=function(){Le=0,He=0,qe=null,wn.reset(),Gr.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ha}get physicallyCorrectLights(){return C.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){C.warn("THREE.WebGLRenderer: the property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return C.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===Qn?Nl:nu}set outputEncoding(e){C.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===Nl?Qn:al}}class Dy extends T1{}Dy.prototype.isWebGL1Renderer=!0;class u0{constructor(e,o=25e-5){this.isFogExp2=!0,this.name="",this.color=new br(e),this.density=o}clone(){return new u0(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class bf{constructor(e,o=1,f=1e3){this.isFog=!0,this.name="",this.color=new br(e),this.near=o,this.far=f}clone(){return new bf(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Ly extends Yi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,o){return super.copy(e,o),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const o=super.toJSON(e);return this.fog!==null&&(o.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(o.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(o.object.backgroundIntensity=this.backgroundIntensity),o}get autoUpdate(){return C.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate}set autoUpdate(e){C.warn("THREE.Scene: autoUpdate was renamed to matrixWorldAutoUpdate in r144."),this.matrixWorldAutoUpdate=e}}class d0{constructor(e,o){this.isInterleavedBuffer=!0,this.array=e,this.stride=o,this.count=e!==void 0?e.length/o:0,this.usage=pc,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ll()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,o,f){e*=this.stride,f*=o.stride;for(let y=0,b=this.stride;y<b;y++)this.array[e+y]=o.array[f+y];return this}set(e,o=0){return this.array.set(e,o),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ll()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const o=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),f=new this.constructor(o,this.stride);return f.setUsage(this.usage),f}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ll()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ll=new je;class vh{constructor(e,o,f,y=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=o,this.offset=f,this.normalized=y}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let o=0,f=this.data.count;o<f;o++)Ll.fromBufferAttribute(this,o),Ll.applyMatrix4(e),this.setXYZ(o,Ll.x,Ll.y,Ll.z);return this}applyNormalMatrix(e){for(let o=0,f=this.count;o<f;o++)Ll.fromBufferAttribute(this,o),Ll.applyNormalMatrix(e),this.setXYZ(o,Ll.x,Ll.y,Ll.z);return this}transformDirection(e){for(let o=0,f=this.count;o<f;o++)Ll.fromBufferAttribute(this,o),Ll.transformDirection(e),this.setXYZ(o,Ll.x,Ll.y,Ll.z);return this}setX(e,o){return this.normalized&&(o=ei(o,this.array)),this.data.array[e*this.data.stride+this.offset]=o,this}setY(e,o){return this.normalized&&(o=ei(o,this.array)),this.data.array[e*this.data.stride+this.offset+1]=o,this}setZ(e,o){return this.normalized&&(o=ei(o,this.array)),this.data.array[e*this.data.stride+this.offset+2]=o,this}setW(e,o){return this.normalized&&(o=ei(o,this.array)),this.data.array[e*this.data.stride+this.offset+3]=o,this}getX(e){let o=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(o=Rs(o,this.array)),o}getY(e){let o=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(o=Rs(o,this.array)),o}getZ(e){let o=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(o=Rs(o,this.array)),o}getW(e){let o=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(o=Rs(o,this.array)),o}setXY(e,o,f){return e=e*this.data.stride+this.offset,this.normalized&&(o=ei(o,this.array),f=ei(f,this.array)),this.data.array[e+0]=o,this.data.array[e+1]=f,this}setXYZ(e,o,f,y){return e=e*this.data.stride+this.offset,this.normalized&&(o=ei(o,this.array),f=ei(f,this.array),y=ei(y,this.array)),this.data.array[e+0]=o,this.data.array[e+1]=f,this.data.array[e+2]=y,this}setXYZW(e,o,f,y,b){return e=e*this.data.stride+this.offset,this.normalized&&(o=ei(o,this.array),f=ei(f,this.array),y=ei(y,this.array),b=ei(b,this.array)),this.data.array[e+0]=o,this.data.array[e+1]=f,this.data.array[e+2]=y,this.data.array[e+3]=b,this}clone(e){if(e===void 0){C.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const o=[];for(let f=0;f<this.count;f++){const y=f*this.data.stride+this.offset;for(let b=0;b<this.itemSize;b++)o.push(this.data.array[y+b])}return new no(new this.array.constructor(o),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new vh(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){C.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const o=[];for(let f=0;f<this.count;f++){const y=f*this.data.stride+this.offset;for(let b=0;b<this.itemSize;b++)o.push(this.data.array[y+b])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:o,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class B1 extends Xs{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new br(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let vd;const Mf=new je,_h=new je,Bu=new je,_d=new _n,Ru=new _n,Py=new ui,xf=new je,Cf=new je,Hg=new je,R1=new _n,I1=new _n,ky=new _n;class F1 extends Yi{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",vd===void 0){vd=new mi;const o=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),f=new d0(o,5);vd.setIndex([0,1,2,0,2,3]),vd.setAttribute("position",new vh(f,3,0,!1)),vd.setAttribute("uv",new vh(f,2,3,!1))}this.geometry=vd,this.material=e!==void 0?e:new B1,this.center=new _n(.5,.5)}raycast(e,o){e.camera===null&&C.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),_h.setFromMatrixScale(this.matrixWorld),Py.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Bu.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&_h.multiplyScalar(-Bu.z);const f=this.material.rotation;let y,b;f!==0&&(b=Math.cos(f),y=Math.sin(f));const B=this.center;h0(xf.set(-.5,-.5,0),Bu,B,_h,y,b),h0(Cf.set(.5,-.5,0),Bu,B,_h,y,b),h0(Hg.set(.5,.5,0),Bu,B,_h,y,b),R1.set(0,0),I1.set(1,0),ky.set(1,1);let I=e.ray.intersectTriangle(xf,Cf,Hg,!1,Mf);if(I===null&&(h0(Cf.set(-.5,.5,0),Bu,B,_h,y,b),I1.set(0,1),I=e.ray.intersectTriangle(xf,Hg,Cf,!1,Mf),I===null))return;const D=e.ray.origin.distanceTo(Mf);D<e.near||D>e.far||o.push({distance:D,point:Mf.clone(),uv:Ks.getInterpolation(Mf,xf,Cf,Hg,R1,I1,ky,new _n),face:null,object:this})}copy(e,o){return super.copy(e,o),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function h0(S,e,o,f,y,b){_d.subVectors(S,o).addScalar(.5).multiply(f),y!==void 0?(Ru.x=b*_d.x-y*_d.y,Ru.y=y*_d.x+b*_d.y):Ru.copy(_d),S.copy(e),S.x+=Ru.x,S.y+=Ru.y,S.applyMatrix4(Py)}const Wg=new je,i3=new je;class O1 extends Yi{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const o=e.levels;for(let f=0,y=o.length;f<y;f++){const b=o[f];this.addLevel(b.object.clone(),b.distance,b.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,o=0,f=0){o=Math.abs(o);const y=this.levels;let b;for(b=0;b<y.length&&!(o<y[b].distance);b++);return y.splice(b,0,{distance:o,hysteresis:f,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const o=this.levels;if(o.length>0){let f,y;for(f=1,y=o.length;f<y;f++){let b=o[f].distance;if(o[f].object.visible&&(b-=b*o[f].hysteresis),e<b)break}return o[f-1].object}return null}raycast(e,o){if(this.levels.length>0){Wg.setFromMatrixPosition(this.matrixWorld);const y=e.ray.origin.distanceTo(Wg);this.getObjectForDistance(y).raycast(e,o)}}update(e){const o=this.levels;if(o.length>1){Wg.setFromMatrixPosition(e.matrixWorld),i3.setFromMatrixPosition(this.matrixWorld);const f=Wg.distanceTo(i3)/e.zoom;o[0].object.visible=!0;let y,b;for(y=1,b=o.length;y<b;y++){let B=o[y].distance;if(o[y].object.visible&&(B-=B*o[y].hysteresis),f>=B)o[y-1].object.visible=!1,o[y].object.visible=!0;else break}for(this._currentLevel=y-1;y<b;y++)o[y].object.visible=!1}}toJSON(e){const o=super.toJSON(e);this.autoUpdate===!1&&(o.object.autoUpdate=!1),o.object.levels=[];const f=this.levels;for(let y=0,b=f.length;y<b;y++){const B=f[y];o.object.levels.push({object:B.object.uuid,distance:B.distance,hysteresis:B.hysteresis})}return o}}const o3=new je,D1=new lo,zy=new lo,Hc=new je,Gy=new ui,Sf=new je,ba=new Ta,s3=new ui,f0=new Rp;class a3 extends Oo{constructor(e,o){super(e,o),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new ui,this.bindMatrixInverse=new ui,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Qo),this.boundingBox.makeEmpty();const o=e.getAttribute("position");for(let f=0;f<o.count;f++)Sf.fromBufferAttribute(o,f),this.applyBoneTransform(f,Sf),this.boundingBox.expandByPoint(Sf)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ta),this.boundingSphere.makeEmpty();const o=e.getAttribute("position");for(let f=0;f<o.count;f++)Sf.fromBufferAttribute(o,f),this.applyBoneTransform(f,Sf),this.boundingSphere.expandByPoint(Sf)}copy(e,o){return super.copy(e,o),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,o){const f=this.material,y=this.matrixWorld;f!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ba.copy(this.boundingSphere),ba.applyMatrix4(y),e.ray.intersectsSphere(ba)!==!1&&(s3.copy(y).invert(),f0.copy(e.ray).applyMatrix4(s3),!(this.boundingBox!==null&&f0.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,o,f0)))}getVertexPosition(e,o){return super.getVertexPosition(e,o),this.applyBoneTransform(e,o),o}bind(e,o){this.skeleton=e,o===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),o=this.matrixWorld),this.bindMatrix.copy(o),this.bindMatrixInverse.copy(o).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new lo,o=this.geometry.attributes.skinWeight;for(let f=0,y=o.count;f<y;f++){e.fromBufferAttribute(o,f);const b=1/e.manhattanLength();b!==1/0?e.multiplyScalar(b):e.set(1,0,0,0),o.setXYZW(f,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():C.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,o){const f=this.skeleton,y=this.geometry;D1.fromBufferAttribute(y.attributes.skinIndex,e),zy.fromBufferAttribute(y.attributes.skinWeight,e),o3.copy(o).applyMatrix4(this.bindMatrix),o.set(0,0,0);for(let b=0;b<4;b++){const B=zy.getComponent(b);if(B!==0){const I=D1.getComponent(b);Gy.multiplyMatrices(f.bones[I].matrixWorld,f.boneInverses[I]),o.addScaledVector(Hc.copy(o3).applyMatrix4(Gy),B)}}return o.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,o){return C.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,o)}}class Uy extends Yi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class wf extends ps{constructor(e=null,o=1,f=1,y,b,B,I,D,N=Vi,K=Vi,Z,q){super(null,B,I,D,N,K,y,b,Z,q),this.isDataTexture=!0,this.image={data:e,width:o,height:f},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const L1=new ui,Lb=new ui;class g0{constructor(e=[],o=[]){this.uuid=ll(),this.bones=e.slice(0),this.boneInverses=o,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const e=this.bones,o=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),o.length===0)this.calculateInverses();else if(e.length!==o.length){C.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let f=0,y=this.bones.length;f<y;f++)this.boneInverses.push(new ui)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,o=this.bones.length;e<o;e++){const f=new ui;this.bones[e]&&f.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(f)}}pose(){for(let e=0,o=this.bones.length;e<o;e++){const f=this.bones[e];f&&f.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,o=this.bones.length;e<o;e++){const f=this.bones[e];f&&(f.parent&&f.parent.isBone?(f.matrix.copy(f.parent.matrixWorld).invert(),f.matrix.multiply(f.matrixWorld)):f.matrix.copy(f.matrixWorld),f.matrix.decompose(f.position,f.quaternion,f.scale))}}update(){const e=this.bones,o=this.boneInverses,f=this.boneMatrices,y=this.boneTexture;for(let b=0,B=e.length;b<B;b++){const I=e[b]?e[b].matrixWorld:Lb;L1.multiplyMatrices(I,o[b]),L1.toArray(f,b*16)}y!==null&&(y.needsUpdate=!0)}clone(){return new g0(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Vs(e),e=Math.max(e,4);const o=new Float32Array(e*e*4);o.set(this.boneMatrices);const f=new wf(o,e,e,Je,gs);return f.needsUpdate=!0,this.boneMatrices=o,this.boneTexture=f,this.boneTextureSize=e,this}getBoneByName(e){for(let o=0,f=this.bones.length;o<f;o++){const y=this.bones[o];if(y.name===e)return y}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,o){this.uuid=e.uuid;for(let f=0,y=e.bones.length;f<y;f++){const b=e.bones[f];let B=o[b];B===void 0&&(C.warn("THREE.Skeleton: No bone found with UUID:",b),B=new Uy),this.bones.push(B),this.boneInverses.push(new ui().fromArray(e.boneInverses[f]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const o=this.bones,f=this.boneInverses;for(let y=0,b=o.length;y<b;y++){const B=o[y];e.bones.push(B.uuid);const I=f[y];e.boneInverses.push(I.toArray())}return e}}class Tf extends no{constructor(e,o,f,y=1){super(e,o,f),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=y}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Bf=new ui,Ny=new ui,Rf=[],jy=new Qo,P1=new ui,Vg=new Oo,Qg=new Ta;class m0 extends Oo{constructor(e,o,f){super(e,o),this.isInstancedMesh=!0,this.instanceMatrix=new Tf(new Float32Array(f*16),16),this.instanceColor=null,this.count=f,this.boundingBox=null,this.boundingSphere=null;for(let y=0;y<f;y++)this.setMatrixAt(y,P1)}computeBoundingBox(){const e=this.geometry,o=this.count;this.boundingBox===null&&(this.boundingBox=new Qo),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let f=0;f<o;f++)this.getMatrixAt(f,Bf),jy.copy(e.boundingBox).applyMatrix4(Bf),this.boundingBox.union(jy)}computeBoundingSphere(){const e=this.geometry,o=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ta),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let f=0;f<o;f++)this.getMatrixAt(f,Bf),Qg.copy(e.boundingSphere).applyMatrix4(Bf),this.boundingSphere.union(Qg)}copy(e,o){return super.copy(e,o),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,o){o.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,o){o.fromArray(this.instanceMatrix.array,e*16)}raycast(e,o){const f=this.matrixWorld,y=this.count;if(Vg.geometry=this.geometry,Vg.material=this.material,Vg.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Qg.copy(this.boundingSphere),Qg.applyMatrix4(f),e.ray.intersectsSphere(Qg)!==!1))for(let b=0;b<y;b++){this.getMatrixAt(b,Bf),Ny.multiplyMatrices(f,Bf),Vg.matrixWorld=Ny,Vg.raycast(e,Rf);for(let B=0,I=Rf.length;B<I;B++){const D=Rf[B];D.instanceId=b,D.object=this,o.push(D)}Rf.length=0}}setColorAt(e,o){this.instanceColor===null&&(this.instanceColor=new Tf(new Float32Array(this.instanceMatrix.count*3),3)),o.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,o){o.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class ml extends Xs{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new br(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Kg=new je,Hy=new je,Wy=new ui,A0=new Rp,Xg=new Ta;class Ed extends Yi{constructor(e=new mi,o=new ml){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=o,this.updateMorphTargets()}copy(e,o){return super.copy(e,o),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const o=e.attributes.position,f=[0];for(let y=1,b=o.count;y<b;y++)Kg.fromBufferAttribute(o,y-1),Hy.fromBufferAttribute(o,y),f[y]=f[y-1],f[y]+=Kg.distanceTo(Hy);e.setAttribute("lineDistance",new Dr(f,1))}else C.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,o){const f=this.geometry,y=this.matrixWorld,b=e.params.Line.threshold,B=f.drawRange;if(f.boundingSphere===null&&f.computeBoundingSphere(),Xg.copy(f.boundingSphere),Xg.applyMatrix4(y),Xg.radius+=b,e.ray.intersectsSphere(Xg)===!1)return;Wy.copy(y).invert(),A0.copy(e.ray).applyMatrix4(Wy);const I=b/((this.scale.x+this.scale.y+this.scale.z)/3),D=I*I,N=new je,K=new je,Z=new je,q=new je,ee=this.isLineSegments?2:1,ie=f.index,se=f.attributes.position;if(ie!==null){const ne=Math.max(0,B.start),be=Math.min(ie.count,B.start+B.count);for(let fe=ne,xe=be-1;fe<xe;fe+=ee){const Le=ie.getX(fe),He=ie.getX(fe+1);if(N.fromBufferAttribute(se,Le),K.fromBufferAttribute(se,He),A0.distanceSqToSegment(N,K,q,Z)>D)continue;q.applyMatrix4(this.matrixWorld);const et=e.ray.origin.distanceTo(q);et<e.near||et>e.far||o.push({distance:et,point:Z.clone().applyMatrix4(this.matrixWorld),index:fe,face:null,faceIndex:null,object:this})}}else{const ne=Math.max(0,B.start),be=Math.min(se.count,B.start+B.count);for(let fe=ne,xe=be-1;fe<xe;fe+=ee){if(N.fromBufferAttribute(se,fe),K.fromBufferAttribute(se,fe+1),A0.distanceSqToSegment(N,K,q,Z)>D)continue;q.applyMatrix4(this.matrixWorld);const He=e.ray.origin.distanceTo(q);He<e.near||He>e.far||o.push({distance:He,point:Z.clone().applyMatrix4(this.matrixWorld),index:fe,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const o=this.geometry.morphAttributes,f=Object.keys(o);if(f.length>0){const y=o[f[0]];if(y!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let b=0,B=y.length;b<B;b++){const I=y[b].name||String(b);this.morphTargetInfluences.push(0),this.morphTargetDictionary[I]=b}}}}}const Vy=new je,Qy=new je;class Al extends Ed{constructor(e,o){super(e,o),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const o=e.attributes.position,f=[];for(let y=0,b=o.count;y<b;y+=2)Vy.fromBufferAttribute(o,y),Qy.fromBufferAttribute(o,y+1),f[y]=y===0?0:f[y-1],f[y+1]=f[y]+Vy.distanceTo(Qy);e.setAttribute("lineDistance",new Dr(f,1))}else C.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Yg extends Ed{constructor(e,o){super(e,o),this.isLineLoop=!0,this.type="LineLoop"}}class up extends Xs{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new br(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Ky=new ui,k1=new Rp,Eh=new Ta,If=new je;class Xy extends Yi{constructor(e=new mi,o=new up){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=o,this.updateMorphTargets()}copy(e,o){return super.copy(e,o),this.material=e.material,this.geometry=e.geometry,this}raycast(e,o){const f=this.geometry,y=this.matrixWorld,b=e.params.Points.threshold,B=f.drawRange;if(f.boundingSphere===null&&f.computeBoundingSphere(),Eh.copy(f.boundingSphere),Eh.applyMatrix4(y),Eh.radius+=b,e.ray.intersectsSphere(Eh)===!1)return;Ky.copy(y).invert(),k1.copy(e.ray).applyMatrix4(Ky);const I=b/((this.scale.x+this.scale.y+this.scale.z)/3),D=I*I,N=f.index,Z=f.attributes.position;if(N!==null){const q=Math.max(0,B.start),ee=Math.min(N.count,B.start+B.count);for(let ie=q,he=ee;ie<he;ie++){const se=N.getX(ie);If.fromBufferAttribute(Z,se),Yy(If,se,D,y,e,o,this)}}else{const q=Math.max(0,B.start),ee=Math.min(Z.count,B.start+B.count);for(let ie=q,he=ee;ie<he;ie++)If.fromBufferAttribute(Z,ie),Yy(If,ie,D,y,e,o,this)}}updateMorphTargets(){const o=this.geometry.morphAttributes,f=Object.keys(o);if(f.length>0){const y=o[f[0]];if(y!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let b=0,B=y.length;b<B;b++){const I=y[b].name||String(b);this.morphTargetInfluences.push(0),this.morphTargetDictionary[I]=b}}}}}function Yy(S,e,o,f,y,b,B){const I=k1.distanceSqToPoint(S);if(I<o){const D=new je;k1.closestPointToPoint(S,D),D.applyMatrix4(f);const N=y.ray.origin.distanceTo(D);if(N<y.near||N>y.far)return;b.push({distance:N,distanceToRay:Math.sqrt(I),point:D,index:e,face:null,object:B})}}class z1 extends ps{constructor(e,o,f,y,b,B,I,D,N){super(e,o,f,y,b,B,I,D,N),this.isVideoTexture=!0,this.minFilter=B!==void 0?B:ho,this.magFilter=b!==void 0?b:ho,this.generateMipmaps=!1;const K=this;function Z(){K.needsUpdate=!0,e.requestVideoFrameCallback(Z)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(Z)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Jy extends ps{constructor(e,o){super({width:e,height:o}),this.isFramebufferTexture=!0,this.magFilter=Vi,this.minFilter=Vi,this.generateMipmaps=!1,this.needsUpdate=!0}}class G1 extends ps{constructor(e,o,f,y,b,B,I,D,N,K,Z,q){super(null,B,I,D,N,K,y,b,Z,q),this.isCompressedTexture=!0,this.image={width:o,height:f},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Zy extends G1{constructor(e,o,f,y,b,B){super(e,o,f,b,B),this.isCompressedArrayTexture=!0,this.image.depth=y,this.wrapR=yo}}class l3 extends ps{constructor(e,o,f,y,b,B,I,D,N){super(e,o,f,y,b,B,I,D,N),this.isCanvasTexture=!0,this.needsUpdate=!0}}class dp{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return C.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,o){const f=this.getUtoTmapping(e);return this.getPoint(f,o)}getPoints(e=5){const o=[];for(let f=0;f<=e;f++)o.push(this.getPoint(f/e));return o}getSpacedPoints(e=5){const o=[];for(let f=0;f<=e;f++)o.push(this.getPointAt(f/e));return o}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const o=[];let f,y=this.getPoint(0),b=0;o.push(0);for(let B=1;B<=e;B++)f=this.getPoint(B/e),b+=f.distanceTo(y),o.push(b),y=f;return this.cacheArcLengths=o,o}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,o){const f=this.getLengths();let y=0;const b=f.length;let B;o?B=o:B=e*f[b-1];let I=0,D=b-1,N;for(;I<=D;)if(y=Math.floor(I+(D-I)/2),N=f[y]-B,N<0)I=y+1;else if(N>0)D=y-1;else{D=y;break}if(y=D,f[y]===B)return y/(b-1);const K=f[y],q=f[y+1]-K,ee=(B-K)/q;return(y+ee)/(b-1)}getTangent(e,o){let y=e-1e-4,b=e+1e-4;y<0&&(y=0),b>1&&(b=1);const B=this.getPoint(y),I=this.getPoint(b),D=o||(B.isVector2?new _n:new je);return D.copy(I).sub(B).normalize(),D}getTangentAt(e,o){const f=this.getUtoTmapping(e);return this.getTangent(f,o)}computeFrenetFrames(e,o){const f=new je,y=[],b=[],B=[],I=new je,D=new ui;for(let ee=0;ee<=e;ee++){const ie=ee/e;y[ee]=this.getTangentAt(ie,new je)}b[0]=new je,B[0]=new je;let N=Number.MAX_VALUE;const K=Math.abs(y[0].x),Z=Math.abs(y[0].y),q=Math.abs(y[0].z);K<=N&&(N=K,f.set(1,0,0)),Z<=N&&(N=Z,f.set(0,1,0)),q<=N&&f.set(0,0,1),I.crossVectors(y[0],f).normalize(),b[0].crossVectors(y[0],I),B[0].crossVectors(y[0],b[0]);for(let ee=1;ee<=e;ee++){if(b[ee]=b[ee-1].clone(),B[ee]=B[ee-1].clone(),I.crossVectors(y[ee-1],y[ee]),I.length()>Number.EPSILON){I.normalize();const ie=Math.acos(ls(y[ee-1].dot(y[ee]),-1,1));b[ee].applyMatrix4(D.makeRotationAxis(I,ie))}B[ee].crossVectors(y[ee],b[ee])}if(o===!0){let ee=Math.acos(ls(b[0].dot(b[e]),-1,1));ee/=e,y[0].dot(I.crossVectors(b[0],b[e]))>0&&(ee=-ee);for(let ie=1;ie<=e;ie++)b[ie].applyMatrix4(D.makeRotationAxis(y[ie],ee*ie)),B[ie].crossVectors(y[ie],b[ie])}return{tangents:y,normals:b,binormals:B}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Pl extends dp{constructor(e=0,o=0,f=1,y=1,b=0,B=Math.PI*2,I=!1,D=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=o,this.xRadius=f,this.yRadius=y,this.aStartAngle=b,this.aEndAngle=B,this.aClockwise=I,this.aRotation=D}getPoint(e,o){const f=o||new _n,y=Math.PI*2;let b=this.aEndAngle-this.aStartAngle;const B=Math.abs(b)<Number.EPSILON;for(;b<0;)b+=y;for(;b>y;)b-=y;b<Number.EPSILON&&(B?b=0:b=y),this.aClockwise===!0&&!B&&(b===y?b=-y:b=b-y);const I=this.aStartAngle+e*b;let D=this.aX+this.xRadius*Math.cos(I),N=this.aY+this.yRadius*Math.sin(I);if(this.aRotation!==0){const K=Math.cos(this.aRotation),Z=Math.sin(this.aRotation),q=D-this.aX,ee=N-this.aY;D=q*K-ee*Z+this.aX,N=q*Z+ee*K+this.aY}return f.set(D,N)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class qy extends Pl{constructor(e,o,f,y,b,B){super(e,o,f,f,y,b,B),this.isArcCurve=!0,this.type="ArcCurve"}}function U1(){let S=0,e=0,o=0,f=0;function y(b,B,I,D){S=b,e=I,o=-3*b+3*B-2*I-D,f=2*b-2*B+I+D}return{initCatmullRom:function(b,B,I,D,N){y(B,I,N*(I-b),N*(D-B))},initNonuniformCatmullRom:function(b,B,I,D,N,K,Z){let q=(B-b)/N-(I-b)/(N+K)+(I-B)/K,ee=(I-B)/K-(D-B)/(K+Z)+(D-I)/Z;q*=K,ee*=K,y(B,I,q,ee)},calc:function(b){const B=b*b,I=B*b;return S+e*b+o*B+f*I}}}const y0=new je,Iu=new U1,N1=new U1,j1=new U1;class $y extends dp{constructor(e=[],o=!1,f="centripetal",y=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=o,this.curveType=f,this.tension=y}getPoint(e,o=new je){const f=o,y=this.points,b=y.length,B=(b-(this.closed?0:1))*e;let I=Math.floor(B),D=B-I;this.closed?I+=I>0?0:(Math.floor(Math.abs(I)/b)+1)*b:D===0&&I===b-1&&(I=b-2,D=1);let N,K;this.closed||I>0?N=y[(I-1)%b]:(y0.subVectors(y[0],y[1]).add(y[0]),N=y0);const Z=y[I%b],q=y[(I+1)%b];if(this.closed||I+2<b?K=y[(I+2)%b]:(y0.subVectors(y[b-1],y[b-2]).add(y[b-1]),K=y0),this.curveType==="centripetal"||this.curveType==="chordal"){const ee=this.curveType==="chordal"?.5:.25;let ie=Math.pow(N.distanceToSquared(Z),ee),he=Math.pow(Z.distanceToSquared(q),ee),se=Math.pow(q.distanceToSquared(K),ee);he<1e-4&&(he=1),ie<1e-4&&(ie=he),se<1e-4&&(se=he),Iu.initNonuniformCatmullRom(N.x,Z.x,q.x,K.x,ie,he,se),N1.initNonuniformCatmullRom(N.y,Z.y,q.y,K.y,ie,he,se),j1.initNonuniformCatmullRom(N.z,Z.z,q.z,K.z,ie,he,se)}else this.curveType==="catmullrom"&&(Iu.initCatmullRom(N.x,Z.x,q.x,K.x,this.tension),N1.initCatmullRom(N.y,Z.y,q.y,K.y,this.tension),j1.initCatmullRom(N.z,Z.z,q.z,K.z,this.tension));return f.set(Iu.calc(D),N1.calc(D),j1.calc(D)),f}copy(e){super.copy(e),this.points=[];for(let o=0,f=e.points.length;o<f;o++){const y=e.points[o];this.points.push(y.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let o=0,f=this.points.length;o<f;o++){const y=this.points[o];e.points.push(y.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let o=0,f=e.points.length;o<f;o++){const y=e.points[o];this.points.push(new je().fromArray(y))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function ev(S,e,o,f,y){const b=(f-e)*.5,B=(y-o)*.5,I=S*S,D=S*I;return(2*o-2*f+b+B)*D+(-3*o+3*f-2*b-B)*I+b*S+o}function c3(S,e){const o=1-S;return o*o*e}function hp(S,e){return 2*(1-S)*S*e}function Jg(S,e){return S*S*e}function fp(S,e,o,f){return c3(S,e)+hp(S,o)+Jg(S,f)}function p3(S,e){const o=1-S;return o*o*o*e}function tv(S,e){const o=1-S;return 3*o*o*S*e}function u3(S,e){return 3*(1-S)*S*S*e}function d3(S,e){return S*S*S*e}function Zg(S,e,o,f,y){return p3(S,e)+tv(S,o)+u3(S,f)+d3(S,y)}class v0 extends dp{constructor(e=new _n,o=new _n,f=new _n,y=new _n){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=o,this.v2=f,this.v3=y}getPoint(e,o=new _n){const f=o,y=this.v0,b=this.v1,B=this.v2,I=this.v3;return f.set(Zg(e,y.x,b.x,B.x,I.x),Zg(e,y.y,b.y,B.y,I.y)),f}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class nv extends dp{constructor(e=new je,o=new je,f=new je,y=new je){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=o,this.v2=f,this.v3=y}getPoint(e,o=new je){const f=o,y=this.v0,b=this.v1,B=this.v2,I=this.v3;return f.set(Zg(e,y.x,b.x,B.x,I.x),Zg(e,y.y,b.y,B.y,I.y),Zg(e,y.z,b.z,B.z,I.z)),f}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class _0 extends dp{constructor(e=new _n,o=new _n){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=o}getPoint(e,o=new _n){const f=o;return e===1?f.copy(this.v2):(f.copy(this.v2).sub(this.v1),f.multiplyScalar(e).add(this.v1)),f}getPointAt(e,o){return this.getPoint(e,o)}getTangent(e,o=new _n){return o.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,o){return this.getTangent(e,o)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Co extends dp{constructor(e=new je,o=new je){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=o}getPoint(e,o=new je){const f=o;return e===1?f.copy(this.v2):(f.copy(this.v2).sub(this.v1),f.multiplyScalar(e).add(this.v1)),f}getPointAt(e,o){return this.getPoint(e,o)}getTangent(e,o=new je){return o.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,o){return this.getTangent(e,o)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class qg extends dp{constructor(e=new _n,o=new _n,f=new _n){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=o,this.v2=f}getPoint(e,o=new _n){const f=o,y=this.v0,b=this.v1,B=this.v2;return f.set(fp(e,y.x,b.x,B.x),fp(e,y.y,b.y,B.y)),f}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class H1 extends dp{constructor(e=new je,o=new je,f=new je){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=o,this.v2=f}getPoint(e,o=new je){const f=o,y=this.v0,b=this.v1,B=this.v2;return f.set(fp(e,y.x,b.x,B.x),fp(e,y.y,b.y,B.y),fp(e,y.z,b.z,B.z)),f}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class W1 extends dp{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,o=new _n){const f=o,y=this.points,b=(y.length-1)*e,B=Math.floor(b),I=b-B,D=y[B===0?B:B-1],N=y[B],K=y[B>y.length-2?y.length-1:B+1],Z=y[B>y.length-3?y.length-1:B+2];return f.set(ev(I,D.x,N.x,K.x,Z.x),ev(I,D.y,N.y,K.y,Z.y)),f}copy(e){super.copy(e),this.points=[];for(let o=0,f=e.points.length;o<f;o++){const y=e.points[o];this.points.push(y.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let o=0,f=this.points.length;o<f;o++){const y=this.points[o];e.points.push(y.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let o=0,f=e.points.length;o<f;o++){const y=e.points[o];this.points.push(new _n().fromArray(y))}return this}}var V1=Object.freeze({__proto__:null,ArcCurve:qy,CatmullRomCurve3:$y,CubicBezierCurve:v0,CubicBezierCurve3:nv,EllipseCurve:Pl,LineCurve:_0,LineCurve3:Co,QuadraticBezierCurve:qg,QuadraticBezierCurve3:H1,SplineCurve:W1});class rv extends dp{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),o=this.curves[this.curves.length-1].getPoint(1);e.equals(o)||this.curves.push(new _0(o,e))}getPoint(e,o){const f=e*this.getLength(),y=this.getCurveLengths();let b=0;for(;b<y.length;){if(y[b]>=f){const B=y[b]-f,I=this.curves[b],D=I.getLength(),N=D===0?0:1-B/D;return I.getPointAt(N,o)}b++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let o=0;for(let f=0,y=this.curves.length;f<y;f++)o+=this.curves[f].getLength(),e.push(o);return this.cacheLengths=e,e}getSpacedPoints(e=40){const o=[];for(let f=0;f<=e;f++)o.push(this.getPoint(f/e));return this.autoClose&&o.push(o[0]),o}getPoints(e=12){const o=[];let f;for(let y=0,b=this.curves;y<b.length;y++){const B=b[y],I=B.isEllipseCurve?e*2:B.isLineCurve||B.isLineCurve3?1:B.isSplineCurve?e*B.points.length:e,D=B.getPoints(I);for(let N=0;N<D.length;N++){const K=D[N];f&&f.equals(K)||(o.push(K),f=K)}}return this.autoClose&&o.length>1&&!o[o.length-1].equals(o[0])&&o.push(o[0]),o}copy(e){super.copy(e),this.curves=[];for(let o=0,f=e.curves.length;o<f;o++){const y=e.curves[o];this.curves.push(y.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let o=0,f=this.curves.length;o<f;o++){const y=this.curves[o];e.curves.push(y.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let o=0,f=e.curves.length;o<f;o++){const y=e.curves[o];this.curves.push(new V1[y.type]().fromJSON(y))}return this}}class $g extends rv{constructor(e){super(),this.type="Path",this.currentPoint=new _n,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let o=1,f=e.length;o<f;o++)this.lineTo(e[o].x,e[o].y);return this}moveTo(e,o){return this.currentPoint.set(e,o),this}lineTo(e,o){const f=new _0(this.currentPoint.clone(),new _n(e,o));return this.curves.push(f),this.currentPoint.set(e,o),this}quadraticCurveTo(e,o,f,y){const b=new qg(this.currentPoint.clone(),new _n(e,o),new _n(f,y));return this.curves.push(b),this.currentPoint.set(f,y),this}bezierCurveTo(e,o,f,y,b,B){const I=new v0(this.currentPoint.clone(),new _n(e,o),new _n(f,y),new _n(b,B));return this.curves.push(I),this.currentPoint.set(b,B),this}splineThru(e){const o=[this.currentPoint.clone()].concat(e),f=new W1(o);return this.curves.push(f),this.currentPoint.copy(e[e.length-1]),this}arc(e,o,f,y,b,B){const I=this.currentPoint.x,D=this.currentPoint.y;return this.absarc(e+I,o+D,f,y,b,B),this}absarc(e,o,f,y,b,B){return this.absellipse(e,o,f,f,y,b,B),this}ellipse(e,o,f,y,b,B,I,D){const N=this.currentPoint.x,K=this.currentPoint.y;return this.absellipse(e+N,o+K,f,y,b,B,I,D),this}absellipse(e,o,f,y,b,B,I,D){const N=new Pl(e,o,f,y,b,B,I,D);if(this.curves.length>0){const Z=N.getPoint(0);Z.equals(this.currentPoint)||this.lineTo(Z.x,Z.y)}this.curves.push(N);const K=N.getPoint(1);return this.currentPoint.copy(K),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class em extends mi{constructor(e=[new _n(0,-.5),new _n(.5,0),new _n(0,.5)],o=12,f=0,y=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:o,phiStart:f,phiLength:y},o=Math.floor(o),y=ls(y,0,Math.PI*2);const b=[],B=[],I=[],D=[],N=[],K=1/o,Z=new je,q=new _n,ee=new je,ie=new je,he=new je;let se=0,ne=0;for(let be=0;be<=e.length-1;be++)switch(be){case 0:se=e[be+1].x-e[be].x,ne=e[be+1].y-e[be].y,ee.x=ne*1,ee.y=-se,ee.z=ne*0,he.copy(ee),ee.normalize(),D.push(ee.x,ee.y,ee.z);break;case e.length-1:D.push(he.x,he.y,he.z);break;default:se=e[be+1].x-e[be].x,ne=e[be+1].y-e[be].y,ee.x=ne*1,ee.y=-se,ee.z=ne*0,ie.copy(ee),ee.x+=he.x,ee.y+=he.y,ee.z+=he.z,ee.normalize(),D.push(ee.x,ee.y,ee.z),he.copy(ie)}for(let be=0;be<=o;be++){const fe=f+be*K*y,xe=Math.sin(fe),Le=Math.cos(fe);for(let He=0;He<=e.length-1;He++){Z.x=e[He].x*xe,Z.y=e[He].y,Z.z=e[He].x*Le,B.push(Z.x,Z.y,Z.z),q.x=be/o,q.y=He/(e.length-1),I.push(q.x,q.y);const qe=D[3*He+0]*xe,et=D[3*He+1],we=D[3*He+0]*Le;N.push(qe,et,we)}}for(let be=0;be<o;be++)for(let fe=0;fe<e.length-1;fe++){const xe=fe+be*e.length,Le=xe,He=xe+e.length,qe=xe+e.length+1,et=xe+1;b.push(Le,He,et),b.push(qe,et,He)}this.setIndex(b),this.setAttribute("position",new Dr(B,3)),this.setAttribute("uv",new Dr(I,2)),this.setAttribute("normal",new Dr(N,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new em(e.points,e.segments,e.phiStart,e.phiLength)}}class Ff extends em{constructor(e=1,o=1,f=4,y=8){const b=new $g;b.absarc(0,-o/2,e,Math.PI*1.5,0),b.absarc(0,o/2,e,0,Math.PI*.5),super(b.getPoints(f),y),this.type="CapsuleGeometry",this.parameters={radius:e,height:o,capSegments:f,radialSegments:y}}static fromJSON(e){return new Ff(e.radius,e.length,e.capSegments,e.radialSegments)}}class tm extends mi{constructor(e=1,o=32,f=0,y=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:o,thetaStart:f,thetaLength:y},o=Math.max(3,o);const b=[],B=[],I=[],D=[],N=new je,K=new _n;B.push(0,0,0),I.push(0,0,1),D.push(.5,.5);for(let Z=0,q=3;Z<=o;Z++,q+=3){const ee=f+Z/o*y;N.x=e*Math.cos(ee),N.y=e*Math.sin(ee),B.push(N.x,N.y,N.z),I.push(0,0,1),K.x=(B[q]/e+1)/2,K.y=(B[q+1]/e+1)/2,D.push(K.x,K.y)}for(let Z=1;Z<=o;Z++)b.push(Z,Z+1,0);this.setIndex(b),this.setAttribute("position",new Dr(B,3)),this.setAttribute("normal",new Dr(I,3)),this.setAttribute("uv",new Dr(D,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tm(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class bd extends mi{constructor(e=1,o=1,f=1,y=32,b=1,B=!1,I=0,D=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:o,height:f,radialSegments:y,heightSegments:b,openEnded:B,thetaStart:I,thetaLength:D};const N=this;y=Math.floor(y),b=Math.floor(b);const K=[],Z=[],q=[],ee=[];let ie=0;const he=[],se=f/2;let ne=0;be(),B===!1&&(e>0&&fe(!0),o>0&&fe(!1)),this.setIndex(K),this.setAttribute("position",new Dr(Z,3)),this.setAttribute("normal",new Dr(q,3)),this.setAttribute("uv",new Dr(ee,2));function be(){const xe=new je,Le=new je;let He=0;const qe=(o-e)/f;for(let et=0;et<=b;et++){const we=[],We=et/b,Wt=We*(o-e)+e;for(let Rn=0;Rn<=y;Rn++){const Ut=Rn/y,Ht=Ut*D+I,Jt=Math.sin(Ht),Sn=Math.cos(Ht);Le.x=Wt*Jt,Le.y=-We*f+se,Le.z=Wt*Sn,Z.push(Le.x,Le.y,Le.z),xe.set(Jt,qe,Sn).normalize(),q.push(xe.x,xe.y,xe.z),ee.push(Ut,1-We),we.push(ie++)}he.push(we)}for(let et=0;et<y;et++)for(let we=0;we<b;we++){const We=he[we][et],Wt=he[we+1][et],Rn=he[we+1][et+1],Ut=he[we][et+1];K.push(We,Wt,Ut),K.push(Wt,Rn,Ut),He+=6}N.addGroup(ne,He,0),ne+=He}function fe(xe){const Le=ie,He=new _n,qe=new je;let et=0;const we=xe===!0?e:o,We=xe===!0?1:-1;for(let Rn=1;Rn<=y;Rn++)Z.push(0,se*We,0),q.push(0,We,0),ee.push(.5,.5),ie++;const Wt=ie;for(let Rn=0;Rn<=y;Rn++){const Ht=Rn/y*D+I,Jt=Math.cos(Ht),Sn=Math.sin(Ht);qe.x=we*Sn,qe.y=se*We,qe.z=we*Jt,Z.push(qe.x,qe.y,qe.z),q.push(0,We,0),He.x=Jt*.5+.5,He.y=Sn*.5*We+.5,ee.push(He.x,He.y),ie++}for(let Rn=0;Rn<y;Rn++){const Ut=Le+Rn,Ht=Wt+Rn;xe===!0?K.push(Ht,Ht+1,Ut):K.push(Ht+1,Ht,Ut),et+=3}N.addGroup(ne,et,xe===!0?1:2),ne+=et}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new bd(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class nm extends bd{constructor(e=1,o=1,f=32,y=1,b=!1,B=0,I=Math.PI*2){super(0,e,o,f,y,b,B,I),this.type="ConeGeometry",this.parameters={radius:e,height:o,radialSegments:f,heightSegments:y,openEnded:b,thetaStart:B,thetaLength:I}}static fromJSON(e){return new nm(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Fu extends mi{constructor(e=[],o=[],f=1,y=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:o,radius:f,detail:y};const b=[],B=[];I(y),N(f),K(),this.setAttribute("position",new Dr(b,3)),this.setAttribute("normal",new Dr(b.slice(),3)),this.setAttribute("uv",new Dr(B,2)),y===0?this.computeVertexNormals():this.normalizeNormals();function I(be){const fe=new je,xe=new je,Le=new je;for(let He=0;He<o.length;He+=3)ee(o[He+0],fe),ee(o[He+1],xe),ee(o[He+2],Le),D(fe,xe,Le,be)}function D(be,fe,xe,Le){const He=Le+1,qe=[];for(let et=0;et<=He;et++){qe[et]=[];const we=be.clone().lerp(xe,et/He),We=fe.clone().lerp(xe,et/He),Wt=He-et;for(let Rn=0;Rn<=Wt;Rn++)Rn===0&&et===He?qe[et][Rn]=we:qe[et][Rn]=we.clone().lerp(We,Rn/Wt)}for(let et=0;et<He;et++)for(let we=0;we<2*(He-et)-1;we++){const We=Math.floor(we/2);we%2===0?(q(qe[et][We+1]),q(qe[et+1][We]),q(qe[et][We])):(q(qe[et][We+1]),q(qe[et+1][We+1]),q(qe[et+1][We]))}}function N(be){const fe=new je;for(let xe=0;xe<b.length;xe+=3)fe.x=b[xe+0],fe.y=b[xe+1],fe.z=b[xe+2],fe.normalize().multiplyScalar(be),b[xe+0]=fe.x,b[xe+1]=fe.y,b[xe+2]=fe.z}function K(){const be=new je;for(let fe=0;fe<b.length;fe+=3){be.x=b[fe+0],be.y=b[fe+1],be.z=b[fe+2];const xe=se(be)/2/Math.PI+.5,Le=ne(be)/Math.PI+.5;B.push(xe,1-Le)}ie(),Z()}function Z(){for(let be=0;be<B.length;be+=6){const fe=B[be+0],xe=B[be+2],Le=B[be+4],He=Math.max(fe,xe,Le),qe=Math.min(fe,xe,Le);He>.9&&qe<.1&&(fe<.2&&(B[be+0]+=1),xe<.2&&(B[be+2]+=1),Le<.2&&(B[be+4]+=1))}}function q(be){b.push(be.x,be.y,be.z)}function ee(be,fe){const xe=be*3;fe.x=e[xe+0],fe.y=e[xe+1],fe.z=e[xe+2]}function ie(){const be=new je,fe=new je,xe=new je,Le=new je,He=new _n,qe=new _n,et=new _n;for(let we=0,We=0;we<b.length;we+=9,We+=6){be.set(b[we+0],b[we+1],b[we+2]),fe.set(b[we+3],b[we+4],b[we+5]),xe.set(b[we+6],b[we+7],b[we+8]),He.set(B[We+0],B[We+1]),qe.set(B[We+2],B[We+3]),et.set(B[We+4],B[We+5]),Le.copy(be).add(fe).add(xe).divideScalar(3);const Wt=se(Le);he(He,We+0,be,Wt),he(qe,We+2,fe,Wt),he(et,We+4,xe,Wt)}}function he(be,fe,xe,Le){Le<0&&be.x===1&&(B[fe]=be.x-1),xe.x===0&&xe.z===0&&(B[fe]=Le/2/Math.PI+.5)}function se(be){return Math.atan2(be.z,-be.x)}function ne(be){return Math.atan2(-be.y,Math.sqrt(be.x*be.x+be.z*be.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fu(e.vertices,e.indices,e.radius,e.details)}}class Zs extends Fu{constructor(e=1,o=0){const f=(1+Math.sqrt(5))/2,y=1/f,b=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-y,-f,0,-y,f,0,y,-f,0,y,f,-y,-f,0,-y,f,0,y,-f,0,y,f,0,-f,0,-y,f,0,-y,-f,0,y,f,0,y],B=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(b,B,e,o),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:o}}static fromJSON(e){return new Zs(e.radius,e.detail)}}const bh=new je,E0=new je,b0=new je,M0=new Ks;class iv extends mi{constructor(e=null,o=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:o},e!==null){const y=Math.pow(10,4),b=Math.cos(kc*o),B=e.getIndex(),I=e.getAttribute("position"),D=B?B.count:I.count,N=[0,0,0],K=["a","b","c"],Z=new Array(3),q={},ee=[];for(let ie=0;ie<D;ie+=3){B?(N[0]=B.getX(ie),N[1]=B.getX(ie+1),N[2]=B.getX(ie+2)):(N[0]=ie,N[1]=ie+1,N[2]=ie+2);const{a:he,b:se,c:ne}=M0;if(he.fromBufferAttribute(I,N[0]),se.fromBufferAttribute(I,N[1]),ne.fromBufferAttribute(I,N[2]),M0.getNormal(b0),Z[0]=`${Math.round(he.x*y)},${Math.round(he.y*y)},${Math.round(he.z*y)}`,Z[1]=`${Math.round(se.x*y)},${Math.round(se.y*y)},${Math.round(se.z*y)}`,Z[2]=`${Math.round(ne.x*y)},${Math.round(ne.y*y)},${Math.round(ne.z*y)}`,!(Z[0]===Z[1]||Z[1]===Z[2]||Z[2]===Z[0]))for(let be=0;be<3;be++){const fe=(be+1)%3,xe=Z[be],Le=Z[fe],He=M0[K[be]],qe=M0[K[fe]],et=`${xe}_${Le}`,we=`${Le}_${xe}`;we in q&&q[we]?(b0.dot(q[we].normal)<=b&&(ee.push(He.x,He.y,He.z),ee.push(qe.x,qe.y,qe.z)),q[we]=null):et in q||(q[et]={index0:N[be],index1:N[fe],normal:b0.clone()})}}for(const ie in q)if(q[ie]){const{index0:he,index1:se}=q[ie];bh.fromBufferAttribute(I,he),E0.fromBufferAttribute(I,se),ee.push(bh.x,bh.y,bh.z),ee.push(E0.x,E0.y,E0.z)}this.setAttribute("position",new Dr(ee,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Mh extends $g{constructor(e){super(e),this.uuid=ll(),this.type="Shape",this.holes=[]}getPointsHoles(e){const o=[];for(let f=0,y=this.holes.length;f<y;f++)o[f]=this.holes[f].getPoints(e);return o}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let o=0,f=e.holes.length;o<f;o++){const y=e.holes[o];this.holes.push(y.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let o=0,f=this.holes.length;o<f;o++){const y=this.holes[o];e.holes.push(y.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let o=0,f=e.holes.length;o<f;o++){const y=e.holes[o];this.holes.push(new $g().fromJSON(y))}return this}}const ov={triangulate:function(S,e,o=2){const f=e&&e.length,y=f?e[0]*o:S.length;let b=Q1(S,0,y,o,!0);const B=[];if(!b||b.next===b.prev)return B;let I,D,N,K,Z,q,ee;if(f&&(b=f3(S,e,b,o)),S.length>80*o){I=N=S[0],D=K=S[1];for(let ie=o;ie<y;ie+=o)Z=S[ie],q=S[ie+1],Z<I&&(I=Z),q<D&&(D=q),Z>N&&(N=Z),q>K&&(K=q);ee=Math.max(N-I,K-D),ee=ee!==0?32767/ee:0}return rm(b,B,o,I,D,ee,0),B}};function Q1(S,e,o,f,y){let b,B;if(y===b3(S,e,o,f)>0)for(b=e;b<o;b+=f)B=B0(b,S[b],S[b+1],B);else for(b=o-f;b>=e;b-=f)B=B0(b,S[b],S[b+1],B);return B&&w0(B,B.next)&&(Ch(B),B=B.next),B}function xh(S,e){if(!S)return S;e||(e=S);let o=S,f;do if(f=!1,!o.steiner&&(w0(o,o.next)||Cs(o.prev,o,o.next)===0)){if(Ch(o),o=e=o.prev,o===o.next)break;f=!0}else o=o.next;while(f||o!==e);return e}function rm(S,e,o,f,y,b,B){if(!S)return;!B&&b&&y3(S,f,y,b);let I=S,D,N;for(;S.prev!==S.next;){if(D=S.prev,N=S.next,b?x0(S,f,y,b):sv(S)){e.push(D.i/o|0),e.push(S.i/o|0),e.push(N.i/o|0),Ch(S),S=N.next,I=N.next;continue}if(S=N,S===I){B?B===1?(S=h3(xh(S),e,o),rm(S,e,o,f,y,b,2)):B===2&&av(S,e,o,f,y,b):rm(xh(S),e,o,f,y,b,1);break}}}function sv(S){const e=S.prev,o=S,f=S.next;if(Cs(e,o,f)>=0)return!1;const y=e.x,b=o.x,B=f.x,I=e.y,D=o.y,N=f.y,K=y<b?y<B?y:B:b<B?b:B,Z=I<D?I<N?I:N:D<N?D:N,q=y>b?y>B?y:B:b>B?b:B,ee=I>D?I>N?I:N:D>N?D:N;let ie=f.next;for(;ie!==e;){if(ie.x>=K&&ie.x<=q&&ie.y>=Z&&ie.y<=ee&&Of(y,I,b,D,B,N,ie.x,ie.y)&&Cs(ie.prev,ie,ie.next)>=0)return!1;ie=ie.next}return!0}function x0(S,e,o,f){const y=S.prev,b=S,B=S.next;if(Cs(y,b,B)>=0)return!1;const I=y.x,D=b.x,N=B.x,K=y.y,Z=b.y,q=B.y,ee=I<D?I<N?I:N:D<N?D:N,ie=K<Z?K<q?K:q:Z<q?Z:q,he=I>D?I>N?I:N:D>N?D:N,se=K>Z?K>q?K:q:Z>q?Z:q,ne=im(ee,ie,e,o,f),be=im(he,se,e,o,f);let fe=S.prevZ,xe=S.nextZ;for(;fe&&fe.z>=ne&&xe&&xe.z<=be;){if(fe.x>=ee&&fe.x<=he&&fe.y>=ie&&fe.y<=se&&fe!==y&&fe!==B&&Of(I,K,D,Z,N,q,fe.x,fe.y)&&Cs(fe.prev,fe,fe.next)>=0||(fe=fe.prevZ,xe.x>=ee&&xe.x<=he&&xe.y>=ie&&xe.y<=se&&xe!==y&&xe!==B&&Of(I,K,D,Z,N,q,xe.x,xe.y)&&Cs(xe.prev,xe,xe.next)>=0))return!1;xe=xe.nextZ}for(;fe&&fe.z>=ne;){if(fe.x>=ee&&fe.x<=he&&fe.y>=ie&&fe.y<=se&&fe!==y&&fe!==B&&Of(I,K,D,Z,N,q,fe.x,fe.y)&&Cs(fe.prev,fe,fe.next)>=0)return!1;fe=fe.prevZ}for(;xe&&xe.z<=be;){if(xe.x>=ee&&xe.x<=he&&xe.y>=ie&&xe.y<=se&&xe!==y&&xe!==B&&Of(I,K,D,Z,N,q,xe.x,xe.y)&&Cs(xe.prev,xe,xe.next)>=0)return!1;xe=xe.nextZ}return!0}function h3(S,e,o){let f=S;do{const y=f.prev,b=f.next.next;!w0(y,b)&&K1(y,f,f.next,b)&&Kp(y,b)&&Kp(b,y)&&(e.push(y.i/o|0),e.push(f.i/o|0),e.push(b.i/o|0),Ch(f),Ch(f.next),f=S=b),f=f.next}while(f!==S);return xh(f)}function av(S,e,o,f,y,b){let B=S;do{let I=B.next.next;for(;I!==B.prev;){if(B.i!==I.i&&_3(B,I)){let D=lv(B,I);B=xh(B,B.next),D=xh(D,D.next),rm(B,e,o,f,y,b,0),rm(D,e,o,f,y,b,0);return}I=I.next}B=B.next}while(B!==S)}function f3(S,e,o,f){const y=[];let b,B,I,D,N;for(b=0,B=e.length;b<B;b++)I=e[b]*f,D=b<B-1?e[b+1]*f:S.length,N=Q1(S,I,D,f,!1),N===N.next&&(N.steiner=!0),y.push(v3(N));for(y.sort(g3),b=0;b<y.length;b++)o=C0(y[b],o);return o}function g3(S,e){return S.x-e.x}function C0(S,e){const o=m3(S,e);if(!o)return e;const f=lv(o,S);return xh(f,f.next),xh(o,o.next)}function m3(S,e){let o=e,f=-1/0,y;const b=S.x,B=S.y;do{if(B<=o.y&&B>=o.next.y&&o.next.y!==o.y){const q=o.x+(B-o.y)*(o.next.x-o.x)/(o.next.y-o.y);if(q<=b&&q>f&&(f=q,y=o.x<o.next.x?o:o.next,q===b))return y}o=o.next}while(o!==e);if(!y)return null;const I=y,D=y.x,N=y.y;let K=1/0,Z;o=y;do b>=o.x&&o.x>=D&&b!==o.x&&Of(B<N?b:f,B,D,N,B<N?f:b,B,o.x,o.y)&&(Z=Math.abs(B-o.y)/(b-o.x),Kp(o,S)&&(Z<K||Z===K&&(o.x>y.x||o.x===y.x&&A3(y,o)))&&(y=o,K=Z)),o=o.next;while(o!==I);return y}function A3(S,e){return Cs(S.prev,S,e.prev)<0&&Cs(e.next,S,S.next)<0}function y3(S,e,o,f){let y=S;do y.z===0&&(y.z=im(y.x,y.y,e,o,f)),y.prevZ=y.prev,y.nextZ=y.next,y=y.next;while(y!==S);y.prevZ.nextZ=null,y.prevZ=null,S0(y)}function S0(S){let e,o,f,y,b,B,I,D,N=1;do{for(o=S,S=null,b=null,B=0;o;){for(B++,f=o,I=0,e=0;e<N&&(I++,f=f.nextZ,!!f);e++);for(D=N;I>0||D>0&&f;)I!==0&&(D===0||!f||o.z<=f.z)?(y=o,o=o.nextZ,I--):(y=f,f=f.nextZ,D--),b?b.nextZ=y:S=y,y.prevZ=b,b=y;o=f}b.nextZ=null,N*=2}while(B>1);return S}function im(S,e,o,f,y){return S=(S-o)*y|0,e=(e-f)*y|0,S=(S|S<<8)&16711935,S=(S|S<<4)&252645135,S=(S|S<<2)&858993459,S=(S|S<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,S|e<<1}function v3(S){let e=S,o=S;do(e.x<o.x||e.x===o.x&&e.y<o.y)&&(o=e),e=e.next;while(e!==S);return o}function Of(S,e,o,f,y,b,B,I){return(y-B)*(e-I)>=(S-B)*(b-I)&&(S-B)*(f-I)>=(o-B)*(e-I)&&(o-B)*(b-I)>=(y-B)*(f-I)}function _3(S,e){return S.next.i!==e.i&&S.prev.i!==e.i&&!E3(S,e)&&(Kp(S,e)&&Kp(e,S)&&om(S,e)&&(Cs(S.prev,S,e.prev)||Cs(S,e.prev,e))||w0(S,e)&&Cs(S.prev,S,S.next)>0&&Cs(e.prev,e,e.next)>0)}function Cs(S,e,o){return(e.y-S.y)*(o.x-e.x)-(e.x-S.x)*(o.y-e.y)}function w0(S,e){return S.x===e.x&&S.y===e.y}function K1(S,e,o,f){const y=Df(Cs(S,e,o)),b=Df(Cs(S,e,f)),B=Df(Cs(o,f,S)),I=Df(Cs(o,f,e));return!!(y!==b&&B!==I||y===0&&T0(S,o,e)||b===0&&T0(S,f,e)||B===0&&T0(o,S,f)||I===0&&T0(o,e,f))}function T0(S,e,o){return e.x<=Math.max(S.x,o.x)&&e.x>=Math.min(S.x,o.x)&&e.y<=Math.max(S.y,o.y)&&e.y>=Math.min(S.y,o.y)}function Df(S){return S>0?1:S<0?-1:0}function E3(S,e){let o=S;do{if(o.i!==S.i&&o.next.i!==S.i&&o.i!==e.i&&o.next.i!==e.i&&K1(o,o.next,S,e))return!0;o=o.next}while(o!==S);return!1}function Kp(S,e){return Cs(S.prev,S,S.next)<0?Cs(S,e,S.next)>=0&&Cs(S,S.prev,e)>=0:Cs(S,e,S.prev)<0||Cs(S,S.next,e)<0}function om(S,e){let o=S,f=!1;const y=(S.x+e.x)/2,b=(S.y+e.y)/2;do o.y>b!=o.next.y>b&&o.next.y!==o.y&&y<(o.next.x-o.x)*(b-o.y)/(o.next.y-o.y)+o.x&&(f=!f),o=o.next;while(o!==S);return f}function lv(S,e){const o=new X1(S.i,S.x,S.y),f=new X1(e.i,e.x,e.y),y=S.next,b=e.prev;return S.next=e,e.prev=S,o.next=y,y.prev=o,f.next=o,o.prev=f,b.next=f,f.prev=b,f}function B0(S,e,o,f){const y=new X1(S,e,o);return f?(y.next=f.next,y.prev=f,f.next.prev=y,f.next=y):(y.prev=y,y.next=y),y}function Ch(S){S.next.prev=S.prev,S.prev.next=S.next,S.prevZ&&(S.prevZ.nextZ=S.nextZ),S.nextZ&&(S.nextZ.prevZ=S.prevZ)}function X1(S,e,o){this.i=S,this.x=e,this.y=o,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function b3(S,e,o,f){let y=0;for(let b=e,B=o-f;b<o;b+=f)y+=(S[B]-S[b])*(S[b+1]+S[B+1]),B=b;return y}class Sc{static area(e){const o=e.length;let f=0;for(let y=o-1,b=0;b<o;y=b++)f+=e[y].x*e[b].y-e[b].x*e[y].y;return f*.5}static isClockWise(e){return Sc.area(e)<0}static triangulateShape(e,o){const f=[],y=[],b=[];R0(e),Xp(f,e);let B=e.length;o.forEach(R0);for(let D=0;D<o.length;D++)y.push(B),B+=o[D].length,Xp(f,o[D]);const I=ov.triangulate(f,y);for(let D=0;D<I.length;D+=3)b.push(I.slice(D,D+3));return b}}function R0(S){const e=S.length;e>2&&S[e-1].equals(S[0])&&S.pop()}function Xp(S,e){for(let o=0;o<e.length;o++)S.push(e[o].x),S.push(e[o].y)}class Sh extends mi{constructor(e=new Mh([new _n(.5,.5),new _n(-.5,.5),new _n(-.5,-.5),new _n(.5,-.5)]),o={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:o},e=Array.isArray(e)?e:[e];const f=this,y=[],b=[];for(let I=0,D=e.length;I<D;I++){const N=e[I];B(N)}this.setAttribute("position",new Dr(y,3)),this.setAttribute("uv",new Dr(b,2)),this.computeVertexNormals();function B(I){const D=[],N=o.curveSegments!==void 0?o.curveSegments:12,K=o.steps!==void 0?o.steps:1,Z=o.depth!==void 0?o.depth:1;let q=o.bevelEnabled!==void 0?o.bevelEnabled:!0,ee=o.bevelThickness!==void 0?o.bevelThickness:.2,ie=o.bevelSize!==void 0?o.bevelSize:ee-.1,he=o.bevelOffset!==void 0?o.bevelOffset:0,se=o.bevelSegments!==void 0?o.bevelSegments:3;const ne=o.extrudePath,be=o.UVGenerator!==void 0?o.UVGenerator:M3;let fe,xe=!1,Le,He,qe,et;ne&&(fe=ne.getSpacedPoints(K),xe=!0,q=!1,Le=ne.computeFrenetFrames(K,!1),He=new je,qe=new je,et=new je),q||(se=0,ee=0,ie=0,he=0);const we=I.extractPoints(N);let We=we.shape;const Wt=we.holes;if(!Sc.isClockWise(We)){We=We.reverse();for(let tt=0,qn=Wt.length;tt<qn;tt++){const An=Wt[tt];Sc.isClockWise(An)&&(Wt[tt]=An.reverse())}}const Ut=Sc.triangulateShape(We,Wt),Ht=We;for(let tt=0,qn=Wt.length;tt<qn;tt++){const An=Wt[tt];We=We.concat(An)}function Jt(tt,qn,An){return qn||C.error("THREE.ExtrudeGeometry: vec does not exist"),tt.clone().addScaledVector(qn,An)}const Sn=We.length,cn=Ut.length;function En(tt,qn,An){let tr,wn,Hr;const jn=tt.x-qn.x,Tr=tt.y-qn.y,ri=An.x-tt.x,Di=An.y-tt.y,ts=jn*jn+Tr*Tr,Ye=jn*Di-Tr*ri;if(Math.abs(Ye)>Number.EPSILON){const Fe=Math.sqrt(ts),an=Math.sqrt(ri*ri+Di*Di),Kn=qn.x-Tr/Fe,Hn=qn.y+jn/Fe,$n=An.x-Di/an,Wr=An.y+ri/an,dr=(($n-Kn)*Di-(Wr-Hn)*ri)/(jn*Di-Tr*ri);tr=Kn+jn*dr-tt.x,wn=Hn+Tr*dr-tt.y;const on=tr*tr+wn*wn;if(on<=2)return new _n(tr,wn);Hr=Math.sqrt(on/2)}else{let Fe=!1;jn>Number.EPSILON?ri>Number.EPSILON&&(Fe=!0):jn<-Number.EPSILON?ri<-Number.EPSILON&&(Fe=!0):Math.sign(Tr)===Math.sign(Di)&&(Fe=!0),Fe?(tr=-Tr,wn=jn,Hr=Math.sqrt(ts)):(tr=jn,wn=Tr,Hr=Math.sqrt(ts/2))}return new _n(tr/Hr,wn/Hr)}const In=[];for(let tt=0,qn=Ht.length,An=qn-1,tr=tt+1;tt<qn;tt++,An++,tr++)An===qn&&(An=0),tr===qn&&(tr=0),In[tt]=En(Ht[tt],Ht[An],Ht[tr]);const kn=[];let wr,Zt=In.concat();for(let tt=0,qn=Wt.length;tt<qn;tt++){const An=Wt[tt];wr=[];for(let tr=0,wn=An.length,Hr=wn-1,jn=tr+1;tr<wn;tr++,Hr++,jn++)Hr===wn&&(Hr=0),jn===wn&&(jn=0),wr[tr]=En(An[tr],An[Hr],An[jn]);kn.push(wr),Zt=Zt.concat(wr)}for(let tt=0;tt<se;tt++){const qn=tt/se,An=ee*Math.cos(qn*Math.PI/2),tr=ie*Math.sin(qn*Math.PI/2)+he;for(let wn=0,Hr=Ht.length;wn<Hr;wn++){const jn=Jt(Ht[wn],In[wn],tr);kr(jn.x,jn.y,-An)}for(let wn=0,Hr=Wt.length;wn<Hr;wn++){const jn=Wt[wn];wr=kn[wn];for(let Tr=0,ri=jn.length;Tr<ri;Tr++){const Di=Jt(jn[Tr],wr[Tr],tr);kr(Di.x,Di.y,-An)}}}const zn=ie+he;for(let tt=0;tt<Sn;tt++){const qn=q?Jt(We[tt],Zt[tt],zn):We[tt];xe?(qe.copy(Le.normals[0]).multiplyScalar(qn.x),He.copy(Le.binormals[0]).multiplyScalar(qn.y),et.copy(fe[0]).add(qe).add(He),kr(et.x,et.y,et.z)):kr(qn.x,qn.y,0)}for(let tt=1;tt<=K;tt++)for(let qn=0;qn<Sn;qn++){const An=q?Jt(We[qn],Zt[qn],zn):We[qn];xe?(qe.copy(Le.normals[tt]).multiplyScalar(An.x),He.copy(Le.binormals[tt]).multiplyScalar(An.y),et.copy(fe[tt]).add(qe).add(He),kr(et.x,et.y,et.z)):kr(An.x,An.y,Z/K*tt)}for(let tt=se-1;tt>=0;tt--){const qn=tt/se,An=ee*Math.cos(qn*Math.PI/2),tr=ie*Math.sin(qn*Math.PI/2)+he;for(let wn=0,Hr=Ht.length;wn<Hr;wn++){const jn=Jt(Ht[wn],In[wn],tr);kr(jn.x,jn.y,Z+An)}for(let wn=0,Hr=Wt.length;wn<Hr;wn++){const jn=Wt[wn];wr=kn[wn];for(let Tr=0,ri=jn.length;Tr<ri;Tr++){const Di=Jt(jn[Tr],wr[Tr],tr);xe?kr(Di.x,Di.y+fe[K-1].y,fe[K-1].x+An):kr(Di.x,Di.y,Z+An)}}}hn(),ir();function hn(){const tt=y.length/3;if(q){let qn=0,An=Sn*qn;for(let tr=0;tr<cn;tr++){const wn=Ut[tr];hi(wn[2]+An,wn[1]+An,wn[0]+An)}qn=K+se*2,An=Sn*qn;for(let tr=0;tr<cn;tr++){const wn=Ut[tr];hi(wn[0]+An,wn[1]+An,wn[2]+An)}}else{for(let qn=0;qn<cn;qn++){const An=Ut[qn];hi(An[2],An[1],An[0])}for(let qn=0;qn<cn;qn++){const An=Ut[qn];hi(An[0]+Sn*K,An[1]+Sn*K,An[2]+Sn*K)}}f.addGroup(tt,y.length/3-tt,0)}function ir(){const tt=y.length/3;let qn=0;Cr(Ht,qn),qn+=Ht.length;for(let An=0,tr=Wt.length;An<tr;An++){const wn=Wt[An];Cr(wn,qn),qn+=wn.length}f.addGroup(tt,y.length/3-tt,1)}function Cr(tt,qn){let An=tt.length;for(;--An>=0;){const tr=An;let wn=An-1;wn<0&&(wn=tt.length-1);for(let Hr=0,jn=K+se*2;Hr<jn;Hr++){const Tr=Sn*Hr,ri=Sn*(Hr+1),Di=qn+tr+Tr,ts=qn+wn+Tr,Ye=qn+wn+ri,Fe=qn+tr+ri;ci(Di,ts,Ye,Fe)}}}function kr(tt,qn,An){D.push(tt),D.push(qn),D.push(An)}function hi(tt,qn,An){Lo(tt),Lo(qn),Lo(An);const tr=y.length/3,wn=be.generateTopUV(f,y,tr-3,tr-2,tr-1);bi(wn[0]),bi(wn[1]),bi(wn[2])}function ci(tt,qn,An,tr){Lo(tt),Lo(qn),Lo(tr),Lo(qn),Lo(An),Lo(tr);const wn=y.length/3,Hr=be.generateSideWallUV(f,y,wn-6,wn-3,wn-2,wn-1);bi(Hr[0]),bi(Hr[1]),bi(Hr[3]),bi(Hr[1]),bi(Hr[2]),bi(Hr[3])}function Lo(tt){y.push(D[tt*3+0]),y.push(D[tt*3+1]),y.push(D[tt*3+2])}function bi(tt){b.push(tt.x),b.push(tt.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),o=this.parameters.shapes,f=this.parameters.options;return ro(o,f,e)}static fromJSON(e,o){const f=[];for(let b=0,B=e.shapes.length;b<B;b++){const I=o[e.shapes[b]];f.push(I)}const y=e.options.extrudePath;return y!==void 0&&(e.options.extrudePath=new V1[y.type]().fromJSON(y)),new Sh(f,e.options)}}const M3={generateTopUV:function(S,e,o,f,y){const b=e[o*3],B=e[o*3+1],I=e[f*3],D=e[f*3+1],N=e[y*3],K=e[y*3+1];return[new _n(b,B),new _n(I,D),new _n(N,K)]},generateSideWallUV:function(S,e,o,f,y,b){const B=e[o*3],I=e[o*3+1],D=e[o*3+2],N=e[f*3],K=e[f*3+1],Z=e[f*3+2],q=e[y*3],ee=e[y*3+1],ie=e[y*3+2],he=e[b*3],se=e[b*3+1],ne=e[b*3+2];return Math.abs(I-K)<Math.abs(B-N)?[new _n(B,1-D),new _n(N,1-Z),new _n(q,1-ie),new _n(he,1-ne)]:[new _n(I,1-D),new _n(K,1-Z),new _n(ee,1-ie),new _n(se,1-ne)]}};function ro(S,e,o){if(o.shapes=[],Array.isArray(S))for(let f=0,y=S.length;f<y;f++){const b=S[f];o.shapes.push(b.uuid)}else o.shapes.push(S.uuid);return o.options=Object.assign({},e),e.extrudePath!==void 0&&(o.options.extrudePath=e.extrudePath.toJSON()),o}class sm extends Fu{constructor(e=1,o=0){const f=(1+Math.sqrt(5))/2,y=[-1,f,0,1,f,0,-1,-f,0,1,-f,0,0,-1,f,0,1,f,0,-1,-f,0,1,-f,f,0,-1,f,0,1,-f,0,-1,-f,0,1],b=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(y,b,e,o),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:o}}static fromJSON(e){return new sm(e.radius,e.detail)}}class Lf extends Fu{constructor(e=1,o=0){const f=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],y=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(f,y,e,o),this.type="OctahedronGeometry",this.parameters={radius:e,detail:o}}static fromJSON(e){return new Lf(e.radius,e.detail)}}class am extends mi{constructor(e=.5,o=1,f=32,y=1,b=0,B=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:o,thetaSegments:f,phiSegments:y,thetaStart:b,thetaLength:B},f=Math.max(3,f),y=Math.max(1,y);const I=[],D=[],N=[],K=[];let Z=e;const q=(o-e)/y,ee=new je,ie=new _n;for(let he=0;he<=y;he++){for(let se=0;se<=f;se++){const ne=b+se/f*B;ee.x=Z*Math.cos(ne),ee.y=Z*Math.sin(ne),D.push(ee.x,ee.y,ee.z),N.push(0,0,1),ie.x=(ee.x/o+1)/2,ie.y=(ee.y/o+1)/2,K.push(ie.x,ie.y)}Z+=q}for(let he=0;he<y;he++){const se=he*(f+1);for(let ne=0;ne<f;ne++){const be=ne+se,fe=be,xe=be+f+1,Le=be+f+2,He=be+1;I.push(fe,xe,He),I.push(xe,Le,He)}}this.setIndex(I),this.setAttribute("position",new Dr(D,3)),this.setAttribute("normal",new Dr(N,3)),this.setAttribute("uv",new Dr(K,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new am(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class lm extends mi{constructor(e=new Mh([new _n(0,.5),new _n(-.5,-.5),new _n(.5,-.5)]),o=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:o};const f=[],y=[],b=[],B=[];let I=0,D=0;if(Array.isArray(e)===!1)N(e);else for(let K=0;K<e.length;K++)N(e[K]),this.addGroup(I,D,K),I+=D,D=0;this.setIndex(f),this.setAttribute("position",new Dr(y,3)),this.setAttribute("normal",new Dr(b,3)),this.setAttribute("uv",new Dr(B,2));function N(K){const Z=y.length/3,q=K.extractPoints(o);let ee=q.shape;const ie=q.holes;Sc.isClockWise(ee)===!1&&(ee=ee.reverse());for(let se=0,ne=ie.length;se<ne;se++){const be=ie[se];Sc.isClockWise(be)===!0&&(ie[se]=be.reverse())}const he=Sc.triangulateShape(ee,ie);for(let se=0,ne=ie.length;se<ne;se++){const be=ie[se];ee=ee.concat(be)}for(let se=0,ne=ee.length;se<ne;se++){const be=ee[se];y.push(be.x,be.y,0),b.push(0,0,1),B.push(be.x,be.y)}for(let se=0,ne=he.length;se<ne;se++){const be=he[se],fe=be[0]+Z,xe=be[1]+Z,Le=be[2]+Z;f.push(fe,xe,Le),D+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),o=this.parameters.shapes;return x3(o,e)}static fromJSON(e,o){const f=[];for(let y=0,b=e.shapes.length;y<b;y++){const B=o[e.shapes[y]];f.push(B)}return new lm(f,e.curveSegments)}}function x3(S,e){if(e.shapes=[],Array.isArray(S))for(let o=0,f=S.length;o<f;o++){const y=S[o];e.shapes.push(y.uuid)}else e.shapes.push(S.uuid);return e}class Pf extends mi{constructor(e=1,o=32,f=16,y=0,b=Math.PI*2,B=0,I=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:o,heightSegments:f,phiStart:y,phiLength:b,thetaStart:B,thetaLength:I},o=Math.max(3,Math.floor(o)),f=Math.max(2,Math.floor(f));const D=Math.min(B+I,Math.PI);let N=0;const K=[],Z=new je,q=new je,ee=[],ie=[],he=[],se=[];for(let ne=0;ne<=f;ne++){const be=[],fe=ne/f;let xe=0;ne===0&&B===0?xe=.5/o:ne===f&&D===Math.PI&&(xe=-.5/o);for(let Le=0;Le<=o;Le++){const He=Le/o;Z.x=-e*Math.cos(y+He*b)*Math.sin(B+fe*I),Z.y=e*Math.cos(B+fe*I),Z.z=e*Math.sin(y+He*b)*Math.sin(B+fe*I),ie.push(Z.x,Z.y,Z.z),q.copy(Z).normalize(),he.push(q.x,q.y,q.z),se.push(He+xe,1-fe),be.push(N++)}K.push(be)}for(let ne=0;ne<f;ne++)for(let be=0;be<o;be++){const fe=K[ne][be+1],xe=K[ne][be],Le=K[ne+1][be],He=K[ne+1][be+1];(ne!==0||B>0)&&ee.push(fe,xe,He),(ne!==f-1||D<Math.PI)&&ee.push(xe,Le,He)}this.setIndex(ee),this.setAttribute("position",new Dr(ie,3)),this.setAttribute("normal",new Dr(he,3)),this.setAttribute("uv",new Dr(se,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class cm extends Fu{constructor(e=1,o=0){const f=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],y=[2,1,0,0,3,2,1,3,0,2,3,1];super(f,y,e,o),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:o}}static fromJSON(e){return new cm(e.radius,e.detail)}}class pm extends mi{constructor(e=1,o=.4,f=12,y=48,b=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:o,radialSegments:f,tubularSegments:y,arc:b},f=Math.floor(f),y=Math.floor(y);const B=[],I=[],D=[],N=[],K=new je,Z=new je,q=new je;for(let ee=0;ee<=f;ee++)for(let ie=0;ie<=y;ie++){const he=ie/y*b,se=ee/f*Math.PI*2;Z.x=(e+o*Math.cos(se))*Math.cos(he),Z.y=(e+o*Math.cos(se))*Math.sin(he),Z.z=o*Math.sin(se),I.push(Z.x,Z.y,Z.z),K.x=e*Math.cos(he),K.y=e*Math.sin(he),q.subVectors(Z,K).normalize(),D.push(q.x,q.y,q.z),N.push(ie/y),N.push(ee/f)}for(let ee=1;ee<=f;ee++)for(let ie=1;ie<=y;ie++){const he=(y+1)*ee+ie-1,se=(y+1)*(ee-1)+ie-1,ne=(y+1)*(ee-1)+ie,be=(y+1)*ee+ie;B.push(he,se,be),B.push(se,ne,be)}this.setIndex(B),this.setAttribute("position",new Dr(I,3)),this.setAttribute("normal",new Dr(D,3)),this.setAttribute("uv",new Dr(N,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new pm(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class um extends mi{constructor(e=1,o=.4,f=64,y=8,b=2,B=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:o,tubularSegments:f,radialSegments:y,p:b,q:B},f=Math.floor(f),y=Math.floor(y);const I=[],D=[],N=[],K=[],Z=new je,q=new je,ee=new je,ie=new je,he=new je,se=new je,ne=new je;for(let fe=0;fe<=f;++fe){const xe=fe/f*b*Math.PI*2;be(xe,b,B,e,ee),be(xe+.01,b,B,e,ie),se.subVectors(ie,ee),ne.addVectors(ie,ee),he.crossVectors(se,ne),ne.crossVectors(he,se),he.normalize(),ne.normalize();for(let Le=0;Le<=y;++Le){const He=Le/y*Math.PI*2,qe=-o*Math.cos(He),et=o*Math.sin(He);Z.x=ee.x+(qe*ne.x+et*he.x),Z.y=ee.y+(qe*ne.y+et*he.y),Z.z=ee.z+(qe*ne.z+et*he.z),D.push(Z.x,Z.y,Z.z),q.subVectors(Z,ee).normalize(),N.push(q.x,q.y,q.z),K.push(fe/f),K.push(Le/y)}}for(let fe=1;fe<=f;fe++)for(let xe=1;xe<=y;xe++){const Le=(y+1)*(fe-1)+(xe-1),He=(y+1)*fe+(xe-1),qe=(y+1)*fe+xe,et=(y+1)*(fe-1)+xe;I.push(Le,He,et),I.push(He,qe,et)}this.setIndex(I),this.setAttribute("position",new Dr(D,3)),this.setAttribute("normal",new Dr(N,3)),this.setAttribute("uv",new Dr(K,2));function be(fe,xe,Le,He,qe){const et=Math.cos(fe),we=Math.sin(fe),We=Le/xe*fe,Wt=Math.cos(We);qe.x=He*(2+Wt)*.5*et,qe.y=He*(2+Wt)*we*.5,qe.z=He*Math.sin(We)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new um(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class dm extends mi{constructor(e=new H1(new je(-1,-1,0),new je(-1,1,0),new je(1,1,0)),o=64,f=1,y=8,b=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:o,radius:f,radialSegments:y,closed:b};const B=e.computeFrenetFrames(o,b);this.tangents=B.tangents,this.normals=B.normals,this.binormals=B.binormals;const I=new je,D=new je,N=new _n;let K=new je;const Z=[],q=[],ee=[],ie=[];he(),this.setIndex(ie),this.setAttribute("position",new Dr(Z,3)),this.setAttribute("normal",new Dr(q,3)),this.setAttribute("uv",new Dr(ee,2));function he(){for(let fe=0;fe<o;fe++)se(fe);se(b===!1?o:0),be(),ne()}function se(fe){K=e.getPointAt(fe/o,K);const xe=B.normals[fe],Le=B.binormals[fe];for(let He=0;He<=y;He++){const qe=He/y*Math.PI*2,et=Math.sin(qe),we=-Math.cos(qe);D.x=we*xe.x+et*Le.x,D.y=we*xe.y+et*Le.y,D.z=we*xe.z+et*Le.z,D.normalize(),q.push(D.x,D.y,D.z),I.x=K.x+f*D.x,I.y=K.y+f*D.y,I.z=K.z+f*D.z,Z.push(I.x,I.y,I.z)}}function ne(){for(let fe=1;fe<=o;fe++)for(let xe=1;xe<=y;xe++){const Le=(y+1)*(fe-1)+(xe-1),He=(y+1)*fe+(xe-1),qe=(y+1)*fe+xe,et=(y+1)*(fe-1)+xe;ie.push(Le,He,et),ie.push(He,qe,et)}}function be(){for(let fe=0;fe<=o;fe++)for(let xe=0;xe<=y;xe++)N.x=fe/o,N.y=xe/y,ee.push(N.x,N.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new dm(new V1[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class cv extends mi{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const o=[],f=new Set,y=new je,b=new je;if(e.index!==null){const B=e.attributes.position,I=e.index;let D=e.groups;D.length===0&&(D=[{start:0,count:I.count,materialIndex:0}]);for(let N=0,K=D.length;N<K;++N){const Z=D[N],q=Z.start,ee=Z.count;for(let ie=q,he=q+ee;ie<he;ie+=3)for(let se=0;se<3;se++){const ne=I.getX(ie+se),be=I.getX(ie+(se+1)%3);y.fromBufferAttribute(B,ne),b.fromBufferAttribute(B,be),pv(y,b,f)===!0&&(o.push(y.x,y.y,y.z),o.push(b.x,b.y,b.z))}}}else{const B=e.attributes.position;for(let I=0,D=B.count/3;I<D;I++)for(let N=0;N<3;N++){const K=3*I+N,Z=3*I+(N+1)%3;y.fromBufferAttribute(B,K),b.fromBufferAttribute(B,Z),pv(y,b,f)===!0&&(o.push(y.x,y.y,y.z),o.push(b.x,b.y,b.z))}}this.setAttribute("position",new Dr(o,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function pv(S,e,o){const f=`${S.x},${S.y},${S.z}-${e.x},${e.y},${e.z}`,y=`${e.x},${e.y},${e.z}-${S.x},${S.y},${S.z}`;return o.has(f)===!0||o.has(y)===!0?!1:(o.add(f),o.add(y),!0)}var uv=Object.freeze({__proto__:null,BoxGeometry:Fl,CapsuleGeometry:Ff,CircleGeometry:tm,ConeGeometry:nm,CylinderGeometry:bd,DodecahedronGeometry:Zs,EdgesGeometry:iv,ExtrudeGeometry:Sh,IcosahedronGeometry:sm,LatheGeometry:em,OctahedronGeometry:Lf,PlaneGeometry:Pp,PolyhedronGeometry:Fu,RingGeometry:am,ShapeGeometry:lm,SphereGeometry:Pf,TetrahedronGeometry:cm,TorusGeometry:pm,TorusKnotGeometry:um,TubeGeometry:dm,WireframeGeometry:cv});class dv extends Xs{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new br(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class hv extends ai{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Y1 extends Xs{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new br(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new br(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Li,this.normalScale=new _n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class J1 extends Y1{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new _n(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return ls(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(o){this.ior=(1+.4*o)/(1-.4*o)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new br(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new br(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new br(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class kf extends Xs{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new br(16777215),this.specular=new br(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new br(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Li,this.normalScale=new _n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Or,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Z1 extends Xs{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new br(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new br(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Li,this.normalScale=new _n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class fv extends Xs{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Li,this.normalScale=new _n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class gv extends Xs{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new br(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new br(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Li,this.normalScale=new _n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Or,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class mv extends Xs{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new br(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Li,this.normalScale=new _n(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Av extends ml{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function wc(S,e,o){return q1(S)?new S.constructor(S.subarray(e,o!==void 0?o:S.length)):S.slice(e,o)}function wh(S,e,o){return!S||!o&&S.constructor===e?S:typeof e.BYTES_PER_ELEMENT=="number"?new e(S):Array.prototype.slice.call(S)}function q1(S){return ArrayBuffer.isView(S)&&!(S instanceof DataView)}function Tc(S){function e(y,b){return S[y]-S[b]}const o=S.length,f=new Array(o);for(let y=0;y!==o;++y)f[y]=y;return f.sort(e),f}function Md(S,e,o){const f=S.length,y=new S.constructor(f);for(let b=0,B=0;B!==f;++b){const I=o[b]*e;for(let D=0;D!==e;++D)y[B++]=S[I+D]}return y}function I0(S,e,o,f){let y=1,b=S[0];for(;b!==void 0&&b[f]===void 0;)b=S[y++];if(b===void 0)return;let B=b[f];if(B!==void 0)if(Array.isArray(B))do B=b[f],B!==void 0&&(e.push(b.time),o.push.apply(o,B)),b=S[y++];while(b!==void 0);else if(B.toArray!==void 0)do B=b[f],B!==void 0&&(e.push(b.time),B.toArray(o,o.length)),b=S[y++];while(b!==void 0);else do B=b[f],B!==void 0&&(e.push(b.time),o.push(B)),b=S[y++];while(b!==void 0)}function yv(S,e,o,f,y=30){const b=S.clone();b.name=e;const B=[];for(let D=0;D<b.tracks.length;++D){const N=b.tracks[D],K=N.getValueSize(),Z=[],q=[];for(let ee=0;ee<N.times.length;++ee){const ie=N.times[ee]*y;if(!(ie<o||ie>=f)){Z.push(N.times[ee]);for(let he=0;he<K;++he)q.push(N.values[ee*K+he])}}Z.length!==0&&(N.times=wh(Z,N.times.constructor),N.values=wh(q,N.values.constructor),B.push(N))}b.tracks=B;let I=1/0;for(let D=0;D<b.tracks.length;++D)I>b.tracks[D].times[0]&&(I=b.tracks[D].times[0]);for(let D=0;D<b.tracks.length;++D)b.tracks[D].shift(-1*I);return b.resetDuration(),b}function $1(S,e=0,o=S,f=30){f<=0&&(f=30);const y=o.tracks.length,b=e/f;for(let B=0;B<y;++B){const I=o.tracks[B],D=I.ValueTypeName;if(D==="bool"||D==="string")continue;const N=S.tracks.find(function(ne){return ne.name===I.name&&ne.ValueTypeName===D});if(N===void 0)continue;let K=0;const Z=I.getValueSize();I.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(K=Z/3);let q=0;const ee=N.getValueSize();N.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(q=ee/3);const ie=I.times.length-1;let he;if(b<=I.times[0]){const ne=K,be=Z-K;he=wc(I.values,ne,be)}else if(b>=I.times[ie]){const ne=ie*Z+K,be=ne+Z-K;he=wc(I.values,ne,be)}else{const ne=I.createInterpolant(),be=K,fe=Z-K;ne.evaluate(b),he=wc(ne.resultBuffer,be,fe)}D==="quaternion"&&new aa().fromArray(he).normalize().conjugate().toArray(he);const se=N.times.length;for(let ne=0;ne<se;++ne){const be=ne*ee+q;if(D==="quaternion")aa.multiplyQuaternionsFlat(N.values,be,he,0,N.values,be);else{const fe=ee-q*2;for(let xe=0;xe<fe;++xe)N.values[be+xe]-=he[xe]}}}return S.blendMode=Hu,S}const eA={arraySlice:wc,convertArray:wh,isTypedArray:q1,getKeyframeOrder:Tc,sortedArray:Md,flattenJSON:I0,subclip:yv,makeClipAdditive:$1};class Wc{constructor(e,o,f,y){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=y!==void 0?y:new o.constructor(f),this.sampleValues=o,this.valueSize=f,this.settings=null,this.DefaultSettings_={}}evaluate(e){const o=this.parameterPositions;let f=this._cachedIndex,y=o[f],b=o[f-1];e:{t:{let B;n:{r:if(!(e<y)){for(let I=f+2;;){if(y===void 0){if(e<b)break r;return f=o.length,this._cachedIndex=f,this.copySampleValue_(f-1)}if(f===I)break;if(b=y,y=o[++f],e<y)break t}B=o.length;break n}if(!(e>=b)){const I=o[1];e<I&&(f=2,b=I);for(let D=f-2;;){if(b===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(f===D)break;if(y=b,b=o[--f-1],e>=b)break t}B=f,f=0;break n}break e}for(;f<B;){const I=f+B>>>1;e<o[I]?B=I:f=I+1}if(y=o[f],b=o[f-1],b===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(y===void 0)return f=o.length,this._cachedIndex=f,this.copySampleValue_(f-1)}this._cachedIndex=f,this.intervalChanged_(f,b,y)}return this.interpolate_(f,b,e,y)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const o=this.resultBuffer,f=this.sampleValues,y=this.valueSize,b=e*y;for(let B=0;B!==y;++B)o[B]=f[b+B];return o}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class vv extends Wc{constructor(e,o,f,y){super(e,o,f,y),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:$p,endingEnd:$p}}intervalChanged_(e,o,f){const y=this.parameterPositions;let b=e-2,B=e+1,I=y[b],D=y[B];if(I===void 0)switch(this.getSettings_().endingStart){case Dc:b=e,I=2*o-f;break;case eu:b=y.length-2,I=o+y[b]-y[b+1];break;default:b=e,I=f}if(D===void 0)switch(this.getSettings_().endingEnd){case Dc:B=e,D=2*f-o;break;case eu:B=1,D=f+y[1]-y[0];break;default:B=e-1,D=o}const N=(f-o)*.5,K=this.valueSize;this._weightPrev=N/(o-I),this._weightNext=N/(D-f),this._offsetPrev=b*K,this._offsetNext=B*K}interpolate_(e,o,f,y){const b=this.resultBuffer,B=this.sampleValues,I=this.valueSize,D=e*I,N=D-I,K=this._offsetPrev,Z=this._offsetNext,q=this._weightPrev,ee=this._weightNext,ie=(f-o)/(y-o),he=ie*ie,se=he*ie,ne=-q*se+2*q*he-q*ie,be=(1+q)*se+(-1.5-2*q)*he+(-.5+q)*ie+1,fe=(-1-ee)*se+(1.5+ee)*he+.5*ie,xe=ee*se-ee*he;for(let Le=0;Le!==I;++Le)b[Le]=ne*B[K+Le]+be*B[N+Le]+fe*B[D+Le]+xe*B[Z+Le];return b}}class hm extends Wc{constructor(e,o,f,y){super(e,o,f,y)}interpolate_(e,o,f,y){const b=this.resultBuffer,B=this.sampleValues,I=this.valueSize,D=e*I,N=D-I,K=(f-o)/(y-o),Z=1-K;for(let q=0;q!==I;++q)b[q]=B[N+q]*Z+B[D+q]*K;return b}}class _v extends Wc{constructor(e,o,f,y){super(e,o,f,y)}interpolate_(e){return this.copySampleValue_(e-1)}}class qa{constructor(e,o,f,y){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(o===void 0||o.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=wh(o,this.TimeBufferType),this.values=wh(f,this.ValueBufferType),this.setInterpolation(y||this.DefaultInterpolation)}static toJSON(e){const o=e.constructor;let f;if(o.toJSON!==this.toJSON)f=o.toJSON(e);else{f={name:e.name,times:wh(e.times,Array),values:wh(e.values,Array)};const y=e.getInterpolation();y!==e.DefaultInterpolation&&(f.interpolation=y)}return f.type=e.ValueTypeName,f}InterpolantFactoryMethodDiscrete(e){return new _v(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new hm(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new vv(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let o;switch(e){case ra:o=this.InterpolantFactoryMethodDiscrete;break;case ju:o=this.InterpolantFactoryMethodLinear;break;case Gh:o=this.InterpolantFactoryMethodSmooth;break}if(o===void 0){const f="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(f);return C.warn("THREE.KeyframeTrack:",f),this}return this.createInterpolant=o,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return ra;case this.InterpolantFactoryMethodLinear:return ju;case this.InterpolantFactoryMethodSmooth:return Gh}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const o=this.times;for(let f=0,y=o.length;f!==y;++f)o[f]+=e}return this}scale(e){if(e!==1){const o=this.times;for(let f=0,y=o.length;f!==y;++f)o[f]*=e}return this}trim(e,o){const f=this.times,y=f.length;let b=0,B=y-1;for(;b!==y&&f[b]<e;)++b;for(;B!==-1&&f[B]>o;)--B;if(++B,b!==0||B!==y){b>=B&&(B=Math.max(B,1),b=B-1);const I=this.getValueSize();this.times=wc(f,b,B),this.values=wc(this.values,b*I,B*I)}return this}validate(){let e=!0;const o=this.getValueSize();o-Math.floor(o)!==0&&(C.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const f=this.times,y=this.values,b=f.length;b===0&&(C.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let B=null;for(let I=0;I!==b;I++){const D=f[I];if(typeof D=="number"&&isNaN(D)){C.error("THREE.KeyframeTrack: Time is not a valid number.",this,I,D),e=!1;break}if(B!==null&&B>D){C.error("THREE.KeyframeTrack: Out of order keys.",this,I,D,B),e=!1;break}B=D}if(y!==void 0&&q1(y))for(let I=0,D=y.length;I!==D;++I){const N=y[I];if(isNaN(N)){C.error("THREE.KeyframeTrack: Value is not a valid number.",this,I,N),e=!1;break}}return e}optimize(){const e=wc(this.times),o=wc(this.values),f=this.getValueSize(),y=this.getInterpolation()===Gh,b=e.length-1;let B=1;for(let I=1;I<b;++I){let D=!1;const N=e[I],K=e[I+1];if(N!==K&&(I!==1||N!==e[0]))if(y)D=!0;else{const Z=I*f,q=Z-f,ee=Z+f;for(let ie=0;ie!==f;++ie){const he=o[Z+ie];if(he!==o[q+ie]||he!==o[ee+ie]){D=!0;break}}}if(D){if(I!==B){e[B]=e[I];const Z=I*f,q=B*f;for(let ee=0;ee!==f;++ee)o[q+ee]=o[Z+ee]}++B}}if(b>0){e[B]=e[b];for(let I=b*f,D=B*f,N=0;N!==f;++N)o[D+N]=o[I+N];++B}return B!==e.length?(this.times=wc(e,0,B),this.values=wc(o,0,B*f)):(this.times=e,this.values=o),this}clone(){const e=wc(this.times,0),o=wc(this.values,0),f=this.constructor,y=new f(this.name,e,o);return y.createInterpolant=this.createInterpolant,y}}qa.prototype.TimeBufferType=Float32Array,qa.prototype.ValueBufferType=Float32Array,qa.prototype.DefaultInterpolation=ju;class nc extends qa{}nc.prototype.ValueTypeName="bool",nc.prototype.ValueBufferType=Array,nc.prototype.DefaultInterpolation=ra,nc.prototype.InterpolantFactoryMethodLinear=void 0,nc.prototype.InterpolantFactoryMethodSmooth=void 0;class tA extends qa{}tA.prototype.ValueTypeName="color";class fm extends qa{}fm.prototype.ValueTypeName="number";class Ev extends Wc{constructor(e,o,f,y){super(e,o,f,y)}interpolate_(e,o,f,y){const b=this.resultBuffer,B=this.sampleValues,I=this.valueSize,D=(f-o)/(y-o);let N=e*I;for(let K=N+I;N!==K;N+=4)aa.slerpFlat(b,0,B,N-I,B,N,D);return b}}class xd extends qa{InterpolantFactoryMethodLinear(e){return new Ev(this.times,this.values,this.getValueSize(),e)}}xd.prototype.ValueTypeName="quaternion",xd.prototype.DefaultInterpolation=ju,xd.prototype.InterpolantFactoryMethodSmooth=void 0;class Ou extends qa{}Ou.prototype.ValueTypeName="string",Ou.prototype.ValueBufferType=Array,Ou.prototype.DefaultInterpolation=ra,Ou.prototype.InterpolantFactoryMethodLinear=void 0,Ou.prototype.InterpolantFactoryMethodSmooth=void 0;class gm extends qa{}gm.prototype.ValueTypeName="vector";class mm{constructor(e,o=-1,f,y=tu){this.name=e,this.tracks=f,this.duration=o,this.blendMode=y,this.uuid=ll(),this.duration<0&&this.resetDuration()}static parse(e){const o=[],f=e.tracks,y=1/(e.fps||1);for(let B=0,I=f.length;B!==I;++B)o.push(S3(f[B]).scale(y));const b=new this(e.name,e.duration,o,e.blendMode);return b.uuid=e.uuid,b}static toJSON(e){const o=[],f=e.tracks,y={name:e.name,duration:e.duration,tracks:o,uuid:e.uuid,blendMode:e.blendMode};for(let b=0,B=f.length;b!==B;++b)o.push(qa.toJSON(f[b]));return y}static CreateFromMorphTargetSequence(e,o,f,y){const b=o.length,B=[];for(let I=0;I<b;I++){let D=[],N=[];D.push((I+b-1)%b,I,(I+1)%b),N.push(0,1,0);const K=Tc(D);D=Md(D,1,K),N=Md(N,1,K),!y&&D[0]===0&&(D.push(b),N.push(N[0])),B.push(new fm(".morphTargetInfluences["+o[I].name+"]",D,N).scale(1/f))}return new this(e,-1,B)}static findByName(e,o){let f=e;if(!Array.isArray(e)){const y=e;f=y.geometry&&y.geometry.animations||y.animations}for(let y=0;y<f.length;y++)if(f[y].name===o)return f[y];return null}static CreateClipsFromMorphTargetSequences(e,o,f){const y={},b=/^([\w-]*?)([\d]+)$/;for(let I=0,D=e.length;I<D;I++){const N=e[I],K=N.name.match(b);if(K&&K.length>1){const Z=K[1];let q=y[Z];q||(y[Z]=q=[]),q.push(N)}}const B=[];for(const I in y)B.push(this.CreateFromMorphTargetSequence(I,y[I],o,f));return B}static parseAnimation(e,o){if(!e)return C.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const f=function(Z,q,ee,ie,he){if(ee.length!==0){const se=[],ne=[];I0(ee,se,ne,ie),se.length!==0&&he.push(new Z(q,se,ne))}},y=[],b=e.name||"default",B=e.fps||30,I=e.blendMode;let D=e.length||-1;const N=e.hierarchy||[];for(let Z=0;Z<N.length;Z++){const q=N[Z].keys;if(!(!q||q.length===0))if(q[0].morphTargets){const ee={};let ie;for(ie=0;ie<q.length;ie++)if(q[ie].morphTargets)for(let he=0;he<q[ie].morphTargets.length;he++)ee[q[ie].morphTargets[he]]=-1;for(const he in ee){const se=[],ne=[];for(let be=0;be!==q[ie].morphTargets.length;++be){const fe=q[ie];se.push(fe.time),ne.push(fe.morphTarget===he?1:0)}y.push(new fm(".morphTargetInfluence["+he+"]",se,ne))}D=ee.length*B}else{const ee=".bones["+o[Z].name+"]";f(gm,ee+".position",q,"pos",y),f(xd,ee+".quaternion",q,"rot",y),f(gm,ee+".scale",q,"scl",y)}}return y.length===0?null:new this(b,D,y,I)}resetDuration(){const e=this.tracks;let o=0;for(let f=0,y=e.length;f!==y;++f){const b=this.tracks[f];o=Math.max(o,b.times[b.times.length-1])}return this.duration=o,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let o=0;o<this.tracks.length;o++)e=e&&this.tracks[o].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let o=0;o<this.tracks.length;o++)e.push(this.tracks[o].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function C3(S){switch(S.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return fm;case"vector":case"vector2":case"vector3":case"vector4":return gm;case"color":return tA;case"quaternion":return xd;case"bool":case"boolean":return nc;case"string":return Ou}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+S)}function S3(S){if(S.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=C3(S.type);if(S.times===void 0){const o=[],f=[];I0(S.keys,o,f,"value"),S.times=o,S.values=f}return e.parse!==void 0?e.parse(S):new e(S.name,S.times,S.values,S.interpolation)}const Cd={enabled:!1,files:{},add:function(S,e){this.enabled!==!1&&(this.files[S]=e)},get:function(S){if(this.enabled!==!1)return this.files[S]},remove:function(S){delete this.files[S]},clear:function(){this.files={}}};class zf{constructor(e,o,f){const y=this;let b=!1,B=0,I=0,D;const N=[];this.onStart=void 0,this.onLoad=e,this.onProgress=o,this.onError=f,this.itemStart=function(K){I++,b===!1&&y.onStart!==void 0&&y.onStart(K,B,I),b=!0},this.itemEnd=function(K){B++,y.onProgress!==void 0&&y.onProgress(K,B,I),B===I&&(b=!1,y.onLoad!==void 0&&y.onLoad())},this.itemError=function(K){y.onError!==void 0&&y.onError(K)},this.resolveURL=function(K){return D?D(K):K},this.setURLModifier=function(K){return D=K,this},this.addHandler=function(K,Z){return N.push(K,Z),this},this.removeHandler=function(K){const Z=N.indexOf(K);return Z!==-1&&N.splice(Z,2),this},this.getHandler=function(K){for(let Z=0,q=N.length;Z<q;Z+=2){const ee=N[Z],ie=N[Z+1];if(ee.global&&(ee.lastIndex=0),ee.test(K))return ie}return null}}}const nA=new zf;class yl{constructor(e){this.manager=e!==void 0?e:nA,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,o){const f=this;return new Promise(function(y,b){f.load(e,y,o,b)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}const Du={};class w3 extends Error{constructor(e,o){super(e),this.response=o}}class Lu extends yl{constructor(e){super(e)}load(e,o,f,y){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const b=Cd.get(e);if(b!==void 0)return this.manager.itemStart(e),setTimeout(()=>{o&&o(b),this.manager.itemEnd(e)},0),b;if(Du[e]!==void 0){Du[e].push({onLoad:o,onProgress:f,onError:y});return}Du[e]=[],Du[e].push({onLoad:o,onProgress:f,onError:y});const B=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),I=this.mimeType,D=this.responseType;fetch(B).then(N=>{if(N.status===200||N.status===0){if(N.status===0&&C.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream=="undefined"||N.body===void 0||N.body.getReader===void 0)return N;const K=Du[e],Z=N.body.getReader(),q=N.headers.get("Content-Length")||N.headers.get("X-File-Size"),ee=q?parseInt(q):0,ie=ee!==0;let he=0;const se=new ReadableStream({start(ne){be();function be(){Z.read().then(({done:fe,value:xe})=>{if(fe)ne.close();else{he+=xe.byteLength;const Le=new ProgressEvent("progress",{lengthComputable:ie,loaded:he,total:ee});for(let He=0,qe=K.length;He<qe;He++){const et=K[He];et.onProgress&&et.onProgress(Le)}ne.enqueue(xe),be()}})}}});return new Response(se)}else throw new w3(`fetch for "${N.url}" responded with ${N.status}: ${N.statusText}`,N)}).then(N=>{switch(D){case"arraybuffer":return N.arrayBuffer();case"blob":return N.blob();case"document":return N.text().then(K=>new DOMParser().parseFromString(K,I));case"json":return N.json();default:if(I===void 0)return N.text();{const Z=/charset="?([^;"\s]*)"?/i.exec(I),q=Z&&Z[1]?Z[1].toLowerCase():void 0,ee=new TextDecoder(q);return N.arrayBuffer().then(ie=>ee.decode(ie))}}}).then(N=>{Cd.add(e,N);const K=Du[e];delete Du[e];for(let Z=0,q=K.length;Z<q;Z++){const ee=K[Z];ee.onLoad&&ee.onLoad(N)}}).catch(N=>{const K=Du[e];if(K===void 0)throw this.manager.itemError(e),N;delete Du[e];for(let Z=0,q=K.length;Z<q;Z++){const ee=K[Z];ee.onError&&ee.onError(N)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class rc extends yl{constructor(e){super(e)}load(e,o,f,y){const b=this,B=new Lu(this.manager);B.setPath(this.path),B.setRequestHeader(this.requestHeader),B.setWithCredentials(this.withCredentials),B.load(e,function(I){try{o(b.parse(JSON.parse(I)))}catch(D){y?y(D):C.error(D),b.manager.itemError(e)}},f,y)}parse(e){const o=[];for(let f=0;f<e.length;f++){const y=mm.parse(e[f]);o.push(y)}return o}}class T3 extends yl{constructor(e){super(e)}load(e,o,f,y){const b=this,B=[],I=new G1,D=new Lu(this.manager);D.setPath(this.path),D.setResponseType("arraybuffer"),D.setRequestHeader(this.requestHeader),D.setWithCredentials(b.withCredentials);let N=0;function K(Z){D.load(e[Z],function(q){const ee=b.parse(q,!0);B[Z]={width:ee.width,height:ee.height,format:ee.format,mipmaps:ee.mipmaps},N+=1,N===6&&(ee.mipmapCount===1&&(I.minFilter=ho),I.image=B,I.format=ee.format,I.needsUpdate=!0,o&&o(I))},f,y)}if(Array.isArray(e))for(let Z=0,q=e.length;Z<q;++Z)K(Z);else D.load(e,function(Z){const q=b.parse(Z,!0);if(q.isCubemap){const ee=q.mipmaps.length/q.mipmapCount;for(let ie=0;ie<ee;ie++){B[ie]={mipmaps:[]};for(let he=0;he<q.mipmapCount;he++)B[ie].mipmaps.push(q.mipmaps[ie*q.mipmapCount+he]),B[ie].format=q.format,B[ie].width=q.width,B[ie].height=q.height}I.image=B}else I.image.width=q.width,I.image.height=q.height,I.mipmaps=q.mipmaps;q.mipmapCount===1&&(I.minFilter=ho),I.format=q.format,I.needsUpdate=!0,o&&o(I)},f,y);return I}}class Gf extends yl{constructor(e){super(e)}load(e,o,f,y){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const b=this,B=Cd.get(e);if(B!==void 0)return b.manager.itemStart(e),setTimeout(function(){o&&o(B),b.manager.itemEnd(e)},0),B;const I=xp("img");function D(){K(),Cd.add(e,this),o&&o(this),b.manager.itemEnd(e)}function N(Z){K(),y&&y(Z),b.manager.itemError(e),b.manager.itemEnd(e)}function K(){I.removeEventListener("load",D,!1),I.removeEventListener("error",N,!1)}return I.addEventListener("load",D,!1),I.addEventListener("error",N,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(I.crossOrigin=this.crossOrigin),b.manager.itemStart(e),I.src=e,I}}class B3 extends yl{constructor(e){super(e)}load(e,o,f,y){const b=new Es;b.colorSpace=Qn;const B=new Gf(this.manager);B.setCrossOrigin(this.crossOrigin),B.setPath(this.path);let I=0;function D(N){B.load(e[N],function(K){b.images[N]=K,I++,I===6&&(b.needsUpdate=!0,o&&o(b))},void 0,y)}for(let N=0;N<e.length;++N)D(N);return b}}class R3 extends yl{constructor(e){super(e)}load(e,o,f,y){const b=this,B=new wf,I=new Lu(this.manager);return I.setResponseType("arraybuffer"),I.setRequestHeader(this.requestHeader),I.setPath(this.path),I.setWithCredentials(b.withCredentials),I.load(e,function(D){const N=b.parse(D);N&&(N.image!==void 0?B.image=N.image:N.data!==void 0&&(B.image.width=N.width,B.image.height=N.height,B.image.data=N.data),B.wrapS=N.wrapS!==void 0?N.wrapS:yo,B.wrapT=N.wrapT!==void 0?N.wrapT:yo,B.magFilter=N.magFilter!==void 0?N.magFilter:ho,B.minFilter=N.minFilter!==void 0?N.minFilter:ho,B.anisotropy=N.anisotropy!==void 0?N.anisotropy:1,N.colorSpace!==void 0?B.colorSpace=N.colorSpace:N.encoding!==void 0&&(B.encoding=N.encoding),N.flipY!==void 0&&(B.flipY=N.flipY),N.format!==void 0&&(B.format=N.format),N.type!==void 0&&(B.type=N.type),N.mipmaps!==void 0&&(B.mipmaps=N.mipmaps,B.minFilter=Fo),N.mipmapCount===1&&(B.minFilter=ho),N.generateMipmaps!==void 0&&(B.generateMipmaps=N.generateMipmaps),B.needsUpdate=!0,o&&o(B,N))},f,y),B}}class bv extends yl{constructor(e){super(e)}load(e,o,f,y){const b=new ps,B=new Gf(this.manager);return B.setCrossOrigin(this.crossOrigin),B.setPath(this.path),B.load(e,function(I){b.image=I,b.needsUpdate=!0,o!==void 0&&o(b)},f,y),b}}class Sd extends Yi{constructor(e,o=1){super(),this.isLight=!0,this.type="Light",this.color=new br(e),this.intensity=o}dispose(){}copy(e,o){return super.copy(e,o),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const o=super.toJSON(e);return o.object.color=this.color.getHex(),o.object.intensity=this.intensity,this.groundColor!==void 0&&(o.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(o.object.distance=this.distance),this.angle!==void 0&&(o.object.angle=this.angle),this.decay!==void 0&&(o.object.decay=this.decay),this.penumbra!==void 0&&(o.object.penumbra=this.penumbra),this.shadow!==void 0&&(o.object.shadow=this.shadow.toJSON()),o}}class Mv extends Sd{constructor(e,o,f){super(e,f),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Yi.DEFAULT_UP),this.updateMatrix(),this.groundColor=new br(o)}copy(e,o){return super.copy(e,o),this.groundColor.copy(e.groundColor),this}}const rA=new ui,xv=new je,da=new je;class iA{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new _n(512,512),this.map=null,this.mapPass=null,this.matrix=new ui,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new ch,this._frameExtents=new _n(1,1),this._viewportCount=1,this._viewports=[new lo(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const o=this.camera,f=this.matrix;xv.setFromMatrixPosition(e.matrixWorld),o.position.copy(xv),da.setFromMatrixPosition(e.target.matrixWorld),o.lookAt(da),o.updateMatrixWorld(),rA.multiplyMatrices(o.projectionMatrix,o.matrixWorldInverse),this._frustum.setFromProjectionMatrix(rA),f.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),f.multiply(rA)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class I3 extends iA{constructor(){super(new Ji(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const o=this.camera,f=hc*2*e.angle*this.focus,y=this.mapSize.width/this.mapSize.height,b=e.distance||o.far;(f!==o.fov||y!==o.aspect||b!==o.far)&&(o.fov=f,o.aspect=y,o.far=b,o.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Cv extends Sd{constructor(e,o,f=0,y=Math.PI/3,b=0,B=2){super(e,o),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Yi.DEFAULT_UP),this.updateMatrix(),this.target=new Yi,this.distance=f,this.angle=y,this.penumbra=b,this.decay=B,this.map=null,this.shadow=new I3}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,o){return super.copy(e,o),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const Sv=new ui,vo=new je,F0=new je;class F3 extends iA{constructor(){super(new Ji(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new _n(4,2),this._viewportCount=6,this._viewports=[new lo(2,1,1,1),new lo(0,1,1,1),new lo(3,1,1,1),new lo(1,1,1,1),new lo(3,0,1,1),new lo(1,0,1,1)],this._cubeDirections=[new je(1,0,0),new je(-1,0,0),new je(0,0,1),new je(0,0,-1),new je(0,1,0),new je(0,-1,0)],this._cubeUps=[new je(0,1,0),new je(0,1,0),new je(0,1,0),new je(0,1,0),new je(0,0,1),new je(0,0,-1)]}updateMatrices(e,o=0){const f=this.camera,y=this.matrix,b=e.distance||f.far;b!==f.far&&(f.far=b,f.updateProjectionMatrix()),vo.setFromMatrixPosition(e.matrixWorld),f.position.copy(vo),F0.copy(f.position),F0.add(this._cubeDirections[o]),f.up.copy(this._cubeUps[o]),f.lookAt(F0),f.updateMatrixWorld(),y.makeTranslation(-vo.x,-vo.y,-vo.z),Sv.multiplyMatrices(f.projectionMatrix,f.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Sv)}}class wv extends Sd{constructor(e,o,f=0,y=2){super(e,o),this.isPointLight=!0,this.type="PointLight",this.distance=f,this.decay=y,this.shadow=new F3}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,o){return super.copy(e,o),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class O0 extends iA{constructor(){super(new yf(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Tv extends Sd{constructor(e,o){super(e,o),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Yi.DEFAULT_UP),this.updateMatrix(),this.target=new Yi,this.shadow=new O0}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Bv extends Sd{constructor(e,o){super(e,o),this.isAmbientLight=!0,this.type="AmbientLight"}}class Ti extends Sd{constructor(e,o,f=10,y=10){super(e,o),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=f,this.height=y}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const o=super.toJSON(e);return o.object.width=this.width,o.object.height=this.height,o}}class oA{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new je)}set(e){for(let o=0;o<9;o++)this.coefficients[o].copy(e[o]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,o){const f=e.x,y=e.y,b=e.z,B=this.coefficients;return o.copy(B[0]).multiplyScalar(.282095),o.addScaledVector(B[1],.488603*y),o.addScaledVector(B[2],.488603*b),o.addScaledVector(B[3],.488603*f),o.addScaledVector(B[4],1.092548*(f*y)),o.addScaledVector(B[5],1.092548*(y*b)),o.addScaledVector(B[6],.315392*(3*b*b-1)),o.addScaledVector(B[7],1.092548*(f*b)),o.addScaledVector(B[8],.546274*(f*f-y*y)),o}getIrradianceAt(e,o){const f=e.x,y=e.y,b=e.z,B=this.coefficients;return o.copy(B[0]).multiplyScalar(.886227),o.addScaledVector(B[1],2*.511664*y),o.addScaledVector(B[2],2*.511664*b),o.addScaledVector(B[3],2*.511664*f),o.addScaledVector(B[4],2*.429043*f*y),o.addScaledVector(B[5],2*.429043*y*b),o.addScaledVector(B[6],.743125*b*b-.247708),o.addScaledVector(B[7],2*.429043*f*b),o.addScaledVector(B[8],.429043*(f*f-y*y)),o}add(e){for(let o=0;o<9;o++)this.coefficients[o].add(e.coefficients[o]);return this}addScaledSH(e,o){for(let f=0;f<9;f++)this.coefficients[f].addScaledVector(e.coefficients[f],o);return this}scale(e){for(let o=0;o<9;o++)this.coefficients[o].multiplyScalar(e);return this}lerp(e,o){for(let f=0;f<9;f++)this.coefficients[f].lerp(e.coefficients[f],o);return this}equals(e){for(let o=0;o<9;o++)if(!this.coefficients[o].equals(e.coefficients[o]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,o=0){const f=this.coefficients;for(let y=0;y<9;y++)f[y].fromArray(e,o+y*3);return this}toArray(e=[],o=0){const f=this.coefficients;for(let y=0;y<9;y++)f[y].toArray(e,o+y*3);return e}static getBasisAt(e,o){const f=e.x,y=e.y,b=e.z;o[0]=.282095,o[1]=.488603*y,o[2]=.488603*b,o[3]=.488603*f,o[4]=1.092548*f*y,o[5]=1.092548*y*b,o[6]=.315392*(3*b*b-1),o[7]=1.092548*f*b,o[8]=.546274*(f*f-y*y)}}class Am extends Sd{constructor(e=new oA,o=1){super(void 0,o),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const o=super.toJSON(e);return o.object.sh=this.sh.toArray(),o}}class D0 extends yl{constructor(e){super(e),this.textures={}}load(e,o,f,y){const b=this,B=new Lu(b.manager);B.setPath(b.path),B.setRequestHeader(b.requestHeader),B.setWithCredentials(b.withCredentials),B.load(e,function(I){try{o(b.parse(JSON.parse(I)))}catch(D){y?y(D):C.error(D),b.manager.itemError(e)}},f,y)}parse(e){const o=this.textures;function f(b){return o[b]===void 0&&C.warn("THREE.MaterialLoader: Undefined texture",b),o[b]}const y=D0.createMaterialFromType(e.type);if(e.uuid!==void 0&&(y.uuid=e.uuid),e.name!==void 0&&(y.name=e.name),e.color!==void 0&&y.color!==void 0&&y.color.setHex(e.color),e.roughness!==void 0&&(y.roughness=e.roughness),e.metalness!==void 0&&(y.metalness=e.metalness),e.sheen!==void 0&&(y.sheen=e.sheen),e.sheenColor!==void 0&&(y.sheenColor=new br().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(y.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&y.emissive!==void 0&&y.emissive.setHex(e.emissive),e.specular!==void 0&&y.specular!==void 0&&y.specular.setHex(e.specular),e.specularIntensity!==void 0&&(y.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&y.specularColor!==void 0&&y.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(y.shininess=e.shininess),e.clearcoat!==void 0&&(y.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(y.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(y.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(y.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(y.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(y.transmission=e.transmission),e.thickness!==void 0&&(y.thickness=e.thickness),e.attenuationDistance!==void 0&&(y.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&y.attenuationColor!==void 0&&y.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(y.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(y.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(y.fog=e.fog),e.flatShading!==void 0&&(y.flatShading=e.flatShading),e.blending!==void 0&&(y.blending=e.blending),e.combine!==void 0&&(y.combine=e.combine),e.side!==void 0&&(y.side=e.side),e.shadowSide!==void 0&&(y.shadowSide=e.shadowSide),e.opacity!==void 0&&(y.opacity=e.opacity),e.transparent!==void 0&&(y.transparent=e.transparent),e.alphaTest!==void 0&&(y.alphaTest=e.alphaTest),e.depthTest!==void 0&&(y.depthTest=e.depthTest),e.depthWrite!==void 0&&(y.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(y.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(y.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(y.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(y.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(y.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(y.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(y.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(y.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(y.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(y.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(y.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(y.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(y.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(y.rotation=e.rotation),e.linewidth!==1&&(y.linewidth=e.linewidth),e.dashSize!==void 0&&(y.dashSize=e.dashSize),e.gapSize!==void 0&&(y.gapSize=e.gapSize),e.scale!==void 0&&(y.scale=e.scale),e.polygonOffset!==void 0&&(y.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(y.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(y.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(y.dithering=e.dithering),e.alphaToCoverage!==void 0&&(y.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(y.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(y.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(y.visible=e.visible),e.toneMapped!==void 0&&(y.toneMapped=e.toneMapped),e.userData!==void 0&&(y.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?y.vertexColors=e.vertexColors>0:y.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const b in e.uniforms){const B=e.uniforms[b];switch(y.uniforms[b]={},B.type){case"t":y.uniforms[b].value=f(B.value);break;case"c":y.uniforms[b].value=new br().setHex(B.value);break;case"v2":y.uniforms[b].value=new _n().fromArray(B.value);break;case"v3":y.uniforms[b].value=new je().fromArray(B.value);break;case"v4":y.uniforms[b].value=new lo().fromArray(B.value);break;case"m3":y.uniforms[b].value=new wi().fromArray(B.value);break;case"m4":y.uniforms[b].value=new ui().fromArray(B.value);break;default:y.uniforms[b].value=B.value}}if(e.defines!==void 0&&(y.defines=e.defines),e.vertexShader!==void 0&&(y.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(y.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(y.glslVersion=e.glslVersion),e.extensions!==void 0)for(const b in e.extensions)y.extensions[b]=e.extensions[b];if(e.lights!==void 0&&(y.lights=e.lights),e.clipping!==void 0&&(y.clipping=e.clipping),e.size!==void 0&&(y.size=e.size),e.sizeAttenuation!==void 0&&(y.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(y.map=f(e.map)),e.matcap!==void 0&&(y.matcap=f(e.matcap)),e.alphaMap!==void 0&&(y.alphaMap=f(e.alphaMap)),e.bumpMap!==void 0&&(y.bumpMap=f(e.bumpMap)),e.bumpScale!==void 0&&(y.bumpScale=e.bumpScale),e.normalMap!==void 0&&(y.normalMap=f(e.normalMap)),e.normalMapType!==void 0&&(y.normalMapType=e.normalMapType),e.normalScale!==void 0){let b=e.normalScale;Array.isArray(b)===!1&&(b=[b,b]),y.normalScale=new _n().fromArray(b)}return e.displacementMap!==void 0&&(y.displacementMap=f(e.displacementMap)),e.displacementScale!==void 0&&(y.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(y.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(y.roughnessMap=f(e.roughnessMap)),e.metalnessMap!==void 0&&(y.metalnessMap=f(e.metalnessMap)),e.emissiveMap!==void 0&&(y.emissiveMap=f(e.emissiveMap)),e.emissiveIntensity!==void 0&&(y.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(y.specularMap=f(e.specularMap)),e.specularIntensityMap!==void 0&&(y.specularIntensityMap=f(e.specularIntensityMap)),e.specularColorMap!==void 0&&(y.specularColorMap=f(e.specularColorMap)),e.envMap!==void 0&&(y.envMap=f(e.envMap)),e.envMapIntensity!==void 0&&(y.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(y.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(y.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(y.lightMap=f(e.lightMap)),e.lightMapIntensity!==void 0&&(y.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(y.aoMap=f(e.aoMap)),e.aoMapIntensity!==void 0&&(y.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(y.gradientMap=f(e.gradientMap)),e.clearcoatMap!==void 0&&(y.clearcoatMap=f(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(y.clearcoatRoughnessMap=f(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(y.clearcoatNormalMap=f(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(y.clearcoatNormalScale=new _n().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(y.iridescenceMap=f(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(y.iridescenceThicknessMap=f(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(y.transmissionMap=f(e.transmissionMap)),e.thicknessMap!==void 0&&(y.thicknessMap=f(e.thicknessMap)),e.anisotropyMap!==void 0&&(y.anisotropyMap=f(e.anisotropyMap)),e.sheenColorMap!==void 0&&(y.sheenColorMap=f(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(y.sheenRoughnessMap=f(e.sheenRoughnessMap)),y}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const o={ShadowMaterial:dv,SpriteMaterial:B1,RawShaderMaterial:hv,ShaderMaterial:ai,PointsMaterial:up,MeshPhysicalMaterial:J1,MeshStandardMaterial:Y1,MeshPhongMaterial:kf,MeshToonMaterial:Z1,MeshNormalMaterial:fv,MeshLambertMaterial:gv,MeshDepthMaterial:yd,MeshDistanceMaterial:wy,MeshBasicMaterial:Ec,MeshMatcapMaterial:mv,LineDashedMaterial:Av,LineBasicMaterial:ml,Material:Xs};return new o[e]}}class sA{static decodeText(e){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(e);let o="";for(let f=0,y=e.length;f<y;f++)o+=String.fromCharCode(e[f]);try{return decodeURIComponent(escape(o))}catch(f){return o}}static extractUrlBase(e){const o=e.lastIndexOf("/");return o===-1?"./":e.slice(0,o+1)}static resolveURL(e,o){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(o)&&/^\//.test(e)&&(o=o.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:o+e)}}class Rv extends mi{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class ym extends yl{constructor(e){super(e)}load(e,o,f,y){const b=this,B=new Lu(b.manager);B.setPath(b.path),B.setRequestHeader(b.requestHeader),B.setWithCredentials(b.withCredentials),B.load(e,function(I){try{o(b.parse(JSON.parse(I)))}catch(D){y?y(D):C.error(D),b.manager.itemError(e)}},f,y)}parse(e){const o={},f={};function y(ee,ie){if(o[ie]!==void 0)return o[ie];const se=ee.interleavedBuffers[ie],ne=b(ee,se.buffer),be=Wl(se.type,ne),fe=new d0(be,se.stride);return fe.uuid=se.uuid,o[ie]=fe,fe}function b(ee,ie){if(f[ie]!==void 0)return f[ie];const se=ee.arrayBuffers[ie],ne=new Uint32Array(se).buffer;return f[ie]=ne,ne}const B=e.isInstancedBufferGeometry?new Rv:new mi,I=e.data.index;if(I!==void 0){const ee=Wl(I.type,I.array);B.setIndex(new no(ee,1))}const D=e.data.attributes;for(const ee in D){const ie=D[ee];let he;if(ie.isInterleavedBufferAttribute){const se=y(e.data,ie.data);he=new vh(se,ie.itemSize,ie.offset,ie.normalized)}else{const se=Wl(ie.type,ie.array),ne=ie.isInstancedBufferAttribute?Tf:no;he=new ne(se,ie.itemSize,ie.normalized)}ie.name!==void 0&&(he.name=ie.name),ie.usage!==void 0&&he.setUsage(ie.usage),ie.updateRange!==void 0&&(he.updateRange.offset=ie.updateRange.offset,he.updateRange.count=ie.updateRange.count),B.setAttribute(ee,he)}const N=e.data.morphAttributes;if(N)for(const ee in N){const ie=N[ee],he=[];for(let se=0,ne=ie.length;se<ne;se++){const be=ie[se];let fe;if(be.isInterleavedBufferAttribute){const xe=y(e.data,be.data);fe=new vh(xe,be.itemSize,be.offset,be.normalized)}else{const xe=Wl(be.type,be.array);fe=new no(xe,be.itemSize,be.normalized)}be.name!==void 0&&(fe.name=be.name),he.push(fe)}B.morphAttributes[ee]=he}e.data.morphTargetsRelative&&(B.morphTargetsRelative=!0);const Z=e.data.groups||e.data.drawcalls||e.data.offsets;if(Z!==void 0)for(let ee=0,ie=Z.length;ee!==ie;++ee){const he=Z[ee];B.addGroup(he.start,he.count,he.materialIndex)}const q=e.data.boundingSphere;if(q!==void 0){const ee=new je;q.center!==void 0&&ee.fromArray(q.center),B.boundingSphere=new Ta(ee,q.radius)}return e.name&&(B.name=e.name),e.userData&&(B.userData=e.userData),B}}class O3 extends yl{constructor(e){super(e)}load(e,o,f,y){const b=this,B=this.path===""?sA.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||B;const I=new Lu(this.manager);I.setPath(this.path),I.setRequestHeader(this.requestHeader),I.setWithCredentials(this.withCredentials),I.load(e,function(D){let N=null;try{N=JSON.parse(D)}catch(Z){y!==void 0&&y(Z),C.error("THREE:ObjectLoader: Can't parse "+e+".",Z.message);return}const K=N.metadata;if(K===void 0||K.type===void 0||K.type.toLowerCase()==="geometry"){y!==void 0&&y(new Error("THREE.ObjectLoader: Can't load "+e)),C.error("THREE.ObjectLoader: Can't load "+e);return}b.parse(N,o)},f,y)}loadAsync(e,o){return fs(this,null,function*(){const f=this,y=this.path===""?sA.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||y;const b=new Lu(this.manager);b.setPath(this.path),b.setRequestHeader(this.requestHeader),b.setWithCredentials(this.withCredentials);const B=yield b.loadAsync(e,o),I=JSON.parse(B),D=I.metadata;if(D===void 0||D.type===void 0||D.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return yield f.parseAsync(I)})}parse(e,o){const f=this.parseAnimations(e.animations),y=this.parseShapes(e.shapes),b=this.parseGeometries(e.geometries,y),B=this.parseImages(e.images,function(){o!==void 0&&o(N)}),I=this.parseTextures(e.textures,B),D=this.parseMaterials(e.materials,I),N=this.parseObject(e.object,b,D,I,f),K=this.parseSkeletons(e.skeletons,N);if(this.bindSkeletons(N,K),o!==void 0){let Z=!1;for(const q in B)if(B[q].data instanceof HTMLImageElement){Z=!0;break}Z===!1&&o(N)}return N}parseAsync(e){return fs(this,null,function*(){const o=this.parseAnimations(e.animations),f=this.parseShapes(e.shapes),y=this.parseGeometries(e.geometries,f),b=yield this.parseImagesAsync(e.images),B=this.parseTextures(e.textures,b),I=this.parseMaterials(e.materials,B),D=this.parseObject(e.object,y,I,B,o),N=this.parseSkeletons(e.skeletons,D);return this.bindSkeletons(D,N),D})}parseShapes(e){const o={};if(e!==void 0)for(let f=0,y=e.length;f<y;f++){const b=new Mh().fromJSON(e[f]);o[b.uuid]=b}return o}parseSkeletons(e,o){const f={},y={};if(o.traverse(function(b){b.isBone&&(y[b.uuid]=b)}),e!==void 0)for(let b=0,B=e.length;b<B;b++){const I=new g0().fromJSON(e[b],y);f[I.uuid]=I}return f}parseGeometries(e,o){const f={};if(e!==void 0){const y=new ym;for(let b=0,B=e.length;b<B;b++){let I;const D=e[b];switch(D.type){case"BufferGeometry":case"InstancedBufferGeometry":I=y.parse(D);break;default:D.type in uv?I=uv[D.type].fromJSON(D,o):C.warn(`THREE.ObjectLoader: Unsupported geometry type "${D.type}"`)}I.uuid=D.uuid,D.name!==void 0&&(I.name=D.name),D.userData!==void 0&&(I.userData=D.userData),f[D.uuid]=I}}return f}parseMaterials(e,o){const f={},y={};if(e!==void 0){const b=new D0;b.setTextures(o);for(let B=0,I=e.length;B<I;B++){const D=e[B];f[D.uuid]===void 0&&(f[D.uuid]=b.parse(D)),y[D.uuid]=f[D.uuid]}}return y}parseAnimations(e){const o={};if(e!==void 0)for(let f=0;f<e.length;f++){const y=e[f],b=mm.parse(y);o[b.uuid]=b}return o}parseImages(e,o){const f=this,y={};let b;function B(D){return f.manager.itemStart(D),b.load(D,function(){f.manager.itemEnd(D)},void 0,function(){f.manager.itemError(D),f.manager.itemEnd(D)})}function I(D){if(typeof D=="string"){const N=D,K=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(N)?N:f.resourcePath+N;return B(K)}else return D.data?{data:Wl(D.type,D.data),width:D.width,height:D.height}:null}if(e!==void 0&&e.length>0){const D=new zf(o);b=new Gf(D),b.setCrossOrigin(this.crossOrigin);for(let N=0,K=e.length;N<K;N++){const Z=e[N],q=Z.url;if(Array.isArray(q)){const ee=[];for(let ie=0,he=q.length;ie<he;ie++){const se=q[ie],ne=I(se);ne!==null&&(ne instanceof HTMLImageElement?ee.push(ne):ee.push(new wf(ne.data,ne.width,ne.height)))}y[Z.uuid]=new Vl(ee)}else{const ee=I(Z.url);y[Z.uuid]=new Vl(ee)}}}return y}parseImagesAsync(e){return fs(this,null,function*(){const o=this,f={};let y;function b(B){return fs(this,null,function*(){if(typeof B=="string"){const I=B,D=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(I)?I:o.resourcePath+I;return yield y.loadAsync(D)}else return B.data?{data:Wl(B.type,B.data),width:B.width,height:B.height}:null})}if(e!==void 0&&e.length>0){y=new Gf(this.manager),y.setCrossOrigin(this.crossOrigin);for(let B=0,I=e.length;B<I;B++){const D=e[B],N=D.url;if(Array.isArray(N)){const K=[];for(let Z=0,q=N.length;Z<q;Z++){const ee=N[Z],ie=yield b(ee);ie!==null&&(ie instanceof HTMLImageElement?K.push(ie):K.push(new wf(ie.data,ie.width,ie.height)))}f[D.uuid]=new Vl(K)}else{const K=yield b(D.url);f[D.uuid]=new Vl(K)}}}return f})}parseTextures(e,o){function f(b,B){return typeof b=="number"?b:(C.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",b),B[b])}const y={};if(e!==void 0)for(let b=0,B=e.length;b<B;b++){const I=e[b];I.image===void 0&&C.warn('THREE.ObjectLoader: No "image" specified for',I.uuid),o[I.image]===void 0&&C.warn("THREE.ObjectLoader: Undefined image",I.image);const D=o[I.image],N=D.data;let K;Array.isArray(N)?(K=new Es,N.length===6&&(K.needsUpdate=!0)):(N&&N.data?K=new wf:K=new ps,N&&(K.needsUpdate=!0)),K.source=D,K.uuid=I.uuid,I.name!==void 0&&(K.name=I.name),I.mapping!==void 0&&(K.mapping=f(I.mapping,D3)),I.channel!==void 0&&(K.channel=I.channel),I.offset!==void 0&&K.offset.fromArray(I.offset),I.repeat!==void 0&&K.repeat.fromArray(I.repeat),I.center!==void 0&&K.center.fromArray(I.center),I.rotation!==void 0&&(K.rotation=I.rotation),I.wrap!==void 0&&(K.wrapS=f(I.wrap[0],rr),K.wrapT=f(I.wrap[1],rr)),I.format!==void 0&&(K.format=I.format),I.internalFormat!==void 0&&(K.internalFormat=I.internalFormat),I.type!==void 0&&(K.type=I.type),I.colorSpace!==void 0&&(K.colorSpace=I.colorSpace),I.encoding!==void 0&&(K.encoding=I.encoding),I.minFilter!==void 0&&(K.minFilter=f(I.minFilter,Iv)),I.magFilter!==void 0&&(K.magFilter=f(I.magFilter,Iv)),I.anisotropy!==void 0&&(K.anisotropy=I.anisotropy),I.flipY!==void 0&&(K.flipY=I.flipY),I.generateMipmaps!==void 0&&(K.generateMipmaps=I.generateMipmaps),I.premultiplyAlpha!==void 0&&(K.premultiplyAlpha=I.premultiplyAlpha),I.unpackAlignment!==void 0&&(K.unpackAlignment=I.unpackAlignment),I.compareFunction!==void 0&&(K.compareFunction=I.compareFunction),I.userData!==void 0&&(K.userData=I.userData),y[I.uuid]=K}return y}parseObject(e,o,f,y,b){let B;function I(q){return o[q]===void 0&&C.warn("THREE.ObjectLoader: Undefined geometry",q),o[q]}function D(q){if(q!==void 0){if(Array.isArray(q)){const ee=[];for(let ie=0,he=q.length;ie<he;ie++){const se=q[ie];f[se]===void 0&&C.warn("THREE.ObjectLoader: Undefined material",se),ee.push(f[se])}return ee}return f[q]===void 0&&C.warn("THREE.ObjectLoader: Undefined material",q),f[q]}}function N(q){return y[q]===void 0&&C.warn("THREE.ObjectLoader: Undefined texture",q),y[q]}let K,Z;switch(e.type){case"Scene":B=new Ly,e.background!==void 0&&(Number.isInteger(e.background)?B.background=new br(e.background):B.background=N(e.background)),e.environment!==void 0&&(B.environment=N(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?B.fog=new bf(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(B.fog=new u0(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(B.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(B.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":B=new Ji(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(B.focus=e.focus),e.zoom!==void 0&&(B.zoom=e.zoom),e.filmGauge!==void 0&&(B.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(B.filmOffset=e.filmOffset),e.view!==void 0&&(B.view=Object.assign({},e.view));break;case"OrthographicCamera":B=new yf(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(B.zoom=e.zoom),e.view!==void 0&&(B.view=Object.assign({},e.view));break;case"AmbientLight":B=new Bv(e.color,e.intensity);break;case"DirectionalLight":B=new Tv(e.color,e.intensity);break;case"PointLight":B=new wv(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":B=new Ti(e.color,e.intensity,e.width,e.height);break;case"SpotLight":B=new Cv(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":B=new Mv(e.color,e.groundColor,e.intensity);break;case"LightProbe":B=new Am().fromJSON(e);break;case"SkinnedMesh":K=I(e.geometry),Z=D(e.material),B=new a3(K,Z),e.bindMode!==void 0&&(B.bindMode=e.bindMode),e.bindMatrix!==void 0&&B.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(B.skeleton=e.skeleton);break;case"Mesh":K=I(e.geometry),Z=D(e.material),B=new Oo(K,Z);break;case"InstancedMesh":K=I(e.geometry),Z=D(e.material);const q=e.count,ee=e.instanceMatrix,ie=e.instanceColor;B=new m0(K,Z,q),B.instanceMatrix=new Tf(new Float32Array(ee.array),16),ie!==void 0&&(B.instanceColor=new Tf(new Float32Array(ie.array),ie.itemSize));break;case"LOD":B=new O1;break;case"Line":B=new Ed(I(e.geometry),D(e.material));break;case"LineLoop":B=new Yg(I(e.geometry),D(e.material));break;case"LineSegments":B=new Al(I(e.geometry),D(e.material));break;case"PointCloud":case"Points":B=new Xy(I(e.geometry),D(e.material));break;case"Sprite":B=new F1(D(e.material));break;case"Group":B=new Ef;break;case"Bone":B=new Uy;break;default:B=new Yi}if(B.uuid=e.uuid,e.name!==void 0&&(B.name=e.name),e.matrix!==void 0?(B.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(B.matrixAutoUpdate=e.matrixAutoUpdate),B.matrixAutoUpdate&&B.matrix.decompose(B.position,B.quaternion,B.scale)):(e.position!==void 0&&B.position.fromArray(e.position),e.rotation!==void 0&&B.rotation.fromArray(e.rotation),e.quaternion!==void 0&&B.quaternion.fromArray(e.quaternion),e.scale!==void 0&&B.scale.fromArray(e.scale)),e.up!==void 0&&B.up.fromArray(e.up),e.castShadow!==void 0&&(B.castShadow=e.castShadow),e.receiveShadow!==void 0&&(B.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(B.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(B.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(B.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&B.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(B.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(B.visible=e.visible),e.frustumCulled!==void 0&&(B.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(B.renderOrder=e.renderOrder),e.userData!==void 0&&(B.userData=e.userData),e.layers!==void 0&&(B.layers.mask=e.layers),e.children!==void 0){const q=e.children;for(let ee=0;ee<q.length;ee++)B.add(this.parseObject(q[ee],o,f,y,b))}if(e.animations!==void 0){const q=e.animations;for(let ee=0;ee<q.length;ee++){const ie=q[ee];B.animations.push(b[ie])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(B.autoUpdate=e.autoUpdate);const q=e.levels;for(let ee=0;ee<q.length;ee++){const ie=q[ee],he=B.getObjectByProperty("uuid",ie.object);he!==void 0&&B.addLevel(he,ie.distance,ie.hysteresis)}}return B}bindSkeletons(e,o){Object.keys(o).length!==0&&e.traverse(function(f){if(f.isSkinnedMesh===!0&&f.skeleton!==void 0){const y=o[f.skeleton];y===void 0?C.warn("THREE.ObjectLoader: No skeleton found with UUID:",f.skeleton):f.bind(y,f.bindMatrix)}})}}const D3={UVMapping:Wo,CubeReflectionMapping:Io,CubeRefractionMapping:$i,EquirectangularReflectionMapping:gi,EquirectangularRefractionMapping:bo,CubeUVReflectionMapping:bs},rr={RepeatWrapping:ss,ClampToEdgeWrapping:yo,MirroredRepeatWrapping:Aa},Iv={NearestFilter:Vi,NearestMipmapNearestFilter:Gs,NearestMipmapLinearFilter:Ss,LinearFilter:ho,LinearMipmapNearestFilter:Ca,LinearMipmapLinearFilter:Fo};class L3 extends yl{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap=="undefined"&&C.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&C.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,o,f,y){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const b=this,B=Cd.get(e);if(B!==void 0)return b.manager.itemStart(e),setTimeout(function(){o&&o(B),b.manager.itemEnd(e)},0),B;const I={};I.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",I.headers=this.requestHeader,fetch(e,I).then(function(D){return D.blob()}).then(function(D){return createImageBitmap(D,Object.assign(b.options,{colorSpaceConversion:"none"}))}).then(function(D){Cd.add(e,D),o&&o(D),b.manager.itemEnd(e)}).catch(function(D){y&&y(D),b.manager.itemError(e),b.manager.itemEnd(e)}),b.manager.itemStart(e)}}let L0;class aA{static getContext(){return L0===void 0&&(L0=new(window.AudioContext||window.webkitAudioContext)),L0}static setContext(e){L0=e}}class P3 extends yl{constructor(e){super(e)}load(e,o,f,y){const b=this,B=new Lu(this.manager);B.setResponseType("arraybuffer"),B.setPath(this.path),B.setRequestHeader(this.requestHeader),B.setWithCredentials(this.withCredentials),B.load(e,function(D){try{const N=D.slice(0);aA.getContext().decodeAudioData(N,function(Z){o(Z)},I)}catch(N){I(N)}},f,y);function I(D){y?y(D):C.error(D),b.manager.itemError(e)}}}class Lt extends Am{constructor(e,o,f=1){super(void 0,f),this.isHemisphereLightProbe=!0;const y=new br().set(e),b=new br().set(o),B=new je(y.r,y.g,y.b),I=new je(b.r,b.g,b.b),D=Math.sqrt(Math.PI),N=D*Math.sqrt(.75);this.sh.coefficients[0].copy(B).add(I).multiplyScalar(D),this.sh.coefficients[1].copy(B).sub(I).multiplyScalar(N)}}class Zr extends Am{constructor(e,o=1){super(void 0,o),this.isAmbientLightProbe=!0;const f=new br().set(e);this.sh.coefficients[0].set(f.r,f.g,f.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const So=new ui,Bi=new ui,Ma=new ui;class us{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ji,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ji,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const o=this._cache;if(o.focus!==e.focus||o.fov!==e.fov||o.aspect!==e.aspect*this.aspect||o.near!==e.near||o.far!==e.far||o.zoom!==e.zoom||o.eyeSep!==this.eyeSep){o.focus=e.focus,o.fov=e.fov,o.aspect=e.aspect*this.aspect,o.near=e.near,o.far=e.far,o.zoom=e.zoom,o.eyeSep=this.eyeSep,Ma.copy(e.projectionMatrix);const y=o.eyeSep/2,b=y*o.near/o.focus,B=o.near*Math.tan(kc*o.fov*.5)/o.zoom;let I,D;Bi.elements[12]=-y,So.elements[12]=y,I=-B*o.aspect+b,D=B*o.aspect+b,Ma.elements[0]=2*o.near/(D-I),Ma.elements[8]=(D+I)/(D-I),this.cameraL.projectionMatrix.copy(Ma),I=-B*o.aspect-b,D=B*o.aspect-b,Ma.elements[0]=2*o.near/(D-I),Ma.elements[8]=(D+I)/(D-I),this.cameraR.projectionMatrix.copy(Ma)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Bi),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(So)}}class Vc{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Bc(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const o=Bc();e=(o-this.oldTime)/1e3,this.oldTime=o,this.elapsedTime+=e}return e}}function Bc(){return(typeof performance=="undefined"?Date:performance).now()}const Th=new je,Fv=new aa,k3=new je,Bh=new je;class lA extends Yi{constructor(){super(),this.type="AudioListener",this.context=aA.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Vc}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const o=this.context.listener,f=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Th,Fv,k3),Bh.set(0,0,-1).applyQuaternion(Fv),o.positionX){const y=this.context.currentTime+this.timeDelta;o.positionX.linearRampToValueAtTime(Th.x,y),o.positionY.linearRampToValueAtTime(Th.y,y),o.positionZ.linearRampToValueAtTime(Th.z,y),o.forwardX.linearRampToValueAtTime(Bh.x,y),o.forwardY.linearRampToValueAtTime(Bh.y,y),o.forwardZ.linearRampToValueAtTime(Bh.z,y),o.upX.linearRampToValueAtTime(f.x,y),o.upY.linearRampToValueAtTime(f.y,y),o.upZ.linearRampToValueAtTime(f.z,y)}else o.setPosition(Th.x,Th.y,Th.z),o.setOrientation(Bh.x,Bh.y,Bh.z,f.x,f.y,f.z)}}class Ov extends Yi{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){C.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){C.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const o=this.context.createBufferSource();return o.buffer=this.buffer,o.loop=this.loop,o.loopStart=this.loopStart,o.loopEnd=this.loopEnd,o.onended=this.onEnded.bind(this),o.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=o,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){C.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){C.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,o=this.filters.length;e<o;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,o=this.filters.length;e<o;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){C.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(C.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){C.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Rh=new je,nn=new aa,z3=new je,Ih=new je;class G3 extends Ov{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,o,f){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=o,this.panner.coneOuterGain=f,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Rh,nn,z3),Ih.set(0,0,1).applyQuaternion(nn);const o=this.panner;if(o.positionX){const f=this.context.currentTime+this.listener.timeDelta;o.positionX.linearRampToValueAtTime(Rh.x,f),o.positionY.linearRampToValueAtTime(Rh.y,f),o.positionZ.linearRampToValueAtTime(Rh.z,f),o.orientationX.linearRampToValueAtTime(Ih.x,f),o.orientationY.linearRampToValueAtTime(Ih.y,f),o.orientationZ.linearRampToValueAtTime(Ih.z,f)}else o.setPosition(Rh.x,Rh.y,Rh.z),o.setOrientation(Ih.x,Ih.y,Ih.z)}}class U3{constructor(e,o=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=o,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const o=this.getFrequencyData();for(let f=0;f<o.length;f++)e+=o[f];return e/o.length}}class Dv{constructor(e,o,f){this.binding=e,this.valueSize=f;let y,b,B;switch(o){case"quaternion":y=this._slerp,b=this._slerpAdditive,B=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(f*6),this._workIndex=5;break;case"string":case"bool":y=this._select,b=this._select,B=this._setAdditiveIdentityOther,this.buffer=new Array(f*5);break;default:y=this._lerp,b=this._lerpAdditive,B=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(f*5)}this._mixBufferRegion=y,this._mixBufferRegionAdditive=b,this._setIdentity=B,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,o){const f=this.buffer,y=this.valueSize,b=e*y+y;let B=this.cumulativeWeight;if(B===0){for(let I=0;I!==y;++I)f[b+I]=f[I];B=o}else{B+=o;const I=o/B;this._mixBufferRegion(f,b,0,I,y)}this.cumulativeWeight=B}accumulateAdditive(e){const o=this.buffer,f=this.valueSize,y=f*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(o,y,0,e,f),this.cumulativeWeightAdditive+=e}apply(e){const o=this.valueSize,f=this.buffer,y=e*o+o,b=this.cumulativeWeight,B=this.cumulativeWeightAdditive,I=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,b<1){const D=o*this._origIndex;this._mixBufferRegion(f,y,D,1-b,o)}B>0&&this._mixBufferRegionAdditive(f,y,this._addIndex*o,1,o);for(let D=o,N=o+o;D!==N;++D)if(f[D]!==f[D+o]){I.setValue(f,y);break}}saveOriginalState(){const e=this.binding,o=this.buffer,f=this.valueSize,y=f*this._origIndex;e.getValue(o,y);for(let b=f,B=y;b!==B;++b)o[b]=o[y+b%f];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,o=e+this.valueSize;for(let f=e;f<o;f++)this.buffer[f]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,o=this._addIndex*this.valueSize;for(let f=0;f<this.valueSize;f++)this.buffer[o+f]=this.buffer[e+f]}_select(e,o,f,y,b){if(y>=.5)for(let B=0;B!==b;++B)e[o+B]=e[f+B]}_slerp(e,o,f,y){aa.slerpFlat(e,o,e,o,e,f,y)}_slerpAdditive(e,o,f,y,b){const B=this._workIndex*b;aa.multiplyQuaternionsFlat(e,B,e,o,e,f),aa.slerpFlat(e,o,e,o,e,B,y)}_lerp(e,o,f,y,b){const B=1-y;for(let I=0;I!==b;++I){const D=o+I;e[D]=e[D]*B+e[f+I]*y}}_lerpAdditive(e,o,f,y,b){for(let B=0;B!==b;++B){const I=o+B;e[I]=e[I]+e[f+B]*y}}}const cA="\\[\\]\\.:\\/",N3=new RegExp("["+cA+"]","g"),qs="[^"+cA+"]",Uf="[^"+cA.replace("\\.","")+"]",Nf=/((?:WC+[\/:])*)/.source.replace("WC",qs),j3=/(WCOD+)?/.source.replace("WCOD",Uf),H3=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",qs),W3=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",qs),Lv=new RegExp("^"+Nf+j3+H3+W3+"$"),V3=["material","materials","bones","map"];class Q3{constructor(e,o,f){const y=f||go.parseTrackName(o);this._targetGroup=e,this._bindings=e.subscribe_(o,y)}getValue(e,o){this.bind();const f=this._targetGroup.nCachedObjects_,y=this._bindings[f];y!==void 0&&y.getValue(e,o)}setValue(e,o){const f=this._bindings;for(let y=this._targetGroup.nCachedObjects_,b=f.length;y!==b;++y)f[y].setValue(e,o)}bind(){const e=this._bindings;for(let o=this._targetGroup.nCachedObjects_,f=e.length;o!==f;++o)e[o].bind()}unbind(){const e=this._bindings;for(let o=this._targetGroup.nCachedObjects_,f=e.length;o!==f;++o)e[o].unbind()}}class go{constructor(e,o,f){this.path=o,this.parsedPath=f||go.parseTrackName(o),this.node=go.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,o,f){return e&&e.isAnimationObjectGroup?new go.Composite(e,o,f):new go(e,o,f)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(N3,"")}static parseTrackName(e){const o=Lv.exec(e);if(o===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const f={nodeName:o[2],objectName:o[3],objectIndex:o[4],propertyName:o[5],propertyIndex:o[6]},y=f.nodeName&&f.nodeName.lastIndexOf(".");if(y!==void 0&&y!==-1){const b=f.nodeName.substring(y+1);V3.indexOf(b)!==-1&&(f.nodeName=f.nodeName.substring(0,y),f.objectName=b)}if(f.propertyName===null||f.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return f}static findNode(e,o){if(o===void 0||o===""||o==="."||o===-1||o===e.name||o===e.uuid)return e;if(e.skeleton){const f=e.skeleton.getBoneByName(o);if(f!==void 0)return f}if(e.children){const f=function(b){for(let B=0;B<b.length;B++){const I=b[B];if(I.name===o||I.uuid===o)return I;const D=f(I.children);if(D)return D}return null},y=f(e.children);if(y)return y}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,o){e[o]=this.targetObject[this.propertyName]}_getValue_array(e,o){const f=this.resolvedProperty;for(let y=0,b=f.length;y!==b;++y)e[o++]=f[y]}_getValue_arrayElement(e,o){e[o]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,o){this.resolvedProperty.toArray(e,o)}_setValue_direct(e,o){this.targetObject[this.propertyName]=e[o]}_setValue_direct_setNeedsUpdate(e,o){this.targetObject[this.propertyName]=e[o],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,o){this.targetObject[this.propertyName]=e[o],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,o){const f=this.resolvedProperty;for(let y=0,b=f.length;y!==b;++y)f[y]=e[o++]}_setValue_array_setNeedsUpdate(e,o){const f=this.resolvedProperty;for(let y=0,b=f.length;y!==b;++y)f[y]=e[o++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,o){const f=this.resolvedProperty;for(let y=0,b=f.length;y!==b;++y)f[y]=e[o++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,o){this.resolvedProperty[this.propertyIndex]=e[o]}_setValue_arrayElement_setNeedsUpdate(e,o){this.resolvedProperty[this.propertyIndex]=e[o],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,o){this.resolvedProperty[this.propertyIndex]=e[o],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,o){this.resolvedProperty.fromArray(e,o)}_setValue_fromArray_setNeedsUpdate(e,o){this.resolvedProperty.fromArray(e,o),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,o){this.resolvedProperty.fromArray(e,o),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,o){this.bind(),this.getValue(e,o)}_setValue_unbound(e,o){this.bind(),this.setValue(e,o)}bind(){let e=this.node;const o=this.parsedPath,f=o.objectName,y=o.propertyName;let b=o.propertyIndex;if(e||(e=go.findNode(this.rootNode,o.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){C.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(f){let N=o.objectIndex;switch(f){case"materials":if(!e.material){C.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){C.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){C.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let K=0;K<e.length;K++)if(e[K].name===N){N=K;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){C.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){C.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[f]===void 0){C.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[f]}if(N!==void 0){if(e[N]===void 0){C.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[N]}}const B=e[y];if(B===void 0){const N=o.nodeName;C.error("THREE.PropertyBinding: Trying to update property for track: "+N+"."+y+" but it wasn't found.",e);return}let I=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?I=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(I=this.Versioning.MatrixWorldNeedsUpdate);let D=this.BindingType.Direct;if(b!==void 0){if(y==="morphTargetInfluences"){if(!e.geometry){C.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){C.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[b]!==void 0&&(b=e.morphTargetDictionary[b])}D=this.BindingType.ArrayElement,this.resolvedProperty=B,this.propertyIndex=b}else B.fromArray!==void 0&&B.toArray!==void 0?(D=this.BindingType.HasFromToArray,this.resolvedProperty=B):Array.isArray(B)?(D=this.BindingType.EntireArray,this.resolvedProperty=B):this.propertyName=y;this.getValue=this.GetterByBindingType[D],this.setValue=this.SetterByBindingTypeAndVersioning[D][I]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}go.Composite=Q3,go.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},go.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},go.prototype.GetterByBindingType=[go.prototype._getValue_direct,go.prototype._getValue_array,go.prototype._getValue_arrayElement,go.prototype._getValue_toArray],go.prototype.SetterByBindingTypeAndVersioning=[[go.prototype._setValue_direct,go.prototype._setValue_direct_setNeedsUpdate,go.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[go.prototype._setValue_array,go.prototype._setValue_array_setNeedsUpdate,go.prototype._setValue_array_setMatrixWorldNeedsUpdate],[go.prototype._setValue_arrayElement,go.prototype._setValue_arrayElement_setNeedsUpdate,go.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[go.prototype._setValue_fromArray,go.prototype._setValue_fromArray_setNeedsUpdate,go.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class K3{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ll(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let f=0,y=arguments.length;f!==y;++f)e[arguments[f].uuid]=f;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const o=this;this.stats={objects:{get total(){return o._objects.length},get inUse(){return this.total-o.nCachedObjects_}},get bindingsPerObject(){return o._bindings.length}}}add(){const e=this._objects,o=this._indicesByUUID,f=this._paths,y=this._parsedPaths,b=this._bindings,B=b.length;let I,D=e.length,N=this.nCachedObjects_;for(let K=0,Z=arguments.length;K!==Z;++K){const q=arguments[K],ee=q.uuid;let ie=o[ee];if(ie===void 0){ie=D++,o[ee]=ie,e.push(q);for(let he=0,se=B;he!==se;++he)b[he].push(new go(q,f[he],y[he]))}else if(ie<N){I=e[ie];const he=--N,se=e[he];o[se.uuid]=ie,e[ie]=se,o[ee]=he,e[he]=q;for(let ne=0,be=B;ne!==be;++ne){const fe=b[ne],xe=fe[he];let Le=fe[ie];fe[ie]=xe,Le===void 0&&(Le=new go(q,f[ne],y[ne])),fe[he]=Le}}else e[ie]!==I&&C.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=N}remove(){const e=this._objects,o=this._indicesByUUID,f=this._bindings,y=f.length;let b=this.nCachedObjects_;for(let B=0,I=arguments.length;B!==I;++B){const D=arguments[B],N=D.uuid,K=o[N];if(K!==void 0&&K>=b){const Z=b++,q=e[Z];o[q.uuid]=K,e[K]=q,o[N]=Z,e[Z]=D;for(let ee=0,ie=y;ee!==ie;++ee){const he=f[ee],se=he[Z],ne=he[K];he[K]=se,he[Z]=ne}}}this.nCachedObjects_=b}uncache(){const e=this._objects,o=this._indicesByUUID,f=this._bindings,y=f.length;let b=this.nCachedObjects_,B=e.length;for(let I=0,D=arguments.length;I!==D;++I){const N=arguments[I],K=N.uuid,Z=o[K];if(Z!==void 0)if(delete o[K],Z<b){const q=--b,ee=e[q],ie=--B,he=e[ie];o[ee.uuid]=Z,e[Z]=ee,o[he.uuid]=q,e[q]=he,e.pop();for(let se=0,ne=y;se!==ne;++se){const be=f[se],fe=be[q],xe=be[ie];be[Z]=fe,be[q]=xe,be.pop()}}else{const q=--B,ee=e[q];q>0&&(o[ee.uuid]=Z),e[Z]=ee,e.pop();for(let ie=0,he=y;ie!==he;++ie){const se=f[ie];se[Z]=se[q],se.pop()}}}this.nCachedObjects_=b}subscribe_(e,o){const f=this._bindingsIndicesByPath;let y=f[e];const b=this._bindings;if(y!==void 0)return b[y];const B=this._paths,I=this._parsedPaths,D=this._objects,N=D.length,K=this.nCachedObjects_,Z=new Array(N);y=b.length,f[e]=y,B.push(e),I.push(o),b.push(Z);for(let q=K,ee=D.length;q!==ee;++q){const ie=D[q];Z[q]=new go(ie,e,o)}return Z}unsubscribe_(e){const o=this._bindingsIndicesByPath,f=o[e];if(f!==void 0){const y=this._paths,b=this._parsedPaths,B=this._bindings,I=B.length-1,D=B[I],N=e[I];o[N]=f,B[f]=D,B.pop(),b[f]=b[I],b.pop(),y[f]=y[I],y.pop()}}}class Ei{constructor(e,o,f=null,y=o.blendMode){this._mixer=e,this._clip=o,this._localRoot=f,this.blendMode=y;const b=o.tracks,B=b.length,I=new Array(B),D={endingStart:$p,endingEnd:$p};for(let N=0;N!==B;++N){const K=b[N].createInterpolant(null);I[N]=K,K.settings=D}this._interpolantSettings=D,this._interpolants=I,this._propertyBindings=new Array(B),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Bs,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,o){return this.loop=e,this.repetitions=o,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,o,f){if(e.fadeOut(o),this.fadeIn(o),f){const y=this._clip.duration,b=e._clip.duration,B=b/y,I=y/b;e.warp(1,B,o),this.warp(I,1,o)}return this}crossFadeTo(e,o,f){return e.crossFadeFrom(this,o,f)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,o,f){const y=this._mixer,b=y.time,B=this.timeScale;let I=this._timeScaleInterpolant;I===null&&(I=y._lendControlInterpolant(),this._timeScaleInterpolant=I);const D=I.parameterPositions,N=I.sampleValues;return D[0]=b,D[1]=b+f,N[0]=e/B,N[1]=o/B,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,o,f,y){if(!this.enabled){this._updateWeight(e);return}const b=this._startTime;if(b!==null){const D=(e-b)*f;D<0||f===0?o=0:(this._startTime=null,o=f*D)}o*=this._updateTimeScale(e);const B=this._updateTime(o),I=this._updateWeight(e);if(I>0){const D=this._interpolants,N=this._propertyBindings;switch(this.blendMode){case Hu:for(let K=0,Z=D.length;K!==Z;++K)D[K].evaluate(B),N[K].accumulateAdditive(I);break;case tu:default:for(let K=0,Z=D.length;K!==Z;++K)D[K].evaluate(B),N[K].accumulate(y,I)}}}_updateWeight(e){let o=0;if(this.enabled){o=this.weight;const f=this._weightInterpolant;if(f!==null){const y=f.evaluate(e)[0];o*=y,e>f.parameterPositions[1]&&(this.stopFading(),y===0&&(this.enabled=!1))}}return this._effectiveWeight=o,o}_updateTimeScale(e){let o=0;if(!this.paused){o=this.timeScale;const f=this._timeScaleInterpolant;if(f!==null){const y=f.evaluate(e)[0];o*=y,e>f.parameterPositions[1]&&(this.stopWarping(),o===0?this.paused=!0:this.timeScale=o)}}return this._effectiveTimeScale=o,o}_updateTime(e){const o=this._clip.duration,f=this.loop;let y=this.time+e,b=this._loopCount;const B=f===Hd;if(e===0)return b===-1?y:B&&(b&1)===1?o-y:y;if(f===bp){b===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(y>=o)y=o;else if(y<0)y=0;else{this.time=y;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=y,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(b===-1&&(e>=0?(b=0,this._setEndings(!0,this.repetitions===0,B)):this._setEndings(this.repetitions===0,!0,B)),y>=o||y<0){const I=Math.floor(y/o);y-=o*I,b+=Math.abs(I);const D=this.repetitions-b;if(D<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,y=e>0?o:0,this.time=y,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(D===1){const N=e<0;this._setEndings(N,!N,B)}else this._setEndings(!1,!1,B);this._loopCount=b,this.time=y,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:I})}}else this.time=y;if(B&&(b&1)===1)return o-y}return y}_setEndings(e,o,f){const y=this._interpolantSettings;f?(y.endingStart=Dc,y.endingEnd=Dc):(e?y.endingStart=this.zeroSlopeAtStart?Dc:$p:y.endingStart=eu,o?y.endingEnd=this.zeroSlopeAtEnd?Dc:$p:y.endingEnd=eu)}_scheduleFading(e,o,f){const y=this._mixer,b=y.time;let B=this._weightInterpolant;B===null&&(B=y._lendControlInterpolant(),this._weightInterpolant=B);const I=B.parameterPositions,D=B.sampleValues;return I[0]=b,D[0]=o,I[1]=b+e,D[1]=f,this}}const Pv=new Float32Array(1);class X3 extends wa{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,o){const f=e._localRoot||this._root,y=e._clip.tracks,b=y.length,B=e._propertyBindings,I=e._interpolants,D=f.uuid,N=this._bindingsByRootAndName;let K=N[D];K===void 0&&(K={},N[D]=K);for(let Z=0;Z!==b;++Z){const q=y[Z],ee=q.name;let ie=K[ee];if(ie!==void 0)++ie.referenceCount,B[Z]=ie;else{if(ie=B[Z],ie!==void 0){ie._cacheIndex===null&&(++ie.referenceCount,this._addInactiveBinding(ie,D,ee));continue}const he=o&&o._propertyBindings[Z].binding.parsedPath;ie=new Dv(go.create(f,ee,he),q.ValueTypeName,q.getValueSize()),++ie.referenceCount,this._addInactiveBinding(ie,D,ee),B[Z]=ie}I[Z].resultBuffer=ie.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const f=(e._localRoot||this._root).uuid,y=e._clip.uuid,b=this._actionsByClip[y];this._bindAction(e,b&&b.knownActions[0]),this._addInactiveAction(e,y,f)}const o=e._propertyBindings;for(let f=0,y=o.length;f!==y;++f){const b=o[f];b.useCount++===0&&(this._lendBinding(b),b.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const o=e._propertyBindings;for(let f=0,y=o.length;f!==y;++f){const b=o[f];--b.useCount===0&&(b.restoreOriginalState(),this._takeBackBinding(b))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const o=e._cacheIndex;return o!==null&&o<this._nActiveActions}_addInactiveAction(e,o,f){const y=this._actions,b=this._actionsByClip;let B=b[o];if(B===void 0)B={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,b[o]=B;else{const I=B.knownActions;e._byClipCacheIndex=I.length,I.push(e)}e._cacheIndex=y.length,y.push(e),B.actionByRoot[f]=e}_removeInactiveAction(e){const o=this._actions,f=o[o.length-1],y=e._cacheIndex;f._cacheIndex=y,o[y]=f,o.pop(),e._cacheIndex=null;const b=e._clip.uuid,B=this._actionsByClip,I=B[b],D=I.knownActions,N=D[D.length-1],K=e._byClipCacheIndex;N._byClipCacheIndex=K,D[K]=N,D.pop(),e._byClipCacheIndex=null;const Z=I.actionByRoot,q=(e._localRoot||this._root).uuid;delete Z[q],D.length===0&&delete B[b],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const o=e._propertyBindings;for(let f=0,y=o.length;f!==y;++f){const b=o[f];--b.referenceCount===0&&this._removeInactiveBinding(b)}}_lendAction(e){const o=this._actions,f=e._cacheIndex,y=this._nActiveActions++,b=o[y];e._cacheIndex=y,o[y]=e,b._cacheIndex=f,o[f]=b}_takeBackAction(e){const o=this._actions,f=e._cacheIndex,y=--this._nActiveActions,b=o[y];e._cacheIndex=y,o[y]=e,b._cacheIndex=f,o[f]=b}_addInactiveBinding(e,o,f){const y=this._bindingsByRootAndName,b=this._bindings;let B=y[o];B===void 0&&(B={},y[o]=B),B[f]=e,e._cacheIndex=b.length,b.push(e)}_removeInactiveBinding(e){const o=this._bindings,f=e.binding,y=f.rootNode.uuid,b=f.path,B=this._bindingsByRootAndName,I=B[y],D=o[o.length-1],N=e._cacheIndex;D._cacheIndex=N,o[N]=D,o.pop(),delete I[b],Object.keys(I).length===0&&delete B[y]}_lendBinding(e){const o=this._bindings,f=e._cacheIndex,y=this._nActiveBindings++,b=o[y];e._cacheIndex=y,o[y]=e,b._cacheIndex=f,o[f]=b}_takeBackBinding(e){const o=this._bindings,f=e._cacheIndex,y=--this._nActiveBindings,b=o[y];e._cacheIndex=y,o[y]=e,b._cacheIndex=f,o[f]=b}_lendControlInterpolant(){const e=this._controlInterpolants,o=this._nActiveControlInterpolants++;let f=e[o];return f===void 0&&(f=new hm(new Float32Array(2),new Float32Array(2),1,Pv),f.__cacheIndex=o,e[o]=f),f}_takeBackControlInterpolant(e){const o=this._controlInterpolants,f=e.__cacheIndex,y=--this._nActiveControlInterpolants,b=o[y];e.__cacheIndex=y,o[y]=e,b.__cacheIndex=f,o[f]=b}clipAction(e,o,f){const y=o||this._root,b=y.uuid;let B=typeof e=="string"?mm.findByName(y,e):e;const I=B!==null?B.uuid:e,D=this._actionsByClip[I];let N=null;if(f===void 0&&(B!==null?f=B.blendMode:f=tu),D!==void 0){const Z=D.actionByRoot[b];if(Z!==void 0&&Z.blendMode===f)return Z;N=D.knownActions[0],B===null&&(B=N._clip)}if(B===null)return null;const K=new Ei(this,B,o,f);return this._bindAction(K,N),this._addInactiveAction(K,I,b),K}existingAction(e,o){const f=o||this._root,y=f.uuid,b=typeof e=="string"?mm.findByName(f,e):e,B=b?b.uuid:e,I=this._actionsByClip[B];return I!==void 0&&I.actionByRoot[y]||null}stopAllAction(){const e=this._actions,o=this._nActiveActions;for(let f=o-1;f>=0;--f)e[f].stop();return this}update(e){e*=this.timeScale;const o=this._actions,f=this._nActiveActions,y=this.time+=e,b=Math.sign(e),B=this._accuIndex^=1;for(let N=0;N!==f;++N)o[N]._update(y,e,b,B);const I=this._bindings,D=this._nActiveBindings;for(let N=0;N!==D;++N)I[N].apply(B);return this}setTime(e){this.time=0;for(let o=0;o<this._actions.length;o++)this._actions[o].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const o=this._actions,f=e.uuid,y=this._actionsByClip,b=y[f];if(b!==void 0){const B=b.knownActions;for(let I=0,D=B.length;I!==D;++I){const N=B[I];this._deactivateAction(N);const K=N._cacheIndex,Z=o[o.length-1];N._cacheIndex=null,N._byClipCacheIndex=null,Z._cacheIndex=K,o[K]=Z,o.pop(),this._removeInactiveBindingsForAction(N)}delete y[f]}}uncacheRoot(e){const o=e.uuid,f=this._actionsByClip;for(const B in f){const I=f[B].actionByRoot,D=I[o];D!==void 0&&(this._deactivateAction(D),this._removeInactiveAction(D))}const y=this._bindingsByRootAndName,b=y[o];if(b!==void 0)for(const B in b){const I=b[B];I.restoreOriginalState(),this._removeInactiveBinding(I)}}uncacheAction(e,o){const f=this.existingAction(e,o);f!==null&&(this._deactivateAction(f),this._removeInactiveAction(f))}}class pA{constructor(e){this.value=e}clone(){return new pA(this.value.clone===void 0?this.value:this.value.clone())}}let Pu=0;class di extends wa{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Pu++}),this.name="",this.usage=pc,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const o=this.uniforms.indexOf(e);return o!==-1&&this.uniforms.splice(o,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const o=e.uniforms;this.uniforms.length=0;for(let f=0,y=o.length;f<y;f++)this.uniforms.push(o[f].clone());return this}clone(){return new this.constructor().copy(this)}}class sn extends d0{constructor(e,o,f=1){super(e,o),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=f}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const o=super.clone(e);return o.meshPerAttribute=this.meshPerAttribute,o}toJSON(e){const o=super.toJSON(e);return o.isInstancedInterleavedBuffer=!0,o.meshPerAttribute=this.meshPerAttribute,o}}class jf{constructor(e,o,f,y,b){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=o,this.itemSize=f,this.elementSize=y,this.count=b,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,o){return this.type=e,this.elementSize=o,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class Fh{constructor(e,o,f=0,y=1/0){this.ray=new Rp(e,o),this.near=f,this.far=y,this.camera=null,this.layers=new rp,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,o){this.ray.set(e,o)}setFromCamera(e,o){o.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(o.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(o).sub(this.ray.origin).normalize(),this.camera=o):o.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(o.near+o.far)/(o.near-o.far)).unproject(o),this.ray.direction.set(0,0,-1).transformDirection(o.matrixWorld),this.camera=o):C.error("THREE.Raycaster: Unsupported camera type: "+o.type)}intersectObject(e,o=!0,f=[]){return wd(e,this,f,o),f.sort(ku),f}intersectObjects(e,o=!0,f=[]){for(let y=0,b=e.length;y<b;y++)wd(e[y],this,f,o);return f.sort(ku),f}}function ku(S,e){return S.distance-e.distance}function wd(S,e,o,f){if(S.layers.test(e.layers)&&S.raycast(e,o),f===!0){const y=S.children;for(let b=0,B=y.length;b<B;b++)wd(y[b],e,o,!0)}}class kv{constructor(e=1,o=0,f=0){return this.radius=e,this.phi=o,this.theta=f,this}set(e,o,f){return this.radius=e,this.phi=o,this.theta=f,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,o,f){return this.radius=Math.sqrt(e*e+o*o+f*f),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,f),this.phi=Math.acos(ls(o/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class zv{constructor(e=1,o=0,f=0){return this.radius=e,this.theta=o,this.y=f,this}set(e,o,f){return this.radius=e,this.theta=o,this.y=f,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,o,f){return this.radius=Math.sqrt(e*e+f*f),this.theta=Math.atan2(e,f),this.y=o,this}clone(){return new this.constructor().copy(this)}}const Hf=new _n;class Wf{constructor(e=new _n(1/0,1/0),o=new _n(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=o}set(e,o){return this.min.copy(e),this.max.copy(o),this}setFromPoints(e){this.makeEmpty();for(let o=0,f=e.length;o<f;o++)this.expandByPoint(e[o]);return this}setFromCenterAndSize(e,o){const f=Hf.copy(o).multiplyScalar(.5);return this.min.copy(e).sub(f),this.max.copy(e).add(f),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,o){return o.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,o){return o.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Hf).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Xo=new je,mo=new je;class Gv{constructor(e=new je,o=new je){this.start=e,this.end=o}set(e,o){return this.start.copy(e),this.end.copy(o),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,o){return this.delta(o).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,o){Xo.subVectors(e,this.start),mo.subVectors(this.end,this.start);const f=mo.dot(mo);let b=mo.dot(Xo)/f;return o&&(b=ls(b,0,1)),b}closestPointToPoint(e,o,f){const y=this.closestPointToPointParameter(e,o);return this.delta(f).multiplyScalar(y).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Vf=new je;class vm extends Yi{constructor(e,o){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=o,this.type="SpotLightHelper";const f=new mi,y=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let B=0,I=1,D=32;B<D;B++,I++){const N=B/D*Math.PI*2,K=I/D*Math.PI*2;y.push(Math.cos(N),Math.sin(N),1,Math.cos(K),Math.sin(K),1)}f.setAttribute("position",new Dr(y,3));const b=new ml({fog:!1,toneMapped:!1});this.cone=new Al(f,b),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,o=e*Math.tan(this.light.angle);this.cone.scale.set(o,o,e),Vf.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Vf),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const gp=new je,_m=new ui,Em=new ui;class uA extends Al{constructor(e){const o=Uv(e),f=new mi,y=[],b=[],B=new br(0,0,1),I=new br(0,1,0);for(let N=0;N<o.length;N++){const K=o[N];K.parent&&K.parent.isBone&&(y.push(0,0,0),y.push(0,0,0),b.push(B.r,B.g,B.b),b.push(I.r,I.g,I.b))}f.setAttribute("position",new Dr(y,3)),f.setAttribute("color",new Dr(b,3));const D=new ml({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(f,D),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=o,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const o=this.bones,f=this.geometry,y=f.getAttribute("position");Em.copy(this.root.matrixWorld).invert();for(let b=0,B=0;b<o.length;b++){const I=o[b];I.parent&&I.parent.isBone&&(_m.multiplyMatrices(Em,I.matrixWorld),gp.setFromMatrixPosition(_m),y.setXYZ(B,gp.x,gp.y,gp.z),_m.multiplyMatrices(Em,I.parent.matrixWorld),gp.setFromMatrixPosition(_m),y.setXYZ(B+1,gp.x,gp.y,gp.z),B+=2)}f.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Uv(S){const e=[];S.isBone===!0&&e.push(S);for(let o=0;o<S.children.length;o++)e.push.apply(e,Uv(S.children[o]));return e}class Y3 extends Oo{constructor(e,o,f){const y=new Pf(o,4,2),b=new Ec({wireframe:!0,fog:!1,toneMapped:!1});super(y,b),this.light=e,this.color=f,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const P0=new je,dA=new br,Nv=new br;class J3 extends Yi{constructor(e,o,f){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=f,this.type="HemisphereLightHelper";const y=new Lf(o);y.rotateY(Math.PI*.5),this.material=new Ec({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const b=y.getAttribute("position"),B=new Float32Array(b.count*3);y.setAttribute("color",new no(B,3)),this.add(new Oo(y,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const o=e.geometry.getAttribute("color");dA.copy(this.light.color),Nv.copy(this.light.groundColor);for(let f=0,y=o.count;f<y;f++){const b=f<y/2?dA:Nv;o.setXYZ(f,b.r,b.g,b.b)}o.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(P0.setFromMatrixPosition(this.light.matrixWorld).negate())}}class li extends Al{constructor(e=10,o=10,f=4473924,y=8947848){f=new br(f),y=new br(y);const b=o/2,B=e/o,I=e/2,D=[],N=[];for(let q=0,ee=0,ie=-I;q<=o;q++,ie+=B){D.push(-I,0,ie,I,0,ie),D.push(ie,0,-I,ie,0,I);const he=q===b?f:y;he.toArray(N,ee),ee+=3,he.toArray(N,ee),ee+=3,he.toArray(N,ee),ee+=3,he.toArray(N,ee),ee+=3}const K=new mi;K.setAttribute("position",new Dr(D,3)),K.setAttribute("color",new Dr(N,3));const Z=new ml({vertexColors:!0,toneMapped:!1});super(K,Z),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class jv extends Al{constructor(e=10,o=16,f=8,y=64,b=4473924,B=8947848){b=new br(b),B=new br(B);const I=[],D=[];if(o>1)for(let Z=0;Z<o;Z++){const q=Z/o*(Math.PI*2),ee=Math.sin(q)*e,ie=Math.cos(q)*e;I.push(0,0,0),I.push(ee,0,ie);const he=Z&1?b:B;D.push(he.r,he.g,he.b),D.push(he.r,he.g,he.b)}for(let Z=0;Z<f;Z++){const q=Z&1?b:B,ee=e-e/f*Z;for(let ie=0;ie<y;ie++){let he=ie/y*(Math.PI*2),se=Math.sin(he)*ee,ne=Math.cos(he)*ee;I.push(se,0,ne),D.push(q.r,q.g,q.b),he=(ie+1)/y*(Math.PI*2),se=Math.sin(he)*ee,ne=Math.cos(he)*ee,I.push(se,0,ne),D.push(q.r,q.g,q.b)}}const N=new mi;N.setAttribute("position",new Dr(I,3)),N.setAttribute("color",new Dr(D,3));const K=new ml({vertexColors:!0,toneMapped:!1});super(N,K),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const bm=new je,Qf=new je,kl=new je;class ki extends Yi{constructor(e,o,f){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=f,this.type="DirectionalLightHelper",o===void 0&&(o=1);let y=new mi;y.setAttribute("position",new Dr([-o,o,0,o,o,0,o,-o,0,-o,-o,0,-o,o,0],3));const b=new ml({fog:!1,toneMapped:!1});this.lightPlane=new Ed(y,b),this.add(this.lightPlane),y=new mi,y.setAttribute("position",new Dr([0,0,0,0,0,1],3)),this.targetLine=new Ed(y,b),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),bm.setFromMatrixPosition(this.light.matrixWorld),Qf.setFromMatrixPosition(this.light.target.matrixWorld),kl.subVectors(Qf,bm),this.lightPlane.lookAt(Qf),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Qf),this.targetLine.scale.z=kl.length()}}const io=new je,Yo=new Qi;class Mm extends Al{constructor(e){const o=new mi,f=new ml({color:16777215,vertexColors:!0,toneMapped:!1}),y=[],b=[],B={};I("n1","n2"),I("n2","n4"),I("n4","n3"),I("n3","n1"),I("f1","f2"),I("f2","f4"),I("f4","f3"),I("f3","f1"),I("n1","f1"),I("n2","f2"),I("n3","f3"),I("n4","f4"),I("p","n1"),I("p","n2"),I("p","n3"),I("p","n4"),I("u1","u2"),I("u2","u3"),I("u3","u1"),I("c","t"),I("p","c"),I("cn1","cn2"),I("cn3","cn4"),I("cf1","cf2"),I("cf3","cf4");function I(ie,he){D(ie),D(he)}function D(ie){y.push(0,0,0),b.push(0,0,0),B[ie]===void 0&&(B[ie]=[]),B[ie].push(y.length/3-1)}o.setAttribute("position",new Dr(y,3)),o.setAttribute("color",new Dr(b,3)),super(o,f),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=B,this.update();const N=new br(16755200),K=new br(16711680),Z=new br(43775),q=new br(16777215),ee=new br(3355443);this.setColors(N,K,Z,q,ee)}setColors(e,o,f,y,b){const I=this.geometry.getAttribute("color");I.setXYZ(0,e.r,e.g,e.b),I.setXYZ(1,e.r,e.g,e.b),I.setXYZ(2,e.r,e.g,e.b),I.setXYZ(3,e.r,e.g,e.b),I.setXYZ(4,e.r,e.g,e.b),I.setXYZ(5,e.r,e.g,e.b),I.setXYZ(6,e.r,e.g,e.b),I.setXYZ(7,e.r,e.g,e.b),I.setXYZ(8,e.r,e.g,e.b),I.setXYZ(9,e.r,e.g,e.b),I.setXYZ(10,e.r,e.g,e.b),I.setXYZ(11,e.r,e.g,e.b),I.setXYZ(12,e.r,e.g,e.b),I.setXYZ(13,e.r,e.g,e.b),I.setXYZ(14,e.r,e.g,e.b),I.setXYZ(15,e.r,e.g,e.b),I.setXYZ(16,e.r,e.g,e.b),I.setXYZ(17,e.r,e.g,e.b),I.setXYZ(18,e.r,e.g,e.b),I.setXYZ(19,e.r,e.g,e.b),I.setXYZ(20,e.r,e.g,e.b),I.setXYZ(21,e.r,e.g,e.b),I.setXYZ(22,e.r,e.g,e.b),I.setXYZ(23,e.r,e.g,e.b),I.setXYZ(24,o.r,o.g,o.b),I.setXYZ(25,o.r,o.g,o.b),I.setXYZ(26,o.r,o.g,o.b),I.setXYZ(27,o.r,o.g,o.b),I.setXYZ(28,o.r,o.g,o.b),I.setXYZ(29,o.r,o.g,o.b),I.setXYZ(30,o.r,o.g,o.b),I.setXYZ(31,o.r,o.g,o.b),I.setXYZ(32,f.r,f.g,f.b),I.setXYZ(33,f.r,f.g,f.b),I.setXYZ(34,f.r,f.g,f.b),I.setXYZ(35,f.r,f.g,f.b),I.setXYZ(36,f.r,f.g,f.b),I.setXYZ(37,f.r,f.g,f.b),I.setXYZ(38,y.r,y.g,y.b),I.setXYZ(39,y.r,y.g,y.b),I.setXYZ(40,b.r,b.g,b.b),I.setXYZ(41,b.r,b.g,b.b),I.setXYZ(42,b.r,b.g,b.b),I.setXYZ(43,b.r,b.g,b.b),I.setXYZ(44,b.r,b.g,b.b),I.setXYZ(45,b.r,b.g,b.b),I.setXYZ(46,b.r,b.g,b.b),I.setXYZ(47,b.r,b.g,b.b),I.setXYZ(48,b.r,b.g,b.b),I.setXYZ(49,b.r,b.g,b.b),I.needsUpdate=!0}update(){const e=this.geometry,o=this.pointMap,f=1,y=1;Yo.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),wo("c",o,e,Yo,0,0,-1),wo("t",o,e,Yo,0,0,1),wo("n1",o,e,Yo,-f,-y,-1),wo("n2",o,e,Yo,f,-y,-1),wo("n3",o,e,Yo,-f,y,-1),wo("n4",o,e,Yo,f,y,-1),wo("f1",o,e,Yo,-f,-y,1),wo("f2",o,e,Yo,f,-y,1),wo("f3",o,e,Yo,-f,y,1),wo("f4",o,e,Yo,f,y,1),wo("u1",o,e,Yo,f*.7,y*1.1,-1),wo("u2",o,e,Yo,-f*.7,y*1.1,-1),wo("u3",o,e,Yo,0,y*2,-1),wo("cf1",o,e,Yo,-f,0,1),wo("cf2",o,e,Yo,f,0,1),wo("cf3",o,e,Yo,0,-y,1),wo("cf4",o,e,Yo,0,y,1),wo("cn1",o,e,Yo,-f,0,-1),wo("cn2",o,e,Yo,f,0,-1),wo("cn3",o,e,Yo,0,-y,-1),wo("cn4",o,e,Yo,0,y,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function wo(S,e,o,f,y,b,B){io.set(y,b,B).unproject(f);const I=e[S];if(I!==void 0){const D=o.getAttribute("position");for(let N=0,K=I.length;N<K;N++)D.setXYZ(I[N],io.x,io.y,io.z)}}const Rc=new Qo;class Oh extends Al{constructor(e,o=16776960){const f=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),y=new Float32Array(8*3),b=new mi;b.setIndex(new no(f,1)),b.setAttribute("position",new no(y,3)),super(b,new ml({color:o,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&C.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Rc.setFromObject(this.object),Rc.isEmpty())return;const o=Rc.min,f=Rc.max,y=this.geometry.attributes.position,b=y.array;b[0]=f.x,b[1]=f.y,b[2]=f.z,b[3]=o.x,b[4]=f.y,b[5]=f.z,b[6]=o.x,b[7]=o.y,b[8]=f.z,b[9]=f.x,b[10]=o.y,b[11]=f.z,b[12]=f.x,b[13]=f.y,b[14]=o.z,b[15]=o.x,b[16]=f.y,b[17]=o.z,b[18]=o.x,b[19]=o.y,b[20]=o.z,b[21]=f.x,b[22]=o.y,b[23]=o.z,y.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,o){return super.copy(e,o),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Hv extends Al{constructor(e,o=16776960){const f=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),y=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],b=new mi;b.setIndex(new no(f,1)),b.setAttribute("position",new Dr(y,3)),super(b,new ml({color:o,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const o=this.box;o.isEmpty()||(o.getCenter(this.position),o.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Wv extends Ed{constructor(e,o=1,f=16776960){const y=f,b=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],B=new mi;B.setAttribute("position",new Dr(b,3)),B.computeBoundingSphere(),super(B,new ml({color:y,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=o;const I=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],D=new mi;D.setAttribute("position",new Dr(I,3)),D.computeBoundingSphere(),this.add(new Oo(D,new Ec({color:y,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const Ic=new je;let Td,Bd;class Vv extends Yi{constructor(e=new je(0,0,1),o=new je(0,0,0),f=1,y=16776960,b=f*.2,B=b*.2){super(),this.type="ArrowHelper",Td===void 0&&(Td=new mi,Td.setAttribute("position",new Dr([0,0,0,0,1,0],3)),Bd=new bd(0,.5,1,5,1),Bd.translate(0,-.5,0)),this.position.copy(o),this.line=new Ed(Td,new ml({color:y,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Oo(Bd,new Ec({color:y,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(f,b,B)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{Ic.set(e.z,0,-e.x).normalize();const o=Math.acos(e.y);this.quaternion.setFromAxisAngle(Ic,o)}}setLength(e,o=e*.2,f=o*.2){this.line.scale.set(1,Math.max(1e-4,e-o),1),this.line.updateMatrix(),this.cone.scale.set(f,o,f),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class hA extends Al{constructor(e=1){const o=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],f=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],y=new mi;y.setAttribute("position",new Dr(o,3)),y.setAttribute("color",new Dr(f,3));const b=new ml({vertexColors:!0,toneMapped:!1});super(y,b),this.type="AxesHelper"}setColors(e,o,f){const y=new br,b=this.geometry.attributes.color.array;return y.set(e),y.toArray(b,0),y.toArray(b,3),y.set(o),y.toArray(b,6),y.toArray(b,9),y.set(f),y.toArray(b,12),y.toArray(b,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Qv{constructor(){this.type="ShapePath",this.color=new br,this.subPaths=[],this.currentPath=null}moveTo(e,o){return this.currentPath=new $g,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,o),this}lineTo(e,o){return this.currentPath.lineTo(e,o),this}quadraticCurveTo(e,o,f,y){return this.currentPath.quadraticCurveTo(e,o,f,y),this}bezierCurveTo(e,o,f,y,b,B){return this.currentPath.bezierCurveTo(e,o,f,y,b,B),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function o(ne){const be=[];for(let fe=0,xe=ne.length;fe<xe;fe++){const Le=ne[fe],He=new Mh;He.curves=Le.curves,be.push(He)}return be}function f(ne,be){const fe=be.length;let xe=!1;for(let Le=fe-1,He=0;He<fe;Le=He++){let qe=be[Le],et=be[He],we=et.x-qe.x,We=et.y-qe.y;if(Math.abs(We)>Number.EPSILON){if(We<0&&(qe=be[He],we=-we,et=be[Le],We=-We),ne.y<qe.y||ne.y>et.y)continue;if(ne.y===qe.y){if(ne.x===qe.x)return!0}else{const Wt=We*(ne.x-qe.x)-we*(ne.y-qe.y);if(Wt===0)return!0;if(Wt<0)continue;xe=!xe}}else{if(ne.y!==qe.y)continue;if(et.x<=ne.x&&ne.x<=qe.x||qe.x<=ne.x&&ne.x<=et.x)return!0}}return xe}const y=Sc.isClockWise,b=this.subPaths;if(b.length===0)return[];let B,I,D;const N=[];if(b.length===1)return I=b[0],D=new Mh,D.curves=I.curves,N.push(D),N;let K=!y(b[0].getPoints());K=e?!K:K;const Z=[],q=[];let ee=[],ie=0,he;q[ie]=void 0,ee[ie]=[];for(let ne=0,be=b.length;ne<be;ne++)I=b[ne],he=I.getPoints(),B=y(he),B=e?!B:B,B?(!K&&q[ie]&&ie++,q[ie]={s:new Mh,p:he},q[ie].s.curves=I.curves,K&&ie++,ee[ie]=[]):ee[ie].push({h:I,p:he[0]});if(!q[0])return o(b);if(q.length>1){let ne=!1,be=0;for(let fe=0,xe=q.length;fe<xe;fe++)Z[fe]=[];for(let fe=0,xe=q.length;fe<xe;fe++){const Le=ee[fe];for(let He=0;He<Le.length;He++){const qe=Le[He];let et=!0;for(let we=0;we<q.length;we++)f(qe.p,q[we].p)&&(fe!==we&&be++,et?(et=!1,Z[we].push(qe)):ne=!0);et&&Z[fe].push(qe)}}be>0&&ne===!1&&(ee=Z)}let se;for(let ne=0,be=q.length;ne<be;ne++){D=q[ne].s,N.push(D),se=ee[ne];for(let fe=0,xe=se.length;fe<xe;fe++)D.holes.push(se[fe].h)}return N}}class fA extends Fl{constructor(e,o,f,y,b,B){C.warn("THREE.BoxBufferGeometry has been renamed to THREE.BoxGeometry."),super(e,o,f,y,b,B)}}class gA extends Ff{constructor(e,o,f,y){C.warn("THREE.CapsuleBufferGeometry has been renamed to THREE.CapsuleGeometry."),super(e,o,f,y)}}class k0 extends tm{constructor(e,o,f,y){C.warn("THREE.CircleBufferGeometry has been renamed to THREE.CircleGeometry."),super(e,o,f,y)}}class Kf extends nm{constructor(e,o,f,y,b,B,I){C.warn("THREE.ConeBufferGeometry has been renamed to THREE.ConeGeometry."),super(e,o,f,y,b,B,I)}}class Z3 extends bd{constructor(e,o,f,y,b,B,I,D){C.warn("THREE.CylinderBufferGeometry has been renamed to THREE.CylinderGeometry."),super(e,o,f,y,b,B,I,D)}}class Kv extends Zs{constructor(e,o){C.warn("THREE.DodecahedronBufferGeometry has been renamed to THREE.DodecahedronGeometry."),super(e,o)}}class Xv extends Sh{constructor(e,o){C.warn("THREE.ExtrudeBufferGeometry has been renamed to THREE.ExtrudeGeometry."),super(e,o)}}class q3 extends sm{constructor(e,o){C.warn("THREE.IcosahedronBufferGeometry has been renamed to THREE.IcosahedronGeometry."),super(e,o)}}class $3 extends em{constructor(e,o,f,y){C.warn("THREE.LatheBufferGeometry has been renamed to THREE.LatheGeometry."),super(e,o,f,y)}}class eE extends Lf{constructor(e,o){C.warn("THREE.OctahedronBufferGeometry has been renamed to THREE.OctahedronGeometry."),super(e,o)}}class Yv extends Pp{constructor(e,o,f,y){C.warn("THREE.PlaneBufferGeometry has been renamed to THREE.PlaneGeometry."),super(e,o,f,y)}}class Xf extends Fu{constructor(e,o,f,y){C.warn("THREE.PolyhedronBufferGeometry has been renamed to THREE.PolyhedronGeometry."),super(e,o,f,y)}}class mA extends am{constructor(e,o,f,y,b,B){C.warn("THREE.RingBufferGeometry has been renamed to THREE.RingGeometry."),super(e,o,f,y,b,B)}}class z0 extends lm{constructor(e,o){C.warn("THREE.ShapeBufferGeometry has been renamed to THREE.ShapeGeometry."),super(e,o)}}class Jv extends Pf{constructor(e,o,f,y,b,B,I){C.warn("THREE.SphereBufferGeometry has been renamed to THREE.SphereGeometry."),super(e,o,f,y,b,B,I)}}class Zv extends cm{constructor(e,o){C.warn("THREE.TetrahedronBufferGeometry has been renamed to THREE.TetrahedronGeometry."),super(e,o)}}class AA extends pm{constructor(e,o,f,y,b){C.warn("THREE.TorusBufferGeometry has been renamed to THREE.TorusGeometry."),super(e,o,f,y,b)}}class tE extends um{constructor(e,o,f,y,b,B){C.warn("THREE.TorusKnotBufferGeometry has been renamed to THREE.TorusKnotGeometry."),super(e,o,f,y,b,B)}}class qv extends dm{constructor(e,o,f,y,b){C.warn("THREE.TubeBufferGeometry has been renamed to THREE.TubeGeometry."),super(e,o,f,y,b)}}typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:d}})),typeof window!="undefined"&&(window.__THREE__?C.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=d)}}]);

//# sourceMappingURL=889.afcca0ac655169771146.js.map